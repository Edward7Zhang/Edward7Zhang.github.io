<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[è¯´23ç§è®¾è®¡æ¨¡å¼ï¼Œä¹Ÿè¯´ç®—æ³•ä¸Žæ•°æ®ç»“æž„]]></title>
    <url>%2F2019%2F03%2F19%2F%E8%AF%B423%E7%A7%8D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%8C%E4%B9%9F%E8%AF%B4%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%2F</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼Ÿ è®¾è®¡æ¨¡å¼ï¼ˆDesign patternï¼‰æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚ä½¿ç”¨è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†å¯é‡ç”¨ä»£ç ã€è®©ä»£ç æ›´å®¹æ˜“è¢«ä»–äººç†è§£ã€ä¿è¯ä»£ç å¯é æ€§ã€‚ æ¯«æ— ç–‘é—®ï¼Œè®¾è®¡æ¨¡å¼äºŽå·±äºŽä»–äººäºŽç³»ç»Ÿéƒ½æ˜¯å¤šèµ¢çš„ï¼Œè®¾è®¡æ¨¡å¼ä½¿ä»£ç ç¼–åˆ¶çœŸæ­£å·¥ç¨‹åŒ–ï¼Œè®¾è®¡æ¨¡å¼æ˜¯è½¯ä»¶å·¥ç¨‹çš„åŸºçŸ³ï¼Œå¦‚åŒå¤§åŽ¦çš„ä¸€å—å—ç –çŸ³ä¸€æ ·ã€‚é¡¹ç›®ä¸­åˆç†çš„è¿ç”¨è®¾è®¡æ¨¡å¼å¯ä»¥å®Œç¾Žçš„è§£å†³å¾ˆå¤šé—®é¢˜ï¼Œæ¯ç§æ¨¡å¼åœ¨çŽ°åœ¨ä¸­éƒ½æœ‰ç›¸åº”çš„åŽŸç†æ¥ä¸Žä¹‹å¯¹åº”ï¼Œæ¯ä¸€ä¸ªæ¨¡å¼æè¿°äº†ä¸€ä¸ªåœ¨æˆ‘ä»¬å‘¨å›´ä¸æ–­é‡å¤å‘ç”Ÿçš„é—®é¢˜ï¼Œä»¥åŠè¯¥é—®é¢˜çš„æ ¸å¿ƒè§£å†³æ–¹æ¡ˆï¼Œè¿™ä¹Ÿæ˜¯å®ƒèƒ½è¢«å¹¿æ³›åº”ç”¨çš„åŽŸå› ã€‚ç®€å•è¯´ï¼š æ¨¡å¼ï¼šåœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œé’ˆå¯¹æŸç±»é—®é¢˜çš„æŸç§é€šç”¨çš„è§£å†³æ–¹æ¡ˆã€‚ åœºæ™¯ï¼šé¡¹ç›®æ‰€åœ¨çš„çŽ¯å¢ƒ é—®é¢˜ï¼šçº¦æŸæ¡ä»¶ï¼Œé¡¹ç›®ç›®æ ‡ç­‰ è§£å†³æ–¹æ¡ˆï¼šé€šç”¨ã€å¯å¤ç”¨çš„è®¾è®¡ï¼Œè§£å†³çº¦æŸè¾¾åˆ°ç›®æ ‡ã€‚ è®¾è®¡æ¨¡å¼çš„ä¸‰ä¸ªåˆ†ç±» åˆ›å»ºåž‹æ¨¡å¼ï¼šå¯¹è±¡å®žä¾‹åŒ–çš„æ¨¡å¼ï¼Œåˆ›å»ºåž‹æ¨¡å¼ç”¨äºŽè§£è€¦å¯¹è±¡çš„å®žä¾‹åŒ–è¿‡ç¨‹ã€‚ ç»“æž„åž‹æ¨¡å¼ï¼šæŠŠç±»æˆ–å¯¹è±¡ç»“åˆåœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªæ›´å¤§çš„ç»“æž„ã€‚ è¡Œä¸ºåž‹æ¨¡å¼ï¼šç±»å’Œå¯¹è±¡å¦‚ä½•äº¤äº’ï¼ŒåŠåˆ’åˆ†è´£ä»»å’Œç®—æ³•ã€‚ è®¾è®¡æ¨¡å¼.png æ¦‚è¯´ 23 ç§è®¾è®¡æ¨¡å¼å•ä¾‹æ¨¡å¼ å•ä¾‹æ¨¡å¼ï¼Œå®ƒçš„å®šä¹‰å°±æ˜¯ç¡®ä¿æŸä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®žä¾‹ï¼Œå¹¶ä¸”æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹ã€‚ å•ä¾‹æ¨¡å¼å…·å¤‡å…¸åž‹çš„ 3 ä¸ªç‰¹ç‚¹ï¼š åªæœ‰ä¸€ä¸ªå®žä¾‹ã€‚ è‡ªæˆ‘å®žä¾‹åŒ–ã€‚ æä¾›å…¨å±€è®¿é—®ç‚¹ã€‚ å› æ­¤å½“ç³»ç»Ÿä¸­åªéœ€è¦ä¸€ä¸ªå®žä¾‹å¯¹è±¡æˆ–è€…ç³»ç»Ÿä¸­åªå…è®¸ä¸€ä¸ªå…¬å…±è®¿é—®ç‚¹ï¼Œé™¤äº†è¿™ä¸ªå…¬å…±è®¿é—®ç‚¹å¤–ï¼Œä¸èƒ½é€šè¿‡å…¶ä»–è®¿é—®ç‚¹è®¿é—®è¯¥å®žä¾‹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å•ä¾‹æ¨¡å¼ã€‚ å•ä¾‹æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹å°±æ˜¯èŠ‚çº¦ç³»ç»Ÿèµ„æºã€æé«˜äº†ç³»ç»Ÿæ•ˆçŽ‡ï¼ŒåŒæ—¶ä¹Ÿèƒ½å¤Ÿä¸¥æ ¼æŽ§åˆ¶å®¢æˆ·å¯¹å®ƒçš„è®¿é—®ã€‚ä¹Ÿè®¸å°±æ˜¯å› ä¸ºç³»ç»Ÿä¸­åªæœ‰ä¸€ä¸ªå®žä¾‹ï¼Œè¿™æ ·å°±å¯¼è‡´äº†å•ä¾‹ç±»çš„èŒè´£è¿‡é‡ï¼Œè¿èƒŒäº† â€œå•ä¸€èŒè´£åŽŸåˆ™â€ï¼ŒåŒæ—¶ä¹Ÿæ²¡æœ‰æŠ½è±¡ç±»ï¼Œæ‰€ä»¥æ‰©å±•èµ·æ¥æœ‰ä¸€å®šçš„å›°éš¾ã€‚å…¶ UML ç»“æž„å›¾éžå¸¸ç®€å•ï¼Œå°±åªæœ‰ä¸€ä¸ªç±»ï¼Œå¦‚ä¸‹å›¾ï¼š Design Patterns - Singleton.png å·¥åŽ‚æ–¹æ³•æ¨¡å¼ä½œä¸ºæŠ½è±¡å·¥åŽ‚æ¨¡å¼çš„å­ªç”Ÿå…„å¼Ÿï¼Œå·¥åŽ‚æ–¹æ³•æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æŽ¥å£ï¼Œä½†ç”±å­ç±»å†³å®šè¦å®žä¾‹åŒ–çš„ç±»æ˜¯å“ªä¸€ä¸ªï¼Œä¹Ÿå°±æ˜¯è¯´å·¥åŽ‚æ–¹æ³•æ¨¡å¼è®©å®žä¾‹åŒ–æŽ¨è¿Ÿåˆ°å­ç±»ã€‚ å·¥åŽ‚æ–¹æ³•æ¨¡å¼éžå¸¸ç¬¦åˆâ€œå¼€é—­åŽŸåˆ™â€ï¼Œå½“éœ€è¦å¢žåŠ ä¸€ä¸ªæ–°çš„äº§å“æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦å¢žåŠ ä¸€ä¸ªå…·ä½“çš„äº§å“ç±»å’Œä¸Žä¹‹å¯¹åº”çš„å…·ä½“å·¥åŽ‚å³å¯ï¼Œæ— éœ€ä¿®æ”¹åŽŸæœ‰ç³»ç»Ÿã€‚åŒæ—¶åœ¨å·¥åŽ‚æ–¹æ³•æ¨¡å¼ä¸­ç”¨æˆ·åªéœ€è¦çŸ¥é“ç”Ÿäº§äº§å“çš„å…·ä½“å·¥åŽ‚å³å¯ï¼Œæ— éœ€å…³ç³»äº§å“çš„åˆ›å»ºè¿‡ç¨‹ï¼Œç”šè‡³è¿žå…·ä½“çš„äº§å“ç±»åç§°éƒ½ä¸éœ€è¦çŸ¥é“ã€‚è™½ç„¶ä»–å¾ˆå¥½çš„ç¬¦åˆäº†â€œå¼€é—­åŽŸåˆ™â€ï¼Œä½†æ˜¯ç”±äºŽæ¯æ–°å¢žä¸€ä¸ªæ–°äº§å“å°±éœ€è¦å¢žåŠ ä¸¤ä¸ªç±»ï¼Œè¿™æ ·åŠ¿å¿…ä¼šå¯¼è‡´ç³»ç»Ÿçš„å¤æ‚åº¦å¢žåŠ ã€‚å…¶ UML ç»“æž„å›¾ï¼š Design Patterns - Factory.png æŠ½è±¡å·¥åŽ‚æ¨¡å¼æ‰€è°“æŠ½è±¡å·¥åŽ‚æ¨¡å¼å°±æ˜¯æä¾›ä¸€ä¸ªæŽ¥å£ï¼Œç”¨äºŽåˆ›å»ºç›¸å…³æˆ–è€…ä¾èµ–å¯¹è±¡çš„å®¶æ—ï¼Œè€Œä¸éœ€è¦æ˜Žç¡®æŒ‡å®šå…·ä½“ç±»ã€‚å®ƒå…è®¸å®¢æˆ·ç«¯ä½¿ç”¨æŠ½è±¡çš„æŽ¥å£æ¥åˆ›å»ºä¸€ç»„ç›¸å…³çš„äº§å“ï¼Œè€Œä¸éœ€è¦å…³ç³»å®žé™…äº§å‡ºçš„å…·ä½“äº§å“æ˜¯ä»€ä¹ˆã€‚è¿™æ ·ä¸€æ¥ï¼Œå®¢æˆ·å°±å¯ä»¥ä»Žå…·ä½“çš„äº§å“ä¸­è¢«è§£è€¦ã€‚å®ƒçš„ä¼˜ç‚¹æ˜¯éš”ç¦»äº†å…·ä½“ç±»çš„ç”Ÿæˆï¼Œä½¿å¾—å®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“ä»€ä¹ˆè¢«åˆ›å»ºäº†ï¼Œè€Œç¼ºç‚¹å°±åœ¨äºŽæ–°å¢žæ–°çš„è¡Œä¸ºä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œå› ä¸ºå½“æ·»åŠ ä¸€ä¸ªæ–°çš„äº§å“å¯¹è±¡æ—¶ï¼Œéœ€è¦æ›´æ”¹æŽ¥å£åŠå…¶ä¸‹æ‰€æœ‰å­ç±»ã€‚å…¶ UML ç»“æž„å›¾å¦‚ä¸‹ï¼š Design Patterns - AbstractFactory.png å»ºé€ è€…æ¨¡å¼å¯¹äºŽå»ºé€ è€…æ¨¡å¼ï¼Œå®ƒä¸»è¦æ˜¯å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æž„å»ºä¸Žè¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æž„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚é€‚ç”¨äºŽé‚£äº›äº§å“å¯¹è±¡çš„å†…éƒ¨ç»“æž„æ¯”è¾ƒå¤æ‚ã€‚ å»ºé€ è€…æ¨¡å¼å°†å¤æ‚äº§å“çš„æž„å»ºè¿‡ç¨‹å°è£…åˆ†è§£åœ¨ä¸åŒçš„æ–¹æ³•ä¸­ï¼Œä½¿å¾—åˆ›å»ºè¿‡ç¨‹éžå¸¸æ¸…æ™°ï¼Œèƒ½å¤Ÿè®©æˆ‘ä»¬æ›´åŠ ç²¾ç¡®çš„æŽ§åˆ¶å¤æ‚äº§å“å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼ŒåŒæ—¶å®ƒéš”ç¦»äº†å¤æ‚äº§å“å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨ï¼Œä½¿å¾—ç›¸åŒçš„åˆ›å»ºè¿‡ç¨‹èƒ½å¤Ÿåˆ›å»ºä¸åŒçš„äº§å“ã€‚ä½†æ˜¯å¦‚æžœæŸä¸ªäº§å“çš„å†…éƒ¨ç»“æž„è¿‡äºŽå¤æ‚ï¼Œå°†ä¼šå¯¼è‡´æ•´ä¸ªç³»ç»Ÿå˜å¾—éžå¸¸åºžå¤§ï¼Œä¸åˆ©äºŽæŽ§åˆ¶ï¼ŒåŒæ—¶è‹¥å‡ ä¸ªäº§å“ä¹‹é—´å­˜åœ¨è¾ƒå¤§çš„å·®å¼‚ï¼Œåˆ™ä¸é€‚ç”¨å»ºé€ è€…æ¨¡å¼ï¼Œæ¯•ç«Ÿè¿™ä¸ªä¸–ç•Œä¸Šå­˜åœ¨ç›¸åŒç‚¹å¤šçš„ä¸¤ä¸ªäº§å“ä¸æ˜¯å¾ˆå¤šï¼Œæ‰€ä»¥å®ƒçš„ä½¿ç”¨èŒƒå›´æœ‰é™ã€‚å…¶ UML ç»“æž„å›¾ï¼š Design Patterns - Builder.png åŽŸåž‹æ¨¡å¼åœ¨æˆ‘ä»¬åº”ç”¨ç¨‹åºå¯èƒ½æœ‰æŸäº›å¯¹è±¡çš„ç»“æž„æ¯”è¾ƒå¤æ‚ï¼Œä½†æ˜¯æˆ‘ä»¬æœ‰éœ€è¦é¢‘ç¹çš„ä½¿ç”¨å®ƒä»¬ï¼Œå¦‚æžœè¿™ä¸ªæ—¶å€™æˆ‘ä»¬æ¥ä¸æ–­çš„æ–°å»ºè¿™ä¸ªå¯¹è±¡åŠ¿å¿…ä¼šå¤§å¤§æŸè€—ç³»ç»Ÿå†…å­˜çš„ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦ä½¿ç”¨åŽŸåž‹æ¨¡å¼æ¥å¯¹è¿™ä¸ªç»“æž„å¤æ‚åˆè¦é¢‘ç¹ä½¿ç”¨çš„å¯¹è±¡è¿›è¡Œå…‹éš†ã€‚æ‰€ä»¥åŽŸåž‹æ¨¡å¼å°±æ˜¯ç”¨åŽŸåž‹å®žä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œå¹¶ä¸”é€šè¿‡å¤åˆ¶è¿™äº›åŽŸåž‹åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚ å®ƒä¸»è¦åº”ç”¨äºŽé‚£äº›åˆ›å»ºæ–°å¯¹è±¡çš„æˆæœ¬è¿‡å¤§æ—¶ã€‚å®ƒçš„ä¸»è¦ä¼˜ç‚¹å°±æ˜¯ç®€åŒ–äº†æ–°å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼Œæé«˜äº†æ•ˆçŽ‡ï¼ŒåŒæ—¶åŽŸåž‹æ¨¡å¼æä¾›äº†ç®€åŒ–çš„åˆ›å»ºç»“æž„ã€‚UML ç»“æž„å›¾ï¼š Design Patterns - Prototype.png æ¨¡å¼ç»“æž„åŽŸåž‹æ¨¡å¼åŒ…å«å¦‚ä¸‹è§’è‰²ï¼šPrototypeï¼šæŠ½è±¡åŽŸåž‹ç±»ConcretePrototypeï¼šå…·ä½“åŽŸåž‹ç±»Clientï¼šå®¢æˆ·ç±» é€‚é…å™¨æ¨¡å¼åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­æˆ‘ä»¬å¯èƒ½éœ€è¦å°†ä¸¤ä¸ªä¸åŒæŽ¥å£çš„ç±»æ¥è¿›è¡Œé€šä¿¡ï¼Œåœ¨ä¸ä¿®æ”¹è¿™ä¸¤ä¸ªçš„å‰æä¸‹æˆ‘ä»¬å¯èƒ½ä¼šéœ€è¦æŸä¸ªä¸­é—´ä»¶æ¥å®Œæˆè¿™ä¸ªè¡”æŽ¥çš„è¿‡ç¨‹ã€‚è¿™ä¸ªä¸­é—´ä»¶å°±æ˜¯é€‚é…å™¨ã€‚æ‰€è°“é€‚é…å™¨æ¨¡å¼å°±æ˜¯å°†ä¸€ä¸ªç±»çš„æŽ¥å£ï¼Œè½¬æ¢æˆå®¢æˆ·æœŸæœ›çš„å¦ä¸€ä¸ªæŽ¥å£ã€‚å®ƒå¯ä»¥è®©åŽŸæœ¬ä¸¤ä¸ªä¸å…¼å®¹çš„æŽ¥å£èƒ½å¤Ÿæ— ç¼å®Œæˆå¯¹æŽ¥ã€‚ ä½œä¸ºä¸­é—´ä»¶çš„é€‚é…å™¨å°†ç›®æ ‡ç±»å’Œé€‚é…è€…è§£è€¦ï¼Œå¢žåŠ äº†ç±»çš„é€æ˜Žæ€§å’Œå¯å¤ç”¨æ€§ã€‚ Design Patterns - Adapter.png é€‚é…å™¨æ¨¡å¼åŒ…å«å¦‚ä¸‹è§’è‰²ï¼šTargetï¼šç›®æ ‡æŠ½è±¡ç±»Adapterï¼šé€‚é…å™¨ç±»Adapteeï¼šé€‚é…è€…ç±»Clientï¼šå®¢æˆ·ç±» æ¡¥æŽ¥æ¨¡å¼ æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚ æŽ’åºç®—æ³• æ’å…¥æŽ’åºç›´æŽ¥æ’å…¥æŽ’åº æ—¶é—´å¤æ‚åº¦ ç©ºé—´å¤æ‚åº¦ ç¨³å®šæ€§ $O(n^2)$ $O(1)$ âˆš 1234567891011121314public static void insertSort(int[] numbers) &#123; int size = numbers.length; int temp = 0; int j = 0; for (int i = 1; i &lt; size; i++) &#123; temp = numbers[i]; // å‡å¦‚tempæ¯”å‰é¢çš„å€¼å°ï¼Œåˆ™å°†å‰é¢çš„å€¼åŽç§» for (j = i; j &gt; 0 &amp;&amp; temp &lt; numbers[j - 1]; j--) &#123; numbers[j] = numbers[j - 1]; &#125; numbers[j] = temp; &#125;&#125;//æ—¶é—´å¤æ‚åº¦O(n*n) æ€§èƒ½ä¸Šä¼˜äºŽå†’æ³¡æŽ’åºå’Œé€‰æ‹©æŽ’åº æŠ˜åŠæ’å…¥æŽ’åº æ—¶é—´å¤æ‚åº¦ ç©ºé—´å¤æ‚åº¦ ç¨³å®šæ€§ $O(n^2)$ $O(1)$ âˆš 123456789101112131415161718192021public static void insertSortHalf(int[] A)&#123; int i, j, low, high, mid; int n = A.length-1; for(i = 1; i &lt;= n; i++)&#123; A[0] = A[i]; low = 1; high = i-1; while(low &lt;= high)&#123; mid = (low + high)/2; if(A[mid]&gt;A[0])&#123; high = mid - 1; &#125;else&#123; low = mid + 1; &#125; &#125; for(j = i-1; j &gt;= high+1; --j)&#123; A[j+1] = A[j]; &#125; A[high+1]=A[0]; &#125;&#125; Shell æŽ’åº æ—¶é—´å¤æ‚åº¦ ç©ºé—´å¤æ‚åº¦ ç¨³å®šæ€§ $O(n^{1.3})$ ~ $O(n^2)$ $O(1)$ Ã— 123456789101112131415161718192021222324252627/** * å¸Œå°”æŽ’åºçš„åŽŸç†:æ ¹æ®éœ€æ±‚ï¼Œå¦‚æžœä½ æƒ³è¦ç»“æžœä»Žå°åˆ°å¤§æŽ’åˆ—ï¼Œå®ƒä¼šé¦–å…ˆå°†æ•°ç»„è¿›è¡Œåˆ†ç»„ï¼Œç„¶åŽå°†è¾ƒå°å€¼ç§»åˆ°å‰é¢ï¼Œè¾ƒå¤§å€¼ * ç§»åˆ°åŽé¢ï¼Œæœ€åŽå°†æ•´ä¸ªæ•°ç»„è¿›è¡Œæ’å…¥æŽ’åºï¼Œè¿™æ ·æ¯”èµ·ä¸€å¼€å§‹å°±ç”¨æ’å…¥æŽ’åºå‡å°‘äº†æ•°æ®äº¤æ¢å’Œç§»åŠ¨çš„æ¬¡æ•°ï¼Œ * å¯ä»¥è¯´å¸Œå°”æŽ’åºæ˜¯åŠ å¼º ç‰ˆçš„æ’å…¥æŽ’åº æ‹¿æ•°ç»„5, 2,8, 9, 1, 3ï¼Œ4æ¥è¯´ï¼Œæ•°ç»„é•¿åº¦ä¸º7ï¼Œå½“incrementä¸º3æ—¶ï¼Œæ•°ç»„åˆ†ä¸ºä¸¤ä¸ªåºåˆ— * 5ï¼Œ2ï¼Œ8å’Œ9ï¼Œ1ï¼Œ3ï¼Œ4ï¼Œç¬¬ä¸€æ¬¡æŽ’åºï¼Œ9å’Œ5æ¯”è¾ƒï¼Œ1å’Œ2æ¯”è¾ƒï¼Œ3å’Œ8æ¯”è¾ƒï¼Œ4å’Œæ¯”å…¶ä¸‹æ ‡å€¼å°incrementçš„æ•°ç»„å€¼ç›¸æ¯”è¾ƒ * æ­¤ä¾‹å­æ˜¯æŒ‰ç…§ä»Žå°åˆ°å¤§æŽ’åˆ—ï¼Œæ‰€ä»¥å°çš„ä¼šæŽ’åœ¨å‰é¢ï¼Œç¬¬ä¸€æ¬¡æŽ’åºåŽæ•°ç»„ä¸º5, 1, 3, 4, 2, 8ï¼Œ9 * ç¬¬ä¸€æ¬¡åŽincrementçš„å€¼å˜ä¸º3/2=1,æ­¤æ—¶å¯¹æ•°ç»„è¿›è¡Œæ’å…¥æŽ’åºï¼Œ å®žçŽ°æ•°ç»„ä»Žå¤§åˆ°å°æŽ’ */public static void shellSort(int[] data) &#123; int j = 0; int temp = 0; // æ¯æ¬¡å°†æ­¥é•¿ç¼©çŸ­ä¸ºåŽŸæ¥çš„ä¸€åŠ for (int increment = data.length / 2; increment &gt; 0; increment /= 2) &#123; for (int i = increment; i &lt; data.length; i++) &#123; temp = data[i]; for (j = i; j &gt;= increment; j -= increment) &#123; if (temp &lt; data[j - increment])// ä»Žå°åˆ°å¤§æŽ’ &#123; data[j] = data[j - increment]; &#125; else &#123; break; &#125; &#125; data[j] = temp; &#125; &#125;&#125; äº¤æ¢æŽ’åºå†’æ³¡æŽ’åº æ—¶é—´å¤æ‚åº¦ ç©ºé—´å¤æ‚åº¦ ç¨³å®šæ€§ $O(n^2)$ $O(1)$ Ã— 12345678910111213141516public static void bubbleSort(int[] numbers)&#123; int temp = 0; int size = numbers.length; boolean flag = true; for(int i = 0;i &lt; size-1&amp;&amp;flag; i++)&#123; flag = false; for(int j = 0; j &lt; size-1-i; j++)&#123; if(numbers[j] &gt;numbers[j+1])&#123; temp = numbers[j]; numbers[j] = numbers[j + 1]; numbers[j + 1] = temp; flag = true; &#125; &#125; &#125;&#125; å¿«é€ŸæŽ’åº æ—¶é—´å¤æ‚åº¦ ç©ºé—´å¤æ‚åº¦ ç¨³å®šæ€§ $O(nlogn)$ $O(log_2n)$ ~ $O(n)$ Ã— 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556/** * å¿«é€ŸæŽ’åº * * @param numbers * å¸¦æŽ’åºæ•°ç»„ */public static void quick(int[] numbers) &#123; if (numbers.length &gt; 0) // æŸ¥çœ‹æ•°ç»„æ˜¯å¦ä¸ºç©º &#123; quickSort(numbers, 0, numbers.length - 1); &#125;&#125;/** * * @param numbers * å¸¦æŽ’åºæ•°ç»„ * @param low * å¼€å§‹ä½ç½® * @param high * ç»“æŸä½ç½® */public static void quickSort(int[] numbers, int low, int high) &#123; if (low &gt;= high) &#123; return; &#125; int middle = getMiddle(numbers, low, high); // å°†numbersæ•°ç»„è¿›è¡Œä¸€åˆ†ä¸ºäºŒ quickSort(numbers, low, middle - 1); // å¯¹ä½Žå­—æ®µè¡¨è¿›è¡Œé€’å½’æŽ’åº quickSort(numbers, middle + 1, high); // å¯¹é«˜å­—æ®µè¡¨è¿›è¡Œé€’å½’æŽ’åº&#125;/** * æŸ¥æ‰¾å‡ºä¸­è½´ï¼ˆé»˜è®¤æ˜¯æœ€ä½Žä½lowï¼‰çš„åœ¨numbersæ•°ç»„æŽ’åºåŽæ‰€åœ¨ä½ç½® * * @param numbers * å¸¦æŸ¥æ‰¾æ•°ç»„ * @param low * å¼€å§‹ä½ç½® * @param high * ç»“æŸä½ç½® * @return ä¸­è½´æ‰€åœ¨ä½ç½® */public static int getMiddle(int[] numbers, int low, int high) &#123; int temp = numbers[low]; // æ•°ç»„çš„ç¬¬ä¸€ä¸ªä½œä¸ºä¸­è½´ while (low &lt; high) &#123; while (low &lt; high &amp;&amp; numbers[high] &gt; temp) &#123; high--; &#125; numbers[low] = numbers[high];// æ¯”ä¸­è½´å°çš„è®°å½•ç§»åˆ°ä½Žç«¯ while (low &lt; high &amp;&amp; numbers[low] &lt; temp) &#123; low++; &#125; numbers[high] = numbers[low]; // æ¯”ä¸­è½´å¤§çš„è®°å½•ç§»åˆ°é«˜ç«¯ &#125; numbers[low] = temp; // ä¸­è½´è®°å½•åˆ°å°¾ return low; // è¿”å›žä¸­è½´çš„ä½ç½®&#125;//æ—¶é—´å¤æ‚åº¦O(nlognï¼‰ é€‰æ‹©æŽ’åºç®€å•é€‰æ‹©æŽ’åº æ—¶é—´å¤æ‚åº¦ ç©ºé—´å¤æ‚åº¦ ç¨³å®šæ€§ $O(n^2)$ $O(1)$ Ã— 123456789101112131415161718public static void selectSort(int[] numbers) &#123; int size = numbers.length; // æ•°ç»„é•¿åº¦ int temp = 0; // ä¸­é—´å˜é‡ for (int i = 0; i &lt; size-1; i++) &#123; int k = i; // å¾…ç¡®å®šçš„ä½ç½® // é€‰æ‹©å‡ºåº”è¯¥åœ¨ç¬¬iä¸ªä½ç½®çš„æ•° for (int j = size - 1; j &gt; i; j--) &#123; if (numbers[j] &lt; numbers[k]) &#123; k = j; &#125; &#125; // äº¤æ¢ä¸¤ä¸ªæ•° temp = numbers[i]; numbers[i] = numbers[k]; numbers[k] = temp; &#125;&#125;//æ—¶é—´å¤æ‚åº¦O(n*n) æ€§èƒ½ä¸Šä¼˜äºŽå†’æ³¡æŽ’åº äº¤æ¢æ¬¡æ•°å°‘ å †æŽ’åº æ—¶é—´å¤æ‚åº¦ ç©ºé—´å¤æ‚åº¦ ç¨³å®šæ€§ $O(nlog_2n)$ $O(1)$ Ã— 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748public static void heapSort(int[] a)&#123; int arrayLength = a.length; // å¾ªçŽ¯å»ºå † for (int i = 0; i &lt; arrayLength - 1; i++) &#123; // å»ºå † buildMaxHeap(a, arrayLength - 1 - i); // äº¤æ¢å †é¡¶å’Œæœ€åŽä¸€ä¸ªå…ƒç´  swap(a, 0, arrayLength - 1 - i); System.out.println(Arrays.toString(a)); &#125;&#125;// å¯¹dataæ•°ç»„ä»Ž0åˆ°lastIndexå»ºå¤§é¡¶å †public static void buildMaxHeap(int[] data, int lastIndex) &#123; // ä»ŽlastIndexå¤„èŠ‚ç‚¹ï¼ˆæœ€åŽä¸€ä¸ªèŠ‚ç‚¹ï¼‰çš„çˆ¶èŠ‚ç‚¹å¼€å§‹ for (int i = (lastIndex - 1) / 2; i &gt;= 0; i--) &#123; // kä¿å­˜æ­£åœ¨åˆ¤æ–­çš„èŠ‚ç‚¹ int k = i; // å¦‚æžœå½“å‰kèŠ‚ç‚¹çš„å­èŠ‚ç‚¹å­˜åœ¨ while (k * 2 + 1 &lt;= lastIndex) &#123; // kèŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹çš„ç´¢å¼• int biggerIndex = 2 * k + 1; // å¦‚æžœbiggerIndexå°äºŽlastIndexï¼Œå³biggerIndex+1ä»£è¡¨çš„kèŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹å­˜åœ¨ if (biggerIndex &lt; lastIndex) &#123; // è‹¥æžœå³å­èŠ‚ç‚¹çš„å€¼è¾ƒå¤§ if (data[biggerIndex] &lt; data[biggerIndex + 1]) &#123; // biggerIndexæ€»æ˜¯è®°å½•è¾ƒå¤§å­èŠ‚ç‚¹çš„ç´¢å¼• biggerIndex++; &#125; &#125; // å¦‚æžœkèŠ‚ç‚¹çš„å€¼å°äºŽå…¶è¾ƒå¤§çš„å­èŠ‚ç‚¹çš„å€¼ if (data[k] &lt; data[biggerIndex]) &#123; // äº¤æ¢ä»–ä»¬ swap(data, k, biggerIndex); // å°†biggerIndexèµ‹äºˆkï¼Œå¼€å§‹whileå¾ªçŽ¯çš„ä¸‹ä¸€æ¬¡å¾ªçŽ¯ï¼Œé‡æ–°ä¿è¯kèŠ‚ç‚¹çš„å€¼å¤§äºŽå…¶å·¦å³å­èŠ‚ç‚¹çš„å€¼ k = biggerIndex; &#125; else &#123; break; &#125; &#125; &#125;&#125;// äº¤æ¢private static void swap(int[] data, int i, int j) &#123; int tmp = data[i]; data[i] = data[j]; data[j] = tmp;&#125;//æ—¶é—´å¤æ‚åº¦O(nlognï¼‰ä¸é€‚åˆå¾…æŽ’åºåºåˆ—è¾ƒå°‘çš„æƒ…å†µ å½’å¹¶æŽ’åº æ—¶é—´å¤æ‚åº¦ ç©ºé—´å¤æ‚åº¦ ç¨³å®šæ€§ $O(nlog_2n)$ $O(n)$ âˆš 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354/** * å½’å¹¶æŽ’åº * ç®€ä»‹:å°†ä¸¤ä¸ªï¼ˆæˆ–ä¸¤ä¸ªä»¥ä¸Šï¼‰æœ‰åºè¡¨åˆå¹¶æˆä¸€ä¸ªæ–°çš„æœ‰åºè¡¨ å³æŠŠå¾…æŽ’åºåºåˆ—åˆ†ä¸ºè‹¥å¹²ä¸ªå­åºåˆ—ï¼Œæ¯ä¸ªå­åºåˆ—æ˜¯æœ‰åºçš„ã€‚ç„¶åŽå†æŠŠæœ‰åºå­åºåˆ—åˆå¹¶ä¸ºæ•´ä½“æœ‰åºåºåˆ— * æ—¶é—´å¤æ‚åº¦ä¸ºO(nlogn) * ç¨³å®šæŽ’åºæ–¹å¼ * @param nums å¾…æŽ’åºæ•°ç»„ * @return è¾“å‡ºæœ‰åºæ•°ç»„ */public static int[] sort(int[] nums, int low, int high) &#123; int mid = (low + high) / 2; if (low &lt; high) &#123; // å·¦è¾¹ sort(nums, low, mid); // å³è¾¹ sort(nums, mid + 1, high); // å·¦å³å½’å¹¶ merge(nums, low, mid, high); &#125; return nums;&#125;/** * å°†æ•°ç»„ä¸­lowåˆ°highä½ç½®çš„æ•°è¿›è¡ŒæŽ’åº * @param nums å¾…æŽ’åºæ•°ç»„ * @param low å¾…æŽ’çš„å¼€å§‹ä½ç½® * @param mid å¾…æŽ’ä¸­é—´ä½ç½® * @param high å¾…æŽ’ç»“æŸä½ç½® */public static void merge(int[] nums, int low, int mid, int high) &#123; int[] temp = new int[high - low + 1]; int i = low;// å·¦æŒ‡é’ˆ int j = mid + 1;// å³æŒ‡é’ˆ int k = 0; // æŠŠè¾ƒå°çš„æ•°å…ˆç§»åˆ°æ–°æ•°ç»„ä¸­ while (i &lt;= mid &amp;&amp; j &lt;= high) &#123; if (nums[i] &lt; nums[j]) &#123; temp[k++] = nums[i++]; &#125; else &#123; temp[k++] = nums[j++]; &#125; &#125; // æŠŠå·¦è¾¹å‰©ä½™çš„æ•°ç§»å…¥æ•°ç»„ while (i &lt;= mid) &#123; temp[k++] = nums[i++]; &#125; // æŠŠå³è¾¹è¾¹å‰©ä½™çš„æ•°ç§»å…¥æ•°ç»„ while (j &lt;= high) &#123; temp[k++] = nums[j++]; &#125; // æŠŠæ–°æ•°ç»„ä¸­çš„æ•°è¦†ç›–numsæ•°ç»„ for (int k2 = 0; k2 &lt; temp.length; k2++) &#123; nums[k2 + low] = temp[k2]; &#125;&#125;//æ—¶é—´å¤æ‚åº¦O(nlognï¼‰ åŸºæ•°æŽ’åº æ—¶é—´å¤æ‚åº¦ ç©ºé—´å¤æ‚åº¦ ç¨³å®šæ€§ $O(d(n+r))$ $O(r)$ âˆš]]></content>
      <tags>
        <tag>Java</tag>
        <tag>Algorithm</tag>
        <tag>Design Pattern</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidå„ç‰ˆæœ¬æ–°ç‰¹æ€§ã€æŒç»­æ›´æ–°...ã€‘]]></title>
    <url>%2F2019%2F03%2F18%2FAndroid%E5%90%84%E7%89%88%E6%9C%AC%E6%96%B0%E7%89%B9%E6%80%A7%E3%80%90%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%E3%80%91%2F</url>
    <content type="text"><![CDATA[Android å„ç‰ˆæœ¬ç‰¹æ€§æ€»ç»“ã€ æŒç»­æ›´æ–°ä¸­â€¦ Android 9.0 å®¤å†… WIFI RTT å®šä½ Android P ä¸º IEEE 802.11mc WiFi åè®®æ·»åŠ äº†å¹³å°æ”¯æŒ (ä¹Ÿç§°ä¸º WiFi å¾€è¿”æ—¶é—´ï¼ŒRTT)ï¼Œè¿™å¯ä»¥è®©æ‚¨åœ¨åº”ç”¨ä¸­ä½¿ç”¨å®¤å†…å®šä½ã€‚ æ‹¥æœ‰ç¡¬ä»¶æ”¯æŒçš„ Android P è®¾å¤‡å¯ä»¥è®©æ‚¨çš„åº”ç”¨ä½¿ç”¨ RTT API æµ‹é‡ä¸Žé™„è¿‘ WiFi æŽ¥å…¥ç‚¹ (AP) çš„è·ç¦»ï¼Œè®¾å¤‡ä¸éœ€è¦è¿žæŽ¥åˆ° AP ä¾¿å¯ä»¥ä½¿ç”¨ RTTã€‚ä¸ºäº†ä¿æŒéšç§ï¼Œåªæœ‰æ‰‹æœºèƒ½å¤Ÿç¡®å®šè·ç¦»ï¼ŒAP æ— æ³•åšåˆ°è¿™ä¸€ç‚¹ã€‚ é€šè¿‡æµ‹é‡ä»Žè®¾å¤‡åˆ°ä¸‰ä¸ªæˆ–æ›´å¤š AP çš„è·ç¦»ï¼Œæ‚¨å¯ä»¥ä»¥ 1 åˆ° 2 ç±³çš„ç²¾åº¦ç¡®å®šè®¾å¤‡ä½ç½®ã€‚è¿™ç§ç²¾ç¡®åº¦å…è®¸æ‚¨åˆ›å»ºæ›´å¤šæ–°çš„ä½“éªŒï¼šå®¤å†…å¯¼èˆªã€åŸºäºŽä½ç½®çš„ç»†ç²’åº¦æœåŠ¡ï¼Œä¾‹å¦‚ï¼Œæ¨¡ç³Šè¯­éŸ³æŽ§åˆ¶ ( â€œæ‰“å¼€è¿™é‡Œçš„ç¯â€ ) ï¼›åŸºäºŽä½ç½®çš„èµ„è®¯æœåŠ¡ ( â€œè¿™äº›ä¼˜æƒ æ˜¯é’ˆå¯¹è¿™ä¸ªäº§å“çš„å—ï¼Ÿâ€ )ã€‚ â€œåˆ˜æµ·â€å±å¹•æ”¯æŒ çŽ°åœ¨åº”ç”¨å¯ä»¥å……åˆ†åˆ©ç”¨æœ€æ–°çš„å…¨é¢å±è®¾å¤‡æ¥å±•ç¤ºå†…å®¹ã€‚æˆ‘ä»¬åœ¨ Android å¹³å°åŠ å…¥äº†å¯¹å‡¹å£å±å¹•çš„æ”¯æŒï¼Œä¸¦æä¾› API ä¾›æ‚¨ä½¿ç”¨ï¼Œä»Žè€Œç®¡ç†å†…å®¹å±•ç¤ºæ–¹å¼ã€‚ æœ¬åŠŸèƒ½å¯ä»¥åœ¨åº”ç”¨ä¸­æ— ç¼å·¥ä½œï¼Œç³»ç»Ÿä¼šç®¡ç†çŠ¶æ€æ çš„é«˜åº¦ä»Žè€Œå°†æ‚¨çš„å†…å®¹ä¸Žè£åˆ‡åŒºåŸŸåˆ†å¼€ã€‚å¦‚æžœæ‚¨æ‹¥æœ‰é‡è¦çš„æ²‰æµ¸å¼å†…å®¹ï¼Œåˆ™è¿˜å¯ä»¥ä½¿ç”¨æ–°çš„ API æŸ¥çœ‹è£åˆ‡å½¢çŠ¶å¹¶åˆ›å»ºå…¨å±å¸ƒå±€ã€‚æ‚¨å¯ä»¥è°ƒç”¨ getDisplayCutout() æ¥åˆ¤æ–­æœ¬åœ°è®¾å¤‡æ˜¯å¦å…·æœ‰å‡¹å£å±å¹•ï¼Œç„¶åŽå†ç¡®å®šè£åˆ‡åŒºåŸŸçš„ä½ç½®å’Œå½¢çŠ¶ã€‚å¹³å°æ·»åŠ äº†ä¸€ä¸ªæ–°çš„çª—å£å¸ƒå±€å±žæ€§ layoutInDisplayCutoutMode è®©æ‚¨å‘Šè¯‰ç³»ç»Ÿå¦‚ä½•ä»¥åŠä½•æ—¶å°†æ‚¨çš„å†…å®¹ç›¸å¯¹äºŽè£å‰ªåŒºåŸŸè¿›è¡Œå¸ƒå±€ã€‚ é€šçŸ¥ å¢žå¼ºä½“éªŒ é€šé“è®¾ç½®ã€å¹¿æ’­ä»¥åŠå…æ‰“æ‰° å¤šç›¸æœºæ”¯æŒå’Œç›¸æœºæ›´æ–° æ–°çš„å›¾ç‰‡è§£ç  åŠ¨ç”» HDR VP9è§†é¢‘ï¼ŒHEIFå›¾åƒåŽ‹ç¼©å’Œåª’ä½“API JobSchedulerä¸­çš„æ•°æ®æˆæœ¬æ•æ„Ÿåº¦ ç¥žç»ç½‘ç»œAPI 1.1 æ”¹è¿›è¡¨å•è‡ªåŠ¨å¡«å…… å®‰å…¨å¢žå¼º Android å¤‡ä»½åŠ å¯† ç”¨äºŽ NFC æ”¯ä»˜å’Œå®‰å…¨äº¤æ˜“çš„ Open Mobile API Android 8.1 Android Go ç®€ä»‹ äººå·¥æ™ºèƒ½ç¥žç»ç½‘ç»œ API(å¦‚ï¼šTensorFlow) è‡ªåŠ¨å¡«å……æ¡†æž¶æ›´æ–° Notification é€šçŸ¥å˜æ›´ EditText æ›´æ–° WebView å®‰å…¨æµè§ˆæ›´æ–° è§†é¢‘ç¼©ç•¥å›¾æå–å™¨æ›´æ–° å…±äº«å†…å­˜API WallpaperColors API æŒ‡çº¹æ›´æ–° Android 8.0 APPâ€œå®‰è£…æœªçŸ¥åº”ç”¨â€åŠŸèƒ½é»˜è®¤è¢«é™åˆ¶ ä¼˜åŒ–é€šçŸ¥ é€šçŸ¥æ¸ é“ Notification Channel é€šçŸ¥æ ‡å¿— ä¼‘çœ  é€šçŸ¥è¶…æ—¶ é€šçŸ¥è®¾ç½® é€šçŸ¥æ¸…é™¤ è‡ªåŠ¨å¡«å……æ¡†æž¶ ç”»ä¸­ç”»æ¨¡å¼ï¼šæ¸…å•ä¸­Activityè®¾ç½®android:supportsPictureInPicture å¯ä¸‹è½½å­—ä½“ï¼šFontRequest XML ä¸­çš„å­—ä½“ è‡ªåŠ¨è°ƒæ•´ TextView çš„å¤§å° è‡ªé€‚åº”å›¾æ ‡ é¢œè‰²ç®¡ç† WebView API å¤šæ˜¾ç¤ºå™¨æ”¯æŒ ç»Ÿä¸€çš„å¸ƒå±€å¤–è¾¹è·å’Œå†…è¾¹è· æŒ‡é’ˆæ•èŽ· åº”ç”¨ç±»åˆ« Android TV å¯åŠ¨å™¨ AnimatorSet æ–°çš„ StrictMode æ£€æµ‹ç¨‹åº ç¼“å­˜æ•°æ® findViewById() ç­¾åå˜æ›´ æƒé™ æ›´æ–°çš„ Java æ”¯æŒ Android 7.1 åŠ å…¥é‡å¯æŒ‰é’® Appåœ†å½¢å›¾æ ‡ æ·»åŠ æ–°çš„Emoji Android 7.0 åˆ†å±å¤šä»»åŠ¡ è¿›å…¥åŽå°å¤šä»»åŠ¡ç®¡ç†é¡µé¢ï¼Œç„¶åŽæŒ‰ä½å…¶ä¸­ä¸€ä¸ªå¡ç‰‡ï¼Œç„¶åŽå‘ä¸Šæ‹–åŠ¨è‡³é¡¶éƒ¨å³å¯å¼€å¯åˆ†å±å¤šä»»åŠ¡ï¼Œæ”¯æŒä¸Šä¸‹åˆ†æ å’Œå·¦å³åˆ†æ ï¼Œå…è®¸æ‹–åŠ¨ä¸­é—´çš„åˆ†å‰²çº¿è°ƒæ•´ä¸¤ä¸ªAPPæ‰€å çš„æ¯”ä¾‹ã€‚ å…¨æ–°ä¸‹æ‹‰å¿«æ·å¼€å…³é¡µ Android 7.0ä¸­ï¼Œä¸‹æ‹‰æ‰“å¼€é€šçŸ¥æ é¡¶éƒ¨å³å¯æ˜¾ç¤º5ä¸ªç”¨æˆ·å¸¸ç”¨çš„å¿«æ·å¼€å…³ï¼Œæ”¯æŒå•å‡»å¼€å…³ä»¥åŠé•¿æŒ‰è¿›å…¥å¯¹åº”è®¾ç½®ã€‚å¦‚æžœç»§ç»­ä¸‹æ‹‰é€šçŸ¥æ å³å¯æ˜¾ç¤ºå…¨éƒ¨å¿«æ·å¼€å…³ï¼Œæ­¤å¤–åœ¨å¿«æ·å¼€å…³é¡µå³ä¸‹è§’ä¹Ÿä¼šæ˜¾ç¤ºä¸€ä¸ªç¼–è¾‘æŒ‰é’®ï¼Œç‚¹å‡»ä¹‹åŽå³å¯è‡ªå®šä¹‰æ·»åŠ /åˆ é™¤å¿«æ·å¼€å…³ï¼Œæˆ–æ‹–åŠ¨è¿›è¡ŒæŽ’åºã€‚ æ–°é€šçŸ¥æ¶ˆæ¯ é€šçŸ¥æ¶ˆæ¯å¿«æ·å›žå¤ åŠ å…¥äº†å…¨æ–°çš„APIï¼Œæ”¯æŒç¬¬ä¸‰æ–¹åº”ç”¨é€šçŸ¥çš„å¿«æ·æ“ä½œå’Œå›žå¤ï¼Œä¾‹å¦‚æ¥ç”µä¼šä»¥æ¨ªå¹…æ–¹å¼åœ¨å±å¹•é¡¶éƒ¨å‡ºçŽ°ï¼Œæä¾›æŽ¥å¬/æŒ‚æ–­ä¸¤ä¸ªæŒ‰é’®ï¼›ä¿¡æ¯/ç¤¾äº¤ç±»åº”ç”¨é€šçŸ¥ï¼Œè¿˜å¯ä»¥ç›´æŽ¥æ‰“å¼€é”®ç›˜ï¼Œåœ¨è¾“å…¥æ é‡Œè¿›è¡Œå¿«æ·å›žå¤ã€‚ é€šçŸ¥æ¶ˆæ¯å½’æ‹¢ Android7.0ä¼šå°†åŒä¸€åº”ç”¨çš„å¤šæ¡é€šçŸ¥æç¤ºæ¶ˆæ¯å½’æ‹¢ä¸ºä¸€é¡¹ï¼Œç‚¹å‡»è¯¥é¡¹å³å¯å±•å¼€æ­¤å‰çš„å…¨éƒ¨é€šçŸ¥ï¼Œå…è®¸ç”¨æˆ·å¯¹æ¯ä¸ªé€šçŸ¥æ‰§è¡Œå•ç‹¬æ“ä½œã€‚ æµé‡ä¿æŠ¤æ¨¡å¼ æ–°å¢žçš„æµé‡ä¿æŠ¤æ¨¡å¼ä¸ä»…å¯ä»¥ç¦æ­¢åº”ç”¨åœ¨åŽå°ä½¿ç”¨æµé‡ï¼Œè¿˜ä¼šè¿›ä¸€æ­¥å‡å°‘è¯¥åº”ç”¨åœ¨å‰å°æ—¶çš„æµé‡ä½¿ç”¨ã€‚æŽ¨æµ‹å…¶æœ‰å¯èƒ½ä½¿ç”¨äº†ç±»ä¼¼Chromeæµè§ˆå™¨çš„æ•°æ®åŽ‹ç¼©æŠ€æœ¯ã€‚æ­¤å¤–ï¼Œè°·æ­Œè¿˜æ‰©å±•äº†ConnectivityManager APIçš„èƒ½åŠ›ï¼Œä½¿å¾—åº”ç”¨å¯ä»¥æ£€æµ‹ç³»ç»Ÿæ˜¯å¦å¼€å¯äº†æµé‡ä¿æŠ¤æ¨¡å¼ï¼Œæˆ–è€…æ£€æµ‹è‡ªå·±æ˜¯å¦åœ¨ç™½åå•ä¸­ã€‚Android7.0å…è®¸ç”¨æˆ·å•ç‹¬é’ˆå¯¹æ¯ä¸ªåº”ç”¨ï¼Œé€‰æ‹©æ˜¯å¦å¼€å¯æ•°æ®ä¿æŠ¤æ¨¡å¼ã€‚ èœå•é”®å¿«é€Ÿåº”ç”¨åˆ‡æ¢ æ”¯æŒVR å¼•å…¥JITç¼–è¯‘å™¨ ä½¿å¾—Appå®‰è£…é€Ÿåº¦å¿«äº†75%ï¼Œç¼–è¯‘ä»£ç çš„è§„æ¨¡å‡å°‘äº†50% ç”»ä¸­ç”» Project Svelte: åŽå°ä¼˜åŒ– Android 6.x åŠ¨æ€æƒé™ç®¡ç† Android 6.0å¼•å…¥äº†åŠ¨æ€æƒé™ç®¡ç†ï¼Œå°†æ ‡è®°ä¸ºå±é™©çš„æƒé™ä»Žå®‰è£…æ—¶æƒé™æ¨¡åž‹ç§»åŠ¨åˆ°è¿è¡Œæ—¶æƒé™æ¨¡åž‹ã€‚ å®‰è£…æ—¶æƒé™æ¨¡åž‹(Android5.1ä»¥åŠæ›´æ—©)ï¼šç”¨æˆ·åœ¨åº”ç”¨å®‰è£…å’Œæ›´æ–°æ—¶ï¼Œå¯¹å±é™©æƒé™æŽˆæƒã€‚ä½†æ˜¯OEMå’Œè¿è¡Œå•†é¢„è£…çš„åº”ç”¨å°†è‡ªåŠ¨é¢„æŽˆæƒã€‚ è¿è¡Œæ—¶æƒé™(Android6.0åŠä»¥åŽ)ï¼šç”¨æˆ·åœ¨åº”ç”¨è¿è¡Œæ—¶ï¼Œå¯¹åº”ç”¨æŽˆäºˆå±é™©æƒé™ã€‚ç”±åº”ç”¨å†³å®šä½•æ—¶åŽ»ç”³è¯·æƒé™ï¼ˆä¾‹å¦‚ï¼Œåœ¨åº”ç”¨å¯åŠ¨æ—¶æˆ–è€…ç”¨æˆ·è®¿é—®æŸä¸ªç‰¹æ€§æ—¶ï¼‰ï¼Œä½†å¿…é¡»å®¹è®¸ç”¨æˆ·æ¥æŽˆäºˆæˆ–è€…æ‹’ç»åº”ç”¨å¯¹ç‰¹å®šæƒé™ç»„çš„è®¿é—®ã€‚OEMå’Œè¿è¥å•†å¯ä»¥é¢„è£…åº”ç”¨ï¼Œä½†æ˜¯ä¸èƒ½å¯¹æƒé™è¿›è¡Œé¢„æŽˆæƒã€‚ è¿è¡Œæ—¶æƒé™æä¾›ç»™ç”¨æˆ·å…³äºŽåº”ç”¨æ‰€éœ€æƒé™æ›´å¤šçš„ç›¸å…³ä¸Šä¸‹æ–‡å’Œå¯è§†æ€§ï¼Œè¿™ä¹Ÿè®©å¼€å‘è€…å¸®åŠ©ç”¨æˆ·æ›´å¥½çš„ç†è§£ï¼šä¸ºä»€ä¹ˆåº”ç”¨éœ€è¦æ‰€è¯·æ±‚çš„æƒé™ï¼ŒæŽˆæƒå°†æœ‰ä»€ä¹ˆæ ·çš„å¥½å¤„ï¼Œæ‹’ç»å°†æœ‰ä½•ç§ä¸ä¾¿ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡è®¾ç½®ä¸­çš„èœå•æ¥æ’¤é”€åº”ç”¨çš„æƒé™ã€‚ æŒ‡çº¹è¯†åˆ«Finger Support è¯´åˆ°æŒ‡çº¹è¯†åˆ«ï¼Œå¾ˆå¤šç”¨æˆ·éƒ½ä¼šè§‰å¾—çŽ°åœ¨çš„ä¸­é«˜ç«¯androidæ‰‹æœºéƒ½æ”¯æŒï¼Œä½†äº‹å®žä¸Šè¿™äº›androidæ‰‹æœºçš„æŒ‡çº¹è¯†åˆ«éƒ½æ˜¯å„ä¸ªåŽ‚å•†è‡ªè¡Œå¼€å‘çš„å¹¶æ²¡æœ‰ç³»ç»Ÿåº•å±‚çš„æ”¯æŒã€‚Android 6.0åˆ™åœ¨ç³»ç»Ÿå±‚é¢åŠ å…¥æŒ‡çº¹è¯†åˆ«ï¼Œèƒ½æä¾›åŽŸç”ŸæŒ‡çº¹è¯†åˆ«APIï¼Œè¿™ä¸ä½†é™ä½Žäº†åŽ‚å•†å¼€å‘æŒ‡çº¹è¯†åˆ«æ¨¡å—çš„æˆæœ¬ï¼Œæœ€é‡è¦çš„æ˜¯åŽŸç”ŸæŒ‡çº¹è¯†åˆ«å°†ä¼šå¤§å¤§æå‡androidæ‰‹æœºçš„æŒ‡çº¹è¯†åˆ«æ”¯ä»˜å®‰å…¨æ€§ ç”µæ± ç®¡ç† Android 6.0ä½¿ç”¨ä¸‹åˆ—ç‰¹æ€§æ¥å»¶é•¿ç”µæ± ä½¿ç”¨æ—¶é—´ï¼š App Standbyï¼ˆåº”ç”¨å¾…æœºï¼‰: ç³»ç»Ÿå¯ä»¥å°†æœªä½¿ç”¨çš„åº”ç”¨ç½®ä¸ºAppStandbyæ¨¡å¼ï¼Œä¸´æ—¶é™åˆ¶è¿™äº›åº”ç”¨çš„ç½‘ç»œè®¿é—®ï¼Œå»¶è¿ŸåŒæ­¥å’ŒåŽå°job Dozeï¼ˆçžŒç¡ï¼‰: å¦‚æžœç”¨æˆ·åœ¨æŸä¸ªæ—¶é—´æœŸé™å†…æœªä¸»åŠ¨ä½¿ç”¨è®¾å¤‡ï¼ˆå±å¹•å…³é—­ã€è®¾å¤‡é™æ­¢ï¼‰ï¼Œå¹³å°å°†è¿›å…¥æ·±åº¦ç¡çœ çŠ¶æ€ã€‚å› ä¸ºè¯¥ç‰¹æ€§è¦æ±‚å¹³å°æ£€æµ‹é™æ­¢çŠ¶æ€ï¼Œå› æ­¤åªæœ‰é‚£äº›åœ¨Sensor HALä¸­å®žçŽ°äº†æ˜¾å¼ç§»åŠ¨æ£€æµ‹APIçš„è®¾å¤‡ä¸­æ‰æœ‰æ•ˆã€‚ Exemptionsï¼ˆè±å…ï¼‰: é¢„è£…åœ¨è®¾å¤‡ä¸Šçš„ç³»ç»Ÿåº”ç”¨å’Œäº‘æ¶ˆæ¯æœåŠ¡ï¼Œé»˜è®¤é€šå¸¸è¢«è±å…ã€‚åº”ç”¨å¼€å‘è€…å¯ä»¥è¦æ±‚å…¶åº”ç”¨ä½¿ç”¨è¿™ç§è®¾å®šã€‚ç”¨æˆ·ä¹Ÿå¯ä»¥åœ¨è®¾ç½®ä¸­æ¥è±å…æŸäº›åº”ç”¨ã€‚ Android Pay Androidæ”¯ä»˜ç»Ÿä¸€æ ‡å‡†ã€‚æ–°çš„Mç³»ç»Ÿä¸­é›†æˆäº†Android Payã€‚å…¶ç‰¹æ€§åœ¨äºŽç®€æ´ã€å®‰å…¨ã€å¯é€‰æ€§ã€‚Android Payæ˜¯ä¸€ä¸ªå¼€æ”¾æ€§å¹³å°ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©è°·æ­Œçš„æœåŠ¡æˆ–è€…ä½¿ç”¨é“¶è¡Œçš„APPæ¥ä½¿ç”¨å®ƒï¼ŒAndroid Payæ”¯æŒ4.4ä»¥åŽçš„ç³»ç»Ÿè®¾å¤‡ï¼ŒGoogleå®£å¸ƒAndroid Payå·²ç»ä¸Žç¾Žå›½ä¸‰å¤§è¿è¥å•†700å¤šå®¶å•†åº—è¾¾æˆåˆä½œï¼Œæ”¯ä»˜åŠŸèƒ½å¯ä»¥ä½¿ç”¨æŒ‡çº¹æ”¯ä»˜ã€‚ å­˜å‚¨ åœ¨ä¹‹å‰ï¼Œå®‰å“ç³»ç»Ÿè™½ç„¶å¯ä»¥æ”¯æŒTFå¡æ‰©å±•ï¼Œä½†TFå¡æ‰©å±•çš„å®¹é‡åªèƒ½å½“æˆå¤–ç½®å­˜å‚¨ã€‚è™½ç„¶ç”¨æˆ·å¯ä»¥æŠŠç…§ç‰‡ã€éŸ³ä¹ç­‰å†…å®¹æ”¾è¿›åŽ»ï¼Œä½†Appä¸èƒ½å®‰è£…åˆ°å…¶ä¸­ã€‚åœ¨å®‰å“6.0ä¸­ï¼Œå½“é¦–æ¬¡æ’å…¥TFå¡çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šè¯¢é—®ä¼šå°†TFå¡ä½œä¸ºå¤–ç½®è¿˜æ˜¯å†…ç½®å‚¨å­˜ã€‚å¦‚æžœé€‰æ‹©ä½œä¸ºå†…ç½®å­˜å‚¨ï¼Œç³»ç»Ÿåˆ™ä¼šå¯¹TFå¡æ ¼å¼åŒ–å¹¶åŠ å¯†â€”â€”æ³¨æ„ï¼Œè¿™ä¼šä¸¢å¤±æ•°æ®ï¼ç„¶åŽï¼ŒTFå¡çš„å®¹é‡å°±å’Œè®¾å¤‡çš„å†…ç½®å­˜å‚¨èžåˆäº†ã€‚ å–æ¶ˆæ”¯æŒ Apache HTTP å®¢æˆ·ç«¯ BoringSSL ç¡¬ä»¶æ ‡è¯†ç¬¦è®¿é—®æƒ é€šçŸ¥ éŸ³é¢‘ç®¡ç†å™¨å˜æ›´ æ”¯æŒæ–‡æœ¬é€‰æ‹© Android å¯†é’¥åº“ä¸å†æ”¯æŒ DSAã€‚ä½†ä»æ”¯æŒ ECDSA WLAN å’Œç½‘ç»œè¿žæŽ¥å˜æ›´ ç›¸æœºæœåŠ¡å˜æ›´ APK éªŒè¯ USB è¿žæŽ¥ Android 5.0 Android Runtime (ART)é»˜è®¤è¿è¡Œå¹³å°è®¾ç½® æ”¯æŒ64ä½ARTè™šæ‹Ÿæœºã€‚æ–°ç³»ç»Ÿæ”¾å¼ƒäº†ä¹‹å‰ä¸€ç›´ä½¿ç”¨çš„Dalvikè™šæ‹Ÿæœºï¼Œæ”¹ç”¨äº†ARTæ¨¡å¼ï¼Œå®žçŽ°äº†çœŸæ­£çš„è·¨å¹³å°ç¼–è¯‘ã€‚ARTè™šæ‹Ÿæœºç¼–è¯‘å™¨åœ¨å†…å­˜å ç”¨åŠåº”ç”¨ç¨‹åºåŠ è½½æ—¶é—´ä¸Šè¿›è¡Œäº†å¤§å¹…æå‡ï¼Œè°·æ­Œæ‰¿è¯ºæ‰€æœ‰æ€§èƒ½éƒ½ä¼šæ¯”åŽŸæ¥æå‡ä¸€å€ã€‚å¦å¤–ï¼Œå¯¹64ä½çš„æ”¯æŒä¹Ÿè®©ARTè™šæ‹Ÿæœºå¦‚é±¼å¾—æ°´ï¼Œå¼€å‘è€…å¯ä»¥é’ˆå¯¹åƒART Cortex-A57è¿™æ ·çš„64ä½æž¶æž„æ ¸å¿ƒå¼€å‘åº”ç”¨ç¨‹åºã€‚ Android Læ”¯æŒæ›´å¤§çš„å¯„å­˜å™¨ï¼Œæ”¯æŒæ–°çš„æŒ‡ä»¤é›†ï¼Œæå‡äº†å†…å­˜å¯»å€ç©ºé—´ï¼Œæœªæ¥Androidæ™ºèƒ½æ‰‹æœºå°†æ”¯æŒ4GBä»¥ä¸Šçš„å†…å­˜ã€‚ å…¨æ–°é€šçŸ¥ä¸­å¿ƒè®¾è®¡ Material Design æ ·å¼ å£°éŸ³å’ŒæŒ¯åŠ¨ é”å®šå±å¹•å¯è§æ€§ åª’ä½“æ’­æ”¾ æµ®åŠ¨é€šçŸ¥ Googleåœ¨android Lä¸­åŠ å…¥äº†å…¨æ–°é£Žæ ¼çš„é€šçŸ¥ç³»ç»Ÿã€‚æ”¹è¿›åŽçš„é€šçŸ¥ç³»ç»Ÿä¼šä¼˜å…ˆæ˜¾ç¤ºå¯¹ç”¨æˆ·æ¥è¯´æ¯”è¾ƒé‡è¦çš„ä¿¡æ¯ï¼Œè€Œå°†ä¸å¤ªç´§æ€¥çš„å†…å®¹éšè—èµ·æ¥ã€‚ç”¨æˆ·åªéœ€è½»è½»å‘ä¸‹æ»‘åŠ¨å°±å¯ä»¥æŸ¥çœ‹å…¨éƒ¨çš„é€šçŸ¥å†…å®¹ã€‚ æ–°çš„é€šçŸ¥ç³»ç»Ÿå¦å¤–ä¸€ä¸ªå¾ˆé…·çš„æ–°åŠŸèƒ½æ˜¯åœ¨é”å±ç•Œé¢ä¹Ÿå¯ä»¥ç›´æŽ¥æŸ¥çœ‹é€šçŸ¥æ¶ˆæ¯äº†ã€‚ä¸ä»…å¦‚æ­¤ï¼Œç”¨æˆ·è¿˜å¯ä»¥ç›´æŽ¥åœ¨é”å±çš„æƒ…å†µä¸‹å›žå¤æˆ–è¿›å…¥åº”ç”¨ã€‚å¦å¤–ï¼Œå¦‚æžœåœ¨æ“ä½œæ‰‹æœºçš„è¿‡ç¨‹ä¸­æœ‰ç”µè¯è¿›å…¥ï¼Œä¹Ÿä¸ä¼šè¿›è¡Œå…¨ç”»é¢çš„åˆ‡æ¢ï¼Œè€Œæ˜¯åŒæ ·ä»¥é€šçŸ¥çš„æ–¹å¼å‘ŠçŸ¥ç”¨æˆ·ã€‚ å¼•å…¥Material Designè®¾è®¡ æ‰å¹³åŒ–çš„è®¾è®¡ç†å¿µï¼Œæ–°çš„è§†è§‰è¯­è¨€ï¼Œåœ¨åŸºæœ¬å…ƒç´ çš„å¤„ç†ä¸Šï¼Œå‡ ä»¶äº†ä¼ ç»Ÿçš„å°åˆ·è®¾è®¡ï¼Œå­—ä½“ç‰ˆå¼ã€ç½‘æ ¼ç³»ç»Ÿã€ç©ºé—´ã€æ¯”ä¾‹ã€è°ƒè‰²ã€å›¾åƒä½¿ç”¨ç­‰è¿™äº›åŸºç¡€çš„å¹³é¢è®¾è®¡è§„èŒƒã€‚ä½œä¸ºæˆ‘ä»¬å¼€å‘è€…ï¼Œæœ€å…³å¿ƒçš„è¿˜æ˜¯å¦‚ä½•åœ¨é¡¹ç›®ä¸­ä½¿ç”¨Material Designé£Žæ ¼ï¼šè®¾ç½®åº”ç”¨çš„ targetSdkVersion å’Œ targetSdkVersion ä¸º21åœ¨valuesç›®å½•ä¸‹çš„styleèµ„æºæ–‡ä»¶ä¸­åˆ›å»ºä¸€ä¸ªstyleï¼Œè®©å…¶ç»§æ‰¿è‡ª android:Theme.Materialåœ¨AndroidManifestä¸­æŒ‡å®šåº”ç”¨çš„ä¸»é¢˜æˆ–è€…Activityçš„ä¸»é¢˜ä¸ºæˆ‘ä»¬è®¾å®šçš„æ ·å¼è°·æ­Œå®˜æ–¹æˆ‘ä»¬æä¾›äº†ä¸‰ç§é…è‰²é£Žæ ¼çš„Material Designæ ·å¼ï¼š é»‘è‰²ä¸»é¢˜ Theme.Material æ˜Žäº®ä¸»é¢˜ Theme.Material.Light æ˜Žäº®ä¸»é¢˜é»‘è‰²ActionBar Theme.Material.Light.DarkActionBar æˆ‘ä»¬ä¹Ÿå¯ä»¥ç»§æ‰¿ç³»ç»Ÿæä¾›çš„Material Designæ ·å¼ï¼Œè¿›è¡Œé…è‰²ä¿®æ”¹ï¼šthemecolor 123456789101112131415android:colorPrimaryDarkåº”ç”¨çš„ä¸»è¦æš—è‰²è°ƒï¼ŒstatusBarColoré»˜è®¤ä½¿ç”¨è¯¥é¢œè‰²android:statusBarColorçŠ¶æ€æ é¢œè‰²ï¼Œé»˜è®¤ä½¿ç”¨colorPrimaryDarkandroid:colorPrimaryåº”ç”¨çš„ä¸»è¦è‰²è°ƒï¼ŒactionBaré»˜è®¤ä½¿ç”¨è¯¥é¢œè‰²android:windowBackgroundçª—å£èƒŒæ™¯é¢œè‰²android:navigationBarColoråº•éƒ¨æ é¢œè‰²android:colorForegroundåº”ç”¨çš„å‰æ™¯è‰²ï¼ŒListViewçš„åˆ†å‰²çº¿ï¼Œswitchæ»‘åŠ¨åŒºé»˜è®¤ä½¿ç”¨è¯¥é¢œè‰²android:colorBackgroundåº”ç”¨çš„èƒŒæ™¯è‰²ï¼ŒpopMenuçš„èƒŒæ™¯é»˜è®¤ä½¿ç”¨è¯¥é¢œè‰²android:colorAccent ä¸€èˆ¬æŽ§ä»¶çš„é€‰ç§æ•ˆæžœé»˜è®¤é‡‡ç”¨è¯¥é¢œè‰²android:colorControlNormal æŽ§ä»¶çš„é»˜è®¤è‰²è°ƒ android:colorControlHighlightæŽ§ä»¶æŒ‰åŽ‹æ—¶çš„è‰²è°ƒandroid:colorControlActivatedæŽ§ä»¶é€‰ä¸­æ—¶çš„é¢œè‰²ï¼Œé»˜è®¤ä½¿ç”¨colorAccentandroid:colorButtonNormalé»˜è®¤æŒ‰é’®çš„èƒŒæ™¯é¢œè‰²android:textColor Buttonï¼ŒtextViewçš„æ–‡å­—é¢œè‰²android:textColorPrimaryDisableOnly RadioButton checkboxç­‰æŽ§ä»¶çš„æ–‡å­—android:textColorPrimary åº”ç”¨çš„ä¸»è¦æ–‡å­—é¢œè‰²ï¼ŒactionBarçš„æ ‡é¢˜æ–‡å­—é»˜è®¤ä½¿ç”¨è¯¥é¢œè‰² ä¸»é¢˜ä¸ä»…å¯ä»¥å¯¹Applicationå’ŒActivityä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å¯¹æŸä¸€ä¸ªæŽ§ä»¶å•ä½¿ç”¨ï¼Œæˆ–è€…æ˜¯åœ¨xmlå¸ƒå±€ä¸­ç»™ä¸€ä¸ªæ ¹èŠ‚ç‚¹æŽ§ä»¶è®¾ç½®Android:themeå±žæ€§ï¼Œæ¥ä¿®æ”¹å®ƒå’Œå®ƒæ‰€æœ‰å­æŽ§ä»¶çš„ä¸»é¢˜ã€‚å¦‚æžœæˆ‘ä»¬è¦å¯¹ç‰¹å®šæŽ§ä»¶å®žä¾‹åšè‡ªå®šä¹‰ä¿®æ”¹ï¼Œæ›´å»ºè®®å¤§å®¶å¯ä»¥é€šè¿‡æŽ§ä»¶è‡ªèº«çš„APIè¿›è¡Œè®¾ç½®ä¿®æ”¹ã€‚ Project Voltaç”µæ± ç»­èˆªæ”¹è¿›è®¡åˆ’ Project Voltaè®¡åˆ’å¢žåŠ äº†æ–°å·¥å…·å¯ä»¥è®©å¼€å‘è€…èƒ½å¤Ÿæ›´å®¹æ˜“çš„æ‰¾å‡ºä¸ºä½•è‡ªå·±çš„åº”ç”¨ç¨‹åºä¼šå¯¹ç”µé‡äº§ç”Ÿæ¯”è¾ƒå¤§çš„å½±å“ï¼ŒåŒæ—¶ç¡®ä¿åœ¨æ‰§è¡ŒæŸäº›ä»»åŠ¡æ—¶å°†æ‰‹æœºç”µé‡çš„å½±å“é™è‡³æœ€ä½Žã€‚é¦–å…ˆï¼ŒBattery Historianå¯ä»¥åˆ—å‡ºæ‰‹æœºç”µé‡æ¶ˆè€—çš„è¯¦ç»†æƒ…å†µï¼Œå¸®åŠ©å¼€å‘è€…è¯†åˆ«ç”µé‡æ¶ˆè€—çš„åŽŸå› æˆ–è€…æ˜¯å“ªä¸ªç¡¬ä»¶æˆ–ä»»åŠ¡å¯¹ç”µæ± å¯¿å‘½çš„å½±å“æ¯”è¾ƒå¤§ï¼›è€ŒJob Scheduler APIåˆ™å¯ä»¥è®©å¼€å‘è€…æ›´å®¹æ˜“çš„é€‰æ‹©åˆé€‚çš„æ—¶æœºè§¦å‘ç”µé‡æ¶ˆè€—æ¯”è¾ƒé«˜çš„ä»»åŠ¡ï¼Œé¿å…åœ¨ä½Žç”µé‡æˆ–æœªå®Œæˆå……ç”µæ—¶æ›´æ–°åº”ç”¨ç¨‹åºã€‚ è€Œå¯¹äºŽç”¨æˆ·å±‚é¢ä¸Šï¼ŒAndroid L å¢žåŠ äº†Battery Saveræ¨¡å¼ï¼Œåœ¨ä½Žç”µé‡æ—¶ç³»ç»Ÿä¼šè°ƒæ•´æŸäº›è€—ç”µè®¾ç½®ï¼Œå¦‚é™ä½Žå±å¹•äº®åº¦ã€é™åˆ¶è‡ªåŠ¨æ›´æ¢èƒŒæ™¯ç­‰ã€‚ å…¨æ–°çš„â€æœ€è¿‘åº”ç”¨ç¨‹åºâ€œ é™¤äº†ç•Œé¢é£Žæ ¼è®¾è®¡çš„æ”¹å˜ä¹‹å¤–ï¼Œæ–°çš„æœ€è¿‘åº”ç”¨ç•Œé¢è¿˜å€Ÿé‰´äº†Chromeæµè§ˆå™¨çš„ç†å¿µï¼Œé‡‡ç”¨å•ç‹¬çš„æ ‡ç­¾å±•ç¤ºæ–¹å¼ã€‚è€Œä¸”ï¼Œè°·æ­Œå·²ç»å‘å¼€å‘è€…å¼€æ”¾äº†APIï¼Œæ‰€ä»¥ç¬¬ä¸‰æ–¹å¼€å‘äººå‘˜å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ”¹è¿›ä¸ºç‰¹å®šçš„åº”ç”¨å¢žåŠ å…¨æ–°çš„åŠŸèƒ½ã€‚getAppTasks() æ”¹è¿›å®‰å…¨æ€§ æ”¯æŒå¤šç§è®¾å¤‡ å¯ä»¥åœ¨æ™ºèƒ½æ‰‹æœºã€å¹³æ¿ç”µè„‘ã€ç¬”è®°æœ¬ç”µè„‘ã€æ™ºèƒ½ç”µè§†ã€æ±½è½¦ã€æ™ºèƒ½æ‰‹è¡¨ç”šè‡³æ˜¯å„ç§å®¶ç”¨ç”µå­äº§å“ç­‰è®¾å¤‡ä¸Šä½¿ç”¨Androidç³»ç»Ÿã€‚ æ”¯æŒOpenGL ES3.1 åª’ä½“æŽ§ä»¶å’Œ RemoteControlClient æ”¯æŒAndroid NDKä¸­çš„64ä½ åªèƒ½æ˜¾ç¤ºç»‘å®šåˆ°æœåŠ¡ï¼Œå–æ¶ˆéšè—ç»‘å®šæœåŠ¡ WebView APIä¿®æ”¹ è‡ªå®šä¹‰æƒé™å”¯ä¸€æ€§è¦æ±‚ TLS/SSL é»˜è®¤é…ç½®å˜æ›´ æœåŠ¡å™¨ä¸æ”¯æŒä»»ä½•å·²å¯ç”¨çš„åŠ å¯†å¥—ä»¶ åº”ç”¨å¯¹ç”¨äºŽè¿žæŽ¥æœåŠ¡å™¨çš„åŠ å¯†å¥—ä»¶åšå‡ºé”™è¯¯çš„å‡è®¾ æœåŠ¡å™¨ä¸æ”¯æŒ TLSv1.1ã€TLSv1.2 æˆ–æ–°çš„ TLS æ‰©å±• æ”¯æŒæ‰˜ç®¡é…ç½®æ–‡ä»¶ Android 4.4 æ”¯æŒAndroid Beam æ·»åŠ æ‰“å°æ¡†æž¶ å­˜å‚¨è®¿é—®æ¡†æž¶ ä½ŽåŠŸè€—ä¼ æ„Ÿå™¨ æ·»åŠ çŸ­ä¿¡æä¾›ç¨‹åº æ·»åŠ å…¨å±æ²‰æµ¸æ¨¡å¼ Android æ²‰æµ¸å¼çŠ¶æ€æ çš„ä¸‰ç§å®žçŽ°æ–¹å¼ å…¼å®¹åº“SystemBarTint æ·»åŠ é€æ˜Žç³»ç»Ÿ UI æ ·å¼ æ·»åŠ æ–°çš„åª’ä½“åŠŸèƒ½ RenderScript Compute æŒç»­æ€§èƒ½æå‡ GPU åŠ é€Ÿ Android NDK ä¸­çš„ RenderScript å›¾å½¢ GLES2.0 SurfaceFlinge æ–°çš„ç¡¬ä»¶åˆæˆå™¨æ”¯æŒè™šæ‹Ÿæ˜¾ç¤º æ”¯æŒæ–°çš„è¿žæŽ¥ç±»åž‹ æ–°çš„è“ç‰™é…ç½®æ–‡ä»¶ çº¢å¤–å‘å°„å™¨ Wi-Fi TDLS æ”¯æŒ æ— éšœç¢åŠŸèƒ½ å®‰å…¨å¢žå¼ºåŠŸèƒ½ å†…å­˜ä½¿ç”¨çŽ‡åˆ†æžå·¥å…· Procstats Android 4.0,4.1,4.2,4.3 æ”¯æŒOpenGL ES 3.0 å¢žå¼ºè“ç‰™è¿žæŽ¥ ä¼˜åŒ–ä½ç½®å’Œä¼ æ„Ÿå™¨ æ·»åŠ è½¬åœºåŠ¨ç”» æ”¯æŒDaydream äººè„¸è¯†åˆ«è§£é” Photo Sphere å…¨æ™¯ç›¸ç‰‡ Android API å¯¹ç…§è¡¨Android Betaï¼Œå‘å¸ƒäºŽ2007å¹´11æœˆ5æ—¥ï¼ŒåŒæ—¶çš„è½¯ä»¶å¼€å‘å¥—ä»¶(SDK)ï¼Œå‘å¸ƒäºŽ2007å¹´11æœˆ12æ—¥ã€‚ 11æœˆ5æ—¥è¢«è®¤ä¸ºæ˜¯Androidçš„â€ç”Ÿæ—¥â€ã€‚ Androidæ¯ä¸ªç‰ˆæœ¬éƒ½æœ‰ä¸ªAPI Levelï¼Œå¯¹åº”ç€æŸä¸ªAndroidå‘å¸ƒç‰ˆæœ¬çš„åç§°ã€‚ Androidç‰ˆæœ¬åç§°Code name Androidç‰ˆæœ¬ ç‰ˆæœ¬å‘å¸ƒæ—¶é—´ å¯¹åº”API (no code name) 1.0 2008å¹´9æœˆ23æ—¥ API level 1 (no code name) 1.1 2009å¹´2æœˆ9æ—¥ API level 2 Cupcake çº¸æ¯è›‹ç³• 1.5 2009å¹´4æœˆ27æ—¥ API level 3,NDK 1 Donut ç”œç”œåœˆ 1.6 2009å¹´9æœˆ15æ—¥ API level 4,NDK 2 Eclair æ³¡èŠ™ 2 2009å¹´10æœˆ26æ—¥ API level 5 Eclair 2.0.1 2009å¹´12æœˆ3æ—¥ API level 6 Eclair 2.1 2010å¹´1æœˆ12æ—¥ API level 7,NDK3 Froyo å†»é…¸å¥¶ 2.2.x 2010å¹´5æœˆ20æ—¥ API level 8,NDK 4 Gingerbread å§œé¥¼ 2.3 â€“ 2.3.2 2010å¹´12æœˆ6æ—¥ API level 9,NDK5 Gingerbread 2.3.3 â€“ 2.3.7 2011å¹´2æœˆ9æ—¥ API level 10 Honeycomb èœ‚å·¢ 3.0 2011å¹´2æœˆ22æ—¥ API level 11 Honeycomb 3.1 2011å¹´5æœˆ10æ—¥ API level 12,NDK 6 Honeycomb 3.2.x 2011å¹´7æœˆ15æ—¥ API level 13 Ice Cream Sandwich 4.0.1 â€“ 4.0.2 2011å¹´10æœˆ18æ—¥ API level 14,NDK 7 Ice Cream Sandwich 4.0.3 â€“ 4.0.4 2011å¹´12æœˆ16æ—¥ API level 15,NDK 8 Jelly Bean æžœå†»è±† 4.1.x 2012å¹´7æœˆ9æ—¥ API level 16 Jelly Bean 4.2.x 2012å¹´11æœˆ13æ—¥ API level 17 Jelly Bean 4.3.x 2013å¹´7æœˆ24æ—¥ API level 18 KitKat å¥‡å·§ 4.4.x 2013å¹´10æœˆ31æ—¥ API level 19 KitKat 4.4W.x 2014å¹´6æœˆ25æ—¥ API level 20 Lollipop(Android L) æ£’æ£’ç³– 5.0 â€“ 5.0.2 2014å¹´11æœˆ12æ—¥ API level 21 Lollipop(Android L) 5.1 â€“ 5.1.1 2015å¹´3æœˆ9æ—¥ API level 22 Marshmallow(Android M) 6.0 â€“ 6.0.1 2015å¹´10æœˆ5æ—¥ API level 23 Nougat(Android N) ç‰›è½§ç³– 7.0 2016å¹´8æœˆ22æ—¥ API level 24 Nougat(Android N) 7.1.1 2016å¹´10æœˆ API level 25 Oreo(Android O) å¥¥åˆ©å¥¥ 8.0 2017å¹´3æœˆ21æ—¥ API level 26 Oreo(Android O) Android Go 8.1 2017å¹´12æœˆ6æ—¥ API level 27 Pistachio Ice Cream(Android P) 9 2018å¹´8æœˆ6æ—¥ API level 28]]></content>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidä¸­çš„å†…å­˜æ³„æ¼æ€»ç»“]]></title>
    <url>%2F2019%2F03%2F11%2FAndroid%E4%B8%AD%E7%9A%84%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[å†…å­˜ç®¡ç†çš„ç›®çš„å°±æ˜¯è®©æˆ‘ä»¬åœ¨å¼€å‘ä¸­æ€Žä¹ˆæœ‰æ•ˆçš„é¿å…æˆ‘ä»¬çš„åº”ç”¨å‡ºçŽ°å†…å­˜æ³„æ¼çš„é—®é¢˜ã€‚å†…å­˜æ³„æ¼å¤§å®¶éƒ½ä¸é™Œç”Ÿäº†ï¼Œç®€å•ç²—ä¿—çš„è®²ï¼Œå°±æ˜¯è¯¥è¢«é‡Šæ”¾çš„å¯¹è±¡æ²¡æœ‰é‡Šæ”¾ï¼Œä¸€ç›´è¢«æŸä¸ªæˆ–æŸäº›å®žä¾‹æ‰€æŒæœ‰å´ä¸å†è¢«ä½¿ç”¨å¯¼è‡´ GC ä¸èƒ½å›žæ”¶ã€‚æˆ‘ä¼šä»Ž Java å†…å­˜æ³„æ¼çš„åŸºç¡€çŸ¥è¯†å¼€å§‹ï¼Œå¹¶ä¸”é€šè¿‡å…·ä½“ä¾‹å­æ¥è¯´æ˜Ž Android å¼•èµ·å†…å­˜æ³„æ¼çš„å„ç§åŽŸå› ï¼Œä»¥åŠå¦‚ä½•åˆ©ç”¨å·¥å…·æ¥åˆ†æžåº”ç”¨å†…å­˜æ³„æ¼ï¼Œæœ€åŽå†åšæ€»ç»“ã€‚ç¯‡å¹…ç•¥é•¿ï¼Œå¤§å®¶å¯ä»¥åˆ†å‡ èŠ‚æ¥çœ‹ï¼ Java å†…å­˜åˆ†é…ç­–ç•¥Java ç¨‹åºè¿è¡Œæ—¶çš„å†…å­˜åˆ†é…ç­–ç•¥æœ‰ä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯é™æ€åˆ†é…ã€æ ˆå¼åˆ†é…ã€å †å¼åˆ†é…ï¼Œå¯¹åº”çš„ä¸‰ç§å­˜å‚¨ç­–ç•¥ä½¿ç”¨çš„å†…å­˜ç©ºé—´ä¸»è¦åˆ†åˆ«æ˜¯é™æ€å­˜å‚¨åŒºï¼ˆä¹Ÿç§°æ–¹æ³•åŒºï¼‰ã€æ ˆåŒºå’Œå †åŒºã€‚ é™æ€å­˜å‚¨åŒº(æ–¹æ³•åŒº)ï¼šä¸»è¦å­˜æ”¾é™æ€æ•°æ®ã€å…¨å±€ static æ•°æ®å’Œå¸¸é‡ã€‚è¿™å—å†…å­˜åœ¨ç¨‹åºç¼–è¯‘æ—¶å°±å·²ç»åˆ†é…å¥½ï¼Œå¹¶ä¸”åœ¨ç¨‹åºæ•´ä¸ªè¿è¡ŒæœŸé—´éƒ½å­˜åœ¨ã€‚ æ ˆåŒºï¼šå½“æ–¹æ³•è¢«æ‰§è¡Œæ—¶ï¼Œæ–¹æ³•ä½“å†…çš„å±€éƒ¨å˜é‡éƒ½åœ¨æ ˆä¸Šåˆ›å»ºï¼Œå¹¶åœ¨æ–¹æ³•æ‰§è¡Œç»“æŸæ—¶è¿™äº›å±€éƒ¨å˜é‡æ‰€æŒæœ‰çš„å†…å­˜å°†ä¼šè‡ªåŠ¨è¢«é‡Šæ”¾ã€‚å› ä¸ºæ ˆå†…å­˜åˆ†é…è¿ç®—å†…ç½®äºŽå¤„ç†å™¨çš„æŒ‡ä»¤é›†ä¸­ï¼Œæ•ˆçŽ‡å¾ˆé«˜ï¼Œä½†æ˜¯åˆ†é…çš„å†…å­˜å®¹é‡æœ‰é™ã€‚ å †åŒºï¼šåˆç§°åŠ¨æ€å†…å­˜åˆ†é…ï¼Œé€šå¸¸å°±æ˜¯æŒ‡åœ¨ç¨‹åºè¿è¡Œæ—¶ç›´æŽ¥ new å‡ºæ¥çš„å†…å­˜ã€‚è¿™éƒ¨åˆ†å†…å­˜åœ¨ä¸ä½¿ç”¨æ—¶å°†ä¼šç”± Java åžƒåœ¾å›žæ”¶å™¨æ¥è´Ÿè´£å›žæ”¶ã€‚ æ ˆä¸Žå †çš„åŒºåˆ«ï¼šåœ¨æ–¹æ³•ä½“å†…å®šä¹‰çš„ï¼ˆå±€éƒ¨å˜é‡ï¼‰ä¸€äº›åŸºæœ¬ç±»åž‹çš„å˜é‡å’Œå¯¹è±¡çš„å¼•ç”¨å˜é‡éƒ½æ˜¯åœ¨æ–¹æ³•çš„æ ˆå†…å­˜ä¸­åˆ†é…çš„ã€‚æŒ¡åœ¨ä¸€æ®µæ–¹æ³•å—ä¸­å®šä¹‰ä¸€ä¸ªå˜é‡æ—¶ï¼ŒJava å°±ä¼šåœ¨æ ˆä¸­ä¸ºè¯¥å˜é‡åˆ†é…å†…å­˜ç©ºé—´ï¼Œå½“è¶…è¿‡è¯¥å˜é‡çš„ä½œç”¨åŸŸåŽï¼Œè¯¥å˜é‡ä¹Ÿå°±æ— æ•ˆäº†ï¼Œåˆ†é…ç»™å®ƒçš„å†…å­˜ç©ºé—´ä¹Ÿå°†è¢«é‡Šæ”¾æŽ‰ï¼Œè¯¥å†…å­˜ç©ºé—´å¯ä»¥è¢«é‡æ–°ä½¿ç”¨ã€‚å †å†…å­˜ç”¨æ¥å­˜æ”¾æ‰€æœ‰ç”± new åˆ›å»ºçš„å¯¹è±¡ï¼ˆåŒ…æ‹¬è¯¥å¯¹è±¡å…¶ä¸­çš„æ‰€æœ‰æˆå‘˜å˜é‡ï¼‰å’Œæ•°ç»„ã€‚åœ¨å †ä¸­åˆ†é…çš„å†…å­˜ï¼Œå°†ç”± Java åžƒåœ¾å›žæ”¶å™¨æ¥è‡ªåŠ¨ç®¡ç†ã€‚åœ¨å †ä¸­äº§ç”Ÿäº†ä¸€ä¸ªæ•°ç»„æˆ–è€…å¯¹è±¡åŽï¼Œè¿˜å¯ä»¥åœ¨æ ˆä¸­å®šä¹‰ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡ï¼Œè¿™ä¸ªå˜é‡çš„å–å€¼ç­‰äºŽæ•°ç»„æˆ–è€…å¯¹è±¡åœ¨å †å†…å­˜ä¸­çš„é¦–åœ°å€ï¼Œè¿™ä¸ªç‰¹æ®Šçš„å˜é‡å°±æ˜¯æˆ‘ä»¬ä¸Šé¢è¯´çš„å¼•ç”¨å˜é‡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªå¼•ç”¨å˜é‡æ¥è®¿é—®å †ä¸­çš„å¯¹è±¡æˆ–è€…æ•°ç»„ã€‚ä¸¾ä¸ªðŸŒ°ï¼š1234567891011public class Sample()&#123; int s1 = 0; Sample mSample1 = new Sample(); public void method()&#123; int s2 = 1; Sample mSample2 = new Sample(); &#125;&#125;Sample mSample3 = new Sample(); Sample ç±»çš„å±€éƒ¨å˜é‡ s2 å’Œå¼•ç”¨å˜é‡ mSample2 éƒ½æ˜¯å­˜åœ¨äºŽæ ˆä¸­ï¼Œä½† mSample2 æŒ‡å‘çš„å¯¹è±¡æ˜¯å­˜åœ¨äºŽå †ä¸Šçš„ã€‚mSample3 æŒ‡å‘çš„å¯¹è±¡å®žä½“å­˜æ”¾åœ¨å †ä¸Šï¼ŒåŒ…æ‹¬è¿™ä¸ªå¯¹è±¡çš„æ‰€æœ‰æˆå‘˜å˜é‡ s1 å’Œ mSample1ï¼Œè€Œå®ƒè‡ªå·±å­˜åœ¨äºŽæ ˆä¸­ã€‚ç»“è®ºï¼š å±€éƒ¨å˜é‡çš„åŸºæœ¬æ•°æ®ç±»åž‹å’Œå¼•ç”¨å­˜å‚¨äºŽæ ˆä¸­ï¼Œå¼•ç”¨çš„å¯¹è±¡å®žä½“å­˜å‚¨äºŽå †ä¸­ã€‚å› ä¸ºå®ƒä»¬å±žäºŽæ–¹æ³•ä¸­çš„å˜é‡ï¼Œç”Ÿå‘½å‘¨æœŸéšæ–¹æ³•è€Œç»“æŸã€‚ æˆå‘˜å˜é‡å…¨éƒ¨å­˜å‚¨äºŽå †ä¸­ï¼ˆåŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»åž‹ï¼Œå¼•ç”¨å’Œå¼•ç”¨çš„å¯¹è±¡å®žä½“ï¼‰ã€‚å› ä¸ºå®ƒä»¬å±žäºŽç±»ï¼Œç±»å¯¹è±¡ç»ˆç©¶æ˜¯è¦è¢« new å‡ºæ¥ä½¿ç”¨çš„ã€‚ äº†è§£äº† Java çš„å†…å­˜åˆ†é…ä¹‹åŽï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ Java æ˜¯æ€Žä¹ˆç®¡ç†å†…å­˜çš„ã€‚ Java æ˜¯å¦‚ä½•ç®¡ç†å†…å­˜Java çš„å†…å­˜ç®¡ç†å°±æ˜¯å¯¹è±¡çš„åˆ†é…å’Œé‡Šæ”¾é—®é¢˜ã€‚åœ¨ Java ä¸­ï¼Œç¨‹åºå‘˜éœ€è¦é€šè¿‡å…³é”®å­— new ä¸ºæ¯ä¸ªå¯¹è±¡ç”³è¯·å†…å­˜ï¼ˆåŸºæœ¬ç±»åž‹é™¤å¤–ï¼‰ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½åœ¨å †ï¼ˆHeapï¼‰ä¸­åˆ†é…ç©ºé—´ã€‚å¦å¤–ï¼Œå¯¹è±¡çš„é‡Šæ”¾æ˜¯ç”± GC å†³å®šå’Œæ‰§è¡Œçš„ã€‚åœ¨ Java ä¸­ï¼Œå†…å­˜çš„åˆ†é…æ˜¯ç”±ç¨‹åºå®Œæˆçš„ï¼Œè€Œå†…å­˜çš„é‡Šæ”¾æ˜¯ç”± GC å®Œæˆçš„ï¼Œè¿™ç§æ”¶æ”¯ä¸¤æ¡çº¿çš„æ–¹æ³•ç¡®å®žç®€åŒ–äº†ç¨‹åºå‘˜çš„å·¥ä½œã€‚ä½†åŒæ—¶ï¼Œå®ƒä¹ŸåŠ é‡äº† JVM çš„å·¥ä½œã€‚è¿™ä¹Ÿæ˜¯ Java ç¨‹åºè¿è¡Œé€Ÿåº¦è¾ƒæ…¢çš„åŽŸå› ä¹‹ä¸€ã€‚å› ä¸ºï¼ŒGC ä¸ºäº†èƒ½å¤Ÿæ­£ç¡®é‡Šæ”¾å¯¹è±¡ï¼ŒGC å¿…é¡»ç›‘æŽ§æ¯ä¸€ä¸ªå¯¹è±¡çš„è¿è¡ŒçŠ¶æ€ï¼ŒåŒ…æ‹¬å¯¹è±¡çš„ç”³è¯·ã€å¼•ç”¨ã€è¢«å¼•ç”¨ã€èµ‹å€¼ç­‰ï¼ŒGC éƒ½éœ€è¦è¿›è¡Œç›‘æŽ§ã€‚ ç›‘è§†å¯¹è±¡çŠ¶æ€æ˜¯ä¸ºäº†æ›´åŠ å‡†ç¡®åœ°ã€åŠæ—¶åœ°é‡Šæ”¾å¯¹è±¡ï¼Œè€Œé‡Šæ”¾å¯¹è±¡çš„æ ¹æœ¬åŽŸåˆ™å°±æ˜¯è¯¥å¯¹è±¡ä¸å†è¢«å¼•ç”¨ã€‚ ä¸ºäº†æ›´å¥½ç†è§£ GC çš„å·¥ä½œåŽŸç†ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¯¹è±¡è€ƒè™‘ä¸ºæœ‰å‘å›¾çš„é¡¶ç‚¹ï¼Œå°†å¼•ç”¨å…³ç³»è€ƒè™‘ä¸ºå›¾çš„æœ‰å‘è¾¹ï¼Œæœ‰å‘è¾¹ä»Žå¼•ç”¨è¿™æŒ‡å‘è¢«å¼•ç”¨å¯¹è±¡ã€‚å¦å¤–ï¼Œæ¯ä¸ªçº¿ç¨‹å¯¹è±¡å¯ä»¥ä½œä¸ºä¸€ä¸ªå›¾çš„èµ·å§‹é¡¶ç‚¹ï¼Œä¾‹å¦‚å¤§å¤šç¨‹åºä»Ž main è¿›ç¨‹å¼€å§‹æ‰§è¡Œï¼Œé‚£ä¹ˆè¯¥å›¾å°±æ˜¯ä»¥ main è¿›ç¨‹é¡¶ç‚¹å¼€å§‹çš„ä¸€æ£µæ ¹æ ‘ã€‚åœ¨è¿™ä¸ªæœ‰å‘å›¾ä¸­ï¼Œæ ¹é¡¶ç‚¹ç§‘å¤§çš„å¯¹è±¡éƒ½æ˜¯æœ‰æ•ˆå¯¹è±¡ï¼ŒGC å°†ä¸å›žæ”¶è¿™äº›å¯¹è±¡ã€‚å¦‚æžœæŸä¸ªå¯¹è±¡ï¼ˆè¿žé€šå­å›¾ï¼‰ä¸Žè¿™ä¸ªæ ¹é¡¶ç‚¹ä¸å¯è¾¾ï¼ˆæ³¨æ„ï¼Œè¯¥å›¾ä¸ºæœ‰å‘å›¾ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬è®¤ä¸ºè¿™ä¸ªï¼ˆè¿™äº›ï¼‰å¯¹è±¡ä¸å†è¢«å¼•ç”¨ï¼Œå¯ä»¥è¢« GC å›žæ”¶ã€‚ä¸€ä¸‹ï¼Œæˆ‘ä»¬ä¸¾ä¸€ä¸ªä¾‹å­è¯´æ˜Ž JVM çš„å†…å­˜åˆ†é…æƒ…å†µã€‚ä»¥ä¸‹å³å›¾ï¼Œå°±æ˜¯å·¦è¾¹ç¨‹åºè¿è¡Œåˆ°ç¬¬ 6 è¡Œçš„ç¤ºæ„å›¾ã€‚ 1552315574(1).jpg Java ä½¿ç”¨æœ‰å‘å›¾çš„æ–¹å¼è¿›è¡Œå†…å­˜ç®¡ç†ï¼Œå¯ä»¥æ¶ˆé™¤å¼•ç”¨å¾ªçŽ¯çš„é—®é¢˜ï¼Œä¾‹å¦‚æœ‰ä¸‰ä¸ªå¯¹è±¡ï¼Œç›¸äº’å¼•ç”¨ï¼Œåªè¦å®ƒä»¬å’Œæ ¹è¿›ç¨‹ä¸å¯è¾¾çš„ï¼Œé‚£ä¹ˆ GC ä¹Ÿæ˜¯å¯ä»¥å›žæ”¶å®ƒä»¬çš„ã€‚è¿™ç§æ–¹å¼çš„ä¼˜ç‚¹æ˜¯ç®¡ç†å†…å­˜çš„ç²¾åº¦å¾ˆé«˜ï¼Œä½†æ˜¯æ•ˆçŽ‡è¾ƒä½Žã€‚å¦å¤–ä¸€ç§å¸¸ç”¨çš„å†…å­˜ç®¡ç†æŠ€æœ¯æ˜¯ä½¿ç”¨è®¡æ•°å™¨ï¼Œä¾‹å¦‚ COM æ¨¡åž‹é‡‡ç”¨è®¡æ•°å™¨æ–¹å¼ç®¡ç†æž„å»ºï¼Œå®ƒä¸Žæœ‰å‘å›¾ç›¸æ¯”ï¼Œç²¾åº¦å¾ˆä½Žï¼ˆå¾ˆéš¾å¤„ç†å¾ªçŽ¯å¼•ç”¨çš„é—®é¢˜ï¼‰ï¼Œä½†æ‰§è¡Œæ•ˆçŽ‡å¾ˆé«˜ã€‚ ä»€ä¹ˆæ˜¯ Java ä¸­çš„å†…å­˜æ³„æ¼åœ¨ Java ä¸­ï¼Œå†…å­˜æ³„æ¼å°±æ˜¯å­˜åœ¨ä¸€äº›è¢«åˆ†é…çš„å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡æœ‰ä¸‹é¢ä¸¤ä¸ªç‰¹ç‚¹ï¼Œé¦–å…ˆï¼Œè¿™äº›å¯¹è±¡æ˜¯å¯è¾¾çš„ï¼Œå³åœ¨æœ‰å‘å›¾ä¸­ï¼Œå­˜åœ¨é€šè·¯å¯ä»¥ä¸Žå…¶ç›¸è¿žï¼›å…¶æ¬¡ï¼Œè¿™äº›å¯¹è±¡æ˜¯æ— ç”¨çš„ï¼Œå³ ç¨‹åºä»¥åŽä¸ä¼šå†ä½¿ç”¨è¿™äº›å¯¹è±¡ã€‚å¦‚æžœå¯¹è±¡æ»¡è¶³è¿™ä¸¤ä¸ªæ¡ä»¶ï¼Œè¿™äº›å¯¹è±¡å°±å¯ä»¥åˆ¤å®šä¸º Java ä¸­çš„å†…å­˜æ³„æ¼ï¼Œè¿™äº›å¯¹è±¡ä¸ä¼šè¢« GC æ‰€å›žæ”¶ï¼Œç„¶è€Œå®ƒå´å ç”¨å†…å­˜ã€‚åœ¨ C++ ä¸­ï¼Œå†…å­˜æ³„æ¼çš„èŒƒå›´æ›´å¤§ä¸€äº›ã€‚æœ‰äº›å¯¹è±¡è¢«åˆ†é…äº†å†…å­˜ç©ºé—´ï¼Œç„¶åŽå´ä¸å¯è¾¾ï¼Œç”±äºŽ C++ ä¸­æ²¡æœ‰ GCï¼Œè¿™äº›å†…å­˜å°†æ°¸è¿œå›žæ”¶ä¸å›žæ¥ã€‚åœ¨ Java ä¸­ï¼Œè¿™äº›ä¸å¯è¾¾çš„å¯¹è±¡éƒ½æ˜¯ç”± GC è´Ÿè´£å›žæ”¶ï¼Œå› æ­¤ç¨‹åºå‘˜ä¸éœ€è¦è€ƒè™‘è¿™éƒ¨åˆ†çš„å†…å­˜æ³„æ¼ã€‚é€šè¿‡åˆ†æžï¼Œæˆ‘ä»¬å¾—çŸ¥ï¼Œå¯¹äºŽ C++ï¼Œç¨‹åºå‘˜éœ€è¦è‡ªå·±ç®¡ç†è¾¹å’Œé¡¶ç‚¹ï¼Œè€Œå¯¹äºŽ Java ç¨‹åºå‘˜åªè¦ç®¡ç†è¾¹å°±å¯ä»¥äº†ï¼ˆä¸éœ€è¦ç®¡ç†é¡¶ç‚¹çš„é‡Šæ”¾ï¼‰ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒJava æé«˜äº†ç¼–ç¨‹çš„æ•ˆçŽ‡ã€‚ 1552357959(1).jpg å› æ­¤ï¼Œé€šè¿‡ä»¥ä¸Šåˆ†æžï¼Œæˆ‘ä»¬çŸ¥é“åœ¨ Java ä¸­ä¹Ÿæœ‰å†…å­˜æ³„æ¼ï¼Œä½†èŒƒå›´æ¯” C++ è¦å°ä¸€äº›ã€‚å› ä¸º Java ä»Žè¯­è¨€ä¸Šä¿è¯ï¼Œä»»ä½•å¯¹è±¡éƒ½æ˜¯å¯è¾¾ï¼Œæ‰€æœ‰çš„ä¸å¯è¾¾å¯¹è±¡éƒ½æ˜¯ç”± GC ç®¡ç†ã€‚ å¯¹äºŽç¨‹åºå‘˜æ¥è¯´ï¼ŒGC åŸºæœ¬æ˜¯é€æ˜Žçš„ï¼Œä¸å¯è§çš„ã€‚è™½ç„¶æˆ‘ä»¬åªæœ‰å‡ ä¸ªå‡½æ•°å¯ä»¥è®¿é—® GCï¼Œä¾‹å¦‚è¿è¡Œ GC çš„å‡½æ•° System.gc()ï¼Œä½†æ˜¯æ ¹æ® Java è¯­è¨€è§„èŒƒå®šä¹‰ï¼Œè¯¥å‡½æ•°ä¸ä¿è¯ JVM çš„åžƒåœ¾æ”¶é›†å™¨ä¸€å®šä¼šæ‰§è¡Œã€‚å› ä¸ºï¼Œä¸åŒçš„ JVM å®žçŽ°è€…å¯èƒ½ä½¿ç”¨ä¸åŒçš„ç®—æ³•ç®¡ç† GCã€‚é€šå¸¸ï¼ŒGC çš„çº¿ç¨‹çš„ä¼˜å…ˆçº§åˆ«è¾ƒä½Žã€‚JVM è°ƒç”¨ GC çš„ç­–ç•¥ä¹Ÿæœ‰å¾ˆå¤šç§ï¼Œæœ‰çš„æ˜¯å†…å­˜ä½¿ç”¨è¾¾åˆ°ä¸€å®šç¨‹åº¦æ—¶ï¼ŒGC æ‰å¼€å§‹å·¥ä½œï¼Œä¹Ÿæœ‰å®šæ—¶æ‰§è¡Œçš„ï¼Œæœ‰çš„æ˜¯å¹³ç¼“æ‰§è¡Œ GCï¼Œæœ‰çš„æ˜¯ä¸­æ–­å¼æ‰§è¡Œ GCã€‚ä½†é€šå¸¸æ¥è¯´ï¼Œæˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒè¿™äº›ã€‚é™¤éžåœ¨ä¸€äº›ç‰¹å®šçš„åœºåˆï¼ŒGC çš„æ‰§è¡Œå½±å“åº”ç”¨ç¨‹åºçš„æ€§èƒ½ï¼Œä¾‹å¦‚å¯¹äºŽåŸºæœ¬ Web çš„å®žæ—¶ç³»ç»Ÿï¼Œå¦‚ç½‘ç»œæ¸¸æˆç­‰ï¼Œç”¨æˆ·ä¸å¸Œæœ› GC çªç„¶ä¸­æ–­åº”ç”¨ç¨‹åºæ‰§è¡Œè€Œè¿›è¡Œåžƒåœ¾å›žæ”¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦è°ƒæ•´ GC çš„å‚æ•°ï¼Œè®© GC èƒ½å¤Ÿé€šè¿‡å¹³ç¼“çš„æ–¹å¼é‡Šæ”¾å†…å­˜ï¼Œä¾‹å¦‚å°†åžƒåœ¾å›žæ”¶åˆ†è§£ä¸ºä¸€ç³»åˆ—çš„å°æ­¥éª¤æ‰§è¡Œï¼ŒSun æä¾›çš„ HotSpot JVM å°±æ”¯æŒè¿™ä¸€ç‰¹æ€§ã€‚åŒæ ·ç»™å‡ºä¸€ä¸ª Java å†…å­˜æ³„æ¼çš„å…¸åž‹ä¾‹å­ï¼Œ12345Vector v = new Vector(10);for(int i = 1; i &lt; 100; i++)&#123; Object o = new Object(); v.add&#125; åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¾ªçŽ¯ç”³è¯· Object å¯¹è±¡ï¼Œå¹¶å°†æ‰€ç”³è¯·çš„å¯¹è±¡æ”¾å…¥ä¸€ä¸ª Vector ä¸­ï¼Œå¦‚æžœæˆ‘ä»¬ä»…ä»…é‡Šæ”¾å¼•ç”¨æœ¬èº«ï¼Œé‚£ä¹ˆ Vector ä»ç„¶å¼•ç”¨è¯¥å¯¹è±¡ï¼Œæ‰€ä»¥è¿™ä¸ªå¯¹è±¡å¯¹ GC æ¥è¯´æ˜¯ä¸å¯å›žæ”¶çš„ã€‚å› æ­¤ï¼Œå¦‚æžœå¯¹è±¡åŠ å…¥åˆ° Vector åŽï¼Œè¿˜å¿…é¡»ä»Ž Vector ä¸­åˆ é™¤ï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯å°† Vector å¯¹è±¡è®¾ç½®ä¸º nullã€‚ Android ä¸­å¸¸è§çš„å†…å­˜æ³„æ¼æ±‡æ€» é›†åˆç±»æ³„æ¼é›†åˆç±»å¦‚æžœä»…ä»…æœ‰æ·»åŠ å…ƒç´ çš„æ–¹æ³•ï¼Œè€Œæ²¡æœ‰ç›¸åº”çš„åˆ é™¤æœºåˆ¶ï¼Œå¯¼è‡´å†…å­˜è¢«å ç”¨ã€‚å¦‚æžœè¿™ä¸ªé›†åˆç±»æ˜¯å…¨å±€æ€§çš„å˜é‡ï¼ˆæ¯”å¦‚ç±»ä¸­çš„é™æ€å±žæ€§ï¼Œå…¨å±€æ€§çš„ map ç­‰å³æœ‰é™æ€å¼•ç”¨æˆ– final ä¸€ç›´æŒ‡å‘å®ƒï¼‰ï¼Œé‚£ä¹ˆæ²¡æœ‰ç›¸åº”çš„åˆ é™¤æœºåˆ¶ï¼Œå¾ˆå¯èƒ½å¯¼è‡´é›†åˆé”å ç”¨çš„å†…å­˜åªå¢žä¸å‡ã€‚æ¯”å¦‚ä¸Šé¢çš„å…¸åž‹ä¾‹å­å°±æ˜¯å…¶ä¸­ä¸€ç§æƒ…å†µï¼Œå½“ç„¶å®žé™…ä¸Šæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­è‚¯å®šä¸ä¼šå†™è¿™ä¹ˆ 2B çš„ä»£ç ï¼Œä½†ç¨ä¸æ³¨æ„è¿˜æ˜¯å¾ˆå®¹æ˜“å‡ºçŽ°è¿™ç§æƒ…å†µï¼Œæ¯”å¦‚æˆ‘ä»¬éƒ½å–œæ¬¢é€šè¿‡ HashMap åšä¸€äº›ç¼“å­˜ä¹‹ç±»çš„äº‹ï¼Œè¿™ç§æƒ…å†µè¦å¤šç•™ä¸€äº›å¿ƒçœ¼ã€‚ å•ä¾‹é€ æˆçš„å†…å­˜æ³„æ¼ç”±äºŽå•ä¾‹çš„é™æ€ç‰¹æ€§ä½¿å¾—å…¶ç”Ÿå‘½å‘¨æœŸè·Ÿåº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸä¸€æ ·é•¿ï¼Œæ‰€ä»¥å¦‚æžœä½¿ç”¨ä¸æ°å½“çš„è¯ï¼Œå¾ˆå®¹æ˜“é€ æˆå†…å­˜æ³„æ¼ã€‚æ¯”å¦‚ä¸‹é¢ä¸€ä¸ªå…¸åž‹çš„ä¾‹å­ï¼Œ 12345678910111213public class AppManager&#123; private static AppManager instance; private Context context; private AppManager(Context context)&#123; this.context = context; &#125; public static AppManager getInstance(Context context)&#123; if(instance == null)&#123; instance = new AppManager(context); &#125; return instance; &#125;&#125; è¿™æ˜¯ä¸€ä¸ªæ™®é€šçš„å•ä¾‹æ¨¡å¼ï¼Œå½“åˆ›å»ºè¿™ä¸ªå•ä¾‹çš„æ—¶å€™ï¼Œç”±äºŽéœ€è¦ä¼ å…¥ä¸€ä¸ª Contextï¼Œæ‰€ä»¥è¿™ä¸ª Context çš„ç”Ÿå‘½å‘¨æœŸçš„é•¿çŸ­è‡³å…³é‡è¦ï¼š å¦‚æžœæ­¤æ—¶ä¼ å…¥çš„æ˜¯ Application çš„ Contextï¼Œå› ä¸º Application çš„ç”Ÿå‘½å‘¨æœŸå°±æ˜¯æ•´ä¸ªåº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ‰€ä»¥è¿™å°†æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚ å¦‚æžœæ­¤æ—¶ä¼ å…¥çš„æ˜¯ Activity çš„ Contextï¼Œå½“è¿™ä¸ª Context æ‰€å¯¹åº”çš„ Activity é€€å‡ºæ—¶ï¼Œç”±äºŽè¯¥ Context çš„å¼•ç”¨è¢«å•ä¾‹å¯¹è±¡æ‰€æŒæœ‰ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸç­‰äºŽæ•´ä¸ªåº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸï¼Œå‹è°Šå½“å‰ Activity é€€å‡ºæ—¶å®ƒçš„å†…å­˜å¹¶ä¸ä¼šè¢«å›žæ”¶ï¼Œè¿™å°±é€ æˆæ³„æ¼äº†ã€‚ æ­£ç¡®çš„æ–¹å¼åº”è¯¥æ”¹ä¸ºä¸‹é¢è¿™ç§æ–¹å¼ï¼š12345678910111213public class AppManager&#123; private static AppManager instance; private Context context; private AppManager(Context context)&#123; this.context = context.getApplicationContext();//ä½¿ç”¨Applicationçš„context &#125; public static AppManager getInstance(Context context)&#123; if(instance == null)&#123; instance = new AppManager(context); &#125; return instance; &#125;&#125; æˆ–è€…è¿™æ ·å†™ï¼Œè¿ž Context éƒ½ä¸ç”¨ä¼ è¿‡æ¥äº†ï¼š12345678910111213141516171819202122232425//åœ¨ä½ çš„Applicationä¸­æ·»åŠ ä¸€ä¸ªé™æ€æ–¹æ³•ï¼ŒgetContext() è¿”å›ž Application çš„ contextÂ·Â·Â·context = getApplicationContext();Â·Â·Â·/** * èŽ·å–å…¨å±€çš„context * @return è¿”å›žå…¨å±€contextå¯¹è±¡ */ pulic static Context getContext()&#123; return context; &#125;public class AppManager&#123; private static AppManager instance; private Context context; private AppManager()&#123; this.context = MyApplication.getContext();//ä½¿ç”¨Applicationçš„context &#125; public static AppManager getInstance()&#123; if(instance == null)&#123; instance = new AppManager(); &#125; return instance; &#125;&#125; åŒ¿åå†…éƒ¨ç±»/éžé™æ€å†…éƒ¨ç±»å’Œå¼‚æ­¥çº¿ç¨‹ éžé™æ€å†…éƒ¨ç±»åˆ›å»ºé™æ€å®žä¾‹é€ æˆçš„å†…å­˜æ³„æ¼æœ‰æ—¶å€™æˆ‘ä»¬ä¸ºäº†é¿å…å¯èƒ½ä¼šåœ¨å¯åŠ¨é¢‘ç¹çš„ Activity ä¸­ï¼Œä¸ºäº†é¿å…é‡å¤åˆ›å»ºç›¸åŒçš„æ•°æ®èµ„æºï¼Œå¯èƒ½ä¼šå‡ºçŽ°è¿™ç§å†™æ³•ï¼š123456789101112131415public class MainActivity extends AppCompatActivity&#123; private static TestResource mResource = null; @Override protected void onCreate(Bundle savedInstanceState)&#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); if(mManager == null)&#123; mManager = new TestResource(); &#125; //Â·Â·Â· &#125; class TestResource&#123; //Â·Â·Â· &#125;&#125; è¿™æ ·å°±åœ¨ Activity å†…éƒ¨åˆ›å»ºäº†ä¸€ä¸ªéžé™æ€å†…éƒ¨ç±»çš„å•ä¾‹ï¼Œæ¯æ¬¡å¯åŠ¨ Activity æ—¶éƒ½ä¼šä½¿ç”¨è¯¥å•ä¾‹çš„æ•°æ®ï¼Œè¿™æ ·è™½ç„¶é¿å…äº†èµ„æºçš„é‡å¤åˆ›å»ºï¼Œä¸è¿‡è¿™ç§å†™æ³•ä¼šé€ æˆå†…å­˜æ³„æ¼ï¼Œå› ä¸ºéžé™æ€å†…éƒ¨ç±»é»˜è®¤ä¼šæœ‰å¤–éƒ¨ç±»çš„å¼•ç”¨ï¼Œè€Œè¯¥éžé™æ€å†…éƒ¨ç±»åˆåˆ›å»ºäº†ä¸€ä¸ªé™æ€å®žä¾‹ï¼Œè¯¥å®žä¾‹çš„ç”Ÿå‘½å‘¨æœŸå’Œåº”ç”¨çš„ä¸€æ ·é•¿ï¼Œè¿™å°±å¯¼è‡´äº†è¯¥é™æ€å®žä¾‹ä¸€ç›´ä¼šæŒæœ‰è¯¥ Activity çš„å¼•ç”¨ï¼Œå¯¼è‡´ Activity çš„å†…å­˜èµ„æºä¸èƒ½æ­£å¸¸å›žæ”¶ã€‚æ­£ç¡®çš„åšæ³•ä¸ºï¼šå°†è¯¥å†…éƒ¨ç±»è®¾ä¸ºé™æ€å†…éƒ¨ç±»æˆ–è€…å°†è¯¥å†…éƒ¨ç±»æŠ½å–å‡ºæ¥å°è£…æˆä¸€ä¸ªå•ä¾‹ï¼Œå¦‚æžœéœ€è¦ä½¿ç”¨ Contextï¼Œè¯·æŒ‰ç…§ä¸Šé¢æŽ¨èçš„ä½¿ç”¨ Application çš„ contextã€‚å½“ç„¶ï¼ŒApplication çš„ context ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œæ‰€ä»¥ä¹Ÿä¸èƒ½éšä¾¿ä¹±ç”¨ï¼Œå¯¹äºŽæœ‰äº›åœ°æ–¹åˆ™å¿…é¡»ä½¿ç”¨ Activity çš„ Contextï¼Œå¯¹äºŽ Applicationï¼ŒServiceï¼ŒActivity ä¸‰è€…çš„ Context çš„åº”ç”¨åœºæ™¯å¦‚ä¸‹ï¼š åŠŸèƒ½ Application Service Acativity Start an Activity NO1 NO1 YES Show a Dialog NO NO YES Layout Inflation YES YES YES Start a Service YES YES YES Bind to a Service YES YES YES Send a Broadcast YES YES YES Register BroadcastReceiver YES YES YES Load Resource Values YES YES YES å…¶ä¸­ï¼šNO1 è¡¨ç¤º Application å’Œ Service å¯ä»¥å¯åŠ¨ä¸€ä¸ª Activityï¼Œä¸è¿‡éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ task ä»»åŠ¡é˜Ÿåˆ—ã€‚è€Œå¯¹äºŽ Dialog è€Œè¨€ï¼Œåªæœ‰åœ¨ Activity ä¸­æ‰èƒ½åˆ›å»º åŒ¿åå†…éƒ¨ç±»Android å¼€å‘ç»å¸¸ä¼šç»§æ‰¿å®žçŽ° Activity/Fragment/View,æ­¤æ—¶å¦‚æžœä½ ä½¿ç”¨äº†åŒ¿åç±»ï¼Œå¹¶è¢«å¼‚æ­¥çº¿ç¨‹æŒæœ‰äº†ï¼Œé‚£è¦å°å¿ƒäº†ï¼Œå¦‚æžœæ²¡æœ‰ä»»ä½•æŽªæ–½è¿™æ ·ä¸€å®šä¼šå¯¼è‡´æ³„æ¼12345678910public class MainActivity extends Activity&#123; Â·Â·Â· Runnable ref1 = new MyRunnable(); Runnable ref2 = new Runnable()&#123; @Override public void run()&#123; &#125; &#125;; Â·Â·Â·&#125; ref1 å’Œ ref2 çš„åŒºåˆ«æ˜¯ï¼Œref2 ä½¿ç”¨äº†åŒ¿åå†…éƒ¨ç±»ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹è¿è¡Œæ—¶è¿™ä¸¤ä¸ªå¼•ç”¨çš„å†…å­˜ï¼š 1552370991(1).png å¯ä»¥çœ‹åˆ°ï¼Œref1 æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„ã€‚ä½† ref2 è¿™ä¸ªåŒ¿åç±»çš„å®žçŽ°å¯¹è±¡é‡Œé¢å¤šäº†ä¸€ä¸ªå¼•ç”¨ï¼šthis$0 è¿™ä¸ªå¼•ç”¨æŒ‡å‘ MainActivity.thisï¼Œä¹Ÿå°±æ˜¯è¯´å½“å‰çš„ MainActivity å®žä¾‹ä¼šè¢« ref2 æŒæœ‰ï¼Œå¦‚æžœå°†è¿™ä¸ªå¼•ç”¨å†ä¼ å…¥ä¸€ä¸ªå¼‚æ­¥çº¿ç¨‹ï¼Œæ­¤çº¿ç¨‹å’Œæ­¤ Activity ç”Ÿå‘½å‘¨æœŸä¸ä¸€è‡´çš„æ—¶å€™ï¼Œå°±é€ æˆäº† Activity çš„æ³„æ¼ã€‚ Handler é€ æˆçš„å†…å­˜æ³„æ¼Handler çš„ä½¿ç”¨é€ æˆçš„å†…å­˜æ³„æ¼é—®é¢˜åº”è¯¥è¯´æ˜¯æœ€ä¸ºå¸¸è§äº†ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä¸ºäº†é¿å… ANR è€Œä¸åœ¨ä¸»çº¿ç¨‹è¿›è¡Œè€—æ—¶æ“ä½œï¼Œåœ¨å¤„ç†ç½‘ç»œä»»åŠ¡æˆ–è€…å°è£…ä¸€äº›è¯·æ±‚å›žè°ƒç­‰ api éƒ½å€ŸåŠ© Handler æ¥å¤„ç†ï¼Œä½† Handler ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œå¯¹äºŽ Handler çš„ä½¿ç”¨ä»£ç ç¼–å†™ä¸€ä¸è§„èŒƒå³æœ‰å¯èƒ½é€ æˆå†…å­˜æ³„æ¼ã€‚å¦å¤–ï¼Œæˆ‘ä»¬çŸ¥é“ Handlerã€Message å’Œ MessageQueue éƒ½æ˜¯ç›¸äº’å…³è”åœ¨ä¸€èµ·çš„ï¼Œä¸‡ä¸€ Handler å‘é€çš„ Message å°šæœªè¢«å¤„ç†ï¼Œåˆ™è¯¥ Message åŠå‘é€å®ƒçš„ Handler å¯¹è±¡è¢«çº¿ç¨‹ MessageQueue ä¸€ç›´æŒæœ‰ã€‚ç”±äºŽ Handler å±žäºŽ TLSï¼ˆThread Local Storageï¼‰å˜é‡ï¼Œç”Ÿå‘½å‘¨æœŸå’Œ Activity æ˜¯ä¸ä¸€è‡´çš„ã€‚å› æ­¤è¿™ç§å®žçŽ°æ–¹å¼ä¸€èˆ¬å¾ˆéš¾ä¿è¯è·Ÿ View æˆ–è€… Activity çš„ç”Ÿå‘½å‘¨æœŸä¿æŒä¸€è‡´ï¼Œæ•…å¾ˆå®¹æ˜“å¯¼è‡´æ— æ³•æ­£å¸¸é‡Šæ”¾ã€‚ä¸¾ä¸ªä¾‹å­ï¼š12345678910111213141516171819public class SampleActivity extends Activity&#123; private final Handler mLeakyHandler = new Handler()&#123; @Override public void handleMessage(Message msg)&#123; // ... &#125; &#125; @Override protected void onCreate(Bundle savedInstanceState)&#123; super.onCreate(savedInstanceState); // Post a message and delay its execution for 10 minutes. mLeakyHandler.postDdelayed(new Runnable &#123; @Override public void run()&#123;/** ... */&#125; &#125;, 1000 * 60 * 10); //Go back to the previous Activity. finish(); &#125;&#125; åœ¨è¯¥ SampleActivity ä¸­å£°æ˜Žäº†ä¸€ä¸ªå»¶è¿Ÿ 10 åˆ†é’Ÿæ‰§è¡Œçš„æ¶ˆæ¯ Messageï¼ŒmLeakyHandler å°†å…¶ push è¿›äº†æ¶ˆæ¯é˜Ÿåˆ— MessageQueue é‡Œã€‚å½“è¯¥ Activity è¢« finish()æŽ‰æ—¶ï¼Œå»¶è¿Ÿæ‰§è¡Œä»»åŠ¡çš„ Message è¿˜ä¼šç»§ç»­å­˜åœ¨äºŽä¸»çº¿ç¨‹ä¸­ï¼Œå®ƒæŒæœ‰è¯¥ Activity çš„ Handler å¼•ç”¨ï¼Œæ‰€ä»¥æ­¤æ—¶ finish() æŽ‰çš„ Activity å°±ä¸ä¼šè¢«å›žæ”¶äº†ä»Žè€Œé€ æˆå†…å­˜æ³„æ¼ï¼ˆå›  Handler ä¸ºéžé™æ€å†…éƒ¨ç±»ï¼Œå®ƒä¼šæŒæœ‰å¤–éƒ¨ç±»çš„å¼•ç”¨ï¼Œåœ¨è¿™é‡Œå°±æ˜¯æŒ‡ SampleActivityï¼‰ã€‚ä¿®å¤æ–¹æ³•ï¼šåœ¨ Activity ä¸­é¿å…ä½¿ç”¨éžé™æ€å†…éƒ¨ç±»ï¼Œæ¯”å¦‚ä¸Šé¢æˆ‘ä»¬å°† Handler å£°æ˜Žä¸ºé™æ€çš„ï¼Œåˆ™å…¶å­˜æ´»æœŸè·Ÿ Activity çš„ç”Ÿå‘½å‘¨æœŸå°±æ— å…³äº†ã€‚åŒæ—¶é€šè¿‡å¼±å¼•ç”¨çš„æ–¹å¼å¼•å…¥ Activityï¼Œé¿å…ç›´æŽ¥å°† Activity ä½œä¸º context ä¼ è¿›åŽ»ï¼Œè§ä¸‹é¢ä»£ç ï¼š123456789101112131415161718192021222324252627282930public class SampleActivity extends Activity&#123; /** * Instances of static inner classes do not hold an implicit * reference to their outer class */ private static class MyHandler extends Handler&#123; private final WeakReference&lt;SampleActivity&gt; mActivity; public MyHandler(SampleActivity activity)&#123; mActivity = new WeakReference&lt;SampleActivity&gt;(activity); &#125; @Override public void handleMessage(Message msg)&#123; SampleActivity activity = mActivity.get(); if(activity != null)&#123; // ... &#125; &#125; &#125; private final MyHandler mHandler = new MyHandler(this); /** * Instances of anonymous classes do not hold an implicit * reference to their outer class when they are "static" */ private static final Runnable sRunnable = new Runnable()&#123; @Override public void run()&#123;/*...*/&#125; &#125;; &#125;]]></content>
      <tags>
        <tag>Android</tag>
        <tag>Interview</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Javaæ·±å…¥æºç ]]></title>
    <url>%2F2019%2F03%2F10%2FJava%E6%B7%B1%E5%85%A5%E6%BA%90%E7%A0%81%2F</url>
    <content type="text"><![CDATA[ä¸‹é¢é‚£äº›æƒ…å†µä¸‹çš„å¯¹è±¡ä¼šè¢«åžƒåœ¾å›žæ”¶æœºåˆ¶å¤„ç†æŽ‰ï¼Ÿåˆ©ç”¨å¯è¾¾æ€§åˆ†æžç®—æ³•ï¼Œè™šæ‹Ÿæœºä¼šå°†ä¸€äº›å¯¹è±¡å®šä¹‰ä¸º GC Rootsï¼Œä»Ž GC Roots å‡ºå‘æ²¿ç€å¼•ç”¨é“¾å‘ä¸‹å¯»æ‰¾ï¼Œå¦‚æžœæŸä¸ªå¯¹è±¡ä¸èƒ½é€šè¿‡ GC Roots å¯»æ‰¾åˆ°ï¼Œè™šæ‹Ÿæœºå°±è®¤ä¸ºè¯¥å¯¹è±¡å¯ä»¥è¢«å›žæ”¶æŽ‰ã€‚ é‚£äº›å¯¹è±¡å¯ä»¥è¢«çœ‹åšæ˜¯ GC Roots å‘¢ï¼Ÿ è™šæ‹Ÿæœºæ ˆï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰ä¸­å¼•ç”¨çš„å¯¹è±¡ï¼› æ–¹æ³•åŒºä¸­çš„ç±»é™æ€å±žæ€§å¼•ç”¨çš„å¯¹è±¡ï¼Œå¸¸é‡å¼•ç”¨çš„å¯¹è±¡ï¼› æœ¬åœ°æ–¹æ³•æ ˆä¸­ JNIï¼ˆNative æ–¹æ³•ï¼‰å¼•ç”¨çš„å¯¹è±¡ï¼› å¯¹è±¡ä¸å¯è¾¾ï¼Œä¸€å®šä¼šè¢«åžƒåœ¾æ”¶é›†å™¨å›žæ”¶ä¹ˆï¼Ÿå³ä½¿ä¸å¯è¾¾ï¼Œå¯¹è±¡ä¹Ÿä¸ä¸€å®šä¼šè¢«åžƒåœ¾æ”¶é›†å™¨å›žæ”¶ã€‚ å…ˆåˆ¤æ–­å¯¹è±¡æ˜¯å¦æœ‰å¿…è¦æ‰§è¡Œ finalize()æ–¹æ³•ï¼Œå¯¹è±¡å¿…é¡»é‡å†™ finalize()æ–¹æ³•ä¸”æ²¡æœ‰è¢«è¿è¡Œè¿‡ã€‚ è‹¥æœ‰å¿…è¦æ‰§è¡Œï¼Œä¼šæŠŠå¯¹è±¡æ”¾åˆ°ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼ŒJVM ä¼šå¼€ä¸€ä¸ªçº¿ç¨‹åŽ»å›žæ”¶å®ƒä»¬ï¼Œè¿™æ˜¯å¯¹è±¡æœ€åŽä¸€æ¬¡å¯ä»¥é€ƒé€¸æ¸…ç†çš„æœºä¼šã€‚ è®²ä¸€ä¸‹å¸¸è§çš„ç¼–ç æ–¹å¼ï¼Ÿç¼–ç çš„æ„ä¹‰ï¼šè®¡ç®—æœºä¸­å­˜å‚¨çš„æœ€å°å•å…ƒæ˜¯ä¸€ä¸ªå­—èŠ‚å³ 8bitï¼Œæ‰€èƒ½è¡¨ç¤ºçš„è‡ªä»˜èŒƒå›´æ˜¯ 255 ä¸ªï¼Œè€Œäººç±»è¦è¡¨ç¤ºçš„ç¬¦å·å¤ªå¤šï¼Œæ— æ³•ç”¨ä¸€ä¸ªå­—èŠ‚æ¥å®Œå…¨è¡¨ç¤ºï¼Œæ•…éœ€è¦å°†ç¬¦å·ç¼–ç ï¼Œå°†å„ç§è¯­è¨€ç¿»è¯‘æˆæœºå™¨è¯­è¨€ã€‚ ASCII ç ï¼šæ€»å…± 128 ä¸ªï¼Œç”¨ä¸€ä¸ªå­—èŠ‚çš„ä½Ž 7 ä½è¡¨ç¤ºï¼Œ0 ~ 31 æŽ§åˆ¶å­—ç¬¦å¦‚æ¢å›žè½¦åˆ é™¤ç­‰ï¼›32 ~ 126 æ˜¯æ‰“å°å­—ç¬¦ï¼Œå¯é€šè¿‡é”®ç›˜è¾“å…¥å¹¶æ˜¾ç¤ºå‡ºæ¥ï¼› ISO-8859-1ï¼Œç”¨æ¥æ‰©å±• ASCII ç¼–ç ï¼Œ256 ä¸ªå­—ç¬¦ï¼Œæ¶µç›–äº†å¤§å¤šæ•°è¥¿æ¬§è¯­è¨€å­—ç¬¦ï¼› GB2312:åŒå­—èŠ‚ç¼–ç ï¼Œæ€»ç¼–ç èŒƒå›´æ˜¯ A1-A7,A1-A9 æ˜¯ç¬¦å·åŒºï¼ŒåŒ…å« 682 ä¸ªå­—ç¬¦ï¼ŒB0-B7 æ˜¯æ±‰å­—åŒºï¼ŒåŒ…å« 6763 ä¸ªæ±‰å­—ï¼› GBK ä¸ºäº†æ‰©å±• GB2312ï¼ŒåŠ å…¥äº†æ›´å¤šçš„æ±‰å­—ï¼Œç¼–ç èŒƒå›´æ˜¯ 8140~FEFEï¼Œæœ‰ 23940 ä¸ªç ä½ï¼Œèƒ½è¡¨ç¤º 21003 ä¸ªæ±‰å­—ï¼› UTF-16: ISOè¯•å›¾æƒ³åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„è¶…è¯­è¨€å­—å…¸ï¼Œä¸–ç•Œä¸Šæ‰€æœ‰è¯­è¨€éƒ½å¯é€šè¿‡è¿™æœ¬å­—å…¸Unicodeæ¥ç›¸äº’ç¿»è¯‘ï¼Œè€ŒUTF-16å®šä¹‰äº†Unicodeå­—ç¬¦åœ¨è®¡ç®—æœºä¸­å­˜å–æ–¹æ³•ï¼Œç”¨ä¸¤ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºUnicodeè½¬åŒ–æ ¼å¼ã€‚ä¸è®ºä»€ä¹ˆå­—ç¬¦éƒ½å¯ç”¨ä¸¤å­—èŠ‚è¡¨ç¤ºï¼Œå³16bitï¼Œæ•…å«UTF-16ã€‚ UTF-8ï¼šUTF-16ç»Ÿä¸€é‡‡ç”¨ä¸¤å­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œä½†æœ‰äº›å­—ç¬¦åªç”¨ä¸€ä¸ªå­—èŠ‚å°±å¯è¡¨ç¤ºï¼Œæµªè´¹å­˜å‚¨ç©ºé—´ï¼Œè€ŒUTF-8é‡‡ç”¨ä¸€ç§å˜é•¿æŠ€æœ¯ï¼Œæ¯ä¸ªç¼–ç åŒºåŸŸæœ‰ä¸åŒçš„å­—ç é•¿åº¦ã€‚ ä¸åŒç±»åž‹çš„å­—ç¬¦å¯ä»¥ç”±1~6ä¸ªå­—èŠ‚ç»„æˆã€‚ utf-8 ç¼–ç ä¸­çš„ä¸­æ–‡å å‡ ä¸ªå­—èŠ‚ï¼Ÿint åž‹å å‡ ä¸ªå­—èŠ‚ï¼Ÿutf-8 æ˜¯ä¸€ç§å˜é•¿ç¼–ç æŠ€æœ¯ï¼Œutf-8 ç¼–ç ä¸­çš„ä¸­æ–‡å ç”¨çš„å­—èŠ‚ä¸ç¡®å®šï¼Œå¯èƒ½æ˜¯ 2 ä¸ªã€3 ä¸ªã€4 ä¸ªï¼Œint åž‹å  4 ä¸ªå­—èŠ‚ã€‚ é™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†çš„åŒºåˆ«ï¼Œä»€ä¹ˆåœºæ™¯ä½¿ç”¨ï¼Ÿä»£ç†æ˜¯ä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œç›®çš„æ˜¯ï¼šä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†ä»¥æŽ§åˆ¶å¯¹æŸä¸ªå¯¹è±¡çš„è®¿é—®ï¼Œå°†ä¸¤ä¸ªç±»çš„å…³ç³»è§£è€¦ã€‚ä»£ç†ç±»å’Œå§”æ‰˜ç±»éƒ½è¦å®žçŽ°ç›¸åŒçš„æŽ¥å£ï¼Œå› ä¸ºä»£ç†çœŸæ­£è°ƒç”¨çš„æ˜¯å§”æ‰˜ç±»çš„æ–¹æ³•ã€‚åŒºåˆ«ï¼š é™æ€ä»£ç†ï¼šç”±ç¨‹åºå‘˜åˆ›å»ºæˆ–æ˜¯ç”±ç‰¹å®šå·¥å…·ç”Ÿæˆï¼Œåœ¨ä»£ç ç¼–è¯‘æ—¶å°±ç¡®å®šäº†è¢«ä»£ç†çš„ç±»å“ªä¸€ä¸ªæ˜¯é™æ€ä»£ç†ã€‚é™æ€ä»£ç†é€šå¸¸åªä»£ç†ä¸€ä¸ªç±»ï¼› åŠ¨æ€ä»£ç†ï¼šåœ¨ä»£ç è¿è¡ŒæœŸé—´ï¼Œè¿ç”¨åå°„æœºåˆ¶åŠ¨æ€åˆ›å»ºç”Ÿæˆã€‚åŠ¨æ€ä»£ç†ä»£ç†çš„æ˜¯ä¸€ä¸ªæŽ¥å£ä¸‹çš„å¤šä¸ªå®žçŽ°ç±»ï¼›å®žçŽ°æ­¥éª¤ï¼ša. å®žçŽ° InvocationHandler æŽ¥å£åˆ›å»ºè‡ªå·±çš„è°ƒç”¨å¤„ç†å™¨ï¼›b. ç»™ Proxy ç±»æä¾› ClassLoader å’Œä»£ç†æŽ¥å£ç±»åž‹æ•°ç»„åˆ›å»ºåŠ¨æ€ä»£ç†ç±»ï¼›c. åˆ©ç”¨åå°„æœºåˆ¶å¾—åˆ°åŠ¨æ€ä»£ç†ç±»çš„æž„é€ å‡½æ•°ï¼›d. åˆ©ç”¨åŠ¨æ€ä»£ç†ç±»çš„æž„é€ å‡½æ•°åˆ›å»ºåŠ¨æ€ä»£ç†ç±»å¯¹è±¡ï¼›ä½¿ç”¨åœºæ™¯ï¼šRetrofit ä¸­ç›´æŽ¥è°ƒç”¨æŽ¥å£çš„æ–¹æ³•ï¼› Java çš„å¼‚å¸¸ä½“ç³»Java ä¸­ Throwable æ˜¯æ‰€æœ‰å¼‚å¸¸å’Œé”™è¯¯çš„è¶…ç±»ï¼Œä¸¤ä¸ªç›´æŽ¥å­ç±»æ˜¯ Error(é”™è¯¯)å’Œ Exception(å¼‚å¸¸)ï¼š Error æ˜¯ç¨‹åºæ— æ³•å¤„ç†çš„é”™è¯¯ï¼Œç”± JVM äº§ç”Ÿå’ŒæŠ›å‡ºï¼Œå¦‚ OOMã€ThreadDeath ç­‰ã€‚è¿™äº›å¼‚å¸¸å‘ç”Ÿæ—¶ï¼ŒJVM ä¸€èˆ¬ä¼šé€‰æ‹©ç»ˆæ­¢ç¨‹åºã€‚ Exception æ˜¯ç¨‹åºæœ¬èº«å¯ä»¥å¤„ç†çš„å¼‚å¸¸ï¼Œåˆåˆ†ä¸ºè¿è¡Œæ—¶å¼‚å¸¸(RuntimeException)(ä¹Ÿå« CheckedException)å’Œéžè¿è¡Œæ—¶å¼‚å¸¸ï¼ˆä¸æ£€æŸ¥å¼‚å¸¸ Unchecked Exceptionï¼‰ã€‚è¿è¡Œæ—¶å¼‚å¸¸åˆ NullPointerExceptionã€IndexOutOfBoundsException ç­‰ï¼Œè¿™äº›å¼‚å¸¸ä¸€èˆ¬æ˜¯ç”±ç¨‹åºé€»è¾‘é”™è¯¯å¼•èµ·çš„ï¼Œåº”å°½å¯èƒ½é¿å…ã€‚éžè¿è¡Œæ—¶å¼‚å¸¸æœ‰ IOExceptionã€SQLExceptionã€FileNotFoundException ä»¥åŠç”±ç”¨æˆ·è‡ªå®šä¹‰çš„ Exception å¼‚å¸¸ç­‰ã€‚ è°ˆè°ˆä½ å¯¹è§£æžä¸Žåˆ†æ´¾çš„è®¤è¯†è§£æžæŒ‡æ–¹æ³•åœ¨è¿è¡Œå‰ï¼Œå³ç¼–è¯‘æœŸé—´å°±å¯çŸ¥çš„ï¼Œæœ‰ä¸€ä¸ªç¡®å®šçš„ç‰ˆæœ¬ï¼Œè¿è¡ŒæœŸé—´ä¹Ÿä¸ä¼šæ”¹å˜ã€‚è§£æžæ˜¯é™æ€çš„ï¼Œåœ¨ç±»åŠ è½½çš„è§£æžé˜¶æ®µå°±å¯å°†ç¬¦å·å¼•ç”¨è½¬å˜æˆç›´æŽ¥å¼•ç”¨ã€‚åˆ†æ´¾å¯åˆ†ä¸ºé™æ€åˆ†æ´¾å’ŒåŠ¨æ€åˆ†æ´¾ï¼Œé‡è½½å±žäºŽé™æ€åˆ†æ´¾ï¼Œé‡è½½å±žäºŽé™æ€åˆ†æ´¾ï¼Œè¦†ç›–å±žäºŽåŠ¨æ€åˆ†æ´¾ã€‚é™æ€åˆ†æ´¾æ˜¯æŒ‡åœ¨é‡è½½æ—¶é€šè¿‡å‚æ•°çš„é™æ€ç±»åž‹è€Œéžå®žé™…ç±»åž‹ä½œä¸ºåˆ¤æ–­ä¾æ®ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µï¼Œç¼–è¯‘å™¨å¯æ ¹æ®å‚æ•°çš„é™æ€ç±»åž‹å†³å®šä½¿ç”¨å“ªä¸€ä¸ªé‡è½½ç‰ˆæœ¬ã€‚åŠ¨æ€åˆ†æ´¾åˆ™éœ€è¦æ ¹æ®å®žé™…ç±»åž‹æ¥è°ƒç”¨ç›¸åº”çš„æ–¹æ³•ã€‚ ä¿®æ”¹å¯¹è±¡ A çš„ equals æ–¹æ³•çš„ç­¾åï¼Œé‚£ä¹ˆä½¿ç”¨ HashMap å­˜æ”¾è¿™ä¸ªå¯¹è±¡å®žä¾‹çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨å“ªä¸ª equals æ–¹æ³•ï¼Ÿä¼šè°ƒç”¨å¯¹è±¡çš„ equals æ–¹æ³•ï¼Œå¦‚æžœå¯¹è±¡çš„ equals æ–¹æ³•æ²¡æœ‰è¢«é‡å†™ï¼Œequals æ–¹æ³•å’Œ == éƒ½æ˜¯æ¯”è¾ƒæ ˆå†…å±€éƒ¨å˜é‡è¡¨ä¸­æŒ‡å‘å †å†…å­˜åœ°å€å€¼æ˜¯å¦ç›¸ç­‰ã€‚ Java ä¸­å®žçŽ°å¤šæ€çš„æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿå¤šæ€æ˜¯æŒ‡ç¨‹åºä¸­å®šä¹‰çš„å¼•ç”¨å˜é‡æ‰€æŒ‡å‘çš„å…·ä½“ç±»åž‹å’Œé€šè¿‡è¯¥å¼•ç”¨å˜é‡å‘å‡ºçš„æ–¹æ³•è°ƒç”¨åœ¨ç¼–è¯‘æ—¶ä¸ç¡®å®šï¼Œåœ¨è¿è¡ŒæœŸé—´æ‰ç¡®å®šï¼Œä¸€ä¸ªå¼•ç”¨å˜é‡åˆ°åº•ä¼šæŒ‡å‘å“ªä¸ªç±»çš„å®žä¾‹ã€‚è¿™æ ·å°±å¯ä»¥ä¸ç”¨ä¿®æ”¹æºä»£ç ï¼Œå°±å¯ä»¥è®©å¼•ç”¨å˜é‡ç»‘å®šåˆ°å„ç§ä¸åŒçš„ç±»å®žçŽ°ä¸Šã€‚Java å®žçŽ°å¤šæ€å¤šä¸‰ä¸ªå¿…è¦æ¡ä»¶ï¼šç»§æ‰¿ã€é‡å®šã€å‘ä¸Šè½¬åž‹ï¼Œåœ¨å¤šæ€ä¸­éœ€è¦å°†å­ç±»çš„å¼•ç”¨èµ‹å€¼ç»™çˆ¶ç±»å¯¹è±¡ï¼Œåªæœ‰è¿™æ ·è¯¥å¼•ç”¨æ‰èƒ½å¤Ÿå…·å¤‡è°ƒç”¨çˆ¶ç±»æ–¹æ³•å’Œå­ç±»çš„æ–¹æ³•ã€‚ å¦‚ä½•å°†ä¸€ä¸ª Java å¯¹è±¡åºåˆ—åŒ–åˆ°æ–‡ä»¶é‡Œï¼ŸObjectOutputStream.writeObject()è´Ÿè´£å°†æŒ‡å®šçš„æµå†™å…¥ï¼ŒObjectInputStream.readObject()ä»ŽæŒ‡å®š æµè¯»å–åºåˆ—åŒ–æ•°æ®ã€‚12345678910//å†™å…¥try&#123; ObjectOutputStream os = new ObjectOutputStream(new FileOutputStream os.writeObject(studentList); os.close();&#125;catch(FileNotFoundException e)&#123; e.printStackTrace();&#125;catch(IOException e)&#123; e.printStackTrace();&#125; è¯´è¯´ä½ å¯¹ Java åå°„çš„ç†è§£åœ¨è¿è¡ŒçŠ¶æ€ä¸­ï¼Œå¯¹ä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½çŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±žæ€§å’Œæ–¹æ³•ï¼Œå¯¹ä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½è°ƒç”¨å®ƒçš„ä»»æ„ä¸€ä¸ªæ–¹æ³•å’Œå±žæ€§ã€‚è¿™ç§èƒ½åŠ¨æ€èŽ·å–ä¿¡æ¯åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡æ–¹æ³•çš„åŠŸèƒ½ç§°ä¸º Java è¯­è¨€çš„åå°„æœºåˆ¶ã€‚åå°„çš„ä½œç”¨ï¼šå¼€å‘è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°æŸä¸ªç±»çš„æŸä¸ªæˆå‘˜å˜é‡ã€æ–¹æ³•æˆ–å±žæ€§æ˜¯ç§æœ‰çš„ï¼Œæˆ–åªå¯¹ç³»ç»Ÿåº”ç”¨å¼€æ”¾ï¼Œè¿™é‡Œå°±å¯ä»¥åˆ©ç”¨ Java çš„åå°„æœºåˆ¶é€šè¿‡åå°„æ¥èŽ·å–æ‰€éœ€çš„ç§æœ‰æˆå‘˜æˆ–æ˜¯æ–¹æ³•ã€‚ èŽ·å–ç±»çš„ Class å¯¹è±¡å®žä¾‹ Class clz = Class.forName(â€œcom.zhenai.api.Appleâ€); æ ¹æ® Class å¯¹è±¡å®žä¾‹èŽ·å– Constructor å¯¹è±¡ Constructor appConstructor = clz.getConstructor(); ä½¿ç”¨ Constructor å¯¹è±¡çš„ newInstance æ–¹æ³•èŽ·å–åå°„ç±»å¯¹è±¡ Object appleObj = appConstructor.newInstance(); èŽ·å–æ–¹æ³•çš„ Method å¯¹è±¡ Method setPriceMethod = clz.getMethod(â€œsetPriceâ€,int.class); åˆ©ç”¨ invoke æ–¹æ³•è°ƒç”¨æ–¹æ³• setPriceMethod.invoke(appleObj, 14); é€šè¿‡ getFields() å¯ä»¥èŽ·å– Class ç±»çš„å±žæ€§ï¼Œä½†æ— æ³•èŽ·å–ç§æœ‰å±žæ€§ï¼Œè€Œ getDeclareFields()å¯ä»¥èŽ·å–åˆ°åŒ…æ‹¬ç§æœ‰å±žæ€§åœ¨å†…çš„æ‰€æœ‰å±žæ€§ã€‚å¸¦æœ‰ Declared ä¿®é¥°çš„æ–¹æ³•å¯ä»¥åå°„åˆ°ç§æœ‰çš„æ–¹æ³•ï¼Œæ²¡æœ‰ Declared ä¿®é¥°çš„åªèƒ½ç”¨æ¥åå°„å…¬æœ‰çš„æ–¹æ³•ï¼Œå…¶ä»–å¦‚ Annotation\Field\Constructor ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ è¯´è¯´ä½ å¯¹ Java æ³¨è§£çš„ç†è§£æ³¨è§£æ˜¯é€šè¿‡@interface å…³é”®å­—æ¥è¿›è¡Œå®šä¹‰çš„ï¼Œå½¢å¼å’ŒæŽ¥å£å·®ä¸å¤šï¼Œåªæ˜¯å‰é¢å¤šäº†ä¸€ä¸ª@1public @interface TestAnnotation&#123;&#125; ä½¿ç”¨æ—¶@TestAnnotation æ¥å¼•ç”¨ï¼Œè¦ä½¿æ³¨è§£èƒ½æ­£å¸¸å·¥ä½œï¼Œè¿˜éœ€è¦ä½¿ç”¨å…ƒæ³¨è§£ï¼Œå®ƒæ˜¯å¯ä»¥æ³¨è§£åˆ°æ³¨è§£ä¸Šçš„æ³¨è§£ã€‚å…ƒæ ‡ç­¾æœ‰@Retention @Documented @Target @Inherited @Repeatable äº”ç§ @Retention è¯´æ˜Žæ³¨è§£çš„å­˜æ´»æ—¶é—´ï¼Œå–å€¼æœ‰ RetentionPolicy.SOURCE æ³¨è§£æ—¨åœ¨æºç é˜¶æ®µä¿ç•™ï¼Œåœ¨ç¼–è¯‘å™¨è¿›è¡Œç¼–è¯‘æ—¶è¢«ä¸¢å¼ƒï¼›RetentionPolicy.CLASS æ³¨è§£åªä¿ç•™åˆ°ç¼–è¯‘è¿›è¡Œçš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šè¢«åŠ è½½åˆ° JVM ä¸­ã€‚RetentionPolicy.RUNTIME å¯ä»¥ç•™åˆ°ç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œå®ƒä¼šè¢«åŠ è½½è¿›å…¥åˆ° JVM ä¸­ï¼Œæ‰€ä»¥å†ç¨‹åºè¿è¡Œæ—¶å¯ä»¥èŽ·å–åˆ°å®ƒä»¬ã€‚ @Documented æ³¨è§£ä¸­çš„å…ƒç´ åŒ…å«åˆ° javadoc ä¸­åŽ»ï¼› @Target é™å®šæ³¨è§£çš„åº”ç”¨åœºæ™¯ï¼ŒElementType.FIELD ç»™å±žæ€§è¿›è¡Œæ³¨è§£ï¼›ElemenType.LOCAL_VARIABLE å¯ä»¥ç»™å±€éƒ¨å˜é‡è¿›è¡Œæ³¨è§£ï¼›ElementType.METHOD å¯ä»¥ç»™æ–¹æ³•è¿›è¡Œæ³¨è§£ï¼›ElementType.PACKAGE å¯ä»¥ç»™ä¸€ä¸ªåŒ…è¿›è¡Œæ³¨è§£ ElementType.TYPE å¯ä»¥ç»™ä¸€ä¸ªç±»åž‹è¿›è¡Œæ³¨è§£ï¼Œå¦‚ç±»ã€æŽ¥å£ã€æžšä¸¾ï¼› @Inherited è‹¥ä¸€ä¸ªè¶…ç±»è¢«@Inherited æ³¨è§£è¿‡çš„æ³¨è§£è¿›è¡Œæ³¨è§£ï¼Œå®ƒçš„å­ç±»æ²¡æœ‰è¢«ä»»ä½•æ³¨è§£åº”ç”¨çš„è¯ï¼Œè¯¥å­ç±»å°±å¯ç»§æ‰¿è¶…ç±»çš„æ³¨è§£ï¼› æ³¨è§£çš„ä½œç”¨ï¼š æä¾›ä¿¡æ¯ç»™ç¼–è¯‘å™¨ï¼šç¼–è¯‘å™¨å¯ä»¥åˆ©ç”¨æ³¨è§£æ¥æŽ¢æµ‹é”™è¯¯å’Œè­¦å‘Šä¿¡æ¯ ç¼–è¯‘é˜¶æ®µï¼šè½¯ä»¶å·¥å…·å¯ä»¥åˆ©ç”¨æ³¨è§£ä¿¡æ¯æ¥ç”Ÿæˆä»£ç ã€html æ–‡æ¡£æˆ–åšå…¶å®ƒç›¸åº”å¤„ç†ï¼› è¿è¡Œé˜¶æ®µï¼šç¨‹åºè¿è¡Œæ—¶å¯åˆ©ç”¨æ³¨è§£æå–ä»£ç ï¼›æ³¨è§£æ˜¯é€šè¿‡åå°„èŽ·å–çš„ï¼Œå¯ä»¥é€šè¿‡ Class å¯¹è±¡çš„ isAnnotationPresent()æ–¹æ³•åˆ¤æ–­å®ƒæ˜¯å¦åº”ç”¨äº†æŸä¸ªæ³¨è§£ï¼Œåœ¨é€šè¿‡ getAnnotation()æ–¹æ³•èŽ·å– Annotation å¯¹è±¡ã€‚ è¯´ä¸€ä¸‹æ³›åž‹åŽŸç†ï¼Œå¹¶ä¸¾ä¾‹è¯´æ˜Žæ³›åž‹å°±æ˜¯å°†ç±»åž‹å˜æˆå‚æ•°ä¼ å…¥ï¼Œä½¿å¾—å¯ä»¥ä½¿ç”¨çš„ç±»åž‹å¤šæ ·åŒ–ï¼Œä»Žè€Œå®žçŽ°è§£è€¦ã€‚Javaæ³›åž‹æ˜¯åœ¨Java1.5ä»¥åŽå‡ºçŽ°çš„ï¼Œä¸ºä¿æŒå¯¹ä»¥å‰ç‰ˆæœ¬çš„å…¼å®¹ï¼Œä½¿ç”¨äº†æ“¦é™¤çš„æ–¹æ³•å®žçŽ°æ³›åž‹ã€‚æ“¦é™¤æ˜¯æŒ‡åœ¨ä¸€å®šç¨‹åº¦æ— è§†ç±»åž‹å‚æ•°Tï¼Œç›´æŽ¥ä»ŽTæ‰€åœ¨çš„ç±»å¼€å§‹å‘ä¸ŠTçš„çˆ¶ç±»åŽ»æ“¦é™¤ï¼Œå¦‚è°ƒç”¨æ³›åž‹æ–¹æ³•ï¼Œä¼ å…¥ç±»åž‹å‚æ•°Tè¿›å…¥æ–¹æ³•å†…éƒ¨ï¼Œè‹¥æ²¡åœ¨å£°æ˜Žæ—¶åšç±»ä¼¼public T methodName(T extends Father t){}ï¼ŒJavaå°±è¿›è¡Œäº†å‘ä¸Šç±»åž‹çš„æ“¦é™¤ï¼Œç›´æŽ¥æŠŠå‚æ•°tå½“åšObjectç±»æ¥å¤„ç†ï¼Œè€Œä¸æ˜¯ä¼ è¿›åŽ»çš„Tã€‚å³åœ¨æœ‰æ³›åž‹çš„ä»»ä½•ç±»å’Œæ–¹æ³•å†…éƒ¨ï¼Œå®ƒéƒ½æ— æ³•çŸ¥é“è‡ªå·±çš„æ³›åž‹å‚æ•°ï¼Œæ“¦é™¤å’Œè½¬åž‹éƒ½æ˜¯åœ¨è¾¹ç•Œä¸Šå‘ç”Ÿï¼Œå³ä¼ è¿›åŽ»çš„å‚åœ¨è¿›å…¥ç±»æˆ–æ–¹æ³•æ—¶è¢«æ“¦é™¤æŽ‰ï¼Œä½†ä¼ å‡ºæ¥çš„æ—¶å€™åˆè¢«è½¬æˆäº†æˆ‘ä»¬è®¾ç½®çš„Tã€‚åœ¨æ³›åž‹ç±»æˆ–æ–¹æ³•å†…ï¼Œä»»ä½•æ¶‰åŠåˆ°å…·ä½“ç±»åž‹ï¼ˆå³æ“¦é™¤åŽçš„ç±»åž‹çš„å­ç±»ï¼‰æ“ä½œéƒ½ä¸èƒ½è¿›è¡Œï¼Œå¦‚new T()ï¼Œæˆ–è€…T.play()ï¼ˆplayä¸ºæŸå­ç±»çš„æ–¹æ³•è€Œä¸æ˜¯æ“¦é™¤åŽçš„ç±»çš„æ–¹æ³•ï¼‰ã€‚]]></content>
      <tags>
        <tag>Interview</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®ºï¼šçº¿ç¨‹ã€å¤šçº¿ç¨‹å’Œçº¿ç¨‹æ± ]]></title>
    <url>%2F2019%2F03%2F06%2F%E8%AE%BA%EF%BC%9A%E7%BA%BF%E7%A8%8B%E3%80%81%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B%E6%B1%A0%2F</url>
    <content type="text"><![CDATA[å…³äºŽ Javaå¤šçº¿ç¨‹ï¼Œåœ¨é¢è¯•çš„æ—¶å€™ï¼Œé—®çš„æ¯”è¾ƒå¤šçš„å°±æ˜¯â‘ æ‚²è§‚é”å’Œä¹è§‚é”ã€â‘¡synchronizedå’ŒlockåŒºåˆ«ä»¥åŠvolatileå’Œsynchronizedçš„åŒºåˆ«ï¼Œâ‘¢å¯é‡å…¥é”ä¸Žéžå¯é‡å…¥é”çš„åŒº åˆ«ã€â‘£å¤šçº¿ç¨‹æ˜¯è§£å†³ä»€ä¹ˆé—®é¢˜çš„ã€â‘¤çº¿ç¨‹æ± è§£å†³ä»€ä¹ˆé—®é¢˜ã€â‘¥çº¿ç¨‹æ± çš„åŽŸç†ã€â‘¦çº¿ç¨‹æ± ä½¿ç”¨æ—¶çš„æ³¨æ„äº‹é¡¹ã€â‘§AQSåŽŸ ç†ã€â‘¨ReentranLockæºç ï¼Œè®¾è®¡åŽŸç†ï¼Œæ•´ä½“è¿‡ç¨‹ ç­‰ç­‰é—®é¢˜ã€‚ å¼€å¯çº¿ç¨‹çš„ä¸‰ç§æ–¹å¼ï¼Ÿ ç»§æ‰¿ Thread ç±»ï¼Œé‡å†™ run()æ–¹æ³•ï¼Œåœ¨ run()æ–¹æ³•ä¸­ç¼–å†™è¦å®Œæˆçš„ä»»åŠ¡ 1new Thread().start(); å®žçŽ° Runnable æŽ¥å£ï¼Œå®žçŽ° run()æ–¹æ³• 1new Thread(new MyRunnable()).start(); å®žçŽ° Callable æŽ¥å£ MyCallable ç±»ï¼Œå®žçŽ° call()æ–¹æ³•ï¼Œä½¿ç”¨ FutureTask ç±»æ¥åŒ…è£… Callable å¯¹è±¡ï¼Œä½¿ç”¨ FutureTask å¯¹è±¡ä½œä¸º Thread å¯¹è±¡çš„ target åˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹ï¼›è°ƒç”¨ FutureTask å¯¹è±¡çš„ get() æ–¹æ³•æ¥èŽ·å¾—å­çº¿ç¨‹æ‰§è¡Œç»“æŸåŽçš„è¿”å›žå€¼ã€‚ 12FutureTask&lt;Integer&gt; ft = new FutureTask&lt;Integer&gt;(new MyCallable());new Thread(ft).start(); run() å’Œ start() æ–¹æ³•çš„åŒºåˆ«run()æ–¹æ³•åªæ˜¯çº¿ç¨‹çš„ä¸»æ–¹æ³•ä½“ï¼Œå’Œæ™®é€šæ–¹æ³•ä¸€æ ·ï¼Œä¸ä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹ã€‚åªæœ‰è°ƒç”¨ start()æ–¹æ³•ï¼Œæ‰ä¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œæ–°çº¿ç¨‹æ‰ä¼šè°ƒç”¨ run()æ–¹æ³•ï¼Œçº¿ç¨‹æ‰ä¼šå¼€å§‹æ‰§è¡Œã€‚ å¦‚ä½•æŽ§åˆ¶æŸä¸ªæ–¹æ³•å…è®¸å¹¶å‘è®¿é—®çš„çº¿ç¨‹æ•°ï¼Ÿåˆ›å»º Semaphore å˜é‡ï¼Œ1Semaphore semaphore = new Semaphore(5, true); å½“æ–¹æ³•è¿›å…¥æ—¶ï¼Œè¯·æ±‚ä¸€ä¸ªä¿¡å·ï¼Œå¦‚æžœä¿¡å·è¢«ç”¨å®Œåˆ™ç­‰å¾…ï¼Œæ–¹æ³•è¿è¡Œå®Œï¼Œé‡Šæ”¾ä¸€ä¸ªä¿¡å·ï¼Œé‡Šæ”¾çš„ä¿¡å·æ–°çš„çº¿ç¨‹å°±å¯ä»¥ä½¿ç”¨ã€‚ åœ¨ Java ä¸­ wait å’Œ sleep æ–¹æ³•çš„ä¸åŒ wait()æ–¹æ³•å±žäºŽ Object ç±»ï¼Œè°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œçº¿ç¨‹ä¼šæ”¾å¼ƒå¯¹è±¡é”ï¼Œåªæœ‰è¯¥å¯¹è±¡è°ƒç”¨ notify()æ–¹æ³•åŽæœ¬çº¿ç¨‹æ‰è¿›å…¥å¯¹è±¡é”å®šæ± å‡†å¤‡èŽ·å–å¯¹è±¡é”è¿›å…¥è¿è¡ŒçŠ¶æ€ã€‚ sleep()æ–¹æ³•å±žäºŽ Thread ç±»ï¼Œsleep å¯¼è‡´ç¨‹åºæš‚åœæ‰§è¡ŒæŒ‡å®šçš„æ—¶é—´ï¼Œè®©å‡º CPUï¼Œä½†ä»–çš„ç›‘æŽ§çŠ¶æ€ä¾ç„¶ä¿å­˜ç€ï¼Œå½“æŒ‡å®šæ—¶é—´åˆ°äº†åˆä¼šå›žåˆ°è¿è¡ŒçŠ¶æ€ï¼Œsleep()æ–¹æ³•ä¸­çº¿ç¨‹ä¸ä¼šé‡Šæ”¾å¯¹è±¡é”ã€‚è°ˆè°ˆ wait()/notfiy() æ–¹æ³•çš„ç†è§£ notify()ï¼šå”¤é†’åœ¨æ­¤å¯¹è±¡ç›‘è§†å™¨ä¸Šç­‰å¾…çš„å•ä¸ªçº¿ç¨‹ notifyAll()ï¼šé€šçŸ¥æ‰€æœ‰ç­‰å¾…ç«žäº‰è¯¥èµ„æºçš„çº¿ç¨‹ wait()ï¼šé‡Šæ”¾ obj çš„é”ï¼Œå¯¼è‡´å½“å‰çš„çº¿ç¨‹ç­‰å¾…ï¼Œç›´æŽ¥å…¶ä»–çº¿ç¨‹è°ƒç”¨æ­¤å¯¹è±¡çš„ notify()æˆ– notifyAll(); å½“è¦è°ƒç”¨ wait()æˆ– notify()/notifyAll()æ–¹æ³•æ—¶ï¼Œä¸€å®šè¦å¯¹ç«žäº‰èµ„æºè¿›è¡ŒåŠ é”ï¼Œä¸€èˆ¬æ”¾åˆ° synchronized(obj)ä»£ç ä¸­ã€‚å½“è°ƒç”¨ obj.notify/notifyAll åŽï¼Œè°ƒç”¨çº¿ç¨‹ä¾æ—§æŒæœ‰ obj é”ï¼Œå› æ­¤ç­‰å¾…çº¿ç¨‹è™½è¢«å”¤é†’ï¼Œä½†ä»æ— æ³•èŽ·å¾— obj é”ï¼ŒçŸ¥é“è°ƒç”¨çº¿ç¨‹é€€å‡º synchronized å—ï¼Œé‡Šæ”¾ obj é”åŽï¼Œå…¶ä»–ç­‰å¾…çº¿ç¨‹æ‰æœ‰æœºä¼šèŽ·å¾—é”ç»§ç»­æ‰§è¡Œã€‚ä»€ä¹ˆå¯¼è‡´çº¿ç¨‹é˜»å¡žï¼Ÿ çº¿ç¨‹æ‰§è¡Œäº† Thread.sleep(int millsecond)æ–¹æ³•ï¼Œæ”¾å¼ƒ CPUï¼Œç¡çœ ä¸€æ®µæ—¶é—´ï¼Œä¸€æ®µæ—¶é—´è¿‡åŽæ¢å¤æ‰§è¡Œï¼› çº¿ç¨‹æ‰§è¡Œä¸€æ®µåŒæ­¥ä»£ç ï¼Œä½†æ— æ³•èŽ·å¾—ç›¸å…³çš„åŒæ­¥é”ï¼Œåªèƒ½è¿›å…¥é˜»å¡žçŠ¶æ€ï¼Œç­‰åˆ°èŽ·å–åŒæ­¥é”ï¼Œæ‰èƒ½æ¢å¤æ‰§è¡Œï¼› çº¿ç¨‹æ‰§è¡Œäº†ä¸€ä¸ªå¯¹è±¡çš„ wait()æ–¹æ³•ï¼Œç›´æŽ¥è¿›å…¥é˜»å¡žæ€ï¼Œç­‰å¾…å…¶ä»–çº¿ç¨‹æ‰§è¡Œ notify()/notifyAll()æ“ä½œï¼› çº¿ç¨‹æ‰§è¡ŒæŸäº› IO æ“ä½œï¼Œå› ä¸ºç­‰å¾…ç›¸å…³èµ„æºè€Œè¿›å…¥äº†é˜»å¡žæ€ï¼Œå¦‚ System.inï¼Œä½†æ²¡æœ‰æ”¶åˆ°é”®ç›˜çš„è¾“å…¥ï¼Œåˆ™è¿›å…¥é˜»å¡žæ€ã€‚ çº¿ç¨‹ç¤¼è®©ï¼ŒThread.yield()æ–¹æ³•ï¼Œæš‚åœå½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡ï¼ŒæŠŠæ‰§è¡Œæœºä¼šè®©ç»™ç›¸åŒæˆ–è€…æ›´é«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹ï¼Œä½†å¹¶ä¸ä¼šä½¿çº¿ç¨‹è¿›å…¥é˜»å¡žæ€ï¼Œçº¿ç¨‹ä»å¤„äºŽå¯æ‰§è¡Œæ€ï¼Œéšæ—¶å¯èƒ½å†æ¬¡åˆ†å¾— CPU æ—¶é—´ã€‚çº¿ç¨‹è‡ªé—­ï¼Œjoin()æ–¹æ³•ï¼Œåœ¨å½“å‰çº¿ç¨‹è°ƒç”¨å¦ä¸€ä¸ªçº¿ç¨‹çš„ join()æ–¹æ³•ï¼Œåˆ™å½“å‰çº¿ç¨‹è¿›å…¥é˜»å¡žæ€ï¼Œç›´åˆ°å¦ä¸€ä¸ªçº¿ç¨‹è¿è¡Œç»“æŸï¼Œå½“å‰çº¿ç¨‹å†ç”±é˜»å¡žè½¬ä¸ºå°±ç»ªæ€ã€‚ çº¿ç¨‹æ‰§è¡Œ suspend()ä½¿çº¿ç¨‹è¿›å…¥é˜»å¡žæ€ï¼Œå¿…é¡» resume()æ–¹æ³•è¢«è°ƒç”¨ï¼Œæ‰èƒ½ä½¿çº¿ç¨‹é‡æ–°è¿›å…¥å¯æ‰§è¡ŒçŠ¶æ€ã€‚çº¿ç¨‹å¦‚ä½•å…³é—­ï¼Ÿ ä½¿ç”¨æ ‡å¿—ä½ ä½¿ç”¨ stop() æ–¹æ³•ï¼Œä½†è¯¥æ–¹æ³•å°±åƒå…³æŽ‰ç”µè„‘ç”µæºä¸€æ ·ï¼Œå¯èƒ½ä¼šå‘ç”Ÿé¢„æ–™ä¸åˆ°çš„é—®é¢˜ ä½¿ç”¨ä¸­æ–­ interrupt()12345678public class Thread&#123; //ä¸­æ–­å½“å‰çº¿ç¨‹ public void interrupt(); //åˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­ public boolean isInterrupt(); //æ¸…é™¤å½“å‰çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ï¼Œå¹¶è¿”å›žä¹‹å‰çš„å€¼ public static boolen interrupted();&#125; ä½†è°ƒç”¨ interrupt()æ–¹æ³•åªæ˜¯ä¼ é€’ä¸­æ–­è¯·æ±‚æ¶ˆæ¯ï¼Œå¹¶ä¸ä»£è¡¨è¦ç«‹é©¬åœæ­¢ç›®æ ‡çº¿ç¨‹ è®²ä¸€ä¸‹ Java ä¸­çš„åŒæ­¥çš„æ–¹æ³•ä¹‹æ‰€ä»¥éœ€è¦åŒæ­¥ï¼Œå› ä¸ºåœ¨å¤šçº¿ç¨‹å¹¶å‘æŽ§åˆ¶ï¼Œå½“å¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œä¸€ä¸ªå¯å…±äº«çš„èµ„æºæ—¶ï¼Œå¦‚æžœæ²¡æœ‰é‡‡å–åŒæ­¥æœºåˆ¶ï¼Œå°†ä¼šå¯¼è‡´æ•°æ®ä¸å‡†ç¡®ï¼Œå› æ­¤éœ€è¦åŠ å…¥åŒæ­¥é”ï¼Œç¡®ä¿åœ¨è¯¥çº¿ç¨‹æ²¡æœ‰å®Œæˆæ“ä½œå‰è¢«å…¶ä»–çº¿ç¨‹è°ƒç”¨ï¼Œä»Žè€Œä¿è¯è¯¥å˜é‡çš„å”¯ä¸€æ€§å’Œå‡†ç¡®æ€§ã€‚ synchronized ä¿®é¥°åŒæ­¥ä»£ç å—æˆ–æ–¹æ³•ç”±äºŽ Java çš„æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå†…ç½®é”ï¼Œç”¨æ­¤å…³é”®å­—ä¿®é¥°æ–¹æ³•æ—¶ï¼Œå†…ç½®é”ä¼šä¿æŠ¤æ•´ä¸ªæ–¹æ³•ã€‚åœ¨è°ƒç”¨è¯¥æ–¹æ³•å‰ï¼Œéœ€èŽ·å¾—å†…ç½®é”ï¼Œå¦åˆ™å°±å¤„äºŽé˜»å¡žçŠ¶æ€ volatile ä¿®é¥°å˜é‡ä¿è¯å˜é‡åœ¨çº¿ç¨‹é—´çš„å¯è§æ€§æ¯æ¬¡çº¿ç¨‹è¦è®¿é—® volatile ä¿®é¥°çš„å˜é‡æ—¶éƒ½ä»Žä¸»å­˜ä¸­è¯»å–ï¼Œè€Œä¸æ˜¯ç¼“å­˜ä¸­ï¼Œè¿™æ ·æ¯ä¸ªçº¿ç¨‹è®¿é—®åˆ°çš„å˜é‡éƒ½æ˜¯ä¸€æ ·çš„ã€‚ä¸”ä½¿ç”¨å†…å­˜å±éšœã€‚ ReentrantLock é‡å…¥é”ï¼Œå®ƒå¸¸ç”¨çš„æ–¹æ³•æœ‰ ReentrantLock()ï¼šåˆ›å»ºä¸€ä¸ª ReentrantLock å®žä¾‹lock()èŽ·å¾—é” unlock()é‡Šæ”¾é” ä½¿ç”¨å±€éƒ¨å˜é‡ ThreadLocal å®žçŽ°çº¿ç¨‹åŒæ­¥æ¯ä¸ªçº¿ç¨‹éƒ½ä¼šä¿å­˜ä¸€ä»½è¯¥å˜é‡çš„å‰¯æœ¬ï¼Œå‰¯æœ¬ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œè¿™æ ·æ¯ä¸ªçº¿ç¨‹éƒ½å¯ä»¥éšæ„ä¿®æ”¹è‡ªå·±çš„å‰¯æœ¬ï¼Œè€Œä¸å½±å“å…¶ä»–çº¿ç¨‹ã€‚å¸¸ç”¨æ–¹æ³•ï¼š ThreadLocal()åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æœ¬åœ°å˜é‡ï¼› get()è¿”å›žæ­¤çº¿ç¨‹å°±ä¸æ‡‚å½“å‰çº¿ç¨‹å‰¯æœ¬å˜é‡ï¼› initialValue()è¿”å›žæ¬¡çº¿ç¨‹å±€éƒ¨å˜é‡çš„å½“å‰çº¿ç¨‹çš„å‡ºäº‹å€¼ï¼› set(T value)å°†æ­¤çº¿ç¨‹å˜é‡çš„å½“å‰çº¿ç¨‹å‰¯æœ¬ä¸­çš„å€¼è®¾ç½®ä¸º valueä½¿ç”¨åŽŸå­å˜é‡å¦‚ AtomicIntegerå¸¸ç”¨æ–¹æ³•ï¼š AtomicInteger(int value)åˆ›å»ºä¸ªæœ‰ç»™å®šåˆè¯•å€¼çš„ AtomicInteger æ•´æ•°ï¼› addAndGet(int data)ä»¥åŽŸå­æ–¹å¼å°†ç»™å®šå€¼ä¸Žå½“å‰å€¼ç›¸åŠ ä½¿ç”¨é˜»å¡žé˜Ÿåˆ—å®žçŽ°çº¿ç¨‹åŒæ­¥LinkedBlockingQueue å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Ÿçº¿ç¨‹å®‰å…¨æ€§ä½“çŽ°çš„ä¸‰æ–¹æ³•ï¼š åŽŸå­æ€§ï¼šæä¾›äº’æ–¥è®¿é—®ï¼ŒåŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹æ•°æ®è¿›è¡Œæ“ä½œã€‚JDK ä¸­æä¾›äº†å¾ˆå¤š atomic ç±»ï¼Œå¦‚ AtomicInteger\AtomicBoolean\AtomicLongï¼Œå®ƒä»¬æ˜¯é€šè¿‡ CAS å®ŒæˆåŽŸå­æ€§ã€‚JDK æä¾›é”åˆ†ä¸ºä¸¤ç§ï¼šsynchronized ä¾èµ– JVM å®žçŽ°é”ï¼Œè¯¥å…³é”®å­—å¯¹å¯¹è±¡çš„ä½œç”¨èŒƒå›´å†…åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œæ“ä½œã€‚å¦ä¸€ç§æ˜¯ LOCKï¼Œæ˜¯ JDK æä¾›çš„ä»£ç å±‚é¢çš„é”ï¼Œä¾èµ– CPU æŒ‡ä»¤ï¼Œä»£è¡¨æ€§æ˜¯ ReentrantLockã€‚ å¯è§æ€§ï¼šä¸€ä¸ªçº¿ç¨‹å¯¹ä¸»å†…å­˜çš„ä¿®æ”¹åŠæ—¶è¢«å…¶ä»–çº¿ç¨‹çœ‹åˆ°ã€‚JVM æä¾›äº† synchronized å’Œ volatileï¼Œvolatile çš„å¯è§æ€§æ˜¯é€šè¿‡å†…å­˜å±éšœå’Œç¦æ­¢é‡æŽ’åºå®žçŽ°çš„ï¼Œvolatile ä¼šåœ¨å†™æ“ä½œæ—¶ï¼Œåœ¨å†™æ“ä½œåŽåŠ ä¸€æ¡ store å±éšœæŒ‡ä»¤ï¼Œå°†æœ¬åœ°å†…å­˜ä¸­çš„å…±äº«å˜é‡åˆ·æ–°åˆ°ä¸»å†…å­˜ï¼›ä¼šåœ¨è¯»æ“ä½œæ—¶ï¼Œåœ¨è¯»æ“ä½œå‰åŠ ä¸€æ¡ load æŒ‡ä»¤ï¼Œä»Žå†…å­˜ä¸­è¯»å–å…±äº«å˜é‡ã€‚ æœ‰åºæ€§ï¼šæŒ‡ä»¤æ²¡æœ‰è¢«ç¼–è¯‘å™¨é‡æŽ’åºã€‚å¯é€šè¿‡ volatileã€synchronizedã€Lock ä¿è¯æœ‰åºæ€§ 4. static synchronized æ–¹æ³•çš„å¤šçº¿ç¨‹è®¿é—®å’Œä½œç”¨static synchronized æŽ§åˆ¶çš„æ˜¯ç±»çš„æ‰€æœ‰å®žä¾‹è®¿é—®ï¼Œä¸ç®¡ new äº†å¤šå°‘å¯¹è±¡ï¼Œåªæœ‰ä¸€ä»½ï¼Œæ‰€ä»¥å¯¹è¯¥ç±»çš„æ‰€æœ‰å¯¹è±¡éƒ½åŠ äº†é”ã€‚é™åˆ¶å¤šçº¿ç¨‹ä¸­è¯¥ç±»çš„æ‰€æœ‰å®žä¾‹åŒæ—¶è®¿é—® JVM ä¸­è¯¥ç±»å¯¹åº”çš„ä»£ç ã€‚ é¢è¯•ä¸­å…³äºŽ synchronized å…³é”®å­—çš„ 5 è¿žå‡»è¯´ä¸€è¯´è‡ªå·±å¯¹äºŽ synchronized å…³é”®å­—çš„äº†è§£synchronized å…³é”®å­—è§£å†³çš„æ˜¯å¤šä¸ªçº¿ç¨‹ä¹‹é—´è®¿é—®èµ„æºçš„åŒæ­¥æ€§ï¼Œsynchronized å…³é”®å­—å¯ä»¥ä¿è¯è¢«å®ƒä¿®é¥°çš„æ–¹æ³•æˆ–è€…ä»£ç å—åœ¨ä»»æ„æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œã€‚å¦å¤–ï¼Œåœ¨ Java æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œsynchronized å±žäºŽé‡é‡çº§é”ï¼Œæ•ˆçŽ‡ä½Žä¸‹ï¼Œå› ä¸ºç›‘è§†å™¨é”ï¼ˆmonitorï¼‰æ˜¯ä¾èµ–äºŽåº•å±‚çš„æ“ä½œç³»ç»Ÿçš„ Mutex Lock æ¥å®žçŽ°çš„ï¼ŒJava çš„çº¿ç¨‹æ˜¯æ˜ å°„åˆ°æ“ä½œç³»ç»Ÿçš„åŽŸç”Ÿçº¿ç¨‹ä¹‹ä¸Šçš„ã€‚å¦‚æžœè¦æŒ‚èµ·æˆ–è€…å”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼Œéƒ½éœ€è¦æ“ä½œç³»ç»Ÿå¸®å¿™æ¥å®Œæˆï¼Œè€Œæ“ä½œç³»ç»Ÿå®žçŽ°çº¿ç¨‹ä¹‹é—´çš„åˆ‡æ¢æ—¶éœ€è¦ä»Žç”¨æˆ·æ€è½¬æ¢åˆ°å†…æ ¸æ€ï¼Œè¿™ä¸ªçŠ¶æ€ä¹‹é—´çš„è½¬æ¢éœ€è¦ç›¸å¯¹æ¯”è¾ƒé•¿çš„æ—¶é—´ï¼Œæ—¶é—´æˆæœ¬ç›¸å¯¹è¾ƒé«˜ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæ—©æœŸçš„ synchronized æ•ˆçŽ‡ä½Žçš„åŽŸå› ã€‚åº†å¹¸çš„æ˜¯åœ¨ Java 6 ä¹‹åŽ Java å®˜æ–¹å¯¹ä»Ž JVM å±‚é¢å¯¹ synchronized è¾ƒå¤§ä¼˜åŒ–ï¼Œæ‰€ä»¥çŽ°åœ¨çš„ synchronized é”æ•ˆçŽ‡ä¹Ÿä¼˜åŒ–å¾—å¾ˆä¸é”™äº†ã€‚JDK1.6 å¯¹é”çš„å®žçŽ°å¼•å…¥äº†å¤§é‡çš„ä¼˜åŒ–ï¼Œå¦‚è‡ªæ—‹é”ã€é€‚åº”æ€§è‡ªæ—‹é”ã€é”æ¶ˆé™¤ã€é”ç²—åŒ–ã€åå‘é”ã€è½»é‡çº§é”ç­‰æŠ€æœ¯æ¥å‡å°‘é”æ“ä½œçš„å¼€é”€ã€‚ è¯´ä¸€è¯´è‡ªå·±æ˜¯æ€Žä¹ˆä½¿ç”¨ synchronized å…³é”®å­—ï¼Œåœ¨é¡¹ç›®ä¸­ç”¨åˆ°äº†å—ï¼Ÿsynchronized å…³é”®å­—æœ€ä¸»è¦çš„ä¸‰ç§ä½¿ç”¨æ–¹å¼ï¼š ä¿®é¥°å®žä¾‹æ–¹æ³•ï¼Œä½œç”¨äºŽå½“å‰å¯¹è±¡å®žä¾‹åŠ é”ï¼Œè¿›å…¥åŒæ­¥ä»£ç å‰è¦èŽ·å¾—å½“å‰å¯¹è±¡å®žä¾‹çš„é” ä¿®é¥°é™æ€æ–¹æ³•ï¼Œä½œç”¨äºŽå½“å‰ç±»å¯¹è±¡åŠ é”ï¼Œè¿›å…¥åŒæ­¥ä»£ç å‰è¦èŽ·å¾—å½“å‰ç±»å¯¹è±¡çš„é”ã€‚ä¹Ÿæ˜¯ç»™å½“å‰ç±»åŠ é”ï¼Œä¼šä½œç”¨äºŽç±»çš„æ‰€æœ‰å¯¹è±¡å®žä¾‹ï¼Œå› ä¸ºé™æ€æˆå‘˜ä¸å±žäºŽä»»ä½•ä¸€ä¸ªå®žä¾‹å¯¹è±¡ï¼Œæ˜¯ç±»æˆå‘˜ï¼ˆstatic è¡¨æ˜Žè¿™æ˜¯è¯¥ç±»çš„ä¸€ä¸ªé™æ€èµ„æºï¼Œä¸ç®¡ new äº†å¤šå°‘ä¸ªå¯¹è±¡ï¼Œåªæœ‰ä¸€ä»½ï¼Œæ‰€ä»¥å¯¹è¯¥ç±»çš„æ‰€æœ‰å¯¹è±¡éƒ½åŠ äº†é”ï¼‰ã€‚æ‰€ä»¥å¦‚æžœä¸€ä¸ªçº¿ç¨‹ A è°ƒç”¨ä¸€ä¸ªå®žä¾‹å¯¹è±¡çš„éžé™æ€ synchronized æ–¹æ³•ï¼Œè€Œ B çº¿ç¨‹éœ€è¦è°ƒç”¨è¿™ä¸ªå®žä¾‹å¯¹è±¡æ‰€å±žç±»çš„é™æ€ synchronized æ–¹æ³•ï¼Œæ˜¯å…è®¸çš„ï¼Œä¸ä¼šå‘ç”Ÿäº’æ–¥çŽ°è±¡ï¼Œå› ä¸ºè®¿é—®é™æ€ synchronized æ–¹æ³•å ç”¨çš„é”æ˜¯å½“å‰ç±»çš„é”ï¼Œè€Œè®¿é—®éžé™æ€ synchronized æ–¹æ³•å ç”¨çš„é”æ˜¯å½“å‰å®žä¾‹å¯¹è±¡é”ã€‚ ä¿®é¥°ä»£ç å—ï¼ŒæŒ‡å®šåŠ é”å¯¹è±¡ï¼Œå¯¹ç»™å®šå¯¹è±¡åŠ é”ï¼Œè¿›å…¥åŒæ­¥ä»£ç åº“å‰è¦èŽ·å¾—ç»™å®šå¯¹è±¡çš„é”ã€‚å’Œ synchronized æ–¹æ³•ä¸€æ ·ï¼Œsynchronized(this)ä»£ç å—ä¹Ÿæ˜¯é”å®šå½“å‰å¯¹è±¡çš„ã€‚synchronized å…³é”®å­—åŠ åˆ° static é™æ€æ–¹æ³•å’Œ synchronized(class)ä»£ç å—ä¸Šéƒ½æ˜¯ç»™ Class ç±»ä¸Šé”ã€‚è¿™é‡Œå†æé†’ä¸€ä¸‹ï¼šsynchronized å…³é”®å­—åŠ åˆ° static é™æ€æ–¹æ³•ä¸Šæ˜¯ç»™å¯¹è±¡å®žä¾‹ä¸Šé”ã€‚å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå°½é‡ä¸è¦ä½¿ç”¨ synchronized(String a)å› ä¸º JVM ä¸­ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± å…·æœ‰ç¼“å†²åŠŸèƒ½ã€‚ä¸‹é¢æˆ‘ä»¥ä¸€ä¸ªå¸¸è§çš„é¢è¯•é¢˜ä¸ºä¾‹è®²è§£ä¸€ä¸‹ synchronized å…³é”®å­—çš„å…·ä½“ä½¿ç”¨ã€‚é¢è¯•ä¸­é¢è¯•å®˜ç»å¸¸ä¼šè¯´ï¼šâ€œå•ä¾‹æ¨¡å¼äº†è§£å—ï¼Ÿæ¥ç»™æˆ‘æ‰‹å†™ä¸€ä¸‹ï¼ç»™æˆ‘è§£é‡Šä¸€ä¸‹åŒé‡æ£€éªŒé”æ–¹å¼å®žçŽ°å•ä¾‹æ¨¡å¼çš„åŽŸç†å‘—ï¼â€åŒé‡æ ¡éªŒé”å®žçŽ°å¯¹è±¡å•ä¾‹(çº¿ç¨‹å®‰å…¨)12345678910111213141516public class Singleton&#123; private volatile static Singleton uniqueInstance; private Singleton()&#123;&#125; public static Singleton getUniqueInstance()&#123; //å…ˆåˆ¤æ–­å¯¹è±¡æ˜¯å¦å·²ç»å®žä¾‹è¿‡ï¼Œæ²¡æœ‰å®žä¾‹åŒ–è¿‡æ‰è¿›å…¥åŠ é”ä»£ç  if(uniqueInstance == null)&#123; //ç±»å¯¹è±¡åŠ é” synchronized(Singleton.class)&#123; if(uniqueInstance == null)&#123; uniqueInstance = new Singleton(); &#125; &#125; &#125; return uniqueInstance; &#125;&#125; å¦å¤–ï¼Œéœ€è¦æ³¨æ„ uniqueInstance é‡‡ç”¨ volatile å…³é”®å­—ä¿®é¥°ä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦ã€‚uniqueInstance é‡‡ç”¨ volatile å…³é”®å­—ä¿®é¥°ä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œ uniqueInstance = new Singleton(); è¿™æ®µä»£ç å…¶å®žæ˜¯åˆ† ä¸ºä¸‰æ­¥æ‰§è¡Œï¼š ä¸º uniqueInstance åˆ†é…å†…å­˜ç©ºé—´ åˆå§‹åŒ– uniqueInstance å°† uniqueInstance æŒ‡å‘åˆ†é…çš„å†…å­˜åœ°å€ ä½†æ˜¯ç”±äºŽ JVM å…·æœ‰æŒ‡ä»¤é‡æŽ’çš„ç‰¹æ€§ï¼Œæ‰§è¡Œé¡ºåºæœ‰å¯èƒ½å˜æˆ 1-&gt;3-&gt;2ã€‚æŒ‡ä»¤é‡æŽ’åœ¨å•çº¿ç¨‹çŽ¯å¢ƒä¸‹ä¸ä¼šå‡ºçŽ°é—®é¢˜ï¼Œä½†æ˜¯åœ¨å¤šçº¿ç¨‹çŽ¯å¢ƒä¸‹ä¼šå¯¼è‡´ä¸€ä¸ªçº¿ç¨‹èŽ·å¾—è¿˜æ²¡æœ‰åˆå§‹åŒ–çš„å®žä¾‹ã€‚ä¾‹å¦‚ï¼Œçº¿ç¨‹ T1 æ‰§è¡Œäº† 1 å’Œ 3ï¼Œæ­¤æ—¶ T2 è°ƒç”¨ getUniqueInstance() åŽå‘çŽ° uniqueInstance ä¸ä¸ºç©ºï¼Œå› æ­¤è¿”å›žuniqueInstanceï¼Œä½†æ­¤æ—¶ uniqueInstance è¿˜æœªè¢« åˆå§‹åŒ–ã€‚ä½¿ç”¨ volatile å¯ä»¥ç¦æ­¢ JVM çš„æŒ‡ä»¤é‡æŽ’ï¼Œä¿è¯åœ¨å¤šçº¿ç¨‹çŽ¯å¢ƒä¸‹ä¹Ÿèƒ½æ­£å¸¸è¿è¡Œã€‚ è®²ä¸€ä¸‹ synchronized å…³é”®å­—çš„åº•å±‚åŽŸç†synchronized å…³é”®å­—åº•å±‚åŽŸç†å±žäºŽ JVM å±‚é¢ã€‚ synchronized åŒæ­¥è¯­å¥å—çš„æƒ…å†µ 1234567public class SynchronizedDemo&#123; public void methodï¼ˆï¼‰&#123; synchronizedï¼ˆthisï¼‰&#123; System.out.println("synchronized ä»£ç å—"); &#125; &#125;&#125; é€šè¿‡ JDK è‡ªå¸¦çš„ javap å‘½ä»¤æŸ¥çœ‹ SynchronizedDemo ç±»çš„ç›¸å…³å­—èŠ‚ç ä¿¡æ¯ï¼šé¦–å…ˆåˆ‡æ¢åˆ°ç±»çš„å¯¹åº”ç›®å½•æ‰§è¡Œ javac SynchronizedDemo.java å‘½ä»¤ç”Ÿæˆç¼–è¯‘åŽçš„.class æ–‡ä»¶ï¼Œç„¶åŽæ‰§è¡Œ javap -c -s -v -l SynchronizedDemo.classã€‚synchronized åŒæ­¥è¯­å¥å—çš„å®žçŽ°ä½¿ç”¨çš„æ˜¯ monitorenter å’Œ monitorexit æŒ‡ä»¤ï¼Œå…¶ä¸­ monitorenter æŒ‡ä»¤æŒ‡å‘åŒæ­¥ä»£ç å—çš„å¼€å§‹ä½ç½®ï¼Œmonitorexit æŒ‡ä»¤åˆ™æŒ‡æ˜ŽåŒæ­¥ä»£ç å—çš„ç»“æŸä½ç½®ã€‚å½“æ‰§è¡Œ monitorenter æŒ‡ä»¤æ—¶ï¼Œçº¿ç¨‹è¯†å›¾èŽ·å–é”ä¹Ÿæ˜¯èŽ·å– monitor(monitor å¯¹è±¡å­˜åœ¨äºŽæ¯ä¸ª Java å¯¹è±¡çš„å¯¹è±¡å¤´ä¸­ï¼Œsynchronized é”ä¾¿æ˜¯é€šè¿‡è¿™ç§æ–¹å¼èŽ·å–é”çš„ï¼Œä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ Java ä¸­ä»»æ„å¯¹è±¡å¯ä»¥ä½œä¸ºé”çš„åŽŸå› )çš„æŒæœ‰æƒã€‚å½“è®¡æ•°å™¨ä¸º 0 åˆ™å¯ä»¥æˆåŠŸèŽ·å–ï¼ŒèŽ·å–åŽå°†é”è®¡æ•°å™¨è®¾ä¸º 1 ä¹Ÿå°±æ˜¯åŠ  1.ç›¸åº”çš„åœ¨æ‰§è¡Œ monitorexit æŒ‡ä»¤åŽï¼Œå°†é”è®¡æ•°å™¨è®¾ä¸º 0ï¼Œè¡¨æ˜Žé”è¢«é‡Šæ”¾ã€‚å¦‚æžœèŽ·å–å¯¹è±¡é”å¤±è´¥ï¼Œé‚£å½“å‰çº¿ç¨‹å°±è¦é˜»å¡žç­‰å¾…ï¼Œç›´åˆ°é”è¢«å¦å¤–ä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾ä¸ºæ­¢ã€‚ synchronized ä¿®é¥°æ–¹æ³•çš„æƒ…å†µ 12345public class SynchronizedDemo2&#123; public synchronized void method()&#123; System.out.println("synchronized æ–¹æ³•"); &#125;&#125; synchronized ä¿®é¥°çš„æ–¹æ³•å¹¶æ²¡æœ‰ monitorenter æŒ‡ä»¤å’Œ monitorexit æŒ‡ä»¤ï¼Œå–å¾—ä»£ä¹‹çš„å´æ˜¯ ACC_SYNCHRONIZED æ ‡è¯†ï¼Œè¯¥æ ‡è¯†æŒ‡æ˜Žäº†è¯¥æ–¹æ³•æ˜¯ä¸€ä¸ªåŒæ­¥æ–¹æ³•ï¼ŒJVM é€šè¿‡è¯¥ ACC_SYNCHRONIZED è®¿é—®æ ‡å¿—æ¥ è¾¨åˆ«ä¸€ä¸ªæ–¹æ³•æ˜¯å¦å£°æ˜Žä¸ºåŒæ­¥æ–¹æ³•ï¼Œä»Žè€Œæ‰§è¡Œç›¸åº”çš„åŒæ­¥è°ƒç”¨ã€‚ è¯´ä¸€è¯´ JDK1.6 ä¹‹åŽçš„ synchronized å…³é”®å­—åº•å±‚åšäº†å“ªäº›ä¼˜åŒ–ï¼Œå¯ä»¥è¯¦ç»†ä»‹ç»ä¸€ä¸‹è¿™äº›ä¼˜åŒ–å—ï¼ŸJDK1.6 å¯¹é”çš„å®žçŽ°å¼•å…¥äº†å¤§é‡çš„ä¼˜åŒ–ï¼Œå¦‚åå‘é”ã€è½»é‡çº§é”ã€è‡ªæ—‹é”ã€é€‚åº”æ€§è‡ªæ—‹é”ã€é”æ¶ˆé™¤ã€é”ç²—åŒ–ç­‰æŠ€æœ¯æ¥å‡ å°‘é”æ“ä½œçš„å¼€é”€ã€‚é”ä¸»è¦å­˜åœ¨å››ç§çŠ¶æ€ï¼Œä¾æ¬¡æ˜¯ï¼šæ— é”çŠ¶æ€ã€åå‘é”çŠ¶æ€ã€è½»é‡çº§é”çŠ¶æ€ã€é‡é‡çº§é”çŠ¶æ€ï¼Œä»–ä»¬ä¼šéšç€ç«žäº‰çš„æ¿€çƒˆè€Œé€ æ¸å‡çº§ã€‚æ³¨æ„é”å¯ä»¥å‡çº§ä¸å¯é™çº§ï¼Œè¿™ç§ç­–ç•¥æ˜¯ä¸ºäº†æé«˜èŽ·å¾—é”å’Œé‡Šæ”¾é”çš„æ•ˆçŽ‡ã€‚å…³äºŽè¿™å‡ ç§ä¼˜åŒ–çš„è¯¦ç»†ä¿¡æ¯å¯ä»¥æŸ¥çœ‹ï¼šsynchronized å…³é”®å­—ä½¿ç”¨ã€åº•å±‚åŽŸç†ã€JDK1.6 ä¹‹åŽçš„åº•å±‚ä¼˜åŒ–ä»¥åŠ å’Œ ReenTrantLock çš„å¯¹æ¯” è°ˆè°ˆ synchronized å’Œ ReenTrantLock çš„åŒºåˆ«â‘  ä¸¤è€…éƒ½æ˜¯å¯é‡å…¥é” ä¸¤è€…éƒ½æ˜¯å¯é‡å…¥é”ã€‚â€œå¯é‡å…¥é”â€æ¦‚å¿µæ˜¯ï¼šè‡ªå·±å¯ä»¥å†æ¬¡èŽ·å–è‡ªå·±çš„å†…éƒ¨é”ã€‚æ¯”å¦‚ä¸€ä¸ªçº¿ç¨‹èŽ·å¾—äº†æŸä¸ªå¯¹è±¡çš„é”ï¼Œæ­¤æ—¶ è¿™ä¸ªå¯¹è±¡é”è¿˜æ²¡æœ‰é‡Šæ”¾ï¼Œå½“å…¶å†æ¬¡æƒ³è¦èŽ·å–è¿™ä¸ªå¯¹è±¡çš„é”çš„æ—¶å€™è¿˜æ˜¯å¯ä»¥èŽ·å–çš„ï¼Œå¦‚æžœä¸å¯é”é‡å…¥çš„è¯ï¼Œå°±ä¼šé€ æˆæ­» é”ã€‚åŒä¸€ä¸ªçº¿ç¨‹æ¯æ¬¡èŽ·å–é”ï¼Œé”çš„è®¡æ•°å™¨éƒ½è‡ªå¢ž1ï¼Œæ‰€ä»¥è¦ç­‰åˆ°é”çš„è®¡æ•°å™¨ä¸‹é™ä¸º0æ—¶æ‰èƒ½é‡Šæ”¾é”ã€‚â‘¡ synchronized ä¾èµ–äºŽ JVM è€Œ ReenTrantLock ä¾èµ–äºŽ APIsynchronized æ˜¯ä¾èµ–äºŽ JVM å®žçŽ°çš„ï¼Œå‰é¢æˆ‘ä»¬ä¹Ÿè®²åˆ°äº† è™šæ‹Ÿæœºå›¢é˜Ÿåœ¨ JDK1.6 ä¸º synchronized å…³é”®å­—è¿›è¡Œäº†å¾ˆå¤š ä¼˜åŒ–ï¼Œä½†æ˜¯è¿™äº›ä¼˜åŒ–éƒ½æ˜¯åœ¨è™šæ‹Ÿæœºå±‚é¢å®žçŽ°çš„ï¼Œå¹¶æ²¡æœ‰ç›´æŽ¥æš´éœ²ç»™æˆ‘ä»¬ã€‚ReenTrantLock æ˜¯ JDK å±‚é¢å®žçŽ°çš„ï¼ˆä¹Ÿå°± æ˜¯ API å±‚é¢ï¼Œéœ€è¦ lock() å’Œ unlock æ–¹æ³•é…åˆ try/finally è¯­å¥å—æ¥å®Œæˆï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥çœ‹å®ƒçš„æºä»£ç ï¼Œæ¥çœ‹ å®ƒæ˜¯å¦‚ä½•å®žçŽ°çš„ã€‚â‘¢ ReenTrantLock æ¯” synchronized å¢žåŠ äº†ä¸€äº›é«˜çº§åŠŸèƒ½ ç›¸æ¯”synchronizedï¼ŒReenTrantLockå¢žåŠ äº†ä¸€äº›é«˜çº§åŠŸèƒ½ã€‚ä¸»è¦æ¥è¯´ä¸»è¦æœ‰ä¸‰ç‚¹ï¼šâ‘ ç­‰å¾…å¯ä¸­æ–­ï¼›â‘¡å¯å®žçŽ°å…¬å¹³é”ï¼› â‘¢å¯å®žçŽ°é€‰æ‹©æ€§é€šçŸ¥ï¼ˆé”å¯ä»¥ç»‘å®šå¤šä¸ªæ¡ä»¶ï¼‰ ReenTrantLockæä¾›äº†ä¸€ç§èƒ½å¤Ÿä¸­æ–­ç­‰å¾…é”çš„çº¿ç¨‹çš„æœºåˆ¶ï¼Œé€šè¿‡lock.lockInterruptibly()æ¥å®žçŽ°è¿™ä¸ªæœºåˆ¶ã€‚ä¹Ÿ å°±æ˜¯è¯´æ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹å¯ä»¥é€‰æ‹©æ”¾å¼ƒç­‰å¾…ï¼Œæ”¹ä¸ºå¤„ç†å…¶ä»–äº‹æƒ…ã€‚ ReenTrantLockå¯ä»¥æŒ‡å®šæ˜¯å…¬å¹³é”è¿˜æ˜¯éžå…¬å¹³é”ã€‚è€Œsynchronizedåªèƒ½æ˜¯éžå…¬å¹³é”ã€‚æ‰€è°“çš„å…¬å¹³é”å°±æ˜¯å…ˆç­‰ å¾…çš„çº¿ç¨‹å…ˆèŽ·å¾—é”ã€‚ ReenTrantLocké»˜è®¤æƒ…å†µæ˜¯éžå…¬å¹³çš„ï¼Œå¯ä»¥é€šè¿‡ReenTrantLockç±»çš„ ReentrantLock(boolean fair) æž„é€ æ–¹æ³•æ¥åˆ¶å®šæ˜¯å¦æ˜¯å…¬å¹³çš„ã€‚ synchronizedå…³é”®å­—ä¸Žwait()å’Œnotify/notifyAll()æ–¹æ³•ç›¸ç»“åˆå¯ä»¥å®žçŽ°ç­‰å¾…/é€šçŸ¥æœºåˆ¶ï¼ŒReentrantLockç±»å½“ç„¶ä¹Ÿ å¯ä»¥å®žçŽ°ï¼Œä½†æ˜¯éœ€è¦å€ŸåŠ©äºŽConditionæŽ¥å£ä¸ŽnewCondition() æ–¹æ³•ã€‚Conditionæ˜¯JDK1.5ä¹‹åŽæ‰æœ‰çš„ï¼Œå®ƒå…·æœ‰å¾ˆ å¥½çš„çµæ´»æ€§ï¼Œæ¯”å¦‚å¯ä»¥å®žçŽ°å¤šè·¯é€šçŸ¥åŠŸèƒ½ä¹Ÿå°±æ˜¯åœ¨ä¸€ä¸ªLockå¯¹è±¡ä¸­å¯ä»¥åˆ›å»ºå¤šä¸ªConditionå®žä¾‹ï¼ˆå³å¯¹è±¡ç›‘è§† å™¨ï¼‰ï¼Œçº¿ç¨‹å¯¹è±¡å¯ä»¥æ³¨å†Œåœ¨æŒ‡å®šçš„Conditionä¸­ï¼Œä»Žè€Œå¯ä»¥æœ‰é€‰æ‹©æ€§çš„è¿›è¡Œçº¿ç¨‹é€šçŸ¥ï¼Œåœ¨è°ƒåº¦çº¿ç¨‹ä¸Šæ›´åŠ çµ æ´»ã€‚ åœ¨ä½¿ç”¨notify/notifyAll()æ–¹æ³•è¿›è¡Œé€šçŸ¥æ—¶ï¼Œè¢«é€šçŸ¥çš„çº¿ç¨‹æ˜¯ç”± JVM é€‰æ‹©çš„ï¼Œç”¨ReentrantLockç±»ç»“åˆ Conditionå®žä¾‹å¯ä»¥å®žçŽ°â€œé€‰æ‹©æ€§é€šçŸ¥â€ ï¼Œè¿™ä¸ªåŠŸèƒ½éžå¸¸é‡è¦ï¼Œè€Œä¸”æ˜¯ConditionæŽ¥å£é»˜è®¤æä¾›çš„ã€‚è€Œ synchronizedå…³é”®å­—å°±ç›¸å½“äºŽæ•´ä¸ªLockå¯¹è±¡ä¸­åªæœ‰ä¸€ä¸ªConditionå®žä¾‹ï¼Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½æ³¨å†Œåœ¨å®ƒä¸€ä¸ªèº«ä¸Šã€‚å¦‚æžœ æ‰§è¡ŒnotifyAll()æ–¹æ³•çš„è¯å°±ä¼šé€šçŸ¥æ‰€æœ‰å¤„äºŽç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹è¿™æ ·ä¼šé€ æˆå¾ˆå¤§çš„æ•ˆçŽ‡é—®é¢˜ï¼Œè€ŒConditionå®žä¾‹çš„ signalAll()æ–¹æ³• åªä¼šå”¤é†’æ³¨å†Œåœ¨è¯¥Conditionå®žä¾‹ä¸­çš„æ‰€æœ‰ç­‰å¾…çº¿ç¨‹ã€‚å¦‚æžœä½ æƒ³ä½¿ç”¨ä¸Šè¿°åŠŸèƒ½ï¼Œé‚£ä¹ˆé€‰æ‹©ReenTrantLockæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ æ€§èƒ½å·²ä¸æ˜¯é€‰æ‹©æ ‡å‡†é¢è¯•ä¸­å…³äºŽçº¿ç¨‹æ± çš„ 2 è¿žå‡»è®²ä¸€ä¸‹ Java å†…å­˜æ¨¡åž‹ è¯´è¯´ synchronized å…³é”®å­—å’Œ volatile å…³é”®å­—çš„åŒºåˆ«é¢è¯•ä¸­å…³äºŽçº¿ç¨‹æ± çš„ 2 è¿žå‡»ä¸ºä»€ä¹ˆè¦ç”¨çº¿ç¨‹æ± å®žçŽ° Runnable æŽ¥å£å’Œ Callable æŽ¥å£çš„åŒºåˆ«æ‰§è¡Œ execute()æ–¹æ³•å’Œ submit()æ–¹æ³•çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•åˆ›å»ºçº¿ç¨‹æ± ]]></content>
      <tags>
        <tag>Interview</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidç«¯å„ç±»å›¾ç‰‡åŠ è½½æ¡†æž¶å¯¹æ¯”]]></title>
    <url>%2F2019%2F03%2F04%2FAndroid%E7%AB%AF%E5%90%84%E7%B1%BB%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E6%A1%86%E6%9E%B6%E5%AF%B9%E6%AF%94%2F</url>
    <content type="text"><![CDATA[å‰æ®µæ—¶é—´çš„é¢è¯•è¿‡ç¨‹ä¸­è¢«é—®åˆ°ç”¨è¿‡ä»€ä¹ˆå›¾ç‰‡åŠ è½½æ¡†æž¶ï¼Œæˆ‘éšå£è€Œå‡ºGlideï¼Œé¢è¯•å®˜ç»§ç»­è¿½é—®ä¸‹åŽ»æ˜¯åšè¿‡ä»€ä¹ˆæ¯”è¾ƒå¾—å‡ºGlideæ¯”è¾ƒé«˜æ•ˆå—ï¼Ÿæˆ‘å°±é˜»å¡žäº†â€¦æ‰€ä»¥åœ¨æ­¤åšä¸€æ¬¡å¤ç›˜ï¼Œé’ˆå¯¹Androidç«¯çš„å„ç§åŠ è½½æ¡†æž¶è¿›è¡Œå¯¹æ¯” å‰è¨€ å›¾ç‰‡åŠ è½½æ˜¯Androidå¼€å‘ä¸­æœ€æœ€åŸºç¡€çš„åŠŸèƒ½ï¼ŒåŒæ—¶å›¾ç‰‡åŠ è½½OOMä¹Ÿä¸€ç›´å›°æ‰°ç€å¾ˆå¤šå¼€å‘è€…ï¼Œå› æ­¤ä¸ºäº†é™ä½Žå¼€å‘å‘¨æœŸå’Œéš¾åº¦ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé€‰ç”¨ä¸€äº›å›¾ç‰‡åŠ è½½çš„å¼€æºåº“ã€‚ è€ç‰Œçš„æœ‰ImageLoaderï¼ŒUIL, Volleyï¼Œä¸»æµçš„æœ‰ï¼ŒPicassoï¼ŒGlideï¼ŒFrescoç­‰ç­‰ï¼Œé€‰æ‹©ä¸€æ¬¾å¥½çš„å›¾ç‰‡åŠ è½½è£¤å°±æˆäº†æˆ‘ä»¬çš„é¦–è¦é—®é¢˜ã€‚ æŽ¥ä¸‹æ¥æˆ‘ä»¬å¯¹æ¯”ä¸€ä¸‹ä¸»æµçš„ä¸‰æ¬¾ Picassoï¼ŒGlideï¼ŒFrescoæ¡†æž¶çš„ä¼˜ç¼ºç‚¹ã€‚ Picassoï¼ŒGlideï¼ŒFrescoçš„å‰ä¸–ä»Šç”ŸåŸºæœ¬é¡¹å¯¹æ¯” å¯¹æ¯”é¡¹ Picasso Glide Fresco åœ°å€ github.com/square/picaâ€¦ github.com/bumptech/glâ€¦ github.com/facebook/frâ€¦ å‘å¸ƒæ—¶é—´ 2013å¹´5æœˆ 2014å¹´9æœˆ 2015å¹´5æœˆ æ˜¯å¦æ”¯æŒgif false true true æ˜¯å¦æ”¯æŒwebP true true true è§†é¢‘ç¼©ç•¥å›¾ false true true å¤§å° 100k 500 KB 2ï½ž3M åŠ è½½é€Ÿåº¦ ä¸­ é«˜ é«˜ Disk+Men Cache true true true Easy of use low mediun difficult star 13160 14709 12444 å¼€å‘è€… Squareä¸»å¯¼ Googleä¸»å¯¼ Facebookä¸»å¯¼ åŠ è½½å›¾ç‰‡è€—æ—¶åŠå†…å­˜å¯¹æ¯”without animations å¯¹æ¯”é¡¹ Picasso Glide Fresco java heapï¼native heap/å¹³å‡è€—æ—¶ï¼ˆwithout animationsï¼‰ PicassoåŠ è½½æ— åŠ¨ç”»å›¾ç‰‡](https://user-gold-cdn.xitu.io/2018/5/14/1635f4318d2b55e8?imageslim) | ![GlideåŠ è½½æ— åŠ¨ç”»å›¾ç‰‡](https://user-gold-cdn.xitu.io/2018/5/14/1635f4318d1496bb?imageslim) | ![FrescoåŠ è½½æ— åŠ¨ç”»å›¾ç‰‡ max java heap 12.6MB 11.1MB 13.9MB max native heap 43.8MB 43.8MB 43.8MB avg wait time 241ms 34ms 44ms ä»Žä¸Šé¢çš„åŠ è½½é™æ€å›¾ç‰‡å¯ä»¥çœ‹å‡ºä¸‰å¤§ä¸»æµæ¡†æž¶æ€§èƒ½éƒ½ä¸é”™ï¼Œä¸è¿‡ç”¨æ•°æ®è¯´è¯æ•´ä½“è€Œè¨€Glideæ›´èƒœä¸€ç­¹ã€‚ allow animations å¯¹æ¯”é¡¹ Picasso Glide Fresco java heapï¼native heap/å¹³å‡è€—æ—¶ï¼ˆallow animationsï¼‰ PicassoåŠ è½½åŠ¨ç”»å›¾ç‰‡](https://user-gold-cdn.xitu.io/2018/5/14/1635f4318d57eddb?imageslim) | ![GlideåŠ è½½æ— åŠ¨ç”»å›¾ç‰‡](https://user-gold-cdn.xitu.io/2018/5/14/1635f431b031be09?imageslim) | ![FrescoåŠ è½½åŠ¨ç”»å›¾ç‰‡ max java heap 6.8MB 74.8.1MB 36.1MB max native heap 18.2MB 66.8MB 545.3MB avg wait time 1707ms 33910ms 15142ms ä¸Šé¢çš„æ•°æ®æˆ‘ä»¬å¯ä»¥å¿½ç•¥Picassoäº†ï¼Œå› ä¸ºå®ƒæ ¹æœ¬ä¸æ”¯æŒgifï¼Œé‚£ä¹ˆGlideå’ŒFrescoå¯ä»¥çœ‹å‡ºFrescoçš„java heapåŸºæœ¬ä¿æŒè¾ƒä½Žå¹³ç¨³çŠ¶æ€ï¼Œè€ŒGlideçš„java heapåŸºæœ¬ä¸ºFrescoçš„ä¸€å€ï¼Œæ‰€ä»¥OOMçš„é£Žé™©ä¹Ÿæ¯”frescoå¤§ä¸€å€ã€‚ä»Žæ—¶é—´ä¸Šglideæ˜¯æœ‰ä¸€å®šå·®è·ï¼Œä¸è¿‡frescoæœ‰ä¸¤å¼ å›¾ç‰‡æ²¡åŠ è½½å®Œæˆï¼Œæ‰€ä»¥æ—¶é—´ä¸æ˜¯å®Œå…¨å¯é çš„æ•°æ®ä»Žnative heapå¯ä»¥çœ‹å‡ºFrescoæœ€é«˜545MBï¼Œè¿™ä¸ªæœ‰ç‚¹ææ€–ï¼Œä¸‹é¢æˆ‘ä»¬çœ‹ä¸ªçŸ¥è¯†ç‚¹ã€‚ çŸ¥è¯†ç‚¹ Java Heapæ˜¯å¯¹äºŽJava è™šæ‹Ÿæœºè€Œè¯´çš„ï¼Œä¸€èˆ¬çš„å¤§å°ä¸Šé™æ˜¯ 16M 24M 48M 76M å…·ä½“è§†æ‰‹æœºè€Œå®šã€‚ Native Heapæ˜¯å¯¹äºŽC/C++ç›´æŽ¥æ“çºµçš„ç³»ç»Ÿå †å†…å­˜ï¼Œæ‰€ä»¥å®ƒçš„ä¸Šé™ä¸€èˆ¬æ˜¯å…·ä½“RAMçš„2/3å·¦å³ã€‚ æ‰€ä»¥å¯¹äºŽ2Gçš„æ‰‹æœºè€Œè¨€ï¼ŒJava Heap å¤§æ¦‚76Mï¼Œè€ŒNative Heapæ˜¯760Må·¦å³ï¼Œç›¸å·®10å€ã€‚ æ‰€ä»¥Frescoä¹Ÿæ˜¯å­˜åœ¨ä¸€å®šé£Žé™©çš„ï¼Œå› ä¸ºnative heapæ•°æ®å®žåœ¨æ˜¯å¤ªææ€–äº†ã€‚ è¯¦ç»†å±žæ€§å¯¹æ¯”æŽ¥ä¸‹æ¥åªè¯¦ç»†å¯¹æ¯”Frescoå’ŒGlidePicassoä»Žå„æ–¹é¢éƒ½æ¯”è¿™ä¸¤ä¸ªå¼±ï¼Œè¿™é‡Œå°±ä¸æµªè´¹æ—¶é—´äº†ã€‚ å¯¹æ¯”é¡¹ Glide Fresco é…ç½® compile &#39;com.github.bumptech.glide:glide:XXX.XXX&#39; compile &#39;com.facebook.fresco:fresco:XXX.XXX åˆå§‹åŒ– ç›´æŽ¥ä½¿ç”¨ Fresco.initialize(this); layout æ™®é€šImageView ç‹¬æœ‰çš„SimpleDraweeView åœ†è§’ï¼Œ åœ†å½¢ éœ€è¦è‡ªå·±å®žçŽ°åœ†è§’ï¼Œç»§æ‰¿è‡ªBitmapTransformationæ“ä½œbitmapå¯¹è±¡å®žçŽ° é€šè¿‡RoundingParamsè®¾ç½®å‚æ•° ç¼“å­˜ Glideå†…å­˜å’Œç£ç›˜ç¼“å­˜ ä¸‰çº§ç¼“å­˜ï¼Œåˆ†åˆ«æ˜¯ Bitmapç¼“å­˜ï¼Œæœªè§£ç å›¾ç‰‡ç¼“å­˜ï¼Œ æ–‡ä»¶ç¼“å­˜ã€‚ ç¼“å­˜å›¾åƒå¤§å° Glideåˆ™ä¼šæ ¹æ®ImageViewæŽ§ä»¶å°ºå¯¸èŽ·å¾—å¯¹åº”çš„å¤§å°çš„bitmapæ¥å±•ç¤ºï¼Œä»Žè€Œç¼“å­˜ä¹Ÿå¯ä»¥é’ˆå¯¹ä¸åŒçš„å¯¹è±¡ï¼šåŽŸå§‹å›¾åƒï¼ˆsourceï¼‰ï¼Œç»“æžœå›¾åƒ(result) ç¼“å­˜åŽŸå§‹å›¾åƒ åŠ è½½ç­–ç•¥ Glideåªæœ‰å ä½å›¾ å…ˆåŠ è½½å°å°ºå¯¸å›¾ç‰‡ï¼Œå†åŠ è½½å¤§å°ºå¯¸çš„ åŠ è½½è¿›åº¦ false true ä»Žä¸Šé¢çš„å¯¹æ¯”ä¸­å¯ä»¥çœ‹å‡ºæ¥Frescoè›®å¼ºå¤§çš„ï¼Œä¸è¿‡ä½¿ç”¨èµ·æ¥ç›¸å¯¹Glideè¦å¤æ‚ä¸€ç‚¹ï¼Œè€Œä¸”éœ€è¦è‡ªå·±çš„SimpleDraweeViewï¼Œè¿™ä¸€ç‚¹åœ¨åˆ‡æ¢æ¡†æž¶çš„æ—¶å€™æœ€è®©äººå¤´ç–¼äº†ã€‚è€Œä¸”Glideç›´æŽ¥ç¼“å­˜ç›¸å¯¹å¤§å°çš„å›¾ç‰‡ï¼ŒèŠ‚çœç©ºé—´çš„åŒæ—¶ä¸‹åœºå¦‚æžœæ˜¯åŒæ ·å¤§å°çš„å›¾ç‰‡å°±ä¸è¦å†æ¬¡è¯·æ±‚ï¼Œç›´æŽ¥å¯ä»¥ä½¿ç”¨ã€‚ ä¾èµ–Glide123456789repositories &#123; mavenCentral() google()&#125;dependencies &#123; implementation 'com.github.bumptech.glide:glide:4.9.0' annotationProcessor 'com.github.bumptech.glide:compiler:4.9.0'&#125; Frescoè¦ä½¿ç”¨å®Œæ•´çš„FrescoåŠŸèƒ½å°±è¦å¯¼å…¥å¦‚ä¸‹çš„ä¾èµ–123dependencies &#123; implementation 'com.facebook.fresco:fresco:1.12.1'&#125; bitmapæ“ä½œGlide 1234Bitmap myBitmap = Glide.with(ä¸Šä¸‹æ–‡) .load(url) .asBitmap() //å¿…é¡» .get() FrescoFrescoè¦èŽ·å–bitmapæ›´åŠ å¤æ‚ï¼Œ è€Œä¸”ä½¿ç”¨èµ·æ¥ä¹Ÿå¹¶ä¸æ˜¯é‚£ä¹ˆé¡ºç•…ã€‚é¦–å…ˆï¼ŒFrescoä¸ºäº†æ›´å¥½åœ°ç®¡ç†bitmap å¯¹è±¡ï¼ˆbitmapå¯¹è±¡ç”³è¯·å’Œé‡Šæ”¾ä¼šå¼•èµ·é¢‘ç¹çš„GCæ“ä½œï¼Œä»Žè€Œå¼•èµ·ç•Œé¢å¡é¡¿ï¼‰ï¼Œ å¼•å…¥äº†å¯å…³é—­çš„å¼•ç”¨ï¼ˆCloseableReferenceï¼‰, æŒæœ‰è€…åœ¨ç¦»å¼€ä½œç”¨åŸŸçš„æ—¶å€™éœ€è¦å…³é—­è¯¥å¼•ç”¨ï¼Œè€Œæˆ‘ä»¬è¦èŽ·å–çš„bitmap å¯¹è±¡å°±æ˜¯å¯å…³é—­çš„å¼•ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¸èƒ½åƒä¸Šé¢Glideé‚£æ ·æŠŠbitmap å¯¹è±¡å–å‡ºæ¥ä¼ é€’ç»™å…¶å®ƒåœ°æ–¹ä½¿ç”¨ï¼Œ åªèƒ½åœ¨Frescoæä¾›çš„ä½œç”¨åŸŸèŒƒå›´å†…ä½¿ç”¨ã€‚å®žé™…é¡¹ç›®ä¸­ä¼šèŽ·å–ç¼“å†²çš„æ–‡ä»¶å¯¹è±¡ï¼š 12345//åŒæ ·åœ¨DataSubscriberä¸­èŽ·å–FileBinaryResource resource = (FileBinaryResource) Fresco.getImagePipelineFactory().getMainFileCache().getResource(new SimpleCacheKey(url));if (resource != null &amp;&amp; resource.getFile() != null) &#123; setImage(ImageSource.uri(Uri.fromFile(resource.getFile())));&#125; ä¼˜ç‚¹Glide å¤šç§å›¾ç‰‡æ ¼å¼çš„ç¼“å­˜ï¼Œé€‚ç”¨äºŽæ›´å¤šçš„å†…å®¹è¡¨çŽ°å½¢å¼ï¼ˆå¦‚Gifã€WebPã€ç¼©ç•¥å›¾ã€Videoï¼‰ ç”Ÿå‘½å‘¨æœŸé›†æˆï¼ˆæ ¹æ®Activityæˆ–è€…Fragmentçš„ç”Ÿå‘½å‘¨æœŸç®¡ç†å›¾ç‰‡åŠ è½½è¯·æ±‚ï¼‰ é«˜æ•ˆå¤„ç†Bitmapï¼ˆbitmapçš„å¤ç”¨å’Œä¸»åŠ¨å›žæ”¶ï¼Œå‡å°‘ç³»ç»Ÿå›žæ”¶åŽ‹åŠ›ï¼‰ é«˜æ•ˆçš„ç¼“å­˜ç­–ç•¥ï¼Œçµæ´»ï¼ˆPicassoåªä¼šç¼“å­˜åŽŸå§‹å°ºå¯¸çš„å›¾ç‰‡ï¼ŒGlideç¼“å­˜çš„æ˜¯å¤šç§è§„æ ¼ï¼‰ï¼ŒåŠ è½½é€Ÿåº¦å¿«ä¸”å†…å­˜å¼€é”€å°ï¼ˆé»˜è®¤Bitmapæ ¼å¼çš„ä¸åŒï¼Œä½¿å¾—å†…å­˜å¼€é”€æ˜¯Picassoçš„ä¸€åŠï¼‰ Fresco æœ€å¤§çš„ä¼˜åŠ¿åœ¨äºŽ5.0ä»¥ä¸‹(æœ€ä½Ž2.3)çš„bitmapåŠ è½½ã€‚åœ¨5.0ä»¥ä¸‹ç³»ç»Ÿï¼ŒFrescoå°†å›¾ç‰‡æ”¾åˆ°ä¸€ä¸ªç‰¹åˆ«çš„å†…å­˜åŒºåŸŸ(AshmemåŒº) å¤§å¤§å‡å°‘OOMï¼ˆåœ¨æ›´åº•å±‚çš„Nativeå±‚å¯¹OOMè¿›è¡Œå¤„ç†ï¼Œå›¾ç‰‡å°†ä¸å†å ç”¨Appçš„å†…å­˜ï¼‰ é€‚ç”¨äºŽéœ€è¦é«˜æ€§èƒ½åŠ è½½å¤§é‡å›¾ç‰‡çš„åœºæ™¯ ç¼ºç‚¹Glide -æ²¡æœ‰æ–‡ä»¶ç¼“å­˜ -java heapæ¯”Frescoé«˜ Fresco åŒ…è¾ƒå¤§ï¼ˆ2~3Mï¼‰ ç”¨æ³•å¤æ‚ åº•å±‚æ¶‰åŠc++é¢†åŸŸï¼Œé˜…è¯»æºç æ·±å…¥å­¦ä¹ éš¾åº¦å¤§ ç»“è®ºFrescoè™½ç„¶å¾ˆå¼ºå¤§ï¼Œä½†æ˜¯åŒ…å¾ˆå¤§ï¼Œä¾èµ–å¾ˆå¤šï¼Œä½¿ç”¨å¤æ‚ï¼Œè€Œä¸”è¿˜è¦åœ¨å¸ƒå±€ä½¿ç”¨SimpleDraweeViewæŽ§ä»¶åŠ è½½å›¾ç‰‡ã€‚ç›¸å¯¹è€Œè¨€Glideä¼šè½»å¥½å¤šï¼Œä¸Šæ‰‹å¿«ï¼Œä½¿ç”¨ç®€å•ï¼Œé…ç½®æ–¹ä¾¿ï¼Œè€Œä¸”ä»ŽåŠ è½½é€Ÿåº¦å’Œæ€§èƒ½æ–¹é¢ä¸ç›¸ä¸Šä¸‹ã€‚å¯¹äºŽä¸€èˆ¬çš„APPæ¥è¯´Glideæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œå¦‚æžœæ˜¯ä¸“ä¸šçš„å›¾ç‰‡APPé‚£ä¹ˆFrescoè¿˜æ˜¯å¿…è¦çš„ã€‚ æ–‡ç« éƒ¨åˆ†è½¬è½½äºŽ]]></content>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Retrofit2.0 ä½¿ç”¨æ•™ç¨‹ï¼ˆä¸Žå¸¸è§ç½‘ç»œè¯·æ±‚åº“å¯¹æ¯”ï¼‰]]></title>
    <url>%2F2019%2F03%2F03%2FRetrofit2.0%20%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%8E%E5%B8%B8%E8%A7%81%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E5%BA%93%E5%AF%B9%E6%AF%94%EF%BC%89%2F</url>
    <content type="text"><![CDATA[å‰è¨€ åœ¨Androidå¼€å‘ä¸­ï¼Œç½‘ç»œè¯·æ±‚ååˆ†å¸¸ç”¨ å½“ä¸‹çš„ç½‘ç»œè¯·æ±‚åŠ è½½åº“ä¸­ï¼ŒRetrofitåˆ™æ˜¯å½“ä¸‹hottestçš„ä¸€ä¸ªç½‘ç»œè¯·æ±‚åº“ ç®€ä»‹ ç‰¹åˆ«æ³¨æ„ï¼š å‡†ç¡®æ¥è¯´ï¼ŒRetrofitæ˜¯ä¸€ä¸ª RESTful çš„ HTTP ç½‘ç»œè¯·æ±‚æ¡†æž¶çš„å°è£… åŽŸå› ï¼šç½‘ç»œè¯·æ±‚çš„å·¥ä½œæœ¬è´¨ä¸Šæ˜¯OkHttpå®Œæˆçš„ï¼Œè€ŒRetrofitä»…è´Ÿè´£ç½‘ç»œè¯·æ±‚æŽ¥å£çš„å°è£… Appåº”ç”¨ç¨‹åºé€šè¿‡ Retrofit è¯·æ±‚ç½‘ç»œï¼Œå®žé™…ä¸Šæ˜¯ä½¿ç”¨RetrofitæŽ¥å£å±‚å°è£…è¯·æ±‚å‚æ•°ã€Headerã€Urlç­‰ä¿¡æ¯ï¼Œä¹‹åŽç”±OkHttpå®ŒæˆåŽç»­çš„è¯·æ±‚æ“ä½œ åœ¨æœåŠ¡ç«¯è¿”å›žæ•°æ®ä¹‹åŽï¼ŒOkHttpå°†åŽŸå§‹çš„ç»“æžœäº¤ç»™Retrofitï¼ŒRetrofitæ ¹æ®ç”¨æˆ·çš„éœ€æ±‚å¯¹ç»“æžœè¿›è¡Œè§£æž ä¸Žå…¶ä»–å¼€æºåº“å¯¹æ¯”é™¤äº† Retrofitï¼Œå¦‚ä»Š Android ä¸­ä¸»æµçš„ç½‘ç»œè¯·æ±‚æ¡†æž¶æœ‰ï¼š Android-Async-Http Volly OkHttp ä»‹ç» å‡ ç§ç½‘ç»œè¯·æ±‚åº“ä¹‹é—´çš„åŒºåˆ«å¯¹æ¯” é™„ï¼šå„ä¸ªä¸»æµç½‘ç»œè¯·æ±‚åº“çš„ Github åœ°å€ Android-Async-Http Volley OkHttp Retrofit Retrofitä½¿ç”¨ä»‹ç»ä½¿ç”¨Retrofitçš„æ­¥éª¤å…±æœ‰7ä¸ªï¼š æ­¥éª¤1ï¼šæ·»åŠ  Retrofit åº“çš„ä¾èµ– æ­¥éª¤2ï¼šåˆ›å»º æŽ¥å—æœåŠ¡å™¨è¿”å›žæ•°æ® çš„ç±» æ­¥éª¤3ï¼šåˆ›å»º ç”¨äºŽæè¿°ç½‘ç»œè¯·æ±‚ çš„æŽ¥å£ æ­¥éª¤4ï¼šåˆ›å»º Retrofit å®žä¾‹ æ­¥éª¤5ï¼šåˆ›å»º ç½‘ç»œè¯·æ±‚æŽ¥å£å®žä¾‹ å¹¶ é…ç½®ç½‘ç»œè¯·æ±‚å‚æ•° æ­¥éª¤6ï¼šå‘é€ç½‘ç»œè¯·æ±‚ï¼ˆå¼‚æ­¥\åŒæ­¥ï¼‰ &gt; å°è£…äº† æ•°æ®è½¬æ¢ã€çº¿ç¨‹åˆ‡æ¢çš„æ“ä½œ æ­¥éª¤7ï¼šå¤„ç†æœåŠ¡å™¨è¿”å›žçš„æ•°æ® æŽ¥ä¸‹æ¥æˆ‘ä»¬å°†è¿™äº›æ­¥éª¤è¿›è¡Œåˆ†è§£ æ­¥éª¤1ï¼šæ·»åŠ  Retrofit åº“çš„ä¾èµ–1.åœ¨GradleåŠ å…¥Retrofitåº“çš„ä¾èµ– ç”±äºŽRetrofitæ˜¯åŸºäºŽOkHttpï¼Œæ‰€ä»¥è¿˜éœ€è¦æ·»åŠ OkHttpåº“ä¾èµ– build.gradle 123456dependencies &#123; compile&apos;com.squareup.retrofit2:retrofit:2.0.2&apos; // Retrofitåº“ compile &apos;com.squareup.okhttp3:okhttp:3.1.2&apos; // Okhttpåº“ &#125; 2.æ·»åŠ  ç½‘ç»œæƒé™AndroidManifest.xml 1&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt; æ­¥éª¤2ï¼šåˆ›å»º æŽ¥å—æœåŠ¡å™¨è¿”å›žæ•°æ® çš„ç±»Reception.java12345public class Reception&#123; ... //æ ¹æ®è¿”å›žæ•°æ®çš„æ ¼å¼å’Œæ•°æ®è§£æžæ–¹å¼ï¼ˆJsonã€XMLç­‰ï¼‰å®šä¹‰ //ä¸‹é¢ä¼šåœ¨å®žä¾‹ä¸­è¿›è¡Œè¯´æ˜Ž&#125; æ­¥éª¤3ï¼šåˆ›å»º ç”¨äºŽæè¿°ç½‘ç»œè¯·æ±‚ çš„æŽ¥å£ Retrofitå°†Httpè¯·æ±‚æŠ½è±¡æˆJavaæŽ¥å£ï¼šé‡‡ç”¨æ³¨è§£æè¿°ç½‘ç»œè¯·æ±‚çš„å‚æ•° å’Œ é…ç½®ç½‘ç»œè¯·æ±‚å‚æ•° 1.ç”¨ åŠ¨æ€ä»£ç† åŠ¨æ€ å°†è¯¥æŽ¥å£çš„æ³¨è§£â€œç¿»è¯‘â€æˆä¸€ä¸ªHttpè¯·æ±‚ï¼Œæœ€åŽå†æ‰§è¡ŒHttpè¯·æ±‚2.æ³¨ï¼šæŽ¥å£ä¸­çš„æ¯ä¸ªæ–¹æ³•çš„å‚æ•°éƒ½éœ€è¦ä½¿ç”¨æ³¨è§£æ ‡æ³¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™ _GetRequestInterface.interface 12345678public interface GetRequest_Interface&#123; @GET("openapi.do?keyfrom=Yanzhikai&amp;key=2032414398&amp;type=data&amp;doctype=json&amp;version=1.1&amp;q=car") Call&lt;Translation&gt; getCall(); //@GETæ³¨è§£çš„ä½œç”¨ï¼šé‡‡ç”¨Getæ–¹æ³•å‘é€ç½‘ç»œè¯·æ±‚ //getCall() = æŽ¥å—ç½‘ç»œè¯·æ±‚æ•°æ®çš„æ–¹æ³• //å…¶ä¸­è¿”å›žç±»åž‹ä¸ºCall&lt;*&gt;,*æ˜¯æŽ¥æ”¶æ•°æ®çš„ç±»ï¼ˆå³ä¸Šé¢å®šä¹‰çš„Translationç±»ï¼‰ //å¦‚æžœæƒ³ç›´æŽ¥èŽ·å¾—Responsebodyä¸­çš„å†…å®¹ï¼Œå¯ä»¥å®šä¹‰ç½‘ç»œè¯·æ±‚è¿”å›žå€¼ä¸ºCall&lt;ResponseBody&gt;&#125; ä¸‹é¢è¯¦ç»†ä»‹ç»Retrofitç½‘ç»œè¯·æ±‚æŽ¥å£ çš„æ³¨è§£ç±»åž‹æ³¨è§£ç±»åž‹ æ³¨è§£è¯´æ˜Ž ç¬¬ä¸€ç±»ï¼šç½‘ç»œè¯·æ±‚æ–¹æ³• è¯¦ç»†è¯´æ˜Žï¼ša.@GETã€@POSTã€@PUTã€@DELETEã€@HEADä»¥ä¸Šæ–¹æ³•åˆ†åˆ«å¯¹åº”HTTPä¸­çš„ç½‘ç»œè¯·æ±‚æ–¹å¼1234567public interface GetRequest_Interface &#123; @GET("openapi.do?keyfrom=Yanzhikai&amp;key=2032414398&amp;type=data&amp;doctype=json&amp;version=1.1&amp;q=car") Call&lt;Translation&gt; getCall(); // @GETæ³¨è§£çš„ä½œç”¨:é‡‡ç”¨Getæ–¹æ³•å‘é€ç½‘ç»œè¯·æ±‚ // getCall() = æŽ¥æ”¶ç½‘ç»œè¯·æ±‚æ•°æ®çš„æ–¹æ³• // å…¶ä¸­è¿”å›žç±»åž‹ä¸ºCall&lt;*&gt;ï¼Œ*æ˜¯æŽ¥æ”¶æ•°æ®çš„ç±»ï¼ˆå³ä¸Šé¢å®šä¹‰çš„Translationç±»ï¼‰ &#125; æ­¤å¤„ç‰¹æ„è¯´æ˜ŽURLçš„ç»„æˆï¼šRetrofitæŠŠ ç½‘ç»œè¯·æ±‚çš„URLåˆ†æˆäº†ä¸¤éƒ¨åˆ†è®¾ç½®ï¼š12345678910111213// ç¬¬1éƒ¨åˆ†ï¼šåœ¨ç½‘ç»œè¯·æ±‚æŽ¥å£çš„æ³¨è§£è®¾ç½® @GET("openapi.do?keyfrom=Yanzhikai&amp;key=2032414398&amp;type=data&amp;doctype=json&amp;version=1.1&amp;q=car")Call&lt;Translation&gt; getCall();// ç¬¬2éƒ¨åˆ†ï¼šåœ¨åˆ›å»ºRetrofitå®žä¾‹æ—¶é€šè¿‡.baseUrl()è®¾ç½®Retrofit retrofit = new Retrofit.Builder() .baseUrl("http://fanyi.youdao.com/") //è®¾ç½®ç½‘ç»œè¯·æ±‚çš„Urlåœ°å€ .addConverterFactory(GsonConverterFactory.create()) //è®¾ç½®æ•°æ®è§£æžå™¨ .build();// ä»Žä¸Šé¢çœ‹å‡ºï¼šä¸€ä¸ªè¯·æ±‚çš„URLå¯ä»¥é€šè¿‡ æ›¿æ¢å— å’Œ è¯·æ±‚æ–¹æ³•çš„å‚æ•° æ¥è¿›è¡ŒåŠ¨æ€çš„URLæ›´æ–°ã€‚// æ›¿æ¢å—æ˜¯ç”± è¢«&#123;&#125;åŒ…è£¹èµ·æ¥çš„å­—ç¬¦ä¸²æž„æˆ// å³ï¼šRetrofitæ”¯æŒåŠ¨æ€æ”¹å˜ç½‘ç»œè¯·æ±‚æ ¹ç›®å½• ç½‘ç»œè¯·æ±‚çš„å®Œæ•´ Url = åœ¨åˆ›å»º Retrofit å®žä¾‹æ—¶é€šè¿‡.baseUrl() è®¾ç½® + ç½‘ç»œè¯·æ±‚æŽ¥å£çš„æ³¨è§£è®¾ç½®ï¼ˆä¸‹é¢ç§°â€œpathâ€ï¼‰ å…·ä½“æ•´åˆçš„è§„åˆ™å¦‚ä¸‹ï¼š å»ºè®®é‡‡ç”¨ç¬¬ä¸‰ç§æ–¹å¼æ¥é…ç½®ï¼Œå¹¶å°½é‡ä½¿ç”¨åŒä¸€ç§è·¯å¾„å½¢å¼ã€‚ b.@HTTP ä½œç”¨ï¼šæ›¿æ¢@GETã€@POSTã€@PUTã€@DELETEã€@HEADæ³¨è§£çš„ä½œç”¨ åŠ æ›´å¤šåŠŸèƒ½æ‹“å±• å…·ä½“ä½¿ç”¨ï¼šé€šè¿‡å±žæ€§ methodã€pathã€hasBodyè¿›è¡Œè®¾ç½® 1234567891011public interface GetRequest_Interface &#123; /** * methodï¼šç½‘ç»œè¯·æ±‚çš„æ–¹æ³•ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ * pathï¼šç½‘ç»œè¯·æ±‚åœ°å€è·¯å¾„ * hasBodyï¼šæ˜¯å¦æœ‰è¯·æ±‚ä½“ */ @HTTP(method = "GET", path = "blog/&#123;id&#125;", hasBody = false) Call&lt;ResponseBody&gt; getCall(@Path("id") int id); // &#123;id&#125; è¡¨ç¤ºæ˜¯ä¸€ä¸ªå˜é‡ // method çš„å€¼ retrofit ä¸ä¼šåšå¤„ç†ï¼Œæ‰€ä»¥è¦è‡ªè¡Œä¿è¯å‡†ç¡®&#125; ç¬¬äºŒç±»ï¼šæ ‡è®° a.@FormUrlEncoded ä½œç”¨ï¼šè¡¨ç¤ºå‘é€form-encoded çš„æ•°æ® æ¯ä¸ªé”®å€¼å¯¹éœ€è¦ç”¨ @Filed æ¥æ³¨è§£é”®åï¼ŒéšåŽçš„å¯¹è±¡éœ€è¦æä¾›å€¼ã€‚ b.@Multipart ä½œç”¨ï¼šè¡¨ç¤ºå‘é€form-encoded çš„æ•°æ®ï¼ˆé€‚ç”¨äºŽ æœ‰æ–‡ä»¶ ä¸Šä¼ çš„åœºæ™¯ï¼‰ æ¯ä¸ªé”®å€¼å¯¹éœ€è¦ç”¨ @Part æ¥æ³¨è§£é”®åï¼ŒéšåŽçš„å¯¹è±¡éœ€è¦æä¾›å€¼ã€‚ å…·ä½“ä½¿ç”¨å¦‚ä¸‹ï¼š_GetRequestInterface 123456789101112131415161718192021222324252627282930public interface GetRequest_Interface &#123; /** *è¡¨æ˜Žæ˜¯ä¸€ä¸ªè¡¨å•æ ¼å¼çš„è¯·æ±‚ï¼ˆContent-Type:application/x-www-form-urlencodedï¼‰ * &lt;code&gt;Field("username")&lt;/code&gt; è¡¨ç¤ºå°†åŽé¢çš„ &lt;code&gt;String name&lt;/code&gt; ä¸­nameçš„å–å€¼ä½œä¸º username çš„å€¼ */ @POST("/form") @FormUrlEncoded Call&lt;ResponseBody&gt; testFormUrlEncoded1(@Field("username") String name, @Field("age") int age); /** * &#123;@link Part&#125; åŽé¢æ”¯æŒä¸‰ç§ç±»åž‹ï¼Œ&#123;@link RequestBody&#125;ã€&#123;@link okhttp3.MultipartBody.Part&#125; ã€ä»»æ„ç±»åž‹ * é™¤ &#123;@link okhttp3.MultipartBody.Part&#125; ä»¥å¤–ï¼Œå…¶å®ƒç±»åž‹éƒ½å¿…é¡»å¸¦ä¸Šè¡¨å•å­—æ®µ(&#123;@link okhttp3.MultipartBody.Part&#125; ä¸­å·²ç»åŒ…å«äº†è¡¨å•å­—æ®µçš„ä¿¡æ¯)ï¼Œ */ @POST("/form") @Multipart Call&lt;ResponseBody&gt; testFileUpload1(@Part("name") RequestBody name, @Part("age") RequestBody age, @Part MultipartBody.Part file);&#125;// å…·ä½“ä½¿ç”¨ GetRequest_Interface service = retrofit.create(GetRequest_Interface.class); // @FormUrlEncoded Call&lt;ResponseBody&gt; call1 = service.testFormUrlEncoded1("Carson", 24); // @Multipart RequestBody name = RequestBody.create(textType, "Carson"); RequestBody age = RequestBody.create(textType, "24"); MultipartBody.Part filePart = MultipartBody.Part.createFormData("file", "test.txt", file); Call&lt;ResponseBody&gt; call3 = service.testFileUpload1(name, age, filePart); ç¬¬ä¸‰ç±»ï¼šç½‘ç»œè¯·æ±‚å‚æ•° è¯¦ç»†è¯´æ˜Ž a.@Header &amp; @Headers ä½œç”¨ï¼šæ·»åŠ è¯·æ±‚å¤´ &amp; æ·»åŠ ä¸å›ºå®šçš„è¯·æ±‚å¤´ å…·ä½“ä½¿ç”¨å¦‚ä¸‹ï¼š12345678910111213// @Header@GET("user")Call&lt;User&gt; getUser(@Header("Authorization") String authorization)// @Headers@Headers("Authorization: authorization")@GET("user")Call&lt;User&gt; getUser()// ä»¥ä¸Šçš„æ•ˆæžœæ˜¯ä¸€è‡´çš„ã€‚// åŒºåˆ«åœ¨äºŽä½¿ç”¨åœºæ™¯å’Œä½¿ç”¨æ–¹å¼// 1. ä½¿ç”¨åœºæ™¯ï¼š@Headerç”¨äºŽæ·»åŠ ä¸å›ºå®šçš„è¯·æ±‚å¤´ï¼Œ@Headersç”¨äºŽæ·»åŠ å›ºå®šçš„è¯·æ±‚å¤´// 2. ä½¿ç”¨æ–¹å¼ï¼š@Headerä½œç”¨äºŽæ–¹æ³•çš„å‚æ•°ï¼›@Headersä½œç”¨äºŽæ–¹æ³• b.@Body ä½œç”¨ï¼šä»¥postæ–¹å¼ ä¼ é€’ è‡ªå®šä¹‰æ•°æ®ç±»åž‹ç»™æœåŠ¡å™¨ ç‰¹åˆ«æ³¨æ„ï¼šå¦‚æžœæäº¤çš„æ˜¯ä¸€ä¸ªMapï¼Œé‚£ä¹ˆä½œç”¨ç›¸å½“äºŽ@Field ä¸è¿‡ Map è¦ç»è¿‡FormBody.Builderç±»å¤„ç†æˆä¸ºç¬¦åˆOkHttpæ ¼å¼çš„è¡¨å•ï¼Œå¦‚ï¼š 12FormBody.Builder builder = new ForBody.Builder();builder.add("key","value"); c.@Field &amp; @FieldMap ä½œç”¨ï¼šå‘é€ Post è¯·æ±‚ æ—¶æäº¤è¯·æ±‚çš„è¡¨å•å­—æ®µ å…·ä½“ä½¿ç”¨ï¼šä¸Ž @FormUrlEncoded æ³¨è§£é…åˆä½¿ç”¨12345678910111213141516171819202122232425262728public interface GetRequest_Interface &#123; /** *è¡¨æ˜Žæ˜¯ä¸€ä¸ªè¡¨å•æ ¼å¼çš„è¯·æ±‚ï¼ˆContent-Type:application/x-www-form-urlencodedï¼‰ * &lt;code&gt;Field("username")&lt;/code&gt; è¡¨ç¤ºå°†åŽé¢çš„ &lt;code&gt;String name&lt;/code&gt; ä¸­nameçš„å–å€¼ä½œä¸º username çš„å€¼ */ @POST("/form") @FormUrlEncoded Call&lt;ResponseBody&gt; testFormUrlEncoded1(@Field("username") String name, @Field("age") int age);/** * Mapçš„keyä½œä¸ºè¡¨å•çš„é”® */ @POST("/form") @FormUrlEncoded Call&lt;ResponseBody&gt; testFormUrlEncoded2(@FieldMap Map&lt;String, Object&gt; map);&#125;// å…·ä½“ä½¿ç”¨ // @Field Call&lt;ResponseBody&gt; call1 = service.testFormUrlEncoded1("Carson", 24); // @FieldMap // å®žçŽ°çš„æ•ˆæžœä¸Žä¸Šé¢ç›¸åŒï¼Œä½†è¦ä¼ å…¥Map Map&lt;String, Object&gt; map = new HashMap&lt;&gt;(); map.put("username", "Carson"); map.put("age", 24); Call&lt;ResponseBody&gt; call2 = service.testFormUrlEncoded2(map); d.@Part &amp; @PartMape.@Query &amp; @QueryMapf.@Pathg.@Urlæ±‡æ€» æ­¥éª¤4ï¼šåˆ›å»º Retrofit å®žä¾‹æ­¥éª¤5ï¼šåˆ›å»º ç½‘ç»œè¯·æ±‚æŽ¥å£å®žä¾‹ å¹¶ é…ç½®ç½‘ç»œè¯·æ±‚å‚æ•°æ­¥éª¤6ï¼šå‘é€ç½‘ç»œè¯·æ±‚ï¼ˆå¼‚æ­¥\åŒæ­¥ï¼‰æ­¥éª¤7ï¼šå¤„ç†æœåŠ¡å™¨è¿”å›žçš„æ•°æ®]]></content>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AndroidStudioç¼–è¯‘è¿‡ç¨‹]]></title>
    <url>%2F2019%2F03%2F02%2FAndroidStudio%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[åœ¨æ­¤è®°å½•ä¸€ä¸‹AndroidStudioç¼–è¯‘è¿‡ç¨‹ å…¶ä¸­ä½¿ç”¨åˆ°çš„ç¼–è¯‘å·¥å…·ï¼šaaptã€aidlã€Java Compilerã€dexã€zipalign ä¸»è¦æ­¥éª¤æè¿°ï¼š 1.é€šè¿‡aaptæ‰“åŒ…resèµ„æºæ–‡ä»¶ï¼Œç”ŸæˆR.javaã€resource.arscå’Œresæ–‡ä»¶ï¼ˆäºŒè¿›åˆ¶&amp;éžäºŒè¿›åˆ¶å¦‚res/rawå’Œpicä¿æŒåŽŸæ ·ï¼‰ 2.å¤„ç†.aidlæ–‡ä»¶ï¼Œç”Ÿæˆå¯¹åº”çš„JavaæŽ¥å£æ–‡ä»¶ 3.é€šè¿‡Java Compilerç¼–è¯‘R.javaã€JavaæŽ¥å£æ–‡ä»¶ã€Javaæºæ–‡ä»¶ï¼Œç”Ÿæˆ.classæ–‡ä»¶ 4.é€šè¿‡dexå‘½ä»¤ï¼Œå°†.classæ–‡ä»¶å’Œç¬¬ä¸‰æ–¹åº“ä¸­çš„.classæ–‡ä»¶å¤„ç†ç”Ÿæˆclasses.dex 5.é€šè¿‡apkbuilderå·¥å…·ï¼Œå°†aaptç”Ÿæˆçš„resource.arscå’Œresæ–‡ä»¶ã€assetsæ–‡ä»¶å’Œclasses.dexä¸€èµ·æ‰“åŒ…ç”Ÿæˆapk 6.é€šè¿‡Jarsignerå·¥å…·ï¼Œå¯¹ä¸Šé¢çš„apkè¿›è¡Œdebugæˆ–releaseç­¾å 7.é€šè¿‡zipalignå·¥å…·ï¼Œå°†ç­¾ååŽçš„apkè¿›è¡Œå¯¹é½å¤„ç† link]]></content>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®°ä¸€é“ç®€å•çš„Javaé¢è¯•é¢˜ã€è½¬è½½è‡ª çŸ¥ä¹Žâ€”â€”æ–¹å¿—å®ã€‘]]></title>
    <url>%2F2019%2F03%2F01%2F%E8%AE%B0%E4%B8%80%E9%81%93%E7%AE%80%E5%8D%95%E7%9A%84Java%E9%9D%A2%E8%AF%95%E9%A2%98%2F</url>
    <content type="text"><![CDATA[è¿™å¯èƒ½æ˜¯åŽ†å²ä¸Šæœ€ç®€å•çš„ä¸€é“javaé¢è¯•é¢˜äº†ã€‚ é¢˜ç›®å¾ˆç®€å•ï¼Œå®Œæˆä»£ç ï¼Œåˆ¤æ–­ä¸€ä¸ªæ•´æ•°æ˜¯å¦æ˜¯å¥‡æ•°ï¼š 1public boolean isOdd(int i) ç›¸ä¿¡ç›¸å½“æ•°é‡çš„äººéƒ½å·²ç»åœ¨å‡†å¤‡åæ§½äº†ï¼Œåªè¦çœ‹è¿‡ã€Šç¼–ç¨‹ç çŽ‘ã€‹çš„äººéƒ½çŸ¥é“è¿™é“é¢˜çš„ç­”æ¡ˆå’Œå…¶ä¸­æžä¸ºç®€å•çš„é“ç†ã€‚ä¸è¿‡åˆ«ç€æ€¥éª‚è¡—ï¼Œä¸ç®¡ä½ ä¿¡ä¸ä¿¡ï¼Œè¿™é“ç¬”è¯•é¢˜æˆ‘æ‹¿åˆ°çš„ç­”æ¡ˆå¥½å¤šéƒ½é•¿è¿™æ ·ï¼š 1234567public boolean isOdd(int i) &#123; if (i % 2 == 1) &#123; System.out.println("æ˜¯å¥‡æ•°"); &#125; else &#123; System.out.println("æ˜¯å¶æ•°"); &#125;&#125; ç„¶åŽç¼–è¯‘ä¸€ä¸‹ï¼Œå‘çŽ°é”™è¯¯äº†ï¼ŒæŒ æŒ å¤´ï¼Œé¡¶å¤šæ”¹æˆè¿™æ ·ï¼š 1234567public boolean isOdd(int i) &#123; if (i % 2 == 1) &#123; return true; &#125; else &#123; return false; &#125;&#125; å¥½å§ï¼Œæˆ‘æ‰¿è®¤æˆ‘åœ¨ç­›é€‰ç®€åŽ†çš„èƒ½åŠ›å¯èƒ½æœ‰ä¸€äº›é—®é¢˜ï¼Œä¸è¿‡ä¸ç®¡ä½ ä¿¡ä¸ä¿¡ï¼Œå¥½å¤šå¤§åŽ‚å·¥ä½œäº†å‡ å¹´çš„ç¨‹åºå‘˜ï¼Œéƒ½ä¼šå†™å‡ºå¦‚ä¸Šé£Žæ ¼çš„ä»£ç ã€‚ äºŽæ˜¯æˆ‘ç»§ç»­è¿›è¡Œå¼•å¯¼ï¼š æˆ‘ï¼šâ€œè¿™ä¸ªå‡½æ•°çš„å®šä¹‰è¦æ±‚è¿”å›žä¸€ä¸ªä»€ä¹ˆç±»åž‹çš„å€¼ï¼Ÿâ€ å€™é€‰äººçœ‹äº†çœ‹é¢˜å¹²ï¼šâ€œå¸ƒå°”ç±»åž‹ã€‚â€ æˆ‘ï¼šâ€œé‚£ä¹ˆï¼Œä½ ifåŽé¢çš„æ‹¬å·é‡Œé¢çš„è¡¨è¾¾å¼çš„å€¼æ˜¯ä¸€ä¸ªä»€ä¹ˆç±»åž‹çš„ï¼Ÿâ€ å¼•å¯¼åˆ°è¿™ä¸€æ­¥çš„æ—¶å€™ï¼Œä¾ç„¶æœ‰é«˜è¾¾ä¸¤æˆçš„å€™é€‰äººé€‰æ‹©äº†æ”¾å¼ƒï¼Œè¡¨ç¤ºä»–ä»¬ä¸çŸ¥é“ã€‚å¥½å§ï¼Œæˆ‘çœŸçš„ä¸çŸ¥é“ä½ ä»¬æ¥é¢è¯•è¿™ä¸ªèŒä½çš„ä¿¡å¿ƒä½•åœ¨ã€‚ä¸è¿‡å¤§éƒ¨åˆ†äººæƒ³äº†æƒ³ï¼Œè¿˜ä¼šå›žç­”å‡ºæ­£ç¡®ç­”æ¡ˆï¼š å€™é€‰äººï¼šâ€œä¹Ÿæ˜¯å¸ƒå°”ç±»åž‹ã€‚â€ æˆ‘ï¼šâ€œç„¶åŽå‘¢ï¼Ÿâ€ æœ‰å°‘é‡å€™é€‰äººè™½ç„¶æ²¡è¯´å‡ºæ¥ï¼Œä½†æ˜¯æˆ‘èƒ½çœ‹å‡ºæ¥ä»–ä»¬è§‰å¾—è¿™åªæ˜¯ä¸€ä¸ªå·§åˆï¼Œå¹¶ä¸çŸ¥é“æ€Žä¹ˆè¿›è¡Œä¸‹ä¸€æ­¥ã€‚ä¸è¿‡ï¼Œå¤§å¤šæ•°äººæƒ³äº†æƒ³ä¹‹åŽï¼Œè¿˜æ˜¯ä¼šä¼˜åŒ–æˆå¦‚ä¸‹ä»£ç ï¼š 123public boolean isOdd(int i) &#123; return i % 2 == 1;&#125; ç»ˆäºŽè¿‡äº†ç¬¬ä¸€å…³äº†ï¼Œè¿›è¡Œç¬¬äºŒå…³çš„å¼•å¯¼ï¼š æˆ‘ï¼šâ€œé‚£æˆ‘ä¼ è¿›æ¥ä¸€ä¸ª-1å‘¢ï¼Ÿâ€ å°†è¿‘ä¸€åŠçš„äººåœ¨æƒ³äº†æƒ³ä¹‹åŽä¼šå˜´ç¡¬åœ°è¡¨ç¤ºä»–ä»¬ä»Žå°è¢«æ•™å¯¼åªæœ‰è‡ªç„¶æ•°æ‰æœ‰å¥‡æ•°å¶æ•°ä¹‹åˆ†ï¼Œè´Ÿæ•°æ²¡æœ‰å¥‡å¶è¿™ä¸€è¯´ã€‚å‰©ä½™çš„äººæŽ¥å—äº†è¿™ä¸ªè®¾å®šï¼Œæƒ³äº†ä¸€ä¼šå„¿ï¼Œæ”¹æˆè¿™æ ·ï¼š 123public boolean isOdd(int i) &#123; return i % 2 == 1 || i % 2 == -1;&#125; å¹¶ä¸”åœ¨æç¤ºä¹‹åŽä¼˜åŒ–æˆè¿™æ ·ï¼š 123public boolean isOdd(int i) &#123; return i % 2 != 0;&#125; å¥½å§ï¼Œè¿™æ˜¯è¿„ä»Šä¸ºæ­¢ç¬¬ä¸€ä¸ªèƒ½é€šè¿‡ç¼–è¯‘ä¸”å®Œå…¨æ»¡è¶³äº†éœ€æ±‚çš„ä»£ç å®žçŽ°äº†ã€‚è¯´å®žè¯ï¼Œä¸€å¼€å§‹å°±å†™æˆè¿™æ ·çš„äººï¼Œå¦‚æžœæ²¡æœ‰å…¶ä»–ä»€ä¹ˆæ˜Žæ˜¾çš„ç¼ºç‚¹çš„è¯ï¼Œæˆ‘è¿™é‡ŒåŸºæœ¬å°±èƒ½é€šè¿‡äº†ã€‚æˆ‘æ‰¿è®¤æˆ‘çš„è¦æ±‚æ¯”è¾ƒä½Žï¼Œä½†æ˜¯æ¥é¢è¯•çš„äººèƒ½ç›´æŽ¥å†™å‡ºè¿™æ ·çš„çœŸçš„ä¸å¤ªå¤šï¼Œç²—ç•¥åœ°ä¼°è®¡çš„è¯ï¼Œå¤§æ¦‚å ä¸€åˆ°ä¸¤æˆå§ã€‚ ä½†æ˜¯è¿™é‡Œè¿˜æ²¡å®Œå‘¢ï¼Œè¿˜æœ‰æœ€é‡è¦çš„ç¬¬ä¸‰å…³å‘¢ï¼š æˆ‘ï¼šâ€œæœ‰æ›´å¥½çš„åŠžæ³•å—ï¼Ÿâ€ å€™é€‰äººï¼šâ€œï¼Ÿâ€ æˆ‘ï¼šâ€œæˆ‘è§‰å¾—å–æ¨¡æ“ä½œæ¯”è¾ƒæ…¢ï¼Œæœ‰æ›´å¿«çš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿâ€ é™¤äº†å°‘æ•°äººèƒ½è‡ªå·±æƒ³æƒ³å°±æƒ³å‡ºæ¥äº†ä¹‹å¤–ï¼Œç»å¤§éƒ¨åˆ†ï¼ˆæ¯«ä¸å¤¸å¼ ï¼‰å€™é€‰äººè¡¨ç¤ºæ²¡æœ‰æˆ–è€…ä¸çŸ¥é“ï¼ŒäºŽæ˜¯è¿›è¡Œä¸‹ä¸€æ­¥æç¤ºï¼š æˆ‘ï¼šâ€œå¥‡æ•°å’Œå¶æ•°è½¬æ¢æˆäºŒè¿›åˆ¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿâ€ ç›¸å½“ä¸€éƒ¨åˆ†å€™é€‰äººè¡¨ç¤ºè‡ªå·±ä¸æ‡‚ä»€ä¹ˆå«äºŒè¿›åˆ¶å’Œä½è¿ç®—ï¼Œæœ‰çš„è¿˜è¡¨ç¤ºjavaä¸æ˜¯cè¯­è¨€ï¼Œä¸ç”¨ç ”ç©¶è¿™äº›ï¼Œå°±è·Ÿå¾ˆå¤šè¯„è®ºä¼šåæ§½æˆ‘åœ¨è£…é€¼ä¸€æ ·ã€‚å°‘éƒ¨åˆ†å€™é€‰äººæƒ³äº†æƒ³ï¼Œä¼šæ€¯æ€¯åœ°å›žç­”ã€‚ å€™é€‰äººï¼šâ€œå¥‡æ•°æœ€åŽä¸€ä½æ˜¯1ï¼Œå¶æ•°æœ€åŽä¸€ä½æ˜¯0ã€‚â€ æˆ‘ï¼šâ€œç„¶åŽå‘¢ï¼Ÿâ€ è¿™é‡Œå¾ˆå¥‡æ€ªçš„ç‚¹æ˜¯ï¼Œå¤§éƒ¨åˆ†èƒ½èŠåˆ°è¿™é‡Œæ¥çš„å€™é€‰äººä¼šæƒ³èµ·æ¥ç§»ä½æ“ä½œï¼Œæˆ‘çœŸçš„ä¸çŸ¥é“æ˜¯ä¸ºä»€ä¹ˆï¼Œè™½ç„¶è¿™é“é¢˜ç¡®å®žå¯ä»¥æœ‰è¿™ç§æ“ä½œï¼š 123public boolean isOdd(int i) &#123; return i &gt;&gt; 1 &lt;&lt; 1 != i;&#125; ä½†æ˜¯è¿™æ ¹æœ¬ä¸æ˜¯é‡ç‚¹å¥½å§ï¼ï¼ï¼ æ€»ä¹‹ï¼Œæ— è®ºå¦‚ä½•ï¼Œèƒ½åœ¨ç¬¬ä¸‰å…³çš„å„ç§å¼•å¯¼ä¹‹åŽï¼Œèƒ½å†™å‡ºä¸‹é¢è¿™ä¸ªç»“æžœæ¥çš„äººï¼ŒçœŸçš„ä¸å¤šã€‚èƒ½ä¸€å¼€å§‹æ²¡æœ‰ä»»ä½•å¼•å¯¼çš„å°±å†™å‡ºæ¥çš„äººï¼Œè‡³ä»Šåªè§è¿‡ä¸¤ä¸ªï¼Œä¸€ä¸ªæˆ‘åŽ»å“ªå„¿éƒ½å¸¦ç€ï¼Œä¸€ä¸ªæ‹’äº†æˆ‘çš„offerã€‚ 123public boolean isOdd(int i) &#123; return (i &amp; 1) == 1;&#125; åˆ«ä»¥ä¸ºè¿™å°±å®Œäº†ï¼ç»ˆæžbossæ¥äº†ï¼š æˆ‘ï¼šâ€œè¿™æ ·æ˜¯ä¸æ˜¯æ¯”ä¸Šé¢å–æ¨¡è¿ç®—è¦å¿«ï¼Ÿâ€ å€™é€‰äººï¼šâ€œé‚£å½“ç„¶äº†ï¼Œä½è¿ç®—è‚¯å®šå¿«å•Šã€‚â€ æˆ‘ï¼šâ€œä½†æ˜¯æˆ‘ä»¬å®žé™…ä»£ç æµ‹è¯•è¿‡ï¼Œå‘çŽ°ä¸Šé¢çš„æŒ‰ä½ä¸Žæ“ä½œå’Œå–æ¨¡æ“ä½œï¼Œå®žé™…è¿è¡Œçš„æ—¶é—´æ˜¯å·®ä¸å¤šçš„ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿâ€ å€™é€‰äººå¿ƒé‡Œmmpï¼šâ€œé—¹äº†åŠå¤©ä½ è¿™æ˜¯åœ¨é€—æˆ‘çŽ©å•Šï¼Ÿï¼Ÿï¼Ÿâ€ ç„¶è€ŒçœŸæ­£èƒ½å›žç­”å‡ºåŽŸå› æ¥çš„äººï¼Œé¢è¯•è¿‡ç¨‹ä¸­æˆ‘æ²¡è§è¿‡ï¼Œå¯èƒ½æ˜¯å¤§ç‰›éƒ½çœ‹ä¸ä¸Šæˆ‘æ‰€åœ¨çš„å…¬å¸å§ã€‚åªæœ‰åœ¨æŸå…¬å¸çš„æ—¶å€™ï¼Œä¸€ä¸ªåŒäº‹æƒ³äº†æƒ³ï¼Œç»™å‡ºäº†æˆ‘æ­£ç¡®ç­”æ¡ˆï¼šâ€œç¼–è¯‘å™¨ä¼šå°†å¯¹2çš„æŒ‡æ•°çš„å–æ¨¡æ“ä½œï¼Œä¼˜åŒ–æˆä½è¿ç®—æ“ä½œã€‚â€ éš¾é“æ˜¯æˆ‘ç»åŽ†çš„å…¬å¸éƒ½å¤ªlowäº†ä¹ˆâ€¦â€¦ ä½œè€…ï¼šæ–¹å¿—å®é“¾æŽ¥ï¼šhttps://zhuanlan.zhihu.com/p/57859872æ¥æºï¼šçŸ¥ä¹Žè‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…èŽ·å¾—æŽˆæƒï¼Œéžå•†ä¸šè½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„ã€‚]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ByteDanceã€ä¸€é¢æ€»ç»“ã€‘]]></title>
    <url>%2F2019%2F02%2F18%2FByteDance%E3%80%90%E4%B8%80%E9%9D%A2%E6%80%BB%E7%BB%93%E3%80%91%2F</url>
    <content type="text"><![CDATA[å¤§æ¦‚åœ¨æ•°å¤©å‰æŠ•é€’äº†å­—èŠ‚è·³åŠ¨-æŠ–éŸ³æ–¹å‘çš„å®žä¹ ç”Ÿå²—ä½æ˜¨å¤©æŽ¥åˆ°äº†é¢è¯•é€šçŸ¥ï¼Œä»Šå¤©é¢è¯•åŽå¯¹æ¶‰åŠåˆ°çš„é—®é¢˜è¿›è¡Œä¸€ä¸ªå¤ç›˜ã€‚ï¼ˆå­—èŠ‚è·³åŠ¨æžœç„¶åä¸è™šä¼ â€¦é¢è¯•å®˜ç›¸å½“äº²åˆ‡ä¸”å–„äºŽå¾ªå¾ªå–„è¯±æ¥å¼•å¯¼æˆ‘å›žç­”é—®é¢˜ï¼‰ 1.Javaä¸­çš„å¼•ç”¨ç±»åž‹æœ‰æ²¡æœ‰ä»€ä¹ˆäº†è§£ï¼ŸJava.lang.refæ˜¯Javaç±»åº“ä¸­æ¯”è¾ƒç‰¹æ®Šçš„ä¸€ä¸ªåŒ…ï¼Œå®ƒæä¾›äº†ä¸ŽJavaåžƒåœ¾å›žæ”¶å™¨å¯†åˆ‡ç›¸å…³çš„å¼•ç”¨ç±»ã€‚ StrongReferenceï¼ˆå¼ºå¼•ç”¨ï¼‰ SoftReferenceï¼ˆè½¯å¼•ç”¨ï¼‰ WeakReferenceï¼ˆå¼±å¼•ç”¨ï¼‰ PhantomReferenceï¼ˆè™šå¼•ç”¨ï¼‰ å¼•ç”¨ç±»åž‹å¯¹æ¯” åºå· å¼•ç”¨ç±»åž‹ å–å¾—ç›®æ ‡å¯¹è±¡æ–¹å¼ åžƒåœ¾å›žæ”¶æ¡ä»¶ æ˜¯å¦å¯èƒ½å†…å­˜æ³„æ¼ 1 å¼ºå¼•ç”¨ ç›´æŽ¥è°ƒç”¨ ä¸å›žæ”¶ å¯èƒ½ 2 è½¯å¼•ç”¨ é€šè¿‡ get()æ–¹æ³• è§†å†…å­˜æƒ…å†µå›žæ”¶ ä¸å¯èƒ½ 3 å¼±å¼•ç”¨ é€šè¿‡ get()æ–¹æ³• æ°¸è¿œå›žæ”¶ ä¸å¯èƒ½ 4 è™šå¼•ç”¨ æ— æ³•å–å¾— ä¸å›žæ”¶ å¯èƒ½ 1.StrongReferenceï¼ˆå¼ºå¼•ç”¨ï¼‰å¦‚æžœä¸€ä¸ªå¯¹è±¡å…·æœ‰å¼ºå¼•ç”¨ï¼Œé‚£åžƒåœ¾å›žæ”¶å™¨ç»ä¸ä¼šå›žæ”¶å®ƒã€‚å½“å†…å­˜ç©ºé—´ä¸è¶³ï¼ŒJavaè™šæ‹Ÿæœºå®æ„¿æŠ›å‡ºOutOfMemoryErroré”™è¯¯ï¼Œä½¿ç¨‹åºå¼‚å¸¸ç»ˆæ­¢ï¼Œä¹Ÿä¸ä¼šé éšæ„å›žæ”¶å…·æœ‰å¼ºå¼•ç”¨çš„å¯¹è±¡æ¥è§£å†³å†…å­˜ä¸è¶³çš„é—®é¢˜ã€‚ ç¤ºä¾‹ 1String[] arr = new String[]&#123;"a","b","c"&#125;; 2.SoftReferenceï¼ˆè½¯å¼•ç”¨ï¼‰å¦‚æžœä¸€ä¸ªå¯¹è±¡åªå…·æœ‰è½¯å¼•ç”¨ï¼Œå¦‚æžœå†…å­˜ç©ºé—´è¶³å¤Ÿï¼Œåžƒåœ¾å›žæ”¶å™¨å°±ä¸ä¼šå›žæ”¶å®ƒï¼›å¦‚æžœå†…å­˜ç©ºé—´ä¸è¶³ï¼Œå°±ä¼šå›žæ”¶è¿™äº›å¯¹è±¡çš„å†…å­˜ã€‚åªè¦åžƒåœ¾å›žæ”¶å™¨æ²¡æœ‰å›žæ”¶å®ƒï¼Œè¯¥å¯¹è±¡å°±å¯ä»¥è¢«ç¨‹åºä½¿ç”¨ã€‚è½¯å¼•ç”¨å¯ç”¨æ¥å®žçŽ°å†…å­˜æ•æ„Ÿçš„é«˜é€Ÿç¼“å­˜ã€‚è½¯å¼•ç”¨å¯ä»¥å’Œä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ï¼Œå¦‚æžœè½¯å¼•ç”¨æ‰€å¼•ç”¨çš„å¯¹è±¡è¢«åžƒåœ¾å›žæ”¶å™¨å›žæ”¶ï¼ŒJavaè™šæ‹Ÿæœºå°±ä¼šæŠŠè¿™ä¸ªè½¯å¼•ç”¨åŠ å…¥åˆ°ä¸Žä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚ ç¤ºä¾‹123456//Example1SoftReference&lt;String[]&gt; softBean = new SoftReference&lt;String[]&gt;(new String[]&#123;"a","b","c"&#125;);//Example2ReferenceQueue&lt;String[]&gt; referenceQueue = new ReferenceQueue&lt;String[]&gt;();SoftReference&lt;String[]&gt; softBean = new SoftReference&lt;String[]&gt;(new String[]&#123;"a", "b", "c"&#125;, referenceQueue); 3.WeakReferenceï¼ˆå¼±å¼•ç”¨ï¼‰å¼±å¼•ç”¨ä¸Žè½¯å¼•ç”¨çš„åŒºåˆ«åœ¨äºŽï¼šåªå…·æœ‰å¼±å¼•ç”¨çš„å¯¹è±¡æ‹¥æœ‰æ›´çŸ­æš‚çš„ç”Ÿå‘½å‘¨æœŸã€‚åœ¨åžƒåœ¾å›žæ”¶å™¨çº¿ç¨‹æ‰«æå®ƒæ‰€ç®¡è¾–çš„å†…å­˜åŒºåŸŸçš„è¿‡ç¨‹ä¸­ï¼Œä¸€æ—¦å‘çŽ°äº†åªå…·æœ‰å¼±å¼•ç”¨çš„å¯¹è±¡ï¼Œä¸ç®¡å½“å‰å†…å­˜ç©ºé—´è¶³å¤Ÿä¸Žå¦ï¼Œéƒ½ä¼šå›žæ”¶å®ƒçš„å†…å­˜ã€‚ä¸è¿‡ï¼Œç”±äºŽåžƒåœ¾å›žæ”¶å™¨æ˜¯ä¸€ä¸ªä¼˜å…ˆçº§å¾ˆä½Žçš„çº¿ç¨‹ï¼Œå› æ­¤ä¸ä¸€å®šä¼šå¾ˆå¿«å‘çŽ°é‚£äº›åªå…·æœ‰å¼±å¼•ç”¨çš„å¯¹è±¡ã€‚ å¼±å¼•ç”¨å¯ä»¥å’Œä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ï¼Œå¦‚æžœå¼±å¼•ç”¨æ‰€å¼•ç”¨çš„å¯¹è±¡è¢«åžƒåœ¾å›žæ”¶ï¼ŒJavaè™šæ‹Ÿæœºå°±ä¼šæŠŠè¿™ä¸ªå¼±å¼•ç”¨åŠ å…¥åˆ°ä¸Žä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚ ç¤ºä¾‹12345//Example1WeakReference&lt;String[]&gt; weakBean = new WeakReference&lt;String[]&gt;(new String[]&#123;"a", "b", "c"&#125;);//Example2ReferenceQueue&lt;String[]&gt; referenceQueue = new ReferenceQueue&lt;String[]&gt;();WeakReference&lt;String[]&gt; softBean = new WeakReference&lt;String[]&gt;(new String[]&#123;"a", "b", "c"&#125;, referenceQueue); 4.PhantomReferenceï¼ˆè™šå¼•ç”¨ï¼‰â€œè™šå¼•ç”¨â€é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å½¢åŒè™šè®¾ï¼Œä¸Žå…¶ä»–å‡ ç§å¼•ç”¨éƒ½ä¸åŒï¼Œè™šå¼•ç”¨å¹¶ä¸ä¼šå†³å®šå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚å¦‚æžœä¸€ä¸ªå¯¹è±¡ä»…æŒæœ‰è™šå¼•ç”¨ï¼Œé‚£ä¹ˆå®ƒå°±å’Œæ²¡æœ‰ä»»ä½•å¼•ç”¨ä¸€æ ·ï¼Œåœ¨ä»»ä½•æ—¶å€™éƒ½å¯èƒ½è¢«åžƒåœ¾å›žæ”¶å™¨å›žæ”¶ã€‚è™šå¼•ç”¨ä¸»è¦ç”¨æ¥è·Ÿè¸ªå¯¹è±¡è¢«åžƒåœ¾å›žæ”¶å™¨å›žæ”¶çš„æ´»åŠ¨ã€‚è™šå¼•ç”¨ä¸Žè½¯å¼•ç”¨å’Œå¼±å¼•ç”¨çš„ä¸€ä¸ªåŒºåˆ«åœ¨äºŽï¼šè™šå¼•ç”¨å¿…é¡»å’Œå¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ã€‚å½“åžƒåœ¾å›žæ”¶å™¨å‡†å¤‡æ”¶ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æžœå‘çŽ°å®ƒè¿˜æœ‰è™šå¼•ç”¨ï¼Œå°±ä¼šåœ¨å›žæ”¶å¯¹è±¡çš„å†…å­˜ä¹‹å‰ï¼ŒæŠŠè¿™ä¸ªè™šå¼•ç”¨åŠ å…¥åˆ°ä¸Žä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚ ç¤ºä¾‹12ReferenceQueue&lt;String[]&gt; referenceQueue = new ReferenceQueue&lt;String[]&gt;();PhantomReference&lt;String[]&gt; referent = new PhantomReference&lt;String&gt;(new String[]&#123;"a", "b", "c"&#125;, referenceQueue); 2.Javaä¸­åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼æœ‰å“ªäº›1.ç»§æ‰¿Threadç±»åˆ›å»ºçº¿ç¨‹ç±»(1) å®šä¹‰Threadç±»çš„å­ç±»ï¼Œå¹¶é‡å†™è¯¥ç±»çš„runæ–¹æ³•ï¼Œè¯¥runæ–¹æ³•çš„æ–¹æ³•ä½“å°±ä»£è¡¨äº†çº¿ç¨‹è¦å®Œæˆçš„ä»»åŠ¡ã€‚å› æ­¤æŠŠrun()æ–¹æ³•ç§°ä¸ºæ‰§è¡Œä½“ã€‚ (2) åˆ›å»ºThreadå­ç±»çš„å®žä¾‹ï¼Œå³åˆ›å»ºäº†çº¿ç¨‹å¯¹è±¡ã€‚ (3) è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„start()æ–¹æ³•æ¥å¯ç”¨è¯¥çº¿ç¨‹ã€‚ 1234567891011121314151617public class FirstThreadTest extends Thread &#123; int i = 0; //é‡å†™runæ–¹æ³•ï¼Œrunæ–¹æ³•çš„æ–¹æ³•ä½“å°±æ˜¯çŽ°åœºæ‰§è¡Œä½“ public void run() &#123; for (; i &lt; 100; i++) &#123; System.out.println(getName() + " " + i); &#125; &#125; public static void main(String[] args) &#123; for (int i = 0; i &lt; 100; i++) &#123; System.out.println(Thread.currentThread().getName() + " : " + i); if (i == 20) &#123; new FirstThreadTest().start(); new FirstThreadTest().start(); &#125; &#125; &#125;&#125; ä¸Šè¿°ä»£ç ä¸­Thread.currentThread()æ–¹æ³•è¿”å›žå½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡ã€‚GetName() æ–¹æ³•è¿”å›žè°ƒç”¨è¯¥æ–¹æ³•çš„çº¿ç¨‹çš„åå­—ã€‚ 2.é€šè¿‡RunnableæŽ¥å£åˆ›å»ºçº¿ç¨‹ç±»ï¼ˆ1ï¼‰å®šä¹‰runnableæŽ¥å£çš„å®žçŽ°ç±»ï¼Œå¹¶é‡å†™è¯¥æŽ¥å£çš„run()æ–¹æ³•ï¼Œè¯¥run()æ–¹æ³•çš„æ–¹æ³• ä½“åŒæ ·æ˜¯è¯¥çº¿ç¨‹çš„çº¿ç¨‹æ‰§è¡Œä½“ã€‚ ï¼ˆ2ï¼‰åˆ›å»º Runnableå®žçŽ°ç±»çš„å®žä¾‹ï¼Œå¹¶ä¾æ­¤å®žä¾‹ä½œä¸ºThreadçš„targetæ¥åˆ›å»ºThread å¯¹è±¡ï¼Œè¯¥Threadå¯¹è±¡æ‰æ˜¯çœŸæ­£çš„çº¿ç¨‹å¯¹è±¡ã€‚ ï¼ˆ3ï¼‰è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„start()æ–¹æ³•æ¥å¯åŠ¨è¯¥çº¿ç¨‹ã€‚ 3.é€šè¿‡Callableå’ŒFutureåˆ›å»ºçº¿ç¨‹ï¼ˆ1ï¼‰åˆ›å»ºCallableæŽ¥å£çš„å®žçŽ°ç±»ï¼Œå¹¶å®žçŽ°call()æ–¹æ³•ï¼Œè¯¥call()æ–¹æ³•å°†ä½œä¸ºçº¿ç¨‹æ‰§è¡Œ ä½“ï¼Œå¹¶ä¸”æœ‰è¿”å›žå€¼ã€‚ ï¼ˆ2ï¼‰åˆ›å»ºCallableå®žçŽ°ç±»çš„å®žä¾‹ï¼Œä½¿ç”¨FutureTaskç±»æ¥åŒ…è£…Callableå¯¹è±¡ï¼Œè¯¥ FutureTaskå¯¹è±¡å°è£…äº†è¯¥Callableå¯¹è±¡çš„call()æ–¹æ³•çš„è¿”å›žå€¼ã€‚ ï¼ˆ3ï¼‰ä½¿ç”¨FutureTaskå¯¹è±¡ä½œä¸ºThreadå¯¹è±¡çš„targetåˆ›å»ºå¹¶å¯åŠ¨æ–°çº¿ç¨‹ã€‚ ï¼ˆ4ï¼‰è°ƒç”¨FutureTaskå¯¹è±¡çš„get()æ–¹æ³•æ¥èŽ·å¾—å­çº¿ç¨‹æ‰§è¡Œç»“æŸåŽçš„è¿”å›žå€¼ï¼Œè°ƒç”¨ get()æ–¹æ³•ä¼šé˜»å¡žçº¿ç¨‹ã€‚ åˆ›å»ºçº¿ç¨‹çš„ä¸‰ç§æ–¹å¼çš„å¯¹æ¯”é‡‡ç”¨å®žçŽ°Runnableã€CallableæŽ¥å£çš„æ–¹å¼åˆ›è§å¤šçº¿ç¨‹æ—¶ï¼Œä¼˜åŠ¿æ˜¯ï¼š çº¿ç¨‹ç±»åªæ˜¯å®žçŽ°äº†RunnableæŽ¥å£æˆ–CallableæŽ¥å£ï¼Œè¿˜å¯ä»¥ç»§æ‰¿å…¶ä»–ç±»ã€‚ åœ¨è¿™ç§æ–¹å¼ä¸‹ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥å…±äº«åŒä¸€ä¸ªtargetå¯¹è±¡ï¼Œæ‰€ä»¥éžå¸¸é€‚åˆå¤šä¸ªç›¸åŒçº¿ç¨‹ æ¥å¤„ç†åŒä¸€ä»½èµ„æºçš„æƒ…å†µï¼Œä»Žè€Œå¯ä»¥å°†CPUã€ä»£ç å’Œæ•°æ®åˆ†å¼€ï¼Œå½¢æˆæ¸…æ™°çš„æ¨¡åž‹ï¼Œ è¾ƒå¥½åœ°ä½“çŽ°äº†é¢å‘å¯¹è±¡çš„æ€æƒ³ã€‚ åŠ£åŠ¿æ˜¯ï¼š ç¼–ç¨‹ç¨å¾®å¤æ‚ï¼Œå¦‚æžœè¦è®¿é—®å½“å‰çº¿ç¨‹ï¼Œåˆ™å¿…é¡»ä½¿ç”¨Thread.currentThread()æ–¹æ³•ã€‚ ä½¿ç”¨ç»§æ‰¿Threadç±»çš„æ–¹å¼åˆ›å»ºå¤šçº¿ç¨‹æ—¶ä¼˜åŠ¿æ˜¯ï¼š ç¼–å†™ç®€å•ï¼Œå¦‚æžœéœ€è¦è®¿é—®å½“å‰çº¿ç¨‹ï¼Œåˆ™æ— éœ€ä½¿ç”¨Thread.currentThread()æ–¹æ³•ï¼Œç›´æŽ¥ ä½¿ç”¨thiså³å¯èŽ·å¾—å½“å‰çº¿ç¨‹ã€‚ åŠ£åŠ¿æ˜¯ï¼š çº¿ç¨‹ç±»å·²ç»ç»§æ‰¿äº†Threadç±»ï¼Œæ‰€ä»¥ä¸èƒ½å†ç»§æ‰¿å…¶ä»–çˆ¶ç±»ã€‚ 3.Objectç±»å¯¹è±¡å«æœ‰çš„æ–¹æ³•æœ‰å“ªäº›ï¼ŸJavaä¸­çš„Objectç±»æ˜¯æ‰€æœ‰ç±»çš„çˆ¶ç±»ï¼Œå®ƒæä¾›äº†ä»¥ä¸‹11ä¸ªæ–¹æ³•ï¼š 1.public final native Class&lt;?&gt;getClass() 2.public native int hashCode() 3.public boolean equals(Object obj) 4.protected native Object clone() throws CloneNotSupportedException 5.public String toString() 6.public final native void notify() 7.public final native void notifyAll() 8.public final native void wait(long timeout) throws InterruptedException 9.public final void wait(long timeout,int nanos)throws InterruptedException 10.public final void wait() throws InterruptedException 11.protected void finalize() throws Throwable{} 4.Androidä¸­çš„è¿›ç¨‹é—´é€šä¿¡æœ‰å“ªäº›æ–¹å¼ï¼Ÿå…·ä½“è¯´è¯´BinderAndroidä¸­çš„IPCæ–¹å¼ ä½¿ç”¨Intent ä½¿ç”¨æ–‡ä»¶å…±äº« ä½¿ç”¨Messenger ä½¿ç”¨AIDL ä½¿ç”¨ContentProvider ä½¿ç”¨Socket 1.ä½¿ç”¨Intent1.Activityï¼ŒServiceï¼ŒReceiveréƒ½æ”¯æŒåœ¨Intentä¸­ä¼ é€’Bundleæ•°æ®ï¼Œè€ŒBundleå®žçŽ°äº†ParcelableæŽ¥å£ï¼Œå¯ä»¥åœ¨ä¸åŒçš„è¿›ç¨‹é—´è¿›è¡Œä¼ è¾“ã€‚2.åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­å¯åŠ¨äº†å¦ä¸€ä¸ªè¿›ç¨‹çš„Activityï¼ŒServiceå’ŒReceiverï¼Œå¯ä»¥åœ¨Bundleä¸­é™„åŠ è¦ä¼ é€’çš„æ•°æ®é€šè¿‡Intentå‘é€å‡ºåŽ»ã€‚2.ä½¿ç”¨æ–‡ä»¶å…±äº«1.Windowsä¸Šï¼Œä¸€ä¸ªæ–‡ä»¶å¦‚æžœè¢«åŠ äº†æŽ’æ–¥é”ä¼šå¯¼è‡´å…¶ä»–çº¿ç¨‹æ— æ³•å¯¹å…¶è¿›è¡Œè®¿é—®ï¼ŒåŒ…æ‹¬è¯»å’Œå†™ï¼›è€ŒAndroidç³»ç»ŸåŸºäºŽLinuxï¼Œä½¿å¾—å…¶å¹¶å‘è¯»å–æ–‡ä»¶æ²¡æœ‰é™åˆ¶åœ°è¿›è¡Œï¼Œç”šè‡³å…è®¸ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œï¼Œalthough this may be a problem.2.å¯ä»¥åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­åºåˆ—åŒ–ä¸€ä¸ªå¯¹è±¡åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œåœ¨å¦ä¸€ä¸ªè¿›ç¨‹ä¸­ååºåˆ—åŒ–æ¢å¤è¿™ä¸ªå¯¹è±¡ï¼ˆAttentionï¼šå¹¶ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œåªæ˜¯å†…å®¹ç›¸åŒï¼‰3.SharePreferenceæ˜¯ä¸ªç‰¹ä¾‹ï¼Œç³»ç»Ÿå¯¹å®ƒçš„è¯»/å†™æœ‰ä¸€å®šçš„ç¼“å­˜ç­–ç•¥ï¼Œå³å†…å­˜ä¸­ä¼šæœ‰ä¸€ä»½SharePreferencesæ–‡ä»¶çš„ç¼“å­˜ï¼Œç³»ç»Ÿå¯¹å®ƒçš„è¯»/å†™å°±å˜å¾—ä¸å¯é ï¼Œå½“é¢å¯¹é«˜å¹¶å‘çš„è¯»å†™è®¿é—®ï¼ŒSharePreferencesæœ‰å¾ˆå¤§çš„å‡ çŽ‡ä¸¢å¤±æ•°æ®ã€‚å› æ­¤ï¼ŒIPCä¸å»ºè®®é‡‡ç”¨SharePreferencesã€‚3.ä½¿ç”¨MessengerMessengeræ˜¯ä¸€ç§è½»é‡çº§çš„IPCæ–¹æ¡ˆï¼Œå®ƒçš„åº•å±‚å®žçŽ°æ˜¯AIDLï¼Œå¯ä»¥åœ¨ä¸åŒè¿›ç¨‹ä¸­ä¼ é€’Messageå¯¹è±¡ï¼Œå®ƒä¸€æ¬¡åªå¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼Œåœ¨æœåŠ¡ç«¯ä¸éœ€è¦è€ƒè™‘çº¿ç¨‹åŒæ­¥çš„é—®é¢˜ï¼ŒæœåŠ¡ç«¯ä¸å­˜åœ¨å¹¶å‘æ‰§è¡Œçš„æƒ…å½¢ æœåŠ¡ç«¯è¿›ç¨‹ï¼šæœåŠ¡ç«¯åˆ›å»ºä¸€ä¸ªServiceæ¥å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ï¼ŒåŒæ—¶é€šè¿‡ä¸€ä¸ªHandlerå¯¹è±¡æ¥å®žä¾‹åŒ–ä¸€ä¸ªMeaaengerå¯¹è±¡ï¼Œç„¶åŽåœ¨Serviveçš„onBindä¸­è¿”å›žè¿™ä¸ªMessengerå¯¹è±¡åº•å±‚çš„Binderå³å¯ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940public class MessengerSercive extends Service&#123; private static final String TAG = MessengerSercive.class.getSimpleName(); private class MessengerHandler extends Handler&#123; /** * @param msg */ @Override public void handleMessage(Message msg)&#123; switch (msg.what) &#123; case Constants.MSG_FROM_CLIENT: Log.d(TAG, "receive msg from client: msg = [" + msg.getData().getString(Constants.MSG_KEY) + "]"); Toast.makeText(MessengerService.this, "receive msg from client: msg = [" + msg.getData().getString(Constants.MSG_KEY) + "]", Toast.LENGTH_SHORT).show(); Messenger client = msg.replyTo; Message replyMsg = Message.obtain(null, Constants.MSG_FROM_SERVICE); Bundle bundle = new Bundle(); bundle.putString(Constants.MSG_KEY, "æˆ‘å·²ç»æ”¶åˆ°ä½ çš„æ¶ˆæ¯ï¼Œç¨åŽå›žå¤ä½ ï¼"); replyMsg.setData(bundle); try &#123; client.send(replyMsg); &#125; catch (RemoteException e) &#123; e.printStackTrace(); &#125; break; default: super.handleMessage(msg); &#125; &#125; &#125; private Messenger mMessenger = new Messenger(new MessengerHandler()); @Nullable @Override public IBinder onBind(Intent intent)&#123; return mMessenger.getBinder(); &#125;&#125; å®¢æˆ·ç«¯è¿›ç¨‹ï¼šé¦–å…ˆç»‘å®šæœåŠ¡ç«¯Serviceï¼Œç»‘å®šæˆåŠŸä¹‹åŽç”¨æœåŠ¡ç«¯çš„IBinderå¯¹è±¡åˆ›å»ºä¸€ä¸ªMessengerï¼Œé€šè¿‡è¿™ä¸ªMessengerå°±å¯ä»¥å‘æœåŠ¡ç«¯å‘é€æ¶ˆæ¯äº†ï¼Œæ¶ˆæ¯ç±»åž‹æ˜¯Messageã€‚å¦‚æžœéœ€è¦æœåŠ¡ç«¯å“åº”ï¼Œåˆ™éœ€è¦åˆ›å»ºä¸€ä¸ªHandlerå¹¶é€šè¿‡å®ƒæ¥åˆ›å»ºä¸€ä¸ªMessengerï¼ˆå’ŒæœåŠ¡ç«¯ä¸€æ ·ï¼‰ï¼Œå¹¶é€šè¿‡Messageçš„replyToå‚æ•°ä¼ é€’ç»™æœåŠ¡ç«¯ã€‚æœåŠ¡ç«¯é€šè¿‡Messageçš„replyToå‚æ•°å°±å¯ä»¥å›žåº”å®¢æˆ·ç«¯äº†ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172public class MainActivity extends AppCompatActivity&#123; private static final String TAG = MainActivity.class.getSimpleName(); private Messenger mGetReplyMessenger = new Messenger(new MessageHandler()); private Messenger mService; private class MessageHandler extends Handler&#123; @Override public void handleMessage(Message msg)&#123; switch(msg.what)&#123; case Constants.MSG_FROM_SERVICE: Log.d(TAG, "received msg form service: msg = [" + msg.getData().getString(Constants.MSG_KEY) + "]"); Toast.makeText(MainActivity.this, "received vice: msg = [" + msg.getData().getString(Constants.MSG_KEY) + "]", Toast.LENGTH_SHORT).show(); break; default: super.handleMessage(msg); &#125; &#125; &#125; @Override protected void onCreate(Bundle savedInsttanceState)&#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); &#125; public void bindService(View v)&#123; Intent mIntent = new Intent(thia,MessengerService.class); bindService(mIntent, mServiceConnection, Context.BIND_AUTO_CREATE); &#125; public void sendMessage(View v)&#123; Message msg = Message.obtain(null,Constants.MSG_FROM_CLIENT); Bundle data = new Bunle(); data.putString(Constants.MSG_KEY, "Hello! This is client."); msg.setData(data); msg.replyTo = mGetReplyMessenger; try&#123; mService.send(mag); &#125;catch(RemoteException e)&#123; e.printStackTrace(); &#125; &#125; @Override protected void onDestroy()&#123; unbindService(mServiceConnection); super.onDestroy(); &#125; private ServiceConnection mServiceConnection = new ServiceConnection()&#123; /** * @param name * @param service */ @Override public void onServiceConnected(ComponentName name, IBinder service)&#123; mService = new Messenger(service); Message msg = Message.obtain(null, Constants.MSG_FROM_CLIENT); Bundle data = new Bundle(); data.putString(Constants.MSG_KEY,"Hello! This is cient."); msg.setData(data); mag.replyTo = mGetReplyMessenger; try&#123; mService.send(msg); &#125;catch(RemoteException e)&#123; e.printStackTrace(); &#125; &#125; /** * @param name */ @Override public void onServiceDiscommected(ComponentName name)&#123; &#125; &#125;;&#125; æ³¨æ„ï¼š å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ˜¯é€šè¿‡é€šè¿‡æ‹¿åˆ°å¯¹æ–¹çš„Messengeræ¥å‘é€Messageçš„ã€‚åªä¸è¿‡å®¢æˆ·ç«¯é€šè¿‡bindService onServiceConnectedè€ŒæœåŠ¡ç«¯é€šè¿‡message.replyToæ¥èŽ·å¾—å¯¹æ–¹çš„Messengerã€‚Messengerä¸­æœ‰ä¸€ä¸ªHanlderä»¥ä¸²è¡Œçš„æ–¹å¼å¤„ç†é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ã€‚ä¸å­˜åœ¨å¹¶å‘æ‰§è¡Œï¼Œå› æ­¤æˆ‘ä»¬ä¸è€ƒè™‘çº¿ç¨‹åŒæ­¥çš„é—®é¢˜ã€‚ 4.ä½¿ç”¨AIDLMessengeræ˜¯ä»¥ä¸²è¡Œçš„æ–¹å¼å¤„ç†å®¢æˆ·ç«¯å‘æ¥çš„æ¶ˆæ¯ï¼Œå¦‚æžœå¤§é‡æ¶ˆæ¯åŒæ—¶å‘é€åˆ°æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯åªèƒ½ä¸€ä¸ªä¸€ä¸ªå¤„ç†ï¼Œæ‰€ä»¥å¤§é‡å¹¶å‘è¯·æ±‚å°±ä¸é€‚åˆç”¨Messengerï¼Œè€Œä¸”Messengeråªé€‚åˆä¼ é€’æ¶ˆæ¯ï¼Œä¸èƒ½è·¨è¿›ç¨‹è°ƒç”¨æ–¹æ³•çš„é—®é¢˜ï¼Œè¦çŸ¥é“Messengeræœ¬è´¨ä¸Šä¹Ÿæ˜¯AIDLï¼Œåªä¸è¿‡ç³»ç»Ÿåšäº†å°è£…æ–¹ä¾¿ä¸Šå±‚çš„è°ƒç”¨è€Œå·²ã€‚ AIDLæ–‡ä»¶æ”¯æŒçš„æ•°æ®ç±»åž‹ åŸºæœ¬æ•°æ®ç±»åž‹ï¼› Stringå’ŒCharSequenceï¼› ArrayListï¼Œé‡Œé¢çš„å…ƒç´ å¿…é¡»èƒ½å¤Ÿè¢«AIDLæ”¯æŒï¼› HashMapï¼Œå®žçŽ°ParcelableæŽ¥å£çš„å¯¹è±¡ï¼›æ³¨æ„ï¼šå¦‚æžœAIDLæ–‡ä»¶ä¸­ç”¨åˆ°äº†è‡ªå®šä¹‰çš„Parcelableå¯¹è±¡ï¼Œå¿…é¡»æ–°å»ºä¸€ä¸ªå’Œå®ƒåŒåçš„AIDLæ–‡ä»¶ã€‚ AIDLï¼ŒAIDLæŽ¥å£æœ¬èº«ä¹Ÿå¯ä»¥åœ¨AIDLæ–‡ä»¶ä¸­ä½¿ç”¨ã€‚æœåŠ¡ç«¯æœåŠ¡ç«¯åˆ›å»ºä¸€ä¸ªServiceç”¨æ¥ç›‘å¬å®¢æˆ·ç«¯çš„è¿žæŽ¥è¯·æ±‚ï¼Œç„¶åŽåˆ›å»ºä¸€ä¸ªAIDLæ–‡ä»¶ï¼Œå°†æš´éœ²ç»™å®¢æˆ·ç«¯çš„æŽ¥å£åœ¨è¿™ä¸ªAIDLæ–‡ä»¶ä¸­å£°æ˜Žï¼Œæœ€åŽåœ¨Serviceä¸­å®žçŽ°è¿™ä¸ªAIDLæŽ¥å£å³å¯ã€‚å®¢æˆ·ç«¯ç»‘å®šæœåŠ¡ç«¯çš„Serviceï¼Œç»‘å®šæˆåŠŸåŽï¼Œå°†æœåŠ¡ç«¯è¿”å›žçš„Binderå¯¹è±¡è½¬æˆAIDLæŽ¥å£æ‰€å±žçš„ç±»åž‹ï¼Œç„¶åŽå°±å¯ä»¥è°ƒç”¨AIDLä¸­çš„æ–¹æ³•äº†ã€‚å®¢æˆ·ç«¯è°ƒç”¨è¿œç¨‹æœåŠ¡çš„æ–¹æ³•ï¼Œè¢«è°ƒç”¨çš„æ–¹æ³•è¿è¡Œåœ¨æœåŠ¡ç«¯çš„Binderçº¿ç¨‹æ± ä¸­ï¼ŒåŒæ—¶å®¢æˆ·ç«¯çš„çº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼Œå¦‚æžœæœåŠ¡ç«¯æ–¹æ³•æ‰§è¡Œæ¯”è¾ƒè€—æ—¶ï¼Œå°±ä¼šå¯¼è‡´å®¢æˆ·ç«¯çº¿ç¨‹é•¿æ—¶é—´é˜»å¡žï¼Œå¯¼è‡´ANRã€‚å®¢æˆ·ç«¯çš„onServiceConnectedå’ŒonServiceDisconnectedæ–¹æ³•éƒ½åœ¨UIçº¿ç¨‹ä¸­ã€‚ 5.Androidä¸­çš„AsyncTaskçš„ä½œç”¨ï¼Ÿ6.Androidä¸­çš„æ¶ˆæ¯æœºåˆ¶ï¼Ÿ7.Androidä¸­çš„äº‹ä»¶åˆ†å‘æœºåˆ¶äº†è§£å¤šå°‘ï¼Ÿå¦‚ä½•è§£å†³æ»‘åŠ¨å†²çª8.Javaä¸­çš„æŠ½è±¡ç±»å’ŒæŽ¥å£çš„åŒºåˆ«ï¼Ÿç†è§£æŠ½è±¡abstract class å’Œ interface æ˜¯Javaè¯­è¨€ä¸­å¯¹äºŽæŠ½è±¡ç±»å®šä¹‰è¿›è¡Œæ”¯æŒçš„ä¸¤ç§æœºåˆ¶ï¼Œæ­£æ˜¯ç”±äºŽè¿™ä¸¤ç§æœºåˆ¶çš„å­˜åœ¨ï¼Œæ‰èµ‹äºˆäº†Javaå¼ºå¤§çš„é¢å‘å¯¹è±¡èƒ½åŠ›ã€‚abstract calsså’Œinterfaceä¹‹é—´å¯¹äºŽæŠ½è±¡ç±»å®šä¹‰çš„æ”¯æŒæ–¹é¢å…·æœ‰å¾ˆå¤§çš„ç›¸ä¼¼æ€§ï¼Œç”šè‡³å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œå› æ­¤å¾ˆå¤šå¼€å‘è€…åœ¨è¿›è¡ŒæŠ½è±¡ç±»å®šä¹‰æ—¶å¯¹äºŽabstract classå’Œinterfaceçš„é€‰æ‹©æ˜¾å¾—æ¯”è¾ƒéšæ„ã€‚ å…¶å®žï¼Œä¸¤è€…ä¹‹é—´è¿˜æ˜¯æœ‰å¾ˆå¤§åŒºåˆ«çš„ï¼Œå¯¹äºŽå®ƒä»¬çš„é€‰æ‹©ç”šè‡³åæ˜ å‡ºå¯¹äºŽé—®é¢˜é¢†åŸŸæœ¬è´¨çš„ç†è§£ã€å¯¹äºŽè®¾è®¡æ„å›¾çš„ç†è§£æ˜¯å¦æ­£ç¡®ã€åˆç†ã€‚ è¯­æ³•å®šä¹‰ç†è§£1.æŠ½è±¡ç±»12345abstract class Demo&#123; abstract void method1(); abstract void method2(); ...&#125; 2.æŽ¥å£12345interface Demo&#123; void method1(); void method2(); ...&#125; åœ¨abstract classæ–¹å¼ä¸­ï¼ŒDemoå¯ä»¥æœ‰è‡ªå·±çš„æ•°æ®æˆå‘˜ï¼Œä¹Ÿå¯ä»¥æœ‰éžabstarctçš„æˆå‘˜æ–¹æ³•ï¼Œè€Œåœ¨interfaceæ–¹å¼çš„å®žçŽ°ä¸­ï¼ŒDemoåªèƒ½å¤Ÿæœ‰é™æ€çš„ä¸èƒ½è¢«ä¿®é¥°çš„æ•°æ®æˆå‘˜ï¼ˆä¹Ÿå°±æ˜¯å¿…é¡»æ˜¯static finalçš„ï¼Œä¸è¿‡åœ¨interfaceä¸­ä¸€èˆ¬ä¸å®šä¹‰æ•°æ®æˆå‘˜ï¼‰ï¼Œæ‰€æœ‰çš„æˆå‘˜æ–¹æ³•éƒ½æ˜¯abstractçš„ã€‚ä»ŽæŸç§æ„ä¹‰ä¸Šè¯´ï¼Œinterfaceæ˜¯ä¸€ç§ç‰¹æ®Šå½¢å¼çš„abstract calssã€‚ ç¼–ç¨‹è§’åº¦ç†è§£é¦–å…ˆï¼Œabstract classåœ¨Javaè¯­è¨€ä¸­è¡¨ç¤ºçš„æ˜¯ä¸€ç§ç»§æ‰¿å…³ç³»ï¼Œä¸€ä¸ªç±»åªèƒ½ä½¿ç”¨ä¸€æ¬¡ç»§æ‰¿å…³ç³»ã€‚ä½†æ˜¯ï¼Œä¸€ä¸ªç±»å´å¯ä»¥å®žçŽ°å¤šä¸ªinterfaceã€‚ä¹Ÿè®¸ï¼Œè¿™æ˜¯Javaè¯­è¨€çš„è®¾è®¡è€…åœ¨è€ƒè™‘Javaå¯¹äºŽå¤šç»§æ‰¿çš„æ”¯æŒæ–¹é¢çš„ä¸€ç§æŠ˜ä¸­è€ƒè™‘å§ã€‚ å…¶æ¬¡ï¼Œåœ¨abstract classçš„å®šä¹‰ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥èµ‹äºˆæ–¹æ³•çš„é»˜è®¤è¡Œä¸ºã€‚ ä½†æ˜¯åœ¨interfaceçš„å®šä¹‰ä¸­ï¼Œæ–¹æ³•å´ä¸èƒ½æ‹¥æœ‰é»˜è®¤è¡Œä¸ºï¼Œä¸è¿‡åœ¨JDK1.8ä¸­å¯ä»¥ä½¿ç”¨defaultå…³é”®å­—å®žçŽ°é»˜è®¤æ–¹æ³•ã€‚12345interface InterfaceA&#123; default void foo()&#123; System.out.println("InterfaceA foo"); &#125;&#125; åœ¨ Java 8 ä¹‹å‰ï¼ŒæŽ¥å£ä¸Žå…¶å®žçŽ°ç±»ä¹‹é—´çš„è€¦åˆåº¦å¤ªé«˜äº†ï¼ˆtightly coupledï¼‰ï¼Œå½“éœ€è¦ä¸ºä¸€ä¸ªæŽ¥å£æ·»åŠ æ–¹æ³•æ—¶ï¼Œæ‰€æœ‰çš„å®žçŽ°ç±»éƒ½å¿…é¡»éšä¹‹ä¿®æ”¹ã€‚é»˜è®¤æ–¹æ³•è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå®ƒå¯ä»¥ä¸ºæŽ¥å£æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œè€Œä¸ä¼šç ´åå·²æœ‰çš„æŽ¥å£çš„å®žçŽ°ã€‚è¿™åœ¨lambdaè¡¨è¾¾å¼ä½œä¸ºJava8è¯­è¨€çš„é‡è¦ç‰¹æ€§è€Œå‡ºçŽ°ä¹‹é™…ï¼Œä¸ºå‡çº§æ—§æŽ¥å£ä¸”ä¿æŒå‘åŽå…¼å®¹ï¼ˆbackward compatibilityï¼‰æä¾›äº†é€”å¾„ã€‚ ä¸€èˆ¬æ€§ç†è§£æŽ¥å£å’ŒæŠ½è±¡ç±»çš„æ¦‚å¿µä¸ä¸€æ ·ã€‚æŽ¥å£æ˜¯å¯¹åŠ¨ä½œçš„æŠ½è±¡ï¼ŒæŠ½è±¡ç±»æ˜¯å¯¹æ ¹æºçš„æŠ½è±¡ã€‚ä»Žè®¾è®¡ç†å¿µä¸Šï¼ŒæŽ¥å£åæ˜ çš„æ˜¯â€œlike-aâ€å…³ç³»ï¼ŒæŠ½è±¡ç±»åæ˜ çš„æ˜¯â€œis-aâ€å…³ç³»ã€‚æŠ½è±¡ç±»è¡¨ç¤ºçš„æ˜¯ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯ä»€ä¹ˆã€‚æŽ¥å£è¡¨ç¤ºçš„æ˜¯ï¼Œè¿™ä¸ªå¯¹è±¡èƒ½åšä»€ä¹ˆã€‚æ¯”å¦‚ï¼Œç”·äººï¼Œå¥³äººï¼Œè¿™ä¸¤ä¸ªç±»ï¼ˆif they are classï¼‰ï¼Œä»–ä»¬çš„æŠ½è±¡ç±»æ˜¯äººã€‚è¯´æ˜Žï¼Œä»–ä»¬éƒ½æ˜¯äººã€‚äººå¯ä»¥åƒä¸œè¥¿ï¼Œç‹—ä¹Ÿå¯ä»¥åƒä¸œè¥¿ï¼Œä½ å¯ä»¥æŠŠâ€œåƒä¸œè¥¿â€å®šä¹‰æˆä¸€ä¸ªæŽ¥å£ï¼Œç„¶åŽè®©è¿™äº›ç±»åŽ»å®žçŽ°å®ƒï¼Œæ‰€ä»¥ï¼Œåœ¨é«˜çº§è¯­è¨€ä¸Šï¼Œä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªç±»ï¼ˆæŠ½è±¡ç±»ï¼‰ï¼ˆæ­£å¦‚äººä¸å¯èƒ½åŒæ—¶æ˜¯ç”Ÿç‰©å’Œéžç”Ÿç‰©ï¼‰ï¼Œä½†æ˜¯å¯ä»¥å®žçŽ°å¤šä¸ªæŽ¥å£ï¼ˆåƒé¥­æŽ¥å£ã€èµ°è·¯æŽ¥å£ï¼‰ã€‚ æ€»ç»“1.æŠ½è±¡ç±»å’ŒæŽ¥å£éƒ½ä¸èƒ½ç›´æŽ¥å®žä¾‹åŒ–ï¼Œå¦‚æžœè¦å®žä¾‹åŒ–ï¼ŒæŠ½è±¡ç±»å˜é‡å¿…é¡»æŒ‡å‘å®žçŽ°æ‰€æœ‰æŠ½è±¡æ–¹æ³•çš„å­ç±»å¯¹è±¡ï¼ŒæŽ¥å£å˜é‡å¿…é¡»æŒ‡å‘å®žçŽ°æ‰€æœ‰æŽ¥å£æ–¹æ³•çš„ç±»å¯¹è±¡ã€‚ 2.æŠ½è±¡ç±»è¦è¢«å­ç±»ç»§æ‰¿ï¼ŒæŽ¥å£è¦è¢«ç±»å®žçŽ°ã€‚ 3.æŽ¥å£é‡Œå®šä¹‰çš„å˜é‡åªèƒ½æ˜¯å…¬å…±çš„é™æ€çš„å¸¸é‡ï¼ŒæŠ½è±¡ç±»ä¸­çš„å˜é‡æ˜¯æ™®é€šå˜é‡ã€‚ 4.æŠ½è±¡ç±»é‡Œå¯ä»¥æ²¡æœ‰æŠ½è±¡æ–¹æ³•ã€‚ 5.æŽ¥å£å¯ä»¥è¢«ç±»å¤šå®žçŽ°ï¼ˆè¢«å…¶ä»–æŽ¥å£å¤šç»§æ‰¿ï¼‰ï¼ŒæŠ½è±¡ç±»åªèƒ½è¢«å•ç»§æ‰¿ã€‚ 6.æŽ¥å£ä¸­æ²¡æœ‰ this æŒ‡é’ˆï¼Œæ²¡æœ‰æž„é€ å‡½æ•°ï¼Œä¸èƒ½æ‹¥æœ‰å®žä¾‹å­—æ®µï¼ˆå®žä¾‹å˜é‡ï¼‰æˆ–å®žä¾‹æ–¹æ³•ã€‚ 7.æŠ½è±¡ç±»ä¸èƒ½åœ¨Java 8çš„ lambda è¡¨è¾¾å¼ä¸­ä½¿ç”¨ã€‚ 9.Javaè®¾è®¡æ¨¡å¼äº†è§£å¤šå°‘ï¼Ÿè§‚å¯Ÿè€…æ¨¡å¼åœ¨å“ªé‡Œä½¿ç”¨è¿‡ï¼Ÿ10.æœ‰æ²¡æœ‰ç”¨è¿‡MVC\MVP\MVVMï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸMVPæ˜¯å¦‚ä½•ä½¿modelä¸Žviewè¿›è¡Œäº’é€šçš„ï¼Ÿ]]></content>
      <tags>
        <tag>Interview</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ·±åº¦å­¦ä¹ æ¨¡åž‹çš„è½¬æ¢ [å­¦ä¹ &è½¬è½½]]]></title>
    <url>%2F2019%2F01%2F26%2F%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2%2F</url>
    <content type="text"><![CDATA[ç”±äºŽå„ç§æ·±åº¦å­¦ä¹ æ¡†æž¶çš„å±‚å‡ºä¸ç©·ï¼Œæˆ‘ä»¬åœ¨è¿›è¡Œç®—æ³•å¼€å‘åˆ°ç®—æ³•éƒ¨ç½²çš„è¿‡ç¨‹ä¸­ï¼Œå¾€å¾€éƒ½éœ€è¦ç”¨åˆ°ä¸åŒçš„æ¡†æž¶ã€‚ä¾‹å¦‚æˆ‘ä»¬å¾ˆæœ‰å¯èƒ½ä½¿ç”¨tensorflow,pytorchç­‰è¿›è¡Œç®—æ³•å¼€å‘å’Œè°ƒè¯•ï¼Œåœ¨æ—©æœŸå·¥ç¨‹inferenceçš„æ—¶å€™æˆ‘ä»¬å¾€å¾€ä½¿ç”¨è¾ƒä¸ºè½»é‡çš„caffeæˆ–è€…é­”æ”¹åŽçš„caffeã€‚åˆ°äº†ç§»åŠ¨ç«¯éƒ¨ç½²æˆ‘ä»¬å¯èƒ½ä¼šä½¿ç”¨feather CNN nihuiçš„NCNNæˆ–è€…å°ç±³çš„maceç­‰æ¡†æž¶ã€‚facebook ONNXçš„å‡ºçŽ°ä¸ºæ¨¡åž‹çš„è½¬æ¢æä¾›äº†ä¸€ç§æ€è·¯ï¼Œä½†é™¤äº†pytorchç­‰æ¡†æž¶èƒ½å¾ˆå¥½çš„æ”¯æŒONNXã€‚å…¶ä»–ç­‰æ¡†æž¶å¹¶æœªå¾ˆå¥½çš„å¯¹æŽ¥ONNXã€‚åœ¨MMdnnå‡ºçŽ°ä¹‹å‰ï¼Œå¤§å®¶éƒ½æŠŠcaffemodelä½œä¸ºä¸€ä¸ªä¸­é—´ä½“æ¥è¿›è¡Œè½¬æ¢ã€‚ å…¶å®žå°±æ¨¡åž‹è½¬æ¢è€Œè¨€åªæ˜¯ä¸ªå¡«å‚æ•°çš„è¿‡ç¨‹ï¼ŒæŠŠæ¨¡åž‹ç»“æž„æ­å¥½ï¼ŒæŠŠå‚æ•°å¡«è¿›åŽ»å°±å³å¯ï¼Œä½†æ˜¯å®žè·µè¿‡çš„æœ‹å‹å¤§å®¶ä¸€å®šä¼šçŸ¥é“è¿™å…¶ä¸­å­˜åœ¨ä¸å°‘å‘ï¼Œä½†æ˜¯æˆ‘ä»¬æ›´å¸Œæœ›æœ‰ä¸€ç§è‡ªåŠ¨åŒ–çš„æ¨¡åž‹è½¬æ¢æ–¹æ¡ˆæ¥è¿›è¡Œæ¨¡åž‹è½¬æ¢ã€‚ MMdnnçš„å‡ºçŽ°ä¸ºæ¨¡åž‹è½¬æ¢å¸¦æ¥äº†ä¸å°‘çš„ç¦éŸ³ï¼ŒMMdnnæä¾›äº†ä¸€ç§IR(ä¸­é—´è¡¨ç¤º)æ¥æ¥è¡”æŽ¥å„ä¸ªæ¨¡åž‹ä¹‹é—´çš„è½¬æ¢ã€‚ä»–å›Šæ‹¬å¹¶æ”¯æŒäº†ä¸»æµçš„DNNæ¡†æž¶ã€‚ ä¸‹é¢æˆ‘å°±ç®€è¦è®²ä¸€ä¸‹å‡ ä¸ªçš„ç®€å•æ¨¡åž‹è½¬æ¢ åœ¨æ­¤æˆ‘æŽ¨èä¸€ä¸ªæŸ¥çœ‹æ¨¡åž‹ç»“æž„çš„å·¥å…·Netron æ”¯æŒæ•°ç§ä¸»æµæ·±åº¦å­¦ä¹ æ¡†æž¶(Caffe,Tensorflow,ONNXç­‰)çš„æ¨¡åž‹ç»“æž„æŸ¥çœ‹ã€‚ ä¾‹å¦‚ä¸‹å›¾æ˜¯MTCNN Pnetçš„æ¨¡åž‹ç»“æž„å›¾ MMdnnçš„å®‰è£…MMdnnçš„å®‰è£…éžå¸¸ç®€å• 1pip install mmdnn è½¬æ¢ä¸­çš„ä¸€äº›å‘1.å¹¶ä¸æ˜¯æ‰€æœ‰Layerå’Œæ‰€æœ‰ç½‘ç»œéƒ½æ”¯æŒè½¬æ¢ç”±äºŽå„ä¸ªæ·±åº¦å­¦ä¹ æ¡†æž¶ä¹‹é—´çš„è®¾è®¡æ¨¡å¼ä¸åŒæœ‰çš„æ˜¯åŸºäºŽå‘½ä»¤å¼çš„æœ‰çš„æ˜¯åŸºäºŽç¬¦å·å½¢å¼çš„ã€‚å„ä¸ªæ¡†æž¶ä¹‹é—´çš„opçš„ç²’åº¦ä¸åŒï¼Œåˆç”±äºŽæ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€çš„æ ‡å‡†ï¼Œæ”¯æŒæ‰€æœ‰æ¡†æž¶ä¹‹é—´çš„è½¬æ¢æ˜¯ä¸€ä»¶éžå¸¸éš¾çš„äº‹æƒ…ã€‚MMdnnä¹Ÿåªæ˜¯æŠŠä¸€äº›æä¾›çš„å¸¸ç”¨çš„opï¼Œå¦‚conv,poolingç­‰å¸¸è§„opã€‚ 2.Tensorflowä¸Žcaffeçš„paddingæ–¹å¼å¹¶ä¸ç›¸åŒè¿™ä¸ªé—®é¢˜ä¼šå‡ºçŽ°åœ¨MobileNetåœ¨è½¬æ¢çš„è¿‡ç¨‹ä¸­ï¼Œå› ä¸ºTensorflowçš„paddingæ–¹å¼å’Œå…¶ä»–æ¡†æž¶æ˜¯ä¸åŒçš„ã€‚Tensorflowæ ‡å‡†çš„å·ç§¯æ“ä½œé€šå¸¸é‡‡ç”¨éžå¯¹ç§°çš„paddingï¼Œè€Œcaffeç­‰å…¶ä»–æ¡†æž¶çš„å·ç§¯æ“ä½œåˆ™æ˜¯é‡‡ç”¨å¯¹ç§°çš„paddingã€‚ å¦‚ä¸‹å›¾ ï¼Œæ¯”å¦‚å½“ å·ç§¯æ ¸çš„å¤§å°ä¸º3x3 strideä¸º2çš„æ—¶å€™ã€‚å°½ç®¡ä»–ä»¬çš„paddingæ–¹å¼ä¸åŒï¼Œä½†å·ç§¯ä¹‹åŽçš„å°ºå¯¸ç¡®æ˜¯ä¸€æ ·çš„ã€‚ img è½¬æ¢æ­¥éª¤ä¾‹å¦‚çŽ°åœ¨æˆ‘ä»¬æƒ³æŠŠMTCNNçš„Keras Pnetè½¬åŒ–æˆcaffeodelç”¨äºŽéƒ¨ç½²ã€‚ 1mmtoir -f keras -w pnet.h5 -o pnet æŠŠkerasæ¨¡åž‹è½¬åŒ–æˆMMdnn IRä¸­é—´è¡¨ç¤ºï¼Œåœ¨å½“ç„¶ç›®å½•ä¸‹ä¼šç”Ÿæˆä¸€ä¸ª.npy çš„weightsæ–‡ä»¶å’Œä¸€ä¸ª.pbæ–‡ä»¶ã€‚æŽ¥ç€ä½¿ç”¨ 1mmtomodel -f caffe -in pnet -iw pnet.npy -o pnet]]></content>
      <tags>
        <tag>DeepLearning</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ·±åº¦å­¦ä¹ ç»å…¸å·ç§¯ç¥žç»ç½‘ç»œ [å­¦ä¹ &è½¬è½½]]]></title>
    <url>%2F2019%2F01%2F16%2F%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%BB%8F%E5%85%B8%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%2F</url>
    <content type="text"><![CDATA[éšç€æ·±åº¦å­¦ä¹ çš„å‘å±•ï¼Œç ”ç©¶äººå‘˜æå‡ºäº†å¾ˆå¤šæ¨¡åž‹ï¼Œè¿™å…¶ä¸­ä¸€äº›è®¾è®¡æ–¹å¼ï¼Œåœ¨å½“æ—¶å–å¾—äº†å¾ˆå¥½çš„æ•ˆæžœï¼Œä¹Ÿä¸ºå…¶ä»–ç§‘ç ”å·¥ä½œè€…æä¾›äº†å¾ˆå¥½çš„æ€è·¯ã€‚CNN çš„ç»å…¸ç»“æž„å§‹äºŽ1998å¹´çš„LeNet-5ï¼ŒæˆäºŽ2012å¹´åŽ†å²æ€§çš„AlexNetï¼Œä»Žæ­¤å¹¿æ³›ç”¨äºŽå›¾åƒç›¸å…³é¢†åŸŸï¼Œä¸»è¦åŒ…æ‹¬ï¼š 1.LeNet-5, 1998å¹´ 2.AlexNet, 2012å¹´ 3.ZF-Net, 2013å¹´ 4.GoogleNet, 2014å¹´ 5.VGG, 2014å¹´ 6.ResNet, 2015å¹´ ç»è¿‡ç§‘ç ”å·¥ä½œè€…çš„åå¤éªŒè¯åŠå¹¿æ³›ä½¿ç”¨ï¼Œè¿™äº›æ¨¡åž‹é€æ¸æˆä¸ºç»å…¸ï¼Œæˆ‘ä»¬è¿™é‡Œæ”¶é›†äº†ä¸€äº›å¸¸ç”¨çš„æ¨¡åž‹è¿›è¡Œä»‹ç»ã€‚ 1. VGGè®ºæ–‡åœ°å€ VGGNetæ˜¯ç‰›æ´¥å¤§å­¦è®¡ç®—æœºè§†è§‰ç»„ï¼ˆVisual Geometry Groupï¼‰å’Œ Google DeepMind å…¬å¸çš„ç ”ç©¶å‘˜ä¸€èµ·ç ”å‘çš„çš„æ·±åº¦å·ç§¯ç¥žç»ç½‘ç»œã€‚VGGNet æŽ¢ç´¢äº†å·ç§¯ç¥žç»ç½‘ç»œçš„æ·±åº¦ä¸Žå…¶æ€§èƒ½ä¹‹é—´çš„å…³ç³»ï¼Œä¸€å…±æœ‰å…­ç§ä¸åŒçš„ç½‘ç»œç»“æž„ï¼Œä½†æ˜¯æ¯ç§ç»“æž„éƒ½æœ‰å«æœ‰ï¼•ç»„å·ç§¯ï¼Œæ¯ç»„å·ç§¯éƒ½ä½¿ç”¨ï¼“ï½˜ï¼“çš„å·ç§¯æ ¸ï¼Œæ¯ç»„å·ç§¯åŽè¿›è¡Œä¸€ä¸ªï¼’ï½˜ï¼’æœ€å¤§æ± åŒ–ï¼ŒæŽ¥ä¸‹æ¥æ˜¯ä¸‰ä¸ªå…¨è¿žæŽ¥å±‚ã€‚åœ¨è®­ç»ƒé«˜çº§åˆ«çš„ç½‘ç»œæ—¶ï¼Œå¯ä»¥å…ˆè®­ç»ƒä½Žçº§åˆ«çš„ç½‘ç»œï¼Œç”¨å‰è€…èŽ·å¾—çš„æƒé‡åˆå§‹åŒ–é«˜çº§åˆ«çš„ç½‘ç»œï¼Œå¯ä»¥åŠ é€Ÿç½‘ç»œçš„æ”¶æ•›ã€‚VGGNet ç›¸æ¯”ä¹‹å‰state-of-the-artçš„ç½‘ç»œç»“æž„ï¼Œé”™è¯¯çŽ‡å¤§å¹…ä¸‹é™ï¼Œå¹¶å–å¾—äº†ILSVRC 2014æ¯”èµ›åˆ†ç±»é¡¹ç›®çš„ç¬¬2åå’Œå®šä½é¡¹ç›®çš„ç¬¬1åã€‚åŒæ—¶VGGNetçš„æ‹“å±•æ€§å¾ˆå¼ºï¼Œè¿ç§»åˆ°å…¶ä»–å›¾ç‰‡æ•°æ®ä¸Šçš„æ³›åŒ–æ€§éžå¸¸å¥½ã€‚VGGNetçš„ç»“æž„éžå¸¸ç®€æ´ï¼Œæ•´ä¸ªç½‘ç»œéƒ½ä½¿ç”¨äº†åŒæ ·å¤§å°çš„å·ç§¯æ ¸å°ºå¯¸ï¼ˆ33ï¼‰å’Œæœ€å¤§æ± åŒ–å°ºå¯¸ï¼ˆ22ï¼‰ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒVGGNetä¾ç„¶ç»å¸¸è¢«ç”¨æ¥æå–å›¾åƒç‰¹å¾ã€‚ ç»å…¸å·ç§¯ç¥žç»ç½‘ç»œä¹‹VGGNet VGGæ¨¡åž‹æ ¸å¿ƒæ‹†è§£ 2. GoogLeNet[v1] Going Deeper with Convolutions [v2] Batch Normalization: Accelerating Deep Network Training by Reducing Internal Covariate Shift [v3] Rethinking the Inception Architecture for Computer Vision [v4] Inception-v4, Inception-ResNet and the Impact of Residual Connections on Learning GoogLeNetçš„æœ€æ—©ç‰ˆæœ¬ï¼Œå‡ºçŽ°åœ¨2014å¹´çš„â€ Going deeper with convolutions â€œã€‚ä¹‹æ‰€ä»¥åä¸º â€œGoogLeNetâ€ è€Œéž â€œGoogleNetâ€ ,æ–‡ç« è¯´æ˜¯ä¸ºäº†å‘æ—©æœŸçš„LeNetè‡´æ•¬ã€‚GoogleNetæå‡ºäº†ä¸€ä¸ªå…¨æ–°çš„æ·±åº¦ CNN æž¶æž„â€”â€”Inceptionï¼Œæ— å…¨è¿žæŽ¥å±‚ï¼Œå¯ä»¥èŠ‚çœè¿ç®—çš„åŒæ—¶ï¼Œå‡å°‘äº†å¾ˆå¤šå‚æ•°ï¼Œå‚æ•°æ•°é‡æ˜¯AlexNetçš„1/12ï¼Œæ•°é‡åªæœ‰5 millionï¼Œè€Œä¸”åœ¨ImageNetç«žèµ›ä¸­å–å¾—äº†å¾ˆå¥½çš„æˆç»©ã€‚ GoogleNetç³»åˆ—è®ºæ–‡å­¦ä¹  3. Resnetè®ºæ–‡åœ°å€ ResNetåœ¨2015å¹´è¢«æå‡ºï¼Œåœ¨ImageNetæ¯”èµ›classificationä»»åŠ¡ä¸ŠèŽ·å¾—ç¬¬ä¸€åï¼Œå› ä¸ºå®ƒ â€œç®€å•ä¸Žå®žç”¨â€ å¹¶å­˜ï¼Œä¹‹åŽå¾ˆå¤šæ–¹æ³•éƒ½å»ºç«‹åœ¨ResNet50æˆ–è€…ResNet101çš„åŸºç¡€ä¸Šå®Œæˆçš„ï¼Œæ£€æµ‹ï¼Œåˆ†å‰²ï¼Œè¯†åˆ«ç­‰é¢†åŸŸéƒ½çº·çº·ä½¿ç”¨ResNetï¼Œå…·æœ‰å¾ˆå¼ºçš„é€‚åº”æ€§ã€‚ResNetçš„ä½œè€…ä½•å‡¯æ˜Žä¹Ÿå› æ­¤æ‘˜å¾—CVPR2016æœ€ä½³è®ºæ–‡å¥–ã€‚ ResNetè§£æž ResNetå­¦ä¹  4. MobileNet-V1 &amp; MobileNet -V2V1è®ºæ–‡åœ°å€ V2è®ºæ–‡åœ°å€ MobileNetæ˜¯Googleå›¢é˜Ÿé’ˆå¯¹ç§»åŠ¨ç«¯æå‡ºçš„é«˜æ•ˆå›¾åƒè¯†åˆ«ç½‘ç»œï¼Œæ·±å…¥çš„ç ”ç©¶äº†Depthwise Separable Convolutionsä½¿ç”¨æ–¹æ³•åŽè®¾è®¡å‡ºMobileNetï¼ŒDepthwise Separable Convolutionsçš„æœ¬è´¨æ˜¯å†—ä½™ä¿¡æ¯æ›´å°‘çš„ç¨€ç–åŒ–è¡¨è¾¾ã€‚åœ¨æ­¤åŸºç¡€ä¸Šç»™å‡ºäº†é«˜æ•ˆæ¨¡åž‹è®¾è®¡çš„ä¸¤ä¸ªé€‰æ‹©ï¼šå®½åº¦å› å­(Width Multiplier)å’Œåˆ†è¾¨çŽ‡å› å­(Resolution Multiplier)ï¼›é€šè¿‡æƒè¡¡å¤§å°ã€å»¶è¿Ÿæ—¶é—´ä»¥åŠç²¾åº¦ï¼Œæ¥æž„å»ºè§„æ¨¡æ›´å°ã€é€Ÿåº¦æ›´å¿«çš„MobileNetã€‚ MobileNet V2æ˜¯ä¹‹å‰MobileNet V1çš„æ”¹è¿›ç‰ˆã€‚MobileNet V1ä¸­ä¸»è¦æ˜¯å¼•å…¥äº†Depthwise Separable Convolutionä»£æ›¿ä¼ ç»Ÿçš„å·ç§¯æ“ä½œï¼Œç›¸å½“äºŽå®žçŽ°äº†spatialå’Œchannelä¹‹é—´çš„è§£è€¦ï¼Œè¾¾åˆ°æ¨¡åž‹åŠ é€Ÿçš„ç›®çš„ï¼Œæ•´ä½“ç½‘ç»œç»“æž„è¿˜æ˜¯å»¶ç»­äº†VGGç½‘ç»œç›´ä¸Šç›´ä¸‹çš„ç‰¹ç‚¹ã€‚å’ŒMobileNet V1ç›¸æ¯”ï¼ŒMobileNet V2ä¸»è¦çš„æ”¹è¿›æœ‰ä¸¤ç‚¹ï¼š1ã€Linear Bottlenecksã€‚ä¹Ÿå°±æ˜¯åŽ»æŽ‰äº†å°ç»´åº¦è¾“å‡ºå±‚åŽé¢çš„éžçº¿æ€§æ¿€æ´»å±‚ï¼Œç›®çš„æ˜¯ä¸ºäº†ä¿è¯æ¨¡åž‹çš„è¡¨è¾¾èƒ½åŠ›ã€‚2ã€Inverted Residual blockã€‚è¯¥ç»“æž„å’Œä¼ ç»Ÿresidual blockä¸­ç»´åº¦å…ˆç¼©å‡å†æ‰©å¢žæ­£å¥½ç›¸åï¼Œå› æ­¤shotcutä¹Ÿå°±å˜æˆäº†è¿žæŽ¥çš„æ˜¯ç»´åº¦ç¼©å‡åŽçš„feature mapã€‚ æ·±åº¦è§£è¯»è°·æ­ŒMobileNet è½»é‡åŒ–ç½‘ç»œï¼šMobileNet-V2 5. U-NETè®ºæ–‡åœ°å€ é¡¹ç›®åœ°å€ è¿™æ˜¯Encoder-Decoderç½‘ç»œçš„ä¸€ç§ï¼Œåœ¨æ— ç›‘ç£å­¦ä¹ ä¸­çš„æ¡†æž¶ï¼Œåˆ©ç”¨convä¸Ždeconvé™ç»´å‡ç»´æ¥è¿›è¡Œå­¦ä¹ ï¼Œåˆ†åˆ«å«åšencoderä¸Ždecoderç¼–ç è§£ç ï¼Œä¸€èˆ¬åŸºäºŽå·ç§¯ç½‘ç»œï¼ŒencoderåŽç›¸å½“äºŽå­¦ä¹ åˆ°äº†ç‰¹å¾ï¼Œè€ŒdecoderåŽç›¸å½“äºŽè¿˜åŽŸäº†å›¾åƒï¼Œæ—¢å¯ä»¥ç”¨è¾“å…¥å›¾åƒè¿›è¡Œè®­ç»ƒï¼Œè®­ç»ƒå¥½ä¸€å±‚åŠ æ·±ä¸€å±‚ã€‚å†å¯ä»¥åˆ©ç”¨æœ‰ç›‘ç£å¾®è°ƒï¼Œä»Žè€Œè¾¾åˆ°åˆ†ç±»æˆ–è€…å›¾åƒè½¬æ¢çš„ç›®çš„ã€‚ 6. GANæ€»ç»“ï¼šåˆ©ç”¨ä¸¤ä¸ªç½‘ç»œå¯¹æŠ—ç”Ÿæˆæ¨¡åž‹ï¼Œç”Ÿæˆå™¨ä¸Žè¾¨åˆ«å™¨ï¼Œç”Ÿæˆå™¨è¾“å…¥å›¾åƒï¼Œç”Ÿæˆæ‰€éœ€å›¾åƒï¼Œè¾¨åˆ«å™¨è¾¨åˆ«æ‰€éœ€å›¾åƒä¸Žç”Ÿæˆå›¾åƒï¼Œä½¿ç”Ÿæˆå™¨çš„ç”Ÿæˆå›¾åƒéª—è¿‡è¾¨åˆ«å™¨ã€‚]]></content>
      <tags>
        <tag>DeepLearning</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¸¸ç”¨æ·±åº¦å­¦ä¹ æ¡†æž¶[å­¦ä¹ &è½¬è½½]]]></title>
    <url>%2F2019%2F01%2F09%2F%E5%B8%B8%E8%A7%81%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6%2F</url>
    <content type="text"><![CDATA[æ·±åº¦å­¦ä¹ ç ”ç©¶çš„çƒ­æ½®æŒç»­é«˜æ¶¨ï¼Œå„ç§å¼€æºæ·±åº¦å­¦ä¹ æ¡†æž¶ä¹Ÿå±‚å‡ºä¸ç©·ï¼Œå…¶ä¸­åŒ…æ‹¬TensorFlowã€Caffeã€Kerasã€CNTKã€Torch7ã€MXNetã€Leafã€Theanoã€DeepLearning4ã€Lasagneã€Neonç­‰ã€‚æˆ‘ä»¬å‚è€ƒå¼€æºçš„æµ‹è¯•ç»“æžœï¼Œç»“åˆè‡ªå·±æ•´ç†çš„æ•°æ®ï¼Œé’ˆå¯¹ä¸»æµçš„æ·±åº¦å­¦ä¹ æ¡†æž¶è¿›è¡Œç®€å•å¯¹æ¯”åŠä»‹ç»ã€‚ æ¡†æž¶ æœºæž„ æ”¯æŒè¯­è¨€ Stars Forks Caffe BVLC C++/Python/Matlab 25480 15560 CNTK Microsoft C++ 15083 4020 Keras Fchollet Python 33332 12563 Tensorflow Google Python/C++/Goâ€¦ 109115 67339 MXNet DMLC Python/C++/Râ€¦ 15162 5484 PyTorch Facebook Python 18517 4426 æ€§èƒ½å¯¹æ¯”1. è®­ç»ƒæ—¶é—´: Network DenseNet-121 (Multi-GPU)è¿è¡ŒäºŽ SSD ç¡¬ç›˜ æ¡†æž¶ 1xV100/CUDA 9/CuDNN 7 4xV100/CUDA 9/CuDNN 7 Pytorch 27min 10min Keras(TF) 38min 18min Tensorflow 33min 22min MXNet(Gluon) 29min 10min è¿è¡ŒäºŽRAMå†…å­˜ä¸­ æ¡†æž¶ 1xV100/CUDA 9/CuDNN 7 4xV100/CUDA 9/CuDNN 7 Pytorch 25min 8min Keras(TF) 36min 15min Tensorflow 25min 14min MXNet(Gluon) 28min 8min 2. 1000å¼ å›¾ç‰‡æŽ¨ç†æ—¶é—´(s): Network ResNet-50 æ¡†æž¶ K80/CUDA 8/CuDNN 6 P100/CUDA 8/CuDNN 6 CNTK 8.5 1.6 Keras(TF) 10.2 2.9 Tensorflow 6.5 1.8 MXNet 7.7 1.6 PyTorch 7.7 1.9 3. CPUæŽ¨ç†æ—¶é—´(s): E5-2630v4, Network FCN5 æ¡†æž¶ 1 Thread 2 Threads 4 Threads 8 Threads 16 Threads 32 Threads Caffe 1887.2ms 1316.7ms 1051.8ms 952.1ms 952.3ms 834.7ms CNTK 1238.7ms 616.3ms 352.7ms 229.5ms 155.9ms 192.4ms Tensorflow 992.2ms 773.6ms 419.3ms 252.3ms 149.7ms 124.7ms MXNet 1386.8ms 915.5ms 559.0ms 499.1ms 416.3ms 413.9ms æ¡†æž¶è¯„ä»· æ¡†æž¶ å®‰è£…æˆæœ¬ ä»£ç ç†è§£ç¨‹åº¦ APIä¸°å¯Œç¨‹åº¦ æ¨¡åž‹ä¸°å¯Œç¨‹åº¦ æ–‡æ¡£å®Œæ•´ç¨‹åº¦ è®­ç»ƒä¸Žæµ‹è¿‡ç¨‹ å­¦ä¹ èµ„æº CNTK è‰¯å¥½ è‰¯å¥½ è‰¯å¥½ è‰¯å¥½ ä¼˜ç§€ è‰¯å¥½ è‰¯å¥½ Keras è‰¯å¥½ è‰¯å¥½ ä¼˜ç§€ ä¼˜ç§€ è‰¯å¥½ ä¼˜ç§€ è‰¯å¥½ MXNet è‰¯å¥½ è‰¯å¥½ è‰¯å¥½ è‰¯å¥½ è‰¯å¥½ ä¼˜ç§€ ä¼˜ç§€ Pytorch ä¼˜ç§€ ä¼˜ç§€ è‰¯å¥½ è‰¯å¥½ ä¼˜ç§€ è‰¯å¥½ è‰¯å¥½ Tensorflow è‰¯å¥½ è‰¯å¥½ ä¼˜ç§€ ä¼˜ç§€ ä¼˜ç§€ ä¼˜ç§€ ä¼˜ç§€ Caffe è‰¯å¥½ ä¼˜ç§€ è‰¯å¥½ è‰¯å¥½ ä¼˜ç§€ è‰¯å¥½ ä¼˜ç§€ æŽ¨èæ¡†æž¶ç›®å‰ä¼—å¤šçš„æ·±åº¦å­¦ä¹ æ¡†æž¶ï¼Œä½¿ç”¨è€…åªè¦é€‰æ‹©é€‚åˆè‡ªå·±çš„æ¡†æž¶å³å¯ï¼Œæˆ‘ä»¬åœ¨æ—¥å¸¸ä½¿ç”¨ä¸­ï¼Œè€ƒè™‘åˆ°è®­ç»ƒçš„å¿«æ·ç¨‹åº¦ï¼Œéƒ¨ç½²éš¾åº¦ä»¥åŠå¯¹CNNã€RNNæ¨¡åž‹çš„ç›´æŽ¥ç¨‹åº¦ï¼ŒæŽ¨èä»¥ä¸‹å‡ æ¬¾æ·±åº¦å­¦ä¹ æ¡†æž¶ã€‚ 1.KerasKeras æä¾›äº†ç®€å•æ˜“ç”¨çš„ API æŽ¥å£ï¼Œå…¥é—¨å¿«ï¼Œç‰¹åˆ«é€‚åˆåˆå­¦è€…å…¥é—¨ã€‚å…¶åŽç«¯é‡‡ç”¨ TensorFlow, CNTKï¼Œä»¥åŠ Theanoã€‚å¦å¤–ï¼ŒDeeplearning4j çš„ Python ä¹Ÿæ˜¯åŸºäºŽ Keras å®žçŽ°çš„ã€‚Keras å‡ ä¹Žå·²ç»æˆäº† Python ç¥žç»ç½‘ç»œçš„æŽ¥å£æ ‡å‡†ã€‚ 2.TensorFlowè°·æ­Œå‡ºå“ï¼Œè¿½éšè€…ä¼—å¤šã€‚ä»£ç è´¨é‡é«˜ï¼Œæ”¯æŒæ¨¡åž‹ä¸°å¯Œï¼Œæ”¯æŒè¯­è¨€å¤šæ ·ï¼Œ TensorBoard å¯è§†åŒ–å·¥å…·ä½¿ç”¨æ–¹ä¾¿ã€‚ 3.MXNetå·²è¢«äºšé©¬é€Šé€‰ä¸º AWS ä¸Šçš„æ·±åº¦å­¦ä¹ æ¡†æž¶ï¼Œæ”¯æŒåŠ¨æ€å›¾è®¡ç®—ã€‚MXNet æœ‰è®¸å¤šä¸­å›½å¼€å‘è€…ï¼Œå› è€Œæœ‰éžå¸¸è‰¯å¥½çš„ä¸­æ–‡æ–‡æ¡£æ”¯æŒã€‚Gluon æŽ¥å£ä½¿å¾— MXNet åƒ Keras ä¸€æ ·ç®€å•æ˜“ç”¨ã€‚ å‚è€ƒèµ„æ–™ é¦™æ¸¯æµ¸ä¼šå¤§å­¦æ·±åº¦å­¦ä¹ æ¡†æž¶Benchmark DeepLearningFrameworks åšå®¢ å¼€å‘è€…å¦‚ä½•é€‰æ‹©æ·±åº¦å­¦ä¹ æ¡†æž¶?]]></content>
      <tags>
        <tag>DeepLearning</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å›žçŽ¯ï¼Œæœªæ¥å¯æœŸ]]></title>
    <url>%2F2018%2F08%2F27%2F%E5%9B%9E%E7%8E%AF%EF%BC%8C%E6%9C%AA%E6%9D%A5%E5%8F%AF%E6%9C%9F%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©ï¼Œæ˜¯æˆ‘21å²çš„ç”Ÿæ—¥ã€‚åœ¨ä¸€ä¸ªåŠæœˆå‰æˆ‘è¾žèŒäº†ï¼Œä½†å‡†ç¡®çš„è¯´æ˜¯è¢«åŠ¨å¼è¾žèŒã€‚çŽ°åœ¨çœ‹æ¥è¿™æ˜¯ä¸€ä»¶å¥½äº‹ã€‚ ç¬¬ä¸€å¤©åˆ°å…¬å¸æ¥¼ä¸‹ å·¥ç‰Œ ç¬¬ä¸€å¤©å®‰é¡¿ä¸‹æ¥ ä¼¼ä¹Žäººç”Ÿè¿›å…¥å¼±å† ä¹‹åŽï¼Œå¾ˆå¤šäº‹æƒ…éƒ½äº‹å‘çªç„¶ï¼Œå¥½åœ¨äº‹æƒ…å‘ç”Ÿè¿‡åŽï¼Œå†å›žå¤´çœ‹ï¼Œä¸å¤±æ˜¯ä¸€ç§ä¸é”™çš„ç»åŽ†è¾žèŒçš„åŽŸå› æ˜¯ä¼˜ç§€çš„projectä¸è¢«è®¤å¯â€¦æ‰€ä»¥å’Œæˆ‘çš„ç›´æŽ¥ä¸»ç®¡å°±ä¸€å¹¶é€‰æ‹©äº†ç¦»èŒâ€¦ åœ¨å¤–ç•Œäººçœ‹æ¥å¯èƒ½è¿™ç§åšæ³•ç®€ç›´æ˜¯ä¸è§£â€¦ å—¯ï¼Œå¸Œæœ›è¿™å®¶å…¬å¸å¯ä»¥ä¿æŒåˆå¿ƒ å¯æ˜¯å¯¹äºŽç¨‹åºçŒ¿è¿™ç±»äººæ¥è¯´ï¼Œèƒ½åšè‡ªå·±æ„Ÿå…´è¶£çš„äº‹æƒ…åº”è¯¥æ˜¯æœ€é«˜çš„è£èª‰â€¦ å†µä¸”æ˜¯åœ¨ä¸€ä¸ªä¼˜ç§€projectå¹¶ä¸”åœ¨æœ‰è‰¯å¥½å®žçŽ°çš„åŸºç¡€ä¸Šè¢«å¦æŽ‰â€¦è¿™ç§ç—›è‹¦èŽ«è¿‡äºŽé¥®é¸© æ­£å¦‚æ ‡é¢˜æ‰€è¨€ å›žçŽ¯ ï¼ŒåˆšåˆšæŽ¥åˆ°æ¶ˆæ¯çš„æ—¶å€™è‡ªå·±è¿˜éƒé—·äº†ä¸€æ•´å¤©ï¼ŒçŽ°åœ¨å›žå¤´çœ‹è¿™åº”è¯¥æ˜¯ä¸€ç§å›žçŽ¯ï¼Œå°±å¦‚åŒç«‹äº¤æ¡¥çš„è½¬çŽ¯åŒé“ï¼Œè™½ç„¶åˆç»•å›žäº†åŽŸç‚¹ï¼Œä½†æ˜¯å´æå‡äº†ä¸€ä¸ªç»´åº¦ã€‚ å¹¸è¿å¦‚æˆ‘ï¼Œåœ¨è¿™çŸ­æš‚çš„å®žä¹ ä¸­é‡åˆ°äº†éžå¸¸niceçš„ä¸»ç®¡ï¼Œæ¶¨äº†å¾ˆå¤šè§è¯†ï¼Œæ„è¯†åˆ°æˆ‘ä¹‹å‰æ˜¯å¤šä¹ˆçš„çŸ­è§†â€¦ä»Žè€Œä¹Ÿçœ‹åˆ°äº†è‡ªå·±æœªæ¥çš„ä¸€äº›å¯èƒ½ï¼Œä½†å‰æè¦åšä¸€äº›ä»˜å‡ºã€‚ å…¬å¸å¯¹é¢çš„è…¾è®¯&å®Œç¾Žä¸–ç•Œ åœ¨è¿™ä¸¤ä¸ªæœˆçš„å®žä¹ ä¸­ï¼Œé¡¹ç›®è¿›å±•æœ‰å¦‚ç¥žåŠ©åœ¨å®žä¹ è¿™æ®µæ—¶é—´ï¼Œé¡¹ç›®è¿›å±•é€Ÿåº¦æƒŠäººï¼Œæ¯å¤©éƒ½å¾ˆå……å®žï¼Œæ¯å¤©ä¸€ç»„çš„ä¼™ä¼´ä»¬éƒ½åœ¨ä¸€èµ·æƒ³å¯¹ç­–ï¼ŒçŽ°åœ¨å›žå¤´æƒ³æƒ³ä¹Ÿè®¸æ˜¯ä¹‹å‰è‡ªå·±åœ¨äººå·¥æ™ºèƒ½æ–¹é¢çš„ä¸€ç‚¹å°å°çš„ç»éªŒåŠ ä¹‹ä¸»ç®¡ä¹‹å‰åœ¨NLPæ–¹é¢çš„ç ”ç©¶çš„å…±äº¤ä½¿å¾—é¡¹ç›®å‘å±•è¿…é€Ÿã€‚ ä¸¤ä¸ªæœˆçš„æ—¶é—´å®žçŽ°äº†æ¨¡åž‹çš„æ­å»ºä»¥åŠdemoçš„å®žçŽ°&amp;é¡¹ç›®é¢„æ¼”â€¦ å·¥ä½ åœ¨å…¬å¸æœ€åŽä¸€å¤©çš„é¡¹ç›®æ±‡æŠ¥ è‡³äºŽä¸ºä»€ä¹ˆå¦æŽ‰æˆ‘ä»¬â€¦å„ç§å› ç´ â€¦ä¸æƒ³æ˜Žè¯´äº†â€¦æœ‰ç‚¹å®˜å®¦é£Žæ ¼â€¦å„ä½çœ‹å®¢è‡ªå·±æƒ³è±¡å§â€¦ ä¸‹ä¸€æ­¥ï¼Œå†è¿›ç«™ åå°„ è¿™ä¸€è¶Ÿå®žä¹ ä¸‹æ¥ï¼Œå¯ä»¥è¯´å½»åº•æ”¹å˜äº†æˆ‘æ›¾ç»å¯¹è‡ªå·±çš„çœ‹æ³•â€¦ æ€»çš„æ¥è¯´ï¼Œè¿‡åŽ»æˆ‘å¸¸å¸¸è§†çº¿è¿‡åº¦çŸ­æµ…â€¦åœ¨å¯¹è‡ªå·±äººç”Ÿçš„è§„åˆ’ä¸Šä¹Ÿè¿‡äºŽä¿å®ˆå§â€¦ äº‹å®žä¸Šï¼Œä¸€ä¸ªäººæ‰€çœ‹åˆ°çš„å¾€å¾€æ˜¯ç‹­çª„çš„ï¼Œé€šè¿‡ä¸æ–­çš„æŽ¥è§¦é«˜å±‚æ¬¡çš„äººå’Œäº‹ç‰©æ‰èƒ½è®©è‡ªå·±å˜å¾—æ›´openã€‚ å†³å®šäº†è€ƒç ”ï¼Œä¹Ÿçœ‹æ¸…äº†å›½å†…çš„äº’è”ç½‘çŽ¯å¢ƒçš„è™šå®žâ€¦å¸Œæœ›è‡ªå·±èƒ½ä»˜æœ‰æ‰€å¾—â€¦ å¦‚æžœæœ‰æœºä¼šï¼Œè¿˜æ˜¯åŽ»æŽ¥è§¦æŽ¥è§¦æŠ€æœ¯åŽŸå§‹åœ°ç†é™¶ç†é™¶å§â€¦ æœªæ¥å¯æœŸåœ¨å¤§å­¦é‡Œçš„ä¸‰å¹´å†ç®—ä¸Šå®žä¹ çš„ç»åŽ†â€¦å°è¯•äº†äº’è”ç½‘å¼€å‘çš„å¾ˆå¤šæ–¹å‘â€¦ æœ€ç»ˆå¸å¼•æˆ‘çš„å¹¶ä¸æ˜¯å„ç§æ¡†æž¶ç‚«æŠ€çš„å¼€å‘â€¦è€Œæ˜¯èƒ½èµ‹äºˆåº”ç”¨çµé­‚çš„äººå·¥æ™ºèƒ½æ–¹å‘â€¦ å¤§æ¦‚æœªæ¥çš„å‘å±•æ–¹å‘ä¹Ÿå°±å®šåœ¨è¿™æ ·çš„è¶‹åŠ¿äº†â€¦ ç»§ç»­è¡Œèµ°ï¼Œæœªæ¥å¯æœŸã€‚ ç¦»å¼€é‚£å¤©å¤©æ°”å¾ˆå¥½ æœªæ¥å¯æœŸ]]></content>
      <tags>
        <tag>Inspire</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŸºäºŽTensorFlowçš„CNNä¸­æ–‡æ–‡æœ¬åˆ†ç±»]]></title>
    <url>%2F2018%2F05%2F20%2F%E5%9F%BA%E4%BA%8ETensorFlow%E7%9A%84CNN%E4%B8%AD%E6%96%87%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%2F</url>
    <content type="text"><![CDATA[CNNåœ¨è®¡ç®—æœºè§†è§‰é¢†åŸŸå–å¾—äº†å¾ˆå¥½çš„ç»“æžœï¼ŒåŒæ—¶å®ƒå¯ä»¥åº”ç”¨åœ¨æ–‡æœ¬åˆ†ç±»ä¸Šé¢ï¼Œæ­¤æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨tensorflowå®žçŽ°æ­¤ä»»åŠ¡ã€‚ CNNå®žçŽ°æ–‡æœ¬åˆ†ç±»çš„åŽŸç†ä¸‹å›¾å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨cnnè¿›è¡Œå¥å­åˆ†ç±»ã€‚è¾“å…¥æ˜¯ä¸€ä¸ªå¥å­ï¼Œä¸ºäº†ä½¿å…¶å¯ä»¥è¿›è¡Œå·ç§¯ï¼Œé¦–å…ˆéœ€è¦å°†å…¶è½¬åŒ–ä¸ºå‘é‡è¡¨ç¤ºï¼Œé€šå¸¸ä½¿ç”¨word2vecå®žçŽ°ã€‚d=5è¡¨ç¤ºæ¯ä¸ªè¯è½¬åŒ–ä¸º5ç»´çš„å‘é‡ï¼ŒçŸ©é˜µçš„å½¢çŠ¶æ˜¯[sentence_length Ã—Ã— 5]ï¼Œå³[7 Ã—Ã— 5]ã€‚6ä¸ªfilterï¼ˆå·ç§¯æ ¸ï¼‰ï¼Œä¸Žå›¾åƒä¸­ä½¿ç”¨çš„å·ç§¯æ ¸ä¸åŒçš„æ˜¯ï¼Œnlpä½¿ç”¨çš„å·ç§¯æ ¸çš„å®½ä¸Žå¥å­çŸ©é˜µçš„å®½ç›¸åŒï¼Œåªæ˜¯é•¿åº¦ä¸åŒã€‚è¿™é‡Œæœ‰ï¼ˆ2ï¼Œ3ï¼Œ4ï¼‰ä¸‰ç§sizeï¼Œæ¯ç§sizeæœ‰ä¸¤ä¸ªfilterï¼Œä¸€å…±æœ‰6ä¸ªfilterã€‚ç„¶åŽå¼€å§‹å·ç§¯ï¼Œä»Žå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œstrideæ˜¯1ï¼Œå› ä¸ºå¯¹äºŽé«˜æ˜¯4çš„filterï¼Œæœ€åŽç”Ÿæˆ4ç»´çš„å‘é‡ï¼Œï¼ˆ7-4ï¼‰/1+1=4ã€‚å¯¹äºŽé«˜æ˜¯3çš„filterï¼Œæœ€åŽç”Ÿæˆ5ç»´çš„å‘é‡ï¼Œï¼ˆ7-3ï¼‰/1+1=5ã€‚å·ç§¯ä¹‹åŽï¼Œæˆ‘ä»¬å¾—åˆ°å¥å­çš„ç‰¹å¾ï¼Œä½¿ç”¨activation functionå’Œ1-max-poolingå¾—åˆ°æœ€åŽçš„å€¼ï¼Œæ¯ä¸ªfilteræœ€åŽå¾—åˆ°ä¸¤ä¸ªç‰¹å¾ã€‚å°†æ‰€æœ‰ç‰¹å¾åˆå¹¶åŽï¼Œä½¿ç”¨softmaxè¿›è¡Œåˆ†ç±»ã€‚å›¾ä¸­æ²¡æœ‰ç”¨åˆ°chanel,ä¸‹æ–‡çš„å®žéªŒå°†ä¼šä½¿ç”¨ä¸¤ä¸ªé€šé“ï¼Œstaticå’Œnon-staticï¼Œæœ‰ç›¸å…³çš„å…·ä½“è§£é‡Šã€‚ è¿™é‡Œå†™å›¾ç‰‡æè¿° æœ¬æ–‡ä½¿ç”¨çš„æ¨¡åž‹ è¿™é‡Œå†™å›¾ç‰‡æè¿° ä¸»è¦åŒ…æ‹¬äº”å±‚ï¼Œç¬¬ä¸€å±‚æ˜¯embedding layer,ç¬¬äºŒå±‚æ˜¯convolutional layer,ç¬¬ä¸‰å±‚æ˜¯max-pooling layer,ç¬¬å››å±‚æ˜¯fully connected layerï¼Œæœ€åŽä¸€å±‚æ˜¯softmax layer.æŽ¥ä¸‹æ¥ä¾æ¬¡ä»‹ç»ç›¸å…³ä»£ç å®žçŽ°ã€‚ Input placeholder1234# Placeholders for input, output and dropoutself.input_x = tf.placeholder(tf.int32, [None, sequence_length], name=&quot;input_x&quot;)self.input_y = tf.placeholder(tf.float32, [None, num_classes], name=&quot;input_y&quot;)self.dropout_keep_prob = tf.placeholder(tf.float32, name=&quot;dropout_keep_prob&quot;) tf.placeholder åˆ›å»ºä¸€ä¸ªå ä½ç¬¦å˜é‡ï¼Œåœ¨è®­ç»ƒæˆ–è€…æµ‹è¯•çš„æ—¶å€™ï¼Œéœ€è¦å°†å ä½ç¬¦è¾“å…¥åˆ°ç½‘ç»œä¸­è¿›è¡Œè®¡ç®—ï¼Œå…¶ä¸­çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¾“å…¥å¼ é‡çš„å½¢çŠ¶ã€‚None æ„å‘³ç€å®ƒå¯ä»¥æ˜¯ä»»ä½•ç»´åº¦çš„é•¿åº¦ï¼Œåœ¨æˆ‘ä»¬çš„å®žéªŒä¸­å®ƒä»£è¡¨æ‰¹å¤„ç†çš„å¤§å°ï¼ŒNoneä½¿å¾—ç½‘ç»œå¯ä»¥å¤„ç†ä»»æ„é•¿åº¦çš„batchesã€‚å¤±æ´»çŽ‡åŒæ ·ä¹Ÿæ˜¯è¾“å…¥çš„ä¸€éƒ¨åˆ†ï¼Œåœ¨è®­ç»ƒçš„æ—¶å€™ä½¿ç”¨dropout ï¼Œæµ‹è¯•çš„æ—¶å€™ä¸ä½¿ç”¨dropout ã€‚ EMBEDDING LAYERè¿™ä¸€å±‚å°†å•è¯ç´¢å¼•æ˜ å°„åˆ°ä½Žç»´çš„å‘é‡è¡¨ç¤ºï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæŸ¥æ‰¾è¡¨ï¼Œæˆ‘ä»¬ä»Žæ•°æ®ä¸­é€šè¿‡å­¦ä¹ å¾—åˆ°ã€‚ 1234with tf.device(&apos;/cpu:0&apos;), tf.name_scope(&quot;embedding&quot;): W = tf.Variable(tf.random_uniform([vocab_size, embedding_size], -1.0, 1.0), name=&quot;W&quot;) self.embedded_chars = tf.nn.embedding_lookup(W, self.input_x) self.embedded_chars_expanded = tf.expand_dims(self.embedded_chars, -1) å…¶ä¸­ï¼ŒW æ˜¯ åœ¨è®­ç»ƒæ—¶å¾—åˆ°çš„embedding matrix.ï¼Œç”¨éšæœºå‡åŒ€åˆ†å¸ƒè¿›è¡Œåˆå§‹åŒ–ã€‚tf.nn.embedding_lookupå®žçŽ°embeddingæ“ä½œï¼Œå¾—åˆ° ä¸€ä¸ª3-dimensional çš„å¼ é‡ï¼Œå½¢çŠ¶æ˜¯ [None, sequence_length, embedding_size]. sequence_length æ˜¯æ•°æ®é›†ä¸­æœ€é•¿å¥å­çš„é•¿åº¦ï¼Œå…¶ä»–å¥å­éƒ½é€šè¿‡æ·»åŠ â€œPADâ€è¡¥å……åˆ°è¿™ä¸ªé•¿åº¦ã€‚embedding_size æ˜¯è¯å‘é‡çš„å¤§å°ã€‚ TensorFlowçš„å·ç§¯å‡½æ•°-conv2d éœ€è¦å››ä¸ªå‚æ•°ï¼Œ åˆ†åˆ«æ˜¯batch, width, height ä»¥åŠchannelã€‚ embeddingä¹‹åŽä¸åŒ…æ‹¬ channel, æ‰€ä»¥æˆ‘ä»¬äººä¸ºåœ°æ·»åŠ ä¸Šå®ƒï¼Œå¹¶è®¾ç½®ä¸º1ã€‚çŽ°åœ¨å°±æ˜¯[None, sequence_length, embedding_size, 1] CONVOLUTION AND MAX-POOLING LAYERSç”±å›¾ä¸­å¯çŸ¥ï¼Œ æˆ‘ä»¬æœ‰ä¸åŒsizeçš„filtersã€‚å› ä¸ºæ¯æ¬¡å·ç§¯éƒ½ä¼šäº§ç”Ÿä¸åŒå½¢çŠ¶çš„å¼ é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦éåŽ†æ¯ä¸ªfilterï¼Œç„¶åŽå°†ç»“æžœåˆå¹¶æˆä¸€ä¸ªå¤§çš„ç‰¹å¾å‘é‡ã€‚ 12345678910111213141516171819202122232425262728pooled_outputs = []for i, filter_size in enumerate(filter_sizes): with tf.name_scope(&quot;conv-maxpool-%s&quot; % filter_size): # Convolution Layer filter_shape = [filter_size, embedding_size, 1, num_filters] W = tf.Variable(tf.truncated_normal(filter_shape, stddev=0.1), name=&quot;W&quot;) b = tf.Variable(tf.constant(0.1, shape=[num_filters]), name=&quot;b&quot;) conv = tf.nn.conv2d( self.embedded_chars_expanded, W, strides=[1, 1, 1, 1], padding=&quot;VALID&quot;, name=&quot;conv&quot;) # Apply nonlinearity h = tf.nn.relu(tf.nn.bias_add(conv, b), name=&quot;relu&quot;) # Max-pooling over the outputs pooled = tf.nn.max_pool( h, ksize=[1, sequence_length - filter_size + 1, 1, 1], strides=[1, 1, 1, 1], padding=&apos;VALID&apos;, name=&quot;pool&quot;) pooled_outputs.append(pooled)# Combine all the pooled featuresnum_filters_total = num_filters * len(filter_sizes)self.h_pool = tf.concat(3, pooled_outputs)self.h_pool_flat = tf.reshape(self.h_pool, [-1, num_filters_total]) è¿™é‡ŒW æ˜¯filter çŸ©é˜µï¼Œh æ˜¯å¯¹å·ç§¯ç»“æžœè¿›è¡Œéžçº¿æ€§è½¬æ¢ä¹‹åŽçš„ç»“æžœã€‚æ¯ä¸ª filteréƒ½ä»Žæ•´ä¸ªembeddingåˆ’è¿‡,ä¸åŒä¹‹å¤„åœ¨äºŽè¦†ç›–å¤šå°‘å•è¯ã€‚ â€œVALIDâ€ paddingæ„å‘³ç€æ²¡æœ‰å¯¹å¥å­çš„è¾¹ç¼˜è¿›è¡Œpadding,ä¹Ÿå°±æ˜¯ç”¨äº†narrow convolutionï¼Œè¾“å‡ºçš„å½¢çŠ¶æ˜¯ [1, sequence_length - filter_size + 1, 1, 1]ã€‚narrow convolutionä¸Ž wide convolutionçš„åŒºåˆ«æ˜¯æ˜¯å¦å¯¹è¾¹ç¼˜è¿›è¡Œå¡«å……ã€‚ è¿™é‡Œå†™å›¾ç‰‡æè¿° Narrow vs. Wide Convolution. Filter size 5, input size 7. Source: A Convolutional Neural Network for Modelling Sentences (2014)å½“ä½ çš„filteræ¯”è¾“å…¥çš„sizeè¿˜å¤§æ—¶ï¼Œä½ å¯ä»¥çœ‹åˆ°wide convolutionæ˜¯å¤šä¹ˆçš„æœ‰ç”¨ï¼Œç”šè‡³è¯´æ˜¯å¿…é¡»çš„ã€‚å¦‚ä¸Šæ‰€ç¤ºï¼Œnarrow convolutionäº§å‡ºçš„å°ºå¯¸æ˜¯ï¼ˆ7-5ï¼‰+1=3ï¼Œè€Œwide convolutionäº§å‡ºå°ºå¯¸æ˜¯ï¼ˆ7+2*4-5ï¼‰+1=11ã€‚é€šå¸¸ï¼Œè¾“å‡ºå°ºå¯¸çš„è§„åˆ™è¡¨è¾¾å¼ä¸ºï¼š è¿™é‡Œå†™å›¾ç‰‡æè¿° å¯¹è¾“å‡ºè¿›è¡Œmax-poolingåŽå¾—åˆ°å½¢çŠ¶æ˜¯ [batch_size, 1, 1, num_filters] çš„å¼ é‡ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç‰¹å¾å‘é‡ï¼Œæœ€åŽä¸€ä¸ªç»´åº¦æ˜¯ç‰¹å¾ä»£è¡¨æ•°é‡ã€‚æŠŠæ¯ä¸€ä¸ªmax-poolingä¹‹åŽçš„å¼ é‡åˆå¹¶èµ·æ¥ä¹‹åŽå¾—åˆ°ä¸€ä¸ªé•¿å‘é‡ [batch_size, num_filters_total]. in tf.reshape ä¸­çš„ -1è¡¨ç¤ºTå°†å‘é‡å±•å¹³ã€‚ DROPOUT LAYERDropoutä¹Ÿè®¸æ˜¯cnnä¸­æœ€æµè¡Œçš„æ­£åˆ™åŒ–æ–¹æ³•ã€‚dropoutçš„æƒ³æ³•å¾ˆç®€å•ï¼Œdropout layeréšæœºåœ°é€‰æ‹©ä¸€äº›ç¥žç»å…ƒï¼Œä½¿å…¶å¤±æ´»ã€‚è¿™æ ·å¯ä»¥é˜»æ­¢co-adapting,è¿«ä½¿å®ƒä»¬æ¯ä¸€ä¸ªéƒ½å­¦ä¹ åˆ°æœ‰ç”¨çš„ç‰¹å¾ã€‚å¤±æ´»çš„ç¥žç»å•å…ƒä¸ªæ•°ç”±dropout_keep_prob å†³å®šã€‚åœ¨è®­ç»ƒçš„æ—¶å€™è®¾ä¸º 0.5 ,æµ‹è¯•çš„æ—¶å€™è®¾ä¸º 1 (disable dropout) . 123# Add dropoutwith tf.name_scope(&quot;dropout&quot;): self.h_drop = tf.nn.dropout(self.h_pool_flat, self.dropout_keep_prob) SCORES AND PREDICTIONSåˆ©ç”¨ç‰¹å¾å‘é‡ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨çŸ©é˜µç›¸ä¹˜è®¡ç®—ä¸¤ç±»çš„å¾—åˆ†ï¼Œä¹Ÿå¯ä»¥ç”¨ softmaxå‡½æ•°è®¡ç®—ä¸¤ç±»çš„æ¦‚çŽ‡å€¼ã€‚ 12345with tf.name_scope(&quot;output&quot;): W = tf.Variable(tf.truncated_normal([num_filters_total, num_classes], stddev=0.1), name=&quot;W&quot;) b = tf.Variable(tf.constant(0.1, shape=[num_classes]), name=&quot;b&quot;) self.scores = tf.nn.xw_plus_b(self.h_drop, W, b, name=&quot;scores&quot;) self.predictions = tf.argmax(self.scores, 1, name=&quot;predictions&quot;) LOSS AND ACCURACYå¯ä»¥ç”¨å¾—åˆ†å®šä¹‰æŸå¤±å€¼ã€‚æŸå¤±è®¡ç®—çš„æ˜¯ç½‘ç»œçš„è¯¯å·®ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å°†å…¶æœ€å°åŒ–ï¼Œåˆ†ç±»é—®é¢˜æ ‡å‡†çš„æŸå¤±å‡½æ•°æ˜¯äº¤å‰ç†µæŸå¤±ã€‚ 1234# Calculate mean cross-entropy losswith tf.name_scope(&quot;loss&quot;): losses = tf.nn.softmax_cross_entropy_with_logits(self.scores, self.input_y) self.loss = tf.reduce_mean(losses) è®¡ç®—æ­£ç¡®çŽ‡ 1234# Calculate Accuracywith tf.name_scope(&quot;accuracy&quot;): correct_predictions = tf.equal(self.predictions, tf.argmax(self.input_y, 1)) self.accuracy = tf.reduce_mean(tf.cast(correct_predictions, &quot;float&quot;), name=&quot;accuracy&quot;) MINIMIZING THE LOSSåˆ©ç”¨TensorFlow å†…ç½®çš„optimizersï¼Œä¾‹å¦‚ Adam optimizerï¼Œä¼˜åŒ–ç½‘ç»œæŸå¤±ã€‚ 1234global_step = tf.Variable(0, name=&quot;global_step&quot;, trainable=False)optimizer = tf.train.AdamOptimizer(1e-4)grads_and_vars = optimizer.compute_gradients(cnn.loss)train_op = optimizer.apply_gradients(grads_and_vars, global_step=global_step) train_op æ˜¯ä¸€ä¸ªæ–°å»ºçš„æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‚æ•°ä¸Šè¿›è¡Œæ¢¯åº¦æ›´æ–°ã€‚æ¯æ‰§è¡Œä¸€æ¬¡ train_op å°±æ˜¯ä¸€æ¬¡è®­ç»ƒæ­¥éª¤ã€‚ TensorFlow å¯ä»¥è‡ªåŠ¨åœ°è®¡ç®—æ‰é‚£äº›å˜é‡æ˜¯â€œå¯è®­ç»ƒçš„â€ç„¶åŽè®¡ç®—ä»–ä»¬çš„æ¢¯åº¦ã€‚é€šè¿‡global_stepè¿™ä¸ªå˜é‡å¯ä»¥è®¡ç®—è®­ç»ƒçš„æ­¥æ•°ï¼Œæ¯è®­ç»ƒä¸€æ¬¡è‡ªåŠ¨åŠ ä¸€ã€‚ CHECKPOINTINGTensorFlow ä¸­å¯ä»¥ç”¨checkpointing ä¿å­˜æ¨¡åž‹çš„å‚æ•°ã€‚checkpointingä¸­çš„å‚æ•°ä¹Ÿå¯ä»¥ç”¨æ¥ç»§ç»­è®­ç»ƒã€‚ 1234567# Checkpointingcheckpoint_dir = os.path.abspath(os.path.join(out_dir, &quot;checkpoints&quot;))checkpoint_prefix = os.path.join(checkpoint_dir, &quot;model&quot;)# Tensorflow assumes this directory already exists so we need to create itif not os.path.exists(checkpoint_dir): os.makedirs(checkpoint_dir)saver = tf.train.Saver(tf.all_variables()) DEFINING A SINGLE TRAINING STEPç”¨ä¸€ä¸ªbatchçš„æ•°æ®è¿›è¡Œä¸€æ¬¡è®­ç»ƒã€‚ 123456789101112131415def train_step(x_batch, y_batch): &quot;&quot;&quot; A single training step &quot;&quot;&quot; feed_dict = &#123; cnn.input_x: x_batch, cnn.input_y: y_batch, cnn.dropout_keep_prob: FLAGS.dropout_keep_prob &#125; _, step, summaries, loss, accuracy = sess.run( [train_op, global_step, train_summary_op, cnn.loss, cnn.accuracy], feed_dict) time_str = datetime.datetime.now().isoformat() print(&quot;&#123;&#125;: step &#123;&#125;, loss &#123;:g&#125;, acc &#123;:g&#125;&quot;.format(time_str, step, loss, accuracy)) train_summary_writer.add_summary(summaries, step) train_op ä»€ä¹ˆä¹Ÿä¸è¿”å›žï¼Œåªæ˜¯æ›´æ–°ç½‘ç»œä¸­çš„å‚æ•°ã€‚æœ€ç»ˆï¼Œæ‰“å°å‡ºå½“å‰è®­ç»ƒçš„æŸå¤±å€¼ä¸Žæ­£ç¡®çŽ‡ã€‚å¦‚æžœbatchçš„sizeå¾ˆå°çš„è¯ï¼Œè¿™ä¸¤è€…åœ¨ä¸åŒçš„batchä¸­å·®åˆ«å¾ˆå¤§ã€‚å› ä¸ºä½¿ç”¨äº†dropoutï¼Œè®­ç»ƒçš„metricså¯èƒ½è¦æ¯”æµ‹è¯•çš„metricsç³Ÿç³•ã€‚ åŒæ ·çš„å‡½æ•°ä¹Ÿå¯ä»¥ç”¨åœ¨æµ‹è¯•æ—¶ã€‚ 12345678910111213141516def dev_step(x_batch, y_batch, writer=None): &quot;&quot;&quot; Evaluates model on a dev set &quot;&quot;&quot; feed_dict = &#123; cnn.input_x: x_batch, cnn.input_y: y_batch, cnn.dropout_keep_prob: 1.0 &#125; step, summaries, loss, accuracy = sess.run( [global_step, dev_summary_op, cnn.loss, cnn.accuracy], feed_dict) time_str = datetime.datetime.now().isoformat() print(&quot;&#123;&#125;: step &#123;&#125;, loss &#123;:g&#125;, acc &#123;:g&#125;&quot;.format(time_str, step, loss, accuracy)) if writer: writer.add_summary(summaries, step) TRAINING LOOPé€šè¿‡è¿­ä»£æ•°æ®è¿›è¡Œè®­ç»ƒã€‚ 123456789101112131415# Generate batchesbatches = data_helpers.batch_iter( zip(x_train, y_train), FLAGS.batch_size, FLAGS.num_epochs)# Training loop. For each batch...for batch in batches: x_batch, y_batch = zip(*batch) train_step(x_batch, y_batch) current_step = tf.train.global_step(sess, global_step) if current_step % FLAGS.evaluate_every == 0: print(&quot;\nEvaluation:&quot;) dev_step(x_dev, y_dev, writer=dev_summary_writer) print(&quot;&quot;) if current_step % FLAGS.checkpoint_every == 0: path = saver.save(sess, checkpoint_prefix, global_step=current_step) print(&quot;Saved model checkpoint to &#123;&#125;\n&quot;.format(path)) VISUALIZING RESULTS IN TENSORBOARD è¿™é‡Œå†™å›¾ç‰‡æè¿° è¿™é‡Œå†™å›¾ç‰‡æè¿° ä»Žä¸Šå›¾ä¸­æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°: æˆ‘ä»¬çš„è®­ç»ƒ metricsä¸å¹³æ»‘ï¼Œå› ä¸ºç”¨çš„batch sizeså¾ˆå°ã€‚å¦‚æžœç”¨å¤§çš„batches (æˆ–è€…åœ¨æ•´ä¸ªæµ‹è¯•é›†ä¸Šè¿›è¡Œè¯„ä¼°)ï¼Œä¼šå¾—åˆ°å¹³æ»‘çš„çº¿ã€‚ æµ‹è¯•é›†çš„ accuracyæ˜Žæ˜¾æ¯”è®­ç»ƒé›†çš„ä½Žï¼Œè¯´æ˜Žç½‘ç»œè¿‡æ‹Ÿåˆäº†ï¼Œæˆ‘ä»¬åº”è¯¥ç”¨æ›´å¤§çš„æ•°æ®é›†ï¼Œæ›´å¼ºçš„æ­£åˆ™åŒ–ï¼Œæ›´å°‘çš„æ¨¡åž‹å‚æ•°ã€‚ è®­ç»ƒé›†ä¸Šçš„ loss å’Œ accuracyæ¯”æµ‹è¯•é›†ä½Žçš„åŽŸå› æ˜¯ç”¨äº†dropout. å‚è€ƒï¼šhttp://www.wildml.com/2015/12/implementing-a-cnn-for-text-classification-in-tensorflow/]]></content>
      <tags>
        <tag>TensorFlow</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å®žéªŒå®¤æ‹›æ–°é¢˜ç›®â‘¡]]></title>
    <url>%2F2018%2F05%2F08%2F%E5%AE%9E%E9%AA%8C%E5%AE%A4%E6%8B%9B%E6%96%B0%E9%A2%98%E7%9B%AE(2)%2F</url>
    <content type="text"><![CDATA[ç«è½¦è£…ç®± çŽ°æœ‰ä¸€æ‰¹ç«è½¦è½¦åŽ¢éœ€è¦æŒ‰ç…§æ¯èŠ‚è½¦åŽ¢ä¸­æ‰€å«è´§ç‰©æ•°é‡è¿›è¡Œè¿žæŽ¥å‘è½¦è¦æ±‚ï¼š å…¶ä¸­æ¯èŠ‚è½¦åŽ¢ä¸­åŒ…å«ä¸¤ç§å…ƒç´  è½¦åŽ¢å·ï¼šTrainNum ä»¥åŠæ‰€è£…è½½è´§ç‰©æ•°é‡ï¼šGoodsNumï¼› å…¶ä¸­æ¯èŠ‚è½¦åŽ¢ä»¥å‰è½¦åŽ¢ -&gt; åŽè½¦åŽ¢ çš„å½¢å¼è¿›è¡Œè¿žæŽ¥ï¼› æŒ‰ç…§æ¯èŠ‚è½¦åŽ¢çš„GoodsNumçš„é™åºè¿›è¡Œè¿žæŽ¥ï¼› è‡ªå®šä¹‰ä¸€ä¸ªTrainCabinæ•°æ®ç»“æž„ 12345struct TrainCabin&#123;//TODO structure your struct&#125;; å†™å‡ºä¸€ä¸ªå‡½æ•° 12TrainCabin* AssembleTraninCabin(TrainCabin* TrainList);//é€‰æ‹©ä½ è®¤ä¸ºæ—¶é—´å¤æ‚åº¦æœ€å°çš„ç®—æ³•è¿›è¡Œç¼–ç  è¿”å›žå€¼ä¸ºå·²æŒ‰ç…§ä»¥ä¸Šè¦æ±‚æŽ’å¥½åºåŽçš„ç«è½¦é“¾è¡¨ è¾“å…¥ ç¬¬ä¸€ä¸ªå€¼ä¸ºTrainNum ç¬¬äºŒä¸ªå€¼ä¸ºGoodsNum ä¸­é—´ä»¥|åˆ†å‰² è¾“å…¥-1 ä»¥ç»“æŸè¾“å…¥ Inputï¼š1 | 3 2 | 5 3 | 7 4 | 2 5 | 0 -1 è¾“å‡º åœ¨æŽ§åˆ¶å°ä¸­æ‰“å°æŽ’å¥½åºçš„ç«è½¦åˆ— æŒ‰ç…§ä»¥ä¸‹ç¤ºä¾‹æ ¼å¼ Outputï¼š| 3 | 7 | -&gt; | 2 | 5 | -&gt; | 1 | 3 | -&gt; | 4 | 2 | -&gt; | 5 | 0 | é¢˜è§£éžå¸¸åŸºç¡€çš„ä¸€é“è€ƒå¯Ÿæ•°æ®æŠ½è±¡ã€æ•°æ®ç»“æž„æž„é€ ã€æŽ’åºç®—æ³•ã€å•å‘é“¾è¡¨çš„ç®€å•é¢˜â€¦ä½†ä»Šå¤©çš„çŽ°åœºæƒ…å†µä¸å®¹ä¹è§‚12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576#include&lt;iostream.h&gt;#include&lt;stdlib.h&gt;typedef struct TrainCabin&#123; int TrainNum; int GoodsNum; struct TrainCabin *next;&#125;TrainCabin;TrainCabin* AssembleTraninCabin(TrainCabin *TrainList)&#123; TrainCabin *i=TrainList; TrainCabin *j; TrainCabin *temp=(TrainCabin*)malloc(sizeof(TrainCabin)); temp-&gt;next=NULL; while(i!=NULL) &#123; j=i-&gt;next; while(j!=NULL) &#123; if((*i).GoodsNum&gt;(*j).GoodsNum) &#123; (*temp).TrainNum=(*i).TrainNum; (*temp).GoodsNum=(*i).GoodsNum; (*i).TrainNum=(*j).TrainNum; (*i).GoodsNum=(*j).GoodsNum; (*j).TrainNum=(*temp).TrainNum; (*j).GoodsNum=(*temp).GoodsNum; &#125; j=j-&gt;next; &#125; i=i-&gt;next; &#125; return TrainList;&#125;void display(const TrainCabin *TrainList)&#123; while(TrainList-&gt;next!=NULL) &#123; cout&lt;&lt;"|"&lt;&lt;(*TrainList).TrainNum&lt;&lt;"|"&lt;&lt;(*TrainList).GoodsNum&lt;&lt;"| -&gt; "; TrainList=TrainList-&gt;next; &#125; cout&lt;&lt;"|"&lt;&lt;(*TrainList).TrainNum&lt;&lt;"|"&lt;&lt;(*TrainList).GoodsNum&lt;&lt;"|"&lt;&lt;endl;&#125;int main()&#123; int TrainNum=0,GoodsNum=0; TrainCabin *frist,*last; TrainCabin *temp; frist=(TrainCabin*)malloc(sizeof(TrainCabin)); frist-&gt;next=NULL; last=frist; char input; while(1) &#123; cin&gt;&gt;TrainNum; if(TrainNum==-1) break; cin&gt;&gt;input; cin&gt;&gt;GoodsNum; temp=(TrainCabin*)malloc(sizeof(TrainCabin)); temp-&gt;TrainNum=TrainNum; temp-&gt;GoodsNum=GoodsNum; temp-&gt;next=NULL; last-&gt;next=temp; last=temp; &#125; TrainCabin *result=AssembleTraninCabin((*frist).next); display(result); return 0;&#125;]]></content>
      <tags>
        <tag>Lab_Interview</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŽç”Ÿå¯ç•]]></title>
    <url>%2F2018%2F05%2F06%2F%E5%90%8E%E7%94%9F%E5%8F%AF%E7%95%8F%2F</url>
    <content type="text"><![CDATA[Take your Child to work Day at Google 2018 When I heared a kid who Firmly said I will be a video game programmer, I realize that it is extraordinary.]]></content>
      <tags>
        <tag>Inspire</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Fragment Navigation Drawer]]></title>
    <url>%2F2018%2F05%2F05%2FFragment%20Navigation%20Drawer%2F</url>
    <content type="text"><![CDATA[..æœ€è¿‘è¿™æ®µæ—¶é—´åœ¨ç€æ‰‹åšä¸€ä¸ªå¼€æºé¡¹ç›®..ä½¿ç”¨æ–°é²œçš„Kotlinä»¥åŠGoogleæœ€ç»å…¸çš„MaterialDesign..ç”±äºŽåˆšå¼€å§‹ä½¿ç”¨è‡ªç„¶ä¼šç¢°åˆ°å¾ˆå¤šå‘..ä¸Šé¢æ˜¯æˆ‘çš„é¡¹ç›®LogoðŸ¤£æœ¬ç¯‡æ–‡ç« é‡ç‚¹è®²è§£æœ€ç»å…¸çš„MaterialDesignä¸­çš„æŠ½å±‰å¼å¸ƒå±€ Navigation Drawerè™½ç„¶AndroidStudioå·²ç»é›†æˆäº†Sampleä½†è·Ÿæ‰‹å¤çŽ°ä¸€éè¿˜æ˜¯å¾ˆå—ç›Šçš„ã€‚ åœ¨2015å¹´I/Oå¤§ä¼šä¸Š..Googleå‘å¸ƒäº†NavigationViewï¼Œä¸Žä¹‹å‰çš„å®˜æ–¹æ–‡æ¡£ç›¸æ¯”ï¼Œæœ¬æ–‡æ¡£æ›´å®¹æ˜“åˆ›å»ºå®Œæ•´çš„æŠ½å±‰å¼å¸ƒå±€éšç€Android 5.0 Lollipopçš„å‘å¸ƒï¼Œæ–°çš„ææ–™è®¾è®¡é£Žæ ¼çš„æŠ½å±‰æ¨ªè·¨å±å¹•çš„æ•´ä¸ªé«˜åº¦ï¼Œå¹¶æ˜¾ç¤ºåœ¨ActionBaråŠé€æ˜Žçš„ä¸Šæ–¹å¹¶é‡å StatusBarã€‚Like thisï¼š Usageæœ¬æŒ‡å—å°†ä»‹ç»å¦‚ä½•å»ºç«‹ä¸€ä¸ªåŸºäºŽMaterialDesignçš„å¯ä»¥åˆ‡æ¢ä¸åŒFragmentåˆ°å†…å®¹åŒºåŸŸçš„æŠ½å±‰å¼å¯¼èˆªã€‚In this way,you can define multiple fragments, and then define the list of options which will display in the drawers items list. Each item when clicked will switch the relevant fragment into the activityâ€™s container view. SetupMake sure to setup the Google Design Support Library before using Googleâ€™s new NavigationView,announced as part of the Android M release. The NavigationView should be backwards compatible with all versions down to Android 2.1. Make sure you have this Gradle dependency added to your app/build.gradle file:123dependencies &#123; implementation 'com.android.support:design:27.1.1'&#125; Setup Drawer Resources Create a menu/drawer_view.xml file:1234567891011121314151617&lt;menu xmlns:android="http://schemas.android.com/apk/res/android"&gt; &lt;group android:checkableBehavior="single"&gt; &lt;item android:id="@+id/nav_first_fragment" android:icon="@drawable/ic_one" android:title="First" /&gt; &lt;item android:id="@+id/nav_second_fragment" android:icon="@drawable/ic_two" android:title="Second" /&gt; &lt;item android:id="@+id/nav_third_fragment" android:icon="@drawable/ic_three" android:title="Third" /&gt; &lt;/group&gt;&lt;/menu&gt; Note that you can set one of these elements to be default selected by using android:checked=&quot;true&quot; . You can also create subheaders too and group elements together: 123456789101112&lt;item android:title="Sub items"&gt; &lt;menu&gt; &lt;group android:checkableBehavior="single"&gt; &lt;item android:icon="@drawable/ic_dashboard" android:title="Sub item 1" /&gt; &lt;item android:icon="@drawable/ic_forum" android:title="Sub item 2" /&gt; &lt;/group&gt; &lt;/menu&gt; &lt;/item&gt; Define FragmentsæŽ¥ä¸‹æ¥ï¼Œä½ éœ€è¦æ¥å®šä¹‰ä½ çš„Fragmentsï¼Œè¿™äº›Fragmentså°†ä¼šæ˜¾ç¤ºåœ¨ä½ çš„Activityä¸­ã€‚These can be any support fragments you define within your application. Make sure that all the fragments extend from android.support.v4.app.Fragment. Setup ToolbarIn order to slide our navigation drawer over the ActionBar, we need to use the new Toolbar widget as defined in the AppCompat v21 library.The Toolbar can be embedded into your view hierarchy which makes sure that the drawer slides over the ActionBar. Create a new layout file res/layout/toolbar.xml with the following code:1234567891011&lt;android.support.v7.widget.Toolbar xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="http://schemas.android.com/apk/res-auto" android:id="@+id/toolbar" android:layout_height="wrap_content" android:layout_width="match_parent" android:fitsSystemWindows="true" android:minHeight="?attr/actionBarSize" app:theme="@style/ThemeOverlay.AppCompat.Dark.ActionBar" android:background="?attr/colorPrimaryDark"&gt;&lt;/android.support.v7.widget.Toolbar&gt; Note that when the android:fitsSystemWindows attribute is set to true for a view, the view would be laid out as if the StatusBar and the ActionBar were present i.e. the UI on top gets padding enough to not be obscured by the navigation bar. Without this attribute, there is not enough padding factored into consideration for the ToolBar: We want our main content view to have the navigation bar and hence android:fitsSystemWindows is set to true for the Toolbar. To use the Toolbar as an ActionBar, you need to disable the default ActionBar. This can be done by setting the app theme in styles.xml file. 12345678&lt;resources&gt; &lt;!-- Base application theme. --&gt; &lt;style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar"&gt; &lt;item name="colorPrimary"&gt;#673AB7&lt;/item&gt; &lt;item name="colorPrimaryDark"&gt;#512DA8&lt;/item&gt; &lt;item name="colorAccent"&gt;#FF4081&lt;/item&gt; &lt;/style&gt;&lt;/resources&gt; Also note that normally you should decide on your color scheme by going to Material Palette and choosing a primary and dark primary color. For this example, we will pick purple-based colors as shown in the screenshot. Note: If you forget to disable the ActionBar in styles.xml, you are likely to see a java.lang.IllegalStateException with an error message that reads This Activity already has an action bar supplied by the window decor. Do not request Window.FEATURE_ACTION_BAR and set windowActionBar to false in your theme to use a Toolbar instead.If you see this message, you need to make sure to follow the previous steps. Setup Drawer in ActivityNext, letâ€™s setup a basic navigation drawer based on the following layout file which has the entire drawer setup in res/layout/activity_main.xml. Note that the Toolbar is added as the first child of the main content view by adding the include tag. Note: if you are using a CoordinatorLayout, it must not lie outside of the DrawerLayout. See https://stackoverflow.com/questions/32523188/coordinatorlayout-appbarlayout-navigationdrawer 1234567891011121314151617181920212223242526272829303132333435363738&lt;!-- This DrawerLayout has two children at the root --&gt;&lt;android.support.v4.widget.DrawerLayout xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="http://schemas.android.com/apk/res-auto" android:id="@+id/drawer_layout" android:layout_width="match_parent" android:layout_height="match_parent"&gt; &lt;!-- This LinearLayout represents the contents of the screen --&gt; &lt;LinearLayout android:layout_width="match_parent" android:layout_height="match_parent" android:orientation="vertical"&gt; &lt;!-- The ActionBar displayed at the top --&gt; &lt;include layout="@layout/toolbar" android:layout_width="match_parent" android:layout_height="wrap_content" /&gt; &lt;!-- The main content view where fragments are loaded --&gt; &lt;FrameLayout android:id="@+id/flContent" app:layout_behavior="@string/appbar_scrolling_view_behavior" android:layout_width="match_parent" android:layout_height="match_parent" /&gt; &lt;/LinearLayout&gt; &lt;!-- The navigation drawer that comes from the left --&gt; &lt;!-- Note that `android:layout_gravity` needs to be set to 'start' --&gt; &lt;android.support.design.widget.NavigationView android:id="@+id/nvView" android:layout_width="wrap_content" android:layout_height="match_parent" android:layout_gravity="start" android:background="@android:color/white" app:menu="@menu/drawer_view" /&gt;&lt;/android.support.v4.widget.DrawerLayout&gt; Now, letâ€™s setup the drawer in our activity. We can also setup the menu icon too. 123456789101112131415161718192021222324252627282930313233343536373839 public class MainActivity extends AppCompatActivity &#123; private DrawerLayout mDrawer; private Toolbar toolbar; private NavigationView nvDrawer; // Make sure to be using android.support.v7.app.ActionBarDrawerToggle version. // The android.support.v4.app.ActionBarDrawerToggle has been deprecated. private ActionBarDrawerToggle drawerToggle; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); // Set a Toolbar to replace the ActionBar. toolbar = (Toolbar) findViewById(R.id.toolbar); setSupportActionBar(toolbar); // Find our drawer view mDrawer = (DrawerLayout) findViewById(R.id.drawer_layout); &#125; @Override public boolean onOptionsItemSelected(MenuItem item) &#123; // The action bar home/up action should open or close the drawer. switch (item.getItemId()) &#123; case android.R.id.home: mDrawer.openDrawer(GravityCompat.START); return true; &#125; return super.onOptionsItemSelected(item); &#125;&#125; Navigating between Menu ItemsSetup a handler to respond to click events on the navigation elements and swap out the fragment. This can be put into the activity directly: 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071public class MainActivity extends AppCompatActivity &#123; // ... @Override protected void onCreate(Bundle savedInstanceState) &#123; // ...From section above... // Find our drawer view nvDrawer = (NavigationView) findViewById(R.id.nvView); // Setup drawer view setupDrawerContent(nvDrawer); &#125; private void setupDrawerContent(NavigationView navigationView) &#123; navigationView.setNavigationItemSelectedListener( new NavigationView.OnNavigationItemSelectedListener() &#123; @Override public boolean onNavigationItemSelected(MenuItem menuItem) &#123; selectDrawerItem(menuItem); return true; &#125; &#125;); &#125; public void selectDrawerItem(MenuItem menuItem) &#123; // Create a new fragment and specify the fragment to show based on nav item clicked Fragment fragment = null; Class fragmentClass; switch(menuItem.getItemId()) &#123; case R.id.nav_first_fragment: fragmentClass = FirstFragment.class; break; case R.id.nav_second_fragment: fragmentClass = SecondFragment.class; break; case R.id.nav_third_fragment: fragmentClass = ThirdFragment.class; break; default: fragmentClass = FirstFragment.class; &#125; try &#123; fragment = (Fragment) fragmentClass.newInstance(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; // Insert the fragment by replacing any existing fragment FragmentManager fragmentManager = getSupportFragmentManager(); fragmentManager.beginTransaction().replace(R.id.flContent, fragment).commit(); // Highlight the selected item has been done by NavigationView menuItem.setChecked(true); // Set action bar title setTitle(menuItem.getTitle()); // Close the navigation drawer mDrawer.closeDrawers(); &#125; // ...&#125; Add Navigation Header The NavigationView also accepts a custom attribute that can reference a layout that provides a header of our layout. For instance, you can create a layout/nav_header.xml similar to the following: 1234567891011121314151617&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent" android:layout_height="192dp" android:background="?attr/colorPrimaryDark" android:padding="16dp" android:theme="@style/ThemeOverlay.AppCompat.Dark" android:orientation="vertical" android:gravity="bottom"&gt; &lt;TextView android:layout_width="match_parent" android:layout_height="wrap_content" android:text="Header" android:textColor="@android:color/white" android:textAppearance="@style/TextAppearance.AppCompat.Body1"/&gt;&lt;/LinearLayout&gt; You would then reference this in the layout res/layout/activity_main.xml in the NavigationView with the app:headerLayout custom attribute: 12345678&lt;!-- res/layout/activity_main.xml --&gt; &lt;!-- The navigation drawer --&gt; &lt;android.support.design.widget.NavigationView ... app:headerLayout="@layout/nav_header"&gt; &lt;/android.support.design.widget.NavigationView&gt; This app:headerLayout inflates the specified layout into the header automatically. This can alternatively be done at runtime with: 123456789// Lookup navigation viewNavigationView navigationView = (NavigationView) findViewById(R.id.nav_draw);// Inflate the header view at runtimeView headerLayout = navigationView.inflateHeaderView(R.layout.nav_header);// We can now look up items within the header if neededImageView ivHeaderPhoto = headerLayout.findViewById(R.id.imageView); Getting references to the headerNote: Version 23.1.0 of the design support library switches NavigationView to using a RecyclerView and causes NPE (null exceptions) on header lookups unless the header is added at runtime. If you need to get a reference to the header, you need to use the new getHeaderView()method introduced in the latest v23.1.1 update: 1234567// There is usually only 1 header view. // Multiple header views can technically be added at runtime.// We can use navigationView.getHeaderCount() to determine the total number.View headerLayout = navigationView.getHeaderView(0); åŠ¨ç”»æ±‰å ¡å›¾æ ‡ ä¸ºäº†è®©æ±‰å ¡åŒ…å›¾æ ‡åŠ¨ç”»æ˜¾ç¤ºæŠ½å±‰æ­£åœ¨æ‰“å¼€å’Œå…³é—­ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ActionBarDrawerToggleç±»ã€‚ åœ¨ä½ çš„res/values/strings.xmlæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š 12345&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;resources&gt; &lt;string name="drawer_open"&gt;Open navigation drawer&lt;/string&gt; &lt;string name="drawer_close"&gt;Close navigation drawer&lt;/string&gt;&lt;/resources&gt; æˆ‘ä»¬éœ€è¦å°†DrawerLayoutå’Œå·¥å…·æ ç»“åˆåœ¨ä¸€èµ·ï¼š 1234567891011121314151617181920212223protected void onCreate(Bundle savedInstanceState) &#123; // Set a Toolbar to replace the ActionBar. toolbar = (Toolbar) findViewById(R.id.toolbar); setSupportActionBar(toolbar); // Find our drawer view mDrawer = (DrawerLayout) findViewById(R.id.drawer_layout); drawerToggle = setupDrawerToggle(); // Tie DrawerLayout events to the ActionBarToggle mDrawer.addDrawerListener(drawerToggle); &#125; private ActionBarDrawerToggle setupDrawerToggle() &#123; // NOTE: Make sure you pass in a valid toolbar reference. ActionBarDrawToggle() does not require it // and will not render the hamburger icon without it. return new ActionBarDrawerToggle(this, mDrawer, toolbar, R.string.drawer_open, R.string.drawer_close); &#125; æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿åœ¨æ¢å¤å±å¹•æˆ–é…ç½®å‘ç”Ÿå˜åŒ–ï¼ˆå³å±å¹•æ—‹è½¬ï¼‰æ—¶åŒæ­¥çŠ¶æ€ï¼š 1234567891011121314151617181920212223// `onPostCreate` called when activity start-up is complete after `onStart()`// NOTE 1: Make sure to override the method with only a single `Bundle` argument// Note 2: Make sure you implement the correct `onPostCreate(Bundle savedInstanceState)` method. // There are 2 signatures and only `onPostCreate(Bundle state)` shows the hamburger icon.@Overrideprotected void onPostCreate(Bundle savedInstanceState) &#123; super.onPostCreate(savedInstanceState); // Sync the toggle state after onRestoreInstanceState has occurred. drawerToggle.syncState();&#125;@Overridepublic void onConfigurationChanged(Configuration newConfig) &#123; super.onConfigurationChanged(newConfig); // Pass any configuration change to the drawer toggles drawerToggle.onConfigurationChanged(newConfig);&#125; æˆ‘ä»¬è¿˜éœ€è¦æ›´æ”¹onOptionsItemSelected()æ–¹æ³•å¹¶å…è®¸ActionBarToggleå¤„ç†äº‹ä»¶ã€‚ 1234567@Overridepublic boolean onOptionsItemSelected(MenuItem item) &#123; if (drawerToggle.onOptionsItemSelected(item)) &#123; return true; &#125; return super.onOptionsItemSelected(item);&#125; ActionBarToggleå°†æ‰§è¡Œä¸Žå…ˆå‰å®Œæˆçš„åŠŸèƒ½ç›¸åŒçš„åŠŸèƒ½ï¼Œä½†ä¼šæ·»åŠ æ›´å¤šæ£€æŸ¥ï¼Œå¹¶å…è®¸é¼ æ ‡â€‹â€‹å•å‡»å›¾æ ‡ä»¥æ‰“å¼€å’Œå…³é—­æŠ½å±‰ã€‚æœ‰å…³æ›´å¤šä¸Šä¸‹æ–‡ï¼Œè¯·å‚é˜…æºä»£ç ã€‚ æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒActionBarDrawerToggleä¼šä¸ºæ‚¨å‘ˆçŽ°æ±‰å ¡å›¾æ ‡çš„è‡ªå®šä¹‰DrawerArrowDrawableã€‚ å¦å¤–ï¼Œè¯·ç¡®ä¿ä½¿ç”¨çš„android.support.v7.app.ActionBarDrawerToggleç‰ˆæœ¬ã€‚åœ¨android.support.v4.app.ActionBarDrawerToggleå·²è¢«å¼ƒç”¨ã€‚ ä½¿çŠ¶æ€æ åŠé€æ˜Ž è¦ä½¿çŠ¶æ€æ å˜æˆåŠé€æ˜ŽçŠ¶æ€å¹¶è®©æˆ‘ä»¬çš„æŠ½å±‰æ»‘è¿‡å®ƒï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶è®¾ç½®android:windowTranslucentStatusä¸ºtrueã€‚ç”±äºŽæ­¤æ ·å¼ä¸é€‚ç”¨äºŽä¹‹å‰çš„Kitkatè®¾å¤‡ï¼Œå› æ­¤æˆ‘ä»¬å°†ä¸ºres/values-v19/styles.xmlAPIç‰ˆæœ¬19åŠä¹‹åŽçš„ç‰ˆæœ¬æ·»åŠ  æ–‡ä»¶ã€‚ æ³¨æ„ï¼šå¦‚æžœres/values/styles.xmlç›´æŽ¥ç”¨æ­¤android:windowTranslucentStatusè¡Œä¿®æ”¹ï¼Œåˆ™å¯èƒ½éœ€è¦æž„å»ºä»…é€‚ç”¨äºŽ19æˆ–æ›´é«˜ç‰ˆæœ¬çš„SDKï¼Œè¿™æ˜¾ç„¶ä¼šé™åˆ¶æ‚¨æ”¯æŒè®¸å¤šè¾ƒæ—§çš„è®¾å¤‡ã€‚ åœ¨res/values-v19/styles.xmlæˆ‘ä»¬å¯ä»¥æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š 1234567&lt;resources&gt; &lt;!-- Base application theme. --&gt; &lt;style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar"&gt; &lt;!-- Customize your theme here. --&gt; &lt;item name="android:windowTranslucentStatus"&gt;true&lt;/item&gt; &lt;/style&gt;&lt;/resources&gt; çŽ°åœ¨ï¼Œå¦‚æžœä½ è¿è¡Œä½ çš„åº”ç”¨ç¨‹åºï¼Œä½ åº”è¯¥çœ‹åˆ°å¯¼èˆªæŠ½å±‰ï¼Œå¹¶èƒ½å¤Ÿåœ¨ä½ çš„ç‰‡æ®µä¹‹é—´è¿›è¡Œé€‰æ‹©ã€‚ å°†è‡ªå®šä¹‰è§†å›¾æ·»åŠ åˆ°å¯¼èˆªæŠ½å±‰å¯¹è®¾è®¡æ”¯æŒåº“23.1.0æ‰€åšçš„ä¸€é¡¹æ”¹è¿›æ˜¯å¢žåŠ äº†å¯¹å¯¼èˆªæŠ½å±‰é¡¹ç›®çš„è‡ªå®šä¹‰è§†å›¾çš„æ”¯æŒã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºå…¶ä¸­ä¸€è¡Œåˆ›å»ºè‡ªå®šä¹‰å¼€å…³ï¼Œå¦‚Google Playç”µå½±çš„å¯¼èˆªæŠ½å±‰ï¼š è¯¥æ–¹æ³•ä¸Žå°†ActionViewé¡¹ç›®æ·»åŠ åˆ°ActionBarç›¸åŒã€‚æˆ‘ä»¬åªéœ€è¦å®šä¹‰ä¸€ä¸ªå•ç‹¬çš„å¸ƒå±€ï¼Œå¦‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µã€‚æˆ‘ä»¬å°†è°ƒç”¨è¿™ä¸ªæ–‡ä»¶action_view_switch.xmlï¼š 12345678910&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:orientation="horizontal" android:layout_width="match_parent" android:layout_height="match_parent"&gt; &lt;android.support.v7.widget.SwitchCompat android:layout_width="fill_parent" android:layout_height="match_parent" android:text="Switch"/&gt;&lt;/LinearLayout&gt; ç„¶åŽï¼Œæˆ‘ä»¬ä½¿ç”¨è¯¥app:actionLayoutå±žæ€§å¼•ç”¨æ­¤å¸ƒå±€ã€‚æ ‡é¢˜å¿…é¡»æä¾›ï¼Œä½†ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºç©ºç™½ï¼š 12345&lt;menu xmlns:app="http://schemas.android.com/apk/res-auto" xmlns:android="http://schemas.android.com/apk/res/android"&gt; &lt;item android:id="@+id/nav_switch" app:actionLayout="@layout/action_view_switch" android:title="Downloaded only" /&gt;&lt;/menu&gt; åªè¦æ‚¨çš„æ´»åŠ¨å°†å®žæ–½è¯¥æ–¹æ³•ï¼Œæ‚¨å°±å¯ä»¥ç›´æŽ¥ä½¿ç”¨XMLé™„åŠ äº‹ä»¶ã€‚è¦é€šè¿‡Javaä»¥ç¼–ç¨‹æ–¹å¼å°†äº‹ä»¶å¤„ç†æ·»åŠ åˆ°åˆ‡æ¢å¼€å…³ï¼Œæ‚¨éœ€è¦å…ˆèŽ·å–èœå•å®žä¾‹å¹¶è®¿é—®ç›¸åº”çš„ActionViewï¼š 123456789Menu menu = navigationView.getMenu();MenuItem menuItem = menu.findItem(R.id.nav_switch);View actionView = MenuItemCompat.getActionView(menuItem);actionView.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; &#125;&#125;); è‡ªå®šä¹‰å°éƒ¨ä»¶çš„ä½¿ç”¨app:actionViewClassä¹Ÿå¯ä»¥ç”¨äºŽèœå•é¡¹ç›®ã€‚æœ‰å…³Action Viewsçš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…å°†SearchViewæ·»åŠ åˆ°ActionBaræŒ‡å—ã€‚ æŒä¹…å¯¼èˆªæŠ½å±‰åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç‰¹åˆ«æ˜¯åœ¨å¹³æ¿ç”µè„‘ä¸Šï¼Œå¯¼èˆªæŠ½å±‰åº”è¯¥æ˜¯å……å½“ä¾§æ çš„æ´»åŠ¨çš„æ°¸ä¹…å›ºå®šè£…ç½®(Like my Blog Design)ï¼š è¦è¾¾åˆ°æ­¤æ•ˆæžœï¼Œè¯·æŸ¥çœ‹ä»¥ä¸‹æè¿°ä¸€ç§æ–¹æ³•çš„é“¾æŽ¥ï¼š é™æ€å¯¼èˆªæŠ½å±‰ ç›¸å…³çš„Stackoverflowé—®é¢˜ ç¤ºä¾‹ä»£ç  ç¬¬ä¸‰æ–¹åº“ä¹Ÿå¯èƒ½ä½¿è¿™æ›´å®¹æ˜“å®žçŽ°ã€‚ ç¬¬ä¸‰æ–¹åº“æœ‰ä¸€äº›ç¬¬ä¸‰æ–¹åº“ä»ç„¶å¯ä»¥ä½œä¸ºDrawerLayoutç›´æŽ¥ä½¿ç”¨è‡ªåŠ¨æä¾›æŸäº›ææ–™è®¾è®¡å…ƒç´ çš„æ›¿ä»£æ–¹æ¡ˆï¼š MaterialDrawer NavigationDrawerMaterial é€šå¸¸è¿™äº›éƒ½æ˜¯ä¸å¿…è¦çš„ï¼Œä½†è¯·æ£€æŸ¥å®ƒä»¬ä»¥æŸ¥çœ‹å®ƒä»¬æä¾›çš„åŠŸèƒ½ã€‚ é™åˆ¶è®¾è®¡æ”¯æŒåº“çš„å½“å‰ç‰ˆæœ¬çš„ç¡®æœ‰å…¶å±€é™æ€§ã€‚ä¸»è¦é—®é¢˜åœ¨äºŽçªå‡ºæ˜¾ç¤ºå¯¼èˆªèœå•ä¸­çš„å½“å‰é¡¹ç›®çš„ç³»ç»Ÿã€‚NavigationViewçš„itemBackgroundå±žæ€§ä¸èƒ½æ­£ç¡®å¤„ç†é¡¹ç›®çš„é€‰ä¸­çŠ¶æ€ï¼šä¸ç®¡æ€Žæ ·ï¼Œæ‰€æœ‰é¡¹ç›®éƒ½çªå‡ºæ˜¾ç¤ºæˆ–è€…æ²¡æœ‰ä»»ä½•é¡¹ç›®ã€‚è¿™ä½¿å¾—è¿™ä¸ªå±žæ€§åŸºæœ¬ä¸Šä¸é€‚ç”¨äºŽå¤§å¤šæ•°åº”ç”¨ç¨‹åºã€‚ Fragmentçš„æ›¿ä»£å“è™½ç„¶è®¸å¤šå¯¼èˆªæŠ½å±‰ç¤ºä¾‹æ˜¾ç¤ºäº†å¦‚ä½•å°†Fragmentç”¨äºŽå¯¼èˆªæŠ½å±‰ï¼Œä½†å¦‚æžœæ‚¨å¸Œæœ›å°†æŠ½å±‰ç”¨ä½œå½“å‰æ˜¾ç¤ºçš„æ´»åŠ¨çš„å åŠ å±‚ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨RelativeLayout/ LinearLayoutã€‚ è€Œä¸æ˜¯&lt;FrameLayout&gt;ä½ å¯ä»¥ç”¨ä¸€ä¸ª&lt;LinearLayout&gt;æ›¿ä»£ 1234567891011121314151617181920212223&lt;android.support.v4.widget.DrawerLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent" android:layout_height="match_parent" android:id="@+id/drawer_layout"&gt; &lt;LinearLayout android:id="@+id/content_frame" android:orientation="horizontal" android:layout_width="match_parent" android:layout_height="match_parent"/&gt; &lt;!-- The navigation drawer --&gt; &lt;ListView android:id="@+id/left_drawer" android:layout_width="240dp" android:layout_height="wrap_content" android:layout_gravity="start" android:choiceMode="singleChoice" android:divider="@android:color/transparent" android:dividerHeight="0dp" android:background="#111"/&gt;&lt;/android.support.v4.widget.DrawerLayout&gt; å–è€Œä»£ä¹‹çš„æ˜¯ï¼š 12345// Insert the fragment by replacing any existing fragmentgetFragmentManager().beginTransaction() .replace(R.id.content_frame, fragment) .commit(); æ‚¨å¯ä»¥æ”¹ä¸ºä½¿ç”¨LinearLayoutå®¹å™¨ç›´æŽ¥ä¸ºæ´»åŠ¨å……æ°”ï¼š 123LayoutInflater inflater = getLayoutInflater();LinearLayout container = (LinearLayout) findViewById(R.id.content_frame);inflater.inflate(R.layout.activity_main, container); References http://android-developers.blogspot.com/2014/10/appcompat-v21-material-design-for-pre.html http://stackoverflow.com/questions/26440879/how-do-i-use-drawerlayout-to-display-over-the-actionbar-toolbar-and-under-the-st http://antonioleiva.com/navigation-view/]]></content>
      <tags>
        <tag>Android</tag>
        <tag>Material Design</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å®žéªŒå®¤æ‹›æ–°é¢˜ç›®â‘ ]]></title>
    <url>%2F2018%2F04%2F27%2F%E5%AE%9E%E9%AA%8C%E5%AE%A4%E6%8B%9B%E6%96%B0%E9%A2%98%E7%9B%AE%2F</url>
    <content type="text"><![CDATA[æ‘‡ç¯®æŽ’åºè¾“å…¥æ‘‡ç¯®æ•°ç»„ä»¥æ‘‡ç¯®ä¸­çš„åºå·ä¸ºåŸºå‡†è¿›è¡ŒæŽ’åºè¯·è‡ªå®šä¹‰Bucketçš„æ•°æ®ç»“æž„åŒ…æ‹¬1&#123;&#123;åºå·&#125;,&#123;å­¦ç§‘&#125;&#125; è¦æ±‚ï¼š å†™å‡ºä¸€ä¸ªæ–¹æ³• 1Bucket[] sortBucket(Bucket[] J,boolean Flag) è¿”å›žä¸ºæŽ’å¥½åºåŽçš„Bucketæ•°ç»„å¹¶åœ¨æŽ§åˆ¶å°ä¸­ç­”åº” Flag == trueè¿”å›žæ­£åºæŽ’åº Flag == falseè¿”å›žå€’åºæŽ’åº é¢å‘å¤§ä¸€åŒå­¦è¦æ±‚ï¼šåœ¨æŽ§åˆ¶å°ä¸­è¾“å…¥Bucketæ•°ç»„exampleï¼šinput: 1 æ•°å­¦ 3 è¯­æ–‡ 2 è‹±è¯­ trueoutput: 1 æ•°å­¦ 2 è‹±è¯­ 3 è¯­æ–‡ é¢å‘å¤§äºŒåŒå­¦è¦æ±‚ï¼šæž„é€ è‡ªå·±ç†Ÿæ‚‰çš„å‰ç«¯ç•Œé¢è¾“å…¥è¾“å‡ºæ¡†ä»¥åŠæ­£åºå€’åºæŽ’åºæŒ‰é’®åœ¨å…¶ä¸­è¾“å…¥Bucketæ•°ç»„exampleï¼šinput: 1 æ•°å­¦ 3 è¯­æ–‡ 2 è‹±è¯­output: 1 æ•°å­¦ 2 è‹±è¯­ 3 è¯­æ–‡]]></content>
      <tags>
        <tag>Lab_Interview</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸‰å¹´ä¸‰æœˆä¸‰å¤©ä¸‰å°æ—¶]]></title>
    <url>%2F2018%2F04%2F27%2F%E4%B8%89%E5%B9%B4%E4%B8%89%E6%9C%88%E4%B8%89%E5%A4%A9%E4%B8%89%E5%B0%8F%E6%97%B6%2F</url>
    <content type="text"><![CDATA[2018.04.26/14:27 ðŸ‘¨â€ðŸ’»æˆ‘æ”¶åˆ°äº†çˆ±å¥‡è‰ºç§»åŠ¨è½¯ä»¶å¼€å‘å²—çš„Offerï¼Œè¯šæƒ¶è¯šæã€‚-æˆ‘çš„ä»·å€¼ç»ˆäºŽå¾—åˆ°äº†è®¤å¯â€¦å‰20å¹´çš„çŸ¥è¯†ç§¯å¥ ..åŽ3å¹´çš„ä¸“ä¸šæµ…è§¦..ä»¥åŠ3ä¸ªæœˆæ¥çš„å‡†å¤‡..è¿˜æœ‰è¿‘3å¤©ä»¥æ¥çš„ç„¦è™‘..æœ€ç»ˆæ˜¯æ‹¿åˆ°Offerå‰3å°æ—¶çš„ä¸é•‡å®šâ€¦ä¹Ÿè®¸è¿™ç§è¿‡ç¨‹æ­£æ˜¯æˆ‘è¸å…¥ç¤¾ä¼šçš„å¼€å§‹ä»¥åŠæœ€é‡è¦çš„æ˜¯å¯ä»¥åœ¨æˆ‘æ¢¦å¯çš„å¤§å¹³å°ä¸Šå¼€æ‹“è‡ªå·±çš„è§†é‡Žå¼ºåŒ–è‡ªå·±çš„ä¸“ä¸šçŸ¥è¯†â€¦è¿™ä¸€åˆ‡ä¹Ÿæ¥æºäºŽæˆ‘3å¹´ä»¥æ¥çš„ä¸æ‡ˆâ€¦ä½†æ›´å€¼å¾—æ„Ÿè°¢çš„æ˜¯æˆ‘çš„ä¼¯ä¹â€“æˆ‘çš„ä¸“ä¸šå¼•è·¯äººåˆ˜è€å¸ˆå’Œç­å¯¼ä¸¥è€å¸ˆåœ¨è¿™ä¸‰å¹´æ¥çš„ç…§æ–™ä¸Žè§£æƒ‘â€¦åè§‚æˆ‘ä¸‰å¹´å‰åˆšå…¥æ ¡çš„æœ¨è®·ä¸Žè½»æµ®..åˆ°çŽ°åœ¨å¯ä»¥è´Ÿè´£å®žéªŒå®¤..ä»¥åŠå¾—åˆ°ç¤¾ä¼šçš„è®¤å¯è¿™ä¸€è·¯æ¥æ²¡æœ‰ä»–ä»¬çš„æŒ‡å¼•æˆ‘ä¹Ÿè®¸è¿˜åœ¨è‡ªå·±çš„æ··æ²Œä¸­ä¸èƒ½è‡ªæ‹”â€¦ My favorite mural Creazione di Adamo by Michelangelo æˆ‘ä¹Ÿæ›¾æ„£å¤´é’â€¦åœ¨è¿˜æœªå‡†å¤‡å……åˆ†å°±å†²åŽ»é¢è¯•é˜¿é‡Œâ€¦è¿žç»­æŒ‚æŽ‰ä¸¤æ¬¡çš„è…¾è®¯é¢è¯•â€¦ä»¥åŠæ²¡æœ‰éŸ³è®¯çš„ç¾Žå›¢â€¦åˆ°çŽ°åœ¨æˆ‘å¿ƒå¿ƒå¿µçš„è¿˜åœ¨ç­‰ç»“æžœçš„å¤§ç–†â€¦ä»¥åŠæˆ‘å·²æ‹¿åˆ°å®žä¹ Offerçš„çˆ±å¥‡è‰ºâ€¦ æ‹¿åˆ°Offerçš„æˆ‘ä¸€ç‚¹ä¹Ÿæ²¡æœ‰æ¿€åŠ¨â€¦åªæ˜¯è®©æˆ‘åƒç–®ç™¾å­”çš„å¿ƒå¾—åˆ°äº†ä¸€ç‚¹æ»¡è¶³â€¦ åœ¨è¿™ä¸€è·¯çš„é¢è¯•ç»åŽ†ä¸­æˆ‘å‘çŽ°ï¼Œæˆ‘æœ€ç»ˆæ”¶ç›Šçš„è¿˜æ˜¯æˆ‘å¯¹ä¸“ä¸šçš„åšæŒâ€¦å§‹ç»ˆæ²¡æœ‰æ”¾å¼ƒæˆ‘çƒ­çˆ±çš„Androidç§»åŠ¨ç«¯å¼€å‘..å½“å‡ºçŽ°æ–°çš„æŠ€æœ¯..æˆ‘æ€»æ˜¯é¦–å…ˆæƒ³åˆ°åº”ç”¨äºŽç§»åŠ¨ç«¯â€¦è‡³å°‘è¿™ç§åŽŸåŠ›å¼çš„é©±åŠ¨æ¥è‡ªäºŽæˆ‘çš„ä¸–ç•Œè§‚..æˆ‘è®¤ä¸ºåœ¨è¿™ä¸ªæ—¶ä»£äº’è”ç½‘çš„æœ€å¤§ä½œç”¨åº”è¯¥æ˜¯å¸¦åŠ¨äººç±»å‘å±•è¿›æ­¥..å³ä½¿å¦‚ä»Šæ˜¯ä¸ªç™¾å®¶åˆå”±çš„äº’è”ç½‘çŽ¯å¢ƒ..æ›´å¤šçš„ä¼ä¸šé€‰æ‹©äº†æŽ¨åŠ¨ç»æµŽçš„æžé’±å¼è¡Œä¸ºâ€¦å¤§é‡çš„ç ”å‘èµ„æºç”¨äºŽå¯¹å¨±ä¹æˆ–æ˜¯ä½Žä¿—æ–‡åŒ–çš„ä¼ æ’­â€¦ä½¿å¾—å¦‚ä»Šéƒ½æ˜¯é¢å‘ä¸Šå¸‚æ•²é’Ÿå¼åˆ›ä¸šâ€¦ å¼‚æ›²åŒå·¥çš„æ˜¯æœ€è¿‘åœ¨å¹´çº§ç¾¤ä¸­çœ‹åˆ°æœ‰å·²é¢50å®¶å…¬å¸æ‹¿åˆ°3ä¸ªOfferçš„äººå´å¤§è¨€ä¸æƒ­çš„å†™ç€é¢ç»..æ•™å”†æƒ³åŽ»å‚åŠ å·¥ä½œçš„åŒå­¦è‹¥æ˜¯æ²¡æœ‰é¡¹ç›®åŽ»æŸå®èŠ±é’±è´­ä¹°â€¦çº¯ç²¹çš„é¢å‘é¢è¯•çš„ç¼–ç¨‹ä»¤äººæ„Ÿåˆ°æ¶ä¿—â€¦åœ°çƒç§‘æŠ€çš„è¿›æ­¥å¦‚æžœå­˜åœ¨å¾ˆå¤šè¿™æ ·çš„äººç®€ç›´ä¸å ªæƒ³è±¡å§â€¦ å¦‚ä»Šè¿™ä¸ªæ—¶ä»£æœ‰ç‚¹ä¼ªæ–‡è‰ºå¤å…´çš„æ„Ÿè§‰â€¦å¥½åƒä¸–é—´å¾ˆçº·ä¹±â€¦ä¸æ˜¯é‚£ä¹ˆå®‰å®šâ€¦ä½†å¤§å®¶å¥½åƒè¿˜è¿‡å¾—è‡ªå¾—å…¶ä¹â€¦è¿™ç§è‡ªæ€å¼çš„ä¹ æƒ¯åœ¨ä¸€ç‚¹ç‚¹çš„åžå™¬äººç±»å¿ƒçµæœ€åŽçš„è¿›å–â€¦ ä¸‰å¹´ ðŸ‘¹å¤§å­¦è¿™ä¸‰å¹´æ¥å…¶å®žæ˜¯æ†‹äº†ä¸€å£æ°”çš„åŽ»è¿½èµ¶æˆ‘é«˜ä¸­ä¸‰å¹´æ‰€é—å¤±çš„ç§ç§ä¸‰å¹´åŽå†çœ‹æˆ‘å€’æ˜¯è¿½å›žæ¥äº†ä¸€äº›..è¿™æ˜¯å€¼å¾—è‚¯å®šçš„è‡³å°‘æˆ‘æ²¡æœ‰è¢«ä¸–ä¿—èµ¶ä¸Š..è‡³å°‘æˆ‘æš‚æ—¶èµ¢å¾—äº†è‡ªå·±çš„è®¤å¯ ä¼¯ä¹ ðŸŽ ä¸–æœ‰ä¼¯ä¹ï¼Œç„¶åŽæœ‰åƒé‡Œé©¬ã€‚åƒé‡Œé©¬å¸¸æœ‰ï¼Œè€Œä¼¯ä¹ä¸å¸¸æœ‰ã€‚æˆ‘æ˜¯ä¸€ä¸ªå‚²æ…¢çš„è‡ªè°¦çš„ï¼Œä¸æ˜“è¢«ä»–äººåŽ‹åˆ¶çš„ï¼Œå‘å¾€è‡ªç”±çš„äººã€‚ è¿™ä¸‰å¹´æ¥æˆ‘çœŸå¿ƒçš„æ„Ÿè°¢æˆ‘çš„ç­å¯¼ä¸¥çµæ¯“è€å¸ˆã€æˆ‘çš„è®¡ç®—æœºè¯­è¨€å…¥é—¨äººåˆ˜ä¼Ÿè€å¸ˆã€‚æ˜¯ä»–ä»¬çš„æ…§çœ¼ç»™äº†æˆ‘è¿›å‡çš„å¹³å°ã€‚è¿™ä¸¤ä½è€å¸ˆçš„æ€§æ ¼è¿¥å¼‚å¯¹æˆ‘æ¥è¯´æ˜¯éžå¸¸å—ç›Šçš„â€¦ å…¶ä¸€ã€é‚£ç§å¯¹å­¦ç”Ÿçš„å…³æ€€ä¸Žå­¦æœ¯ä¸Šã€äººç”Ÿä¸Šå¤§ä¹‰è‡³ç®€çš„æŒ‡å¯¼ä¸Žæ²Ÿé€šæ˜¯è®©æˆ‘æ‘†è„±å„ç§æœ¨è®·ä¸Žæ··æ²Œçš„å”¯ä¸€ç»³ç´¢ã€‚ å¦ä¸€ä½ã€é‚£ç§éšæ€§çš„ä¸ç¾çš„å¸…æ°”çš„ç”·æ€§é£Žæ ¼æˆä¸ºäº†æˆ‘å¯¹ç”·æ€§ç†è§£çš„æ ‡æ¦œâ€¦ä½œä¸ºæˆ‘é¡¹ç›®æŒ‡å¯¼è€å¸ˆå¯¹æˆ‘çš„ä¿¡ä»»ï¼Œç›´æŽ¥å½±å“äº†æˆ‘ä¹‹åŽå¯¹è½¯ä»¶äº§å“çš„çœ‹æ³•ä¸Žç†è§£â€¦å°†é¡¹ç›®å¤§æ„è§£é‡Šä¸Žå­¦ç”Ÿï¼Œå…¶ä»–çš„å¯ä»¥è‡ªæˆ‘å‘æŒ¥çš„åšæ³•ï¼Œè‡³å°‘ç›®å‰æˆ‘æ²¡æœ‰åœ¨å…¶ä»–è€å¸ˆèº«ä¸Šå‘çŽ°è¿‡â€¦è¿™ç§å¯¹å­¦ç”Ÿçš„ä¿¡ä»»åŒæ ·ä¹Ÿæ˜¯è®©æˆ‘è¾—è½¬å„ç§å®žéªŒå®¤åŽæœ€ç»ˆåˆå›žåˆ°Lab603çš„å”¯ä¸€ç†ç”±â€¦ çŽ°åœ¨å†å›žå¤´çœ‹çœ‹è¿™ä¸‰å¹´â€¦å……å®žåˆå……æ»¡å›žå¿†â€¦ å¼€å‘è€…åŒä¼´ ðŸ˜Ž å¦‚æžœæ‹¿ä¼¯ç‰™ä¸Žé’Ÿå­æœŸçš„æ•…äº‹æ¥è¯´æˆ‘ä»¬å¯èƒ½è¿‡å¤´..å…¶å®žæˆ‘ä»¬ä¹Ÿæ²¡æœ‰åˆ°é‚£ç§å¢ƒç•Œâ€¦åªæ˜¯æƒ³ç”¨è¿™ç§æ„Ÿè§‰æ¥è¡¨è¾¾æˆ‘è¿™ä¸‰å¹´æ¥å¯¹ä»–çš„æ„Ÿè°¢ï¼Œä»–ä¸Žæˆ‘å…±åŒå¼€å‘äº†æˆ‘è¿™ä¸‰å¹´æ¥çš„å¤§éƒ¨åˆ†é¡¹ç›®â€¦ 2016å¹´10æœˆ12æ—¥ æ˜ŸæœŸä¸‰ 23:22 å¼ ç¿åœ¨æˆ‘çš„å®¿èˆé‡Œä¸€èµ·é‡æž„é¡¹ç›®çœ‹åˆ°ç»“æžœåŽçš„å–œæ‚¦ è¿™ä¸‰å¹´æ¥ä¸ä¸‹10ä¸ªå¤§å¤§å°å°çš„é¡¹ç›®å…¶ä¸­2/3éƒ½æ˜¯æˆ‘å’Œä»–å…±åŒå¼€å‘çš„â€¦æ— æ•°ä¸ªé€šå®µ..æ— æ•°ä¸ªéœ€æ±‚çš„äº‰æ‰§æ— æ•°ä¸ªé—®é¢˜çš„è§£å†³â€¦åœ¨è¿™ä¸€ç³»åˆ—çš„è¿‡ç¨‹ä¸­å¦‚æžœæ²¡æœ‰è¿™æ ·ä¸€ä¸ªäººçš„å­˜åœ¨åˆä¼šå˜å¾—æœ‰å¤šå¤§çš„æŒ‘æˆ˜å‘¢ï¼Ÿæˆ‘çŽ°åœ¨åªèƒ½è¯´å¼ ç¿è¿™ä¸‰å¹´æ¥æ„Ÿè°¢ä½ çš„äº’åŠ©ï¼Œæ²¡æœ‰ä½ æˆ‘ä¹Ÿèµ°ä¸åˆ°è¿™ä¸€æ­¥â€¦æˆ‘ä¼šåœ¨è¿™æ¡è·¯ç»§ç»­èµ°ä¸‹åŽ»çš„â€¦åªä¸ºäº†æˆ‘ä»¬é‚£æ— æ•°ä¸ªæ—¥å¤œçš„å•çº¯çš„æ¢¦ã€‚ 2016å¹´10æœˆ16æ—¥ æ˜ŸæœŸæ—¥ 3:11 æˆ‘ä»¬åˆä½œçš„ç¬¬ä¸€ä¸ªé¡¹ç›®OneKey2Alarmè‚é€šå®µ Project âŒ¨ï¸ é¡¹ç›®ä¹‹äºŽå¼€å‘è€…å¦‚åŒçˆ¶ä¸Žå­çš„å…³ç³» ç›¸ä¿¡æ¯ä¸€ä¸ªå¼€å‘è€…åœ¨å®Œæˆä»–çš„ProjectåŽéƒ½ä¼šåŠ å€å¿ƒåŠ›çš„åŽ»ç»´æŠ¤ä»–çš„Projectâ€¦åœ¨è¿™è¿‡ç¨‹ä¸­ä¹ŸåŒæ—¶æ˜¯å¼€å‘è€…ç»éªŒèƒ½åŠ›æå‡çš„å…³é”®â€¦æ‰€ä»¥åœ¨é¢è¯•è¿‡ç¨‹ä¸­æ¯ä¸ªå¼€å‘è€…åœ¨ä»–è¿‡åŽ»å®Œæˆçš„é¡¹ç›®è´¨é‡ä¸Žæ•°é‡å°±æ˜¾å¾—æ ¼å¤–å®è´µ..é€šè¿‡é¡¹ç›®çš„ä¾§é¢è§‚å¯Ÿå¯ä»¥çœ‹å¾—å‡ºä¸€ä¸ªäººçš„ä»£ç é£Žæ ¼..ä»–çš„ä¸ªæ€§..ä»–çš„ä¸ºäººâ€¦æ‰€ä»¥å¦‚ä¸Šæ–‡æ‰€è¿°çš„é‚£ç§é¢å‘é¢è¯•çš„ç¼–ç¨‹æ–¹å¼æ˜¯æˆ‘ä¸ªäººéžå¸¸åŽŒæ¶çš„â€¦æˆ‘è®¤ä¸ºåªè¦æ˜¯ä¸€ä¸ªæœ‰è¿½æ±‚çš„å¼€å‘è€…..ä¸€ä¸ªåˆæ ¼çš„ç¨‹åºå‘˜éƒ½ååˆ†æ‘’å¼ƒè¿™ç§åšæ³•â€¦é€šè¿‡èŽ·å–ä»–äººçš„åŠ³åŠ¨æˆæžœæ¥æ‰“è‚¿è„¸å……èƒ–å­..æ€»æœ‰ä¸€å¤©ä¼šè´¥éœ²çš„ã€‚çœŸè¯šæ˜¯ä¸€ä¸ªäººæœ€ç¾Žå¥½ä¹Ÿæ˜¯æœ€åº•çº¿çš„å“è´¨â€¦å¦‚æžœä½ æƒ³è®©è¿™ä¸ªä¸–ç•Œè¾¾åˆ°å…¬å¹³é‚£ä¹ˆä¹…åº”è¯¥äººäººæœ‰è´£â€¦é€šè¿‡ä¸æ‹©æ‰‹æ®µçš„æ–¹å¼æ¥é€šè¿‡é¢è¯•è¿™æ ·å¯¹æ›´å¤šä¼˜ç§€çš„é¡¹ç›®å¼€å‘è€…æ— å¼‚äºŽæ˜¯ä¸€ç§ä¾®è¾±â€¦æˆ‘å‘¨å›´çš„åŒå­¦åœ¨æœ€è¿‘æ‰¾å·¥ä½œçš„è¿‡ç¨‹ä¸­æ²¡æœ‰ä¸€ä¸ªäººæ˜¯è½»æ¾çš„â€¦ä¸€å®¶å®¶å…¬å¸ä¸€æ¬¡æ¬¡çš„æ‹’ç»åˆ°è®©äººæ€€ç–‘è‡ªå·±â€¦ä½†è¯´å®žè¯åªæœ‰å†…å¿ƒå¼ºå¤§çš„äººæ‰èƒ½å†²å‡ºè¿™ç‰‡æ··æ²Œâ€¦å› ä¸ºä»Žæ­¤ä¹‹åŽä½ å°±ä¼šè„±ç¦»è±¡ç‰™å¡”â€¦ä¸ä¼šå†æœ‰äººåŽ»åº‡æŠ¤ä½ â€¦ä½ è¦é¢å¯¹çš„æ˜¯ç‹°ç‹žè€Œæ®‹é…·çš„ç¤¾ä¼š..è¦ä¸ºè‡ªå·±çš„è¨€è¡Œè´Ÿè´£äº†â€¦äººäººä¸æ˜“â€¦å”¯æœ‰åšæŒæ‰èƒ½å†²ç ´é‡å›´â€¦ åœ¨è¿™é‡ŒåŒæ—¶æƒ³æ„Ÿè°¢æˆ‘æœªæ¥çš„éƒ¨é—¨é¢†å¯¼..æ˜¯ä»–å¯¹æˆ‘çš„è®¤å¯..æˆ‘æ‰ç›´æŽ¥çš„å¾—åˆ°äº†è¿™ä¸€æå‡è‡ªå·±è§†é‡Žçš„æœºä¼šâ€¦æˆ‘ä¼šå‘è‡ªå·±è¯æ˜Žä»–å¹¶æ²¡æœ‰çœ‹é”™ 2018.04 æ­¦æ±‰æ˜¥å­£Hackthon 2018.04 å‡Œæ™¨4:00 æ­¦æ±‰æ˜¥å­£Hackthon 2018.04 æ­¦æ±‰æ˜¥å­£Hackthon äº§å“å±•ç¤º å®¶åº­ ðŸ‘ª æˆ‘æ‹¥æœ‰è¿™æ ·çš„å®¶åº­åº”è¯¥æ˜¯æˆ‘äººç”Ÿèµ°è¿‡20å¹´æ‰€å¹¸è‡³æžä¹‹äº‹ çˆ¶æ¯å¯¹æˆ‘çš„å…³å¿ƒä¸Žçˆ±æŠ¤é€‚åˆä¸”å¾—å½“ çˆ¶æ¯å¯¹æˆ‘çš„æ”¾å…»å¼ç®¡ç†æˆ‘ç§°ä¸ºâ€œä¸ç®¡ä¹‹æ©â€è¿™ç§åšæ³•é—´æŽ¥çš„ä½¿æˆ‘è‡ªç”±å‘å±•å¯»æˆ‘æ‰€ä¹ çˆ¶æ¯å¯¹æˆ‘çš„æ— æ¡ä»¶æ”¯æŒæˆ‘çš„é€‰æ‹©ä½¿æˆ‘å—ç›Š ç”ŸäºŽå¼ å…ˆç”Ÿä¸Žé™ˆå¥³å£«æ˜¯æˆ‘è¿™ä¸€ç”Ÿæ— å¯æ¯”æ‹Ÿçš„å¹¸è¿ æ„Ÿè°¢æˆ‘çš„çˆ¶æ¯è®©æˆ‘åº¦è¿‡äº†æ— å¿§çš„ç«¥å¹´ã€å°‘å¹´..æœªæ¥ä¸–ç•Œçš„ç‹°ç‹žæˆ‘å·²ç»å¯ä»¥ç‹¬è‡ªåŽ»é¢å¯¹äº†ï¼Œä¹Ÿè¯·ä½ ä»¬æ”¾å¿ƒæˆ‘æ°¸è¿œçˆ±ä½ ä»¬â¤ï¸ Last but not least ðŸ’ªé€šè¿‡æˆ‘ä¸€æ¬¡æ¬¡çš„å¤±è´¥..ç»éªŒçš„ç§¯ç´¯..ä¹Ÿæ‹¿åˆ°äº†å¦‚æ„¿çš„Offerâ€¦æˆ‘æ˜Žç™½è¿™å¹¶ä¸æ˜¯æ ‡æ¦œç€ä»€ä¹ˆ..è€Œæ˜¯åˆä¸€æ¬¡æ–°çš„å¼€å§‹..æˆ‘è¿™é•¿ä¹…ä»¥æ¥åªæ˜¯åœ¨ä¸ºè‡ªå·±äº‰å–åŽ»æ›´å¥½çš„å¹³å°å­¦ä¹ ..å‘å±•â€¦åœ¨æ­¤æƒ³ç»™æœªæ¥çš„è‡ªå·±è¯´ï¼šä¸è¦è®©ä½ ä¹‹å‰çš„åŠªåŠ›ç™½è´¹..ä¿æŒè‡ªå·±çš„æ¢¦æƒ³..ä¸è¦è¢«ä¸–ä¿—ä¾µæŸ“..ä¿æŒå­¦ä¹ ..ä¿æŒç«žäº‰åŠ›..åˆ‡å‹¿è‡ªæ»¡â€¦ è®°ä¸€ä¸ªå³å°†æ­¥å…¥ç¤¾ä¼šçš„ç”·ç”Ÿå›žé¦–è¿‡åŽ»20å¹´çš„ç‹°ç‹žä¸Žå¯¹è‡ªå·±æœªæ¥çš„å‹‰åŠ± Lab603 æˆ‘çš„å·¥ä½ ;-)]]></content>
      <tags>
        <tag>Inspire</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Javaä¸ŽKotlinä¸‹çš„6ç§å•ä¾‹æ¨¡å¼]]></title>
    <url>%2F2018%2F04%2F25%2FJava%E4%B8%8EKotlin%E4%B8%8B%E7%9A%846%E7%A7%8D%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[å‰è¨€ æœ€è¿‘åœ¨å­¦ä¹ Kotlinï¼Œç”±äºŽGoogleç²‘ç²‘æŠŠè¿™ä¸€è¯­è¨€ææºä¸ºå®˜æ–¹æŒ‡å®šï¼Œå¹¶ä¸”å¯¹äºŽç§»åŠ¨ç«¯ç­‰å¼€å‘å¾—å¤©ç‹¬åŽšçš„ä¼˜åŠ¿ï¼Œä½œä¸ºä¸€åAndroidDeveloperå­¦ä¹ Kotlinæ˜¯å¿…è¦çš„ã€‚å½“åˆåœ¨å­¦ä¹ Javaæ—¶å¯¹å•ä¾‹æ¨¡å¼çš„å…­ç§ä¹¦å†™ä¸Žåº”ç”¨è®°å¿†æ·±åˆ»æ‰€ä»¥è¿™æ¬¡å¯¹ä¸åŒå•ä¾‹æ¨¡å¼çš„Javaä¸ŽKotlinå®žçŽ°è¿›è¡Œäº†åˆ†åˆ«æŽ¢è®¨ã€‚ å…­ç§æ¨¡å¼å¦‚ä¸‹ï¼š é¥¿æ±‰æ¨¡å¼ æ‡’æ±‰æ¨¡å¼ çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰æ¨¡å¼ åŒé‡æ ¡éªŒé”å¼ é™æ€å†…éƒ¨ç±»å¼ æžšä¸¾å¼ é¥¿æ±‰æ¨¡å¼ï¼šstatic final fieldé¥¿æ±‰å¼å…¶å®žæ˜¯ä¸€ç§æ¯”è¾ƒå½¢è±¡çš„ç§°è°“ã€‚æ—¢ç„¶é¥¿ï¼Œé‚£ä¹ˆåœ¨åˆ›å»ºå¯¹è±¡å®žä¾‹çš„æ—¶å€™å°±æ¯”è¾ƒç€æ€¥ï¼Œé¥¿äº†å˜›ï¼ŒäºŽæ˜¯åœ¨è£…è½½ç±»çš„æ—¶å€™å°±åˆ›å»ºå¯¹è±¡å®žä¾‹ã€‚è¿™ç§æ–¹æ³•éžå¸¸ç®€å•ï¼Œå› ä¸ºå•ä¾‹çš„å®žä¾‹è¢«å£°æ˜Žæˆ static å’Œ final å˜é‡äº†ï¼Œåœ¨ç¬¬ä¸€æ¬¡åŠ è½½ç±»åˆ°å†…å­˜ä¸­æ—¶å°±ä¼šåˆå§‹åŒ–ï¼Œæ‰€ä»¥åˆ›å»ºå®žä¾‹æœ¬èº«æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚123456789//Javaå®žçŽ°public class Singleton&#123; //ç±»åŠ è½½æ—¶å°±åˆå§‹åŒ– private static final Singleton instance = new Singleton(); private Singleton()&#123;&#125; public static Singleton getInstance()&#123; return instance; &#125;&#125; Kotlinå¼•å…¥äº† objectç±»åž‹ï¼Œå¯ä»¥å¾ˆå®¹æ˜“å£°æ˜Žå•ä¾‹æ¨¡å¼12//Kotlinå®žçŽ°object Singleton è¿™ç§æ–¹å¼å’Œ Java å•ä¾‹æ¨¡å¼çš„é¥¿æ±‰å¼ä¸€æ ·ï¼Œä¸è¿‡æ¯” Java ä¸­çš„å®žçŽ°ä»£ç é‡å°‘å¾ˆå¤šï¼Œå…¶å®žæ˜¯ä¸ªè¯­æ³•ç³–ï¼ˆKotlinæ¼«å±±éé‡Žéƒ½æ˜¯è¯­æ³•ç³–ï¼‰ã€‚åç¼–è¯‘ç”Ÿæˆçš„ class æ–‡ä»¶åŽå¦‚ä¸‹ï¼š 123456789public final class Singleton &#123; public static final Singleton INSTANCE = null; static &#123; Singleton singleton = new Singleton(); &#125; private Singleton() &#123; INSTANCE = this; &#125;&#125; ä»Žåç¼–è¯‘çš„ä»£ç å¯ä»¥çœ‹å‡º object å¯¹è±¡å®žé™…ä¸Šè¿˜æ˜¯åˆ©ç”¨äº† INSTANCE é™æ€å˜é‡ï¼Œä½†æ˜¯åœ¨Javaå’ŒKotlinæ··ç¼–æ—¶ï¼ŒJavaä»£ç ä¸­è°ƒç”¨åˆ™éœ€è¦æ³¨æ„ï¼Œä½¿ç”¨å¦‚ä¸‹Singleton.INSTANCE.test(),Kolintä¸­è°ƒç”¨æ—¶åªéœ€è¦ä½¿ç”¨Singleton.test()ã€‚è¿™ç§å®žçŽ°æ–¹å¼åœ¨ç±»åŠ è½½æ—¶å°±åˆ›å»ºäº†å•ä¾‹å¯¹è±¡ï¼Œæ‰€ä»¥è‚¯å®šæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰é¥¿æ±‰å¼å®žçŽ°æ–¹å¼çš„é—®é¢˜ï¼š å¦‚æžœæž„é€ æ–¹æ³•ä¸­æœ‰è€—æ—¶æ“ä½œçš„è¯ï¼Œä¼šå¯¼è‡´è¿™ä¸ªç±»çš„åŠ è½½æ¯”è¾ƒæ…¢ã€‚ é¥¿æ±‰å¼ä¸€å¼€å§‹å°±åˆ›å»ºå®žä¾‹ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰è°ƒç”¨ï¼Œä¼šé€ æˆèµ„æºæµªè´¹ã€‚ è¿˜æœ‰ä¸€ä¸ª Java é¥¿æ±‰å¼å•ä¾‹æ¨¡å¼æ²¡æœ‰çš„é—®é¢˜ï¼šæ— æ³•è‡ªå®šä¹‰æž„é€ å‡½æ•°ï¼Œobject ä¸­ä¸å…è®¸ constructor å‡½æ•°ã€‚ æ‡’æ±‰æ¨¡å¼ï¼šçº¿ç¨‹ä¸å®‰å…¨æ‡’æ±‰å¼å…¶å®žæ˜¯ä¸€ç§æ¯”è¾ƒå½¢è±¡çš„ç§°è°“ã€‚æ—¢ç„¶æ‡’ï¼Œé‚£ä¹ˆåœ¨åˆ›å»ºå¯¹è±¡å®žä¾‹çš„æ—¶å€™å°±ä¸ç€æ€¥ã€‚ä¼šä¸€ç›´ç­‰åˆ°é©¬ä¸Šè¦ä½¿ç”¨å¯¹è±¡å®žä¾‹çš„æ—¶å€™æ‰ä¼šåˆ›å»ºï¼Œæ‡’äººå˜›ï¼Œæ€»æ˜¯æŽ¨è„±ä¸å¼€çš„æ—¶å€™æ‰ä¼šçœŸæ­£åŽ»æ‰§è¡Œå·¥ä½œï¼Œå› æ­¤åœ¨è£…è½½å¯¹è±¡çš„æ—¶å€™ä¸åˆ›å»ºå¯¹è±¡å®žä¾‹ã€‚1234567891011//Javaå®žçŽ°public class Singleton&#123; private static Singleton instance; private Singleton()&#123;&#125; public static Singleton getInstance()&#123; if(instance == null)&#123; instance = new Singleton()ï¼› &#125; return instance; &#125;&#125; è¿™æ®µä»£ç ç®€å•æ˜Žäº†ï¼Œè€Œä¸”ä½¿ç”¨äº†æ‡’åŠ è½½æ¨¡å¼ï¼Œä½†æ˜¯å´å­˜åœ¨è‡´å‘½çš„é—®é¢˜ã€‚å½“æœ‰å¤šä¸ªçº¿ç¨‹å¹¶è¡Œè°ƒç”¨ getInstance() çš„æ—¶å€™ï¼Œå°±ä¼šåˆ›å»ºå¤šä¸ªå®žä¾‹ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨å¤šçº¿ç¨‹ä¸‹ä¸èƒ½æ­£å¸¸å·¥ä½œã€‚123456789101112131415//Kotlinclass Singleton private constructor()&#123; companion object&#123; private var instance : Singleton? = null get()&#123; if(field == null)&#123; field = Singleton() &#125; return field &#125; fun get():Singleton&#123; return instance!! &#125; &#125;&#125; ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‘çŽ°åœ¨Kotlinå®žçŽ°ä¸­ï¼Œæˆ‘ä»¬è®©å…¶ä¸»æž„é€ å‡½æ•°ç§æœ‰åŒ–å¹¶è‡ªå®šä¹‰äº†å…¶å±žæ€§è®¿é—®å™¨ï¼Œå…¶ä½™å†…å®¹å¤§åŒå°å¼‚ã€‚ å¦‚æžœä¸æ¸…æ¥šKotlinæž„é€ å‡½æ•°çš„ä½¿ç”¨æ–¹å¼ã€‚è¯·ç‚¹å‡» - - - æž„é€ å‡½æ•° ä¸æ¸…æ¥šKotlinçš„å±žæ€§ä¸Žè®¿é—®å™¨ï¼Œè¯·ç‚¹å‡» - - -å±žæ€§å’Œå­—æ®µ çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰æ¨¡å¼ä¸ºäº†è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯å°†æ•´ä¸ª getInstance() æ–¹æ³•è®¾ä¸ºåŒæ­¥ï¼ˆsynchronizedï¼‰ã€‚1234567891011//Javaå®žçŽ°public class Singleton&#123; private static Singleton instance; private Singleton()&#123;&#125; public static synchronized Singleton getInstance()&#123; if(instance == null)&#123; instance = new Singleton()ï¼› &#125; return instance; &#125;&#125; è™½ç„¶åšåˆ°äº†çº¿ç¨‹å®‰å…¨ï¼Œå¹¶ä¸”è§£å†³äº†å¤šå®žä¾‹çš„é—®é¢˜ï¼Œä½†æ˜¯å®ƒå¹¶ä¸é«˜æ•ˆã€‚å› ä¸ºåœ¨ä»»ä½•æ—¶å€™åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨ getInstance() æ–¹æ³•ã€‚ä½†æ˜¯åŒæ­¥æ“ä½œåªéœ€è¦åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶æ‰è¢«éœ€è¦ï¼Œå³ç¬¬ä¸€æ¬¡åˆ›å»ºå•ä¾‹å®žä¾‹å¯¹è±¡æ—¶ã€‚è¿™å°±å¼•å‡ºäº†åŒé‡æ£€éªŒé”ã€‚12345678910111213141516//Kotlinclass Singleton private constructor() &#123; companion object &#123; private var instance: Singleton? = null get() &#123; if (field == null) &#123; field = Singleton() &#125; return field &#125; @Synchronized fun get(): Singleton&#123; return instance!! &#125; &#125;&#125; å¤§å®¶éƒ½çŸ¥é“åœ¨ä½¿ç”¨æ‡’æ±‰å¼ä¼šå‡ºçŽ°çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼Œéœ€è¦ä½¿ç”¨åŒæ­¥é”ï¼Œåœ¨Kotlinä¸­ï¼Œå¦‚æžœä½ éœ€è¦å°†æ–¹æ³•å£°æ˜Žä¸ºåŒæ­¥ï¼Œéœ€è¦æ·»åŠ  @Synchronized æ³¨è§£ åŒé‡æ ¡éªŒé”å¼åŒé‡æ£€éªŒé”æ¨¡å¼ï¼ˆdouble checked locking patternï¼‰ï¼Œæ˜¯ä¸€ç§ä½¿ç”¨åŒæ­¥å—åŠ é”çš„æ–¹æ³•ã€‚ç¨‹åºå‘˜ç§°å…¶ä¸ºåŒé‡æ£€æŸ¥é”ï¼Œå› ä¸ºä¼šæœ‰ä¸¤æ¬¡æ£€æŸ¥ instance == nullï¼Œä¸€æ¬¡æ˜¯åœ¨åŒæ­¥å—å¤–ï¼Œä¸€æ¬¡æ˜¯åœ¨åŒæ­¥å—å†…ã€‚ä¸ºä»€ä¹ˆåœ¨åŒæ­¥å—å†…è¿˜è¦å†æ£€éªŒä¸€æ¬¡ï¼Ÿå› ä¸ºå¯èƒ½ä¼šæœ‰å¤šä¸ªçº¿ç¨‹ä¸€èµ·è¿›å…¥åŒæ­¥å—å¤–çš„ ifï¼Œå¦‚æžœåœ¨åŒæ­¥å—å†…ä¸è¿›è¡ŒäºŒæ¬¡æ£€éªŒçš„è¯å°±ä¼šç”Ÿæˆå¤šä¸ªå®žä¾‹äº†ã€‚12345678910111213141516171819202122//Javaå®žçŽ°public class Singleton&#123; /** * volatileä¿è¯äº†ï¼š * 1.instanceå†å¤šçº¿ç¨‹ä¸‹çš„å¹¶å‘å¯è§æ€§ * 2.ç¦æ­¢instanceåœ¨æ“ä½œæ—¶çš„æŒ‡ä»¤é‡æŽ’åº */ private volatile static Singleton instance = null; public static Singleton getIntance()&#123; //ç¬¬ä¸€æ¬¡åˆ¤ç©ºï¼Œä¿è¯ä¸å¿…è¦çš„åŒæ­¥ if(instance == null)&#123; //synchronizedå¯¹SingletonåŠ å…¨å±€é”ï¼Œä¿è¯æ¯æ¬¡åªè¦ä¸€ä¸ªçº¿ç¨‹åˆ›å»ºå®žä¾‹ synchronized(Singleton.class)&#123; //ç¬¬äºŒæ¬¡åˆ¤ç©ºæ—¶ä¸ºäº†åœ¨nullçš„æƒ…å†µä¸‹åˆ›å»ºå®žä¾‹ if(instance == null)&#123; instance = new Singleton(); &#125; &#125; &#125; return instance; &#125;&#125; æœ‰äº›äººè®¤ä¸ºä½¿ç”¨ volatile çš„åŽŸå› æ˜¯å¯è§æ€§ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥ä¿è¯çº¿ç¨‹åœ¨æœ¬åœ°ä¸ä¼šå­˜æœ‰ instance çš„å‰¯æœ¬ï¼Œæ¯æ¬¡éƒ½æ˜¯åŽ»ä¸»å†…å­˜ä¸­è¯»å–ã€‚ä½†å…¶å®žæ˜¯ä¸å¯¹çš„ã€‚ä½¿ç”¨ volatile çš„ä¸»è¦åŽŸå› æ˜¯å…¶å¦ä¸€ä¸ªç‰¹æ€§ï¼šç¦æ­¢æŒ‡ä»¤é‡æŽ’åºä¼˜åŒ–ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ volatile å˜é‡çš„èµ‹å€¼æ“ä½œåŽé¢ä¼šæœ‰ä¸€ä¸ªå†…å­˜å±éšœï¼ˆç”Ÿæˆçš„æ±‡ç¼–ä»£ç ä¸Šï¼‰ï¼Œè¯»æ“ä½œä¸ä¼šè¢«é‡æŽ’åºåˆ°å†…å­˜å±éšœä¹‹å‰ã€‚æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œå–æ“ä½œå¿…é¡»åœ¨æ‰§è¡Œå®Œ 1-2-3 ä¹‹åŽæˆ–è€… 1-3-2 ä¹‹åŽï¼Œä¸å­˜åœ¨æ‰§è¡Œåˆ° 1-3 ç„¶åŽå–åˆ°å€¼çš„æƒ…å†µã€‚ ä»Žã€Œå…ˆè¡Œå‘ç”ŸåŽŸåˆ™ã€çš„è§’åº¦ç†è§£çš„è¯ï¼Œå°±æ˜¯å¯¹äºŽä¸€ä¸ª volatile å˜é‡çš„å†™æ“ä½œéƒ½å…ˆè¡Œå‘ç”ŸäºŽåŽé¢å¯¹è¿™ä¸ªå˜é‡çš„è¯»æ“ä½œï¼ˆè¿™é‡Œçš„â€œåŽé¢â€æ˜¯æ—¶é—´ä¸Šçš„å…ˆåŽé¡ºåºï¼‰ã€‚ ä½†æ˜¯ç‰¹åˆ«æ³¨æ„åœ¨ Java 5 ä»¥å‰çš„ç‰ˆæœ¬ä½¿ç”¨äº† volatile çš„åŒæ£€é”è¿˜æ˜¯æœ‰é—®é¢˜çš„ã€‚å…¶åŽŸå› æ˜¯ Java 5 ä»¥å‰çš„ JMM ï¼ˆJava å†…å­˜æ¨¡åž‹ï¼‰æ˜¯å­˜åœ¨ç¼ºé™·çš„ï¼Œå³æ—¶å°†å˜é‡å£°æ˜Žæˆ volatile ä¹Ÿä¸èƒ½å®Œå…¨é¿å…é‡æŽ’åºï¼Œä¸»è¦æ˜¯ volatile å˜é‡å‰åŽçš„ä»£ç ä»ç„¶å­˜åœ¨é‡æŽ’åºé—®é¢˜ã€‚è¿™ä¸ª volatile å±è”½é‡æŽ’åºçš„é—®é¢˜åœ¨ Java 5 ä¸­æ‰å¾—ä»¥ä¿®å¤ï¼Œæ‰€ä»¥åœ¨è¿™ä¹‹åŽæ‰å¯ä»¥æ”¾å¿ƒä½¿ç”¨ volatileã€‚ ç›¸ä¿¡ä½ ä¸ä¼šå–œæ¬¢è¿™ç§å¤æ‚åˆéšå«é—®é¢˜çš„æ–¹å¼ï¼Œå½“ç„¶æˆ‘ä»¬æœ‰æ›´å¥½çš„å®žçŽ°çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼çš„åŠžæ³•ã€‚12345678//Kotlinå®žçŽ°class Singleton private constructor()&#123; companion object&#123; val instance: Singleton by lazy(mode = LazyThreadSafetyMode.SYNCHRONIZED)&#123; SingletonDemo() &#125; &#125;&#125; å“‡ï¼å°ä¼™ä¼´ä»¬æƒŠå–œä¸ï¼Œæ„Ÿä¸æ„ŸåŠ¨å•Šã€‚æˆ‘ä»¬å±…ç„¶å‡ è¡Œä»£ç å°±å®žçŽ°äº†å¤šè¡Œçš„Javaä»£ç ã€‚å…¶ä¸­æˆ‘ä»¬è¿ç”¨åˆ°äº†Kotlinçš„å»¶è¿Ÿå±žæ€§ Lazyã€‚ Lazyæ˜¯æŽ¥å—ä¸€ä¸ª lambda å¹¶è¿”å›žä¸€ä¸ª Lazy å®žä¾‹çš„å‡½æ•°ï¼Œè¿”å›žçš„å®žä¾‹å¯ä»¥ä½œä¸ºå®žçŽ°å»¶è¿Ÿå±žæ€§çš„å§”æ‰˜ï¼š ç¬¬ä¸€æ¬¡è°ƒç”¨ get() ä¼šæ‰§è¡Œå·²ä¼ é€’ç»™ lazy() çš„ lambda è¡¨è¾¾å¼å¹¶è®°å½•ç»“æžœï¼Œ åŽç»­è°ƒç”¨ get() åªæ˜¯è¿”å›žè®°å½•çš„ç»“æžœã€‚ è¿™é‡Œè¿˜æœ‰æœ‰ä¸¤ä¸ªé¢å¤–çš„çŸ¥è¯†ç‚¹ã€‚ é«˜é˜¶å‡½æ•° å§”æ‰˜å±žæ€§ å¦‚æžœä½ äº†è§£ä»¥ä¸ŠçŸ¥è¯†ç‚¹ï¼Œæˆ‘ä»¬ç›´æŽ¥æ¥çœ‹Lazyçš„å†…éƒ¨å®žçŽ°ã€‚ Lazyå†…éƒ¨å®žçŽ° 123456public fun &lt;T&gt; lazy(mode: LazyThreadSafetyMode, initializer: () -&gt; T): Lazy&lt;T&gt; = when (mode) &#123; LazyThreadSafetyMode.SYNCHRONIZED -&gt; SynchronizedLazyImpl(initializer) LazyThreadSafetyMode.PUBLICATION -&gt; SafePublicationLazyImpl(initializer) LazyThreadSafetyMode.NONE -&gt; UnsafeLazyImpl(initializer) &#125; è§‚å¯Ÿä¸Šè¿°ä»£ç ï¼Œå› ä¸ºæˆ‘ä»¬ä¼ å…¥çš„mode = LazyThreadSafetyMode.SYNCHRONIZEDï¼Œ é‚£ä¹ˆä¼šç›´æŽ¥èµ° SynchronizedLazyImplï¼Œæˆ‘ä»¬ç»§ç»­è§‚å¯ŸSynchronizedLazyImplã€‚ LazyæŽ¥å£ SynchronizedLazyImplå®žçŽ°äº†LazyæŽ¥å£ï¼ŒLazyå…·ä½“æŽ¥å£å¦‚ä¸‹ï¼š 1234567public interface Lazy&lt;out T&gt; &#123; //å½“å‰å®žä¾‹åŒ–å¯¹è±¡ï¼Œä¸€æ—¦å®žä¾‹åŒ–åŽï¼Œè¯¥å¯¹è±¡ä¸ä¼šå†æ”¹å˜ public val value: T //è¿”å›žtrueè¡¨ç¤ºï¼Œå·²ç»å»¶è¿Ÿå®žä¾‹åŒ–è¿‡äº†ï¼Œfalse è¡¨ç¤ºï¼Œæ²¡æœ‰è¢«å®žä¾‹åŒ–ï¼Œ //ä¸€æ—¦æ–¹æ³•è¿”å›žtrueï¼Œè¯¥æ–¹æ³•ä¼šä¸€ç›´è¿”å›žtrue,ä¸”ä¸ä¼šå†ç»§ç»­å®žä¾‹åŒ– public fun isInitialized(): Boolean&#125; ç»§ç»­æŸ¥çœ‹SynchronizedLazyImplï¼Œå…·ä½“å®žçŽ°å¦‚ä¸‹ï¼š SynchronizedLazyImplå†…éƒ¨å®žçŽ° 123456789101112131415161718192021222324252627282930private class SynchronizedLazyImpl&lt;out T&gt;(initializer: () -&gt; T, lock: Any? = null) : Lazy&lt;T&gt;, Serializable &#123; private var initializer: (() -&gt; T)? = initializer @Volatile private var _value: Any? = UNINITIALIZED_VALUE // final field is required to enable safe publication of constructed instance private val lock = lock ?: this override val value: T get() &#123; val _v1 = _value //åˆ¤æ–­æ˜¯å¦å·²ç»åˆå§‹åŒ–è¿‡ï¼Œå¦‚æžœåˆå§‹åŒ–è¿‡ç›´æŽ¥è¿”å›žï¼Œä¸åœ¨è°ƒç”¨é«˜çº§å‡½æ•°å†…éƒ¨é€»è¾‘ if (_v1 !== UNINITIALIZED_VALUE) &#123; @Suppress("UNCHECKED_CAST") return _v1 as T &#125; return synchronized(lock) &#123; val _v2 = _value if (_v2 !== UNINITIALIZED_VALUE) &#123; @Suppress("UNCHECKED_CAST") (_v2 as T) &#125; else &#123; val typedValue = initializer!!()//è°ƒç”¨é«˜çº§å‡½æ•°èŽ·å–å…¶è¿”å›žå€¼ _value = typedValue //å°†è¿”å›žå€¼èµ‹å€¼ç»™_value,ç”¨äºŽä¸‹æ¬¡åˆ¤æ–­æ—¶ï¼Œç›´æŽ¥è¿”å›žé«˜çº§å‡½æ•°çš„è¿”å›žå€¼ initializer = null typedValue &#125; &#125; &#125; //çœç•¥éƒ¨åˆ†ä»£ç &#125; é€šè¿‡ä¸Šè¿°ä»£ç ï¼Œæˆ‘ä»¬å‘çŽ° SynchronizedLazyImpl è¦†ç›–äº†LazyæŽ¥å£çš„valueå±žæ€§ï¼Œå¹¶ä¸”é‡æ–°äº†å…¶å±žæ€§è®¿é—®å™¨ã€‚å…¶å…·ä½“é€»è¾‘ä¸ŽJavaçš„åŒé‡æ£€éªŒæ˜¯ç±»ä¼¼çš„ã€‚ åˆ°é‡Œè¿™é‡Œå…¶å®žå¤§å®¶è¿˜æ˜¯è‚¯å®šæœ‰ç–‘é—®ï¼Œæˆ‘è¿™é‡Œåªæ˜¯å®žä¾‹åŒ–äº†SynchronizedLazyImplå¯¹è±¡ï¼Œå¹¶æ²¡æœ‰è¿›è¡Œå€¼çš„èŽ·å–ï¼Œå®ƒæ˜¯æ€Žä¹ˆæ‹¿åˆ°é«˜é˜¶å‡½æ•°çš„è¿”å›žå€¼å‘¢ï¼Ÿã€‚è¿™é‡Œåˆæ¶‰åŠåˆ°äº†å§”æ‰˜å±žæ€§ã€‚ å§”æ‰˜å±žæ€§è¯­æ³•æ˜¯ï¼š val/var &lt;å±žæ€§å&gt;: &lt;ç±»åž‹&gt; by &lt;è¡¨è¾¾å¼&gt;ã€‚åœ¨ by åŽé¢çš„è¡¨è¾¾å¼æ˜¯è¯¥ å§”æ‰˜ï¼Œ å› ä¸ºå±žæ€§å¯¹åº”çš„ get()ï¼ˆå’Œ set()ï¼‰ä¼šè¢«å§”æ‰˜ç»™å®ƒçš„ getValue() å’Œ setValue() æ–¹æ³•ã€‚ å±žæ€§çš„å§”æ‰˜ä¸å¿…å®žçŽ°ä»»ä½•çš„æŽ¥å£ï¼Œä½†æ˜¯éœ€è¦æä¾›ä¸€ä¸ª getValue() å‡½æ•°ï¼ˆå’Œ setValue()â€”â€”å¯¹äºŽ var å±žæ€§ï¼‰ã€‚ è€ŒLazy.ktæ–‡ä»¶ä¸­ï¼Œå£°æ˜Žäº†LazyæŽ¥å£çš„getValueæ‰©å±•å‡½æ•°ã€‚æ•…åœ¨æœ€ç»ˆèµ‹å€¼çš„æ—¶å€™ä¼šè°ƒç”¨è¯¥æ–¹æ³•ã€‚ 123@kotlin.internal.InlineOnly//è¿”å›žåˆå§‹åŒ–çš„å€¼ã€‚public inline operator fun &lt;T&gt; Lazy&lt;T&gt;.getValue(thisRef: Any?, property: KProperty&lt;*&gt;): T = value é™æ€å†…éƒ¨ç±»å¼è¿™ç§æ–¹æ³•ä¹Ÿæ˜¯ã€ŠEffective Javaã€‹ä¸Šæ‰€æŽ¨èçš„ã€‚12345678910//Javaå®žçŽ°public class Singleton&#123; private static class SingletonHolder&#123; private static final Singleton INSTANCE = new Singleton(); &#125; private Singleton()&#123;&#125; public static final Singleton getInstance()&#123; return SingletonHolder.INSTANCE; &#125;&#125; è¿™ç§å†™æ³•ä»ç„¶ä½¿ç”¨JVMæœ¬èº«æœºåˆ¶ä¿è¯äº†çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ã€‚ç”±äºŽé™æ€å•ä¾‹å¯¹è±¡æ²¡æœ‰ä½œä¸ºSingletonçš„æˆå‘˜å˜é‡ç›´æŽ¥å®žä¾‹åŒ–ï¼Œå› æ­¤ç±»åŠ è½½æ—¶ä¸ä¼šå®žä¾‹åŒ–Singletonï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨getInstance()æ—¶å°†å†…éƒ¨ç±»SingletonHodlerï¼Œåœ¨è¯¥å†…éƒ¨ç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªstaticç±»åž‹çš„å˜é‡INSTANCEï¼Œæ­¤æ—¶ä¼šé¦–å…ˆåˆå§‹åŒ–è¿™ä¸ªæˆå‘˜å˜é‡ï¼Œç”±Javaè™šæ‹Ÿæœºæ¥ä¿è¯å…¶çº¿ç¨‹å®‰å…¨æ€§ï¼Œç¡®ä¿è¯¥æˆå‘˜å˜é‡åªèƒ½åˆå§‹åŒ–ä¸€æ¬¡ã€‚ç”±äºŽgetInstance()æ–¹æ³•æ²¡æœ‰ä»»ä½•çº¿ç¨‹é”å®šï¼Œå› æ­¤å…¶æ€§èƒ½ä¸ä¼šé€ æˆä»»ä½•å½±å“ã€‚ ç”±äºŽSingletonHodleræ˜¯ç§æœ‰çš„ï¼Œé™¤äº†getInstance()ä¹‹å¤–æ²¡æœ‰åŠžæ³•è®¿é—®å®ƒï¼Œå› æ­¤å®ƒæ˜¯æ‡’æ±‰å¼çš„ï¼›åŒæ—¶è¯»å–å®žä¾‹çš„æ—¶å€™ä¸ä¼šè¿›è¡ŒåŒæ­¥ï¼Œæ²¡æœ‰æ€§èƒ½ç¼ºé™·ï¼›ä¹Ÿä¸ä¾èµ–JDKç‰ˆæœ¬ã€‚123456789//Kotlinå®žçŽ°class Singleton private constructor() &#123; companion object &#123; val instance = SingletonHolder.holder &#125; private object SingletonHolder &#123; val holder= Singleton() &#125;&#125; æžšä¸¾å¼ï¼šEnumç”¨æžšä¸¾å†™å•ä¾‹å®žåœ¨å¤ªç®€å•äº†ï¼è¿™ä¹Ÿæ˜¯å®ƒæœ€å¤§çš„ä¼˜ç‚¹ã€‚ä¸‹é¢è¿™æ®µä»£ç å°±æ˜¯å£°æ˜Žæžšä¸¾å®žä¾‹çš„é€šå¸¸åšæ³•ã€‚ 1234//Javaå®žçŽ°public enum EasySingleton&#123; INSTANCE;&#125; æˆ‘ä»¬å¯ä»¥é€šè¿‡EasySingleton.INSTANCEæ¥è®¿é—®å®žä¾‹ï¼Œè¿™æ¯”è°ƒç”¨getInstance()æ–¹æ³•ç®€å•å¤šäº†ã€‚åˆ›å»ºæžšä¸¾é»˜è®¤å°±æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦æ‹…å¿ƒdouble checked lockingï¼Œè€Œä¸”è¿˜èƒ½é˜²æ­¢ååºåˆ—åŒ–å¯¼è‡´é‡æ–°åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚1234//Kotlinå®žçŽ°enum class EasySingleton&#123; INSTANCE;&#125;]]></content>
      <tags>
        <tag>Java</tag>
        <tag>Kotlin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®°ä¸€æ¬¡å‘†è‹¥æœ¨é¸¡çš„é¢è¯•]]></title>
    <url>%2F2018%2F04%2F24%2F%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%91%86%E8%8B%A5%E6%9C%A8%E9%B8%A1%E7%9A%84%E9%9D%A2%E8%AF%95%2F</url>
    <content type="text"><![CDATA[è®°å½•ä¸€é“å¾ˆç®€å•å¾ˆç®€å•çš„å…¥é—¨é¢˜â€¦æ ¸å¿ƒå°±æ˜¯ä¸€ä¸ªæˆ‘é«˜ä¸­å°±å­¦è¿‡çš„æ•°å­¦çŸ¥è¯†â€¦å‰ç§¯â€¦å¯æƒœå¹´ä¹…ä¸ç”¨â€¦åœ¨é¢è¯•çš„ç´§è¦å…³å¤´å°±æ˜¾å¾—å‘†è‹¥æœ¨é¸¡â€¦å¾ˆé—æ†¾æ²¡æœ‰è¡¨çŽ°å‡ºè‡ªå·±çš„çœŸå®žæ°´å¹³â€¦ /* * * åœ¨ä¸€ä¸ªå¹³é¢ä¸­.ä»»æ„ä¸€ä¸ªç›´çº¿çº¿æ®µå¯ä»¥ç”±2ä¸ªç‚¹è¡¨ç¤º,ä»»æ„ä¸€ä¸ªç‚¹å¯ä»¥ç”±X,Yåæ ‡å€¼è¡¨ç¤º. *ä¾‹å¦‚çº¿æ®µ J ç”± ç‚¹A(x1, y1), B(x2, y2)è¡¨ç¤º. å…¶ä¸­åæ ‡å€¼ x,y éƒ½ä¸ºint. *æ±‚å†™å‡ºä¸€ä¸ªæ–¹æ³•, boolean checkIntersect(Line J, Line K); *æ£€æŸ¥åœ¨å¹³é¢ä¸­ç»™å‡ºçš„2ä¸ªçº¿æ®µæ˜¯å¦ç›¸äº¤, return true ä»£è¡¨çº¿æ®µç›¸äº¤, false ä¸ºä¸æƒ³äº¤. *è¯·è‡ªè¡Œå®šä¹‰çº¿æ®µLineçš„æ•°æ®ç»“æž„, å¹¶å¯ä»¥å‡è®¾ä¼ å…¥å‚æ•°Line J å’Œ Line K ä¸ºæœ‰æ•ˆè¾“å…¥. */ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118package aiqyInterview;public class CheckIntersect &#123; /** * * @author EdwardZhang * åˆ¤æ–­çº¿æ®µç›¸äº¤ï¼š * ä¸¤ä¸ªçº¿æ®µçš„äº¤ç‚¹ä¸ªæ•°å¯èƒ½æœ‰0ä¸ª 1ä¸ªæˆ–è€…æ— æ•°ä¸ª * åˆ¤æ–­ä¸¤ä¸ªçº¿æ®µç›¸äº¤ï¼Œå¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ­¥éª¤ï¼š * åˆ¤æ–­Aç‚¹Bç‚¹æ˜¯å¦åœ¨çº¿æ®µCDçš„ä¸¤ä¾§ï¼Œå³è®¡ç®—å‰ç§¯æ—¶å¼‚å· * åˆ¤æ–­Cç‚¹å’ŒDç‚¹æ˜¯å¦åœ¨çº¿æ®µABçš„ä¸¤ä¾§ï¼Œå³è®¡ç®—å‰ç§¯æ—¶å¼‚å· * ç„¶åŽåœ¨å¤„ç†ç‰¹æ®Šæƒ…å†µï¼Œå³ABCDå››ä¸ªç‚¹æœ‰è‡³å°‘ä¸‰ä¸ªç‚¹å…±çº¿çš„æƒ…å†µï¼Œ * å³å‡ºçŽ°å‰ç§¯ä¸ºé›¶çš„æƒ…å†µï¼Œå¦‚æžœAç‚¹ä¸Žçº¿æ®µCDå…±çº¿ï¼Œ * åˆ™è¦æŸ¥çœ‹Aç‚¹æ˜¯å¦åœ¨çº¿æ®µCDä¸Šï¼Œå…¶å®ƒæƒ…å†µä¾æ¬¡ç±»æŽ¨ã€‚ */ class Point &#123; int x; int y; public int getX() &#123; return x; &#125; public void setX(int x) &#123; this.x = x; &#125; public int getY() &#123; return y; &#125; public void setY(int y) &#123; this.y = y; &#125; &#125; class Line &#123; Point A = new Point(); Point B = new Point(); public Point getA() &#123; return A; &#125; public void setA(int i, int j) &#123; A.x = i; A.y = j; &#125; public Point getB() &#123; return B; &#125; public void setB(int i, int j) &#123; B.x = i; B.y = j; &#125; &#125; public static float direct(Point i, Point j, Point k) &#123; // è®¡ç®—å‰ç§¯ return (k.x - i.x) * (j.y - i.y) - (j.x - i.x) * (k.y - i.y); &#125; public static boolean onSegment(Point a, Point b, Point c) &#123; // å…±çº¿æ—¶ï¼Œåˆ¤æ–­ç‚¹æ˜¯å¦è½åœ¨çº¿æ®µ float minx = Math.min(a.x, b.x); float maxx = Math.max(a.x, b.x); float miny = Math.min(a.y, b.y); float maxy = Math.max(a.y, b.y); if (c.x &gt;= minx &amp;&amp; c.x &lt;= maxx &amp;&amp; c.y &gt;= miny &amp;&amp; c.y &lt;= maxy) &#123; return true; &#125; return false; &#125; public static boolean checkIntersect(Line X, Line Y) &#123; float d1 = direct(Y.A, Y.B, X.A); float d2 = direct(Y.A, Y.B, X.B); float d3 = direct(X.A, X.B, Y.A); float d4 = direct(X.A, X.B, Y.B); if (d1 * d2 &lt; 0 &amp;&amp; d3 * d4 &lt; 0) return true; else if (d1 == 0 &amp;&amp; onSegment(Y.A, Y.B, X.A)) return true; else if (d2 == 0 &amp;&amp; onSegment(Y.A, Y.B, X.B)) return true; else if (d3 == 0 &amp;&amp; onSegment(X.A, X.B, Y.A)) return true; else if (d4 == 0 &amp;&amp; onSegment(X.A, X.B, Y.B)) return true; return false; &#125; public static void main(String[] args) &#123; CheckIntersect checkIntersect = new CheckIntersect(); Line a = checkIntersect.new Line(); Line b = checkIntersect.new Line(); a.setA(0, 0); a.setB(2, 2); b.setA(2, 0); b.setB(0, 2); System.out.println(checkIntersect(a,b));//ç›¸äº¤ true a.setA(0, 0); a.setB(2, 2); b.setA(2, 0); b.setB(1, 0); System.out.println(checkIntersect(a,b));//ç›¸ç¦» false a.setA(0, 0); a.setB(2, 2); b.setA(2, 0); b.setB(4, 2); System.out.println(checkIntersect(a,b));//å¹³è¡Œ false a.setA(0, 0); a.setB(2, 2); b.setA(1, 1); b.setB(3, 3); System.out.println(checkIntersect(a,b));//åœ¨ä¸€æ¡ç›´çº¿ä¸Š true &#125;&#125;]]></content>
      <tags>
        <tag>Interview</tag>
        <tag>Inspire</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¡ç®—æœºç³»åº”å±Šç”Ÿæ±‚èŒæŒ‡åŒ—]]></title>
    <url>%2F2018%2F04%2F19%2F%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E5%BA%94%E5%B1%8A%E7%94%9F%E6%B1%82%E8%81%8C%E6%8C%87%E5%8C%97%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©æ—©æ™¨çœ‹åˆ°äº†Easyå¤§å¤§çš„è¿™ç¯‡æ–‡ç« ï¼Œåœ¨æ–‡ç« ä¸­è¯»åˆ°äº†è‡ªå·±çš„å½±å­ï¼Œå¹¶ä¸”ä¹Ÿæ˜Žç™½äº†è¿™æ®µæ—¶é—´è‡ªå·±åœ¨å®žä¹ æ‹›è˜ä¸­çš„ä¸è¶³ï¼Œå—ç›ŠåŒªæµ…ã€‚å¸Œæœ›æˆ‘çš„å¥½å‹å¯ä»¥çœ‹åˆ°ä»Žä¸­å—ç›Šç‰¹æ­¤è½¬è½½ Fromï¼šhttps://github.com/easychen/career-guide-for-cs-graduate è®¡ç®—æœºç³»åº”å±Šç”Ÿæ±‚èŒæŒ‡åŒ—æœ€è¿‘å¸®äº†ä¸€ä¸ªæœ‹å‹çš„æœ‹å‹åšäº†ä¸‹èŒä¸šè§„åˆ’ï¼Œç»“åˆä¹‹å‰åœ¨å¾®åšä¸Šçš„ä¸€äº›é—®ç­”ï¼Œè§‰å¾—ä¸å°‘åº”å±Šç”ŸåŒå­¦å¯¹æ±‚èŒæœ‰è›®å¤šè¯¯è§£çš„ï¼Œæ‰€ä»¥è¿™é‡Œåˆ†äº«ä¸‹æˆ‘çš„ä¸€ç‚¹ç»éªŒå§ã€‚è™½ç„¶æœ¬æ–‡é¢˜ä¸ºæŒ‡åŒ—ï¼Œä½†åªæ˜¯ä¸€ä¸ªé¢å‘å¯¹è¡Œä¸šã€å¯¹ä¸šç•ŒæŠ€æœ¯ä¸ç†Ÿæ‚‰çš„åŒå­¦çš„æ“ä½œæ‰‹å†Œã€‚å„ä½æŠ€æœ¯å¤§ç‰›å¯èƒ½è§‰å¾—ç²—æµ…ï¼Œè¯·è§è°…ã€‚ æœ¬æ–‡ç•¥é•¿ï¼Œä¼šè°ˆåŠä»¥ä¸‹é—®é¢˜ã€‚ èŒä¸šè§„åˆ’è¶Šæ—©è¶Šå¥½ ä¸€å®šè¦çæƒœæ ¡æ‹›çš„æœºä¼šçª—å£ åº”å±Šç”Ÿçš„æ±‚èŒç­–ç•¥ æŠ€æœ¯èŒä½çš„é€‰æ‹© è¯­è¨€å’ŒæŠ€æœ¯æ ˆçš„é€‰æ‹© æŠ€æœ¯æ ˆçš„ä¼˜åŒ– ç®€åŽ†çš„ä¹¦å†™ ä¸‹è¾¹æˆ‘ä»¬ä¸€ç‚¹ä¸€ç‚¹æ¥è®²ã€‚ æœ¬æ–‡ä½œè€… @Easy ï¼ˆ weibo.com/easy ï¼‰ï¼Œæ–¹ç³–å…¨æ ˆè¯¾ï¼ˆ quanzhanke.com ï¼‰ä¸»è®²äººï¼Œæœ‰å¤šå¹´å¤§è§„æ¨¡ç½‘ç«™ã€äº‘å¹³å°å¼€å‘ç»éªŒã€æ›¾è¿è¥è¿‡ç”¨æˆ·æ•°åä¸‡çš„ç¨‹åºå‘˜æ‹å–å¹³å°ï¼Œä¸ºä¸Šåƒåç¨‹åºå‘˜æ‰¾è¿‡å·¥ä½œã€‚è½¬è½½è¯·ä¿ç•™ä»¥ä¸Šä½œè€…ä¿¡æ¯å’Œé“¾æŽ¥ï¼Œè°¢è°¢ã€‚ å†…å®¹æ›´æ–°é€šçŸ¥ å¯å¾®ä¿¡æ‰«ç ï¼ˆæœªå…³æ³¨ç›´æŽ¥å…³æ³¨ï¼‰è®¢é˜…æœ¬æŒ‡åŒ—æ›´æ–°ã€‚ èŒä¸šè§„åˆ’è¶Šæ—©è¶Šå¥½èŒä¸šæ˜¯ä¸€ä¸ªéžå¸¸ç‰¹æ®Šçš„ä¸œè¥¿ï¼Œå®ƒæœ‰ä¸¤ç‚¹å¾ˆç‰¹åˆ«ï¼Œä¸€ä¸ªæ˜¯ã€Œä¸å¯é‡æ¥ã€ï¼Œå¦ä¸€ä¸ªæ˜¯ã€ŒéªŒè¯è€—æ—¶ã€ã€‚ä¹‹å‰å’Œä¸€ä¸ªè€å‹èŠå¤©ï¼Œä»–æ„Ÿå¹è¯´ï¼Œå›žè¿‡å¤´çœ‹çœ‹ï¼Œè‡ªå·±çš„æ•´ä¸ªèŒä¸šè¿‡å¾—ä¹±ä¸ƒå…«ç³Ÿã€‚ç­‰åˆ°çŽ°åœ¨æ˜Žç™½è¿™ç‚¹çš„æ—¶å€™ï¼Œå·²ç»æ¥ä¸åŠäº†ã€‚å› ä¸ºä¸€èˆ¬ä¸€æ®µèŒä¸šç»åŽ†çŸ­åˆ™ä¸€åˆ°ä¸¤å¹´ï¼Œé•¿åˆ™ä¸‰åˆ°äº”å¹´ã€‚æ¢ä¸¤å®¶å…¬å¸ï¼Œåå¹´ä¸€æ™ƒå°±è¿‡åŽ»äº†ã€‚å¦‚æžœä½ åœ¨è¿™åå¹´ä¸­æ²¡æœ‰å¾ˆå¥½çš„æˆé•¿ï¼Œåˆä¸å¹¸èº«åœ¨æŸäº›å…¬å¸ï¼Œé‚£ä¸‰åå¤šå²å¯èƒ½å°±é¢ä¸´è¢«æ¸…é€€çš„å¤„å¢ƒäº†ã€‚ æˆ‘ä¸€èˆ¬ä¸å±‘äºŽåŽ»å’Œåˆ«äººåˆ†äº«ä»€ä¹ˆäººç”Ÿç»éªŒï¼Œæ¯•ç«Ÿæœ‰äº›å‘ä¸è‡ªå·±è·³ä¸‹åŽ»æ˜¯ä¸ä¼šç‰¢è®°åœ¨å¿ƒçš„ã€‚ä½†èŒä¸šçš„å‘ä¸ä¸€æ ·ï¼Œç­‰ä½ å‘çŽ°åœ¨å‘é‡Œæ—¶ï¼Œå¯èƒ½å·²ç»æ™šäº†ã€‚æ‰€ä»¥æˆ‘èŠ±äº†è›®å¤šæ—¶é—´æ¥ç ”ç©¶è¿™ä¸ªã€‚æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥åŽ»è¯»è¯»æˆ‘çš„ã€Šç¨‹åºå‘˜è·³æ§½å…¨æ”»ç•¥ã€‹ï¼Œä¸“é—¨è®²èŒä¸šè§„åˆ’çš„ã€‚( åœ¨æˆ‘çš„ä¸ªäººç½‘ç«™ä¸Šå¯ä»¥å…è´¹è¯» æ–¹ç³–æ°”çƒðŸŽˆ|ç¨‹åºå‘˜è·³æ§½å…¨æ”»ç•¥ ) ä¸€å®šè¦çæƒœæ ¡æ‹›çš„æœºä¼šçª—å£æˆ‘å¤§å­¦çš„è¯­æ–‡è€å¸ˆæ›¾å‘Šè¯«æˆ‘ä»¬è¯´ï¼Œäººç”Ÿå°±åƒå››å­£ä¸€æ ·ï¼Œæ˜¥å¤©è¯¥æ’­ç§ï¼Œä½ åŽ»æ’­ç§ï¼Œç§‹å¤©è¯¥æ”¶èŽ·ï¼Œä½ åŽ»æ”¶èŽ·ï¼Œè¿™æ ·æ˜¯æœ€çœåŠ›çš„ã€‚ä½ éžè¦å€’è¿‡æ¥å‘¢ï¼Œä¹Ÿä¸æ˜¯ä¸è¡Œï¼Œä½†å°±æ˜¯ä¼šå¾ˆç´¯ï¼Œä¼šä»˜å‡ºæ›´å¤šçš„ç²¾åŠ›å’Œä»£ä»·ã€‚ æ ¡æ‹›ä¹Ÿç±»ä¼¼ï¼Œå®ƒæ˜¯ç¤¾ä¼šå’Œä¼ä¸šä¸ºä»Žæœªæ­¥å…¥èŒåœºçš„åŒå­¦ç‰¹æ„å‡†å¤‡çš„ä¸€ä¸ªç»¿è‰²é€šé“ã€‚åœ¨è¿™ä¸ªé€šé“é‡Œï¼Œæˆ‘ä»¬å°†å€™é€‰äººå½“åšä¸€å¼ ç™½çº¸ï¼Œå¯ä»¥æ²¡æœ‰ç»éªŒã€æ²¡æœ‰è¡Œä¸šå¸¸è¯†ï¼Œåªè¦å¯¹å·¥ä½œå……æ»¡çƒ­æƒ…ã€æœ‰è¿˜ç®—èªæ˜Žçš„å¤´è„‘ï¼ŒåŸºæœ¬éƒ½ç®—æ˜¯åˆæ ¼çš„ã€‚ä¼ä¸šä¼šä¸ºè¿™äº›åŒå­¦å‡†å¤‡åŸ¹è®­ï¼Œå¹¶ç•™è¶³é€‚åº”æœŸï¼Œæœ‰çš„ç”šè‡³è¿˜ä¼šå®‰æŽ’ä¸€å¯¹ä¸€çš„è€å‘˜å·¥æ¥å¸¦ã€‚ ä½†æ˜¯ï¼Œä¸€æ—¦ä½ é”™è¿‡äº†å®ƒï¼Œé‚£ä¸€åˆ‡éƒ½ä¸ä¸€æ ·äº†ï¼Œå› ä¸ºä½ è¿›å…¥äº†åä¸ºã€Œç¤¾æ‹›ã€çš„çº¢æµ·ã€‚åœ¨è¿™é‡Œï¼Œæ‰€æœ‰å·²ç»æ¯•ä¸šçš„äººå˜æˆäº†ä½ çš„ç«žäº‰å¯¹æ‰‹ï¼Œä¸ä½†è¦é¢å¯¹å’Œä½ ä¸€æ ·å·¥ä½œå¹´é™çš„äººç«žäº‰ï¼Œè¿˜è¦é¢å¯¹å…¶ä»–å·¥ä½œæ—¶é—´æ›´é•¿ã€ç»éªŒæ›´ä¸°å¯Œçš„åŒè¡Œè·³æ§½å¸¦æ¥çš„ç«žäº‰ã€‚ç”šè‡³ç»å¸¸å‘ç”Ÿå› ä¸ºæ‹›åˆ°äº†ä¸€ä¸ªä¸­çº§å²—ä½çš„å€™é€‰äººï¼Œå–æ¶ˆæŽ‰ä¸¤ä¸ªåˆçº§å²—ä½çš„æƒ…å†µã€‚ æ‰€ä»¥æ ¡æ‹›éžå¸¸é‡è¦ï¼Œä¸€å®šä¸è¦é”™è¿‡ã€‚ åº”å±Šç”Ÿçš„æ±‚èŒç­–ç•¥æ—¢ç„¶æ ¡æ‹›è¿™ä¹ˆé‡è¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ€Žä¹ˆæ‰èƒ½åœ¨å…¶ä¸­å æ®ä¼˜åŠ¿å‘¢ï¼Ÿè®°ä½ä¸¤ä¸ªè¯ã€Œæ‹©ä¼˜å½•å–ã€å’Œã€Œè·‘èµ¢åŒå­¦ã€ã€‚ æ‹©ä¼˜å½•å–åœ¨å¾®åšä¸Šç»å¸¸å¯ä»¥çœ‹åˆ°è¿™æ ·çš„é—®é¢˜ï¼šã€Œæˆ‘è¿™ä¸ªä¹Ÿä¼šã€é‚£ä¸ªä¹Ÿåˆæ ¼ï¼Œå‡­ä»€ä¹ˆä»–ä»¬å°±ä¸æ‹›æˆ‘å‘¢ï¼Ÿã€è¿™æ˜¯å…¸åž‹çš„æ²¡æœ‰æ˜Žç™½æ‹›è˜æœ¬è´¨çš„è¡¨çŽ°ã€‚è¦æ˜Žç™½ï¼Œæ±‚èŒä¸æ˜¯ã€Œä¼šè€ƒã€è€Œæ˜¯ã€Œé«˜è€ƒã€ï¼Œä¸æ˜¯ä»€ä¹ˆäº§å“çš„å‡ºåŽ‚åˆæ ¼æ ¡éªŒï¼Œè€Œæ˜¯ä¸€åœºä¸­å›½è¿™ä¸ªèµ„æºç´§ç¼ºåž‹å›½å®¶é‡Œçš„åˆä¸€åœºä¼˜è´¨èµ„æºäº‰å¤ºæˆ˜ã€‚ é‚£äº›è–ªæ°´é«˜ã€å‘å±•ç©ºé—´å¥½çš„çŸ¥åä¼ä¸šï¼ˆåŽæ–‡ç®€ç§°å¤§åŽ‚ï¼‰ï¼Œæ¯å¹´æ‹›è˜çš„äººæ•°æ˜¯ä¸€å®šçš„ã€‚æžç«¯ç‚¹è¯´ï¼Œå¦‚æžœçŽ°åœ¨æ‰€æœ‰å€™é€‰äººçš„æ°´å¹³éƒ½ä¸‹è°ƒ20%ï¼Œä»–ä»¬ä¾ç„¶è¦æ‹›äººçš„ï¼Œä¸ç„¶æ²¡æ³•å‘å±•ï¼ˆä¸¥æ ¼è®²ä¼šæœ‰ä¸€äº›è°ƒæ•´ç©ºé—´ï¼Œä½†ä¹Ÿæ‰›ä¸äº†å¤šä¹…ï¼‰ã€‚ æ‰€ä»¥ï¼Œå°¤å…¶æ˜¯åœ¨æ ¡æ‹›é‡Œè¾¹ï¼Œã€Œç»å¯¹å€¼ã€å¹¶ä¸é‡è¦ï¼Œã€Œç›¸å¯¹å€¼ã€æ‰æ˜¯æœ€é‡è¦çš„ã€‚ è·‘èµ¢åŒå­¦æˆ‘æ¥è®²ä¸€ä¸ªå¾ˆè€çš„ç«¥è¯ï¼Œå¬è¿‡çš„åŒå­¦è¯·è£…ä½œæ²¡å¬è¿‡ã€‚ä¸¤ä¸ªäººåœ¨æ£®æž—é‡Œè¾¹é‡åˆ°äº†ç†ŠðŸ»ï¼Œkuma çœ‹è§ä»–ä»¬å°±å—·å—·çš„è¿½äº†è¿‡æ¥ã€‚ä¸€ä¸ªåŒå­¦è½¬èº«å°±è·‘ï¼Œå¦ä¸€ä¸ªé—®ä»–è¯´ï¼Œæˆ‘ä»¬æ€Žä¹ˆè·‘ä¹Ÿè·‘ä¸è¿‡ç†Šçš„ï¼Œé‚£è·‘æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿè¿™ä¸ªåŒå­¦å›žç­”è¯´ï¼Œæˆ‘åªè¦è·‘èµ¢ä½ å°±å¥½äº†å‘€ã€‚ é‚£å…¶å®žæ ¡æ‹›ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚å®ƒä¸æ˜¯è¯´ä½ çš„èƒ½åŠ›è¦æœ‰å¤šå°‘ï¼Œå…¶å®žå†ç‰›çš„åº”å±Šç”Ÿçš„æ°´å¹³æ”¾åˆ°è¡Œä¸šé‡Œè¾¹ï¼Œéƒ½æ˜¯ä¸å…¥æµçš„ï¼Œå› ä¸ºå¾ˆå¤šæ°´å¹³æ˜¯é æµ·é‡çš„ç”¨æˆ·åŽ‹å‡ºæ¥çš„ï¼Œä½ æ²¡æœ‰é‡åˆ°è¿‡è¿™äº›åœºæ™¯ï¼Œæ€Žä¹ˆå¯èƒ½çŸ¥é“æ€Žä¹ˆåŽ»åº”å¯¹ã€‚ æ‰€ä»¥åº”å±Šç”Ÿå’Œé‚£äº›ç¤¾æ‹›çš„å€™é€‰äººæ¯”ï¼Œé€šå¸¸éƒ½æ˜¯æ²¡å•¥èƒœç®—çš„ï¼Œä½†å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å’Œä»–ä»¬æ˜¯ä¸åŒçš„èµ›é“ã€‚è¦è·‘èµ¢ä¸€ä¸ªåœ¨å¤§åŽ‚æ ¸å¿ƒå²—ä½å·¥ä½œäº†ä¸€ä¸¤å¹´çš„äººä¸å®¹æ˜“ï¼Œä½†è¦è·‘èµ¢é‚£äº›å’Œä½ ä¸€æ ·åœ¨å¤§å­¦åªå­¦äº†ä¸€å †ç†è®ºåŸºç¡€ï¼Œç”šè‡³ç†è®ºè¯¾éƒ½æ²¡å¥½å¥½å­¦å¤©å¤©åœ¨å¯å®¤åƒé¸¡çš„åŒå­¦ï¼Œå°±å®¹æ˜“å¾ˆå¤šäº†ã€‚ è¦æ‰¿è®¤ï¼Œå³ä½¿è¿™æ ·ï¼Œè¦è·‘èµ¢æŸäº›å¤©èµ„èªé¢–ã€èƒ½åŠ›æ‹”ç¾¤çš„å­¦éœ¸è¿˜æ˜¯æœ‰éš¾åº¦çš„ã€‚ä½†è¿™åœºæ¯”èµ›æ˜¯ä¸å…¬å¹³çš„ï¼Œå› ä¸ºå®ƒæ²¡è§„å®šæ¯ä¸ªäººå¿…é¡»åŒæ—¶å¼€å§‹è·‘ã€‚é²è¿…è¯´å¾—å¥½ï¼Œç¬¨é¸Ÿå…ˆé£žã€‚ï¼ˆé²è¿…ï¼šæˆ‘æ²¡æœ‰è¯´è¿‡ï¼‰å¦‚æžœæˆ‘ä»¬èƒ½æ›´æ—©çš„è®¤è¯†åˆ°è¿™ç‚¹ï¼ŒèŠ±æ›´å¤šæ—¶é—´åŽ»å‡†å¤‡ï¼Œé‚£ä¹ˆèµ¢çš„æ¦‚çŽ‡å°±ä¼šæˆå€æå‡ã€‚ æˆ‘æœ¬èº«å°±æ˜¯ä¸€ä¸ªéžå¸¸å¥½çš„ä¾‹å­ã€‚ä¸¥æ ¼çš„è®²ï¼Œæˆ‘çš„èƒ½åŠ›ç®—æ˜¯å¹³åº¸åä¸Šä¸€ç‚¹ç‚¹çš„ï¼Œè™½ç„¶åœ¨å½“æ—¶æ— è®ºå¦‚ä½•æˆ‘éƒ½ä¸ä¼šæ‰¿è®¤ã€‚å½“æˆ‘åœ¨å¤§ä¸€ä¸‹åŠæœŸè®¤è¯†åˆ°è¿™ä¸€ç‚¹æ—¶ï¼Œå°±å¼€å§‹è‡ªå­¦ PHPï¼Œå¤§äºŒçš„æ—¶å€™å†™äº†ä¸€å †æ²¡äººç”¨çš„å¼€æºé¡¹ç›®ï¼Œå¤§ä¸‰ä¸ŠåŠæœŸæ‰¾äº†å®¶å…¬å¸åšå…¼èŒï¼Œå·²ç»èƒ½æŠŠå­¦è´¹æŒ£å›žæ¥äº†ã€‚å½“å¤§ä¸‰ä¸‹åŠæœŸå¼€å§‹æ‰¾å®žä¹ æ—¶ï¼Œæˆ‘çš„ç®€åŽ†å·²ç»å¯ä»¥ç§’æ€åŒæ ¡åŒå­¦ï¼Œå°å°PK ä¸€æµé«˜æ ¡çš„åŒå­¦äº†ã€‚ æ‰€ä»¥ä½ ä»¥ä¸ºæ ¡æ‹›æ¯”çš„æ˜¯èƒ½åŠ›ï¼Œå…¶å®žå¯¹äºŽæ‰§è¡ŒåŠ›ä¸­ç­‰ã€åŒæ ·å¤©èµ‹çš„åŒå­¦æ¥è®²ï¼Œæ ¡æ‹›æ¯”çš„å…¶å®žæ˜¯è®¤çŸ¥ã€‚è¶Šæ—©è®¤è¯†åˆ°æœ¬è´¨çš„äººï¼Œå°±è¶Šå®¹æ˜“åœ¨è¿™åœºæ¸¸æˆé‡Œè¾¹èƒœå‡ºã€‚ä»Žè¿™ä¸ªè§’åº¦è®²ï¼ŒåšæŒè¯»åˆ°è¿™é‡Œçš„ä½ ï¼Œç”šè‡³å¯èƒ½å·²ç»èµ¢äº†ä¸€åŠäº†ã€‚æ‰€ä»¥è®°å¾—è¦æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„å¥½æœ‹å‹ï¼Œç„¶åŽåƒä¸‡åˆ«è®©ä½ ä¸å–œæ¬¢çš„åŒå­¦çŸ¥é“ã€‚ æŠ€æœ¯å²—ä½çš„é€‰æ‹©æŠ€æœ¯å²—ä½çš„å¤§ä½“åˆ†å¸ƒå¦‚å›¾ï¼š çŽ°åœ¨å‡ ä¹Žæ‰€æœ‰çš„è½¯ä»¶éƒ½å·²ç»äº’è”ç½‘åŒ–äº†ï¼Œå°±ç®—æ²¡æœ‰äº’è”ç½‘åŒ–çš„ï¼Œå®ƒä»¥åŽä¹Ÿä¼šäº’è”ç½‘åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ä¸å•çº¯åœ°åŽ»è¯´è½¯ä»¶å¼€å‘è¿™ä¸ªè¡Œä¸šäº†ã€‚ å¼€å‘å²—é¦–å…ˆå°±æ˜¯å¼€å‘å²—ï¼Œè¿™ä¸ªå°±åŒ…æ‹¬äº†å‰ç«¯å¼€å‘ã€åŽç«¯å¼€å‘å’Œç§»åŠ¨å¼€å‘ã€‚ å‰ç«¯å¼€å‘å’ŒåŽç«¯å¼€å‘ï¼Œä¸»è¦æ˜¯ B/S ç»“æž„é‡Œçš„ã€‚B/S ç»“æž„å°±æ˜¯ Browser-Server ç»“æž„ã€‚è€Œå‰ç«¯æŒ‡çš„å°±æ˜¯æµè§ˆå™¨è¿™ä¸ªç«¯ï¼›åŽç«¯æŒ‡çš„å°±æ˜¯æœåŠ¡å™¨è¿™ä¸ªç«¯ã€‚ å‰ç«¯å‰ç«¯ä¸»è¦åšçš„äº‹æƒ…ï¼Œå°±æ˜¯æŠŠä»ŽæœåŠ¡å™¨ç«¯è¯»å–åˆ°çš„æ•°æ®å±•çŽ°ç»™ç”¨æˆ·ï¼Œç„¶åŽé€šè¿‡å„ç§ UI æŽ§ä»¶å’Œç”¨æˆ·äº’åŠ¨ï¼Œå†å°†æ–°çš„æ•°æ®é€å›žæœåŠ¡å™¨ç«¯ã€‚å…·ä½“çš„æŠ€æœ¯åŒ…æ‹¬ HTMLã€CSSã€JavaScriptï¼Œè¿˜å¯èƒ½æœ‰ä¸€äº›åµŒå…¥æµè§ˆå™¨è¿è¡Œçš„ç»„ä»¶ï¼Œæ¯”å¦‚ Flash ã€ WebGL ã€‚ åŽç«¯åŽç«¯åˆ™ä¸»è¦é€æ•°æ®ç»™å‰ç«¯ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼Œä»¥å‰ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯ï¼Œå°†æ•°æ®åœ¨æœåŠ¡å™¨ç«¯å…ˆæ¸²æŸ“å®Œï¼Œç„¶åŽå°†è¾“å‡ºçš„ç»“æžœå‘é€ç»™å‰ç«¯ï¼›çŽ°åœ¨ç”¨çš„æ¯”è¾ƒå¤šçš„æ–¹å¼æ˜¯å°†çº¯æ•°æ®é€šè¿‡ Json æˆ–è€… xml ç­‰æ ¼å¼å‘é€ç»™å‰ç«¯ï¼Œåœ¨æµè§ˆå™¨ä¸­é€šè¿‡ JS æ¥è¿›è¡Œæ¸²æŸ“ã€‚ æ‰€ä»¥ä»¥å‰å¾ˆå¤šåŽç«¯çš„å·¥ç¨‹å¸ˆå¾€å¾€ä¹Ÿæ‡‚ä¸€äº›å‰ç«¯çš„çŸ¥è¯†ï¼Œæ¯”å¦‚æˆ‘è®¤è¯†çš„å¾ˆå¤š PHP ç¨‹åºå‘˜ï¼Œä»–ä»¬ä¸ä½†æ‡‚ MySQL å’Œ Apacheï¼Œè¿˜æ‡‚ HTML ã€ CSS ã€ JS å’Œ PSã€‚è¿™ç§å‰åŽç«¯éƒ½æ‡‚çš„å·¥ç¨‹å¸ˆï¼Œä¹Ÿå«å…¨æ ˆå·¥ç¨‹å¸ˆã€‚ åŽç«¯å¯ä»¥ç”¨å„ç§è¯­è¨€å¼€å‘ï¼Œå›½å†…ç”¨çš„æ¯”è¾ƒå¤šçš„åŒ…æ‹¬ Javaã€PHP ï¼Œè¿˜æœ‰ç›¸å¯¹å°ä¼—ä¸€äº›çš„ Python ã€ Ruby ã€ Goã€‚å…¶å®ž C ä¹Ÿæ˜¯å¯ä»¥å†™åŽç«¯çš„ï¼Œä¸è¿‡çŽ°åœ¨å·²ç»å¾ˆå°‘æœ‰å…¬å¸ç›´æŽ¥ç”¨å®ƒå†™äº†ã€‚ åŽæ¥æœ‰äº† NodeJS ï¼ŒJavaScript ä¹Ÿèƒ½è·‘åˆ°åŽç«¯äº†ï¼Œæ‰€ä»¥å¾ˆå¤šå‰ç«¯å·¥ç¨‹å¸ˆä¹Ÿæœ‰äº†åŽç«¯å¼€å‘çš„èƒ½åŠ›ï¼Œä»–ä»¬ä¹Ÿå äº†å…¨æ ˆå·¥ç¨‹å¸ˆçš„å¾ˆå¤§ä¸€éƒ¨åˆ†ã€‚ å®¢æˆ·ç«¯ç›¸å¯¹äºŽ B/S ç»“æž„ï¼Œè¿˜æœ‰ C/S ç»“æž„ï¼Œå°±æ˜¯ Client-Server ã€‚C/S ç»“æž„ä¸‹ä¸ç”¨æµè§ˆå™¨æ¥å±•çŽ°æ•°æ®å’Œäº¤äº’ï¼Œè€Œæ˜¯ç”¨å®¢æˆ·ç«¯ï¼Œä¸€èˆ¬æ˜¯ Mac/Win/Linux ä¸‰å¤§å¹³å°ã€‚ ç§»åŠ¨ç«¯æ‰‹æœºå¤§æ½®èµ·æ¥ä»¥åŽï¼Œä¸ç®¡æ˜¯ B/S ç»“æž„è¿˜æ˜¯ C/S ç»“æž„ï¼Œå…¨éƒ¨ç§»åŠ¨åŒ–äº†ã€‚B/S ç»“æž„å¯¹åº”çš„å°±æ˜¯é€‚é…æ‰‹æœºæµè§ˆå™¨çš„ç§»åŠ¨ç½‘é¡µã€ä»¥åŠåµŒå…¥åœ¨å¾®ä¿¡ã€å¾®åšé‡Œè¾¹çš„ H5 é¡µé¢; C/S ç»“æž„å°±æ˜¯ APP ï¼Œä¸€èˆ¬è¦†ç›– iOS å’Œ Android ä¸¤ä¸ªä¸»æµå¹³å°ã€‚ é™¤äº†è¿™äº›æ ‡å‡†å¼€å‘å²—ï¼Œè€Œè¿˜æœ‰ä¸€äº›æ–°å…´æˆ–è€…ç›¸å¯¹å°ä¼—çš„å¼€å‘æ–¹å‘ï¼Œæ¯”å¦‚äººå·¥æ™ºèƒ½/ç®—æ³•å·¥ç¨‹å¸ˆã€åšæ™ºèƒ½ç¡¬ä»¶çš„ç¡¬ä»¶å¼€å‘å·¥ç¨‹å¸ˆã€ç»™ä¼ä¸šåšè§£å†³æ–¹æ¡ˆçš„ä¼ä¸šè½¯ä»¶å·¥ç¨‹å¸ˆã€‚ å…¶ä»–å²—ä½è½¯ä»¶å¹¶ä¸æ˜¯å¼€å‘å‡ºæ¥å°±å®Œäº†çš„ï¼Œåœ¨ä¸Šçº¿æˆ–è€…å‘å¸ƒä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ã€Œæµ‹è¯•å·¥ç¨‹å¸ˆã€æ¥è¿›è¡Œæµ‹è¯•ï¼›è€Œä¸Šçº¿ä»¥åŽï¼Œè¿˜éœ€è¦ã€Œè¿ç»´å·¥ç¨‹å¸ˆã€æ¥ç®¡ç†å’Œä¼˜åŒ–æœåŠ¡å™¨é›†ç¾¤ã€‚çŽ°åœ¨æœåŠ¡å™¨éƒ½è™šæ‹ŸåŒ–å’Œå®¹å™¨åŒ–äº†ï¼Œè¿ç»´å·¥ç¨‹å¸ˆä¸­ä¹Ÿå‡ºçŽ°äº†æ‡‚å¼€å‘çš„åˆ†æ”¯ï¼Œå«åš DevOpsã€‚ ä¸­é«˜çº§å²—ä½ä¸ç®¡æ˜¯å¼€å‘å²—è¿˜æ˜¯æµ‹è¯•ã€è¿ç»´å²—ï¼Œéƒ½æœ‰å…¶å¯¹åº”çš„ä¸­é«˜çº§å²—ä½ã€‚å¼€å‘ä¸€èˆ¬æ˜¯æŠ€æœ¯ç»ç†ï¼›è¿ç»´ä¸€èˆ¬æ˜¯æž¶æž„å¸ˆï¼›æµ‹è¯•ä¸€èˆ¬æ˜¯æµ‹è¯•æ€»ç›‘ã€‚æŠ€æœ¯æ€»ç›‘ã€CTO å°±æ˜¯æ›´é«˜ä¸€çº§çš„èŒä½äº†ã€‚ ä»¥ä¸Šçš„èŒä½åˆ†ç±»æˆ‘ä»¬å‚è€ƒäº†æ‹›è˜ç½‘ç«™çš„åˆ†ç±»ï¼Œä¸ä¸€å®šå‡†ç¡®ï¼Œå¯èƒ½ä¼šæœ‰å¾ˆå¤šå²—ä½æ²¡è¦†ç›–åˆ°ï¼Œä¸å°‘å…¬å¸ä¹Ÿä¼šæœ‰è‡ªå·±ç‹¬ç‰¹çš„å²—ä½è®¾ç½®ã€‚ èŒä½çš„é€‰æ‹©å¦‚æžœèƒ½é€‰æ‹©çš„è¯ï¼Œä¸å»ºè®®ä¸€å¼€å§‹å°±é€‰è¿ç»´æˆ–è€…æµ‹è¯•ã€‚åŽŸå› æœ‰ä¸¤ä¸ªï¼šç¬¬ä¸€ï¼Œå› ä¸ºå®ƒä»¬è™½ç„¶å¾ˆé‡è¦ï¼Œä½†ä¸æ˜¯è½¯ä»¶å¼€å‘çš„æ ¸å¿ƒå²—ä½ã€‚ç¬¬äºŒï¼Œä»Žå¼€å‘å²—å¾€è¿™ä¸¤ä¸ªèŒä½è½¬éžå¸¸å®¹æ˜“ï¼Œåä¹‹å´éžå¸¸éš¾ã€‚ ä¹‹å‰åœ¨ç»™æŽ˜é‡‘å†™ã€Šç¨‹åºå‘˜èŒä¸šå°ç™½ä¹¦ã€‹çš„æ—¶å€™ï¼Œæˆ‘åšè¿‡ä¸€ä¸ªé‚®ä»¶è®¿è°ˆï¼Œä»¥é—®é¢˜çš„å½¢å¼é‡‡è®¿äº†å¤šä½åœ¨ä¸åŒé˜¶æ®µã€ä¸åŒå²—ä½ã€ä¸åŒåŸŽå¸‚çš„ç¨‹åºå‘˜çš„æ—¥å¸¸ã€‚å¤§å®¶å¯ä»¥è¯»ä¸€è¯»ï¼Œäº†è§£ä¸‹ã€‚ç¨‹åºå‘˜ä»¬çš„æ—¥å¸¸æ˜¯æ€Žæ ·çš„ ï¼ˆè™½ç„¶è¿™ä¸ªå°å†Œæ˜¯æ”¶è´¹çš„ï¼Œä½†è®¿è°ˆè¿™ä¸€ç« å´æ˜¯å¯ä»¥å…è´¹è¯»çš„ï¼Œä¸éœ€è¦è´­ä¹°å“ˆï¼‰ è¯­è¨€å’ŒæŠ€æœ¯æ ˆçš„é€‰æ‹©è¯­è¨€æ¦‚å†µè™½ç„¶å‡ºäºŽæŸç§æ”¿æ²»æ­£ç¡®ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šè¯´ï¼Œè¯­è¨€ä¸é‡è¦ã€‚ä½†è¯­è¨€çœŸçš„ä¸é‡è¦ä¹ˆï¼Ÿå¹¶ä¸æ˜¯è¿™æ ·çš„ï¼Œæ¯ç§è¯­è¨€éƒ½æœ‰è‡ªå·±çš„ä¼˜ç¼ºç‚¹å’Œé€‚ç”¨èŒƒå›´ã€‚ åƒæ—¥è¯­å’Œè‹±è¯­ä¸€æ ·ï¼Œä¸€ä¸ªæ˜¯çœ‹åŠ¨ç”»çŽ©æ¸¸æˆç”¨çš„ï¼Œä¸€ä¸ªæ˜¯çœ‹èµ„æ–™å†™ä»£ç ç”¨çš„ã€‚ï¼ˆè¯¯ï¼‰ä¸‹è¾¹ç®€å•ä»‹ç»ä¸‹æˆ‘çœ¼ä¸­çš„å„ä¸ªè¯­è¨€ã€‚ C/C++ ï¼šç³»ç»Ÿè¯­è¨€ï¼Œç”¨æ¥å†™åº•å±‚æ“ä½œç³»ç»Ÿã€é«˜æ€§èƒ½ä¸­é—´ä»¶å’ŒåµŒå…¥å¼å¼€å‘ã€‚ Pythonï¼šäººå·¥æ™ºèƒ½çš„å¥½é€‰æ‹©ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æžœä½ æƒ³åšäººå·¥æ™ºèƒ½æ–¹å‘çš„è¯ï¼ŒPythonè¯­è¨€å°±æ˜¯éžå¸¸ä¸é”™çš„é€‰æ‹©ã€‚å› ä¸ºå®ƒåœ¨å„ä¸ªå¤§å­¦å’Œç ”ç©¶æœºæž„ç”¨çš„éžå¸¸å¤šï¼Œæœ‰æˆç†Ÿå¥½ç”¨çš„æ•°å­¦åº“ï¼Œé€‚åˆäºŽç§‘å­¦è®¡ç®—ã€‚åœ¨æ·±åº¦å­¦ä¹ ç­‰çƒ­é—¨æ–¹å‘ä¸Šï¼Œæœ‰å¤§é‡ç”¨ Python å¼€å‘çš„æ¡†æž¶ï¼Œæ–°å‡ºçš„ Paper ä¹Ÿèƒ½å¾ˆå¿«åœ¨ GitHub ä¸Šæ‰¾åˆ° Python çš„ä»£ç å®žçŽ°ï¼Œå¯ä»¥è¯´æ˜¯ä¸äºŒé€‰æ‹©äº†ã€‚ JavaScriptï¼šå‰ç«¯å’Œå…¨ç«¯å¦‚æžœä½ æƒ³åšå‰ç«¯ï¼Œé‚£ä¹ˆç›®å‰æ¥çœ‹ï¼Œé™¤äº† JavaScript è¿˜çœŸæ²¡æœ‰åˆ«çš„é€‰æ‹©ï¼Œå› ä¸ºçŽ°åœ¨èƒ½åœ¨æµè§ˆå™¨é‡Œè¾¹è·‘èµ·æ¥ï¼Œä¹Ÿå°±æ˜¯å®ƒäº†ã€‚è¿‡ä¸¤å¹´ç­‰ wasm æˆç†Ÿå¯èƒ½ä¼šæœ‰å…¶ä»–é€‰æ‹©ï¼Œä½†çŽ°åœ¨ï¼Œæ˜¯çœŸæ²¡æœ‰ã€‚ è€Œç›¸åº”çš„ï¼Œå¦‚æžœä½ å­¦ä¼šäº† JavaScript ï¼Œæƒ³åœ¨è¿™ä¸ªåŸºç¡€ä¸Šå†æŠŠåŽç«¯ç»™åšäº†ï¼Œé‚£ä¹ˆ Node.JS å°±æ˜¯éžå¸¸å¥½çš„é€‰æ‹©ã€‚å› ä¸ºå®ƒä½¿ç”¨çš„å°±æ˜¯ JavaScript çš„è§£é‡Šå™¨ï¼ŒæŒ‰ JavaScript å†™å°±å¥½äº†ã€‚ä»Žå­¦ä¹ æˆæœ¬ä¸Šæ¥è®²ï¼Œå®ƒæ˜¯éžå¸¸ä½Žçš„ï¼Œå¯ä»¥é€šè¿‡å¾ˆä½Žçš„æŠ•å…¥ï¼Œå°±è¿›å…¥äº†æœåŠ¡å™¨ç«¯çš„é¢†åŸŸã€‚ PHPï¼šä¾ç„¶æ˜¯ç½‘ç«™é¦–é€‰å¦‚æžœä½ è¦åšç½‘ç«™ï¼Œé‚£ä¹ˆ PHP å°±æ˜¯é¦–é€‰äº†ã€‚ä¸€æ–¹é¢æ˜¯æœ‰å¤§é‡çš„å¯ç”¨ä»£ç ï¼Œä¸–ç•Œä¸Šè¶…è¿‡80%çš„ç½‘ç«™éƒ½ç”¨çš„ PHPï¼ŒåŸºæœ¬ä¸Šä½ èƒ½æƒ³åˆ°çš„ç½‘ç«™åŠŸèƒ½ï¼Œéƒ½æœ‰èƒ½æ‰¾åˆ°çš„å®žçŽ°ï¼Œæ‚¬å¿µåªæ˜¯æœ‰æ²¡æœ‰å…è´¹çš„ï¼›å¦ä¸€æ–¹é¢ï¼ŒPHP7 çš„æ€§èƒ½æå‡äº†å¾ˆå¤šï¼Œç”¨æ¥å†™ API ä¹Ÿéžå¸¸å¥½ã€‚ å¦å¤–ä¸€ç‚¹ï¼Œå°±æ˜¯ç›®å‰ä½¿ç”¨ PHP çš„å›¢é˜Ÿéžå¸¸å¤šï¼Œå³ä½¿åœ¨äºŒä¸‰çº¿åŸŽå¸‚ä¹Ÿæ¯”è¾ƒå®¹æ˜“æ‰¾åˆ°å·¥ä½œï¼Œå½“ç„¶ï¼Œç»„å»ºå›¢é˜Ÿä¹ŸåŒæ ·ç›¸å¯¹å®¹æ˜“ã€‚ Javaï¼šå¤§æ•°æ®åˆ†æžå¦‚æžœä½ è¦åšå¤§æ•°æ®åˆ†æžï¼Œé‚£ä¹ˆå¯èƒ½å°±ç¦»ä¸å¼€ Java äº†ã€‚ä»Ž Hadoop å¼€å§‹ä¸€ç³»åˆ—çš„ Google Big Table çš„å¼€æºå®žçŽ°éƒ½æ˜¯ Java çš„ï¼Œç”¨äºŽæµ·é‡æ•°æ®æœç´¢çš„ Elastic Stack ä¹Ÿæ˜¯ Java çš„ã€‚ Goï¼šäº‘è®¡ç®—å’Œå®¹å™¨ç®¡ç†å¦‚æžœä½ çŽ°åœ¨è¦æƒ³åŽ»åšäº‘è®¡ç®—ï¼Œé‚£ Go å°±æ˜¯ä¸€ä¸ªéžå¸¸å¥½çš„é€‰æ‹©ã€‚ å› ä¸ºå®ƒå°±æ˜¯ä¸ºäº†å¤§è§„æ¨¡è®¡ç®—è®¾è®¡çš„ï¼Œå¹¶å‘ç®¡ç†å’Œæ€§èƒ½éƒ½éžå¸¸ä¸é”™ã€‚è€Œä¸”æœ‰å¾ˆå¤šäº‘è®¡ç®—çš„è½¯ä»¶ï¼Œå®ƒå°±æ˜¯ Go å†™çš„ï¼Œå¦‚æžœä½ è¦åŽ»ä¿®æ”¹å®ƒï¼Œè°ƒæ•´é‡Œè¾¹çš„å®žçŽ°é€»è¾‘çš„è¯ï¼Œä¸ä¼š Go å¯èƒ½å¾ˆéº»çƒ¦ã€‚å½“ç„¶ï¼Œç†è®ºä¸Šè®²ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡å®¹å™¨å’Œå¾®æœåŠ¡çš„æ–¹å¼æ¥æžå®šï¼Œä½†è‚¯å®šæ¯”ç›´æŽ¥æ”¹ä»£ç éº»çƒ¦ã€‚ å¦å¤–åŒºå—é“¾çš„å¤§çƒ­å¹³å°ä»¥å¤ªåŠçš„å®˜æ–¹ï¼ˆæœ€å…·æ½œåŠ›ï¼‰å®žçŽ°ï¼Œä¹Ÿæ˜¯Goåšçš„ã€‚é’±é€”å¤§å¤§çš„ã€‚ è¯­è¨€çš„é€‰æ‹©å…´è¶£ä¼˜å…ˆåœ¨è¯­è¨€çš„é€‰æ‹©ä¸Šï¼Œå°¤å…¶æ˜¯ç¬¬ä¸€é—¨è¯­è¨€çš„é€‰æ‹©ä¸Šï¼Œæˆ‘ä¸€ç›´æŽ¨èå…´è¶£ä¼˜å…ˆçš„åŽŸåˆ™ã€‚å› ä¸ºå¯¹åˆå­¦è€…è€Œè¨€ï¼Œå½“ä½ é‡åˆ°å›°éš¾åšæŒä¸ä¸‹åŽ»æ—¶ï¼Œå…´è¶£ä¼šå¸®ä½ ä¸€æŠŠã€‚ä¸­å­¦æ—¶ä¸ºäº†æ”¹ä»™å‰‘ï¼Œæˆ‘è¿žæ±‡ç¼–éƒ½è¯•ç€å­¦äº†ä¸ªå…¥é—¨ ðŸ¤£ å¸‚åœºå…¶æ¬¡ä½†å…¶å®žå¯¹ç»å¤§éƒ¨åˆ†åº”å±Šç”Ÿè€Œè¨€ï¼Œå¯¹å„ç§è¯­è¨€å¹¶æ²¡æœ‰ç‰¹åˆ«çš„åå¥½ã€‚è€Œä¸”ã€Œæ‰¾åˆ°å·¥ä½œã€è¿™ä»¶äº‹æ˜¯éžå¸¸é‡è¦çš„ã€‚æ‰€ä»¥ä¸Žå…¶ç›²ç›®çš„é€‰æ‹©è¯­è¨€å­¦ä¹ ä¸å¦‚æ¥çœ‹çœ‹å„ä¸ªè¯­è¨€åœ¨æ‹›è˜å¸‚åœºçš„è¡¨çŽ°ã€‚ æˆ‘ä¹‹å‰å†™è¿‡ä¸€ä¸ªè„šæœ¬ï¼Œå¯ä»¥æŠ“å–å‡ ä¸ªäº’è”ç½‘æ‹›è˜å¤§ç«™çš„æ‹›è˜å¯äº‹ï¼Œå¹¶æŒ‰èŒä½å¯¹è–ªèµ„è¿›è¡Œç»Ÿè®¡ã€‚ä¸‹è¾¹æ˜¯æœ€è¿‘ä¸€å‘¨çš„ç»Ÿè®¡ç»“æžœã€‚ å…ˆæ¥è¯´è¯´è¿™äº›æ•°æ®æ€Žä¹ˆçœ‹ã€‚ èŒä½çƒ­åº¦ç±»ä¼¼äºŽæ‹›è˜èŒä½æ•°ï¼Œå’Œå…¶ä»–è¯­è¨€å¯¹æ¯”å°±èƒ½çœ‹å‡ºå·®è·ã€‚å¹³å‡è–ªèµ„ä¹‹æ‰€æœ‰æœ‰ä¸¤ä¸ªå€¼ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬ä¸€èˆ¬æ‹›è˜æ—¶ä¼šç»™å‡ºè–ªèµ„çš„ä¸Šé™å’Œä¸‹é™ã€‚ä¸¥æ ¼çš„è®²ï¼Œè¿™å¹¶ä¸æ˜¯å½“å‰æŸä¸ªè¯­è¨€çš„ç¨‹åºå‘˜ä»¬çš„è–ªèµ„ï¼Œè€Œæ˜¯ä»–ä»¬ä¸‹ä¸€æ¬¡è·³æ§½æ—¶çš„å¯èƒ½è–ªèµ„ã€‚å¦å¤–ï¼Œéƒ¨åˆ†ä¼ä¸šå–œæ¬¢åœ¨ä¸Šé™å€¼ä¸Šè¾¹è™šé«˜ï¼Œæ‰€ä»¥æŠŠä¸Šé™ä¹˜80%å¯èƒ½æ›´åˆç†ã€‚è€Œä¸‹é™ä¸€èˆ¬æ¯”è¾ƒçœŸå®žï¼Œæ›´å…·å¤‡å¯¹æ¯”ä»·å€¼ã€‚ ç„¶åŽæˆ‘ä»¬æ¥çœ‹çœ‹èƒ½å‘çŽ°ä»€ä¹ˆã€‚ Java çš„æ•°æ®éžå¸¸ç‰›é¦–å…ˆæˆ‘ä»¬ä¼šå‘çŽ°ï¼ŒJava çš„èŒä½çƒ­åº¦éžå¸¸é«˜ï¼Œå‡ ä¹Žåœ¨æ‰€æœ‰åŸŽå¸‚é‡Œè¾¹éƒ½æ˜¯æŽ’åç¬¬ä¸€çš„ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªç‰¹æ®ŠåŽŸå› ï¼Œå°±æ˜¯ Android èŒä½åŸºæœ¬ä¹Ÿæ˜¯ä½¿ç”¨ Java è¯­è¨€è¿›è¡Œå¼€å‘çš„ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªèŒä½æœ‰ä¸€äº›é‡å ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå­¦å¥½ Java å…¶å®žå¯ä»¥åŒæ—¶åº”è˜ Javaå·¥ç¨‹å¸ˆ å’Œ Android å·¥ç¨‹å¸ˆï¼ˆå¯èƒ½éœ€è¦é¢å¤–åœ¨å­¦ä¸€ç‚¹ç‚¹åº”ç”¨å¼€å‘çš„çŸ¥è¯†ï¼‰ï¼Œè¿™éžå¸¸åˆ’ç®—ã€‚è€Œä»Žè–ªèµ„æ–¹é¢çœ‹ï¼ŒJava ä¹Ÿæ˜¯æ•°ä¸€æ•°äºŒçš„ã€‚ å‰ç«¯ç´§è·Ÿå…¶åŽç´§éšå…¶åŽçš„æ˜¯å‰ç«¯èŒä½ã€‚å‰ç«¯æ˜¯ä¸ªéžå¸¸æœ‰æ„æ€çš„ç‰¹ç‚¹ï¼Œé‚£å°±æ˜¯â€”â€”å‡ ä¹Žæ‰€æœ‰çš„å…¬å¸éƒ½ä¼šæ‹›å‰ç«¯ã€‚å¯¹æ¯” Java è€Œè¨€ï¼Œå¯èƒ½æœ‰å¾ˆå¤šå¤§åŽ‚çš„åŽç«¯ç”¨çš„ä¸æ˜¯ Java ï¼Œé‚£ä»–ä»¬å°±ä¸éœ€è¦æ‹›è˜ Java å·¥ç¨‹å¸ˆã€‚å¦‚æžœä½ éžå¸¸æƒ³åŽ»è¿™å®¶å…¬å¸ï¼Œä½†ä½ ä¼šçš„è¯­è¨€æ˜¯ Java ï¼Œé‚£ä¹ˆå°±å¯èƒ½å’Œæœºä¼šæ“¦è‚©è€Œè¿‡ã€‚è€Œå‰ç«¯å²—ä½çš„è¯ï¼Œæœºä¼šå°±å¯èƒ½å¤§å¾—å¤šã€‚è¿™æœ‰ç‚¹åƒè¡€åž‹é‡Œè¾¹çš„Oåž‹è¡€ï¼Œæ€Žä¹ˆåœ°æ–¹éƒ½èƒ½ç”¨ã€‚å°±ç®—æ˜¯è‡ªä»¥ä¸ºç«™åœ¨é£Ÿç‰©é“¾é¡¶ç«¯é„™è§†ã€Œå¤å…¸äº’è”ç½‘ã€çš„åŒºå—é“¾å…¬å¸ä¹Ÿä¸å¾—ä¸æ‹›å‰ç«¯å‘¢ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªéžå¸¸å¥½çš„é€‰æ‹©ã€‚ é™¤äº†çœ‹çƒ­åº¦ï¼Œæˆ‘ä»¬ä¹Ÿè¦è€ƒè™‘åˆ°ç«žäº‰ï¼Œæ¯”å¦‚ Java æ˜¯ä¸€ä¸ªã€Œä¼ ç»Ÿã€å²—ï¼Œå¾ˆå¤šè½¯ä»¶è¡Œä¸šçš„å·¥ç¨‹å¸ˆä¹Ÿæ˜¯ä¼š Java çš„ã€‚è€Œã€Œå‰ç«¯ã€æ˜¯ä¸€ä¸ªæ–°å…´çš„äº’è”ç½‘å²—ï¼Œä¸“ä¸šå‰ç«¯è¿˜ä¸ç®—å¤ªå¤šï¼ˆå’Œ Java æ¯”å•¦ï¼‰ï¼Œæ‰€ä»¥å…¥èŒéš¾åº¦è¯´ä¸å®šåè€Œä½Žä¸€äº›ã€‚ å…¶ä»–è¯­è¨€å…¶ä»–è¯­è¨€åœ¨å„ä¸ªåŸŽå¸‚çš„æ•°æ®å„ä¸ç›¸åŒï¼Œå¤§å®¶å¯ä»¥æŒ‘è‡ªå·±æ„Ÿå…´è¶£çš„çœ‹ã€‚æ¯”å¦‚ Go è¯­è¨€åœ¨åŒ—äº¬æ¯”å…¶ä»–åŸŽå¸‚çƒ­å‡ å€ï¼›åŒºå—é“¾è™½ç„¶çœ‹èµ·æ¥å¾ˆç«ï¼Œä½†å…¶å®žèŒä½æ•°ä¹Ÿå°±æ¯” PHP çš„ä¸€åŠå¤šç‚¹ï¼›Ruby è™½ç„¶è–ªèµ„ä¸é”™ï¼Œä½†å²—ä½éžå¸¸å°‘â€¦ æ€»ä¹‹è¯­è¨€çš„é€‰æ‹©å› äººè€Œå¼‚å› æ—¶è€Œå¼‚ï¼Œè¯·ç»¼åˆå„ç§è§†è§’åŽ»é€‰æ‹©ä¸€ä¸ªé€‚åˆè‡ªå·±çš„ã€‚ å­¦ä¹ è·¯çº¿å›¾åœ¨é€‰æ‹©å¥½èŒä½å’Œè¯­è¨€åŽï¼Œå°±è¦å¯»æ‰¾å¯¹åº”çš„å­¦ä¹ è·¯çº¿å›¾è¿›è¡Œå­¦ä¹ äº†ã€‚è¿™é‡ŒæŽ¨èè¿™ä¸ª Star æ•°é‡è¶…è¿‡4ä¸‡çš„è·¯çº¿å›¾ï¼ˆçš„ä¸­æ–‡ç‰ˆï¼‰ï¼šGitHub - goodjack/developer-roadmap-chinese: 2018 å¹´æˆç‚º Web é–‹ç™¼äººå“¡çš„è·¯ç·šåœ– è™½ç„¶ä¸æ˜¯å¾ˆå…¨ï¼Œä½†ç»†èŠ‚ä¸é”™ã€‚ å‰ç«¯è·¯çº¿å›¾ åŽç«¯è·¯çº¿å›¾ DevOPsè·¯çº¿å›¾ æŠ€æœ¯æ ˆçš„ä¼˜åŒ–ä¹‹å‰æˆ‘ä»¬åœ¨åˆ†æž Java æ•°æ®çš„æ—¶å€™ï¼Œå‘çŽ°ä¸€ä¸ªæœ‰æ„æ€çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯ Java çš„æŠ€æœ¯æ ˆå¯ä»¥åŒæ—¶è¦†ç›–ä¸¤ä¸ªçƒ­é—¨èŒä½ â€”â€” Java å’Œ Androidï¼Œè¿™è®©æˆ‘ä»¬çš„æ±‚èŒç«žäº‰åŠ›ä¸€ä¸‹ç¿»äº†ä¸€å€ã€‚é‚£ä¹ˆåœ¨å…¶ä»–çš„è¯­è¨€å’Œå²—ä½ä¸Šè¿˜å­˜ä¸å­˜åœ¨ç±»ä¼¼çš„æƒ…å†µå‘¢ï¼Ÿ å…¶å®žæ˜¯æœ‰çš„ï¼Œæ¯”å¦‚å‰ç«¯å²—ä½å°±æ˜¯ä¸€ä¸ªéžå¸¸æœ‰æ½œåŠ›çš„ä¾‹å­ï¼Œå®ƒçš„åŽç«¯è§£å†³æ–¹æ¡ˆ NodeJS æ­£åœ¨æ—¥ç›Šæµè¡Œ ã€‚åœ¨æˆ‘å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œäº’è”ç½‘æ‹›è˜å¤§ç«™ æ‹‰å‹¾ç½‘ ä¸ŠåŒ—äº¬çš„ NodeJS èŒä½æ•°æ˜¯ 181ï¼Œä¸Šæµ·æ˜¯ 114ï¼Œæ·±åœ³æ˜¯ 65 ã€‚æ‰€ä»¥å­¦å®Œå‰ç«¯çŸ¥è¯†å†è¡¥ä¸€ä¸‹ NodeJS çš„æ”¶ç›Šæ˜¯ä¸é”™çš„ã€‚ ä½†è¿™ä¸ªæŠ€æœ¯æ ˆå…¶å®žè¿˜å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œå› ä¸ºä¸€ä¸ªå¶ç„¶çš„åŽŸå› ï¼Œæˆ‘ç»Ÿè®¡äº†ä¸€ä¸‹ PHP å²—ä½å’Œå‰ç«¯å²—ä½æ‹›è˜å¯äº‹é‡Œè¾¹å‡ºçŽ°çš„æŠ€æœ¯å…³é”®è¯ï¼Œå‘çŽ°å…¶é‡åˆåº¦ç«Ÿç„¶é«˜äºŽ60%ã€‚å…·ä½“çš„æŠ€æœ¯å…³é”®è¯å’Œçƒ­åº¦è§è¿™é‡Œ ã€ŠPHP&amp;å‰ç«¯å²—ï¼ˆ1~3å¹´ï¼‰æ ¸å¿ƒæŠ€æœ¯ç‚¹åˆ†æžæŠ¥å‘Šã€‹ å›žå¤´ä¸€æƒ³å…¶å®žä¹Ÿå¾ˆå¥½ç†è§£ï¼Œæ¯•ç«Ÿæ‹› PHP æ˜¯æ¥åšç½‘ç«™çš„ï¼ŒHTML CSS JS æ€»å¾—ä¼šä¸€äº›æ‰è¡Œã€‚è¿™æ„å‘³ç€PHPçš„åŒå­¦åªéœ€è¦è¡¥ä¸Šéƒ¨åˆ†å‰ç«¯çŸ¥è¯†ï¼Œæ¯”å¦‚ä¸»æµæ¡†æž¶ React / Vue / Angular å’Œ SPA å¼€å‘å°±å¯ä»¥åŒæ—¶åº”è˜ PHP å’Œ å‰ç«¯ èŒä½ã€‚ è¿™ä¼šæœ‰å¤šå¤§çš„ç«žäº‰åŠ›å‘¢ï¼Ÿå‰ç«¯æ‹›è˜å¯äº‹é‡Œè¾¹ï¼Œæœ‰è¶…è¿‡ååˆ†ä¹‹ä¸€çš„ä¼ä¸šæåŠäº†PHPã€‚è¿™è¿˜æ²¡å®Œï¼ŒReact æœ‰ä¸€ä¸ªæ··åˆåº”ç”¨è§£å†³æ–¹æ¡ˆï¼Œå«åš React Nativeï¼Œå¯ä»¥ç›´æŽ¥ç”¨ React æ ˆæ¥å¼€å‘æ‰‹æœºAPPã€‚è¿™ä¸ªæŠ€æœ¯çš„éœ€æ±‚å¦‚ä½•å‘¢ï¼ŸçŽ°åœ¨æ‹‰å‹¾ç½‘ä¸ŠåŒ—äº¬çš„ React Native ç›¸å…³èŒä½æ•°æœ‰ 84 ã€‚ äºŽæ˜¯å‘¢ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹© PHP + React + React Native çš„æŠ€æœ¯æ ˆï¼Œä»…ä»…å¤šå­¦ä¹ ä¸€ç‚¹çŸ¥è¯†ï¼Œå¯ä»¥æŠ•é€’çš„å²—ä½å°±ä»ŽåŽŸæ¥çš„ 364 å˜æˆäº† 364 + 373 + 84 ã€‚ è¿™å°±æ˜¯æŠ€æœ¯æ ˆä¼˜åŒ–çš„ç­–ç•¥ã€‚å…³äºŽè¿™ä¸ªæŠ€æœ¯æ ˆçš„ä¼˜åŒ–ç»“æž„ï¼Œå¯ä»¥çœ‹è¿™é‡Œ ã€Šæ–¹ç³–å…¨æ ˆå­¦ä¹ è·¯çº¿å›¾ã€‹ï¼Œè¿™ä¸ªæ ˆè¿˜é¡ºä¾¿æŠŠåŒºå—é“¾åº”ç”¨å¼€å‘ä¹Ÿè¦†ç›–äº†ã€‚å¤§å®¶å¯ä»¥ä¸¾ä¸€åä¸‰ï¼ŒåŽ»ä¼˜åŒ–è‡ªå·±é€‰ä¸­çš„æŠ€æœ¯æ ˆã€‚ ç®€åŽ†çš„å†™ä½œä¸è¦æœ€åŽæ‰¾å·¥ä½œçš„æ—¶å€™å†æ¥å†™ç®€åŽ†ã€‚çŽ°åœ¨å°±å¼€å§‹å†™ï¼Œå³ä½¿ä½ ä»€ä¹ˆéƒ½ä¸ä¼šã€‚è¿™æ ·ä½ æ‰ä¼šçœŸåˆ‡çš„æ„Ÿå—åˆ°ï¼Œè‡ªå·±çš„ç¼ºç‚¹å’ŒåŠ£åŠ¿ã€‚ç„¶åŽé€šè¿‡ä¸æ–­çš„å­¦ä¹ ï¼Œå¾€ç®€åŽ†ä¸Šè¿½åŠ æ–°çš„å†…å®¹ï¼Œç›´åˆ°ä½ è‡ªå·±çœ‹èµ·æ¥è§‰å¾—æœ‰ç«žäº‰åŠ›äº†ï¼Œç®€åŽ†æ‰ç®—é˜¶æ®µæ€§å®Œæˆäº†ã€‚ å…³äºŽç®€åŽ†çš„å†™ä½œæŠ€å·§å’Œå·¥å…·ï¼Œæˆ‘ä¹‹å‰å†™è¿‡ä¸€ç¯‡æ–‡ç« è¯¦ç»†è¯´æ˜Žï¼Œå¯ä»¥ç‚¹è¿™é‡Œé˜…è¯» ã€Šå¦‚ä½•å†™å‡ºä¸€ä»½ä¸“ä¸šçš„æŠ€æœ¯ç®€åŽ†ã€‹ ï¼ˆè¿™ç¯‡æ–‡ç« æœ¬èº«ä¾ç„¶æ˜¯å…è´¹çš„ï¼Œä¸ç”¨è´­ä¹°å°å†Œå°±èƒ½è¯»ï¼‰ å†™åœ¨æœ€åŽ( ç”±äºŽVç«™ä¸ŠæŸäº›åŒå­¦çš„ç–‘æƒ‘ï¼Œè¿™é‡Œæˆ‘ä¹Ÿè¡¥å……ä¸€ä¸‹å§ã€‚å­¦å¥½åŸºç¡€çŸ¥è¯†æ˜¯å¿…é¡»çš„ï¼Œè¿™æ˜¯æœ€åŸºæœ¬çš„ï¼Œå¦‚æžœè¿™äº›åœ°æ–¹ä½ éƒ½ä¸¢åˆ†äº†ï¼Œè¿™äº›æŠ€å·§å°±éƒ½ç™½è´¹äº† ) ( åˆ·é¢˜åº“æ˜¯é¢è¯•å¿…é¡»çš„ï¼Œä½†åªåˆ·é¢˜åº“å°±èˆæœ¬é€æœ«äº†ï¼Œå®žè·µé©±åŠ¨çš„å­¦ä¹ ä¼šè®©ä½ å¯¹åŸºç¡€çš„ç†è§£æ›´æ·±å…¥ï¼Œè™½ç„¶è¾›è‹¦ç‚¹ã€‚é¡ºä¾¿poä¸€ä¸ªé¢˜åº“ç½‘ç«™ [nowcoder]https://www.nowcoder.com/ ) ä¸çŸ¥ä¸è§‰å·²ç»å†™äº†è¿™ä¹ˆå¤šäº†ï¼Œå…¶å®žè¿˜æœ‰ä¸€äº›å†…å®¹æƒ³è¯´ï¼Œä½†æš‚æ—¶å°±ä¸å†™åˆ°è¿™é‡Œäº†ã€‚ ç­‰ä»¥åŽæœ‰ç©ºæˆ‘å†æ•´ç†ä¸€ä¸ªå°å†Œå­å§ã€‚æˆ‘æŠŠæ–‡ç« ä¹ŸåŒæ—¶å‘å¸ƒåˆ°äº† GitHubï¼Œä»¥åŽçš„æ›´æ–°ä¼šé€šè¿‡ GitHub è¿›è¡Œï¼Œæ¬¢è¿Ž watch å’Œ star ã€‚https://github.com/easychen/career-guide-for-cs-graduate PSï¼šå¦‚æžœä½ è¿˜ä¸çŸ¥é“æ€Žä¹ˆç”¨ GitHubï¼Œé‚£ä¹ˆèµ¶ç´§å­¦å­¦å§ï¼Œè¿™å¯æ˜¯ç¨‹åºå‘˜çš„å¿…å¤‡ï¼ˆäº¤å‹ï¼‰å·¥å…·å“¦ã€‚]]></content>
      <tags>
        <tag>Interview</tag>
        <tag>Inspire</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidç½‘ç»œç¼–ç¨‹é¢è¯•é¢˜é›†]]></title>
    <url>%2F2018%2F04%2F17%2FAndroid%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%86%2F</url>
    <content type="text"><![CDATA[ä¸€æ¬¡æ¬¡çš„æŒ‚äºŽä¸€é¢è®©æˆ‘ç­‹ç–²åŠ›ç«­â€¦æ„è¯†åˆ°è‡ªå·±å­˜åœ¨çœ¼é«˜æ‰‹ä½Žçš„çŠ¶æ€â€¦å‡†å¤‡é‡æ–°ä¸Šè·¯å¤¯å®žåŸºç¡€æœ¬ç‰‡æ–‡ç« Fork from android-interview ç½‘ç»œç¼–ç¨‹TCPä¸ŽUDPæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ TCPé¢å‘è¿žæŽ¥ï¼ˆå¦‚æ‰“ç”µè¯è¦å…ˆæ‹¨å·å»ºç«‹è¿žæŽ¥ï¼‰;UDPæ˜¯æ— è¿žæŽ¥çš„ï¼Œå³å‘é€æ•°æ®ä¹‹å‰ä¸éœ€è¦å»ºç«‹è¿žæŽ¥ TCPæä¾›å¯é çš„æœåŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡TCPè¿žæŽ¥ä¼ é€çš„æ•°æ®ï¼Œæ— å·®é”™ï¼Œä¸ä¸¢å¤±ï¼Œä¸é‡å¤ï¼Œä¸”æŒ‰åºåˆ°è¾¾;UDPå°½æœ€å¤§åŠªåŠ›äº¤ä»˜ï¼Œå³ä¸ä¿è¯å¯é äº¤ä»˜ TCPé¢å‘å­—èŠ‚æµï¼Œå®žé™…ä¸Šæ˜¯TCPæŠŠæ•°æ®çœ‹æˆä¸€è¿žä¸²æ— ç»“æž„çš„å­—èŠ‚æµ;UDPæ˜¯é¢å‘æŠ¥æ–‡çš„UDPæ²¡æœ‰æ‹¥å¡žæŽ§åˆ¶ï¼Œå› æ­¤ç½‘ç»œå‡ºçŽ°æ‹¥å¡žä¸ä¼šä½¿æºä¸»æœºçš„å‘é€é€ŸçŽ‡é™ä½Žï¼ˆå¯¹å®žæ—¶åº”ç”¨å¾ˆæœ‰ç”¨ï¼Œå¦‚IPç”µè¯ï¼Œå®žæ—¶è§†é¢‘ä¼šè®®ç­‰ï¼‰ æ¯ä¸€æ¡TCPè¿žæŽ¥åªèƒ½æ˜¯ç‚¹åˆ°ç‚¹çš„;UDPæ”¯æŒä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼Œå¤šå¯¹ä¸€å’Œå¤šå¯¹å¤šçš„äº¤äº’é€šä¿¡ TCPé¦–éƒ¨å¼€é”€20å­—èŠ‚;UDPçš„é¦–éƒ¨å¼€é”€å°ï¼Œåªæœ‰8ä¸ªå­—èŠ‚ TCPçš„é€»è¾‘é€šä¿¡ä¿¡é“æ˜¯å…¨åŒå·¥çš„å¯é ä¿¡é“ï¼ŒUDPåˆ™æ˜¯ä¸å¯é ä¿¡é“ ç®€å•ä»‹ç»ä¸€ä¸‹TCPä¸‰æ¬¡æ¡æ‰‹ä¸Žå››æ¬¡åˆ†æ‰‹è¿‡ç¨‹ï¼ŸTCPç”¨ä¸‰æ¬¡æ¡æ‰‹ï¼ˆthree-way handshakeï¼‰è¿‡ç¨‹åˆ›å»ºä¸€ä¸ªè¿žæŽ¥ï¼Œä½¿ç”¨å››æ¬¡åˆ†æ‰‹å…³é—­ä¸€ä¸ªè¿žæŽ¥ã€‚ ä¸‰æ¬¡æ¡æ‰‹ä¸Žå››æ¬¡åˆ†æ‰‹çš„æµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š ä¸‰æ¬¡æ¡æ‰‹ ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå»ºç«‹è¿žæŽ¥ã€‚å®¢æˆ·ç«¯å‘é€è¿žæŽ¥è¯·æ±‚æŠ¥æ–‡æ®µï¼Œå°†SYNä½ç½®ä¸º1ï¼ŒSequence Numberä¸ºxï¼›ç„¶åŽï¼Œå®¢æˆ·ç«¯è¿›å…¥SYN_SENDçŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨çš„ç¡®è®¤ï¼› ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ°SYNæŠ¥æ–‡æ®µã€‚æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯çš„SYNæŠ¥æ–‡æ®µï¼Œéœ€è¦å¯¹è¿™ä¸ªSYNæŠ¥æ–‡æ®µè¿›è¡Œç¡®è®¤ï¼Œè®¾ç½®Acknowledgment Numberä¸ºx+1(Sequence Number+1)ï¼›åŒæ—¶ï¼Œè‡ªå·±è‡ªå·±è¿˜è¦å‘é€SYNè¯·æ±‚ä¿¡æ¯ï¼Œå°†SYNä½ç½®ä¸º1ï¼ŒSequence Numberä¸ºyï¼›æœåŠ¡å™¨ç«¯å°†ä¸Šè¿°æ‰€æœ‰ä¿¡æ¯æ”¾åˆ°ä¸€ä¸ªæŠ¥æ–‡æ®µï¼ˆå³SYN+ACKæŠ¥æ–‡æ®µï¼‰ä¸­ï¼Œä¸€å¹¶å‘é€ç»™å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶æœåŠ¡å™¨è¿›å…¥SYN_RECVçŠ¶æ€ï¼› ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„SYN+ACKæŠ¥æ–‡æ®µã€‚ç„¶åŽå°†Acknowledgment Numberè®¾ç½®ä¸ºy+1ï¼Œå‘æœåŠ¡å™¨å‘é€ACKæŠ¥æ–‡æ®µï¼Œè¿™ä¸ªæŠ¥æ–‡æ®µå‘é€å®Œæ¯•ä»¥åŽï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯éƒ½è¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œå®ŒæˆTCPä¸‰æ¬¡æ¡æ‰‹ã€‚å®Œæˆäº†ä¸‰æ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å°±å¯ä»¥å¼€å§‹ä¼ é€æ•°æ®ã€‚ä»¥ä¸Šå°±æ˜¯TCPä¸‰æ¬¡æ¡æ‰‹çš„æ€»ä½“ä»‹ç»ã€‚ å››æ¬¡åˆ†æ‰‹ ç¬¬ä¸€æ¬¡åˆ†æ‰‹ï¼šä¸»æœº1ï¼ˆå¯ä»¥ä½¿å®¢æˆ·ç«¯ï¼Œä¹Ÿå¯ä»¥æ˜¯æœåŠ¡å™¨ç«¯ï¼‰ï¼Œè®¾ç½®Sequence Numberå’ŒAcknowledgment Numberï¼Œå‘ä¸»æœº2å‘é€ä¸€ä¸ªFINæŠ¥æ–‡æ®µï¼›æ­¤æ—¶ï¼Œä¸»æœº1è¿›å…¥FIN_WAIT_1çŠ¶æ€ï¼›è¿™è¡¨ç¤ºä¸»æœº1æ²¡æœ‰æ•°æ®è¦å‘é€ç»™ä¸»æœº2äº†ï¼› ç¬¬äºŒæ¬¡åˆ†æ‰‹ï¼šä¸»æœº2æ”¶åˆ°äº†ä¸»æœº1å‘é€çš„FINæŠ¥æ–‡æ®µï¼Œå‘ä¸»æœº1å›žä¸€ä¸ªACKæŠ¥æ–‡æ®µï¼ŒAcknowledgment Numberä¸ºSequence NumberåŠ 1ï¼›ä¸»æœº1è¿›å…¥FIN_WAIT_2çŠ¶æ€ï¼›ä¸»æœº2å‘Šè¯‰ä¸»æœº1ï¼Œæˆ‘â€œåŒæ„â€ä½ çš„å…³é—­è¯·æ±‚ï¼› ç¬¬ä¸‰æ¬¡åˆ†æ‰‹ï¼šä¸»æœº2å‘ä¸»æœº1å‘é€FINæŠ¥æ–‡æ®µï¼Œè¯·æ±‚å…³é—­è¿žæŽ¥ï¼ŒåŒæ—¶ä¸»æœº2è¿›å…¥LAST_ACKçŠ¶æ€ï¼› ç¬¬å››æ¬¡åˆ†æ‰‹ï¼šä¸»æœº1æ”¶åˆ°ä¸»æœº2å‘é€çš„FINæŠ¥æ–‡æ®µï¼Œå‘ä¸»æœº2å‘é€ACKæŠ¥æ–‡æ®µï¼Œç„¶åŽä¸»æœº1è¿›å…¥TIME_WAITçŠ¶æ€ï¼›ä¸»æœº2æ”¶åˆ°ä¸»æœº1çš„ACKæŠ¥æ–‡æ®µä»¥åŽï¼Œå°±å…³é—­è¿žæŽ¥ï¼›æ­¤æ—¶ï¼Œä¸»æœº1ç­‰å¾…2MSLåŽä¾ç„¶æ²¡æœ‰æ”¶åˆ°å›žå¤ï¼Œåˆ™è¯æ˜ŽServerç«¯å·²æ­£å¸¸å…³é—­ï¼Œé‚£å¥½ï¼Œä¸»æœº1ä¹Ÿå¯ä»¥å…³é—­è¿žæŽ¥äº†ã€‚ ä¸‰æ¬¡æ¡æ‰‹ä¸Žå››æ¬¡åˆ†æ‰‹ä¹Ÿæ˜¯ä¸ªè€ç”Ÿå¸¸è°ˆçš„æ¦‚å¿µï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­è¯´æ˜Žä¸€ä¸‹ã€‚ ä¸‰æ¬¡æ¡æ‰‹ ä¾‹å¦‚ä½ å°æ—¶å€™å‡ºåŽ»çŽ©ï¼Œç»å¸¸çŽ©å¿˜äº†å›žå®¶åƒé¥­ã€‚ä½ å¦ˆå¦ˆä¹Ÿç»å¸¸è¿‡æ¥å–Šä½ ã€‚å¦‚æžœä½ æ²¡æœ‰èµ°è¿œï¼Œåœ¨é—¨å£çš„å°åœŸå †ä¸ŠçŽ©æ³¥å·´ï¼Œä½ å¦ˆå¦ˆä¼šå–Šï¼šâ€å°æ–°ï¼Œå›žå®¶åƒé¥­äº†â€ã€‚ä½ å¬åˆ°åŽä¼šå›žåº”ï¼šâ€çŸ¥é“äº†ï¼Œä¸€ä¼šå°±å›žåŽ»â€ã€‚å¦ˆå¦ˆå¬åˆ°ä½ çš„å›žåº”åŽåˆè¯´ï¼šâ€å¿«ç‚¹å›žæ¥ï¼Œé¥­è¦å‡‰äº†â€ã€‚è¿™æ ·ä½ å¦ˆå¦ˆå’Œä½ å°±å®Œæˆäº†ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ã€‚ðŸ˜è¯´åˆ°è¿™é‡Œä½ ä¹Ÿå¯ä»¥ç†è§£ä¸‰æ¬¡æ¡æ‰‹çš„å¿…è¦æ€§ï¼Œå°‘äº†å…¶ä¸­ä¸€ä¸ªçŽ¯èŠ‚ï¼Œå¦ä¸€æ–¹å°±ä¼šé™·å…¥ç­‰å¾…ä¹‹ä¸­ã€‚ ä¸‰æ¬¡æ¡æ‰‹çš„ç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢å·²å¤±æ•ˆçš„è¿žæŽ¥è¯·æ±‚æŠ¥æ–‡æ®µçªç„¶åˆä¼ é€åˆ°äº†æœåŠ¡ç«¯ï¼Œå› è€Œäº§ç”Ÿé”™è¯¯. å››æ¬¡åˆ†æ‰‹ ä¾‹å¦‚å¶åƒè¨€æƒ…å‰§å¹²å‡€åˆ©è½çš„åˆ†æ‰‹ï¼Œå¥³ä¸»å¯¹ç”·ä¸»è¯´ï¼šæˆ‘ä»¬åˆ†æ‰‹å§ðŸ™„ï¼Œç”·ä¸»è¯´ï¼šåˆ†å°±åˆ†å§ðŸ˜°ã€‚å¥³ä¸»è¯´ï¼šä½ æžœç„¶æ˜¯ä¸çˆ±æˆ‘äº†ï¼Œä½ åªçŸ¥é“è®©æˆ‘å¤šå–çƒ­æ°´ðŸ™„ã€‚ç”·ä¸»è¯´ï¼šäº‹åˆ°å¦‚ä»Šä¹Ÿæ²¡ä»€ä¹ˆå¥½è¯´çš„äº†ï¼Œç¥ä½ å¹¸ç¦ðŸ™ƒã€‚å››æ¬¡åˆ†æ‰‹å®Œæˆã€‚è¯´åˆ°è¿™é‡Œä½ å¯ä»¥ç†è§£äº†å››æ¬¡åˆ†æ‰‹çš„å¿…è¦æ€§ï¼Œç¬¬ä¸€æ¬¡æ˜¯å¥³æ–¹ï¼ˆå®¢æˆ·ç«¯ï¼‰æå‡ºåˆ†æ‰‹ï¼Œç¬¬äºŒæ¬¡æ˜¯ç”·ä¸»ï¼ˆæœåŠ¡ç«¯ï¼‰åŒæ„å¥³ä¸»åˆ†æ‰‹ï¼Œç¬¬ä¸‰æ¬¡æ˜¯å¥³ä¸»ç¡®å®šç”·ä¸»ä¸å†çˆ±å¥¹ï¼Œä¹ŸåŒæ„ç”·ä¸»åˆ†æ‰‹ã€‚ç¬¬å››æ¬¡ä¸¤äººå½»åº•æ‹œæ‹œï¼ˆæ–­å¼€è¿žæŽ¥ï¼‰ã€‚ å› ä¸ºTCPæ˜¯å…¨åŒå·¥æ¨¡å¼ï¼Œæ‰€ä»¥å››æ¬¡åˆ†æ‰‹çš„ç›®çš„å°±æ˜¯ä¸ºäº†å¯é åœ°å…³é—­è¿žæŽ¥ã€‚ TCPå¦‚ä½•ä¿è¯æ•°æ®ä¼ è¾“çš„å¯é æ€§ï¼Ÿ ç¡®è®¤å’Œé‡ä¼ ï¼šæŽ¥æ”¶æ–¹æ”¶åˆ°æŠ¥æ–‡åŽå°±ä¼šè¿›è¡Œç¡®è®¤ï¼Œå‘é€æ–¹ä¸€æ®µæ—¶é—´æ²¡æœ‰æ”¶åˆ°ç¡®è®¤å°±ä¼šé‡ä¼ ã€‚ æ•°æ®æ ¡éªŒã€‚ æ•°æ®åˆç†åˆ†ç‰‡ä¸ŽæŽ’åºï¼ŒTCPä¼šå¯¹æ•°æ®è¿›è¡Œåˆ†ç‰‡ï¼ŒæŽ¥æ”¶æ–¹ä¼šç¼“å­˜ä¸ºæŒ‰åºåˆ°è¾¾çš„æ•°æ®ï¼Œé‡æ–°æŽ’åºåŽå†æäº¤ç»™åº”ç”¨å±‚ã€‚ æµç¨‹æŽ§åˆ¶ï¼šå½“æŽ¥æ”¶æ–¹æ¥ä¸åŠæŽ¥æ”¶å‘é€çš„æ•°æ®æ—¶ï¼Œåˆ™ä¼šæç¤ºå‘é€æ–¹é™ä½Žå‘é€çš„é€Ÿåº¦ï¼Œé˜²æ­¢åŒ…ä¸¢å¤±ã€‚ æ‹¥å¡žæŽ§åˆ¶ï¼šå½“ç½‘ç»œå‘ç”Ÿæ‹¥å¡žæ—¶ï¼Œå‡å°‘æ•°æ®çš„å‘é€ã€‚ HTTPä¸ŽHTTPSæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ HTTPSæ˜¯ä¸€ç§é€šè¿‡è®¡ç®—æœºç½‘ç»œè¿›è¡Œå®‰å…¨é€šä¿¡çš„ä¼ è¾“åè®®ã€‚HTTPSç»ç”±HTTPè¿›è¡Œé€šä¿¡ï¼Œä½†åˆ©ç”¨SSL/TLSæ¥åŠ å¯†æ•°æ®åŒ…ã€‚HTTPSå¼€å‘çš„ä¸»è¦ç›®çš„ï¼Œæ˜¯æä¾›å¯¹ç½‘ç«™æœåŠ¡å™¨çš„èº«ä»½è®¤è¯ï¼Œä¿æŠ¤äº¤æ¢æ•°æ®çš„éšç§ä¸Žå®Œæ•´æ€§ã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯ä»¥å¾ˆæ˜Žæ˜¾çš„çœ‹å‡ºä¸¤ä¸ªçš„åŒºåˆ«ï¼š æ³¨ï¼šTLSæ˜¯SSLçš„å‡çº§æ›¿ä»£ç‰ˆï¼Œå…·ä½“å‘å±•åŽ†å²å¯ä»¥å‚è€ƒä¼ è¾“å±‚å®‰å…¨æ€§åè®®ã€‚ HTTPä¸ŽHTTPSåœ¨å†™æ³•ä¸Šçš„åŒºåˆ«ä¹Ÿæ˜¯å‰ç¼€çš„ä¸åŒï¼Œå®¢æˆ·ç«¯å¤„ç†çš„æ–¹å¼ä¹Ÿä¸åŒï¼Œå…·ä½“è¯´æ¥ï¼š å¦‚æžœURLçš„åè®®æ˜¯HTTPï¼Œåˆ™å®¢æˆ·ç«¯ä¼šæ‰“å¼€ä¸€æ¡åˆ°æœåŠ¡ç«¯ç«¯å£80ï¼ˆé»˜è®¤ï¼‰çš„è¿žæŽ¥ï¼Œå¹¶å‘å…¶å‘é€è€çš„HTTPè¯·æ±‚ã€‚ å¦‚æžœURLçš„åè®®æ˜¯HTTPSï¼Œåˆ™å®¢æˆ·ç«¯ä¼šæ‰“å¼€ä¸€æ¡åˆ°æœåŠ¡ç«¯ç«¯å£443ï¼ˆé»˜è®¤ï¼‰çš„è¿žæŽ¥ï¼Œç„¶åŽä¸ŽæœåŠ¡å™¨æ¡æ‰‹ï¼Œä»¥äºŒè¿›åˆ¶æ ¼å¼ä¸ŽæœåŠ¡å™¨äº¤æ¢ä¸€äº›SSLçš„å®‰å…¨å‚æ•°ï¼Œé™„ä¸ŠåŠ å¯†çš„HTTPè¯·æ±‚ã€‚ æ‰€ä»¥ä½ å¯ä»¥çœ‹åˆ°ï¼ŒHTTPSæ¯”HTTPå¤šäº†ä¸€å±‚ä¸ŽSSLçš„è¿žæŽ¥ï¼Œè¿™ä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯ä¸ŽæœåŠ¡ç«¯SSLæ¡æ‰‹çš„è¿‡ç¨‹ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸»è¦å®Œæˆä»¥ä¸‹å·¥ä½œï¼š äº¤æ¢åè®®ç‰ˆæœ¬å· é€‰æ‹©ä¸€ä¸ªä¸¤ç«¯éƒ½äº†è§£çš„å¯†ç  å¯¹ä¸¤ç«¯çš„èº«ä»½è¿›è¡Œè®¤è¯ ç”Ÿæˆä¸´æ—¶çš„ä¼šè¯å¯†é’¥ï¼Œä»¥ä¾¿åŠ å¯†ä¿¡é“ã€‚ SSLæ¡æ‰‹æ˜¯ä¸€ä¸ªç›¸å¯¹æ¯”è¾ƒå¤æ‚çš„è¿‡ç¨‹ï¼Œæ›´å¤šå…³äºŽSSLæ¡æ‰‹çš„è¿‡ç¨‹ç»†èŠ‚å¯ä»¥å‚è€ƒTLS/SSLæ¡æ‰‹è¿‡ç¨‹ SSL/TSLçš„å¸¸è§å¼€æºå®žçŽ°æ˜¯OpenSSLï¼ŒOpenSSLæ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç çš„è½¯ä»¶åº“åŒ…ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨è¿™ä¸ªåŒ…æ¥è¿›è¡Œå®‰å…¨é€šä¿¡ï¼Œé¿å…çªƒå¬ï¼ŒåŒæ—¶ç¡®è®¤å¦ä¸€ç«¯è¿žæŽ¥è€…çš„èº«ä»½ã€‚è¿™ä¸ªåŒ…å¹¿æ³›è¢«åº”ç”¨åœ¨äº’è”ç½‘çš„ç½‘é¡µæœåŠ¡å™¨ä¸Šã€‚æ›´å¤šæºäºŽOpenSSLçš„æŠ€æœ¯ç»†èŠ‚å¯ä»¥å‚è€ƒOpenSSLã€‚ è°ˆä¸€è°ˆå¯¹HTTPç¼“å­˜çš„ç†è§£ï¼ŸHTTPçš„ç¼“å­˜æœºåˆ¶ä¹Ÿæ˜¯ä¾èµ–äºŽè¯·æ±‚å’Œå“åº”headeré‡Œçš„å‚æ•°ç±»å®žçŽ°çš„ï¼Œæœ€ç»ˆå“åº”å¼ä»Žç¼“å­˜ä¸­åŽ»ï¼Œè¿˜æ˜¯ä»ŽæœåŠ¡ç«¯é‡æ–°æ‹‰å–ï¼ŒHTTPçš„ç¼“å­˜æœºåˆ¶çš„æµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š ðŸ‘‰ ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹å¤§å›¾ HTTPçš„ç¼“å­˜å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼š å¼ºåˆ¶ç¼“å­˜ï¼šéœ€è¦æœåŠ¡ç«¯å‚ä¸Žåˆ¤æ–­æ˜¯å¦ç»§ç»­ä½¿ç”¨ç¼“å­˜ï¼Œå½“å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡è¯·æ±‚æ•°æ®æ˜¯ï¼ŒæœåŠ¡ç«¯è¿”å›žäº†ç¼“å­˜çš„è¿‡æœŸæ—¶é—´ï¼ˆExpiresä¸ŽCache-Controlï¼‰ï¼Œæ²¡æœ‰è¿‡æœŸå°±å¯ä»¥ç»§ç»­ä½¿ç”¨ç¼“å­˜ï¼Œå¦åˆ™åˆ™ä¸é€‚ç”¨ï¼Œæ— éœ€å†å‘æœåŠ¡ç«¯è¯¢é—®ã€‚ å¯¹æ¯”ç¼“å­˜ï¼šéœ€è¦æœåŠ¡ç«¯å‚ä¸Žåˆ¤æ–­æ˜¯å¦ç»§ç»­ä½¿ç”¨ç¼“å­˜ï¼Œå½“å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡è¯·æ±‚æ•°æ®æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šå°†ç¼“å­˜æ ‡è¯†ï¼ˆLast-Modified/If-Modified-Sinceä¸ŽEtag/If-None-Matchï¼‰ä¸Žæ•°æ®ä¸€èµ·è¿”å›žç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å°†ä¸¤è€…éƒ½å¤‡ä»½åˆ°ç¼“å­˜ä¸­ ï¼Œå†æ¬¡è¯·æ±‚æ•°æ®æ—¶ï¼Œå®¢æˆ·ç«¯å°†ä¸Šæ¬¡å¤‡ä»½çš„ç¼“å­˜æ ‡è¯†å‘é€ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯æ ¹æ®ç¼“å­˜æ ‡è¯†è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æžœè¿”å›ž304ï¼Œåˆ™è¡¨ç¤ºé€šçŸ¥å®¢æˆ·ç«¯å¯ä»¥ç»§ç»­ä½¿ç”¨ç¼“å­˜ã€‚ å¼ºåˆ¶ç¼“å­˜ä¼˜å…ˆäºŽå¯¹æ¯”ç¼“å­˜ã€‚ ä¸Šé¢æåˆ°å¼ºåˆ¶ç¼“å­˜ä½¿ç”¨çš„çš„ä¸¤ä¸ªæ ‡è¯†ï¼š Expiresï¼šExpiresçš„å€¼ä¸ºæœåŠ¡ç«¯è¿”å›žçš„åˆ°æœŸæ—¶é—´ï¼Œå³ä¸‹ä¸€æ¬¡è¯·æ±‚æ—¶ï¼Œè¯·æ±‚æ—¶é—´å°äºŽæœåŠ¡ç«¯è¿”å›žçš„åˆ°æœŸæ—¶é—´ï¼Œç›´æŽ¥ä½¿ç”¨ç¼“å­˜æ•°æ®ã€‚åˆ°æœŸæ—¶é—´æ˜¯æœåŠ¡ç«¯ç”Ÿæˆçš„ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„æ—¶é—´å¯èƒ½æœ‰è¯¯å·®ã€‚ Cache-Controlï¼šExpiresæœ‰ä¸ªæ—¶é—´æ ¡éªŒçš„é—®é¢˜ï¼Œæ‰€æœ‰HTTP1.1é‡‡ç”¨Cache-Controlæ›¿ä»£Expiresã€‚ Cache-Controlçš„å–å€¼æœ‰ä»¥ä¸‹å‡ ç§ï¼š private: å®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜ã€‚ public: å®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨éƒ½å¯ç¼“å­˜ã€‚ max-age=xxx: ç¼“å­˜çš„å†…å®¹å°†åœ¨ xxx ç§’åŽå¤±æ•ˆ no-cache: éœ€è¦ä½¿ç”¨å¯¹æ¯”ç¼“å­˜æ¥éªŒè¯ç¼“å­˜æ•°æ®ã€‚ no-store: æ‰€æœ‰å†…å®¹éƒ½ä¸ä¼šç¼“å­˜ï¼Œå¼ºåˆ¶ç¼“å­˜ï¼Œå¯¹æ¯”ç¼“å­˜éƒ½ä¸ä¼šè§¦å‘ã€‚ æˆ‘ä»¬å†æ¥çœ‹çœ‹å¯¹æ¯”ç¼“å­˜çš„ä¸¤ä¸ªæ ‡è¯†ï¼š Last-Modified/If-Modified-Since Last-Modified è¡¨ç¤ºèµ„æºä¸Šæ¬¡ä¿®æ”¹çš„æ—¶é—´ã€‚ å½“å®¢æˆ·ç«¯å‘é€ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶ï¼ŒæœåŠ¡ç«¯è¿”å›žèµ„æºä¸Šæ¬¡ä¿®æ”¹çš„æ—¶é—´ï¼š 1Last-Modified: Tue, 12 Jan 2016 09:31:27 GMT å®¢æˆ·ç«¯å†æ¬¡å‘é€ï¼Œä¼šåœ¨headeré‡Œæºå¸¦If-Modified-Sinceã€‚å°†ä¸Šæ¬¡æœåŠ¡ç«¯è¿”å›žçš„èµ„æºæ—¶é—´ä¸Šä¼ ç»™æœåŠ¡ç«¯ã€‚ 1If-Modified-Since: Tue, 12 Jan 2016 09:31:27 GMT æœåŠ¡ç«¯æŽ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„èµ„æºä¿®æ”¹æ—¶é—´ï¼Œä¸Žè‡ªå·±å½“å‰çš„èµ„æºä¿®æ”¹æ—¶é—´è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æžœè‡ªå·±çš„èµ„æºä¿®æ”¹æ—¶é—´å¤§äºŽå®¢æˆ·ç«¯å‘æ¥çš„èµ„æºä¿®æ”¹æ—¶é—´ï¼Œåˆ™è¯´æ˜Žèµ„æºåšè¿‡ä¿®æ”¹ï¼Œåˆ™è¿”å›ž200è¡¨ç¤ºéœ€è¦é‡æ–°è¯·æ±‚èµ„æºï¼Œå¦åˆ™è¿”å›ž304è¡¨ç¤ºèµ„æºæ²¡æœ‰è¢«ä¿®æ”¹ï¼Œå¯ä»¥ç»§ç»­ä½¿ç”¨ç¼“å­˜ã€‚ ä¸Šé¢æ˜¯ä¸€ç§æ—¶é—´æˆ³æ ‡è®°èµ„æºæ˜¯å¦ä¿®æ”¹çš„æ–¹æ³•ï¼Œè¿˜æœ‰ä¸€ç§èµ„æºæ ‡è¯†ç ETagçš„æ–¹å¼æ¥æ ‡è®°æ˜¯å¦ä¿®æ”¹ï¼Œå¦‚æžœæ ‡è¯†ç å‘ç”Ÿæ”¹å˜ï¼Œåˆ™è¯´æ˜Žèµ„æºå·²ç»è¢«ä¿®æ”¹ï¼ŒETagä¼˜å…ˆçº§é«˜äºŽLast-Modifiedã€‚ Etag/If-None-Match ETagæ˜¯èµ„æºæ–‡ä»¶çš„ä¸€ç§æ ‡è¯†ç ï¼Œå½“å®¢æˆ·ç«¯å‘é€ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šè¿”å›žå½“å‰èµ„æºçš„æ ‡è¯†ç ï¼š 1ETag: "5694c7ef-24dc" å®¢æˆ·ç«¯å†æ¬¡å‘é€ï¼Œä¼šåœ¨headeré‡Œæºå¸¦ä¸Šæ¬¡æœåŠ¡ç«¯è¿”å›žçš„èµ„æºæ ‡è¯†ç ï¼š 1If-None-Match:"5694c7ef-24dc" æœåŠ¡ç«¯æŽ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„èµ„æºæ ‡è¯†ç ï¼Œåˆ™ä¼šä¸Žè‡ªå·±å½“å‰çš„èµ„æºå—è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æžœä¸åŒï¼Œåˆ™è¯´æ˜Žèµ„æºå·²ç»è¢«ä¿®æ”¹ï¼Œåˆ™è¿”å›ž200ï¼Œå¦‚æžœç›¸åŒåˆ™è¯´æ˜Žèµ„æºæ²¡æœ‰è¢«ä¿®æ”¹ï¼Œè¿”å›ž304ï¼Œå®¢æˆ·ç«¯å¯ä»¥ç»§ç»­ä½¿ç”¨ç¼“å­˜ã€‚ HTTPSæ˜¯å¦‚ä½•ä¿è¯å®‰å…¨çš„ï¼Œè¯ä¹¦å¦‚ä½•æ ¡éªŒï¼ŸHTTPå¦‚ä½•å®žçŽ°é•¿è¿žæŽ¥ï¼Ÿ]]></content>
      <tags>
        <tag>Android</tag>
        <tag>Interview</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HTTPåè®®å¤ä¹ ]]></title>
    <url>%2F2018%2F04%2F16%2FHTTP%E5%8D%8F%E8%AE%AE%2F</url>
    <content type="text"><![CDATA[å¥‡è¿¹èˆ¬çš„è…¾è®¯ç¬”è¯•é€šè¿‡äº†ï¼Œæ˜¨å¤©ä¸‹åˆç»è¿‡äº†ä¸€é¢â€¦å‘çŽ°ä¹‹å‰ç€çœ¼äºŽAndroidä¸ŽJavaçš„çŸ¥è¯†è€Œæ²¡æœ‰å¯¹è®¡ç®—æœºç½‘ç»œç³»ç»Ÿçš„å¤ä¹ â€¦å¯¼è‡´äº†è¿™æ¬¡é¢è¯•çš„æ»‘é“å¢â€¦æ‰€ä»¥æƒ³è¿›è¿™æ ·çš„ä¸€çº¿å¤§åŽ‚åšä¸€ååˆæ ¼çš„ç¨‹åºå‘˜è¿˜æ˜¯è¦å…¨é¢å‘å±•â€¦ä¸èƒ½é¡¾æ­¤å¤±å½¼ Httpåè®® é»˜è®¤ç«¯å£ï¼š80 Httpåè®®çš„ä¸»è¦ç‰¹ç‚¹ æ”¯æŒå®¢æˆ·ï¼æœåŠ¡å™¨æ¨¡å¼ ç®€å•å¿«é€Ÿï¼šå®¢æˆ·å‘æœåŠ¡ç«¯è¯·æ±‚æœåŠ¡æ—¶ï¼Œåªéœ€ä¼ é€è¯·æ±‚æ–¹å¼å’Œè·¯å¾„ã€‚ çµæ´»ï¼šå…è®¸ä¼ è¾“ä»»æ„ç±»åž‹çš„æ•°æ®å¯¹è±¡ã€‚ç”±Content-TypeåŠ ä»¥æ ‡è®°ã€‚ æ— è¿žæŽ¥ï¼šæ¯æ¬¡å“åº”ä¸€ä¸ªè¯·æ±‚ï¼Œå“åº”å®Œæˆä»¥åŽå°±æ–­å¼€è¿žæŽ¥ã€‚ æ— çŠ¶æ€ï¼šæœåŠ¡å™¨ä¸ä¿å­˜æµè§ˆå™¨çš„ä»»ä½•ä¿¡æ¯ã€‚æ¯æ¬¡æäº¤çš„è¯·æ±‚ä¹‹é—´æ²¡æœ‰å…³è”ã€‚ éžæŒç»­æ€§å’ŒæŒç»­æ€§ HTTP1.0é»˜è®¤éžæŒç»­æ€§ï¼›HTTP1.1é»˜è®¤æŒç»­æ€§ æŒç»­æ€§æµè§ˆå™¨å’ŒæœåŠ¡å™¨å»ºç«‹TCPè¿žæŽ¥åŽï¼Œå¯ä»¥è¯·æ±‚å¤šä¸ªå¯¹è±¡ éžæŒç»­æ€§æµè§ˆå™¨å’ŒæœåŠ¡å™¨å»ºç«‹TCPè¿žæŽ¥åŽï¼Œåªèƒ½è¯·æ±‚ä¸€ä¸ªå¯¹è±¡ éžæµæ°´çº¿å’Œæµæ°´çº¿ ç±»ä¼¼äºŽç»„æˆé‡Œé¢çš„æµæ°´æ“ä½œ æµæ°´çº¿ï¼šä¸å¿…ç­‰åˆ°æ”¶åˆ°æœåŠ¡å™¨çš„å›žåº”å°±å‘é€ä¸‹ä¸€ä¸ªæŠ¥æ–‡ã€‚ éžæµæ°´çº¿ï¼šå‘å‡ºä¸€ä¸ªæŠ¥æ–‡ï¼Œç­‰åˆ°å“åº”ï¼Œå†å‘ä¸‹ä¸€ä¸ªæŠ¥æ–‡ã€‚ç±»ä¼¼TCPã€‚ POSTå’ŒGETçš„åŒºåˆ« Postä¸€èˆ¬ç”¨äºŽæ›´æ–°æˆ–è€…æ·»åŠ èµ„æºä¿¡æ¯ Getä¸€èˆ¬ç”¨äºŽæŸ¥è¯¢æ“ä½œï¼Œè€Œä¸”åº”è¯¥æ˜¯å®‰å…¨å’Œå¹‚ç­‰çš„ Postæ›´åŠ å®‰å…¨ Getä¼šæŠŠè¯·æ±‚çš„ä¿¡æ¯æ”¾åˆ°URLçš„åŽé¢ Postä¼ è¾“é‡ä¸€èˆ¬æ— å¤§å°é™åˆ¶ Getä¸èƒ½å¤§äºŽ2KB Postæ‰§è¡Œæ•ˆçŽ‡ä½Ž Getæ‰§è¡Œæ•ˆçŽ‡ç•¥é«˜ ä¸ºä»€ä¹ˆPOSTæ•ˆçŽ‡ä½Žï¼ŒGetæ•ˆçŽ‡é«˜ Getå°†å‚æ•°æ‹¼æˆURL,æ”¾åˆ°headeræ¶ˆæ¯å¤´é‡Œä¼ é€’ Postç›´æŽ¥ä»¥é”®å€¼å¯¹çš„å½¢å¼æ”¾åˆ°æ¶ˆæ¯ä½“ä¸­ä¼ é€’ã€‚ ä½†ä¸¤è€…çš„æ•ˆçŽ‡å·®è·å¾ˆå°å¾ˆå° Https ç«¯å£å·æ˜¯443 æ˜¯ç”±SSL+Httpåè®®æž„å»ºçš„å¯è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯çš„ç½‘ç»œåè®®ã€‚ Socket ä½¿ç”¨TCP å®¢æˆ·ç«¯ 1234567Socket socket = new Socket(&quot;ip&quot;, ç«¯å£);InputStream is = socket.getInputStream();DataInputStream dis = new DataInputStream(is);OutputStream os = socket.getOutputStream();DataInputStream dos = new DataOutputStream(os); æœåŠ¡å™¨ç«¯ 123ServerSocket serverSocket = new ServerSocket(ç«¯å£);Socket socket = serverSocket.accept();//èŽ·å–æµçš„æ–¹å¼ä¸Žå®¢æˆ·ç«¯ä¸€æ · è¯»å–è¾“å…¥æµ 123456789byte[] buffer = new byte[1024]; do&#123; int count = is.read(buffer); if(count &lt;= 0)&#123; break; &#125; else&#123; // å¯¹bufferä¿å­˜æˆ–è€…åšäº›å…¶ä»–æ“ä½œ &#125; &#125;while(true); ä½¿ç”¨UDPå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¸€æ ·çš„ 123456789DatagramSocket socket = new DatagramSocket(ç«¯å£);InetAddress serverAddress = InetAddress.getbyName(&quot;ip&quot;);//å‘é€DatagramPackage packet = new DatagramPacket(buffer, length, host, port);socket.send(packet);//æŽ¥æ”¶byte[] buf = new byte[1024];DatagramPacket packet = new DatagramPacket(buf, 1024);Socket.receive(packet); TCPä¸ŽUDP é¢å‘æŠ¥æ–‡çš„ä¼ è¾“æ–¹å¼æ˜¯åº”ç”¨å±‚äº¤ç»™UDPå¤šé•¿çš„æŠ¥æ–‡ï¼ŒUDPå°±ç…§æ ·å‘é€ï¼Œå³ä¸€æ¬¡å‘é€ä¸€ä¸ªæŠ¥æ–‡ã€‚å› æ­¤ï¼Œåº”ç”¨ç¨‹åºå¿…é¡»é€‰æ‹©åˆé€‚å¤§å°çš„æŠ¥æ–‡ã€‚è‹¥æŠ¥æ–‡å¤ªé•¿ï¼Œåˆ™IPå±‚éœ€è¦åˆ†ç‰‡ï¼Œé™ä½Žæ•ˆçŽ‡ã€‚è‹¥å¤ªçŸ­ï¼Œä¼šæ˜¯IPå¤ªå°ã€‚UDPå¯¹åº”ç”¨å±‚äº¤ä¸‹æ¥çš„æŠ¥æ–‡ï¼Œæ—¢ä¸åˆå¹¶ï¼Œä¹Ÿä¸æ‹†åˆ†ï¼Œè€Œæ˜¯ä¿ç•™è¿™äº›æŠ¥æ–‡çš„è¾¹ç•Œã€‚è¿™ä¹Ÿå°±æ˜¯è¯´ï¼Œåº”ç”¨å±‚äº¤ç»™UDPå¤šé•¿çš„æŠ¥æ–‡ï¼ŒUDPå°±ç…§æ ·å‘é€ï¼Œå³ä¸€æ¬¡å‘é€ä¸€ä¸ªæŠ¥æ–‡ã€‚é¢å‘å­—èŠ‚æµçš„è¯ï¼Œè™½ç„¶åº”ç”¨ç¨‹åºå’ŒTCPçš„äº¤äº’æ˜¯ä¸€æ¬¡ä¸€ä¸ªæ•°æ®å—ï¼ˆå¤§å°ä¸ç­‰ï¼‰ï¼Œä½†TCPæŠŠåº”ç”¨ç¨‹åºçœ‹æˆæ˜¯ä¸€è¿žä¸²çš„æ— ç»“æž„çš„å­—èŠ‚æµã€‚TCPæœ‰ä¸€ä¸ªç¼“å†²ï¼Œå½“åº”ç”¨ç¨‹åºä¼ é€çš„æ•°æ®å—å¤ªé•¿ï¼ŒTCPå°±å¯ä»¥æŠŠå®ƒåˆ’åˆ†çŸ­ä¸€äº›å†ä¼ é€ã€‚å¦‚æžœåº”ç”¨ç¨‹åºä¸€æ¬¡åªå‘é€ä¸€ä¸ªå­—èŠ‚ï¼ŒTCPä¹Ÿå¯ä»¥ç­‰å¾…ç§¯ç´¯æœ‰è¶³å¤Ÿå¤šçš„å­—èŠ‚åŽå†æž„æˆæŠ¥æ–‡æ®µå‘é€å‡ºåŽ»ã€‚ TCPåè®® Transmission Control Protocolï¼Œä¼ è¾“æŽ§åˆ¶åè®® é¢å‘è¿žæŽ¥çš„åè®® éœ€è¦ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿žæŽ¥ éœ€è¦å››æ¬¡æŒ¥æ‰‹æ–­å¼€è¿žæŽ¥ TCPæŠ¥å¤´æœ€å°é•¿åº¦ï¼š20å­—èŠ‚ ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ï¼š å®¢æˆ·ç«¯å‘é€ï¼šSYN = 1, SEQ = X, ç«¯å£å· æœåŠ¡å™¨å›žå¤ï¼šSYN = 1, ack = X + 1, SEQ = Yï¼ŒACK = 1 å®¢æˆ·ç«¯å‘é€ï¼šack = Y + 1, SEQ = X + 1,ACK = 1 SYN â€“ å»ºç«‹è¿žæŽ¥ä½ ACK â€“ å“åº”ä½ SEQ â€“ é¡ºåºå·ç  ack â€“ ç¡®è®¤å· ç¡®è®¤åº”ç­”ä¿¡å·ACK = æ”¶åˆ°çš„SEQ + 1ã€‚è¿žæŽ¥å»ºç«‹ä¸­ï¼ŒåŒæ­¥ä¿¡å·SYNå§‹ç»ˆä¸º1ã€‚è¿žæŽ¥å»ºç«‹åŽï¼ŒåŒæ­¥ä¿¡å·SYN=0ã€‚ ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šä¸»æœºAå‘é€ä½ç ä¸ºSYN = 1ï¼Œéšæœºäº§ç”ŸSEQ = 1234567çš„æ•°æ®åŒ…åˆ°æœåŠ¡å™¨ï¼Œä¸»æœºBç”±SYN = 1çŸ¥é“ï¼ŒAè¦å»ºç«‹è”æœº ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šä¸»æœºBæ”¶åˆ°è¯·æ±‚åŽè¦ç¡®è®¤è”æœºä¿¡æ¯ï¼Œå‘Aå‘é€ACK = ï¼ˆä¸»æœºAçš„SEQ+1ï¼‰ï¼ŒSYN = 1ï¼Œack = 1ï¼Œéšæœºäº§ç”ŸSEQ = 3452671çš„åŒ…ï¼› ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šä¸»æœºAæ”¶åˆ°åŽæ£€æŸ¥ackæ˜¯å¦æ­£ç¡®ï¼Œå³ç¬¬ä¸€æ¬¡å‘é€çš„ï¼ˆSEQ+1ï¼‰ï¼Œä»¥åŠä½ç ACKæ˜¯å¦ä¸º1ï¼Œè‹¥æ­£ç¡®ï¼Œä¸»æœºAä¼šå†å‘é€ack = ï¼ˆä¸»æœºBçš„SEQ+1ï¼‰ï¼ŒACK = 1ï¼Œä¸»æœºBæ”¶åˆ°åŽç¡®è®¤SEQå€¼ä¸ŽACK = 1åˆ™è¿žæŽ¥å»ºç«‹æˆåŠŸã€‚ å››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹ Aå‘Bæå‡ºåœæ­¢è¿žæŽ¥è¯·æ±‚ï¼ŒFIN = 1 Bæ”¶åˆ°ï¼ŒACK = 1 Bå‘Aæå‡ºåœæ­¢è¿žæŽ¥è¯·æ±‚ï¼ŒFIN = 1 Aæ”¶åˆ°ï¼ŒACK = 1 FIN â€“ å…³é—­è¿žæŽ¥ SYN â€“ å»ºç«‹è¿žæŽ¥ä½ ACK â€“ å“åº”ä½ SEQ â€“ é¡ºåºå·ç  ack â€“ ç¡®è®¤å·ä¼˜ç‚¹ï¼š å¯é ï¼Œç¨³å®š1ã€ä¼ é€’æ•°æ®å‰ï¼Œä¼šæœ‰ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿žæŽ¥ 2ã€ä¼ é€’æ•°æ®æ—¶ï¼Œæœ‰ç¡®è®¤ã€çª—å£ã€é‡ä¼ ã€æ‹¥å¡žæŽ§åˆ¶ 3ã€ä¼ é€’æ•°æ®åŽï¼Œä¼šæ–­å¼€è¿žæŽ¥èŠ‚çœç³»ç»Ÿèµ„æº ç¼ºç‚¹ï¼š ä¼ è¾“æ…¢ï¼Œæ•ˆçŽ‡ä½Žï¼Œå ç”¨ç³»ç»Ÿèµ„æºé«˜1ã€ä¼ é€’æ•°æ®å‰ï¼Œå»ºç«‹è¿žæŽ¥éœ€è¦è€—æ—¶2ã€ä¼ é€’æ•°æ®æ—¶ï¼Œç¡®è®¤ã€é‡ä¼ ã€æ‹¥å¡žç­‰ä¼šæ¶ˆè€—å¤§é‡æ—¶é—´ä»¥åŠCPUå’Œå†…å­˜ç­‰ç¡¬ä»¶èµ„æº æ˜“è¢«æ”»å‡»1ã€å› ä¸ºæœ‰ç¡®è®¤æœºåˆ¶ï¼Œä¸‰æ¬¡æ¡æ‰‹ç­‰æœºåˆ¶ï¼Œå®¹æ˜“è¢«äººåˆ©ç”¨ï¼Œå®žçŽ°DOS ã€DDOSæ”»å‡» å¦‚ä½•ä¿è¯æŽ¥æ”¶çš„é¡ºåºæ€§ï¼š TCPåè®®ä½¿ç”¨SEQå’ŒACKæœºåˆ¶ä¿è¯äº†é¡ºåºæ€§TCPçš„æ¯ä¸ªæŠ¥æ–‡éƒ½æ˜¯æœ‰åºå·çš„ã€‚ç¡®è®¤åº”ç­”ä¿¡å·ACK=æ”¶åˆ°çš„SEQ+1 ã€æ³¨æ„ã€‘ä¸­æ–­è¿žæŽ¥ç«¯å¯ä»¥æ˜¯Clientç«¯ï¼Œä¹Ÿå¯ä»¥æ˜¯Serverç«¯ã€‚ å‡è®¾Clientç«¯å‘èµ·ä¸­æ–­è¿žæŽ¥è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯å‘é€FINæŠ¥æ–‡ã€‚Serverç«¯æŽ¥åˆ°FINæŠ¥æ–‡åŽï¼Œæ„æ€æ˜¯è¯´â€æˆ‘Clientç«¯æ²¡æœ‰æ•°æ®è¦å‘ç»™ä½ äº†â€ï¼Œä½†æ˜¯å¦‚æžœä½ è¿˜æœ‰æ•°æ®æ²¡æœ‰å‘é€å®Œæˆï¼Œåˆ™ä¸å¿…æ€¥ç€å…³é—­Socketï¼Œå¯ä»¥ç»§ç»­å‘é€æ•°æ®ã€‚æ‰€ä»¥ä½ å…ˆå‘é€ACKï¼Œâ€å‘Šè¯‰Clientç«¯ï¼Œä½ çš„è¯·æ±‚æˆ‘æ”¶åˆ°äº†ï¼Œä½†æ˜¯æˆ‘è¿˜æ²¡å‡†å¤‡å¥½ï¼Œè¯·ç»§ç»­ä½ ç­‰æˆ‘çš„æ¶ˆæ¯â€ã€‚è¿™ä¸ªæ—¶å€™Clientç«¯å°±è¿›å…¥FIN_WAITçŠ¶æ€ï¼Œç»§ç»­ç­‰å¾…Serverç«¯çš„FINæŠ¥æ–‡ã€‚å½“Serverç«¯ç¡®å®šæ•°æ®å·²å‘é€å®Œæˆï¼Œåˆ™å‘Clientç«¯å‘é€FINæŠ¥æ–‡ï¼Œâ€å‘Šè¯‰Clientç«¯ï¼Œå¥½äº†ï¼Œæˆ‘è¿™è¾¹æ•°æ®å‘å®Œäº†ï¼Œå‡†å¤‡å¥½å…³é—­è¿žæŽ¥äº†â€ã€‚Clientç«¯æ”¶åˆ°FINæŠ¥æ–‡åŽï¼Œâ€å°±çŸ¥é“å¯ä»¥å…³é—­è¿žæŽ¥äº†ï¼Œä½†æ˜¯ä»–è¿˜æ˜¯ä¸ç›¸ä¿¡ç½‘ç»œï¼Œæ€•Serverç«¯ä¸çŸ¥é“è¦å…³é—­ï¼Œæ‰€ä»¥å‘é€ACKåŽè¿›å…¥TIME_WAITçŠ¶æ€ï¼Œå¦‚æžœServerç«¯æ²¡æœ‰æ”¶åˆ°ACKåˆ™å¯ä»¥é‡ä¼ ã€‚â€œï¼ŒServerç«¯æ”¶åˆ°ACKåŽï¼Œâ€å°±çŸ¥é“å¯ä»¥æ–­å¼€è¿žæŽ¥äº†â€ã€‚Clientç«¯ç­‰å¾…äº†2MSLåŽä¾ç„¶æ²¡æœ‰æ”¶åˆ°å›žå¤ï¼Œåˆ™è¯æ˜ŽServerç«¯å·²æ­£å¸¸å…³é—­ï¼Œé‚£å¥½ï¼Œæˆ‘Clientç«¯ä¹Ÿå¯ä»¥å…³é—­è¿žæŽ¥äº†ã€‚Okï¼ŒTCPè¿žæŽ¥å°±è¿™æ ·å…³é—­äº†ï¼ æ•´ä¸ªè¿‡ç¨‹Clientç«¯æ‰€ç»åŽ†çš„çŠ¶æ€å¦‚ä¸‹ï¼š è€ŒServerç«¯æ‰€ç»åŽ†çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š ã€æ³¨æ„ã€‘ åœ¨TIME_WAITçŠ¶æ€ä¸­ï¼Œå¦‚æžœTCP clientç«¯æœ€åŽä¸€æ¬¡å‘é€çš„ACKä¸¢å¤±äº†ï¼Œå®ƒå°†é‡æ–°å‘é€ã€‚TIME_WAITçŠ¶æ€ä¸­æ‰€éœ€è¦çš„æ—¶é—´æ˜¯ä¾èµ–äºŽå®žçŽ°æ–¹æ³•çš„ã€‚å…¸åž‹çš„å€¼ä¸º30ç§’ã€1åˆ†é’Ÿå’Œ2åˆ†é’Ÿã€‚ç­‰å¾…ä¹‹åŽè¿žæŽ¥æ­£å¼å…³é—­ï¼Œå¹¶ä¸”æ‰€æœ‰çš„èµ„æº(åŒ…æ‹¬ç«¯å£å·)éƒ½è¢«é‡Šæ”¾ã€‚ UDPåè®® User Data Protocolï¼Œç”¨æˆ·æ•°æ®åŒ…åè®® é¢å‘æ— è¿žæŽ¥çš„åè®® UDPæŠ¥å¤´åªæœ‰8å­—èŠ‚ ç®€ä»‹ï¼š ä¼ è¾“æ•°æ®ä¹‹å‰æºç«¯å’Œç»ˆç«¯ä¸å»ºç«‹è¿žæŽ¥ï¼Œå½“å®ƒæƒ³ä¼ é€æ—¶å°±ç®€å•åœ°åŽ»æŠ“å–æ¥è‡ªåº”ç”¨ç¨‹åºçš„æ•°æ®ï¼Œå¹¶å°½å¯èƒ½å¿«çš„æŠŠå®ƒæ‰”åˆ°ç½‘ç»œä¸Š åœ¨å‘é€ç«¯ï¼ŒUDPä¼ é€æ•°æ®çš„é€Ÿåº¦ä»…ä»…æ˜¯å—åº”ç”¨ç¨‹åºç”Ÿæˆæ•°æ®çš„é€Ÿåº¦ã€è®¡ç®—æœºçš„èƒ½åŠ›å’Œä¼ è¾“å¸¦å®½çš„é™åˆ¶ åœ¨æŽ¥æ”¶ç«¯ï¼ŒUDPæŠŠæ¯ä¸ªæ¶ˆæ¯æ®µæ”¾åœ¨é˜Ÿåˆ—ä¸­ï¼Œåº”ç”¨ç¨‹åºæ¯æ¬¡ä»Žé˜Ÿåˆ—ä¸­è¯»ä¸€ä¸ªæ¶ˆæ¯æ®µ ç”±äºŽä¼ è¾“æ•°æ®ä¸å»ºç«‹è¿žæŽ¥ï¼Œå› æ­¤ä¹Ÿå°±ä¸éœ€è¦ç»´æŠ¤è¿žæŽ¥çŠ¶æ€ï¼ŒåŒ…æ‹¬æ”¶å‘çŠ¶æ€ç­‰ï¼Œå› æ­¤ä¸€å°æœåŠ¡æœºå¯åŒæ—¶å‘å¤šä¸ªå®¢æˆ·æœºä¼ è¾“ç›¸åŒçš„æ¶ˆæ¯ UDPä¿¡æ¯åŒ…çš„æ ‡é¢˜å¾ˆçŸ­ï¼Œåªæœ‰8ä¸ªå­—èŠ‚ï¼Œç›¸å¯¹äºŽTCPçš„20ä¸ªå­—èŠ‚ä¿¡æ¯åŒ…çš„é¢å¤–å¼€é”€å¾ˆå° åžåé‡ä¸å—æ‹¥æŒ¤æŽ§åˆ¶ç®—æ³•çš„è°ƒèŠ‚ï¼Œåªå—åº”ç”¨è½¯ä»¶ç”Ÿæˆæ•°æ®çš„é€ŸçŽ‡ã€ä¼ è¾“å¸¦å®½ã€æºç«¯å’Œç»ˆç«¯ä¸»æœºæ€§èƒ½çš„é™åˆ¶ UDPä½¿ç”¨å°½æœ€å¤§åŠªåŠ›äº¤ä»˜ï¼Œå³ä¸ä¿è¯å¯é äº¤ä»˜ï¼Œå› æ­¤ä¸»æœºä¸éœ€è¦ç»´æŒå¤æ‚çš„é“¾æŽ¥çŠ¶æ€è¡¨ã€‚ UDPæ˜¯é¢å‘æŠ¥æ–‡çš„ã€‚å‘é€æ–¹çš„UDPå¯¹åº”ç”¨ç¨‹åºäº¤ä¸‹æ¥çš„æŠ¥æ–‡ï¼Œåœ¨æ·»åŠ é¦–éƒ¨åŽå°±å‘ä¸‹äº¤ä»˜ç»™IPå±‚ã€‚æ—¢ä¸æ‹†åˆ†ï¼Œä¹Ÿä¸åˆå¹¶ï¼Œè€Œæ˜¯ä¿ç•™è¿™äº›æŠ¥æ–‡çš„è¾¹ç•Œï¼Œå› æ­¤ï¼Œåº”ç”¨ç¨‹åºéœ€è¦é€‰æ‹©åˆé€‚çš„æŠ¥æ–‡å¤§å°ã€‚ ä½¿ç”¨â€œpingâ€å‘½ä»¤æ¥æµ‹è¯•ä¸¤å°ä¸»æœºä¹‹é—´TCP/IPé€šä¿¡æ˜¯å¦æ­£å¸¸ï¼Œå…¶å®žâ€œpingâ€å‘½ä»¤çš„åŽŸç†å°±æ˜¯å‘å¯¹æ–¹ä¸»æœºå‘é€UDPæ•°æ®åŒ…ï¼Œç„¶åŽå¯¹æ–¹ä¸»æœºç¡®è®¤æ”¶åˆ°æ•°æ®åŒ…ï¼Œå¦‚æžœæ•°æ®åŒ…æ˜¯å¦åˆ°è¾¾çš„æ¶ˆæ¯åŠæ—¶åé¦ˆå›žæ¥ï¼Œé‚£ä¹ˆç½‘ç»œå°±æ˜¯é€šçš„ã€‚ ä¼˜ç‚¹ï¼š ä¼ è¾“é€ŸçŽ‡å¿«1ã€ä¼ è¾“æ•°æ®å‰ï¼Œä¸éœ€è¦åƒTCPä¸€æ ·å»ºç«‹è¿žæŽ¥2ã€ä¼ è¾“æ•°æ®æ—¶ï¼Œæ²¡æœ‰ç¡®è®¤ã€çª—å£ã€é‡ä¼ ã€æ‹¥å¡žæŽ§åˆ¶ç­‰æœºåˆ¶ è¾ƒå®‰å…¨1ã€ç”±äºŽæ²¡æœ‰äº†TCPçš„ä¸€äº›æœºåˆ¶ï¼Œè¢«æ”»å‡»è€…åˆ©ç”¨çš„æ¼æ´žå°±å°‘äº† ç¼ºç‚¹ï¼š ä¸å¯é ï¼Œä¸ç¨³å®š1ã€ç”±äºŽæ²¡æœ‰äº†TCPçš„æœºåˆ¶ï¼Œåœ¨æ•°æ®ä¼ è¾“æ—¶å¦‚æžœç½‘ç»œä¸å¥½ï¼Œå¾ˆå¯èƒ½ä¸¢åŒ… ç”¨UDPåè®®é€šè®¯æ—¶æ€Žæ ·å¾—çŸ¥ç›®æ ‡æœºæ˜¯å¦èŽ·å¾—äº†æ•°æ®åŒ… ä»¿é€ TCPçš„åšæ³•ï¼Œæ¯å‘ä¸€ä¸ªUDPåŒ…ï¼Œéƒ½åœ¨é‡Œé¢åŠ ä¸€ä¸ªSEQåºå·ï¼ŒæŽ¥æ”¶æ–¹æ”¶åˆ°åŒ…åŽï¼Œå°†SEQåºå·å›žå¤ç»™å‘é€æ–¹ã€‚å¦‚æžœå‘é€æ–¹åœ¨æŒ‡å®šæ—¶é—´ä»¥å†…æ²¡æœ‰æ”¶åˆ°å›žåº”ï¼Œè¯´æ˜Žä¸¢åŒ…äº†ã€‚ TCPä¸ŽUDPçš„åŒºåˆ« TCPé¢å‘æœ‰é“¾æŽ¥çš„é€šä¿¡æœåŠ¡ UDPé¢å‘æ— è¿žæŽ¥çš„é€šä¿¡æœåŠ¡ TCPæä¾›å¯é çš„é€šä¿¡ä¼ è¾“ UDPä¸å¯é ,ä¼šä¸¢åŒ… TCPä¿è¯æ•°æ®é¡ºåº UDPä¸ä¿è¯ TCPæ•°æ®æ— è¾¹ç•Œ UDPæœ‰è¾¹ç•Œ TCPé€Ÿåº¦å¿« UDPé€Ÿåº¦æ…¢ TCPé¢å‘å­—èŠ‚æµ UDPé¢å‘æŠ¥æ–‡ TCPä¸€å¯¹ä¸€ UDPå¯ä»¥ä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤š TCPæŠ¥å¤´è‡³å°‘20å­—èŠ‚ UDPæŠ¥å¤´8å­—èŠ‚ TCPæœ‰æµé‡æŽ§åˆ¶ï¼Œæ‹¥å¡žæŽ§åˆ¶ UDPæ²¡æœ‰ é—®é¢˜ä¸ºä»€ä¹ˆUDPæ¯”TCPå¿« TCPéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ TCPæœ‰æ‹¥å¡žæŽ§åˆ¶ï¼ŒæŽ§åˆ¶æµé‡ç­‰æœºåˆ¶ ä¸ºä»€ä¹ˆTCPæ¯”UDPå¯é  TCPæ˜¯é¢å‘æœ‰è¿žæŽ¥çš„ï¼Œå»ºç«‹è¿žæŽ¥ä¹‹åŽæ‰å‘é€æ•°æ®ï¼›è€ŒUDPåˆ™ä¸ç®¡å¯¹æ–¹å­˜ä¸å­˜åœ¨éƒ½ä¼šå‘é€æ•°æ®ã€‚ TCPæœ‰ç¡®è®¤æœºåˆ¶ï¼ŒæŽ¥æ”¶ç«¯æ¯æ”¶åˆ°ä¸€ä¸ªæ­£ç¡®åŒ…éƒ½ä¼šå›žåº”ç»™å‘é€ç«¯ã€‚è¶…æ—¶æˆ–è€…æ•°æ®åŒ…ä¸å®Œæ•´çš„è¯å‘é€ç«¯ä¼šé‡ä¼ ã€‚UDPæ²¡æœ‰ã€‚å› æ­¤å¯èƒ½ä¸¢åŒ…ã€‚ ä»€ä¹ˆæ—¶å€™ä½¿ç”¨TCP å½“å¯¹ç½‘ç»œé€šè®¯è´¨é‡æœ‰è¦æ±‚çš„æ—¶å€™ï¼Œæ¯”å¦‚ï¼šæ•´ä¸ªæ•°æ®è¦å‡†ç¡®æ— è¯¯çš„ä¼ é€’ç»™å¯¹æ–¹ï¼Œè¿™å¾€å¾€ç”¨äºŽä¸€äº›è¦æ±‚å¯é çš„åº”ç”¨ï¼Œæ¯”å¦‚HTTPã€HTTPSã€FTPç­‰ä¼ è¾“æ–‡ä»¶çš„åè®®ï¼ŒPOPã€SMTPç­‰é‚®ä»¶ä¼ è¾“çš„åè®®ã€‚åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œå¸¸è§ä½¿ç”¨TCPåè®®çš„åº”ç”¨å¦‚ä¸‹ï¼šæµè§ˆå™¨ï¼Œç”¨çš„HTTPFlashFXPï¼Œç”¨çš„FTPOutlookï¼Œç”¨çš„POPã€SMTPPuttyï¼Œç”¨çš„Telnetã€SSHQQæ–‡ä»¶ä¼ è¾“ ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨UDPï¼š å½“å¯¹ç½‘ç»œé€šè®¯è´¨é‡è¦æ±‚ä¸é«˜çš„æ—¶å€™ï¼Œè¦æ±‚ç½‘ç»œé€šè®¯é€Ÿåº¦èƒ½å°½é‡çš„å¿«ï¼Œè¿™æ—¶å°±å¯ä»¥ä½¿ç”¨UDPã€‚æ¯”å¦‚ï¼Œæ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œå¸¸è§ä½¿ç”¨UDPåè®®çš„åº”ç”¨å¦‚ä¸‹ï¼šQQè¯­éŸ³QQè§†é¢‘TFTP TCPæ— è¾¹ç•Œï¼ŒUDPæœ‰è¾¹ç•Œ TCPæ— è¾¹ç•Œ å®¢æˆ·ç«¯åˆ†å¤šæ¬¡å‘é€æ•°æ®ç»™æœåŠ¡å™¨ï¼Œè‹¥æœåŠ¡å™¨çš„ç¼“å†²åŒºå¤Ÿå¤§ï¼Œé‚£ä¹ˆæœåŠ¡å™¨ç«¯ä¼šåœ¨å®¢æˆ·ç«¯å‘é€å®Œä¹‹åŽä¸€æ¬¡æ€§æŽ¥æ”¶è¿‡æ¥ï¼Œæ‰€ä»¥æ˜¯æ— è¾¹ç•Œçš„ï¼› UDPæœ‰è¾¹ç•Œ å®¢æˆ·ç«¯æ¯å‘é€ä¸€æ¬¡ï¼ŒæœåŠ¡å™¨ç«¯å°±ä¼šæŽ¥æ”¶ä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯è¯´å‘é€å¤šå°‘æ¬¡å°±ä¼šæŽ¥æ”¶å¤šå°‘æ¬¡ï¼Œå› æ­¤æ˜¯æœ‰è¾¹ç•Œçš„ã€‚ ä¸ºä»€ä¹ˆè¿žæŽ¥çš„æ—¶å€™æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­çš„æ—¶å€™æ˜¯å››æ¬¡æ¡æ‰‹ï¼Ÿ å› ä¸ºå½“Serverç«¯æ”¶åˆ°Clientç«¯çš„SYNè¿žæŽ¥è¯·æ±‚æŠ¥æ–‡åŽï¼Œå¯ä»¥ç›´æŽ¥å‘é€SYN+ACKæŠ¥æ–‡ã€‚å…¶ä¸­ACKæŠ¥æ–‡æ˜¯ç”¨æ¥åº”ç­”çš„ï¼ŒSYNæŠ¥æ–‡æ˜¯ç”¨æ¥åŒæ­¥çš„ã€‚ä½†æ˜¯å…³é—­è¿žæŽ¥æ—¶ï¼Œå½“Serverç«¯æ”¶åˆ°FINæŠ¥æ–‡æ—¶ï¼Œå¾ˆå¯èƒ½å¹¶ä¸ä¼šç«‹å³å…³é—­SOCKETï¼Œæ‰€ä»¥åªèƒ½å…ˆå›žå¤ä¸€ä¸ªACKæŠ¥æ–‡ï¼Œå‘Šè¯‰Clientç«¯ï¼Œâ€œä½ å‘çš„FINæŠ¥æ–‡æˆ‘æ”¶åˆ°äº†â€ã€‚åªæœ‰ç­‰åˆ°æˆ‘Serverç«¯æ‰€æœ‰çš„æŠ¥æ–‡éƒ½å‘é€å®Œäº†ï¼Œæˆ‘æ‰èƒ½å‘é€FINæŠ¥æ–‡ï¼Œå› æ­¤ä¸èƒ½ä¸€èµ·å‘é€ã€‚æ•…éœ€è¦å››æ¬¡æ¡æ‰‹ ä¸ºä»€ä¹ˆTIME_WAITçŠ¶æ€éœ€è¦ç»è¿‡2MSL(æœ€å¤§æŠ¥æ–‡æ®µç”Ÿå­˜æ—¶é—´)æ‰èƒ½è¿”å›žåˆ°CLOSEçŠ¶æ€ï¼Ÿ è™½ç„¶æŒ‰é“ç†ï¼Œå››ä¸ªæŠ¥æ–‡éƒ½å‘é€å®Œæ¯•ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æŽ¥è¿›å…¥CLOSEçŠ¶æ€äº†ï¼Œä½†æ˜¯æˆ‘ä»¬å¿…é¡»å‡è±¡ç½‘ç»œæ˜¯ä¸å¯é çš„ï¼Œæœ‰å¯ä»¥æœ€åŽä¸€ä¸ªACKä¸¢å¤±ã€‚æ‰€ä»¥TIME_WAITçŠ¶æ€æ˜¯ç”¨æ¥é‡å‘å¯èƒ½ä¸¢å¤±çš„ACKæŠ¥æ–‡ã€‚]]></content>
      <tags>
        <tag>Network</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidå¼€æºåº“é¢è¯•é¢˜é›†]]></title>
    <url>%2F2018%2F04%2F15%2FAndroid%E5%BC%80%E6%BA%90%E5%BA%93%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%86%2F</url>
    <content type="text"><![CDATA[ä¸€æ¬¡æ¬¡çš„æŒ‚äºŽä¸€é¢è®©æˆ‘ç­‹ç–²åŠ›ç«­â€¦æ„è¯†åˆ°è‡ªå·±å­˜åœ¨çœ¼é«˜æ‰‹ä½Žçš„çŠ¶æ€â€¦å‡†å¤‡é‡æ–°ä¸Šè·¯å¤¯å®žåŸºç¡€æœ¬ç‰‡æ–‡ç« Fork from android-interview è°ˆè°ˆå¯¹Okhttpçš„ç†è§£ï¼ŸVolleyä¸ŽOkHttpçš„å¯¹æ¯”ï¼š Volleyï¼šæ”¯æŒHTTPSã€‚ç¼“å­˜ã€å¼‚æ­¥è¯·æ±‚ï¼Œä¸æ”¯æŒåŒæ­¥è¯·æ±‚ã€‚åè®®ç±»åž‹æ˜¯Http/1.0, Http/1.1ï¼Œç½‘ç»œä¼ è¾“ä½¿ç”¨çš„æ˜¯ HttpUrlConnection/HttpClientï¼Œæ•°æ®è¯»å†™ä½¿ç”¨çš„IOã€‚ OkHttpï¼šæ”¯æŒHTTPSã€‚ç¼“å­˜ã€å¼‚æ­¥è¯·æ±‚ã€åŒæ­¥è¯·æ±‚ã€‚åè®®ç±»åž‹æ˜¯Http/1.0, Http/1.1, SPDY, Http/2.0, WebSocketï¼Œç½‘ç»œä¼ è¾“ä½¿ç”¨çš„æ˜¯å°è£…çš„Socketï¼Œæ•°æ®è¯»å†™ä½¿ç”¨çš„NIOï¼ˆOkioï¼‰ã€‚ SPDYåè®®ç±»ä¼¼äºŽHTTPï¼Œä½†æ—¨åœ¨ç¼©çŸ­ç½‘é¡µçš„åŠ è½½æ—¶é—´å’Œæé«˜å®‰å…¨æ€§ã€‚SPDYåè®®é€šè¿‡åŽ‹ç¼©ã€å¤šè·¯å¤ç”¨å’Œä¼˜å…ˆçº§æ¥ç¼©çŸ­åŠ è½½æ—¶é—´ã€‚ Okhttpçš„å­ç³»ç»Ÿå±‚çº§ç»“æž„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š ðŸ‘‰ ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹å¤§å›¾ ç½‘ç»œé…ç½®å±‚ï¼šåˆ©ç”¨Builderæ¨¡å¼é…ç½®å„ç§å‚æ•°ï¼Œä¾‹å¦‚ï¼šè¶…æ—¶æ—¶é—´ã€æ‹¦æˆªå™¨ç­‰ï¼Œè¿™äº›å‚æ•°éƒ½ä¼šç”±Okhttpåˆ†å‘ç»™å„ä¸ªéœ€è¦çš„å­ç³»ç»Ÿã€‚ é‡å®šå‘å±‚ï¼šè´Ÿè´£é‡å®šå‘ã€‚ Headeræ‹¼æŽ¥å±‚ï¼šè´Ÿè´£æŠŠç”¨æˆ·æž„é€ çš„è¯·æ±‚è½¬æ¢ä¸ºå‘é€ç»™æœåŠ¡å™¨çš„è¯·æ±‚ï¼ŒæŠŠæœåŠ¡å™¨è¿”å›žçš„å“åº”è½¬æ¢ä¸ºå¯¹ç”¨æˆ·å‹å¥½çš„å“åº”ã€‚ HTTPç¼“å­˜å±‚ï¼šè´Ÿè´£è¯»å–ç¼“å­˜ä»¥åŠæ›´æ–°ç¼“å­˜ã€‚ è¿žæŽ¥å±‚ï¼šè¿žæŽ¥å±‚æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„å±‚çº§ï¼Œå®ƒå®žçŽ°äº†ç½‘ç»œåè®®ã€å†…éƒ¨çš„æ‹¦æˆªå™¨ã€å®‰å…¨æ€§è®¤è¯ï¼Œè¿žæŽ¥ä¸Žè¿žæŽ¥æ± ç­‰åŠŸèƒ½ï¼Œä½†è¿™ä¸€å±‚è¿˜æ²¡æœ‰å‘èµ·çœŸæ­£çš„è¿žæŽ¥ï¼Œå®ƒåªæ˜¯åšäº†è¿žæŽ¥å™¨ä¸€äº›å‚æ•°çš„å¤„ç†ã€‚ æ•°æ®å“åº”å±‚ï¼šè´Ÿè´£ä»ŽæœåŠ¡å™¨è¯»å–å“åº”çš„æ•°æ®ã€‚ åœ¨æ•´ä¸ªOkhttpçš„ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬è¿˜è¦ç†è§£ä»¥ä¸‹å‡ ä¸ªå…³é”®è§’è‰²ï¼š OkHttpClientï¼šé€šä¿¡çš„å®¢æˆ·ç«¯ï¼Œç”¨æ¥ç»Ÿä¸€ç®¡ç†å‘èµ·è¯·æ±‚ä¸Žè§£æžå“åº”ã€‚ Callï¼šCallæ˜¯ä¸€ä¸ªæŽ¥å£ï¼Œå®ƒæ˜¯HTTPè¯·æ±‚çš„æŠ½è±¡æè¿°ï¼Œå…·ä½“å®žçŽ°ç±»æ˜¯RealCallï¼Œå®ƒç”±CallFactoryåˆ›å»ºã€‚ Requestï¼šè¯·æ±‚ï¼Œå°è£…è¯·æ±‚çš„å…·ä½“ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼šurlã€headerç­‰ã€‚ RequestBodyï¼šè¯·æ±‚ä½“ï¼Œç”¨æ¥æäº¤æµã€è¡¨å•ç­‰è¯·æ±‚ä¿¡æ¯ã€‚ Responseï¼šHTTPè¯·æ±‚çš„å“åº”ï¼ŒèŽ·å–å“åº”ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼šå“åº”headerç­‰ã€‚ ResponseBodyï¼šHTTPè¯·æ±‚çš„å“åº”ä½“ï¼Œè¢«è¯»å–ä¸€æ¬¡ä»¥åŽå°±ä¼šå…³é—­ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡å¤è°ƒç”¨responseBody.string()èŽ·å–è¯·æ±‚ç»“æžœæ˜¯ä¼šæŠ¥é”™çš„ã€‚ Interceptorï¼šInterceptoræ˜¯è¯·æ±‚æ‹¦æˆªå™¨ï¼Œè´Ÿè´£æ‹¦æˆªå¹¶å¤„ç†è¯·æ±‚ï¼Œå®ƒå°†ç½‘ç»œè¯·æ±‚ã€ç¼“å­˜ã€é€æ˜ŽåŽ‹ç¼©ç­‰åŠŸèƒ½éƒ½ç»Ÿä¸€èµ·æ¥ï¼Œæ¯ä¸ªåŠŸèƒ½éƒ½æ˜¯ä¸€ä¸ªInterceptorï¼Œæ‰€æœ‰çš„Interceptoræœ€ç»ˆè¿žæŽ¥æˆä¸€ä¸ªInterceptor.Chainã€‚å…¸åž‹çš„è´£ä»»é“¾æ¨¡å¼å®žçŽ°ã€‚ StreamAllocationï¼šç”¨æ¥æŽ§åˆ¶Connectionsä¸ŽStreasçš„èµ„æºåˆ†é…ä¸Žé‡Šæ”¾ã€‚ RouteSelectorï¼šé€‰æ‹©è·¯çº¿ä¸Žè‡ªåŠ¨é‡è¿žã€‚ RouteDatabaseï¼šè®°å½•è¿žæŽ¥å¤±è´¥çš„Routeé»‘åå•ã€‚ è°ˆè°ˆå¯¹Frescoç†è§£ï¼ŸFrescoä¸ŽGlideçš„å¯¹æ¯”ï¼š Glideï¼šç›¸å¯¹è½»é‡çº§ï¼Œç”¨æ³•ç®€å•ä¼˜é›…ï¼Œæ”¯æŒGifåŠ¨æ€å›¾ï¼Œé€‚åˆç”¨åœ¨é‚£äº›å¯¹å›¾ç‰‡ä¾èµ–ä¸å¤§çš„Appä¸­ã€‚ Frescoï¼šé‡‡ç”¨åŒ¿åå…±äº«å†…å­˜æ¥ä¿å­˜å›¾ç‰‡ï¼Œä¹Ÿå°±æ˜¯Nativeå †ï¼Œæœ‰æ•ˆçš„çš„é¿å…äº†OOMï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œä½†æ˜¯åº“ä½“ç§¯è¿‡å¤§ï¼Œé€‚åˆç”¨åœ¨å¯¹å›¾ç‰‡ä¾èµ–æ¯”è¾ƒå¤§çš„Appä¸­ã€‚ Frescoçš„æ•´ä½“æž¶æž„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ðŸ‘‰ ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹å¤§å›¾ DraweeViewï¼šç»§æ‰¿äºŽImageViewï¼Œåªæ˜¯ç®€å•çš„è¯»å–xmlæ–‡ä»¶çš„ä¸€äº›å±žæ€§å€¼å’Œåšä¸€äº›åˆå§‹åŒ–çš„å·¥ä½œï¼Œå›¾å±‚ç®¡ç†äº¤ç”±Hierarchyè´Ÿè´£ï¼Œå›¾å±‚æ•°æ®èŽ·å–äº¤ç”±è´Ÿè´£ã€‚ DraweeHierarchyï¼šç”±å¤šå±‚Drawableç»„æˆï¼Œæ¯å±‚Drawableæä¾›æŸç§åŠŸèƒ½ï¼ˆä¾‹å¦‚ï¼šç¼©æ”¾ã€åœ†è§’ï¼‰ã€‚ DraweeControllerï¼šæŽ§åˆ¶æ•°æ®çš„èŽ·å–ä¸Žå›¾ç‰‡åŠ è½½ï¼Œå‘pipelineå‘å‡ºè¯·æ±‚ï¼Œå¹¶æŽ¥æ”¶ç›¸åº”äº‹ä»¶ï¼Œå¹¶æ ¹æ®ä¸åŒäº‹ä»¶æŽ§åˆ¶Hierarchyï¼Œä»ŽDraweeViewæŽ¥æ”¶ç”¨æˆ·çš„äº‹ä»¶ï¼Œç„¶åŽæ‰§è¡Œå–æ¶ˆç½‘ç»œè¯·æ±‚ã€å›žæ”¶èµ„æºç­‰æ“ä½œã€‚ DraweeHolderï¼šç»Ÿç­¹ç®¡ç†Hierarchyä¸ŽDraweeHolderã€‚ ImagePipelineï¼šFrescoçš„æ ¸å¿ƒæ¨¡å—ï¼Œç”¨æ¥ä»¥å„ç§æ–¹å¼ï¼ˆå†…å­˜ã€ç£ç›˜ã€ç½‘ç»œç­‰ï¼‰èŽ·å–å›¾åƒã€‚ Producer/Consumerï¼šProducerä¹Ÿæœ‰å¾ˆå¤šç§ï¼Œå®ƒç”¨æ¥å®Œæˆç½‘ç»œæ•°æ®èŽ·å–ï¼Œç¼“å­˜æ•°æ®èŽ·å–ã€å›¾ç‰‡è§£ç ç­‰å¤šç§å·¥ä½œï¼Œå®ƒäº§ç”Ÿçš„ç»“æžœç”±Consumerè¿›è¡Œæ¶ˆè´¹ã€‚ IO/Dataï¼šè¿™ä¸€å±‚ä¾¿æ˜¯æ•°æ®å±‚äº†ï¼Œè´Ÿè´£å®žçŽ°å†…å­˜ç¼“å­˜ã€ç£ç›˜ç¼“å­˜ã€ç½‘ç»œç¼“å­˜å’Œå…¶ä»–IOç›¸å…³çš„åŠŸèƒ½ã€‚ çºµè§‚æ•´ä¸ªFrescoçš„æž¶æž„ï¼ŒDraweeViewæ˜¯é—¨é¢ï¼Œå’Œç”¨æˆ·è¿›è¡Œäº¤äº’ï¼ŒDraweeHierarchyæ˜¯è§†å›¾å±‚çº§ï¼Œç®¡ç†å›¾å±‚ï¼ŒDraweeControlleræ˜¯æŽ§åˆ¶å™¨ï¼Œç®¡ç†æ•°æ®ã€‚å®ƒä»¬æž„æˆäº†æ•´ä¸ªFrescoæ¡†æž¶çš„ä¸‰é©¾é©¬è½¦ã€‚å½“ç„¶è¿˜æœ‰æˆ‘ä»¬å¹•åŽè‹±é›„Producerï¼Œæ‰€æœ‰çš„è„æ´»ç´¯æ´»éƒ½æ˜¯å®ƒå¹²çš„ï¼Œæœ€ä½³åŠ³æ¨¡ðŸ‘ ç†è§£äº†Frescoæ•´ä½“çš„æž¶æž„ï¼Œæˆ‘ä»¬è¿˜æœ‰äº†è§£åœ¨è¿™å¥—çŸ¿å»ºé‡Œå‘æŒ¥é‡è¦ä½œç”¨çš„å‡ ä¸ªå…³é”®è§’è‰²ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š Supplierï¼šæä¾›ä¸€ç§ç‰¹å®šç±»åž‹çš„å¯¹è±¡ï¼ŒFrescoé‡Œæœ‰å¾ˆå¤šä»¥Supplierç»“å°¾çš„ç±»éƒ½å®žçŽ°äº†è¿™ä¸ªæŽ¥å£ã€‚ SimpleDraweeViewï¼šè¿™ä¸ªæˆ‘ä»¬å°±å¾ˆç†Ÿæ‚‰äº†ï¼Œå®ƒæŽ¥æ”¶ä¸€ä¸ªURLï¼Œç„¶åŽè°ƒç”¨ControlleråŽ»åŠ è½½å›¾ç‰‡ã€‚è¯¥ç±»ç»§æ‰¿äºŽGenericDraweeViewï¼ŒGenericDraweeViewåˆç»§æ‰¿äºŽDraweeViewï¼ŒDraweeViewæ˜¯Frescoçš„é¡¶å±‚Viewç±»ã€‚ PipelineDraweeControllerï¼šè´Ÿè´£å›¾ç‰‡æ•°æ®çš„èŽ·å–ä¸ŽåŠ è½½ï¼Œå®ƒç»§æ‰¿äºŽAbstractDraweeControllerï¼Œç”±PipelineDraweeControllerBuilderæž„å»ºè€Œæ¥ã€‚AbstractDraweeControllerå®žçŽ°äº†DraweeControlleræŽ¥å£ï¼ŒDraweeControlleræ˜¯Frescoçš„æ•°æ®å¤§ç®¡å®¶ï¼Œæ‰€ä»¥çš„å›¾ç‰‡æ•°æ®çš„å¤„ç†éƒ½æ˜¯ç”±å®ƒæ¥å®Œæˆçš„ã€‚ GenericDraweeHierarchyï¼šè´Ÿè´£SimpleDraweeViewä¸Šçš„å›¾å±‚ç®¡ç†ï¼Œç”±å¤šå±‚Drawableç»„æˆï¼Œæ¯å±‚Drawableæä¾›æŸç§åŠŸèƒ½ï¼ˆä¾‹å¦‚ï¼šç¼©æ”¾ã€åœ†è§’ï¼‰ï¼Œè¯¥ç±»ç”±GenericDraweeHierarchyBuilderè¿›è¡Œæž„å»ºï¼Œè¯¥æž„å»ºå™¨å°†placeholderImageã€retryImageã€failureImageã€progressBarImageã€backgroundã€overlaysä¸ŽpressedStateOverlayç­‰xmlæ–‡ä»¶æˆ–è€…Javaä»£ç é‡Œè®¾ç½®çš„å±žæ€§ä¿¡æ¯éƒ½ä¼ å…¥GenericDraweeHierarchyä¸­ï¼Œç”±GenericDraweeHierarchyè¿›è¡Œå¤„ç†ã€‚ DraweeHolderï¼šè¯¥ç±»æ˜¯ä¸€ä¸ªHolderç±»ï¼Œå’ŒSimpleDraweeViewå…³è”åœ¨ä¸€èµ·ï¼ŒDraweeViewæ˜¯é€šè¿‡DraweeHolderæ¥ç»Ÿä¸€ç®¡ç†çš„ã€‚è€ŒDraweeHolderåˆæ˜¯ç”¨æ¥ç»Ÿä¸€ç®¡ç†ç›¸å…³çš„Hierarchyä¸ŽController DataSourceï¼šç±»ä¼¼äºŽJavaé‡Œçš„Futuresï¼Œä»£è¡¨æ•°æ®çš„æ¥æºï¼Œå’ŒFuturesä¸åŒï¼Œå®ƒå¯ä»¥æœ‰å¤šä¸ªresultã€‚ DataSubscriberï¼šæŽ¥æ”¶DataSourceè¿”å›žçš„ç»“æžœã€‚ ImagePipelineï¼šç”¨æ¥è°ƒå–èŽ·å–å›¾ç‰‡çš„æŽ¥å£ã€‚ Producerï¼šåŠ è½½ä¸Žå¤„ç†å›¾ç‰‡ï¼Œå®ƒæœ‰å¤šç§å®žçŽ°ï¼Œä¾‹å¦‚ï¼šNetworkFetcherProducerï¼ŒLocalAssetFetcherProducerï¼ŒLocalFileFetchProducerã€‚ä»Žè¿™äº›ç±»çš„åå­—æˆ‘ä»¬å°±å¯ä»¥çŸ¥é“å®ƒä»¬æ˜¯å¹²ä»€ä¹ˆçš„ã€‚Producerç”±ProducerFactoryè¿™ä¸ªå·¥åŽ‚ç±»æž„å»ºçš„ï¼Œè€Œä¸”æ‰€æœ‰çš„Produceréƒ½æ˜¯åƒJavaçš„IOæµé‚£æ ·ï¼Œå¯ä»¥ä¸€å±‚åµŒå¥—ä¸€å±‚ï¼Œæœ€ç»ˆåªå¾—åˆ°ä¸€ä¸ªç»“æžœï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆç²¾å·§çš„è®¾è®¡ðŸ‘ Consumerï¼šç”¨æ¥æŽ¥æ”¶Produceräº§ç”Ÿçš„ç»“æžœï¼Œå®ƒä¸ŽProducerç»„æˆäº†ç”Ÿäº§è€…ä¸Žæ¶ˆè´¹è€…æ¨¡å¼ã€‚ æ³¨ï¼šFrescoæºç é‡Œçš„ç±»çš„åå­—éƒ½æ¯”è¾ƒé•¿ï¼Œä½†æ˜¯éƒ½æ˜¯æŒ‰ç…§ä¸€å®šçš„å‘½ä»¤è§„å¾‹æ¥çš„ï¼Œä¾‹å¦‚ï¼šä»¥Supplierç»“å°¾çš„ç±»éƒ½å®žçŽ°äº†SupplieræŽ¥å£ï¼Œå®ƒå¯ä»¥æä¾›æŸä¸€ä¸ªç±»åž‹çš„å¯¹è±¡ï¼ˆfactory, generator, builder, closureç­‰ï¼‰ã€‚ä»¥Builderç»“å°¾çš„å½“ç„¶å°±æ˜¯ä»¥æž„é€ è€…æ¨¡å¼åˆ›å»ºå¯¹è±¡çš„ç±»ã€‚ EventBusæ˜¯å¦‚ä½•åšåˆ°å‘é€ç²˜æ€§æ¶ˆæ¯çš„ï¼ŸEventBusé‡Œæœ‰ä¸€ä¸ªHashMapç”¨æ¥å­˜å‚¨ç²˜æ€§äº‹ä»¶é˜Ÿåˆ—ï¼Œå½“æ³¨å†Œäº‹ä»¶æ—¶ï¼Œå¦‚æžœè¯¥äº‹ä»¶æ˜¯ç²˜æ€§äº‹ä»¶ï¼Œåˆ™ä»Žè¯¥é˜Ÿåˆ—ä¸­å–å‡ºæœ€åŽä¸€ä¸ªè¯¥ç±»åž‹çš„äº‹ä»¶å¹¶å‘é€ç»™è®¢é˜…è€…ã€‚ å¤©çŒ«ä¸ƒå·§æ¿å¸ƒå±€ã€vLayoutçš„å®žçŽ°åŽŸç†ï¼Ÿ]]></content>
      <tags>
        <tag>Android</tag>
        <tag>Interview</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ•°æ®ç»“æž„ä¸Žç®—æ³•é¢è¯•é¢˜é›†]]></title>
    <url>%2F2018%2F04%2F13%2F%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%86%2F</url>
    <content type="text"><![CDATA[ä¸€æ¬¡æ¬¡çš„æŒ‚äºŽä¸€é¢è®©æˆ‘ç­‹ç–²åŠ›ç«­â€¦æ„è¯†åˆ°è‡ªå·±å­˜åœ¨çœ¼é«˜æ‰‹ä½Žçš„çŠ¶æ€â€¦å‡†å¤‡é‡æ–°ä¸Šè·¯å¤¯å®žåŸºç¡€æœ¬ç‰‡æ–‡ç« Fork from android-interview æ•°æ®ç»“æž„ä¸Žç®—æ³•é€šå¸¸ä¹Ÿä¸ŽJavaçš„é›†åˆç‰µæ‰¯åœ¨ä¸€èµ·è€ƒå¯Ÿï¼Œè¿™é‡Œæˆ‘ä»¬å°†ä¸¤è€…æ”¾åœ¨ä¸€èµ·æ¥è®²ã€‚ ä»€ä¹ˆæ˜¯ç®—æ³•ï¼Ÿ ç®—æ³•æ˜¯æŒ‡ä»¤çš„é›†åˆï¼Œæ˜¯ä¸ºäº†è§£å†³ç‰¹å®šé—®é¢˜è€Œè§„å®šçš„ä¸€äº›åˆ—æ“ä½œã€‚ æ—¶é—´å¤æ‚åº¦ ç®—æ³•çš„æ‰§è¡Œæ—¶é—´éšç€é—®é¢˜è§„æ¨¡çš„å¢žé•¿è€Œå˜åŒ–çš„è§„å¾‹ã€‚ ç®—æ³•çš„æ‰§è¡Œæ—¶é—´å—åˆ°ä»¥ä¸‹å››ä¸ªå› ç´ çš„å½±å“ï¼š ç¡¬ä»¶å±‚é¢ï¼šè®¡ç®—æœºæ‰§è¡Œæ¯æ¡æŒ‡ä»¤çš„é€Ÿåº¦ è½¯ä»¶å±‚é¢ï¼šç¼–è¯‘äº§ç”Ÿçš„ä»£ç è´¨é‡ ç®—æ³•ç­–ç•¥ï¼šç®—æ³•çš„å¥½å é—®é¢˜è§„æ¨¡ ç©ºé—´å¤æ‚åº¦ ç©ºé—´å¤æ‚åº¦æ˜¯å¯¹ä¸€ä¸ªç®—æ³•åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¸´æ—¶å ç”¨å­˜å‚¨ç©ºé—´å¤§å°çš„é‡åº¦ã€‚ ä¾‹å¦‚ï¼šæ’å…¥æŽ’åºçš„ç®—æ³•å¤æ‚åº¦æ˜¯O(1)ã€‚è€Œä¸€èˆ¬é€’å½’ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯O(n)ï¼Œå› ä¸ºæ¯æ¬¡é€’å½’éƒ½è¦å­˜å‚¨ç»“æžœã€‚ å¸¸ç†Ÿé˜¶O(1)ã€å¯¹æ•°é˜¶O(logn)ã€çº¿æ€§é˜¶O(n)ã€çº¿æ€§å¯¹æ•°é˜¶O(nlogn)ï¼Œå¹³æ–¹é˜¶O(n^2)ã€ç«‹æ–¹é˜¶O(n^3)ã€kæ¬¡æ–¹é˜¶O(n^k)ã€æŒ‡æ•°é˜¶O(2^n); æè¿°ä¸€ä¸‹Javaçš„é›†åˆä½“ç³»ï¼ŒListã€Setä¸ŽMapæœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸJavaé›†åˆé‡Œä½¿ç”¨æŽ¥å£æ¥å®šä¹‰åŠŸèƒ½ï¼Œæ˜¯ä¸€å¥—å®Œå–„çš„ç»§æ‰¿ä½“ç³»ã€‚Iteratoræ˜¯æ‰€æœ‰é›†åˆçš„æ€»æŽ¥å£ï¼Œå…¶ä»–æ‰€æœ‰æŽ¥å£éƒ½ç»§æ‰¿äºŽå®ƒï¼Œè¯¥æŽ¥å£å®šä¹‰äº†é›†åˆçš„éåŽ†æ“ä½œï¼ŒCollectionæŽ¥å£ç»§æ‰¿äºŽIteratorï¼Œæ˜¯é›†åˆçš„æ¬¡çº§æŽ¥å£ï¼ˆMapç‹¬ç«‹å­˜åœ¨ï¼Œé™¤å¤–ï¼‰ï¼Œå®šä¹‰äº†é›†åˆçš„ä¸€äº›é€šç”¨æ“ä½œã€‚ Javaé›†åˆçš„ç±»ç»“æž„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š ðŸ‘‰ ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹å¤§å›¾ Listï¼šæœ‰åºã€å¯é‡å¤ï¼›ç´¢å¼•æŸ¥è¯¢é€Ÿåº¦å¿«ï¼›æ’å…¥ã€åˆ é™¤ä¼´éšæ•°æ®ç§»åŠ¨ï¼Œé€Ÿåº¦æ…¢ï¼› Setï¼šæ— åºï¼Œä¸å¯é‡å¤ï¼› Mapï¼šé”®å€¼å¯¹ï¼Œé”®å”¯ä¸€ï¼Œå€¼å¤šä¸ªï¼› å¹¶å‘é›†åˆäº†è§£å“ªäº›ï¼Ÿ ConcurrentHashMapï¼šçº¿ç¨‹ä¸å®‰å…¨çš„HashMapã€æ•ˆçŽ‡ä½Žä¸‹çš„HashTableã€çº¿ç¨‹å®‰å…¨ä¸”é«˜æ•ˆçš„ConcurrentHashMapã€‚ ConcurrentHashMapå­˜å‚¨å…ƒç´ çš„ç»“æž„å¦‚ä¸‹æ‰€ç¤ºï¼š ConcurrentHashMapä¸ŽHashMapä¸€æ ·é€‚ç”¨æ•°ç»„åŠ é“¾è¡¨å­˜å‚¨å…ƒç´ ï¼Œé€‚ç”¨é“¾è¡¨å®šå€æ³•æ¥è§£å†³å“ˆå¸Œå†²çªï¼Œä¸åŒä¹‹å¤„åœ¨äºŽå½“é“¾è¡¨é•¿åº¦å¤§äºŽ8çš„æ—¶å€™ä¼šå°†é“¾è¡¨è½¬æ¢ä¸ºä¸€æ£µçº¢é»‘æ ‘ï¼ŒæŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ç”±O(N)å˜æˆO(lgN)ã€‚ ConcurrentHashMapå¹¶å‘æŽ§åˆ¶çš„å…³é”®åœ¨äºŽä¸€ä¸ªå˜é‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1private transient volatile int sizeCtl; sizeCtlè¢«volatileå…³é”®å­—ä¿®é¥°æ˜¯ä¸€ä¸ªå¤šçº¿ç¨‹å…±äº«çš„å˜é‡ï¼Œå½“å®ƒçš„å€¼ä¸ºè´Ÿæ•°çš„æ—¶å€™è¯´æ˜ŽæŸä¸ªçº¿ç¨‹æ­£åœ¨æ“ä½œè¿™ä¸ªMapï¼Œæƒ³è¦åŽ»æ“ä½œè¿™ä¸ªMapçš„çº¿ç¨‹å°±è¦ä¸€ç›´åŽ»ç«žäº‰è¿™ä¸ªsizeCtlï¼Œæ²¡æœ‰å¾—åˆ°è¿™ä¸ªå˜é‡çš„å€¼å°±è¦ä¸€ç›´è‡ªæ—‹ç­‰å¾…è¿™ä¸ªå˜é‡ï¼Œå½“å ç”¨è¿™ä¸ªå˜é‡çš„çº¿ç¨‹æ“ä½œå®ŒæˆåŽï¼Œè¦å°†è¿™ä¸ªå˜é‡çš„å€¼è®¾ç½®å›žæ¥ï¼Œä»¥ä¾¿è®©å…¶ä»–çº¿ç¨‹èµ°å‡ºè‡ªæ—‹ï¼Œç«žäº‰åˆ°è¯¥å˜é‡ã€‚ è¿™ç§åŒæ­¥è¿›åˆ¶äº‹å®žä¸Šæ˜¯ä¸€ç§CASçš„åšæ³•ã€‚ CASï¼ˆCompare and swapï¼‰æ¯”è¾ƒå’Œæ›¿æ¢æ˜¯è®¾è®¡å¹¶å‘ç®—æ³•æ—¶ç”¨åˆ°çš„ä¸€ç§æŠ€æœ¯ã€‚ç®€å•æ¥è¯´ï¼Œæ¯”è¾ƒå’Œæ›¿æ¢æ˜¯ä½¿ç”¨ä¸€ä¸ªæœŸæœ›å€¼å’Œä¸€ä¸ªå˜é‡çš„å½“å‰å€¼è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æžœå½“å‰å˜é‡çš„å€¼ä¸Žæˆ‘ä»¬æœŸæœ›çš„å€¼ç›¸ç­‰ï¼Œå°±ä½¿ç”¨ä¸€ä¸ªæ–°å€¼æ›¿æ¢å½“å‰å˜é‡çš„å€¼ã€‚ Vectorï¼ŒArrayListä¸ŽLinkedListæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ Vectorå®žçŽ°äº†åŸºäºŽåŠ¨æ€Objectæ•°ç»„çš„æ•°æ®ç»“æž„ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥è®¾ç½®å¢žé•¿å› å­ï¼Œæ•ˆçŽ‡æ¯”è¾ƒä½Žï¼Œä¸å»ºè®®ä½¿ç”¨ã€‚ ArrayListå®žçŽ°äº†åŸºäºŽåŠ¨æ€Objectæ•°ç»„çš„æ•°æ®ç»“æž„ï¼Œéžçº¿ç¨‹å®‰å…¨ï¼Œåœ°å€è¿žç»­ï¼ŒæŸ¥è¯¢æ•ˆçŽ‡æ¯”è¾ƒé«˜ï¼Œæ’å…¥å’Œåˆ é™¤æ•ˆçŽ‡æ¯”è¾ƒä½Žã€‚é€‚åˆæŸ¥è¯¢æ“ä½œé¢‘ç¹çš„åœºæ™¯ã€‚ LinkedListå®žçŽ°äº†åŸºäºŽé“¾è¡¨çš„æ•°æ®ç»“æž„ï¼Œéžçº¿ç¨‹å®‰å…¨ï¼Œåœ°å€ä¸è¿žç»­ï¼ŒæŸ¥è¯¢æ•ˆçŽ‡æ¯”è¾ƒä½Žï¼Œæ’å…¥å’Œåˆ é™¤æ•ˆçŽ‡æ¯”è¾ƒé«˜ã€‚é€‚åˆæ’å…¥å’Œåˆ é™¤æ“ä½œé¢‘ç¹çš„åœºæ™¯ã€‚ HashMapã€LinkedHashMapã€ConcurrentHashMapã€TreeMapä¸ŽArrayMapæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ HashMapï¼šåŸºäºŽHashMap.Nodeæ•°ç»„åŠ å•å‘é“¾è¡¨å®žçŽ°ï¼Œéžçº¿ç¨‹å®‰å…¨ï¼Œåœ°å€ä¸è¿žç»­ï¼ŒæŸ¥è¯¢æ•ˆçŽ‡æ¯”è¾ƒä½Žï¼Œæ’å…¥å’Œåˆ é™¤æ•ˆçŽ‡æ¯”è¾ƒé«˜ã€‚é€‚åˆæ’å…¥å’Œåˆ é™¤æ“ä½œé¢‘ç¹çš„åœºæ™¯ã€‚ LinkedHashMapï¼šåŸºäºŽ ConcurrentHashMapï¼šåŸºäºŽhashè¡¨å®žçŽ°ï¼Œçº¿ç¨‹å®‰å…¨ä¸”é«˜æ•ˆï¼Œåˆ†æ®µé”çš„å®žçŽ°ç›¸å¯¹äºŽHashTableçš„å®žçŽ°æé«˜äº†å¾ˆå¤§çš„æ•ˆçŽ‡ã€‚ TreeMapï¼šåŸºäºŽçº¢é»‘æ ‘å®žçŽ°ï¼Œéžçº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥æŒ‰ç…§è‡ªç„¶é¡ºåºæˆ–è€…è‡ªå®šä¹‰é¡ºåºè‡ªåŠ¨æŽ’åºï¼Œä¸å…è®¸æ’å…¥nullå€¼ï¼ŒæŸ¥æ‰¾æ•ˆçŽ‡æ¯”è¾ƒé«˜ï¼Œé€‚åˆéœ€è¦æŽ’åºçš„åœºæ™¯ã€‚ ConcurrentHashMapå­˜å‚¨å…ƒç´ çš„ç»“æž„å¦‚ä¸‹æ‰€ç¤ºï¼š ConcurrentHashMapä¸ŽHashMapä¸€æ ·é€‚ç”¨æ•°ç»„åŠ é“¾è¡¨å­˜å‚¨å…ƒç´ ï¼Œé€‚ç”¨é“¾è¡¨å®šå€æ³•æ¥è§£å†³å“ˆå¸Œå†²çªï¼Œä¸åŒä¹‹å¤„åœ¨äºŽå½“é“¾è¡¨é•¿åº¦å¤§äºŽ8çš„æ—¶å€™ä¼šå°†é“¾è¡¨è½¬æ¢ä¸ºä¸€æ£µçº¢é»‘æ ‘ï¼ŒæŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ç”±O(N)å˜æˆO(lgN)ã€‚ ConcurrentHashMapå¹¶å‘æŽ§åˆ¶çš„å…³é”®åœ¨äºŽä¸€ä¸ªå˜é‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1private transient volatile int sizeCtl; sizeCtlè¢«volatileå…³é”®å­—ä¿®é¥°æ˜¯ä¸€ä¸ªå¤šçº¿ç¨‹å…±äº«çš„å˜é‡ï¼Œå½“å®ƒçš„å€¼ä¸ºè´Ÿæ•°çš„æ—¶å€™è¯´æ˜ŽæŸä¸ªçº¿ç¨‹æ­£åœ¨æ“ä½œè¿™ä¸ªMapï¼Œæƒ³è¦åŽ»æ“ä½œè¿™ä¸ªMapçš„çº¿ç¨‹å°±è¦ä¸€ç›´åŽ»ç«žäº‰è¿™ä¸ªsizeCtlï¼Œæ²¡æœ‰å¾—åˆ°è¿™ä¸ªå˜é‡çš„å€¼å°±è¦ä¸€ç›´è‡ªæ—‹ç­‰å¾…è¿™ä¸ªå˜é‡ï¼Œå½“å ç”¨è¿™ä¸ªå˜é‡çš„çº¿ç¨‹æ“ä½œå®ŒæˆåŽï¼Œè¦å°†è¿™ä¸ªå˜é‡çš„å€¼è®¾ç½®å›žæ¥ï¼Œä»¥ä¾¿è®©å…¶ä»–çº¿ç¨‹èµ°å‡ºè‡ªæ—‹ï¼Œç«žäº‰åˆ°è¯¥å˜é‡ã€‚ è¿™ç§åŒæ­¥è¿›åˆ¶äº‹å®žä¸Šæ˜¯ä¸€ç§CASçš„åšæ³•ã€‚ CASï¼ˆCompare and swapï¼‰æ¯”è¾ƒå’Œæ›¿æ¢æ˜¯è®¾è®¡å¹¶å‘ç®—æ³•æ—¶ç”¨åˆ°çš„ä¸€ç§æŠ€æœ¯ã€‚ç®€å•æ¥è¯´ï¼Œæ¯”è¾ƒ HashSetã€LinkedHashSetä¸ŽTreeSetæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ HashSetï¼šåŸºäºŽHashMapå®žçŽ°ï¼Œéžçº¿ç¨‹å®‰å…¨ï¼Œåœ°å€ä¸è¿žç»­ï¼ŒæŸ¥è¯¢æ•ˆçŽ‡æ¯”è¾ƒä½Žï¼Œæ’å…¥å’Œåˆ é™¤æ•ˆçŽ‡æ¯”è¾ƒé«˜ã€‚é€‚åˆæ’å…¥å’Œåˆ é™¤æ“ä½œé¢‘ç¹çš„åœºæ™¯ã€‚ LinkedHashSetï¼š TreeSetåŸºäºŽçº¢é»‘æ ‘å®žçŽ°ï¼Œéžçº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥æŒ‰ç…§è‡ªç„¶é¡ºåºæˆ–è€…è‡ªå®šä¹‰é¡ºåºè‡ªåŠ¨æŽ’åºï¼Œä¸å…è®¸æ’å…¥nullå€¼ã€‚é€‚åˆéœ€è¦æŽ’åºçš„åœºæ™¯ã€‚ HashSetåŸºäºŽhashè¡¨å®žçŽ°ï¼Œéžçº¿ç¨‹å®‰å…¨ï¼Œå…è®¸æ’å…¥nullï¼ŒæŸ¥æ‰¾æ•ˆçŽ‡é«˜ã€‚é€‚åˆæŸ¥æ‰¾æ“ä½œé¢‘ç¹çš„åœºæ™¯ã€‚ HashMapæ˜¯å¦‚ä½•è§£å†³hashç¢°æ’žçš„ï¼Ÿ å¼€å‘å®šå€æ³• é“¾è¡¨æ³• HashMapåŸºäºŽæ•°ç»„å®žçŽ°ï¼Œæ•°ç»„é‡Œçš„å…ƒç´ æ˜¯ä¸€ä¸ªå•å‘é“¾è¡¨ã€‚ HashMapå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š åŸºäºŽæ•°ç»„å®žçŽ°ï¼Œæ•°ç»„é‡Œçš„å…ƒç´ æ˜¯ä¸€ä¸ªå•å‘é“¾è¡¨ã€‚ é”®ä¸å¯ä»¥é‡å¤ï¼Œå€¼å¯ä»¥é‡å¤ï¼Œé”®ã€å€¼éƒ½å¯ä»¥ä¸ºnull éžçº¿ç¨‹å®‰å…¨ HashMapå®žçŽ°äº†ä»¥ä¸‹æŽ¥å£ï¼š Mapï¼šä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜å–å…ƒç´  Cloneableï¼šå¯ä»¥è¢«å…‹éš† Serializableï¼šå¯ä»¥åºåˆ—åŒ– æŸ¥æ‰¾æµç¨‹ è®¡ç®—å“ˆå¸Œå€¼ï¼Œæ ¹æ®å“ˆå¸Œå€¼ä¸Žæ•°ç»„å®¹é‡è®¡ç®—å®ƒæ‰€åœ¨çš„ç´¢å¼•ï¼Œæ ¹æ®ç´¢å¼•æŸ¥æ‰¾å®ƒæ‰€åœ¨çš„é“¾è¡¨ã€‚ åœ¨å•å‘é“¾è¡¨ä¸­æŸ¥æ‰¾è¯¥å…ƒç´  åˆ é™¤æµç¨‹ è®¡ç®—å“ˆå¸Œå€¼ï¼Œæ ¹æ®å“ˆå¸Œå€¼ä¸Žæ•°ç»„å®¹é‡è®¡ç®—å®ƒæ‰€åœ¨çš„ç´¢å¼•ï¼Œæ ¹æ®ç´¢å¼•æŸ¥æ‰¾å®ƒæ‰€åœ¨çš„é“¾è¡¨ã€‚ ä»Žèµ·å§‹èŠ‚ç‚¹å¼€å§‹éåŽ†ï¼ŒæŸ¥æ‰¾è¦åˆ é™¤çš„å…ƒç´ ï¼Œåˆ é™¤è¯¥èŠ‚ç‚¹ï¼Œå°†èŠ‚ç‚¹çš„åŽç»§æ·»åŠ ä¸ºå®ƒå‰é©±çš„åŽç»§ æ’å…¥æµç¨‹ æ ¹æ®keyè®¡ç®—hashå€¼ï¼Œå¹¶æ ¹æ®hashå€¼å’Œæ•°ç»„å®¹é‡ï¼Œæ‰¾åˆ°ç´¢å¼•å€¼ï¼Œè¯¥ä½ç½®å³ä¸ºå­˜å‚¨è¯¥å…ƒç´ çš„é“¾è¡¨æ‰€åœ¨å¤„ã€‚ éåŽ†table[i]ä½ç½®çš„é“¾è¡¨ï¼ŒæŸ¥æ‰¾ç›¸åŒçš„keyï¼Œè‹¥æ‰¾åˆ°åˆ™åˆ™ç”¨æ–°çš„valueæ›¿æ¢æŽ‰oldValue. è‹¥æ²¡æœ‰æŸ¥æ‰¾åˆ°ç›¸åŒçš„keyï¼Œåˆ™æ·»åŠ keyåˆ°table[i]ä½ç½®ï¼Œæ–°æ·»åŠ çš„å…ƒç´ æ€»æ˜¯æ·»åŠ åœ¨å•å‘é“¾è¡¨çš„è¡¨å¤´ä½ç½®ï¼ŒåŽé¢çš„å…ƒç´ ç§°ä¸ºå®ƒçš„åŽç»§ã€‚ HashSetåŸºäºŽHashMapå®žçŽ°ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒä»¥HashMapçš„keyæ¥å­˜å‚¨å…ƒç´ ï¼Œå› ä¸ºHashMapé‡Œçš„keyæ˜¯ä¸ä¼šé‡å¤çš„ï¼Œæ‰€ä»¥HashSetçš„å…ƒç´ æ—¶ä¸é‡å¤ä¸”æ— åºçš„ã€‚ SpareArrayåšäº†å“ªäº›ä¼˜åŒ–ï¼Ÿä¼˜ç‚¹ keyä¿å­˜åœ¨int mKeys[]æ•°ç»„ä¸­ï¼Œç›¸å¯¹äºŽHashMapä¸å†å¯¹keyè¿›è¡Œè‡ªåŠ¨è£…ç®±ï¼Œé¿å…èµ„æºæ¶ˆè€—ã€‚ä½†æ˜¯vauleæ˜¯ä¿å­˜åœ¨Object[] mValuesæ•°ç»„ä¸­è¿˜æ˜¯éœ€è¦è‡ªåŠ¨è£…ç®±çš„ã€‚ ç›¸å¯¹äºŽHashMapï¼Œä¸å†ä½¿ç”¨é¢å¤–çš„Entryå¯¹è±¡æ¥å­˜å‚¨æ•°æ®ï¼Œå‡å°‘äº†å†…å­˜å¼€é”€ã€‚ æ•°æ®é‡å°çš„æƒ…å†µä¸‹ï¼Œéšæœºè®¿é—®æ•ˆçŽ‡æ›´é«˜ã€‚ ç¼ºç‚¹ æ’å…¥æ“ä½œéœ€è¦å¤åˆ¶æ•°ç»„ï¼Œå¢žåˆ æ•ˆçŽ‡ä½Žã€‚ æ•°æ®é‡å·¨å¤§æ—¶ï¼Œå¤åˆ¶æ•°ç»„æˆæœ¬å·¨å¤§ï¼Œgc()æˆæœ¬ä¹Ÿå·¨å¤§ã€‚ æ•°æ®é‡å·¨å¤§æ—¶ï¼ŒæŸ¥è¯¢æ•ˆçŽ‡ä¹Ÿä¼šæ˜Žæ˜¾ä¸‹é™ã€‚ ç®€å•è¯´ä¸€è¯´SpareArrayçš„æ’å…¥æµç¨‹ï¼ŸSpareArrayçš„keyæ˜¯ä¸€ä¸ªintæœ‰åºæ•°ç»„ï¼ŒæŸ¥æ‰¾è¿‡ç¨‹ä½¿ç”¨çš„äºŒåˆ†æŸ¥æ‰¾ã€‚ ç”¨äºŒåˆ†æŸ¥æ‰¾æ³•æŸ¥æ‰¾å…ƒç´ çš„keyã€‚ å¦‚æžœæ’å…¥çš„æ•°æ®å†²çªäº†ï¼Œåˆ™ç›´æŽ¥è¦†ç›–åŽŸåˆ™ã€‚ å¦‚æžœå½“å‰æ’å…¥çš„keyä¸Šçš„æ•°æ®ä¸ºDELETEï¼Œåˆ™ç›´æŽ¥è¦†ç›–ã€‚ å¦‚æžœå‰é¢å‡ æ­¥éƒ½å¤±è´¥äº†ï¼Œåˆ™æ£€æŸ¥æ˜¯å¦éœ€è¦gc()å¹¶ä¸”åœ¨ç´¢å¼•ä¸Šæ’å…¥æ•°æ®ã€‚ Nä¸ªæ— åºæ ‘ä¸­æŸ¥æ‰¾æœ€å¤§çš„10ä¸ªæ•°ï¼Ÿæ‰‹å†™ä»£ç éåŽ†æ–‡ä»¶ç›®å½•ï¼Ÿç”µæ¢¯è¿è¡Œçš„ç®—æ³•åˆ†æžï¼Ÿæ‰‹å†™ä¸€ä¸‹å•é“¾è¡¨çš„æŸ¥è¯¢æ“ä½œï¼Ÿæ‰‹å†™äºŒåˆ†æŸ¥æ‰¾ï¼Ÿæ‰‹å†™ä¸€ä¸ªå­—ç¬¦ä¸²ç¿»è½¬ï¼Ÿä»Žé•¿åº¦ä¸ºmçš„intæ•°ç»„ä¸­éšæœºå–å‡ºnä¸ªå…ƒç´ ï¼Œæ¯æ¬¡å–çš„å…ƒç´ éƒ½æ˜¯ä¹‹å‰æœªå–è¿‡çš„ï¼Œå¦‚ä½•ä¼˜åŒ–ï¼Ÿ1234567891011string: Hello length: 5 0 1 2 3 4 before: H e l l o after: o l l e H index sum 0: H---&gt;o 0--&gt;4 4 1: e---&gt;l 1--&gt;3 4 2: l---&gt;l 2--&gt;2 4 è§£æ³•ä¸€ï¼šä½¿ç”¨æ•°ç»„ å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºcharæ•°ç»„ éåŽ†å¾ªçŽ¯ç»™charæ•°ç»„èµ‹å€¼ 12345678910public static String strReverseWithArray2(String string)&#123; if(string==null||string.length()==0)return string; int length = string.length(); char [] array = string.toCharArray(); for(int i = 0;i&lt;length/2;i++)&#123; array[i] = string.charAt(length-1-i); array[length-1-i] = string.charAt(i); &#125; return new String(array);&#125; è§£æ³•äºŒï¼šä½¿ç”¨æ ˆ å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºcharæ•°ç»„ å°†charæ•°ç»„ä¸­çš„å­—ç¬¦ä¾æ¬¡åŽ‹å…¥æ ˆä¸­ å°†æ ˆä¸­çš„å­—ç¬¦ä¾æ¬¡å¼¹å‡ºèµ‹å€¼ç»™charæ•°ç»„ 12345678910111213public static String strReverseWithStack(String string)&#123; if(string==null||string.length()==0)return string; Stack&lt;Character&gt; stringStack = new Stack&lt;&gt;(); char [] array = string.toCharArray(); for(Character c:array)&#123; stringStack.push(c); &#125; int length = string.length(); for(int i= 0;i&lt;length;i++)&#123; array[i] = stringStack.pop(); &#125; return new String(array);&#125; è§£æ³•ä¸‰ï¼šé€†åºéåŽ† é€†åºéåŽ†å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ï¼Œå¹¶å°†å®ƒä¾æ¬¡æ·»åŠ åˆ°StringBuilderä¸­ 123456789public static String strReverseWithReverseLoop(String string)&#123; if(string==null||string.length()==0)return string; StringBuilder sb = new StringBuilder(); for(int i = string.length()-1;i&gt;=0;i--)&#123; sb.append(string.charAt(i)); &#125; return sb.toString(); &#125; å•é“¾è¡¨åè½¬ï¼Œåˆå¹¶å¤šä¸ªå•é“¾è¡¨å•é“¾è¡¨çš„ç»“æž„å°±åƒä¸€ä¸ªç«è½¦çš„ç»“æž„ï¼Œç«è½¦å¤´æ‹‰ç€è®¸å¤šè½¦åŽ¢ï¼Œå®žçŽ°é“¾è¡¨ç¿»è½¬ï¼Œå¯ä»¥åˆ©ç”¨é€’å½’ç¿»è½¬æ³•ï¼Œåœ¨åè½¬å½“å‰èŠ‚ç‚¹ä¹‹å‰å…ˆåè½¬åŽç»­èŠ‚ç‚¹ã€‚è¿™æ ·ä»Žå¤´ç»“ç‚¹å¼€å§‹ï¼Œå±‚å±‚æ·±å…¥ç›´åˆ°å°¾ç»“ç‚¹æ‰å¼€å§‹åè½¬æŒ‡é’ˆåŸŸçš„æŒ‡å‘ã€‚ç®€å•çš„è¯´å°±æ˜¯ä»Žå°¾ç»“ç‚¹å¼€å§‹ï¼Œé€†å‘åè½¬å„ä¸ªç»“ç‚¹çš„æŒ‡é’ˆåŸŸæŒ‡å‘ï¼Œ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768public class LinkedListReverse &#123; public static void main(String[] args) &#123; Node head = new Node(0); Node node1 = new Node(1); Node node2 = new Node(2); Node node3 = new Node(3); head.setNext(node1); node1.setNext(node2); node2.setNext(node3); // æ‰“å°åè½¬å‰çš„é“¾è¡¨ Node h = head; while (null != h) &#123; System.out.print(h.getData() + " "); h = h.getNext(); &#125; // è°ƒç”¨åè½¬æ–¹æ³• head = Reverse1(head); System.out.println("\n**************************"); // æ‰“å°åè½¬åŽçš„ç»“æžœ while (null != head) &#123; System.out.print(head.getData() + " "); head = head.getNext(); &#125; &#125; /** * é€’å½’ï¼Œåœ¨åè½¬å½“å‰èŠ‚ç‚¹ä¹‹å‰å…ˆåè½¬åŽç»­èŠ‚ç‚¹ */ public static Node Reverse1(Node head) &#123; // headçœ‹ä½œæ˜¯å‰ä¸€ç»“ç‚¹ï¼Œhead.getNext()æ˜¯å½“å‰ç»“ç‚¹ï¼ŒreHeadæ˜¯åè½¬åŽæ–°é“¾è¡¨çš„å¤´ç»“ç‚¹ if (head == null || head.getNext() == null) &#123; return head;// è‹¥ä¸ºç©ºé“¾æˆ–è€…å½“å‰ç»“ç‚¹åœ¨å°¾ç»“ç‚¹ï¼Œåˆ™ç›´æŽ¥è¿˜å›ž &#125; Node reHead = Reverse1(head.getNext());// å…ˆåè½¬åŽç»­èŠ‚ç‚¹head.getNext() head.getNext().setNext(head);// å°†å½“å‰ç»“ç‚¹çš„æŒ‡é’ˆåŸŸæŒ‡å‘å‰ä¸€ç»“ç‚¹ head.setNext(null);// å‰ä¸€ç»“ç‚¹çš„æŒ‡é’ˆåŸŸä»¤ä¸ºnull; return reHead;// åè½¬åŽæ–°é“¾è¡¨çš„å¤´ç»“ç‚¹ &#125; &#125; class Node &#123; private int Data;// æ•°æ®åŸŸ private Node Next;// æŒ‡é’ˆåŸŸ public Node(int Data) &#123; // super(); this.Data = Data; &#125; public int getData() &#123; return Data; &#125; public void setData(int Data) &#123; this.Data = Data; &#125; public Node getNext() &#123; return Next; &#125; public void setNext(Node Next) &#123; this.Next = Next; &#125; &#125; æŽ’åºç®—æ³•ä»¥ä¸‹æŽ’åºç®—æ³•å†…å®¹æ¥è‡ªï¼šé¢è¯•ä¸­çš„ 10 å¤§æŽ’åºç®—æ³•æ€»ç»“.md]]></content>
      <tags>
        <tag>Interview</tag>
        <tag>Algorithm</tag>
        <tag>DataStructure</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Javaé¢è¯•é¢˜é›†]]></title>
    <url>%2F2018%2F04%2F10%2FJava%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%86%2F</url>
    <content type="text"><![CDATA[ä¸€æ¬¡æ¬¡çš„æŒ‚äºŽä¸€é¢è®©æˆ‘ç­‹ç–²åŠ›ç«­â€¦æ„è¯†åˆ°è‡ªå·±å­˜åœ¨çœ¼é«˜æ‰‹ä½Žçš„çŠ¶æ€â€¦å‡†å¤‡é‡æ–°ä¸Šè·¯å¤¯å®žåŸºç¡€æœ¬ç‰‡æ–‡ç« Fork from android-interview Javaè°ˆè°ˆå¯¹Javaå¤šæ€çš„ç†è§£ï¼Ÿ å¤šæ€æ˜¯æŒ‡çˆ¶ç±»çš„æŸä¸ªæ–¹æ³•è¢«å­ç±»é‡å†™æ—¶ï¼Œå¯ä»¥äº§ç”Ÿè‡ªå·±çš„åŠŸèƒ½è¡Œä¸ºï¼ŒåŒä¸€ä¸ªæ“ä½œä½œç”¨äºŽä¸åŒå¯¹è±¡ï¼Œå¯ä»¥æœ‰ä¸åŒçš„è§£é‡Šï¼Œäº§ç”Ÿä¸åŒçš„æ‰§è¡Œç»“æžœã€‚ å¤šæ€çš„ä¸‰ä¸ªå¿…è¦æ¡ä»¶ï¼š ç»§æ‰¿çˆ¶ç±»ã€‚ é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚ çˆ¶ç±»çš„å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡ã€‚ é™æ€æ–¹æ³•ä¸Žé™æ€æˆå‘˜å˜é‡å¯ä»¥è¢«ç»§æ‰¿å—ï¼Œä¸ºä»€ä¹ˆï¼Ÿé™æ€æ–¹æ³•ä¸Žé™æ€æˆå‘˜å˜é‡å¯ä»¥è¢«ç»§æ‰¿ï¼Œä½†æ˜¯ä¸èƒ½è¢«é‡å†™ã€‚å®ƒå¯¹å­ç±»éšè—ï¼Œå› æ­¤é™æ€æ–¹æ³•ä¹Ÿä¸èƒ½å®žçŽ°å¤šæ€ã€‚ ä¸ºä»€ä¹ˆJavaé‡Œçš„åŒ¿åå†…éƒ¨ç±»åªèƒ½è®¿é—®finalä¿®é¥°çš„å¤–éƒ¨å˜é‡ï¼ŸåŒ¿åå†…éƒ¨ç±»ç”¨æ³• 12345678910111213141516public class TryUsingAnonymousClass &#123; public void useMyInterface() &#123; final Integer number = 123; System.out.println(number); MyInterface myInterface = new MyInterface() &#123; @Override public void doSomething() &#123; System.out.println(number); &#125; &#125;; myInterface.doSomething(); System.out.println(number); &#125;&#125; ç¼–è¯‘åŽçš„ç»“æžœ 1234567891011121314class TryUsingAnonymousClass$1 implements MyInterface &#123; private final TryUsingAnonymousClass this$0; private final Integer paramInteger; TryUsingAnonymousClass$1(TryUsingAnonymousClass this$0, Integer paramInteger) &#123; this.this$0 = this$0; this.paramInteger = paramInteger; &#125; public void doSomething() &#123; System.out.println(this.paramInteger); &#125;&#125; å› ä¸ºåŒ¿åå†…éƒ¨ç±»æœ€ç»ˆç”¨ä¼šç¼–è¯‘æˆä¸€ä¸ªå•ç‹¬çš„ç±»ï¼Œè€Œè¢«è¯¥ç±»ä½¿ç”¨çš„å˜é‡ä¼šä»¥æž„é€ å‡½æ•°å‚æ•°çš„å½¢å¼ä¼ é€’ç»™è¯¥ç±»ï¼Œä¾‹å¦‚ï¼šInteger paramIntegerï¼Œå¦‚æžœå˜é‡ä¸å®šä¹‰æˆfinalçš„ï¼ŒparamIntegeråœ¨åŒ¿åå†…éƒ¨ç±»è¢«å¯ä»¥è¢«ä¿®æ”¹ï¼Œè¿›è€Œé€ æˆå’Œå¤–éƒ¨çš„paramIntegerä¸ä¸€è‡´çš„é—®é¢˜ï¼Œä¸ºäº†é¿å…è¿™ç§ä¸ä¸€è‡´çš„æƒ…å†µï¼Œå› ä¸ºJavaè§„å®šåŒ¿åå†…éƒ¨ç±»åªèƒ½è®¿é—®finalä¿®é¥°çš„å¤–éƒ¨å˜é‡ã€‚ è®²ä¸€ä¸‹Javaçš„ç¼–ç æ–¹å¼ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦ç¼–ç  è®¡ç®—æœºå­˜å‚¨ä¿¡æ¯çš„æœ€å°å•å…ƒæ˜¯ä¸€ä¸ªå­—èŠ‚å³8bitï¼Œæ‰€ä»¥èƒ½è¡¨ç¤ºçš„èŒƒå›´æ˜¯0~255ï¼Œè¿™ä¸ªèŒƒå›´æ— æ³•ä¿å­˜æ‰€æœ‰çš„å­—ç¬¦ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªæ–°çš„æ•°æ®ç»“æž„charæ¥è¡¨ç¤ºè¿™äº›å­—ç¬¦ï¼Œä»Žcharåˆ°byteéœ€è¦ç¼–ç ã€‚ å¸¸è§çš„ç¼–ç æ–¹å¼æœ‰ä»¥ä¸‹å‡ ç§ï¼š ASCIIï¼šæ€»å…±æœ‰ 128 ä¸ªï¼Œç”¨ä¸€ä¸ªå­—èŠ‚çš„ä½Ž 7 ä½è¡¨ç¤ºï¼Œ0~31 æ˜¯æŽ§åˆ¶å­—ç¬¦å¦‚æ¢è¡Œå›žè½¦åˆ é™¤ç­‰ï¼›32~126 æ˜¯æ‰“å°å­—ç¬¦ï¼Œå¯ä»¥é€šè¿‡é”®ç›˜è¾“å…¥å¹¶ä¸”èƒ½å¤Ÿæ˜¾ç¤ºå‡ºæ¥ã€‚ GBKï¼šç èŒƒå›´æ˜¯ 8140~FEFEï¼ˆåŽ»æŽ‰ XX7Fï¼‰æ€»å…±æœ‰ 23940 ä¸ªç ä½ï¼Œå®ƒèƒ½è¡¨ç¤º 21003 ä¸ªæ±‰å­—ï¼Œå®ƒçš„ç¼–ç æ˜¯å’Œ GB2312 å…¼å®¹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ç”¨ GB2312 ç¼–ç çš„æ±‰å­—å¯ä»¥ç”¨ GBK æ¥è§£ç ï¼Œå¹¶ä¸”ä¸ä¼šæœ‰ä¹±ç ã€‚ UTF-16ï¼šUTF-16 å…·ä½“å®šä¹‰äº† Unicode å­—ç¬¦åœ¨è®¡ç®—æœºä¸­å­˜å–æ–¹æ³•ã€‚UTF-16 ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥è¡¨ç¤º Unicode è½¬åŒ–æ ¼å¼ï¼Œè¿™ä¸ªæ˜¯å®šé•¿çš„è¡¨ç¤ºæ–¹æ³•ï¼Œä¸è®ºä»€ä¹ˆå­—ç¬¦éƒ½å¯ä»¥ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œä¸¤ä¸ªå­—èŠ‚æ˜¯ 16 ä¸ª bitï¼Œæ‰€ä»¥å« UTF-16ã€‚UTF-16 è¡¨ç¤ºå­—ç¬¦éžå¸¸æ–¹ä¾¿ï¼Œæ¯ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œè¿™ä¸ªåœ¨å­—ç¬¦ä¸²æ“ä½œæ—¶å°±å¤§å¤§ç®€åŒ–äº†æ“ä½œï¼Œè¿™ä¹Ÿæ˜¯ Java ä»¥ UTF-16 ä½œä¸ºå†…å­˜çš„å­—ç¬¦å­˜å‚¨æ ¼å¼çš„ä¸€ä¸ªå¾ˆé‡è¦çš„åŽŸå› ã€‚ UTF-8ï¼šç»Ÿä¸€é‡‡ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œè™½ç„¶åœ¨è¡¨ç¤ºä¸Šéžå¸¸ç®€å•æ–¹ä¾¿ï¼Œä½†æ˜¯ä¹Ÿæœ‰å…¶ç¼ºç‚¹ï¼Œæœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†å­—ç¬¦ç”¨ä¸€ä¸ªå­—èŠ‚å°±å¯ä»¥è¡¨ç¤ºçš„çŽ°åœ¨è¦ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œå­˜å‚¨ç©ºé—´æ”¾å¤§äº†ä¸€å€ï¼Œåœ¨çŽ°åœ¨çš„ç½‘ç»œå¸¦å®½è¿˜éžå¸¸æœ‰é™çš„ä»Šå¤©ï¼Œè¿™æ ·ä¼šå¢žå¤§ç½‘ç»œä¼ è¾“çš„æµé‡ï¼Œè€Œä¸”ä¹Ÿæ²¡å¿…è¦ã€‚è€Œ UTF-8 é‡‡ç”¨äº†ä¸€ç§å˜é•¿æŠ€æœ¯ï¼Œæ¯ä¸ªç¼–ç åŒºåŸŸæœ‰ä¸åŒçš„å­—ç é•¿åº¦ã€‚ä¸åŒç±»åž‹çš„å­—ç¬¦å¯ä»¥æ˜¯ç”± 1~6 ä¸ªå­—èŠ‚ç»„æˆã€‚ Javaä¸­éœ€è¦ç¼–ç çš„åœ°æ–¹ä¸€èˆ¬éƒ½åœ¨å­—ç¬¦åˆ°å­—èŠ‚çš„è½¬æ¢ä¸Šï¼Œè¿™ä¸ªä¸€èˆ¬åŒ…æ‹¬ç£ç›˜IOå’Œç½‘ç»œIOã€‚ Reader ç±»æ˜¯ Java çš„ I/O ä¸­è¯»å­—ç¬¦çš„çˆ¶ç±»ï¼Œè€Œ InputStream ç±»æ˜¯è¯»å­—èŠ‚çš„çˆ¶ç±»ï¼ŒInputStreamReader ç±»å°±æ˜¯å…³è”å­—èŠ‚åˆ°å­—ç¬¦çš„æ¡¥æ¢ï¼Œå®ƒè´Ÿè´£åœ¨ I/O è¿‡ç¨‹ä¸­å¤„ç†è¯»å–å­—èŠ‚åˆ°å­—ç¬¦çš„è½¬æ¢ï¼Œè€Œå…·ä½“å­—èŠ‚åˆ°å­—ç¬¦çš„è§£ç å®žçŽ°å®ƒç”± StreamDecoder åŽ»å®žçŽ°ï¼Œåœ¨ StreamDecoder è§£ç è¿‡ç¨‹ä¸­å¿…é¡»ç”±ç”¨æˆ·æŒ‡å®š Charset ç¼–ç æ ¼å¼ã€‚ é™æ€ä»£ç†ä¸ŽåŠ¨æ€ä»£ç†åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œåˆ†åˆ«ç”¨åœ¨ä»€ä¹ˆæ ·çš„åœºæ™¯é‡Œï¼Ÿé™æ€ä»£ç†ä¸ŽåŠ¨æ€ä»£ç†çš„åŒºåˆ«åœ¨äºŽä»£ç†ç±»ç”Ÿæˆçš„æ—¶é—´ä¸åŒï¼Œå¦‚æžœéœ€è¦å¯¹å¤šä¸ªç±»è¿›è¡Œä»£ç†ï¼Œå¹¶ä¸”ä»£ç†çš„åŠŸèƒ½éƒ½æ˜¯ä¸€æ ·çš„ï¼Œç”¨é™æ€ä»£ç†é‡å¤ç¼–å†™ä»£ç†ç±»å°±éžå¸¸çš„éº»çƒ¦ï¼Œå¯ä»¥ç”¨åŠ¨æ€ä»£ç†åŠ¨æ€çš„ç”Ÿæˆä»£ç†ç±»ã€‚ 1234567891011121314151617 // ä¸ºç›®æ ‡å¯¹è±¡ç”Ÿæˆä»£ç†å¯¹è±¡public Object getProxyInstance() &#123; return Proxy.newProxyInstance(target.getClass().getClassLoader(), target.getClass().getInterfaces(), new InvocationHandler() &#123; @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; System.out.println("å¼€å¯äº‹åŠ¡"); // æ‰§è¡Œç›®æ ‡å¯¹è±¡æ–¹æ³• Object returnValue = method.invoke(target, args); System.out.println("æäº¤äº‹åŠ¡"); return null; &#125; &#125;);&#125; æè¿°ä¸€ä¸‹Javaçš„å¼‚å¸¸ä½“ç³»ï¼Ÿ Erroræ˜¯ç¨‹åºæ— æ³•å¤„ç†çš„é”™è¯¯ï¼Œæ¯”å¦‚OutOfMemoryErrorã€ThreadDeathç­‰ã€‚è¿™äº›å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œ Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¸€èˆ¬ä¼šé€‰æ‹©çº¿ç¨‹ç»ˆæ­¢ã€‚ Exceptionæ˜¯ç¨‹åºæœ¬èº«å¯ä»¥å¤„ç†çš„å¼‚å¸¸ï¼Œè¿™ç§å¼‚å¸¸åˆ†ä¸¤å¤§ç±»è¿è¡Œæ—¶å¼‚å¸¸å’Œéžè¿è¡Œæ—¶å¼‚å¸¸ï¼Œç¨‹åºä¸­åº”å½“å°½å¯èƒ½åŽ»å¤„ç†è¿™äº›å¼‚å¸¸ã€‚è¿è¡Œæ—¶å¼‚å¸¸éƒ½æ˜¯RuntimeExceptionç±»åŠå…¶å­ç±»å¼‚å¸¸ï¼Œå¦‚NullPointerExceptionã€IndexOutOfBoundsExceptionç­‰ï¼Œè¿™äº›å¼‚å¸¸æ˜¯ä¸æ£€æŸ¥å¼‚å¸¸ï¼Œç¨‹åºä¸­å¯ä»¥é€‰æ‹©æ•èŽ·å¤„ç†ï¼Œä¹Ÿå¯ä»¥ä¸å¤„ç†ã€‚è¿™äº›å¼‚å¸¸ä¸€èˆ¬æ˜¯ç”±ç¨‹åºé€»è¾‘é”™è¯¯å¼•èµ·çš„ï¼Œ ç¨‹åºåº”è¯¥ä»Žé€»è¾‘è§’åº¦å°½å¯èƒ½é¿å…è¿™ç±»å¼‚å¸¸çš„å‘ç”Ÿã€‚ æè¿°ä¸€ä¸ªç±»çš„åŠ è½½è¿‡ç¨‹ï¼ŸPerson person = new Person() æŸ¥æ‰¾Person.classï¼Œå¹¶åŠ è½½åˆ°å†…å­˜ä¸­ã€‚ æ‰§è¡Œç±»é‡Œçš„é™æ€ä»£ç å—ã€‚ åœ¨å †å†…å­˜é‡Œå¼€è¾Ÿå†…å­˜ç©ºé—´ï¼Œå¹¶åˆ†é…å†…å­˜åœ°å€ã€‚ åœ¨å †å†…å­˜é‡Œå»ºç«‹å¯¹è±¡çš„å±žæ€§ï¼Œå¹¶è¿›è¡Œé»˜è®¤çš„åˆå§‹åŒ–ã€‚ å¯¹å±žæ€§è¿›è¡Œæ˜¾ç¤ºåˆå§‹åŒ–ã€‚ å¯¹å¯¹è±¡è¿›è¡Œæž„é€ ä»£ç å—åˆå§‹åŒ–ã€‚ è°ƒç”¨å¯¹è±¡çš„æž„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ã€‚ å°†å¯¹è±¡çš„åœ°å€èµ‹å€¼ç»™personå˜é‡ã€‚ Javaå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆï¼Ÿ åŠ è½½ï¼šå°†ç±»çš„ä¿¡æ¯åŠ è½½åˆ°JVMçš„æ–¹æ³•åŒºï¼Œç„¶åŽåœ¨å †åŒºä¸­å®žä¾‹åŒ–ä¸€ä¸ªjava.lang.Classå¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŽ»ä¸­è¿™ä¸ªç±»çš„ä¿¡æ¯å…¥å£ã€‚ è¿žæŽ¥ï¼šéªŒè¯ï¼šéªŒè¯ç±»æ˜¯å¦åˆæ³•ã€‚å‡†å¤‡ï¼šä¸ºé™æ€å˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®JVMé»˜è®¤å€¼ï¼Œéžé™æ€å˜é‡ä¸ä¼šåˆ†é…å†…å­˜ã€‚è§£æžï¼šå°†å¸¸é‡æ± é‡Œçš„ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æŽ¥å¼•ç”¨ã€‚ åˆå§‹åŒ–ï¼šåˆå§‹åŒ–ç±»çš„é™æ€èµ‹å€¼è¯­å¥å’Œé™æ€ä»£ç å—ï¼Œä¸»åŠ¨å¼•ç”¨ä¼šè¢«è§¦å‘ç±»çš„åˆå§‹åŒ–ï¼Œè¢«åŠ¨å¼•ç”¨ä¸ä¼šè§¦å‘ç±»çš„åˆå§‹åŒ–ã€‚ ä½¿ç”¨ï¼šæ‰§è¡Œç±»çš„åˆå§‹åŒ–ï¼Œä¸»åŠ¨å¼•ç”¨ä¼šè¢«è§¦å‘ç±»çš„åˆå§‹åŒ–ï¼Œè¢«åŠ¨å¼•ç”¨ä¸ä¼šè§¦å‘ç±»çš„åˆå§‹åŒ–ã€‚ å¸è½½ï¼šå¸è½½è¿‡ç¨‹å°±æ˜¯æ¸…æ¥šå †é‡Œç±»çš„ä¿¡æ¯ï¼Œä»¥ä¸‹æƒ…å†µä¼šè¢«å¸è½½ï¼šâ‘  ç±»çš„æ‰€æœ‰å®žä¾‹éƒ½å·²ç»è¢«å›žæ”¶ã€‚â‘¡ ç±»çš„ClassLoaderè¢«å›žæ”¶ã€‚â‘¢ ç±»çš„CLasså¯¹è±¡æ²¡æœ‰è¢«ä»»ä½•åœ°æ–¹å¼•ç”¨ï¼Œæ— æ³•åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡åå°„è®¿é—®è¯¥ç±»ã€‚ æè¿°ä¸€ä¸‹ç±»çš„åŠ è½½æœºåˆ¶ï¼Ÿ ç±»çš„åŠ è½½å°±æ˜¯è™šæ‹Ÿæœºé€šè¿‡ä¸€ä¸ªç±»çš„å…¨é™å®šåæ¥èŽ·å–æè¿°æ­¤ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµï¼Œè€Œå®Œæˆè¿™ä¸ªåŠ è½½åŠ¨ä½œçš„å°±æ˜¯ç±»åŠ è½½å™¨ã€‚ ç±»å’Œç±»åŠ è½½å™¨æ¯æ¯ç›¸å…³ï¼Œåˆ¤å®šä¸¤ä¸ªç±»æ˜¯å¦ç›¸ç­‰ï¼Œåªæœ‰åœ¨è¿™ä¸¤ä¸ªç±»è¢«åŒä¸€ä¸ªç±»åŠ è½½å™¨åŠ è½½çš„æƒ…å†µä¸‹æ‰æœ‰æ„ä¹‰ï¼Œå¦åˆ™å³ä¾¿æ˜¯ä¸¤ä¸ªç±»æ¥è‡ªåŒä¸€ä¸ªClassæ–‡ä»¶ï¼Œè¢«ä¸åŒç±»åŠ è½½å™¨åŠ è½½ï¼Œå®ƒä»¬ä¹Ÿæ˜¯ä¸ç›¸ç­‰çš„ã€‚ æ³¨ï¼šè¿™é‡Œçš„ç›¸ç­‰æ€§åŒ…å«Classå¯¹è±¡çš„equals()æ–¹æ³•ã€isAssignableFrom()æ–¹æ³•ã€isInstance()æ–¹æ³•çš„è¿”å›žç»“æžœä»¥åŠInstanceå…³é”®å­—å¯¹å¯¹è±¡æ‰€å±žå…³ç³»çš„åˆ¤å®šç»“æžœç­‰ã€‚ ç±»åŠ è½½å™¨å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼š å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆBootstrap ClassLoaderï¼‰ï¼šè´Ÿè´£åŠ è½½\libç›®å½•ä¸‹æˆ–è€…è¢«-Xbootclasspathå‚æ•°æ‰€æŒ‡å®šçš„è·¯å¾„çš„ï¼Œå¹¶ä¸”æ˜¯è¢«è™šæ‹Ÿæœºæ‰€è¯†åˆ«çš„åº“åˆ°å†…å­˜ä¸­ã€‚ æ‰©å±•ç±»åŠ è½½å™¨ï¼ˆExtension ClassLoaderï¼‰ï¼šè´Ÿè´£åŠ è½½\lib\extç›®å½•ä¸‹æˆ–è€…è¢«java.ext.dirsç³»ç»Ÿå˜é‡æ‰€æŒ‡å®šçš„è·¯å¾„çš„æ‰€æœ‰ç±»åº“åˆ°å†…å­˜ä¸­ã€‚ åº”ç”¨ç±»åŠ è½½å™¨ï¼ˆApplication ClassLoaderï¼‰ï¼šè´Ÿè´£åŠ è½½ç”¨æˆ·ç±»è·¯å¾„ä¸Šçš„æŒ‡å®šç±»åº“ï¼Œå¦‚æžœåº”ç”¨ç¨‹åºä¸­æ²¡æœ‰å®žçŽ°è‡ªå·±çš„ç±»åŠ è½½å™¨ï¼Œä¸€èˆ¬å°±æ˜¯è¿™ä¸ªç±»åŠ è½½å™¨åŽ»åŠ è½½åº”ç”¨ç¨‹åºä¸­çš„ç±»åº“ã€‚ è¿™ä¹ˆå¤šç±»åŠ è½½å™¨ï¼Œé‚£ä¹ˆå½“ç±»åœ¨åŠ è½½çš„æ—¶å€™ä¼šä½¿ç”¨å“ªä¸ªåŠ è½½å™¨å‘¢ï¼ŸðŸ¤” è¿™ä¸ªæ—¶å€™å°±è¦æåˆ°ç±»åŠ è½½å™¨çš„åŒäº²å§”æ´¾æ¨¡åž‹ï¼Œæµç¨‹å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š åŒäº²å§”æ´¾æ¨¡åž‹çš„æ•´ä¸ªå·¥ä½œæµç¨‹éžå¸¸çš„ç®€å•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š å¦‚æžœä¸€ä¸ªç±»åŠ è½½å™¨æ”¶åˆ°äº†åŠ è½½ç±»çš„è¯·æ±‚ï¼Œå®ƒä¸ä¼šè‡ªå·±ç«‹å³åŽ»åŠ è½½ç±»ï¼Œå®ƒä¼šå…ˆåŽ»è¯·æ±‚çˆ¶ç±»åŠ è½½å™¨ï¼Œæ¯ä¸ªå±‚æ¬¡çš„ç±»åŠ è½½å™¨éƒ½æ˜¯å¦‚æ­¤ã€‚å±‚å±‚ä¼ é€’ï¼Œç›´åˆ°ä¼ é€’åˆ°æœ€é«˜å±‚çš„ç±»åŠ è½½å™¨ï¼Œåªæœ‰å½“çˆ¶ç±»åŠ è½½å™¨åé¦ˆè‡ªå·±æ— æ³•åŠ è½½è¿™ä¸ªç±»ï¼Œæ‰ä¼šæœ‰å½“å‰å­ç±»åŠ è½½å™¨åŽ»åŠ è½½è¯¥ç±»ã€‚ å…³äºŽåŒäº²å§”æ´¾æœºåˆ¶ï¼Œåœ¨ClassLoaderæºç é‡Œä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314151617181920212223242526272829303132public abstract class ClassLoader &#123; protected Class&lt;?&gt; loadClass(String name, boolean resolve) throws ClassNotFoundException &#123; //é¦–å…ˆï¼Œæ£€æŸ¥è¯¥ç±»æ˜¯å¦å·²ç»è¢«åŠ è½½ Class c = findLoadedClass(name); if (c == null) &#123; long t0 = System.nanoTime(); try &#123; //å…ˆè°ƒç”¨çˆ¶ç±»åŠ è½½å™¨åŽ»åŠ è½½ if (parent != null) &#123; c = parent.loadClass(name, false); &#125; else &#123; c = findBootstrapClassOrNull(name); &#125; &#125; catch (ClassNotFoundException e) &#123; // ClassNotFoundException thrown if class not found // from the non-null parent class loader &#125; if (c == null) &#123; //å¦‚æžœçˆ¶ç±»åŠ è½½å™¨æ²¡æœ‰åŠ è½½åˆ°è¯¥ç±»ï¼Œåˆ™è‡ªå·±åŽ»æ‰§è¡ŒåŠ è½½ long t1 = System.nanoTime(); c = findClass(name); // this is the defining class loader; record the stats &#125; &#125; return c; &#125;&#125; ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšå‘¢ï¼ŸðŸ¤” è¿™æ˜¯ä¸ºäº†è¦è®©è¶ŠåŸºç¡€çš„ç±»ç”±è¶Šé«˜å±‚çš„ç±»åŠ è½½å™¨åŠ è½½ï¼Œä¾‹å¦‚Objectç±»ï¼Œæ— è®ºå“ªä¸ªç±»åŠ è½½å™¨åŽ»å°è¯•åŠ è½½è¿™ä¸ªç±»ï¼Œæœ€ç»ˆéƒ½ä¼šä¼ é€’ç»™æœ€é«˜å±‚çš„ç±»åŠ è½½å™¨åŽ»åŠ è½½ï¼Œå‰é¢æˆ‘ä»¬ä¹Ÿè¯´è¿‡ï¼Œç±»çš„ç›¸ç­‰æ€§æ˜¯ç”±ç±»ä¸Žå…¶ç±»åŠ è½½å™¨å…±åŒåˆ¤å®šçš„ï¼Œè¿™æ ·Objectç±»æ— è®ºåœ¨ä½•ç§ç±»åŠ è½½å™¨çŽ¯å¢ƒä¸‹éƒ½æ˜¯åŒä¸€ä¸ªç±»ã€‚ ç›¸åå¦‚æžœæ²¡æœ‰åŒäº²å§”æ´¾æ¨¡åž‹ï¼Œé‚£ä¹ˆæ¯ä¸ªç±»åŠ è½½å™¨éƒ½ä¼šåŽ»åŠ è½½Objectï¼Œé‚£ä¹ˆç³»ç»Ÿä¸­å°±ä¼šå‡ºçŽ°å¤šä¸ªä¸åŒçš„Objectç±»äº†ï¼Œå¦‚æ­¤ä¸€æ¥ç³»ç»Ÿçš„æœ€åŸºç¡€çš„è¡Œä¸ºä¹Ÿå°±æ— æ³•ä¿è¯äº†ã€‚ æè¿°ä¸€ä¸‹GCçš„åŽŸç†å’Œå›žæ”¶ç­–ç•¥ï¼Ÿæåˆ°åžƒåœ¾å›žæ”¶ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ€è€ƒä¸€ä¸‹ï¼Œå¦‚æžœæˆ‘ä»¬åŽ»åšåžƒåœ¾å›žæ”¶éœ€è¦è§£å†³å“ªäº›é—®é¢˜ï¼Ÿ ðŸ¤” ä¸€èˆ¬è¯´æ¥ï¼Œæˆ‘ä»¬è¦è§£å†³ä»¥ä¸‹ä¸‰ä¸ªé—®é¢˜ï¼š å“ªäº›å†…å­˜å›žæ”¶ï¼Ÿ ä»€ä¹ˆæ—¶å€™å›žæ”¶ï¼Ÿ å¦‚ä½•å›žæ”¶ï¼Ÿ è¿™äº›é—®é¢˜åˆ†åˆ«å¯¹åº”ç€å¼•ç”¨ç®¡ç†å’Œå›žæ”¶ç­–ç•¥ç­‰æ–¹æ¡ˆã€‚ æåˆ°å¼•ç”¨ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“Javaä¸­æœ‰å››ç§å¼•ç”¨ç±»åž‹ï¼š å¼ºå¼•ç”¨ï¼šä»£ç ä¸­æ™®éå­˜åœ¨çš„ï¼Œåªè¦å¼ºå¼•ç”¨è¿˜å­˜åœ¨ï¼Œåžƒåœ¾æ”¶é›†å™¨å°±ä¸ä¼šå›žæ”¶æŽ‰è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚ è½¯å¼•ç”¨ï¼šSoftReferenceï¼Œç”¨æ¥æè¿°è¿˜æœ‰ç”¨ä½†æ˜¯éžå¿…é¡»çš„å¯¹è±¡ï¼Œå½“å†…å­˜ä¸è¶³çš„æ—¶å€™å›žå›žæ”¶è¿™ç±»å¯¹è±¡ã€‚ å¼±å¼•ç”¨ï¼šWeakReferenceï¼Œç”¨æ¥æè¿°éžå¿…é¡»å¯¹è±¡ï¼Œå¼±å¼•ç”¨çš„å¯¹è±¡åªèƒ½ç”Ÿå­˜åˆ°ä¸‹ä¸€æ¬¡GCå‘ç”Ÿæ—¶ï¼Œå½“GCå‘ç”Ÿæ—¶ï¼Œæ— è®ºå†…å­˜æ˜¯å¦è¶³å¤Ÿï¼Œéƒ½ä¼šå›žæ”¶è¯¥å¯¹è±¡ã€‚ è™šå¼•ç”¨ï¼šPhantomReferenceï¼Œä¸€ä¸ªå¯¹è±¡æ˜¯å¦æœ‰è™šå¼•ç”¨çš„å­˜åœ¨ï¼Œå®Œå…¨ä¸ä¼šå¯¹å…¶ç”Ÿå­˜æ—¶é—´äº§ç”Ÿå½±å“ï¼Œä¹Ÿæ— æ³•é€šè¿‡è™šå¼•ç”¨å–å¾—ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œå®ƒå­˜åœ¨çš„å”¯ä¸€ç›®çš„æ˜¯åœ¨è¿™ä¸ªå¯¹è±¡è¢«å›žæ”¶æ—¶å¯ä»¥æ”¶åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥ã€‚ ä¸åŒçš„å¼•ç”¨ç±»åž‹ï¼Œåœ¨åšGCæ—¶ä¼šåŒºåˆ«å¯¹å¾…ï¼Œæˆ‘ä»¬å¹³æ—¶ç”Ÿæˆçš„Javaå¯¹è±¡ï¼Œé»˜è®¤éƒ½æ˜¯å¼ºå¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦å¼ºå¼•ç”¨è¿˜åœ¨ï¼ŒGCå°±ä¸ä¼šå›žæ”¶ï¼Œé‚£ä¹ˆå¦‚ä½•åˆ¤æ–­å¼ºå¼•ç”¨æ˜¯å¦å­˜åœ¨å‘¢ï¼ŸðŸ¤” ä¸€ä¸ªç®€å•çš„æ€è·¯å°±æ˜¯ï¼šå¼•ç”¨è®¡æ•°æ³•ï¼Œæœ‰å¯¹è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨å°±+1ï¼Œä¸å†å¼•ç”¨å°±-1ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼çœ‹èµ·æ¥ç®€å•ç¾Žå¥½ï¼Œä½†å®ƒå´ä¸å«©è§£å†³å¾ªçŽ¯å¼•ç”¨è®¡æ•°çš„é—®é¢˜ã€‚ å› æ­¤å¯è¾¾æ€§åˆ†æžç®—æ³•ç™»ä¸ŠåŽ†å²èˆžå°ðŸ˜Žï¼Œç”¨å®ƒæ¥åˆ¤æ–­å¯¹è±¡çš„å¼•ç”¨æ˜¯å¦å­˜åœ¨ã€‚ å¯è¾¾æ€§åˆ†æžç®—æ³•é€šè¿‡ä¸€ç³»åˆ—ç§°ä¸ºGC Rootsçš„å¯¹è±¡ä½œä¸ºèµ·å§‹ç‚¹ï¼Œä»Žè¿™äº›èŠ‚ç‚¹ä»Žä¸Šå‘ä¸‹æœç´¢ï¼Œæœç´¢èµ°è¿‡çš„è·¯å¾„ç§°ä¸ºå¼•ç”¨é“¾ï¼Œå½“ä¸€ä¸ªå¯¹è±¡æ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ä¸ŽGC Rootsè¿žæŽ¥æ—¶å°±è¯´æ˜Žæ­¤å¯¹è±¡ä¸å¯ç”¨ï¼Œä¹Ÿå°±æ˜¯å¯¹è±¡ä¸å¯è¾¾ã€‚ GC Rootså¯¹è±¡é€šå¸¸åŒ…æ‹¬ï¼š è™šæ‹Ÿæœºæ ˆä¸­å¼•ç”¨çš„å¯¹è±¡ï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰ æ–¹æ³•åŽ»ä¸­ç±»çš„é™æ€å±žæ€§å¼•ç”¨çš„å¯¹è±¡ æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡ Nativeæ–¹æ³•å¼•ç”¨çš„å¯¹è±¡ å¯è¾¾æ€§åˆ†æžç®—æ³•æ•´ä¸ªæµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š ç¬¬ä¸€æ¬¡æ ‡è®°ï¼šå¯¹è±¡åœ¨ç»è¿‡å¯è¾¾æ€§åˆ†æžåŽå‘çŽ°æ²¡æœ‰ä¸ŽGC Rootsæœ‰å¼•ç”¨é“¾ï¼Œåˆ™è¿›è¡Œç¬¬ä¸€æ¬¡æ ‡è®°å¹¶è¿›è¡Œä¸€æ¬¡ç­›é€‰ï¼Œç­›é€‰æ¡ä»¶æ˜¯ï¼šè¯¥å¯¹è±¡æ˜¯å¦æœ‰å¿…è¦æ‰§è¡Œfinalize()æ–¹æ³•ã€‚æ²¡æœ‰è¦†ç›–finalize()æ–¹æ³•æˆ–è€…finalize()æ–¹æ³•å·²ç»è¢«æ‰§è¡Œè¿‡éƒ½ä¼šè¢«è®¤ä¸ºæ²¡æœ‰å¿…è¦æ‰§è¡Œã€‚ å¦‚æžœæœ‰å¿…è¦æ‰§è¡Œï¼šåˆ™è¯¥å¯¹è±¡ä¼šè¢«æ”¾åœ¨ä¸€ä¸ªF-Queueé˜Ÿåˆ—ï¼Œå¹¶ç¨åŽåœ¨ç”±è™šæ‹Ÿæœºå»ºç«‹çš„ä½Žä¼˜å…ˆçº§Finalizerçº¿ç¨‹ä¸­è§¦å‘è¯¥å¯¹è±¡çš„finalize()æ–¹æ³•ï¼Œä½†ä¸ä¿è¯ä¸€å®šç­‰å¾…å®ƒæ‰§è¡Œç»“æŸï¼Œå› ä¸ºå¦‚æžœè¿™ä¸ªå¯¹è±¡çš„finalize()æ–¹æ³•å‘ç”Ÿäº†æ­»å¾ªçŽ¯æˆ–è€…æ‰§è¡Œæ—¶é—´è¾ƒé•¿çš„æƒ…å†µï¼Œä¼šé˜»å¡žF-Queueé˜Ÿåˆ—é‡Œçš„å…¶ä»–å¯¹è±¡ï¼Œå½±å“GCã€‚ ç¬¬äºŒæ¬¡æ ‡è®°ï¼šGCå¯¹F-Queueé˜Ÿåˆ—é‡Œçš„å¯¹è±¡è¿›è¡Œç¬¬äºŒæ¬¡æ ‡è®°ï¼Œå¦‚æžœåœ¨ç¬¬äºŒæ¬¡æ ‡è®°æ—¶è¯¥å¯¹è±¡åˆæˆåŠŸè¢«å¼•ç”¨ï¼Œåˆ™ä¼šè¢«ç§»é™¤å³å°†å›žæ”¶çš„é›†åˆï¼Œå¦åˆ™ä¼šè¢«å›žæ”¶ã€‚ æŽ¥å£å’ŒæŠ½è±¡ç±»æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå…±åŒç‚¹ æ˜¯ä¸Šå±‚çš„æŠ½è±¡å±‚ã€‚ éƒ½ä¸èƒ½è¢«å®žä¾‹åŒ– éƒ½èƒ½åŒ…å«æŠ½è±¡çš„æ–¹æ³•ï¼Œè¿™äº›æŠ½è±¡çš„æ–¹æ³•ç”¨äºŽæè¿°ç±»å…·å¤‡çš„åŠŸèƒ½ï¼Œä½†æ˜¯ä¸ä¼šæä¾›å…·ä½“çš„å®žçŽ°ã€‚ åŒºåˆ« åœ¨æŠ½è±¡ç±»ä¸­å¯ä»¥å†™éžæŠ½è±¡çš„æ–¹æ³•ï¼Œä»Žè€Œé¿å…åœ¨å­ç±»ä¸­é‡å¤ä¹¦å†™ä»–ä»¬ï¼Œè¿™æ ·å¯ä»¥æé«˜ä»£ç çš„å¤ç”¨æ€§ï¼Œè¿™æ˜¯æŠ½è±¡ç±»çš„ä¼˜åŠ¿ï¼›æŽ¥å£ä¸­åªèƒ½æœ‰æŠ½è±¡çš„æ–¹æ³•ã€‚ ä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªç›´æŽ¥çˆ¶ç±»ï¼Œè¿™ä¸ªçˆ¶ç±»å¯ä»¥æ˜¯å…·ä½“çš„ç±»ä¹Ÿå¯æ˜¯æŠ½è±¡ç±»ï¼›ä½†æ˜¯ä¸€ä¸ªç±»å¯ä»¥å®žçŽ°å¤šä¸ªæŽ¥å£ã€‚ é—®ï¼šæŠ½è±¡ç±»æ˜¯å¦å¯ç»§æ‰¿å®žä½“ç±» (concrete class)ç­”ï¼š æŠ½è±¡ç±»æ˜¯å¯ä»¥ç»§æ‰¿å®žä½“ç±»ï¼Œä½†å‰ææ˜¯å®žä½“ç±»å¿…é¡»æœ‰æ˜Žç¡®çš„æž„é€ å‡½æ•° ç­”æ¡ˆå¾ˆæ˜Žç¡®ï¼Œå¯ä»¥ç»§æ‰¿ã€‚å…¶å®žä»ŽObjectå°±æ˜¯ä¸ªå®žä½“ç±»ï¼Œjavaçš„APIæ–‡æ¡£é‡Œï¼Œæ¯ä¸ªæŠ½è±¡ç±»çš„æ¡ç›®é‡Œéƒ½æ˜Žç¡®å†™ç€ç›´æŽ¥æˆ–é—´æŽ¥ç»§æ‰¿è‡ªObjectï¼Œæ‰€ä»¥è¿™ç‚¹æ˜¯æ²¡æœ‰ç–‘é—®çš„ã€‚å…³é”®åœ¨äºŽè¿™ç­”æ¡ˆé‡Œæ‰€è¯´çš„â€œå‰ææ˜¯å®žä½“ç±»å¿…é¡»æœ‰æ˜Žç¡®çš„æž„é€ å‡½æ•°â€ä¸€å¥ï¼Œæ˜¯ä»€ä¹ˆæ„æ€ã€‚ä¸€èˆ¬å­¦ä¹ è€…ä¼šå†™çš„ç®€å•è¯•éªŒä»£ç ï¼š123class A&#123;&#125;abstract class B extends A&#123;&#125; ç»“æžœå®Œå…¨æ­£å¸¸ï¼Œç¼–è¯‘é€šè¿‡ã€‚ä¼¼ä¹Žå’Œâ€œå®žä½“ç±»å¿…é¡»æœ‰æ˜Žç¡®çš„æž„é€ å‡½æ•°â€å®Œå…¨æ²¡æœ‰å…³ç³»ã€‚ è¿™ä¸ªé—®é¢˜æ¶‰åŠåˆ°ä¸¤ä¸ªä¸ªåŸºç¡€çŸ¥è¯†ï¼š æ‰€æœ‰çš„classéƒ½å¿…é¡»æœ‰ä¸€ä¸ªæž„é€ æ–¹æ³•ï¼Œå¦‚æžœä½ æ²¡æœ‰åœ¨ä»£ç é‡Œå£°æ˜Žæž„é€ æ–¹æ³•ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç»™ä½ ç”Ÿæˆä¸€ä¸ªå…¬æœ‰æ— å‚çš„æž„é€ æ–¹æ³•ã€‚è€Œåªè¦ä½ è‡ªå·±å£°æ˜Žäº†ä¸€ä¸ªæž„é€ æ–¹æ³•ï¼Œæ— è®ºæœ‰å‚æ— å‚ï¼Œç§æœ‰å…¬æœ‰ï¼Œç³»ç»Ÿå°±ä¸å†å¸®ä½ ç”Ÿæˆé»˜è®¤æ— å‚æž„é€ å™¨äº†ã€‚ æ‰€æœ‰çš„å­ç±»æž„é€ å™¨éƒ½è¦æ±‚åœ¨ç¬¬ä¸€è¡Œä»£ç ä¸­è°ƒç”¨çˆ¶ç±»æž„é€ å™¨ï¼Œå¦‚æžœä¸å†™ï¼Œç³»ç»Ÿé»˜è®¤åŽ»è°ƒç”¨çˆ¶ç±»çš„æ— å‚æž„é€ å™¨ã€‚ æ‰€ä»¥ï¼Œå¦‚æžœæŠŠç³»ç»Ÿé»˜è®¤é…ç»™çš„æ–¹æ³•ä¹Ÿç®—è¿›åŽ»ï¼Œclass A{}çš„ä»£ç å®žé™…ä¸Šæ˜¯12345class A&#123; public A()&#123;&#125;&#125; Bç»§æ‰¿ A çš„æ—¶å€™ï¼Œåˆ™æ˜¯123456789abstract class B extends A&#123; public B()&#123; super(); &#125;&#125; è¦è¯•éªŒå‡ºè¿™ç»§æ‰¿è§„åˆ™çš„å†…éƒ¨æƒ…å†µï¼Œä¹Ÿå¾ˆç®€å•ï¼Œåœ¨æœ€ä¸Šé¢é‚£ä¸ªç®€å•è¯•éªŒä»£ç é‡Œï¼ŒåŠ ä¸Šä¸ªç§æœ‰æž„é€ å™¨ï¼Œæœ‰å‚æ— å‚éƒ½è¡Œã€‚12345class A&#123; private A()&#123;&#125; &#125; è¿™ä¸ªæ—¶å€™ï¼Œå¦‚åŸºç¡€çŸ¥è¯†(1) ä¸­æ‰€è¯´ï¼Œç³»ç»Ÿä¸å†ç»™ä½ é»˜è®¤æ— å‚æž„é€ å™¨ï¼Œ Bçš„æž„é€ å™¨æ ¹æ®ï¼ˆ2ï¼‰ä¸­çš„è§„åˆ™åŽ»è°ƒç”¨super()ï¼Œå´æ‰¾ä¸åˆ°Açš„æ— å‚æž„é€ å™¨ï¼Œæ‰€ä»¥å¯¼è‡´abstract class B extends A{} ç¼–è¯‘ä¸èƒ½é€šè¿‡ã€‚ï¼ˆå› ä¸ºAä¸­æ²¡æœ‰ä»»ä½•æž„é€ å™¨å¯ä¾›å­ç±»è°ƒç”¨ï¼Œå…¶å®žè¿™ä¸ªæ—¶å€™Aåªèƒ½å¤Ÿä¾›å†…éƒ¨ç±»ç»§æ‰¿ï¼Œæˆ‘ç”¨çš„Eclipseçš„3.4ç‰ˆæœ¬ä¼šå»ºè®®ç»™Bæ”¹åï¼Œä½†æ˜¯è¿™è§£å†³ä¸äº†è¿™ä¸ªé—®é¢˜ã€‚ï¼‰ çŽ°åœ¨ï¼Œä½ åº”è¯¥äº†è§£äº†èµ„æ–™ç»™çš„é‚£å¥è¯­ç„‰ä¸è¯¦çš„â€œå®žä½“ç±»å¿…é¡»æœ‰æ˜Žç¡®çš„æž„é€ å‡½æ•°â€çš„å«ä¹‰ï¼š æ²¡å†™æž„é€ å™¨çš„ï¼Œé‚£æ˜¯æ‹¥æœ‰é»˜è®¤æ— å‚å…¬æœ‰æž„é€ å‡½æ•°çš„ï¼Œå­ç±»å¯ä»¥ä»€ä¹ˆéƒ½ä¸å†™ï¼Œè®©é»˜è®¤æž„é€ å™¨åŽ»è°ƒç”¨å®ƒã€‚è¿™æ˜¯æœ€åˆé‚£ä¸¤è¡Œä»£ç çš„æƒ…å†µã€‚ å†™äº†å­ç±»å¯è®¿é—®çš„æ— å‚æž„é€ å™¨çš„ï¼Œä¹Ÿæ˜¯ä¸€æ ·ï¼Œå­ç±»é‡Œå¯ä»¥ä»€ä¹ˆéƒ½ä¸å†™ï¼Œç”¨é»˜è®¤æœºåˆ¶è°ƒç”¨ã€‚ å†™äº† æœ‰å‚æž„é€ å™¨å´æ²¡å†™æ— å‚æž„é€ å™¨çš„ï¼Œçˆ¶ç±»é‡Œæ²¡æœ‰å­ç±»å¯è®¿é—®çš„æ— å‚æž„é€ å™¨ï¼Œå­ç±»å¿…é¡»åœ¨å­ç±»æž„é€ å™¨é‡Œçš„ç¬¬ä¸€å¥å†™æ˜Žï¼Œè°ƒç”¨çˆ¶ç±»æœ‰å‚æž„é€ å™¨ï¼Œå¹¶æŠŠå‚æ•°ä¼ è¿›åŽ»ã€‚ å£°æ˜Žä¸ºfinalçš„ä»¥åŠæ‰€æœ‰æž„é€ å™¨éƒ½ä¸åœ¨å­ç±»è®¿é—®æƒé™ä¹‹å†…çš„ç±»æ— æ³•ç»§æ‰¿ å…¶å®žåªè¦æ˜¯åœ¨ç±»çš„ç»§æ‰¿ä¸­ï¼Œæ— è®ºæŠ½è±¡è¿˜æ˜¯å®žä½“ï¼Œéƒ½éœ€è¦ç¬¦åˆè¿™ä¸ªè§„åˆ™çš„ã€‚åœ¨è¿™ä¸ªç»§æ‰¿è¯•éªŒä¸­éšæ—¶åˆ æŽ‰æˆ–æ˜¯åŠ ä¸Šabstractçš„å‰ç¼€ï¼Œç»“æžœéƒ½æ²¡æœ‰å˜åŒ–ã€‚ä¸ªäººè§‰å¾—â€œå®žä½“ç±»å¿…é¡»æœ‰æ˜Žç¡®çš„æž„é€ å‡½æ•°â€ä¸€å¥å®žåœ¨æ˜¯æ— æ³•æŠŠè¿™ä¸ªæƒ…å†µè¡¨è¾¾æ¸…æ¥šï¼Œæ‰€ä»¥å¹¿å¤§æ±‚èŒè€…è¿˜æ˜¯å†™å¾—æ¸…æ¥šäº›å¥½ã€‚ æˆ‘å–œæ¬¢çš„å†™æ³•æ˜¯â€œå¯ä»¥ç»§æ‰¿ï¼Œä½†æ˜¯å’Œå®žä½“ç±»çš„ç»§æ‰¿ä¸€æ ·ï¼Œä¹Ÿè¦æ±‚çˆ¶ç±»å¯ç»§æ‰¿ï¼Œå¹¶ä¸”æ‹¥æœ‰å­ç±»å¯è®¿é—®åˆ°çš„æž„é€ å™¨ã€‚â€ å†…éƒ¨ç±»ã€é™æ€å†…éƒ¨ç±»åœ¨ä¸šåŠ¡ä¸­çš„åº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ12345678static class Outer &#123; class Inner &#123;&#125; static class StaticInner &#123;&#125;&#125;Outer outer = new Outer();Outer.Inner inner = outer.new Inner();Outer.StaticInner inner0 = new Outer.StaticInner(); é™æ€å†…éƒ¨ç±»ï¼šåªæ˜¯ä¸ºäº†é™ä½ŽåŒ…çš„æ·±åº¦ï¼Œæ–¹ä¾¿ç±»çš„ä½¿ç”¨ï¼Œé™æ€å†…éƒ¨ç±»é€‚ç”¨äºŽåŒ…å«ç±»å½“ä¸­ï¼Œä½†åˆä¸ä¾èµ–ä¸Žå¤–åœ¨çš„ç±»ï¼Œä¸ç”¨ä½¿ç”¨å¤–åœ¨ç±»çš„éžé™æ€å±žæ€§å’Œæ–¹æ³•ï¼Œåªæ˜¯ä¸ºäº†æ–¹ä¾¿ç®¡ç†ç±»ç»“æž„è€Œå®šä¹‰ã€‚åœ¨åˆ›å»ºé™æ€å†…éƒ¨ç±»çš„æ—¶å€™ï¼Œä¸éœ€è¦å¤–éƒ¨ç±»å¯¹è±¡çš„å¼•ç”¨ã€‚ éžé™æ€å†…éƒ¨ç±»ï¼šæŒæœ‰å¤–éƒ¨ç±»çš„å¼•ç”¨ï¼Œå¯ä»¥è‡ªç”±ä½¿ç”¨å¤–éƒ¨ç±»çš„æ‰€æœ‰å˜é‡å’Œæ–¹æ³• synchronizedä¸ŽReentrantLockæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿsynchronizedæ˜¯äº’æ–¥åŒæ­¥çš„ä¸€ç§å®žçŽ°ã€‚ synchronizedï¼šå½“æŸä¸ªçº¿ç¨‹è®¿é—®è¢«synchronizedæ ‡è®°çš„æ–¹æ³•æˆ–ä»£ç å—æ—¶ï¼Œè¿™ä¸ªçº¿ç¨‹ä¾¿èŽ·å¾—äº†è¯¥å¯¹è±¡çš„é”ï¼Œå…¶ä»–çº¿ç¨‹æš‚æ—¶æ— æ³•è®¿é—®è¿™ä¸ªæ–¹æ³•ï¼Œåªæœ‰ç­‰å¾…è¿™ä¸ªæ–¹æ³•æ‰§è¡Œå®Œæ¯•æˆ–è€…ä»£ç å—æ‰§è¡Œå®Œæ¯•ï¼Œè¿™ä¸ªçº¿ç¨‹æ‰ä¼šé‡Šæ”¾è¯¥å¯¹è±¡çš„é”ï¼Œå…¶ä»–çº¿ç¨‹æ‰èƒ½æ‰§è¡Œè¿™ä¸ªæ–¹æ³•æˆ–ä»£ç å—ã€‚ å‰é¢æˆ‘ä»¬å·²ç»è¯´äº†volatileå…³é”®å­—ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸¾ä¸ªä¾‹å­æ¥ç»¼åˆåˆ†æžvolatileä¸Žsynchronizedå…³é”®å­—çš„ä½¿ç”¨ã€‚ :point_up: ä¸¾ä¸ªæ —å­ 1234567891011121314151617181920public class Singleton &#123; //volatileä¿è¯äº†ï¼š1 instanceåœ¨å¤šçº¿ç¨‹å¹¶å‘çš„å¯è§æ€§ //2 ç¦æ­¢instanceåœ¨æ“ä½œæ—¶çš„æŒ‡ä»¤é‡æŽ’åº private volatile static Singleton instance; public static Singleton getInstance() &#123; //ç¬¬ä¸€æ¬¡åˆ¤ç©ºï¼Œä¿è¯ä¸å¿…è¦çš„åŒæ­¥ if (instance == null) &#123; //synchronizedå¯¹SingletonåŠ å…¨å±€é”ï¼Œä¿è¯æ¯æ¬¡åªè¦ä¸€ä¸ªçº¿ç¨‹åˆ›å»ºå®žä¾‹ synchronized (Singleton.class) &#123; //ç¬¬äºŒæ¬¡åˆ¤ç©ºæ—¶ä¸ºäº†åœ¨nullçš„æƒ…å†µä¸‹åˆ›å»ºå®žä¾‹ if (instance == null) &#123; instance = new Singleton(); &#125; &#125; &#125; return instance; &#125;&#125; è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„DCLå•ä¾‹ã€‚ å®ƒçš„å­—èŠ‚ç å¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°è¢«synchronizedåŒæ­¥çš„ä»£ç å—ï¼Œä¼šåœ¨å‰åŽåˆ†åˆ«åŠ ä¸Šmonitorenterå’Œmonitorexitï¼Œè¿™ä¸¤ä¸ªå­—èŠ‚ç éƒ½éœ€è¦æŒ‡å®šåŠ é”å’Œè§£é”çš„å¯¹è±¡ã€‚ å…³äºŽåŠ é”å’Œè§£é”çš„å¯¹è±¡ï¼š synchronizedä»£ç å— ï¼šåŒæ­¥ä»£ç å—ï¼Œä½œç”¨èŒƒå›´æ˜¯æ•´ä¸ªä»£ç å—ï¼Œä½œç”¨å¯¹è±¡æ˜¯è°ƒç”¨è¿™ä¸ªä»£ç å—çš„å¯¹è±¡ã€‚ synchronizedæ–¹æ³• ï¼šåŒæ­¥æ–¹æ³•ï¼Œä½œç”¨èŒƒå›´æ˜¯æ•´ä¸ªæ–¹æ³•ï¼Œä½œç”¨å¯¹è±¡æ˜¯è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„å¯¹è±¡ã€‚ synchronizedé™æ€æ–¹æ³• ï¼šåŒæ­¥é™æ€æ–¹æ³•ï¼Œä½œç”¨èŒƒå›´æ˜¯æ•´ä¸ªé™æ€æ–¹æ³•ï¼Œä½œç”¨å¯¹è±¡æ˜¯è°ƒç”¨è¿™ä¸ªç±»çš„æ‰€æœ‰å¯¹è±¡ã€‚ synchronized(this)ï¼šä½œç”¨èŒƒå›´æ˜¯è¯¥å¯¹è±¡ä¸­æ‰€æœ‰è¢«synchronizedæ ‡è®°çš„å˜é‡ã€æ–¹æ³•æˆ–ä»£ç å—ï¼Œä½œç”¨å¯¹è±¡æ˜¯å¯¹è±¡æœ¬èº«ã€‚ synchronized(ClassName.class) ï¼šä½œç”¨èŒƒå›´æ˜¯é™æ€çš„æ–¹æ³•æˆ–è€…é™æ€å˜é‡ï¼Œä½œç”¨å¯¹è±¡æ˜¯Classå¯¹è±¡ã€‚ synchronized(this)æ·»åŠ çš„æ˜¯å¯¹è±¡é”ï¼Œsynchronized(ClassName.class)æ·»åŠ çš„æ˜¯ç±»é”ï¼Œå®ƒä»¬çš„åŒºåˆ«å¦‚ä¸‹ï¼š å¯¹è±¡é”ï¼šJavaçš„æ‰€æœ‰å¯¹è±¡éƒ½å«æœ‰1ä¸ªäº’æ–¥é”ï¼Œè¿™ä¸ªé”ç”±JVMè‡ªåŠ¨èŽ·å–å’Œé‡Šæ”¾ã€‚çº¿ç¨‹è¿›å…¥synchronizedæ–¹æ³•çš„æ—¶å€™èŽ·å–è¯¥å¯¹è±¡çš„é”ï¼Œå½“ç„¶å¦‚æžœå·²ç»æœ‰çº¿ç¨‹èŽ·å–äº†è¿™ä¸ªå¯¹è±¡çš„é”ï¼Œé‚£ä¹ˆå½“å‰çº¿ç¨‹ä¼šç­‰å¾…ï¼›synchronizedæ–¹æ³•æ­£å¸¸è¿”å›žæˆ–è€…æŠ›å¼‚å¸¸è€Œç»ˆæ­¢ï¼ŒJVMä¼šè‡ªåŠ¨é‡Šæ”¾å¯¹è±¡é”ã€‚è¿™é‡Œä¹Ÿä½“çŽ°äº†ç”¨synchronizedæ¥åŠ é”çš„å¥½å¤„ï¼Œæ–¹æ³•æŠ›å¼‚å¸¸çš„æ—¶å€™ï¼Œé”ä»ç„¶å¯ä»¥ç”±JVMæ¥è‡ªåŠ¨é‡Šæ”¾ã€‚ ç±»é”ï¼šå¯¹è±¡é”æ˜¯ç”¨æ¥æŽ§åˆ¶å®žä¾‹æ–¹æ³•ä¹‹é—´çš„åŒæ­¥ï¼Œç±»é”æ˜¯ç”¨æ¥æŽ§åˆ¶é™æ€æ–¹æ³•ï¼ˆæˆ–é™æ€å˜é‡äº’æ–¥ä½“ï¼‰ä¹‹é—´çš„åŒæ­¥ã€‚å…¶å®žç±»é”åªæ˜¯ä¸€ä¸ªæ¦‚å¿µä¸Šçš„ä¸œè¥¿ï¼Œå¹¶ä¸æ˜¯çœŸå®žå­˜åœ¨çš„ï¼Œå®ƒåªæ˜¯ç”¨æ¥å¸®åŠ©æˆ‘ä»¬ç†è§£é”å®šå®žä¾‹æ–¹æ³•å’Œé™æ€æ–¹æ³•çš„åŒºåˆ«çš„ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œjavaç±»å¯èƒ½ä¼šæœ‰å¾ˆå¤šä¸ªå¯¹è±¡ï¼Œä½†æ˜¯åªæœ‰1ä¸ªClasså¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ç±»çš„ä¸åŒå®žä¾‹ä¹‹é—´å…±äº«è¯¥ç±»çš„Classå¯¹è±¡ã€‚Classå¯¹è±¡å…¶å®žä¹Ÿä»…ä»…æ˜¯1ä¸ªjavaå¯¹è±¡ï¼Œåªä¸è¿‡æœ‰ç‚¹ç‰¹æ®Šè€Œå·²ã€‚ç”±äºŽæ¯ä¸ªjavaå¯¹è±¡éƒ½æœ‰1ä¸ªäº’æ–¥é”ï¼Œè€Œç±»çš„é™æ€æ–¹æ³•æ˜¯éœ€è¦Classå¯¹è±¡ã€‚æ‰€ä»¥æ‰€è°“çš„ç±»é”ï¼Œä¸è¿‡æ˜¯Classå¯¹è±¡çš„é”è€Œå·²ã€‚èŽ·å–ç±»çš„Classå¯¹è±¡æœ‰å¥½å‡ ç§ï¼Œæœ€ç®€å•çš„å°±æ˜¯MyClass.classçš„æ–¹å¼ã€‚ ç±»é”å’Œå¯¹è±¡é”ä¸æ˜¯åŒä¸€ä¸ªä¸œè¥¿ï¼Œä¸€ä¸ªæ˜¯ç±»çš„Classå¯¹è±¡çš„é”ï¼Œä¸€ä¸ªæ˜¯ç±»çš„å®žä¾‹çš„é”ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šä¸€ä¸ªçº¿ç¨‹è®¿é—®é™æ€synchronizedçš„æ—¶å€™ï¼Œå…è®¸å¦ä¸€ä¸ªçº¿ç¨‹è®¿é—®å¯¹è±¡çš„å®žä¾‹synchronizedæ–¹æ³•ã€‚åè¿‡æ¥ä¹Ÿæ˜¯æˆç«‹çš„ï¼Œå› ä¸ºä»–ä»¬éœ€è¦çš„é”æ˜¯ä¸åŒçš„ã€‚ volatileçš„åŽŸç†æ˜¯ä»€ä¹ˆï¼Ÿvolatileä¹Ÿæ˜¯äº’æ–¥åŒæ­¥çš„ä¸€ç§å®žçŽ°ï¼Œä¸è¿‡å®ƒéžå¸¸çš„è½»é‡çº§ã€‚ volatileæœ‰ä¸¤æ¡å…³é”®çš„è¯­ä¹‰ï¼š ä¿è¯è¢«volatileä¿®é¥°çš„å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹éƒ½æ˜¯å¯è§çš„ ç¦æ­¢è¿›è¡ŒæŒ‡ä»¤é‡æŽ’åº è¦ç†è§£volatileå…³é”®å­—ï¼Œæˆ‘ä»¬å¾—å…ˆä»ŽJavaçš„çº¿ç¨‹æ¨¡åž‹å¼€å§‹è¯´èµ·ã€‚å¦‚å›¾æ‰€ç¤ºï¼š Javaå†…å­˜æ¨¡åž‹è§„å®šäº†æ‰€æœ‰å­—æ®µï¼ˆè¿™äº›å­—æ®µåŒ…æ‹¬å®žä¾‹å­—æ®µã€é™æ€å­—æ®µç­‰ï¼Œä¸åŒ…æ‹¬å±€éƒ¨å˜é‡ã€æ–¹æ³•å‚æ•°ç­‰ï¼Œå› ä¸ºè¿™äº›æ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œå¹¶ä¸å­˜åœ¨ç«žäº‰ï¼‰éƒ½å­˜åœ¨ä¸»å†…å­˜ä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹ä¼šæœ‰è‡ªå·±çš„å·¥ä½œå†…å­˜ï¼Œå·¥ä½œå†…å­˜é‡Œä¿å­˜äº†çº¿ç¨‹æ‰€ä½¿ç”¨åˆ°çš„å˜é‡åœ¨ä¸»å†…å­˜é‡Œçš„å‰¯æœ¬æ‹·è´ï¼Œçº¿ç¨‹å¯¹å˜é‡çš„æ“ä½œåªèƒ½åœ¨å·¥ä½œå†…å­˜é‡Œè¿›è¡Œï¼Œè€Œä¸èƒ½ç›´æŽ¥è¯»å†™ä¸»å†…å­˜ï¼Œå½“ç„¶ä¸åŒå†…å­˜ä¹‹é—´ä¹Ÿæ— æ³•ç›´æŽ¥è®¿é—®å¯¹æ–¹çš„å·¥ä½œå†…å­˜ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸»å†…å­˜æ˜¯çº¿ç¨‹ä¼ å€¼çš„åª’ä»‹ã€‚ æˆ‘ä»¬æ¥ç†è§£ç¬¬ä¸€å¥è¯ï¼š ä¿è¯è¢«volatileä¿®é¥°çš„å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹éƒ½æ˜¯å¯è§çš„ å¦‚ä½•ä¿è¯å¯è§æ€§ï¼ŸðŸ¤” è¢«volatileä¿®é¥°çš„å˜é‡åœ¨å·¥ä½œå†…å­˜ä¿®æ”¹åŽä¼šè¢«å¼ºåˆ¶å†™å›žä¸»å†…å­˜ï¼Œå…¶ä»–çº¿ç¨‹åœ¨ä½¿ç”¨æ—¶ä¹Ÿä¼šå¼ºåˆ¶ä»Žä¸»å†…å­˜åˆ·æ–°ï¼Œè¿™æ ·å°±ä¿è¯äº†ä¸€è‡´æ€§ã€‚ å…³äºŽâ€œä¿è¯è¢«volatileä¿®é¥°çš„å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹éƒ½æ˜¯å¯è§çš„â€ï¼Œæœ‰ç§å¸¸è§çš„é”™è¯¯ç†è§£ï¼š é”™è¯¯ç†è§£ï¼šç”±äºŽvolatileä¿®é¥°çš„å˜é‡åœ¨å„ä¸ªçº¿ç¨‹é‡Œéƒ½æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥åŸºäºŽvolatileå˜é‡çš„è¿ç®—åœ¨å¤šçº¿ç¨‹å¹¶å‘çš„æƒ…å†µä¸‹æ˜¯å®‰å…¨çš„ã€‚ è¿™å¥è¯çš„å‰åŠéƒ¨åˆ†æ˜¯å¯¹çš„ï¼ŒåŽåŠéƒ¨åˆ†å´é”™äº†ï¼Œå› æ­¤å®ƒå¿˜è®°è€ƒè™‘å˜é‡çš„æ“ä½œæ˜¯å¦å…·æœ‰åŽŸå­æ€§è¿™ä¸€é—®é¢˜ã€‚ ä¸¾ä¸ªæ —å­ 1234567891011121314151617181920private volatile int start = 0;private void volatileKeyword() &#123; Runnable runnable = new Runnable() &#123; @Override public void run() &#123; for (int i = 0; i &lt; 10; i++) &#123; start++; &#125; &#125; &#125;; for (int i = 0; i &lt; 10; i++) &#123; Thread thread = new Thread(runnable); thread.start(); &#125; Log.d(TAG, "start = " + start);&#125; è¿™æ®µä»£ç å¯åŠ¨äº†10ä¸ªçº¿ç¨‹ï¼Œæ¯æ¬¡10æ¬¡è‡ªå¢žï¼ŒæŒ‰é“ç†æœ€ç»ˆç»“æžœåº”è¯¥æ˜¯100ï¼Œä½†æ˜¯ç»“æžœå¹¶éžå¦‚æ­¤ã€‚ ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼ŸðŸ¤” ä»”ç»†çœ‹ä¸€ä¸‹start++ï¼Œå®ƒå…¶å®žå¹¶éžä¸€ä¸ªåŽŸå­æ“ä½œï¼Œç®€å•æ¥çœ‹ï¼Œå®ƒæœ‰ä¸¤æ­¥ï¼š å–å‡ºstartçš„å€¼ï¼Œå› ä¸ºæœ‰volatileçš„ä¿®é¥°ï¼Œè¿™æ—¶å€™çš„å€¼æ˜¯æ­£ç¡®çš„ã€‚ è‡ªå¢žï¼Œä½†æ˜¯è‡ªå¢žçš„æ—¶å€™ï¼Œåˆ«çš„çº¿ç¨‹å¯èƒ½å·²ç»æŠŠstartåŠ å¤§äº†ï¼Œè¿™ç§æƒ…å†µä¸‹å°±æœ‰å¯èƒ½æŠŠè¾ƒå°çš„startå†™å›žä¸»å†…å­˜ä¸­ã€‚ æ‰€ä»¥volatileåªèƒ½ä¿è¯å¯è§æ€§ï¼Œåœ¨ä¸ç¬¦åˆä»¥ä¸‹åœºæ™¯ä¸‹æˆ‘ä»¬ä¾ç„¶éœ€è¦é€šè¿‡åŠ é”æ¥ä¿è¯åŽŸå­æ€§ï¼š è¿ç®—ç»“æžœå¹¶ä¸ä¾èµ–å˜é‡å½“å‰çš„å€¼ï¼Œæˆ–è€…åªæœ‰å•ä¸€çº¿ç¨‹ä¿®æ”¹å˜é‡çš„å€¼ã€‚ï¼ˆè¦ä¹ˆç»“æžœä¸ä¾èµ–å½“å‰å€¼ï¼Œè¦ä¹ˆæ“ä½œæ˜¯åŽŸå­æ€§çš„ï¼Œè¦ä¹ˆåªè¦ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹å˜é‡çš„å€¼ï¼‰ å˜é‡ä¸éœ€è¦ä¸Žå…¶ä»–çŠ¶æ€å˜é‡å…±åŒå‚ä¸Žä¸å˜çº¦æŸ æ¯”æ–¹è¯´æˆ‘ä»¬ä¼šåœ¨çº¿ç¨‹é‡ŒåŠ ä¸ªbooleanå˜é‡ï¼Œæ¥åˆ¤æ–­çº¿ç¨‹æ˜¯å¦åœæ­¢ï¼Œè¿™ç§æƒ…å†µå°±éžå¸¸é€‚åˆä½¿ç”¨volatileã€‚ æˆ‘ä»¬å†æ¥ç†è§£ç¬¬äºŒå¥è¯ã€‚ ç¦æ­¢è¿›è¡ŒæŒ‡ä»¤é‡æŽ’åº ä»€ä¹ˆæ˜¯æŒ‡ä»¤é‡æŽ’åºï¼ŸðŸ¤” æŒ‡ä»¤é‡æŽ’åºæ˜¯å€¼æŒ‡ä»¤ä¹±åºæ‰§è¡Œï¼Œå³åœ¨æ¡ä»¶å…è®¸çš„æƒ…å†µä¸‹ï¼Œç›´æŽ¥è¿è¡Œå½“å‰æœ‰èƒ½åŠ›ç«‹å³æ‰§è¡Œçš„åŽç»­æŒ‡ä»¤ï¼Œé¿å¼€ä¸ºèŽ·å–ä¸‹ä¸€æ¡æŒ‡ä»¤æ‰€éœ€æ•°æ®è€Œé€ æˆçš„ç­‰å¾…ï¼Œé€šè¿‡ä¹±åºæ‰§è¡Œçš„æŠ€æœ¯ï¼Œæä¾›æ‰§è¡Œæ•ˆçŽ‡ã€‚ æŒ‡ä»¤é‡æŽ’åºç»˜åˆ¶è¢«volatileä¿®é¥°çš„å˜é‡çš„èµ‹å€¼æ“ä½œå‰ï¼Œæ·»åŠ ä¸€ä¸ªå†…å­˜å±éšœï¼ŒæŒ‡ä»¤é‡æŽ’åºæ—¶ä¸èƒ½æŠŠåŽé¢çš„æŒ‡ä»¤é‡æŽ’åºåˆ°å†…å­˜å±éšœä¹‹å‰çš„ä½ç½®ã€‚ å…³äºŽæŒ‡ä»¤é‡æŽ’åºä¸æ˜¯æœ¬ç¯‡æ–‡ç« é‡ç‚¹è®¨è®ºçš„å†…å®¹ï¼Œæ›´å¤šç»†èŠ‚å¯ä»¥å‚è€ƒæŒ‡ä»¤é‡æŽ’åºã€‚ å¦‚ä½•é˜²æ­¢åå°„ã€åºåˆ—åŒ–æ”»å‡»å•ä¾‹ï¼Ÿæžšä¸¾å•ä¾‹ 1234567891011121314151617public enum Singleton &#123; INSTANCE &#123; @Override protected void read() &#123; System.out.println("read"); &#125; @Override protected void write() &#123; System.out.println("write"); &#125; &#125;; protected abstract void read(); protected abstract void write();&#125; classæ–‡ä»¶ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354public abstract class Singleton extends Enum&#123; private Singleton(String s, int i) &#123; super(s, i); &#125; protected abstract void read(); protected abstract void write(); public static Singleton[] values() &#123; Singleton asingleton[]; int i; Singleton asingleton1[]; System.arraycopy(asingleton = ENUM$VALUES, 0, asingleton1 = new Singleton[i = asingleton.length], 0, i); return asingleton1; &#125; public static Singleton valueOf(String s) &#123; return (Singleton)Enum.valueOf(singleton/Singleton, s); &#125; Singleton(String s, int i, Singleton singleton) &#123; this(s, i); &#125; public static final Singleton INSTANCE; private static final Singleton ENUM$VALUES[]; static &#123; INSTANCE = new Singleton("INSTANCE", 0) &#123; protected void read() &#123; System.out.println("read"); &#125; protected void write() &#123; System.out.println("write"); &#125; &#125;; ENUM$VALUES = (new Singleton[] &#123; INSTANCE &#125;); &#125;&#125; ç±»çš„ä¿®é¥°abstractï¼Œæ‰€ä»¥æ²¡æ³•å®žä¾‹åŒ–ï¼Œåå°„ä¹Ÿæ— èƒ½ä¸ºåŠ›ã€‚ å…³äºŽçº¿ç¨‹å®‰å…¨çš„ä¿è¯ï¼Œå…¶å®žæ˜¯é€šè¿‡ç±»åŠ è½½æœºåˆ¶æ¥ä¿è¯çš„ï¼Œæˆ‘ä»¬çœ‹çœ‹INSTANCEçš„å®žä¾‹åŒ–æ—¶æœºï¼Œæ˜¯åœ¨staticå—ä¸­ï¼ŒJVMåŠ è½½ç±»çš„è¿‡ç¨‹æ˜¾ç„¶æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ å¯¹äºŽé˜²æ­¢ååºåˆ—åŒ–ç”Ÿæˆæ–°å®žä¾‹çš„é—®é¢˜è¿˜ä¸æ˜¯å¾ˆæ˜Žç™½ï¼Œä¸€èˆ¬çš„æ–¹æ³•æˆ‘ä»¬ä¼šåœ¨è¯¥ç±»ä¸­æ·»åŠ ä¸Šå¦‚ä¸‹æ–¹æ³•ï¼Œä¸è¿‡æžšä¸¾ä¸­ä¹Ÿæ²¡æœ‰æ˜¾ç¤ºçš„å†™æ˜Žè¯¥æ–¹æ³•ã€‚ 1234//readResolve to prevent another instance of Singletonprivate Object readResolve()&#123; return INSTANCE;&#125; çº¿ç¨‹ä¸ºä»€ä¹ˆé˜»å¡žï¼Œä¸ºå’Œè¦ä½¿ç”¨å¤šçº¿ç¨‹ï¼Ÿä½¿ç”¨å¤šçº¿ç¨‹æ›´å¤šçš„æ˜¯ä¸ºäº†æé«˜CPUçš„å¹¶å‘ï¼Œå¯ä»¥è®©CPUåŒäº‹å¤„ç†å¤šä¸ªäº‹æƒ…ï¼Œå¤šçº¿ç¨‹åœºæ™¯çš„ä½¿ç”¨åœºæ™¯ï¼š ä¸ºäº†ä¸è®©è€—æ—¶æ“ä½œé˜»å¡žä¸»çº¿ç¨‹ï¼Œå¼€å¯æ–°çº¿ç¨‹æ‰§è¡Œè€—æ—¶æ“ä½œã€‚ æŸç§ä»»åŠ¡è™½ç„¶è€—æ—¶ä½†æ˜¯ä¸æ¶ˆè€—CPUï¼Œä¾‹å¦‚ï¼šç£ç›˜IOï¼Œå¯ä»¥å¼€å¯æ–°çº¿ç¨‹æ¥åšï¼Œå¯ä»¥æ˜¾è‘—çš„æé«˜æ•ˆçŽ‡ã€‚ ä¼˜å…ˆçº§æ¯”è¾ƒä½Žçš„ä»»åŠ¡ï¼Œä½†æ˜¯éœ€è¦ç»å¸¸åŽ»åšï¼Œä¾‹å¦‚ï¼šGCï¼Œå¯ä»¥å¼€å¯æ–°çº¿ç¨‹æ¥åšã€‚ äº†è§£çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå—ï¼Œæè¿°ä¸€ä¸‹ï¼Ÿçº¿ç¨‹çŠ¶æ€æµç¨‹å›¾å›¾ NEWï¼šåˆ›å»ºçŠ¶æ€ï¼Œçº¿ç¨‹åˆ›å»ºä¹‹åŽï¼Œä½†æ˜¯è¿˜æœªå¯åŠ¨ã€‚ RUNNABLEï¼šè¿è¡ŒçŠ¶æ€ï¼Œå¤„äºŽè¿è¡ŒçŠ¶æ€çš„çº¿ç¨‹ï¼Œä½†æœ‰å¯èƒ½å¤„äºŽç­‰å¾…çŠ¶æ€ï¼Œä¾‹å¦‚ç­‰å¾…CPUã€IOç­‰ã€‚ WAITINGï¼šç­‰å¾…çŠ¶æ€ï¼Œä¸€èˆ¬æ˜¯è°ƒç”¨äº†wait()ã€join()ã€LockSupport.spark()ç­‰æ–¹æ³•ã€‚ TIMED_WAITINGï¼šè¶…æ—¶ç­‰å¾…çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯å¸¦æ—¶é—´çš„ç­‰å¾…çŠ¶æ€ã€‚ä¸€èˆ¬æ˜¯è°ƒç”¨äº†wait(time)ã€join(time)ã€LockSupport.sparkNanos()ã€LockSupport.sparkUnit()ç­‰æ–¹æ³•ã€‚ BLOCKEDï¼šé˜»å¡žçŠ¶æ€ï¼Œç­‰å¾…é”çš„é‡Šæ”¾ï¼Œä¾‹å¦‚è°ƒç”¨äº†synchronizedå¢žåŠ äº†é”ã€‚ TERMINATEDï¼šç»ˆæ­¢çŠ¶æ€ï¼Œä¸€èˆ¬æ˜¯çº¿ç¨‹å®Œæˆä»»åŠ¡åŽé€€å‡ºæˆ–è€…å¼‚å¸¸ç»ˆæ­¢ã€‚ NEWã€WAITINGã€TIMED_WAITINGéƒ½æ¯”è¾ƒå¥½ç†è§£ï¼Œæˆ‘ä»¬é‡ç‚¹è¯´ä¸€è¯´RUNNABLEè¿è¡Œæ€å’ŒBLOCKEDé˜»å¡žæ€ã€‚ çº¿ç¨‹è¿›å…¥RUNNABLEè¿è¡Œæ€ä¸€èˆ¬åˆ†ä¸ºäº”ç§æƒ…å†µï¼š çº¿ç¨‹è°ƒç”¨sleep(time)åŽæŸ¥å‡ºäº†ä¼‘çœ æ—¶é—´ çº¿ç¨‹è°ƒç”¨çš„é˜»å¡žIOå·²ç»è¿”å›žï¼Œé˜»å¡žæ–¹æ³•æ‰§è¡Œå®Œæ¯• çº¿ç¨‹æˆåŠŸçš„èŽ·å–äº†èµ„æºé” çº¿ç¨‹æ­£åœ¨ç­‰å¾…æŸä¸ªé€šçŸ¥ï¼ŒæˆåŠŸçš„èŽ·å¾—äº†å…¶ä»–çº¿ç¨‹å‘å‡ºçš„é€šçŸ¥ çº¿ç¨‹å¤„äºŽæŒ‚èµ·çŠ¶æ€ï¼Œç„¶åŽè°ƒç”¨äº†resume()æ¢å¤æ–¹æ³•ï¼Œè§£é™¤äº†æŒ‚èµ·ã€‚ çº¿ç¨‹è¿›å…¥BLOCKEDé˜»å¡žæ€ä¸€èˆ¬ä¹Ÿåˆ†ä¸ºäº”ç§æƒ…å†µï¼š çº¿ç¨‹è°ƒç”¨sleep()æ–¹æ³•ä¸»åŠ¨æ”¾å¼ƒå æœ‰çš„èµ„æº çº¿ç¨‹è°ƒç”¨äº†é˜»å¡žå¼IOçš„æ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•è¿”å›žå‰ï¼Œè¯¥çº¿ç¨‹è¢«é˜»å¡žã€‚ çº¿ç¨‹è§†å›¾èŽ·å¾—ä¸€ä¸ªèµ„æºé”ï¼Œä½†æ˜¯è¯¥èµ„æºé”æ­£è¢«å…¶ä»–çº¿ç¨‹é”æŒæœ‰ã€‚ çº¿ç¨‹æ­£åœ¨ç­‰å¾…æŸä¸ªé€šçŸ¥ çº¿ç¨‹è°ƒåº¦å™¨è°ƒç”¨suspend()æ–¹æ³•å°†è¯¥çº¿ç¨‹æŒ‚èµ· æˆ‘ä»¬å†æ¥çœ‹çœ‹å’Œçº¿ç¨‹çŠ¶æ€ç›¸å…³çš„ä¸€äº›æ–¹æ³•ã€‚ sleep()æ–¹æ³•è®©å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹åœ¨æŒ‡å®šæ—¶é—´å†…æš‚åœæ‰§è¡Œï¼Œæ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯ä»¥é€šè¿‡Thread.currentThread()æ–¹æ³•èŽ·å–ã€‚ yield()æ–¹æ³•æ”¾å¼ƒçº¿ç¨‹æŒæœ‰çš„CPUèµ„æºï¼Œå°†å…¶è®©ç»™å…¶ä»–ä»»åŠ¡åŽ»å ç”¨CPUæ‰§è¡Œæ—¶é—´ã€‚ä½†æ”¾å¼ƒçš„æ—¶é—´ä¸ç¡®å®šï¼Œæœ‰å¯èƒ½åˆšåˆšæ”¾å¼ƒï¼Œé©¬ä¸ŠåˆèŽ·å¾—CPUæ—¶é—´ç‰‡ã€‚ wait()æ–¹æ³•æ˜¯å½“å‰æ‰§è¡Œä»£ç çš„çº¿ç¨‹è¿›è¡Œç­‰å¾…ï¼Œå°†å½“å‰çº¿ç¨‹æ”¾å…¥é¢„æ‰§è¡Œé˜Ÿåˆ—ï¼Œå¹¶åœ¨wait()æ‰€åœ¨çš„ä»£ç å¤„åœæ­¢æ‰§è¡Œï¼ŒçŸ¥é“æŽ¥åˆ°é€šçŸ¥æˆ–è€…è¢«ä¸­æ–­ä¸ºæ­¢ã€‚è¯¥æ–¹æ³•å¯ä»¥ä½¿å¾—è°ƒç”¨è¯¥æ–¹æ³•çš„çº¿ç¨‹é‡Šæ”¾å…±äº«èµ„æºçš„é”ï¼Œç„¶åŽä»Žè¿è¡ŒçŠ¶æ€é€€å‡ºï¼Œè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œç›´åˆ°å†æ¬¡è¢«å”¤é†’ã€‚è¯¥æ–¹æ³•åªèƒ½åœ¨åŒæ­¥ä»£ç å—é‡Œè°ƒç”¨ï¼Œå¦åˆ™ä¼šæŠ›å‡ºIllegalMonitorStateExceptionå¼‚å¸¸ã€‚ wait(long millis)æ–¹æ³•ç­‰å¾…æŸä¸€æ®µæ—¶é—´å†…æ˜¯å¦æœ‰çº¿ç¨‹å¯¹é”è¿›è¡Œå”¤é†’ï¼Œå¦‚æžœè¶…è¿‡äº†è¿™ä¸ªæ—¶é—´åˆ™è‡ªåŠ¨å”¤é†’ã€‚ notify()æ–¹æ³•ç”¨æ¥é€šçŸ¥é‚£äº›å¯èƒ½ç­‰å¾…è¯¥å¯¹è±¡çš„å¯¹è±¡é”çš„å…¶ä»–çº¿ç¨‹ï¼Œè¯¥æ–¹æ³•å¯ä»¥éšæœºå”¤é†’ç­‰å¾…é˜Ÿåˆ—ä¸­ç­‰åŒä¸€å…±äº«èµ„æºçš„ä¸€ä¸ªçº¿ç¨‹ï¼Œå¹¶ä½¿è¯¥çº¿ç¨‹é€€å‡ºç­‰å¾…é˜Ÿåˆ—ï¼Œè¿›å…¥å¯è¿è¡ŒçŠ¶æ€ã€‚ notifyAll()æ–¹æ³•å¯ä»¥æ˜¯æ‰€æœ‰æ­£åœ¨ç­‰å¾…é˜Ÿåˆ—ä¸­ç­‰å¾…åŒä¸€å…±äº«èµ„æºçš„å…¨éƒ¨çº¿ç¨‹ä»Žç­‰å¾…çŠ¶æ€é€€å‡ºï¼Œè¿›å…¥å¯è¿è¡ŒçŠ¶æ€ï¼Œä¸€èˆ¬ä¼šæ˜¯ä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹å…ˆæ‰§è¡Œï¼Œä½†æ˜¯æ ¹æ®è™šæ‹Ÿæœºçš„å®žçŽ°ä¸åŒï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯éšæœºæ‰§è¡Œã€‚ join()æ–¹æ³•å¯ä»¥è®©è°ƒç”¨å®ƒçš„çº¿ç¨‹æ­£å¸¸æ‰§è¡Œå®ŒæˆåŽï¼Œå†åŽ»æ‰§è¡Œè¯¥çº¿ç¨‹åŽé¢çš„ä»£ç ï¼Œå®ƒå…·æœ‰è®©çº¿ç¨‹æŽ’é˜Ÿçš„ä½œç”¨ã€‚ çº¿ç¨‹æ± äº†è§£å—ï¼Œæœ‰å‡ ç§çº¿ç¨‹æ± ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼ŸExecutorsç±»æä¾›äº†ä¸€ç³»åˆ—å·¥åŽ‚æ–¹æ³•ç”¨æ¥åˆ›å»ºçº¿ç¨‹æ± ã€‚è¿™äº›çº¿ç¨‹æ˜¯é€‚ç”¨äºŽä¸åŒçš„åœºæ™¯ã€‚ newCachedThreadPool()ï¼šæ— ç•Œå¯è‡ªåŠ¨å›žæ”¶çº¿ç¨‹æ± ï¼ŒæŸ¥çœ‹çº¿ç¨‹æ± ä¸­æœ‰æ²¡æœ‰ä»¥å‰å»ºç«‹çš„çº¿ç¨‹ï¼Œå¦‚æžœæœ‰åˆ™å¤ç”¨ï¼Œå¦‚æžœæ²¡æœ‰åˆ™å»ºç«‹ä¸€ä¸ªæ–°çš„çº¿ç¨‹åŠ å…¥æ± ä¸­ï¼Œæ± ä¸­çš„çº¿ç¨‹è¶…è¿‡60sä¸æ´»åŠ¨åˆ™è‡ªåŠ¨ç»ˆæ­¢ã€‚é€‚ç”¨äºŽç”Ÿå‘½å‘¨æœŸæ¯”è¾ƒçŸ­çš„å¼‚æ­¥ä»»åŠ¡ã€‚ newFixedThreadPool(int nThreads)ï¼šå›ºå®šå¤§å°çº¿ç¨‹æ± ï¼Œä¸ŽnewCachedThreadPool()ç±»ä¼¼ï¼Œä½†æ˜¯æ± ä¸­æŒæœ‰å›ºå®šæ•°ç›®çš„çº¿ç¨‹ï¼Œä¸èƒ½éšæ—¶åˆ›å»ºçº¿ç¨‹ï¼Œå¦‚æžœåˆ›å»ºæ–°çº¿ç¨‹æ—¶ï¼Œè¶…è¿‡äº†å›ºå®šçº¿ç¨‹æ•°ï¼Œåˆ™æ”¾åœ¨é˜Ÿåˆ—é‡Œç­‰å¾…ï¼Œç›´åˆ°æ± ä¸­çš„æŸä¸ªçº¿ç¨‹è¢«ç§»é™¤æ—¶ï¼Œæ‰åŠ å…¥æ± ä¸­ã€‚é€‚ç”¨äºŽå¾ˆç¨³å®šã€å¾ˆæ­£è§„çš„å¹¶å‘çº¿ç¨‹ï¼Œå¤šç”¨äºŽæœåŠ¡å™¨ã€‚ newScheduledThreadPool(int corePoolSize)ï¼šå‘¨æœŸä»»åŠ¡çº¿ç¨‹æ± ï¼Œè¯¥çº¿ç¨‹æ± çš„çº¿ç¨‹å¯ä»¥æŒ‰ç…§delayä¾æ¬¡æ‰§è¡Œçº¿ç¨‹ï¼Œä¹Ÿå¯ä»¥å‘¨æœŸæ‰§è¡Œã€‚ newSingleThreadExecutor()ï¼šå•ä¾‹çº¿ç¨‹æ± ï¼Œä»»æ„æ—¶é—´å†…æ± ä¸­åªæœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚ ThreadLocalçš„åŽŸç†äº†è§£å—ï¼ŸThreadLocalæ˜¯ä¸€ä¸ªå…³äºŽåˆ›å»ºçº¿ç¨‹å±€éƒ¨å˜é‡çš„ç±»ã€‚ä½¿ç”¨åœºæ™¯å¦‚ä¸‹æ‰€ç¤ºï¼š å®žçŽ°å•ä¸ªçº¿ç¨‹å•ä¾‹ä»¥åŠå•ä¸ªçº¿ç¨‹ä¸Šä¸‹æ–‡ä¿¡æ¯å­˜å‚¨ï¼Œæ¯”å¦‚äº¤æ˜“idç­‰ã€‚ å®žçŽ°çº¿ç¨‹å®‰å…¨ï¼Œéžçº¿ç¨‹å®‰å…¨çš„å¯¹è±¡ä½¿ç”¨ThreadLocalä¹‹åŽå°±ä¼šå˜å¾—çº¿ç¨‹å®‰å…¨ï¼Œå› ä¸ºæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šæœ‰ä¸€ä¸ªå¯¹åº”çš„å®žä¾‹ã€‚ æ‰¿è½½ä¸€äº›çº¿ç¨‹ç›¸å…³çš„æ•°æ®ï¼Œé¿å…åœ¨æ–¹æ³•ä¸­æ¥å›žä¼ é€’å‚æ•°ã€‚ waitå’Œnotifyæœºåˆ¶ï¼Œæ‰‹å†™ä¸€ä¸‹ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡åž‹ï¼Ÿç”Ÿæˆè€…æ¶ˆè´¹è€…æ¨¡åž‹ ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…åœ¨åŒä¸€æ—¶é—´æ®µå†…å…±ç”¨åŒä¸€ä¸ªå­˜å‚¨ç©ºé—´ï¼Œç”Ÿäº§è€…å¾€å­˜å‚¨ç©ºé—´ä¸­æ·»åŠ äº§å“ï¼Œæ¶ˆè´¹è€…ä»Žå­˜å‚¨ç©ºé—´ä¸­å–èµ°äº§å“ï¼Œå½“å­˜å‚¨ç©ºé—´ä¸ºç©ºæ—¶ï¼Œæ¶ˆè´¹è€…é˜»å¡žï¼Œå½“å­˜å‚¨ç©ºé—´æ»¡æ—¶ï¼Œç”Ÿäº§è€…é˜»å¡žã€‚ wait()å’Œnotify()æ–¹æ³•çš„å®žçŽ°ç”Ÿæˆè€…æ¶ˆè´¹è€…æ¨¡åž‹ï¼Œç¼“å†²åŒºæ»¡å’Œä¸ºç©ºæ—¶éƒ½è°ƒç”¨wait()æ–¹æ³•ç­‰å¾…ï¼Œå½“ç”Ÿäº§è€…ç”Ÿäº§äº†ä¸€ä¸ªäº§å“æˆ–è€…æ¶ˆè´¹è€…æ¶ˆè´¹äº†ä¸€ä¸ªäº§å“ä¹‹åŽä¼šå”¤é†’æ‰€æœ‰çº¿ç¨‹ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465public class ProducerAndCustomerModel &#123; private static Integer count = 0; private static final Integer FULL = 10; private static String LOCK = "lock"; public static void main(String[] args) &#123; ProducerAndCustomerModel PACM = new ProducerAndCustomerModel(); new Thread(PACM.new Producer()).start(); new Thread(PACM.new Consumer()).start(); new Thread(PACM.new Producer()).start(); new Thread(PACM.new Consumer()).start(); new Thread(PACM.new Producer()).start(); new Thread(PACM.new Consumer()).start(); new Thread(PACM.new Producer()).start(); new Thread(PACM.new Consumer()).start(); &#125; class Producer implements Runnable &#123; @Override public void run() &#123; for (int i = 0; i &lt; 10; i++) &#123; try &#123; Thread.sleep(3000); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; synchronized (LOCK) &#123; while (count == FULL) &#123; try &#123; LOCK.wait(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; count++; System.out.println(Thread.currentThread().getName() + "ç”Ÿäº§è€…ç”Ÿäº§ï¼Œç›®å‰æ€»å…±æœ‰" + count); LOCK.notifyAll(); &#125; &#125; &#125; &#125; class Consumer implements Runnable &#123; @Override public void run() &#123; for (int i = 0; i &lt; 10; i++) &#123; try &#123; Thread.sleep(3000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; synchronized (LOCK) &#123; while (count == 0) &#123; try &#123; LOCK.wait(); &#125; catch (Exception e) &#123; &#125; &#125; count--; System.out.println(Thread.currentThread().getName() + "æ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œç›®å‰æ€»å…±æœ‰" + count); LOCK.notifyAll(); &#125; &#125; &#125; &#125;&#125; æ­»é”æ˜¯å¦‚ä½•å‘ç”Ÿçš„ï¼Œå¦‚ä½•é¿å…æ­»é”ï¼Ÿå½“çº¿ç¨‹AæŒæœ‰ç‹¬å é”aï¼Œå¹¶å°è¯•åŽ»èŽ·å–ç‹¬å é”bçš„åŒæ—¶ï¼Œçº¿ç¨‹BæŒæœ‰ç‹¬å é”bï¼Œå¹¶å°è¯•èŽ·å–ç‹¬å é”açš„æƒ…å†µä¸‹ï¼Œå°±ä¼šå‘ç”ŸABä¸¤ä¸ªçº¿ç¨‹ç”±äºŽäº’ç›¸æŒæœ‰å¯¹æ–¹éœ€è¦çš„é”ï¼Œè€Œå‘ç”Ÿçš„é˜»å¡žçŽ°è±¡ï¼Œæˆ‘ä»¬ç§°ä¸ºæ­»é”ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849public class DeadLockDemo &#123; public static void main(String[] args) &#123; // çº¿ç¨‹a Thread td1 = new Thread(new Runnable() &#123; public void run() &#123; DeadLockDemo.method1(); &#125; &#125;); // çº¿ç¨‹b Thread td2 = new Thread(new Runnable() &#123; public void run() &#123; DeadLockDemo.method2(); &#125; &#125;); td1.start(); td2.start(); &#125; public static void method1() &#123; synchronized (String.class) &#123; try &#123; Thread.sleep(2000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println("çº¿ç¨‹aå°è¯•èŽ·å–integer.class"); synchronized (Integer.class) &#123; &#125; &#125; &#125; public static void method2() &#123; synchronized (Integer.class) &#123; try &#123; Thread.sleep(2000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println("çº¿ç¨‹bå°è¯•èŽ·å–String.class"); synchronized (String.class) &#123; &#125; &#125; &#125;&#125; é€ æˆæ­»é”çš„å››ä¸ªæ¡ä»¶ï¼š äº’æ–¥æ¡ä»¶ï¼šä¸€ä¸ªèµ„æºæ¯æ¬¡åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ã€‚ è¯·æ±‚ä¸Žä¿æŒæ¡ä»¶ï¼šä¸€ä¸ªçº¿ç¨‹å› è¯·æ±‚èµ„æºè€Œé˜»å¡žæ—¶ï¼Œå¯¹å·²èŽ·å¾—çš„èµ„æºä¿æŒä¸æ”¾ã€‚ ä¸å‰¥å¤ºæ¡ä»¶ï¼šçº¿ç¨‹å·²èŽ·å¾—çš„èµ„æºï¼Œåœ¨æœªä½¿ç”¨å®Œä¹‹å‰ï¼Œä¸èƒ½å¼ºè¡Œå‰¥å¤ºã€‚ å¾ªçŽ¯ç­‰å¾…æ¡ä»¶ï¼šè‹¥å¹²çº¿ç¨‹ä¹‹é—´å½¢æˆä¸€ç§å¤´å°¾ç›¸æŽ¥çš„å¾ªçŽ¯ç­‰å¾…èµ„æºå…³ç³»ã€‚ åœ¨å¹¶å‘ç¨‹åºä¸­ï¼Œé¿å…äº†é€»è¾‘ä¸­å‡ºçŽ°å¤æ•°ä¸ªçº¿ç¨‹äº’ç›¸æŒæœ‰å¯¹æ–¹çº¿ç¨‹æ‰€éœ€è¦çš„ç‹¬å é”çš„çš„æƒ…å†µï¼Œå°±å¯ä»¥é¿å…æ­»é”ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051public class BreakDeadLockDemo &#123; public static void main(String[] args) &#123; // çº¿ç¨‹a Thread td1 = new Thread(new Runnable() &#123; public void run() &#123; BreakDeadLockDemo.method1(); &#125; &#125;); // çº¿ç¨‹b Thread td2 = new Thread(new Runnable() &#123; public void run() &#123; BreakDeadLockDemo.method2(); &#125; &#125;); td1.start(); td2.start(); &#125; public static void method1() &#123; synchronized (String.class) &#123; try &#123; Thread.sleep(2000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println("çº¿ç¨‹aå°è¯•èŽ·å–integer.class"); synchronized (Integer.class) &#123; System.out.println("çº¿ç¨‹aèŽ·å–åˆ°integer.class"); &#125; &#125; &#125; public static void method2() &#123; // ä¸å†èŽ·å–çº¿ç¨‹aéœ€è¦çš„Integer.classé”ã€‚ synchronized (String.class) &#123; try &#123; Thread.sleep(2000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println("çº¿ç¨‹bå°è¯•èŽ·å–Integer.class"); synchronized (Integer.class) &#123; System.out.println("çº¿ç¨‹bèŽ·å–åˆ°Integer.class"); &#125; &#125; &#125;&#125; äº†è§£Javaæ³¨è§£çš„åŽŸç†å—ï¼Œæ³¨è§£å¦‚ä½•èŽ·å–ï¼Ÿæ³¨è§£ç›¸å½“äºŽä¸€ç§æ ‡è®°ï¼Œåœ¨ç¨‹åºä¸­åŠ äº†æ³¨è§£å°±ç­‰äºŽä¸ºç¨‹åºæ‰“ä¸Šäº†æŸç§æ ‡è®°ã€‚ç¨‹åºå¯ä»¥åˆ©ç”¨Javaçš„åå°„æœºåˆ¶æ¥äº†è§£ä½ çš„ç±»åŠå„ç§å…ƒç´ ä¸Šæœ‰æ— ä½•ç§æ ‡è®°ï¼Œé’ˆå¯¹ä¸åŒçš„æ ‡è®°ï¼Œå°±åŽ»åšç›¸åº”çš„äº‹ä»¶ã€‚æ ‡è®°å¯ä»¥åŠ åœ¨åŒ…ï¼Œç±»ï¼Œå­—æ®µï¼Œæ–¹æ³•ï¼Œæ–¹æ³•çš„å‚æ•°ä»¥åŠå±€éƒ¨å˜é‡ä¸Šã€‚ Stringä¸ºä»€ä¹ˆè¦è®¾è®¡æˆä¸å¯å˜ï¼ŒStringBufferä¸ŽStringBuilderæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ Stringæ˜¯ä¸å¯å˜çš„ï¼ˆä¿®æ”¹Stringæ—¶ï¼Œä¸ä¼šåœ¨åŽŸæœ‰çš„å†…å­˜åœ°å€ä¿®æ”¹ï¼Œè€Œæ˜¯é‡æ–°æŒ‡å‘ä¸€ä¸ªæ–°å¯¹è±¡ï¼‰ï¼ŒStringç”¨finalä¿®é¥°ï¼Œä¸å¯ç»§æ‰¿ï¼ŒStringæœ¬è´¨ä¸Šæ˜¯ä¸ªfinalçš„char[]æ•°ç»„ï¼Œæ‰€ä»¥char[]æ•°ç»„çš„å†…å­˜åœ°å€ä¸ä¼šè¢«ä¿®æ”¹ï¼Œè€Œä¸”Stringä¹Ÿæ²¡æœ‰å¯¹å¤–æš´éœ²ä¿®æ”¹char[]æ•°ç»„çš„æ–¹æ³•ã€‚ä¸å¯å˜æ€§å¯ä»¥ä¿è¯çº¿ç¨‹å®‰å…¨ä»¥åŠå­—ç¬¦ä¸²ä¸²å¸¸é‡æ± çš„å®žçŽ°ã€‚ StringBufferæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ StringBuilderæ˜¯éžçº¿ç¨‹å®‰å…¨çš„ã€‚ Javaé‡Œçš„å¹‚ç­‰æ€§äº†è§£å—ï¼Ÿ å¹‚ç­‰æ€§åŽŸæœ¬æ˜¯æ•°å­¦ä¸Šçš„ä¸€ä¸ªæ¦‚å¿µï¼Œå³ï¼šf(x) = f(f(x))ï¼Œå¯¹åŒä¸€ä¸ªç³»ç»Ÿï¼Œä½¿ç”¨åŒæ ·çš„æ¡ä»¶ï¼Œä¸€æ¬¡è¯·æ±‚å’Œé‡å¤çš„å¤šæ¬¡è¯·æ±‚å¯¹ç³»ç»Ÿèµ„æºçš„å½±å“æ˜¯ä¸€è‡´çš„ã€‚ å¹‚ç­‰æ€§æœ€ä¸ºå¸¸è§çš„åº”ç”¨å°±æ˜¯ç”µå•†çš„å®¢æˆ·ä»˜æ¬¾ï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æžœä½ åœ¨ä»˜æ¬¾çš„æ—¶å€™å› ä¸ºç½‘ç»œç­‰å„ç§é—®é¢˜å¤±è´¥äº†ï¼Œç„¶åŽåˆåŽ»é‡å¤çš„ä»˜äº†ä¸€æ¬¡ï¼Œæ˜¯ä¸€ç§å¤šä¹ˆç³Ÿç³•çš„ä½“éªŒã€‚å¹‚ç­‰æ€§å°±æ˜¯ä¸ºäº†è§£å†³è¿™æ ·çš„é—®é¢˜ã€‚ å®žçŽ°å¹‚ç­‰æ€§å¯å¯ä»¥ä½¿ç”¨Tokenæœºåˆ¶ã€‚ æ ¸å¿ƒæ€æƒ³æ˜¯ä¸ºæ¯ä¸€æ¬¡æ“ä½œç”Ÿæˆä¸€ä¸ªå”¯ä¸€æ€§çš„å‡­è¯ï¼Œä¹Ÿå°±æ˜¯tokenã€‚ä¸€ä¸ªtokenåœ¨æ“ä½œçš„æ¯ä¸€ä¸ªé˜¶æ®µåªæœ‰ä¸€æ¬¡æ‰§è¡Œæƒï¼Œä¸€æ—¦æ‰§è¡ŒæˆåŠŸåˆ™ä¿å­˜æ‰§è¡Œç»“æžœã€‚å¯¹é‡å¤çš„è¯·æ±‚ï¼Œè¿”å›žåŒä¸€ä¸ªç»“æžœã€‚ ä¾‹å¦‚ï¼šç”µå•†å¹³å°ä¸Šçš„è®¢å•idå°±æ˜¯æœ€é€‚åˆçš„tokenã€‚å½“ç”¨æˆ·ä¸‹å•æ—¶ï¼Œä¼šç»åŽ†å¤šä¸ªçŽ¯èŠ‚ï¼Œæ¯”å¦‚ç”Ÿæˆè®¢å•ï¼Œå‡åº“å­˜ï¼Œå‡ä¼˜æƒ åˆ¸ç­‰ç­‰ã€‚æ¯ä¸€ä¸ªçŽ¯èŠ‚æ‰§è¡Œæ—¶éƒ½å…ˆæ£€æµ‹ä¸€ä¸‹è¯¥è®¢å•idæ˜¯å¦å·²ç»æ‰§è¡Œè¿‡è¿™ä¸€æ­¥éª¤ï¼Œå¯¹æœªæ‰§è¡Œçš„è¯·æ±‚ï¼Œæ‰§è¡Œæ“ä½œå¹¶ç¼“å­˜ç»“æžœï¼Œè€Œå¯¹å·²ç»æ‰§è¡Œè¿‡çš„idï¼Œåˆ™ç›´æŽ¥è¿”å›žä¹‹å‰çš„æ‰§è¡Œç»“æžœï¼Œä¸åšä»»ä½•æ“ä½œã€‚è¿™æ ·å¯ä»¥åœ¨æœ€å¤§ç¨‹åº¦ä¸Šé¿å…æ“ä½œçš„é‡å¤æ‰§è¡Œé—®é¢˜ï¼Œç¼“å­˜èµ·æ¥çš„æ‰§è¡Œç»“æžœä¹Ÿèƒ½ç”¨äºŽäº‹åŠ¡çš„æŽ§åˆ¶ç­‰ã€‚ Javaæ³›åž‹äº†è§£å—ï¼ŒçŸ¥é“å®ƒçš„è¿è¡Œæœºåˆ¶å—ï¼Ÿ æ³›åž‹æ˜¯ä¸ºäº†å‚æ•°åŒ–ç±»åž‹ã€‚ ä¸ºä»€ä¹ˆä½¿ç”¨æ³›åž‹ï¼Ÿ ç›¸å¯¹äºŽä½¿ç”¨Objectè¿™ç§ç®€å•ç²—æš´çš„æ–¹å¼ï¼Œæ³›åž‹æä¾›äº†ä¸€ç§å‚æ•°åŒ–çš„èƒ½åŠ›ï¼Œä½¿å¾—æ•°æ®çš„ç±»åž‹å¯ä»¥åƒå‚æ•°ä¸€æ ·è¢«ä¼ é€’è¿›æ¥ï¼Œè¿™æä¾›äº†ä¸€ç§æ‰©å±•èƒ½åŠ›ã€‚ å½“æ•°æ®ç±»åž‹ç¡®å®šä»¥åŽï¼Œæä¾›äº†ä¸€ç§ç±»åž‹æ£€æµ‹æœºåˆ¶ï¼Œåªæœ‰ç›¸åŒ¹é…çš„æ•°æ®æ‰å¯ä»¥æ­£å¸¸èµ‹å€¼ï¼Œå¦åˆ™ç¼–è¯‘é”™è¯¯ï¼Œå¢žå¼ºäº†å®‰å…¨æ€§ã€‚ æ³›åž‹æé«˜äº†ä»£ç çš„å¯è¯»æ€§ï¼Œä¸å¿…ç­‰åˆ°è¿è¡Œæ—¶é‡‡å–æ‰§è¡Œç±»åž‹è½¬æ¢ï¼Œåœ¨ç¼–å†™ä»£ç é˜¶æ®µï¼Œç¨‹åºå‘˜å°±å¯ä»¥é€šè¿‡å‚æ•°ä¹¦å†™æ­£ç¡®çš„æ•°æ®ç±»åž‹ã€‚ é™¤äº†ç”¨ è¡¨ç¤ºæ³›åž‹å¤–ï¼Œè¿˜æœ‰ &lt;?&gt; è¿™ç§å½¢å¼ã€‚? è¢«ç§°ä¸ºé€šé…ç¬¦ã€‚ &lt;?&gt; è¢«ç§°ä½œæ— é™å®šçš„é€šé…ç¬¦ã€‚ &lt;? extends T&gt; è¢«ç§°ä½œæœ‰ä¸Šé™çš„é€šé…ç¬¦ã€‚ &lt;? super T&gt; è¢«ç§°ä½œæœ‰ä¸‹é™çš„é€šé…ç¬¦ã€‚ Javaé‡Œçš„åå°„ä¸ºä½•ä¼šæ¶ˆè€—æ€§èƒ½ï¼Ÿåå°„æ…¢ä¸»è¦å› ä¸ºåå°„æ˜¯åŠ¨æ€ç±»åž‹ï¼Œè¿™æ ·å¯¼è‡´æŠŠåœ¨zhuang Javaçš„ç±»åž‹æ“¦é™¤ï¼ŒçŸ¥é“å®ƒçš„åŽŸç†å—ï¼Ÿ æ³›åž‹ä¿¡æ¯åªå­˜åœ¨ä»£ç ç¼–è¯‘é˜¶æ®µï¼Œåœ¨è¿›å…¥JVMä¹‹å‰ï¼Œä¸Žæ³›åž‹ç›¸å…³çš„ä¿¡æ¯éƒ½ä¼šè¢«æ“¦é™¤æŽ‰ã€‚ åœ¨ç±»åž‹æ“¦é™¤çš„æ—¶å€™ï¼Œå¦‚æžœæ³›åž‹ç±»é‡Œçš„ç±»åž‹å‚æ•°æ²¡æœ‰æŒ‡å®šä¸Šé™ï¼Œä¾‹å¦‚ï¼šï¼Œåˆ™ä¼šè¢«è½¬æˆObjectç±»åž‹ï¼Œå¦‚æžœæŒ‡å®šäº†ä¸Šé™ï¼Œä¾‹å¦‚ï¼šï¼Œåˆ™ä¼šè¢«ä¼ æ¢æˆå¯¹åº”çš„ç±»åž‹ä¸Šé™ã€‚ é—­åŒ…äº†è§£å—ï¼ŒJavaé‡Œæœ‰é—­åŒ…å—ï¼Ÿ ã€Œå‡½æ•°ã€å’Œã€Œå‡½æ•°å†…éƒ¨èƒ½è®¿é—®åˆ°çš„å˜é‡ã€ï¼ˆä¹Ÿå«çŽ¯å¢ƒï¼‰çš„æ€»å’Œï¼Œå°±æ˜¯ä¸€ä¸ªé—­åŒ…ã€‚ 12345678fun main(args: Array&lt;String&gt;) &#123; test&#125;val test = if (5 &gt; 3) &#123; print("yes")&#125; else &#123; print("no")&#125; Lambdaè¡¨è¾¾å¼äº†è§£å—ï¼Ÿ Lambda è¡¨è¾¾å¼ä¿—ç§°åŒ¿åå‡½æ•°ã€‚Kotlin çš„ Lambdaè¡¨è¾¾å¼æ›´â€œçº¯ç²¹â€ä¸€ç‚¹ï¼Œ å› ä¸ºå®ƒæ˜¯çœŸæ­£æŠŠLambdaæŠ½è±¡ä¸ºäº†ä¸€ç§ç±»åž‹ï¼Œè€Œ Java 8 çš„ Lambda åªæ˜¯å•æ–¹æ³•åŒ¿åæŽ¥å£å®žçŽ°çš„è¯­æ³•ç³–ç½¢äº†ã€‚ 1234567val printMsg = &#123; msg: String -&gt; println(msg) &#125;fun main(args: Array&lt;String&gt;) &#123; printMsg("hello")&#125; é«˜é˜¶å‡½æ•°äº†è§£å—ï¼Ÿ å½“å®šä¹‰ä¸€ä¸ªé—­åŒ…ä½œä¸ºå‚æ•°çš„å‡½æ•°ï¼Œç§°è¿™ä¸ªå‡½æ•°ä¸ºé«˜é˜¶å‡½æ•°ã€‚ 1234567891011fun main(args: Array&lt;String&gt;) &#123; log("world", printMsg)&#125;val printMsg = &#123; str: String -&gt; println(str)&#125;val log = &#123; str: String, printLog: (String) -&gt; Unit -&gt; printLog(str)&#125;]]></content>
      <tags>
        <tag>Interview</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidé¢è¯•é¢˜é›†]]></title>
    <url>%2F2018%2F04%2F08%2FAndroid%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%86%2F</url>
    <content type="text"><![CDATA[ä¸€æ¬¡æ¬¡çš„æŒ‚äºŽä¸€é¢è®©æˆ‘ç­‹ç–²åŠ›ç«­â€¦æ„è¯†åˆ°è‡ªå·±å­˜åœ¨çœ¼é«˜æ‰‹ä½Žçš„çŠ¶æ€â€¦å‡†å¤‡é‡æ–°ä¸Šè·¯å¤¯å®žåŸºç¡€æœ¬ç‰‡æ–‡ç« éƒ¨åˆ† Fork from android-interviewå¹¶ä¸”åœ¨æ­¤åŸºç¡€ä¸Šå¯¹ä¸€äº›é—®é¢˜è¿›è¡Œäº†è¡¥å……ã€æ·±å…¥å‰–æž æ‰‹ç”»ä¸€ä¸‹Androidç³»ç»Ÿæž¶æž„å›¾ï¼Œæè¿°ä¸€ä¸‹å„ä¸ªå±‚æ¬¡çš„ä½œç”¨ï¼ŸAndroidç³»ç»Ÿæž¶æž„å›¾ ä»Žä¸Šåˆ°ä¸‹ä¾æ¬¡åˆ†ä¸ºå…­å±‚ï¼š åº”ç”¨æ¡†æž¶å±‚ è¿›ç¨‹é€šä¿¡å±‚ ç³»ç»ŸæœåŠ¡å±‚ Androidè¿è¡Œæ—¶å±‚ ç¡¬ä»¶æŠ½è±¡å±‚ Linuxå†…æ ¸å±‚ Activityã€Viewã€Window ä¸‰è€…å…³ç³»è¿™ä¸ªé—®é¢˜çœŸçš„å¾ˆä¸å¥½å›žç­”ï¼Œæ‰€ä»¥è¿™é‡Œå…ˆæ¥ä¸ªç®—æ˜¯æ¯”è¾ƒæ°å½“çš„æ¯”å–»æ¥å½¢å®¹ä¸‹å®ƒä»¬çš„å…³ç³»ã€‚Activity åƒä¸€ä¸ªå·¥åŒ (Control Unit)ï¼ŒWindow åƒçª—æˆ·(æ‰¿è½½æ¨¡åž‹)ï¼ŒView åƒçª—èŠ±(æ˜¾ç¤ºè§†å›¾)ï¼ŒLayoutInflater åƒå‰ªåˆ€ï¼ŒXml é…ç½®åƒçª—èŠ±å›¾çº¸ã€‚ Activity æž„é€ çš„æ—¶å€™ä¼šåˆå§‹åŒ–ä¸€ä¸ª Windowï¼Œå‡†ç¡®çš„è¯´æ˜¯ PhoneWindowã€‚ è¿™ä¸ª PhoneWindow æœ‰ä¸€ä¸ªâ€œViewRootâ€ï¼Œè¿™ä¸ªâ€œViewRootâ€æ˜¯ä¸€ä¸ª View æˆ–è€…è¯´ ViewGroupï¼Œæ˜¯æœ€åˆè¯•çš„æ ¹è§†å›¾ â€œViewRootâ€é€šè¿‡ addView æ–¹æ³•æ¥ä¸€ä¸ªä¸ªçš„æ·»åŠ  Viewã€‚æ¯”å¦‚ TextViewï¼ŒButton ç­‰ è¿™äº› View çš„äº‹ä»¶ç›‘å¬ï¼Œæ˜¯ç”± WindowManagerService æ¥æŽ¥å—æ¶ˆæ¯ï¼Œå¹¶ä¸”å›žè°ƒ Activity å‡½æ•°ã€‚æ¯”å¦‚ onClickListenerï¼ŒonKeyDown ç­‰ã€‚ å››ç§ LaunchMode åŠå…¶ä½¿ç”¨åœºæ™¯standard æ¨¡å¼è¿™æ˜¯é»˜è®¤æ¨¡å¼ï¼Œæ¯æ¬¡æ¿€æ´» Activity æ—¶éƒ½ä¼šåˆ›å»º Activity å®žä¾‹ï¼Œå¹¶æ”¾å…¥ä»»åŠ¡æ ˆä¸­ã€‚ä½¿ç”¨åœºæ™¯ï¼šå¤§å¤šæ•° Activity singleTop æ¨¡å¼å¦‚æžœåœ¨ä»»åŠ¡çš„æ ˆé¡¶æ­£å¥½å­˜åœ¨è¯¥ Activity çš„å®žä¾‹ï¼Œå°±é‡ç”¨è¯¥å®žä¾‹(ä¼šè°ƒç”¨å®žä¾‹çš„ onNewIntent())ï¼Œå¦åˆ™å°±ä¼šåˆ›å»ºæ–°çš„å®žä¾‹å¹¶æ”¾å…¥æ ˆé¡¶ï¼Œå³ä½¿æ ˆä¸­å·²ç»å­˜åœ¨è¯¥ Activity çš„å®žä¾‹ï¼Œåªè¦ä¸åœ¨æ ˆé¡¶ï¼Œå°±ä¼šåˆ›å»ºæ–°çš„å®žä¾‹ã€‚ä½¿ç”¨åœºæ™¯å¦‚æ–°é—»ç±»æˆ–è€…é˜…è¯»ç±» App çš„å†…å®¹é¡µé¢ã€‚ singleTask æ¨¡å¼å¦‚æžœåœ¨æ ˆä¸­å·²ç»æœ‰è¯¥ Activity çš„å®žä¾‹ï¼Œå°±é‡ç”¨è¯¥å®žä¾‹(ä¼šè°ƒç”¨å®žä¾‹çš„ onNewIntent() )ã€‚é‡ç”¨æ—¶ï¼Œä¼šè®©è¯¥å®žä¾‹å›žåˆ°æ ˆé¡¶ï¼Œå› æ­¤åœ¨å®ƒä¸Šé¢çš„å®žä¾‹å°†ä¼šè¢«ç§»å‡ºæ ˆã€‚å¦‚æžœæ ˆä¸­ä¸å­˜åœ¨è¯¥å®žä¾‹ï¼Œå°†ä¼šåˆ›å»ºæ–°çš„å®žä¾‹æ”¾å…¥æ ˆä¸­ã€‚ä½¿ç”¨åœºæ™¯å¦‚æµè§ˆå™¨çš„ä¸»ç•Œé¢ã€‚ä¸ç®¡ä»Žå¤šå°‘ä¸ªåº”ç”¨å¯åŠ¨æµè§ˆå™¨ï¼Œåªä¼šå¯åŠ¨ä¸»ç•Œé¢ä¸€æ¬¡ï¼Œå…¶ä½™æƒ…å†µéƒ½ä¼šèµ°onNewIntentï¼Œå¹¶ä¸”ä¼šæ¸…ç©ºä¸»ç•Œé¢ä¸Šé¢çš„å…¶ä»–é¡µé¢ã€‚ singleInstance æ¨¡å¼åœ¨ä¸€ä¸ªæ–°æ ˆä¸­åˆ›å»ºè¯¥ Activity çš„å®žä¾‹ï¼Œå¹¶è®©å¤šä¸ªåº”ç”¨å…±äº«è¯¥æ ˆä¸­çš„è¯¥ Activity å®žä¾‹ã€‚ä¸€æ—¦è¯¥æ¨¡å¼çš„ Activity å®žä¾‹å·²ç»å­˜åœ¨äºŽæŸä¸ªæ ˆä¸­ï¼Œä»»ä½•åº”ç”¨å†æ¿€æ´»è¯¥ Activity æ—¶éƒ½ä¼šé‡ç”¨è¯¥æ ˆä¸­çš„å®žä¾‹(ä¼šè°ƒç”¨å®žä¾‹çš„ onNewIntent())ã€‚å…¶æ•ˆæžœç›¸å½“äºŽå¤šä¸ªåº”ç”¨å…±äº«ä¸€ä¸ªåº”ç”¨ï¼Œä¸ç®¡è°æ¿€æ´»è¯¥ Activity éƒ½ä¼šè¿›å…¥åŒä¸€ä¸ªåº”ç”¨ä¸­ã€‚ä½¿ç”¨åœºæ™¯ï¼šå¦‚é—¹é“ƒæé†’ï¼Œå°†é—¹é“ƒæé†’ä¸Žé—¹é“ƒè®¾ç½®åˆ†ç¦»ã€‚singleInstance ä¸è¦ç”¨äºŽä¸­é—´é¡µé¢ï¼Œå¦‚æžœç”¨äºŽä¸­é—´é¡µé¢ï¼Œè·³è½¬ä¼šæœ‰é—®é¢˜ï¼Œæ¯”å¦‚ï¼šA -&gt; B(singleInstance) -&gt; Cï¼Œå®Œå…¨é€€å‡ºåŽï¼Œå†æ¬¡å¯åŠ¨ï¼Œé¦–å…ˆæ‰“å¼€çš„æ˜¯ Bã€‚ Activityå¦‚ä¸ŽServiceé€šä¿¡ï¼Ÿå¯ä»¥é€šè¿‡bindServiceçš„æ–¹å¼ï¼Œå…ˆåœ¨Activityé‡Œå®žçŽ°ä¸€ä¸ªServiceConnectionæŽ¥å£ï¼Œå¹¶å°†è¯¥æŽ¥å£ä¼ é€’ç»™bindService()æ–¹æ³•ï¼Œåœ¨ServiceConnectionæŽ¥å£çš„onServiceConnected()æ–¹æ³•é‡Œæ‰§è¡Œç›¸å…³æ“ä½œã€‚æ³¨ï¼šåªæœ‰activities,services,å’Œcontentproviderså¯ä»¥ç»‘å®šåˆ°ä¸€ä¸ªserviceâ€”ä½ ä¸èƒ½ä»Žä¸€ä¸ªbroadcastreceiverç»‘å®šåˆ°serviceï¼Ž Serviceçš„ç”Ÿå‘½å‘¨æœŸä¸Žå¯åŠ¨æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ startService()ï¼šå¼€å¯Serviceï¼Œè°ƒç”¨è€…é€€å‡ºåŽServiceä»ç„¶å­˜åœ¨ã€‚ bindService()ï¼šå¼€å¯Serviceï¼Œè°ƒç”¨è€…é€€å‡ºåŽServiceä¹Ÿéšå³é€€å‡ºã€‚ Serviceç”Ÿå‘½å‘¨æœŸï¼š åªæ˜¯ç”¨startService()å¯åŠ¨æœåŠ¡ï¼šonCreate() -&gt; onStartCommand() -&gt; onDestory åªæ˜¯ç”¨bindService()ç»‘å®šæœåŠ¡ï¼šonCreate() -&gt; onBind() -&gt; onUnBind() -&gt; onDestory åŒæ—¶ä½¿ç”¨startService()å¯åŠ¨æœåŠ¡ä¸ŽbindService()ç»‘å®šæœåŠ¡ï¼šonCreate() -&gt; onStartCommnad() -&gt; onBind() -&gt; onUnBind() -&gt; onDestory Serviceå…ˆstartå†bindå¦‚ä½•å…³é—­serviceï¼Œä¸ºä»€ä¹ˆbindServiceå¯ä»¥è·ŸActivityç”Ÿå‘½å‘¨æœŸè”åŠ¨ï¼Ÿ bindServiceç”Ÿå‘½å‘¨æœŸ é€šè¿‡IBinderä»Žä½ çš„å®¢æˆ·ç«¯ç»‘å®šåˆ°ä¸€ä¸ªserviceï¼Œä½ å¿…é¡»ï¼š ï¼‘å®žçŽ°ServiceConnection. ä½ çš„å®žçŽ°å¿…é¡»é‡å†™ä¸¤ä¸ªå›žè°ƒæ–¹æ³•ï¼š onServiceConnected() ç³»ç»Ÿè°ƒç”¨è¿™ä¸ªæ¥ä¼ é€åœ¨serviceçš„onBind()ä¸­è¿”å›žçš„IBinderï¼Ž OnServiceDisconnected() Androidç³»ç»Ÿåœ¨åŒserviceçš„è¿žæŽ¥æ„å¤–ä¸¢å¤±æ—¶è°ƒç”¨è¿™ä¸ªï¼Žæ¯”å¦‚å½“serviceå´©æºƒäº†æˆ–è¢«å¼ºæ€äº†ï¼Žå½“å®¢æˆ·ç«¯è§£é™¤ç»‘å®šæ—¶ï¼Œè¿™ä¸ªæ–¹æ³•ä¸ä¼šè¢«è°ƒç”¨ï¼Ž ï¼’è°ƒç”¨bindService()ï¼Œä¼ ç»™å®ƒServiceConnectionçš„å®žçŽ°ï¼Ž ï¼“å½“ç³»ç»Ÿè°ƒç”¨ä½ çš„onServiceConnected()æ–¹æ³•æ—¶ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨æŽ¥å£å®šä¹‰çš„æ–¹æ³•ä»¬å¼€å§‹è°ƒç”¨serviceäº†ï¼Ž ï¼”è¦ä¸Žserviceæ–­å¼€è¿žæŽ¥ï¼Œè°ƒç”¨unbindService()ï¼Ž å½“ä½ çš„å®¢æˆ·ç«¯è¢«é”€æ¯ï¼Œå®ƒå°†ä»Žserviceè§£é™¤ç»‘å®šï¼Œä½†æ˜¯ä½ å¿…é¡»æ€»æ˜¯åœ¨ä½ å®Œæˆä¸Žserviceçš„äº¤äº’æ—¶æˆ–å½“ä½ çš„activityæš‚åœäºŽæ˜¯serviceåœ¨ä¸è¢«ä½¿ç”¨æ—¶å¯ä»¥å…³é—­æ­¤ä¸¤ç§æƒ…å†µä¸‹è§£ é™¤ç»‘å®šï¼Ž(ä¸‹é¢ä¼šè®¨è®ºæ›´å¤šåœ¨é€‚å½“çš„æ—¶å€™ç»‘å®šå’Œè§£é™¤ç»‘å®šçš„é—®é¢˜ï¼Ž ä½¿ç”¨è¿™ä¸ªServiceConnectionï¼Œå®¢æˆ·ç«¯å¯ä»¥ç»‘å®šåˆ°ä¸€ä¸ªserviceï¼Œé€šè¿‡æŠŠå®ƒä¼ ç»™bindService()ï¼Žä¾‹å¦‚ï¼š 12Intent intent = new Intent(this, LocalService.class);bindService(intent,mConnection, Context.BIND_AUTO_CREATE); ç¬¬ä¸€ä¸ªbindService()çš„å‚æ•°æ˜¯ä¸€ä¸ªæ˜Žç¡®æŒ‡å®šäº†è¦ç»‘å®šçš„serviceçš„Intentï¼Ž ç¬¬äºŒä¸ªå‚æ•°æ˜¯ServiceConnectionå¯¹è±¡ï¼Ž ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ ‡å¿—ï¼Œå®ƒè¡¨æ˜Žç»‘å®šä¸­çš„æ“ä½œï¼Žå®ƒä¸€èˆ¬åº”æ˜¯BIND_AUTO_CREATEï¼Œè¿™æ ·å°±ä¼šåœ¨serviceä¸å­˜åœ¨æ—¶åˆ›å»ºä¸€ä¸ªï¼Žå…¶å®ƒå¯é€‰çš„å€¼æ˜¯BIND_DEBUG_UNBINDå’ŒBIND_NOT_FOREGROUND,ä¸æƒ³æŒ‡å®šæ—¶è®¾ä¸º0å³å¯ã€‚ è¡¥å……äº‹é¡¹ä¸‹é¢æ˜¯ä¸€äº›å…³äºŽç»‘å®šåˆ°serviceçš„é‡è¦äº‹é¡¹ï¼š ä½ æ€»æ˜¯éœ€è¦æ•èŽ·DeadObjectExceptionå¼‚å¸¸ï¼Žå®ƒä¼šåœ¨è¿žæŽ¥è¢«æ‰“æ–­æ—¶æŠ›å‡ºï¼Žè¿™æ˜¯è¢«è¿œç¨‹æ–¹æ³•æŠ›å‡ºçš„å”¯ä¸€å¼‚å¸¸ï¼Ž å¯¹è±¡å¼•ç”¨è®¡æ•°æ˜¯è·¨è¿›ç¨‹çš„ä½œç”¨çš„ï¼Ž ä½ åº”è¯¥åœ¨å®¢æˆ·ç«¯çš„ç”Ÿå‘½æœŸå†…ä½¿ç»‘å®šå’Œè§£é™¤ç»‘å®šé…å¯¹è¿›è¡Œï¼Œä¾‹å¦‚ï¼š å¦‚æžœä½ éœ€è¦åœ¨ä½ çš„activityå¯è§æ—¶ä¸Žserviceäº¤äº’ï¼Œä½ åº”è¯¥åœ¨onStart()ç»‘å®šå¹¶åœ¨onStop()ä¸­è§£é™¤ç»‘å®šï¼Ž å¦‚æžœä½ æƒ³è®©ä½ çš„activityå³ä½¿åœ¨å®ƒåœæ­¢æ—¶ä¹Ÿèƒ½æŽ¥æ”¶å›žåº”ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨onCreate()ä¸­ç»‘å®šå¹¶åœ¨onDestroy()ä¸­è§£é™¤ç»‘å®šï¼Žæ³¨æ„è¿™æ„å‘³ç€ä½ çš„activityéœ€è¦ä½¿ç”¨åœ¨è‡ªå·±æ•´ ä¸ªè¿è¡ŒæœŸé—´ä½¿ç”¨service(å³ä½¿ä½äºŽåŽå°)ï¼Œæ‰€ä»¥å¦‚æžœserviceåœ¨å¦ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œé‚£ä¹ˆä½ å¢žåŠ äº†è¿™ä¸ªè¿›ç¨‹çš„è´Ÿæ‹…è€Œä½¿å®ƒå˜å¾—æ›´å®¹æ˜“è¢«ç³»ç»Ÿæ€æŽ‰ï¼Ž æ³¨ï¼šä½ ä¸€èˆ¬ä¸åº”è¯¥åœ¨ä½ çš„activityçš„onResume()å’ŒonPause()ä¸­ç»‘å®šå’Œè§£é™¤ç»‘å®šåˆ°serviceï¼Œå› ä¸ºè¿™äº›å›žè°ƒæ–¹æ³•,å‡ºçŽ°åœ¨æ¯ä¸ªç”Ÿå‘½æœŸå˜åŒ–ä¸­ï¼Œå¹¶ä¸”ä½ éœ€è¦ä½¿å‘ç”Ÿåœ¨è¿™ äº›å˜åŒ–ä¸­çš„å¤„ç†æœ€å°åŒ–ï¼Žè¿˜æœ‰ï¼Œå¦‚æžœä½ åº”ç”¨ä¸­çš„å¤šä¸ªactivityç»‘å®šåˆ°åŒä¸€ä¸ªserviceï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªå˜åŒ–å‘ç”Ÿåœ¨å…¶ä¸­ä¸¤ä¸ªactivityä¹‹é—´ï¼Œserviceå¯èƒ½åœ¨å½“å‰activityè§£é™¤ç»‘ å®š(pauseä¸­)å’Œä¸‹ä¸€ä¸ªç»‘å®šå‰(rusumeä¸­)è¢«é”€æ¯åˆé‡å»ºï¼Ž bindServiceå’ŒstartServiceæ··åˆä½¿ç”¨æ—¶ å¦‚æžœå…ˆbindService,å†startService:åœ¨bindçš„Activityé€€å‡ºçš„æ—¶å€™,Serviceä¼šæ‰§è¡ŒunBindæ–¹æ³•è€Œä¸æ‰§è¡ŒonDestoryæ–¹æ³•,å› ä¸ºæœ‰startServiceæ–¹æ³•è°ƒç”¨è¿‡,æ‰€ä»¥Activityä¸ŽServiceè§£é™¤ç»‘å®šåŽä¼šæœ‰ä¸€ä¸ªä¸Žè°ƒç”¨è€…æ²¡æœ‰å…³è¿žçš„Serviceå­˜åœ¨ å¦‚æžœå…ˆbindService,å†startService,å†è°ƒç”¨Context.stopServiceServiceçš„onDestoryæ–¹æ³•ä¸ä¼šç«‹åˆ»æ‰§è¡Œ,å› ä¸ºæœ‰ä¸€ä¸ªä¸ŽServiceç»‘å®šçš„Activity,ä½†æ˜¯åœ¨Activityé€€å‡ºçš„æ—¶å€™,ä¼šæ‰§è¡ŒonDestory,å¦‚æžœè¦ç«‹åˆ»æ‰§è¡ŒstopService,å°±å¾—å…ˆè§£é™¤ç»‘å®š æŠŠä¸Šé¢çš„â€å¦‚æžœå…ˆbindService,å†startServiceâ€æ¢æˆâ€å¦‚æžœå…ˆstartService,å†bindServiceâ€,ç»“æžœæ˜¯ä¸€æ ·çš„ é—®é¢˜:å¦‚æžœåœ¨ä¸€ä¸ªActivityçš„onCreateæ–¹æ³•ä¸­,å…ˆbindService(serviceIntent,conn,Context.BIND_AUTO_CREATE);å†startService(serviceIntent);é€€å‡ºè¿™ä¸ªActivityæ—¶,ä¼šæ‰§è¡ŒonUnBindä½†æ˜¯å†æ¬¡è¿›å…¥è¿™ä¸ªActivityçš„æ—¶å€™,ä¸ºä»€ä¹ˆä¸æ‰§è¡ŒonBindæ–¹æ³•äº†?åªæœ‰åœ¨è¿™ä¸ªServiceé”€æ¯åŽ(æ‰§è¡ŒonDestory),å†è¿›è¿™ä¸ªActivityæ‰ä¼šæ‰§è¡ŒonBindï¼Œè¿˜æœ‰å°±æ˜¯å½“æœ‰ä¸¤ä¸ªå®¢æˆ·ç«¯æ—¶ï¼Œåœ¨ç¬¬ä¸€ä¸ªå®¢æˆ·ç«¯startServieå¯åŠ¨æœåŠ¡å†bindServiceç»‘å®šæœåŠ¡,è¿™æ—¶è·³åˆ°ç¬¬äºŒä¸ªå®¢æˆ·ç«¯é‡Œï¼ˆå¯åŠ¨æ—¶ä¼šè°ƒç”¨onBind())ï¼Œå†å®¢æˆ·ç«¯startServieå¯åŠ¨æœåŠ¡å†bindServiceç»‘å®šæœåŠ¡ï¼Œå¯åŠ¨æ—¶ä¸ä¼šè°ƒç”¨ç”¨onBind()äº†(å› ä¸ºä¹‹å‰å®¢æˆ·ç«¯å·²ç»å¯åŠ¨åŽæ²¡æœ‰onDestory()é”€æ¯Serviceï¼Œæ‰€ä»¥å†å®¢æˆ·ç«¯ç¬¬äºŒæ¬¡ç»‘å®šæœåŠ¡æ—¶ï¼Œåªä¼šè¿”å›žIBinderå¯¹è±¡ç»™onServiceConnected())ï¼Œè€Œä¸”è¦æ³¨æ„çš„æ˜¯å½“ï¼Œå½“ç¬¬ä¸€ä¸ªæœåŠ¡å¯åŠ¨å¹¶ç»‘å®šä¸€ä¸ªæœåŠ¡æ—¶ï¼Œå†è·³åŽ»ç¬¬äºŒä¸ªæœåŠ¡ç«¯å¯åŠ¨å¹¶ç»‘å®šè¿™ä¸ªæœåŠ¡æ—¶ï¼Œç¬¬äºŒä¸ªæœåŠ¡ç«¯å†è§£ç»‘æ—¶ï¼Œä¸ä¼šè°ƒç”¨onUnbind()ï¼Œåªæœ‰å›žåˆ°ç¬¬ä¸€ä¸ªå®¢æˆ·ç«¯æ—¶ï¼Œè§£ç»‘è¿™æ˜¯æ‰ä¼šè°ƒç”¨onUnbind(),é¡ºåºåè¿‡æ¥ç»“æžœæ˜¯ä¸€æ ·çš„ã€‚å¾—å‡ºä¸€ä¸ªç»“è®ºæ˜¯ï¼šå½“ä¸€ä¸ªæœåŠ¡æ²¡è¢«onDestory()é”€æ¯ä¹‹å‰ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªå¯åŠ¨å®ƒçš„å®¢æˆ·ç«¯èƒ½è°ƒç”¨å®ƒçš„onBind()å’ŒonUnbind()ã€‚ å¹¿æ’­åˆ†ä¸ºå“ªå‡ ç§ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ æ™®é€šå¹¿æ’­ï¼šè°ƒç”¨sendBroadcast()å‘é€ï¼Œæœ€å¸¸ç”¨çš„å¹¿æ’­ã€‚ æœ‰åºå¹¿æ’­ï¼šè°ƒç”¨sendOrderedBroadcast()ï¼Œå‘å‡ºåŽ»çš„å¹¿æ’­ä¼šè¢«å¹¿æ’­æŽ¥å—è€…æŒ‰ç…§é¡ºåºæŽ¥æ”¶ï¼Œå¹¿æ’­æŽ¥æ”¶è€…æŒ‰ç…§Priorityå±žæ€§å€¼ä»Žå¤§-å°æŽ’åºï¼ŒPriorityå±žæ€§ç›¸åŒè€…ï¼ŒåŠ¨æ€æ³¨å†Œçš„å¹¿æ’­ä¼˜å…ˆï¼Œå¹¿æ’­æŽ¥æ”¶è€…è¿˜å¯ä»¥é€‰æ‹©å¯¹å¹¿æ’­è¿›è¡Œæˆªæ–­å’Œä¿®æ”¹ã€‚ å¹¿æ’­çš„ä¸¤ç§æ³¨å†Œæ–¹å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ é™æ€æ³¨å†Œï¼šå¸¸é©»ç³»ç»Ÿï¼Œä¸å—ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå½±å“ï¼Œå³ä¾¿åº”ç”¨é€€å‡ºï¼Œå¹¿æ’­è¿˜æ˜¯å¯ä»¥è¢«æŽ¥æ”¶ï¼Œè€—ç”µã€å å†…å­˜ã€‚ åŠ¨æ€æ³¨å†Œï¼šéžå¸¸é©»ï¼Œè·Ÿéšç»„ä»¶çš„ç”Ÿå‘½å˜åŒ–ï¼Œç»„ä»¶ç»“æŸï¼Œå¹¿æ’­ç»“æŸã€‚åœ¨ç»„ä»¶ç»“æŸå‰ï¼Œéœ€è¦å…ˆç§»é™¤å¹¿æ’­ï¼Œå¦åˆ™å®¹æ˜“é€ æˆå†…å­˜æ³„æ¼ã€‚ å¹¿æ’­å‘é€å’ŒæŽ¥æ”¶çš„åŽŸç†äº†è§£å—ï¼Ÿ ç»§æ‰¿BroadcastReceiverï¼Œé‡å†™onReceive()æ–¹æ³•ã€‚ é€šè¿‡Binderæœºåˆ¶å‘ActivityManagerServiceæ³¨å†Œå¹¿æ’­ã€‚ é€šè¿‡Binderæœºåˆ¶å‘ActivityMangerServiceå‘é€å¹¿æ’­ã€‚ ActivityManagerServiceæŸ¥æ‰¾ç¬¦åˆç›¸åº”æ¡ä»¶çš„å¹¿æ’­ï¼ˆIntentFilter/Permissionï¼‰çš„BroadcastReceiverï¼Œå°†å¹¿æ’­å‘é€åˆ°BroadcastReceiveræ‰€åœ¨çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­ã€‚ BroadcastReceiveræ‰€åœ¨æ¶ˆæ¯é˜Ÿåˆ—æ‹¿åˆ°æ­¤å¹¿æ’­åŽï¼Œå›žè°ƒå®ƒçš„onReceive()æ–¹æ³•ã€‚ å¹¿æ’­ä¼ è¾“çš„æ•°æ®æ˜¯å¦æœ‰é™åˆ¶ï¼Œæ˜¯å¤šå°‘ï¼Œä¸ºä»€ä¹ˆè¦é™åˆ¶ï¼ŸContentProviderã€ContentResolverä¸ŽContentObserverä¹‹é—´çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ ContentProviderï¼šç®¡ç†æ•°æ®ï¼Œæä¾›æ•°æ®çš„å¢žåˆ æ”¹æŸ¥æ“ä½œï¼Œæ•°æ®æºå¯ä»¥æ˜¯æ•°æ®åº“ã€æ–‡ä»¶ã€XMLã€ç½‘ç»œç­‰ï¼ŒContentProviderä¸ºè¿™äº›æ•°æ®çš„è®¿é—®æä¾›äº†ç»Ÿä¸€çš„æŽ¥å£ï¼Œå¯ä»¥ç”¨æ¥åšè¿›ç¨‹é—´æ•°æ®å…±äº«ã€‚ ContentResolverï¼šContentResolverå¯ä»¥ä¸åŒURIæ“ä½œä¸åŒçš„ContentProviderä¸­çš„æ•°æ®ï¼Œå¤–éƒ¨è¿›ç¨‹å¯ä»¥é€šè¿‡ContentResolverä¸ŽContentProviderè¿›è¡Œäº¤äº’ã€‚ ContentObserverï¼šè§‚å¯ŸContentProviderä¸­çš„æ•°æ®å˜åŒ–ï¼Œå¹¶å°†å˜åŒ–é€šçŸ¥ç»™å¤–ç•Œã€‚ é‡åˆ°è¿‡å“ªäº›å…³äºŽFragmentçš„é—®é¢˜ï¼Œå¦‚ä½•å¤„ç†çš„ï¼Ÿ getActivity()ç©ºæŒ‡é’ˆï¼šè¿™ç§æƒ…å†µä¸€èˆ¬å‘ç”Ÿåœ¨åœ¨å¼‚æ­¥ä»»åŠ¡é‡Œè°ƒç”¨getActivity()ï¼Œè€ŒFragmentå·²ç»onDetach()ï¼Œæ­¤æ—¶å°±ä¼šæœ‰ç©ºæŒ‡é’ˆï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åœ¨Fragmenté‡Œä½¿ç”¨ä¸€ä¸ªå…¨å±€å˜é‡mActivityï¼Œåœ¨onAttach()æ–¹æ³•é‡Œèµ‹å€¼ï¼Œè¿™æ ·å¯èƒ½ä¼šå¼•èµ·å†…å­˜æ³„æ¼ï¼Œä½†æ˜¯å¼‚æ­¥ä»»åŠ¡æ²¡æœ‰åœæ­¢çš„æƒ…å†µä¸‹æœ¬èº«å°±å·²ç»å¯èƒ½å†…å­˜æ³„æ¼ï¼Œç›¸æ¯”ç›´æŽ¥crashï¼Œè¿™ç§æ–¹å¼æ˜¾å¾—æ›´å¦¥å½“ä¸€äº›ã€‚ Fragmentè§†å›¾é‡å ï¼šåœ¨ç±»onCreate()çš„æ–¹æ³•åŠ è½½Fragmentï¼Œå¹¶ä¸”æ²¡æœ‰åˆ¤æ–­saveInstanceState==nullæˆ–if(findFragmentByTag(mFragmentTag) == null)ï¼Œå¯¼è‡´é‡å¤åŠ è½½äº†åŒä¸€ä¸ªFragmentå¯¼è‡´é‡å ã€‚ï¼ˆPSï¼šreplaceæƒ…å†µä¸‹ï¼Œå¦‚æžœæ²¡æœ‰åŠ å…¥å›žé€€æ ˆï¼Œåˆ™ä¸åˆ¤æ–­ä¹Ÿä¸ä¼šé€ æˆé‡å ï¼Œä½†å»ºè®®è¿˜æ˜¯ç»Ÿä¸€åˆ¤æ–­ä¸‹ï¼‰ 12345678@Override protected void onCreate(@Nullable Bundle savedInstanceState) &#123;// åœ¨é¡µé¢é‡å¯æ—¶ï¼ŒFragmentä¼šè¢«ä¿å­˜æ¢å¤ï¼Œè€Œæ­¤æ—¶å†åŠ è½½Fragmentä¼šé‡å¤åŠ è½½ï¼Œå¯¼è‡´é‡å  ; if(saveInstanceState == null)&#123; // æˆ–è€… if(findFragmentByTag(mFragmentTag) == null) // æ­£å¸¸æƒ…å†µä¸‹åŽ» åŠ è½½æ ¹Fragment &#125; &#125; Androidé‡Œçš„Intentä¼ é€’çš„æ•°æ®æœ‰å¤§å°é™åˆ¶å—ï¼Œå¦‚ä½•è§£å†³ï¼ŸIntentä¼ é€’æ•°æ®å¤§å°çš„é™åˆ¶å¤§æ¦‚åœ¨1Må·¦å³ï¼Œè¶…è¿‡è¿™ä¸ªé™åˆ¶å°±ä¼šé™é»˜å´©æºƒã€‚å¤„ç†æ–¹å¼å¦‚ä¸‹ï¼š è¿›ç¨‹å†…ï¼šEventBusï¼Œæ–‡ä»¶ç¼“å­˜ã€ç£ç›˜ç¼“å­˜ã€‚ è¿›ç¨‹é—´ï¼šé€šè¿‡ContentProviderè¿›è¡Œæ¬¾è¿›ç¨‹æ•°æ®å…±äº«å’Œä¼ é€’ã€‚ æè¿°ä¸€ä¸‹Androidçš„äº‹ä»¶åˆ†å‘æœºåˆ¶ï¼ŸAndroidäº‹ä»¶åˆ†å‘æœºåˆ¶çš„æœ¬è´¨ï¼šäº‹ä»¶ä»Žå“ªä¸ªå¯¹è±¡å‘å‡ºï¼Œç»è¿‡å“ªäº›å¯¹è±¡ï¼Œæœ€ç»ˆç”±å“ªä¸ªå¯¹è±¡å¤„ç†äº†è¯¥äº‹ä»¶ã€‚æ­¤å¤„å¯¹è±¡æŒ‡çš„æ˜¯Activityã€Windowä¸ŽViewã€‚ Androidäº‹ä»¶çš„åˆ†å‘é¡ºåºï¼šActivityï¼ˆWindowï¼‰ -&gt; ViewGroup -&gt; View Androidäº‹ä»¶çš„åˆ†å‘ä¸»è¦ç”±ä¸‰ä¸ªæ–¹æ³•æ¥å®Œæˆï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123456789101112131415// çˆ¶Viewè°ƒç”¨dispatchTouchEvent()å¼€å§‹åˆ†å‘äº‹ä»¶public boolean dispatchTouchEvent(MotionEvent event)&#123; boolean consume = false; // çˆ¶Viewå†³å®šæ˜¯å¦æ‹¦æˆªäº‹ä»¶ if(onInterceptTouchEvent(event))&#123; // çˆ¶Viewè°ƒç”¨onTouchEvent(event)æ¶ˆè´¹äº‹ä»¶ï¼Œå¦‚æžœè¯¥æ–¹æ³•è¿”å›žtrueï¼Œè¡¨ç¤º // è¯¥Viewæ¶ˆè´¹äº†è¯¥äº‹ä»¶ï¼ŒåŽç»­è¯¥äº‹ä»¶åºåˆ—çš„äº‹ä»¶ï¼ˆDownã€Moveã€Upï¼‰å°†ä¸ä¼šåœ¨ä¼ é€’ // è¯¥å…¶ä»–Viewã€‚ consume = onTouchEvent(event); &#125;else&#123; // è°ƒç”¨å­Viewçš„dispatchTouchEvent(event)æ–¹æ³•ç»§ç»­åˆ†å‘äº‹ä»¶ consume = child.dispatchTouchEvent(event); &#125; return consume;&#125; Touch äº‹ä»¶åˆ†å‘ä¸­åªæœ‰ä¸¤ä¸ªä¸»è§’ï¼šViewGroup å’Œ Viewã€‚ViewGroup åŒ…å« onInterceptTouchEventã€dispatchTouchEventã€onTouchEvent ä¸‰ä¸ªç›¸å…³äº‹ä»¶ã€‚View åŒ…å« dispatchTouchEventã€onTouchEvent ä¸¤ä¸ªç›¸å…³äº‹ä»¶ã€‚å…¶ä¸­ ViewGroup åˆç»§æ‰¿äºŽ Viewã€‚ ViewGroup å’Œ View ç»„æˆäº†ä¸€ä¸ªæ ‘çŠ¶ç»“æž„ï¼Œæ ¹èŠ‚ç‚¹ä¸º Activity å†…éƒ¨åŒ…å«çš„ä¸€ä¸ª ViewGroupã€‚ è§¦æ‘¸äº‹ä»¶ç”± Action Downã€Action Moveã€Action Up ç»„æˆï¼Œå…¶ä¸­ä¸€æ¬¡å®Œæ•´çš„è§¦æ‘¸äº‹ä»¶ä¸­ï¼ŒDown å’Œ Up éƒ½åªæœ‰ä¸€ä¸ªï¼ŒMove æœ‰è‹¥å¹²ä¸ªï¼Œå¯ä»¥ä¸º 0 ä¸ªã€‚ å½“ Activity æŽ¥æ”¶åˆ° Touch äº‹ä»¶æ—¶ï¼Œå°†éåŽ†å­ View è¿›è¡Œ Down äº‹ä»¶çš„åˆ†å‘ã€‚ViewGroup çš„éåŽ†å¯ä»¥çœ‹æˆæ˜¯é€’å½’çš„ã€‚åˆ†å‘çš„ç›®çš„æ˜¯ä¸ºäº†æ‰¾åˆ°çœŸæ­£è¦å¤„ç†æœ¬æ¬¡å®Œæ•´è§¦æ‘¸äº‹ä»¶çš„ Viewï¼Œè¿™ä¸ª View ä¼šåœ¨ onTouchEvent ç»“æžœè¿”å›ž trueã€‚ å½“æŸä¸ªå­ View è¿”å›ž true æ—¶ï¼Œä¼šç»ˆæ­¢ Down äº‹ä»¶çš„åˆ†å‘ï¼ŒåŒæ—¶åœ¨ ViewGroup ä¸­è®°å½•è¯¥å­ Viewã€‚æŽ¥ä¸‹åŽ»çš„ Move å’Œ Up äº‹ä»¶å°†ç”±è¯¥å­ View ç›´æŽ¥è¿›è¡Œå¤„ç†ã€‚ç”±äºŽå­ View æ˜¯ä¿å­˜åœ¨ ViewGroup ä¸­çš„ï¼Œå¤šå±‚ ViewGroup çš„èŠ‚ç‚¹ç»“æž„æ—¶ï¼Œä¸Šçº§ ViewGroup ä¿å­˜çš„ä¼šæ˜¯çœŸå®žå¤„ç†äº‹ä»¶çš„ View æ‰€åœ¨çš„ ViewGroup å¯¹è±¡ï¼šå¦‚ ViewGroup0-ViewGroup1-TextView çš„ç»“æž„ä¸­ï¼ŒTextView è¿”å›žäº† trueï¼Œå®ƒå°†è¢«ä¿å­˜åœ¨ ViewGroup1 ä¸­ï¼Œè€Œ ViewGroup1 ä¹Ÿä¼šè¿”å›ž trueï¼Œè¢«ä¿å­˜åœ¨ ViewGroup0 ä¸­ã€‚å½“ Move å’Œ Up äº‹ä»¶æ¥æ—¶ï¼Œä¼šå…ˆä»Ž ViewGroup0 ä¼ é€’è‡³ ViewGroup1ï¼Œå†ç”± ViewGroup1 ä¼ é€’è‡³ TextViewã€‚ å½“ ViewGroup ä¸­æ‰€æœ‰å­ View éƒ½ä¸æ•èŽ· Down äº‹ä»¶æ—¶ï¼Œå°†è§¦å‘ ViewGroup è‡ªèº«çš„ onTouch äº‹ä»¶ã€‚è§¦å‘çš„æ–¹å¼æ˜¯è°ƒç”¨ super.dispatchTouchEvent å‡½æ•°ï¼Œå³çˆ¶ç±» View çš„ dispatchTouchEvent æ–¹æ³•ã€‚åœ¨æ‰€æœ‰å­ View éƒ½ä¸å¤„ç†çš„æƒ…å†µä¸‹ï¼Œè§¦å‘ Activity çš„ onTouchEvent æ–¹æ³•ã€‚ onInterceptTouchEvent æœ‰ä¸¤ä¸ªä½œç”¨ï¼š1.æ‹¦æˆª Down äº‹ä»¶çš„åˆ†å‘ã€‚2.ç»ˆæ­¢ Up å’Œ Move äº‹ä»¶å‘ç›®æ ‡ View ä¼ é€’ï¼Œä½¿å¾—ç›®æ ‡ View æ‰€åœ¨çš„ ViewGroup æ•èŽ· Up å’Œ Move äº‹ä»¶ã€‚ æè¿°ä¸€ä¸‹Viewçš„ç»˜åˆ¶åŽŸç†ï¼Ÿ Viewçš„ç»˜åˆ¶æµç¨‹ä¸»è¦åˆ†ä¸ºä¸‰æ­¥ï¼š onMeasureï¼šæµ‹é‡è§†å›¾çš„å¤§å°ï¼Œä»Žé¡¶å±‚çˆ¶Viewåˆ°å­Viewé€’å½’è°ƒç”¨measure()æ–¹æ³•ï¼Œmeasure()è°ƒç”¨onMeasure()æ–¹æ³•ï¼ŒonMeasure()æ–¹æ³•å®Œæˆç»˜åˆ¶å·¥ä½œã€‚ onLayoutï¼šç¡®å®šè§†å›¾çš„ä½ç½®ï¼Œä»Žé¡¶å±‚çˆ¶Viewåˆ°å­Viewé€’å½’è°ƒç”¨layout()æ–¹æ³•ï¼Œçˆ¶Viewå°†ä¸Šä¸€æ­¥measure()æ–¹æ³•å¾—åˆ°çš„å­Viewçš„å¸ƒå±€å¤§å°å’Œå¸ƒå±€å‚æ•°ï¼Œå°†å­Viewæ”¾åœ¨åˆé€‚çš„ä½ç½®ä¸Šã€‚ onDrawï¼šç»˜åˆ¶æœ€ç»ˆçš„è§†å›¾ï¼Œé¦–å…ˆViewRootåˆ›å»ºä¸€ä¸ªCanvaså¯¹è±¡ï¼Œç„¶åŽè°ƒç”¨onDraw()æ–¹æ³•è¿›è¡Œç»˜åˆ¶ã€‚onDraw()æ–¹æ³•çš„ç»˜åˆ¶æµç¨‹ä¸ºï¼šâ‘  ç»˜åˆ¶è§†å›¾èƒŒæ™¯ã€‚â‘¡ ç»˜åˆ¶ç”»å¸ƒçš„å›¾å±‚ã€‚ â‘¢ ç»˜åˆ¶Viewå†…å®¹ã€‚â‘£ ç»˜åˆ¶å­è§†å›¾ï¼Œå¦‚æžœæœ‰çš„è¯ã€‚â‘¤ è¿˜åŽŸå›¾å±‚ã€‚â‘¥ ç»˜åˆ¶æ»šåŠ¨æ¡ã€‚ requestLayout()ã€invalidate()ä¸ŽpostInvalidate()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ requestLayout()ï¼šè¯¥æ–¹æ³•ä¼šé€’å½’è°ƒç”¨çˆ¶çª—å£çš„requestLayout()æ–¹æ³•ï¼Œç›´åˆ°è§¦å‘ViewRootImplçš„performTraversals()æ–¹æ³•ï¼Œæ­¤æ—¶mLayoutRequestedeä¸ºtrueï¼Œä¼šè§¦å‘onMesaure()ä¸ŽonLayout()æ–¹æ³•ï¼Œä¸ä¸€å®šä¼šè§¦å‘onDraw()æ–¹æ³•ã€‚ invalidate()ï¼šè¯¥æ–¹æ³•é€’å½’è°ƒç”¨çˆ¶Viewçš„invalidateChildInParent()æ–¹æ³•ï¼Œç›´åˆ°è°ƒç”¨ViewRootImplçš„invalidateChildInParent()æ–¹æ³•ï¼Œæœ€ç»ˆè§¦å‘ViewRootImplçš„performTraversals()æ–¹æ³•ï¼Œæ­¤æ—¶mLayoutRequestedeä¸ºfalseï¼Œä¸ä¼šè§¦å‘onMesaure()ä¸ŽonLayout()æ–¹æ³•ï¼Œå½“æ—¶ä¼šè§¦å‘onDraw()æ–¹æ³•ã€‚ postInvalidate()ï¼šè¯¥æ–¹æ³•åŠŸèƒ½å’Œinvalidate()ä¸€æ ·ï¼Œåªæ˜¯å®ƒå¯ä»¥åœ¨éžUIçº¿ç¨‹ä¸­è°ƒç”¨ã€‚ ä¸€èˆ¬è¯´æ¥éœ€è¦é‡æ–°å¸ƒå±€å°±è°ƒç”¨requestLayout()æ–¹æ³•ï¼Œéœ€è¦é‡æ–°ç»˜åˆ¶å°±è°ƒç”¨invalidate()æ–¹æ³•ã€‚ Scrollerç”¨è¿‡å—ï¼Œäº†è§£å®ƒçš„åŽŸç†å—ï¼Ÿ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356//å®žä¾‹åŒ–Scrollerå¯¹è±¡ï¼Œåœ¨è‡ªå®šä¹‰Viewä¸­ï¼ŒmContextå¯ä»¥åœ¨è‡ªå®šä¹‰Viewçš„æž„é€ æ–¹æ³•ä¸­èŽ·å–Scroller mScroller = new Scroller(mContext);//åœ¨ä¸€ä¸ªè‡ªå®šä¹‰Viewä¸­å®žçŽ°è¯¥æ–¹æ³•ï¼Œæ–¹æ³•åå¯ä»¥è‡ªå®šä¹‰public void smoothScrollTo(int destX,int destY)&#123; int scrollX = getScrollX(); int scrollY = getScrollY(); int dx = destX - scrollX; int dy = destY - scrollY; //å‰ä¸¤ä¸ªå‚æ•°è¡¨ç¤ºèµ·å§‹ä½ç½®ï¼Œç¬¬ä¸‰ç¬¬å››ä¸ªå‚æ•°è¡¨ç¤ºä½ç§»é‡ï¼Œæœ€åŽä¸€ä¸ªå‚æ•°è¡¨ç¤ºæ—¶é—´ mScroller.startScroll(scrollX,scrollY,dx,dy,1000); invalidate();&#125;//è‡ªå®šä¹‰Viewä¸­é‡å†™è¯¥æ–¹æ³•@Overridepublic void computeScroll()&#123; if(mScroller.computeScrollOffset())&#123; scrollTo(mScroller.getCurrX(),mScroller.getCurrY()); postInvalidate(); &#125;&#125;``` Scrolleræ»‘åŠ¨çš„æ•´ä¸ªè¿‡ç¨‹(å›¾ç‰‡Fromï¼šhttps://img-blog.csdn.net/20160919174056964)&lt;img src="https://img-blog.csdn.net/20160919174056964"/&gt;### äº†è§£APKçš„æ‰“åŒ…æµç¨‹å—ï¼Œæè¿°ä¸€ä¸‹ï¼ŸAndroidçš„åŒ…æ–‡ä»¶APKåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šä»£ç å’Œèµ„æºï¼Œæ‰€ä»¥æ‰“åŒ…æ–¹é¢ä¹Ÿåˆ†ä¸ºèµ„æºæ‰“åŒ…å’Œä»£ç æ‰“åŒ…ä¸¤ä¸ªæ–¹é¢ï¼Œè¿™ç¯‡æ–‡ç« å°±æ¥åˆ†æžèµ„æºå’Œä»£ç çš„ç¼–è¯‘æ‰“åŒ…åŽŸç†ã€‚APKæ•´ä½“çš„çš„æ‰“åŒ…æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/native/vm/apk_package_flow.png"/&gt;å…·ä½“è¯´æ¥ï¼š1. é€šè¿‡AAPTå·¥å…·è¿›è¡Œèµ„æºæ–‡ä»¶ï¼ˆåŒ…æ‹¬AndroidManifest.xmlã€å¸ƒå±€æ–‡ä»¶ã€å„ç§xmlèµ„æºç­‰ï¼‰çš„æ‰“åŒ…ï¼Œç”ŸæˆR.javaæ–‡ä»¶ã€‚2. é€šè¿‡AIDLå·¥å…·å¤„ç†AIDLæ–‡ä»¶ï¼Œç”Ÿæˆç›¸åº”çš„Javaæ–‡ä»¶ã€‚3. é€šè¿‡Javacå·¥å…·ç¼–è¯‘é¡¹ç›®æºç ï¼Œç”ŸæˆClassæ–‡ä»¶ã€‚4. é€šè¿‡DXå·¥å…·å°†æ‰€æœ‰çš„Classæ–‡ä»¶è½¬æ¢æˆDEXæ–‡ä»¶ï¼Œè¯¥è¿‡ç¨‹ä¸»è¦å®ŒæˆJavaå­—èŠ‚ç è½¬æ¢æˆDalvikå­—èŠ‚ç ï¼ŒåŽ‹ç¼©å¸¸é‡æ± ä»¥åŠæ¸…é™¤å†—ä½™ä¿¡æ¯ç­‰å·¥ä½œã€‚5. é€šè¿‡ApkBuilderå·¥å…·å°†èµ„æºæ–‡ä»¶ã€DEXæ–‡ä»¶æ‰“åŒ…ç”ŸæˆAPKæ–‡ä»¶ã€‚6. åˆ©ç”¨KeyStoreå¯¹ç”Ÿæˆçš„APKæ–‡ä»¶è¿›è¡Œç­¾åã€‚7. å¦‚æžœæ˜¯æ­£å¼ç‰ˆçš„APKï¼Œè¿˜ä¼šåˆ©ç”¨ZipAlignå·¥å…·è¿›è¡Œå¯¹é½å¤„ç†ï¼Œå¯¹é½çš„è¿‡ç¨‹å°±æ˜¯å°†APKæ–‡ä»¶ä¸­æ‰€æœ‰çš„èµ„æºæ–‡ä»¶ä¸¾ä¾‹æ–‡ä»¶çš„èµ·å§‹è·ç¦»éƒ½åç§»4å­—èŠ‚çš„æ•´æ•°å€ï¼Œè¿™æ ·é€šè¿‡å†…å­˜æ˜ å°„è®¿é—®APKæ–‡ä»¶çš„é€Ÿåº¦ä¼šæ›´å¿«ã€‚### äº†è§£APKçš„å®‰è£…æµç¨‹å—ï¼Œæè¿°ä¸€ä¸‹ï¼ŸAPKçš„å®‰è£…æµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/app/package/apk_install_structure.png" width="600"/&gt;1. å¤åˆ¶APKåˆ°/data/appç›®å½•ä¸‹ï¼Œè§£åŽ‹å¹¶æ‰«æå®‰è£…åŒ…ã€‚2. èµ„æºç®¡ç†å™¨è§£æžAPKé‡Œçš„èµ„æºæ–‡ä»¶ã€‚3. è§£æžAndroidManifestæ–‡ä»¶ï¼Œå¹¶åœ¨/data/data/ç›®å½•ä¸‹åˆ›å»ºå¯¹åº”çš„åº”ç”¨æ•°æ®ç›®å½•ã€‚4. ç„¶åŽå¯¹dexæ–‡ä»¶è¿›è¡Œä¼˜åŒ–ï¼Œå¹¶ä¿å­˜åœ¨dalvik-cacheç›®å½•ä¸‹ã€‚5. å°†AndroidManifestæ–‡ä»¶è§£æžå‡ºçš„å››å¤§ç»„ä»¶ä¿¡æ¯æ³¨å†Œåˆ°PackageManagerServiceä¸­ã€‚5. å®‰è£…å®ŒæˆåŽï¼Œå‘é€å¹¿æ’­ã€‚### å½“ç‚¹å‡»ä¸€ä¸ªåº”ç”¨å›¾æ ‡ä»¥åŽï¼Œéƒ½å‘ç”Ÿäº†ä»€ä¹ˆï¼Œæè¿°ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ï¼Ÿç‚¹å‡»åº”ç”¨å›¾æ ‡åŽä¼šåŽ»å¯åŠ¨åº”ç”¨çš„LauncherActivityï¼Œå¦‚æžœLancerActivityæ‰€åœ¨çš„è¿›ç¨‹æ²¡æœ‰åˆ›å»ºï¼Œè¿˜ä¼šåˆ›å»ºæ–°è¿›ç¨‹ï¼Œæ•´ä½“çš„æµç¨‹å°±æ˜¯ä¸€ä¸ªActivityçš„å¯åŠ¨æµç¨‹ã€‚Activityçš„å¯åŠ¨æµç¨‹å›¾ï¼ˆæ”¾å¤§å¯æŸ¥çœ‹ï¼‰å¦‚ä¸‹æ‰€ç¤ºï¼š![Activityçš„å¯åŠ¨æµç¨‹å›¾](https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/app/component/activity_start_flow.png)æ•´ä¸ªæµç¨‹æ¶‰åŠçš„ä¸»è¦è§’è‰²æœ‰ï¼š- Instrumentation: ç›‘æŽ§åº”ç”¨ä¸Žç³»ç»Ÿç›¸å…³çš„äº¤äº’è¡Œä¸ºã€‚- AMSï¼šç»„ä»¶ç®¡ç†è°ƒåº¦ä¸­å¿ƒï¼Œä»€ä¹ˆéƒ½ä¸å¹²ï¼Œä½†æ˜¯ä»€ä¹ˆéƒ½ç®¡ã€‚- ActivityStarterï¼šActivityå¯åŠ¨çš„æŽ§åˆ¶å™¨ï¼Œå¤„ç†Intentä¸ŽFlagå¯¹Activityå¯åŠ¨çš„å½±å“ï¼Œå…·ä½“è¯´æ¥æœ‰ï¼š1 å¯»æ‰¾ç¬¦åˆå¯åŠ¨æ¡ä»¶çš„Activityï¼Œå¦‚æžœæœ‰å¤šä¸ªï¼Œè®©ç”¨æˆ·é€‰æ‹©ï¼›2 æ ¡éªŒå¯åŠ¨å‚æ•°çš„åˆæ³•æ€§ï¼›3 è¿”å›žintå‚æ•°ï¼Œä»£è¡¨Activityæ˜¯å¦å¯åŠ¨æˆåŠŸã€‚- ActivityStackSupervisiorï¼šè¿™ä¸ªç±»çš„ä½œç”¨ä½ ä»Žå®ƒçš„åå­—å°±å¯ä»¥çœ‹å‡ºæ¥ï¼Œå®ƒç”¨æ¥ç®¡ç†ä»»åŠ¡æ ˆã€‚- ActivityStackï¼šç”¨æ¥ç®¡ç†ä»»åŠ¡æ ˆé‡Œçš„Activityã€‚- ActivityThreadï¼šæœ€ç»ˆå¹²æ´»çš„äººï¼Œæ˜¯ActivityThreadçš„å†…éƒ¨ç±»ï¼ŒActivityã€Serviceã€BroadcastReceiverçš„å¯åŠ¨ã€åˆ‡æ¢ã€è°ƒåº¦ç­‰å„ç§æ“ä½œéƒ½åœ¨è¿™ä¸ªç±»é‡Œå®Œæˆã€‚æ³¨ï¼šè¿™é‡Œå•ç‹¬æä¸€ä¸‹ActivityStackSupervisiorï¼Œè¿™æ˜¯é«˜ç‰ˆæœ¬æ‰æœ‰çš„ç±»ï¼Œå®ƒç”¨æ¥ç®¡ç†å¤šä¸ªActivityStackï¼Œæ—©æœŸçš„ç‰ˆæœ¬åªæœ‰ä¸€ä¸ªActivityStackå¯¹åº”ç€æ‰‹æœºå±å¹•ï¼ŒåŽæ¥é«˜ç‰ˆæœ¬æ”¯æŒå¤šå±ä»¥åŽï¼Œå°±æœ‰äº†å¤šä¸ªActivityStackï¼ŒäºŽæ˜¯å°±å¼•å…¥äº†ActivityStackSupervisiorç”¨æ¥ç®¡ç†å¤šä¸ªActivityStackã€‚æ•´ä¸ªæµç¨‹ä¸»è¦æ¶‰åŠå››ä¸ªè¿›ç¨‹ï¼š- è°ƒç”¨è€…è¿›ç¨‹ï¼Œå¦‚æžœæ˜¯åœ¨æ¡Œé¢å¯åŠ¨åº”ç”¨å°±æ˜¯Launcheråº”ç”¨è¿›ç¨‹ã€‚- ActivityManagerServiceç­‰æ‰€åœ¨çš„System Serverè¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹ä¸»è¦è¿è¡Œç€ç³»ç»ŸæœåŠ¡ç»„ä»¶ã€‚- Zygoteè¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹ä¸»è¦ç”¨æ¥forkæ–°è¿›ç¨‹ã€‚- æ–°å¯åŠ¨çš„åº”ç”¨è¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹å°±æ˜¯ç”¨æ¥æ‰¿è½½åº”ç”¨è¿è¡Œçš„è¿›ç¨‹äº†ï¼Œå®ƒä¹Ÿæ˜¯åº”ç”¨çš„ä¸»çº¿ç¨‹ï¼ˆæ–°åˆ›å»ºçš„è¿›ç¨‹å°±æ˜¯ä¸»çº¿ç¨‹ï¼‰ï¼Œå¤„ç†ç»„ä»¶ç”Ÿå‘½å‘¨æœŸã€ç•Œé¢ç»˜åˆ¶ç­‰ç›¸å…³äº‹æƒ…ã€‚![img](http://upload-images.jianshu.io/upload_images/3985563-b7edc7b70c9c332f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)æœ‰äº†ä»¥ä¸Šçš„ç†è§£ï¼Œæ•´ä¸ªæµç¨‹å¯ä»¥æ¦‚æ‹¬å¦‚ä¸‹ï¼š1. ç‚¹å‡»æ¡Œé¢åº”ç”¨å›¾æ ‡ï¼ŒLauncherè¿›ç¨‹å°†å¯åŠ¨Activityï¼ˆMainActivityï¼‰çš„è¯·æ±‚ä»¥Binderçš„æ–¹å¼å‘é€ç»™äº†AMSã€‚2. AMSæŽ¥æ”¶åˆ°å¯åŠ¨è¯·æ±‚åŽï¼Œäº¤ä»˜ActivityStarterå¤„ç†Intentå’ŒFlagç­‰ä¿¡æ¯ï¼Œç„¶åŽå†äº¤ç»™ActivityStackSupervisior/ActivityStackå¤„ç†Activityè¿›æ ˆç›¸å…³æµç¨‹ã€‚åŒæ—¶ä»¥Socketæ–¹å¼è¯·æ±‚Zygoteè¿›ç¨‹forkæ–°è¿›ç¨‹ã€‚3. ZygoteæŽ¥æ”¶åˆ°æ–°è¿›ç¨‹åˆ›å»ºè¯·æ±‚åŽforkå‡ºæ–°è¿›ç¨‹ã€‚4. åœ¨æ–°è¿›ç¨‹é‡Œåˆ›å»ºActivityThreadå¯¹è±¡ï¼Œæ–°åˆ›å»ºçš„è¿›ç¨‹å°±æ˜¯åº”ç”¨çš„ä¸»çº¿ç¨‹ï¼Œåœ¨ä¸»çº¿ç¨‹é‡Œå¼€å¯Looperæ¶ˆæ¯å¾ªçŽ¯ï¼Œå¼€å§‹å¤„ç†åˆ›å»ºActivityã€‚5. ActivityThreadåˆ©ç”¨ClassLoaderåŽ»åŠ è½½Activityã€åˆ›å»ºActivityå®žä¾‹ï¼Œå¹¶å›žè°ƒActivityçš„onCreate()æ–¹æ³•ã€‚è¿™æ ·ä¾¿å®Œæˆäº†Activityçš„å¯åŠ¨ã€‚### BroadcastReceiverä¸ŽLocalBroadcastReceiveræœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ- BroadcastReceiver æ˜¯è·¨åº”ç”¨å¹¿æ’­ï¼Œåˆ©ç”¨Binderæœºåˆ¶å®žçŽ°ã€‚- LocalBroadcastReceiver æ˜¯åº”ç”¨å†…å¹¿æ’­ï¼Œåˆ©ç”¨Handlerå®žçŽ°ï¼Œåˆ©ç”¨äº†IntentFilterçš„matchåŠŸèƒ½ï¼Œæä¾›æ¶ˆæ¯çš„å‘å¸ƒä¸ŽæŽ¥æ”¶åŠŸèƒ½ï¼Œå®žçŽ°åº”ç”¨å†…é€šä¿¡ï¼Œæ•ˆçŽ‡æ¯”è¾ƒé«˜ã€‚### Android Handleræœºåˆ¶æ˜¯åšä»€ä¹ˆçš„ï¼ŒåŽŸç†äº†è§£å—ï¼ŸAndroidæ¶ˆæ¯å¾ªçŽ¯æµç¨‹å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/native/process/android_handler_structure.png"/&gt;ä¸»è¦æ¶‰åŠçš„è§’è‰²å¦‚ä¸‹æ‰€ç¤ºï¼š- Messageï¼šæ¶ˆæ¯ï¼Œåˆ†ä¸ºç¡¬ä»¶äº§ç”Ÿçš„æ¶ˆæ¯ï¼ˆä¾‹å¦‚ï¼šæŒ‰é’®ã€è§¦æ‘¸ï¼‰å’Œè½¯ä»¶äº§ç”Ÿçš„æ¶ˆæ¯ã€‚- MessageQueueï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¸»è¦ç”¨æ¥å‘æ¶ˆæ¯æ± æ·»åŠ æ¶ˆæ¯å’Œå–èµ°æ¶ˆæ¯ã€‚- Looperï¼šæ¶ˆæ¯å¾ªçŽ¯å™¨ï¼Œä¸»è¦ç”¨æ¥æŠŠæ¶ˆæ¯åˆ†å‘ç»™ç›¸åº”çš„å¤„ç†è€…ã€‚- Handlerï¼šæ¶ˆæ¯å¤„ç†å™¨ï¼Œä¸»è¦å‘æ¶ˆæ¯é˜Ÿåˆ—å‘é€å„ç§æ¶ˆæ¯ä»¥åŠå¤„ç†å„ç§æ¶ˆæ¯ã€‚æ•´ä¸ªæ¶ˆæ¯çš„å¾ªçŽ¯æµç¨‹è¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°çš„ï¼Œå…·ä½“è¯´æ¥ï¼š1. Handleré€šè¿‡sendMessage()å‘é€æ¶ˆæ¯Messageåˆ°æ¶ˆæ¯é˜Ÿåˆ—MessageQueueã€‚2. Looperé€šè¿‡loop()ä¸æ–­æå–è§¦å‘æ¡ä»¶çš„Messageï¼Œå¹¶å°†Messageäº¤ç»™å¯¹åº”çš„target handleræ¥å¤„ç†ã€‚3. target handlerè°ƒç”¨è‡ªèº«çš„handleMessage()æ–¹æ³•æ¥å¤„ç†Messageã€‚äº‹å®žä¸Šï¼Œåœ¨æ•´ä¸ªæ¶ˆæ¯å¾ªçŽ¯çš„æµç¨‹ä¸­ï¼Œå¹¶ä¸åªæœ‰Javaå±‚å‚ä¸Žï¼Œå¾ˆå¤šé‡è¦çš„å·¥ä½œéƒ½æ˜¯åœ¨C++å±‚æ¥å®Œæˆçš„ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹è¿™äº›ç±»çš„è°ƒç”¨å…³ç³»ã€‚&lt;img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/native/process/android_handler_class.png"/&gt;æ³¨ï¼šè™šçº¿è¡¨ç¤ºå…³è”å…³ç³»ï¼Œå®žçº¿è¡¨ç¤ºè°ƒç”¨å…³ç³»ã€‚åœ¨è¿™äº›ç±»ä¸­MessageQueueæ˜¯Javaå±‚ä¸ŽC++å±‚ç»´ç³»çš„æ¡¥æ¢ï¼ŒMessageQueueä¸ŽLooperç›¸å…³åŠŸèƒ½éƒ½é€šè¿‡MessageQueueçš„Nativeæ–¹æ³•æ¥å®Œæˆï¼Œè€Œå…¶ä»–è™šçº¿è¿žæŽ¥çš„ç±»åªæœ‰å…³è”å…³ç³»ï¼Œå¹¶æ²¡æœ‰ç›´æŽ¥è°ƒç”¨çš„å…³ç³»ï¼Œå®ƒä»¬å‘ç”Ÿå…³è”çš„æ¡¥æ¢æ˜¯MessageQueueã€‚### Android Binderæœºåˆ¶æ˜¯åšä»€ä¹ˆçš„ï¼Œä¸ºä»€ä¹ˆé€‰ç”¨Binderï¼ŒåŽŸç†äº†è§£å—ï¼ŸAndroid Binderæ˜¯ç”¨æ¥åšè¿›ç¨‹é€šä¿¡çš„ï¼ŒAndroidçš„å„ä¸ªåº”ç”¨ä»¥åŠç³»ç»ŸæœåŠ¡éƒ½è¿è¡Œåœ¨ç‹¬ç«‹çš„è¿›ç¨‹ä¸­ï¼Œå®ƒä»¬çš„é€šä¿¡éƒ½ä¾èµ–äºŽBinderã€‚ä¸ºä»€ä¹ˆé€‰ç”¨Binderï¼Œåœ¨è®¨è®ºè¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬çŸ¥é“Androidä¹Ÿæ˜¯åŸºäºŽLinuxå†…æ ¸ï¼ŒLinuxçŽ°æœ‰çš„è¿›ç¨‹é€šä¿¡æ‰‹æ®µæœ‰ä»¥ä¸‹å‡ ç§ï¼š1. ç®¡é“ï¼šåœ¨åˆ›å»ºæ—¶åˆ†é…ä¸€ä¸ªpageå¤§å°çš„å†…å­˜ï¼Œç¼“å­˜åŒºå¤§å°æ¯”è¾ƒæœ‰é™ï¼›2. æ¶ˆæ¯é˜Ÿåˆ—ï¼šä¿¡æ¯å¤åˆ¶ä¸¤æ¬¡ï¼Œé¢å¤–çš„CPUæ¶ˆè€—ï¼›ä¸åˆé€‚é¢‘ç¹æˆ–ä¿¡æ¯é‡å¤§çš„é€šä¿¡ï¼›3. å…±äº«å†…å­˜ï¼šæ— é¡»å¤åˆ¶ï¼Œå…±äº«ç¼“å†²åŒºç›´æŽ¥ä»˜é™„åŠ åˆ°è¿›ç¨‹è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œé€Ÿåº¦å¿«ï¼›ä½†è¿›ç¨‹é—´çš„åŒæ­¥é—®é¢˜æ“ä½œç³»ç»Ÿæ— æ³•å®žçŽ°ï¼Œå¿…é¡»å„è¿›ç¨‹åˆ©ç”¨åŒæ­¥å·¥å…·è§£å†³ï¼›4. å¥—æŽ¥å­—ï¼šä½œä¸ºæ›´é€šç”¨çš„æŽ¥å£ï¼Œä¼ è¾“æ•ˆçŽ‡ä½Žï¼Œä¸»è¦ç”¨äºŽä¸é€šæœºå™¨æˆ–è·¨ç½‘ç»œçš„é€šä¿¡ï¼›5. ä¿¡å·é‡ï¼šå¸¸ä½œä¸ºä¸€ç§é”æœºåˆ¶ï¼Œé˜²æ­¢æŸè¿›ç¨‹æ­£åœ¨è®¿é—®å…±äº«èµ„æºæ—¶ï¼Œå…¶ä»–è¿›ç¨‹ä¹Ÿè®¿é—®è¯¥èµ„æºã€‚å› æ­¤ï¼Œä¸»è¦ä½œä¸ºè¿›ç¨‹é—´ä»¥åŠåŒä¸€è¿›ç¨‹å†…ä¸åŒçº¿ç¨‹ä¹‹é—´çš„åŒæ­¥æ‰‹æ®µã€‚6. ä¿¡å·: ä¸é€‚ç”¨äºŽä¿¡æ¯äº¤æ¢ï¼Œæ›´é€‚ç”¨äºŽè¿›ç¨‹ä¸­æ–­æŽ§åˆ¶ï¼Œæ¯”å¦‚éžæ³•å†…å­˜è®¿é—®ï¼Œæ€æ­»æŸä¸ªè¿›ç¨‹ç­‰ï¼›æ—¢ç„¶æœ‰çŽ°æœ‰çš„IPCæ–¹å¼ï¼Œä¸ºä»€ä¹ˆé‡æ–°è®¾è®¡ä¸€å¥—Binderæœºåˆ¶å‘¢ã€‚ä¸»è¦æ˜¯å‡ºäºŽä»¥ä¸Šä¸‰ä¸ªæ–¹é¢çš„è€ƒé‡ï¼š- é«˜æ€§èƒ½ï¼šä»Žæ•°æ®æ‹·è´æ¬¡æ•°æ¥çœ‹Binderåªéœ€è¦è¿›è¡Œä¸€æ¬¡å†…å­˜æ‹·è´ï¼Œè€Œç®¡é“ã€æ¶ˆæ¯é˜Ÿåˆ—ã€Socketéƒ½éœ€è¦ä¸¤æ¬¡ï¼Œå…±äº«å†…å­˜ä¸éœ€è¦æ‹·è´ï¼ŒBinderçš„æ€§èƒ½ä»…æ¬¡äºŽå…±äº«å†…å­˜ã€‚- ç¨³å®šæ€§ï¼šä¸Šé¢è¯´åˆ°å…±äº«å†…å­˜çš„æ€§èƒ½ä¼˜äºŽBinderï¼Œé‚£ä¸ºä»€ä¹ˆä¸é€‚ç”¨å…±äº«å†…å­˜å‘¢ï¼Œå› ä¸ºå…±äº«å†…å­˜éœ€è¦å¤„ç†å¹¶å‘åŒæ­¥é—®é¢˜ï¼ŒæŽ§åˆ¶è´Ÿè´£ï¼Œå®¹æ˜“å‡ºçŽ°æ­»é”å’Œèµ„æºç«žäº‰ï¼Œç¨³å®šæ€§è¾ƒå·®ã€‚è€ŒBinderåŸºäºŽC/Sæž¶æž„ï¼Œå®¢æˆ·ç«¯ä¸ŽæœåŠ¡ç«¯å½¼æ­¤ç‹¬ç«‹ï¼Œç¨³å®šæ€§è¾ƒå¥½ã€‚- å®‰å…¨æ€§ï¼šæˆ‘ä»¬çŸ¥é“Androidä¸ºæ¯ä¸ªåº”ç”¨åˆ†é…äº†UIDï¼Œç”¨æ¥ä½œä¸ºé‰´åˆ«è¿›ç¨‹çš„é‡è¦æ ‡å¿—ï¼ŒAndroidå†…éƒ¨ä¹Ÿä¾èµ–è¿™ä¸ªUIDè¿›è¡Œæƒé™ç®¡ç†ï¼ŒåŒ…æ‹¬6.0ä»¥å‰çš„å›ºå®šæƒé™å’Œ6.0ä»¥åŽçš„åŠ¨æ€æƒé™ï¼Œä¼ é€IPCåªèƒ½ç”±ç”¨æˆ·åœ¨æ•°æ®åŒ…é‡Œå¡«å…¥UID/PIDï¼Œè¿™ä¸ªæ ‡è®°å®Œå…¨æ˜¯åœ¨ç”¨æˆ·ç©ºé—´æŽ§åˆ¶çš„ï¼Œæ²¡æœ‰æ”¾åœ¨å†…æ ¸ç©ºé—´ï¼Œå› æ­¤æœ‰è¢«æ¶æ„ç¯¡æ”¹çš„å¯èƒ½ï¼Œå› æ­¤Binderçš„å®‰å…¨æ€§æ›´é«˜ã€‚### æè¿°ä¸€ä¸‹Activityçš„ç”Ÿå‘½å‘¨æœŸï¼Œè¿™äº›ç”Ÿå‘½å‘¨æœŸæ˜¯å¦‚ä½•ç®¡ç†çš„ï¼ŸActivityä¸ŽFragmentç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/app/component/complete_android_fragment_lifecycle.png"/&gt;è¯»è€…å¯ä»¥ä»Žä¸Šå›¾çœ‹å‡ºï¼ŒActivityæœ‰å¾ˆå¤šç§çŠ¶æ€ï¼ŒçŠ¶æ€ä¹‹é—´çš„å˜åŒ–ä¹Ÿæ¯”è¾ƒå¤æ‚ï¼Œåœ¨ä¼—å¤šçŠ¶æ€ä¸­ï¼Œåªæœ‰ä¸‰ç§æ˜¯å¸¸é©»çŠ¶æ€ï¼š- Resumedï¼ˆè¿è¡ŒçŠ¶æ€ï¼‰ï¼šActivityå¤„äºŽå‰å°ï¼Œç”¨æˆ·å¯ä»¥ä¸Žå…¶äº¤äº’ã€‚- Pausedï¼ˆæš‚åœçŠ¶æ€ï¼‰ï¼šActivityè¢«å…¶ä»–Activityéƒ¨åˆ†é®æŒ¡ï¼Œæ— æ³•æŽ¥å—ç”¨æˆ·çš„è¾“å…¥ã€‚- Stoppedï¼ˆåœæ­¢çŠ¶æ€ï¼‰ï¼šActivityè¢«å®Œå…¨éšè—ï¼Œå¯¹ç”¨æˆ·ä¸å¯è§ï¼Œè¿›å…¥åŽå°ã€‚å…¶ä»–çš„çŠ¶æ€éƒ½æ˜¯ä¸­é—´çŠ¶æ€ã€‚æˆ‘ä»¬å†æ¥çœ‹çœ‹ç”Ÿå‘½å‘¨æœŸå˜åŒ–æ—¶çš„æ•´ä¸ªè°ƒåº¦æµç¨‹ï¼Œç”Ÿå‘½å‘¨æœŸè°ƒåº¦æµç¨‹å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/app/component/activity_lifecycle_structure.png" /&gt;æ‰€ä»¥ä½ å¯ä»¥çœ‹åˆ°ï¼Œæ•´ä¸ªæµç¨‹æ˜¯è¿™æ ·çš„ï¼š1. æ¯”æ–¹è¯´æˆ‘ä»¬ç‚¹å‡»è·³è½¬ä¸€ä¸ªæ–°Activityï¼Œè¿™ä¸ªæ—¶å€™Activityä¼šå…¥æ ˆï¼ŒåŒæ—¶å®ƒçš„ç”Ÿå‘½å‘¨æœŸä¹Ÿä¼šä»ŽonCreate()åˆ°onResume()å¼€å§‹å˜æ¢ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯åœ¨ActivityStacké‡Œå®Œæˆçš„ï¼ŒActivityStackæ˜¯è¿è¡Œåœ¨Serverè¿›ç¨‹é‡Œçš„ï¼Œè¿™ä¸ªæ—¶å€™Serverè¿›ç¨‹å°±é€šè¿‡ApplicationThreadçš„ä»£ç†å¯¹è±¡ApplicationThreadProxyå‘è¿è¡Œåœ¨appè¿›ç¨‹ApplicationThreadå‘èµ·æ“ä½œè¯·æ±‚ã€‚2. ApplicationThreadæŽ¥æ”¶åˆ°æ“ä½œè¯·æ±‚åŽï¼Œå› ä¸ºå®ƒæ˜¯è¿è¡Œåœ¨appè¿›ç¨‹é‡Œçš„å…¶ä»–çº¿ç¨‹é‡Œï¼Œæ‰€ä»¥ApplicationThreadéœ€è¦é€šè¿‡Handlerå‘ä¸»çº¿ç¨‹ActivityThreadå‘é€æ“ä½œæ¶ˆæ¯ã€‚3. ä¸»çº¿ç¨‹æŽ¥æ”¶åˆ°ApplicationThreadå‘å‡ºçš„æ¶ˆæ¯åŽï¼Œè°ƒç”¨ä¸»çº¿ç¨‹ActivityThreadæ‰§è¡Œå“åº”çš„æ“ä½œï¼Œå¹¶å›žè°ƒActivityç›¸åº”çš„å‘¨æœŸæ–¹æ³•ã€‚æ³¨ï¼šè¿™é‡Œæåˆ°äº†ä¸»çº¿ç¨‹ActivityThreadï¼Œæ›´å‡†ç¡®æ¥è¯´ActivityThreadä¸æ˜¯çº¿ç¨‹ï¼Œå› ä¸ºå®ƒæ²¡æœ‰ç»§æ‰¿Threadç±»æˆ–è€…å®žçŽ°RunnableæŽ¥å£ï¼Œå®ƒæ˜¯è¿è¡Œåœ¨åº”ç”¨ä¸»çº¿ç¨‹é‡Œçš„å¯¹è±¡ï¼Œé‚£ä¹ˆåº”ç”¨çš„ä¸»çº¿ç¨‹åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä»Žæœ¬è´¨ä¸Šæ¥è®²å¯åŠ¨å¯åŠ¨æ—¶åˆ›å»ºçš„è¿›ç¨‹å°±æ˜¯ä¸»çº¿ç¨‹ï¼Œçº¿ç¨‹å’Œè¿›ç¨‹å¤„ç†æ˜¯å¦å…±äº«èµ„æºå¤–ï¼Œæ²¡æœ‰å…¶ä»–çš„åŒºåˆ«ï¼Œå¯¹äºŽLinuxæ¥è¯´ï¼Œå®ƒä»¬éƒ½åªæ˜¯ä¸€ä¸ªstructç»“æž„ä½“ã€‚### Activityçš„é€šä¿¡æ–¹å¼æœ‰å“ªäº›ï¼Ÿ- startActivityForResult- EventBus- LocalBroadcastReceiver### Androidåº”ç”¨é‡Œæœ‰å‡ ç§Contextå¯¹è±¡ï¼ŒContextç±»å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/app/component/context_uml.png" width="600" /&gt;å¯ä»¥å‘çŽ°Contextæ˜¯ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒçš„å…·ä½“å®žçŽ°ç±»æ˜¯ContextImplï¼ŒContextWrapperæ˜¯ä¸ªåŒ…è£…ç±»ï¼Œå†…éƒ¨çš„æˆå‘˜å˜é‡mBaseæŒ‡å‘çš„ä¹Ÿæ˜¯ä¸ªContextImplå¯¹è±¡ï¼ŒContextImplå®Œæˆäº†å®žé™…çš„åŠŸèƒ½ï¼ŒActivityã€Serviceä¸ŽApplicationéƒ½ç›´æŽ¥æˆ–è€…é—´æŽ¥çš„ç»§æ‰¿ContextWrapperã€‚### æè¿°ä¸€ä¸‹è¿›ç¨‹å’ŒApplicationçš„ç”Ÿå‘½å‘¨æœŸï¼Ÿä¸€ä¸ªå®‰è£…çš„åº”ç”¨å¯¹åº”ä¸€ä¸ªLoadedApkå¯¹è±¡ï¼Œå¯¹åº”ä¸€ä¸ªApplicationå¯¹è±¡ï¼Œå¯¹äºŽå››å¤§ç»„ä»¶ï¼ŒApplicationçš„åˆ›å»ºå’ŒèŽ·å–æ–¹å¼ä¹Ÿæ˜¯ä¸å°½ç›¸åŒçš„ï¼Œå…·ä½“è¯´æ¥ï¼š- Activityï¼šé€šè¿‡LoadedApkçš„makeApplication()æ–¹æ³•åˆ›å»ºã€‚- Serviceï¼šé€šè¿‡LoadedApkçš„makeApplication()æ–¹æ³•åˆ›å»ºã€‚- é™æ€å¹¿æ’­ï¼šé€šè¿‡å…¶å›žè°ƒæ–¹æ³•onReceive()æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å‘Applicationã€‚- ContentProviderï¼šæ— æ³•èŽ·å–Applicationï¼Œå› æ­¤æ­¤æ—¶Applicationä¸ä¸€å®šå·²ç»åˆå§‹åŒ–ã€‚### Androidå“ªäº›æƒ…å†µä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œå¦‚ä½•åˆ†æžå†…å­˜æ³„æ¼ï¼Ÿ* å†…å­˜æº¢å‡ºOOMå’Œå†…å­˜æ³„éœ²(å¯¹è±¡æ— æ³•è¢«å›žæ”¶)çš„åŒºåˆ« å†…å­˜æº¢å‡º out of memoryï¼šæ˜¯æŒ‡ç¨‹åºåœ¨ç”³è¯·å†…å­˜æ—¶ï¼Œæ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ç©ºé—´ä¾›å…¶ä½¿ç”¨ï¼Œå‡ºçŽ°out of memoryï¼›æ¯”å¦‚ç”³è¯·äº†ä¸€ä¸ªintegerï¼Œä½†ç»™å®ƒå­˜äº†longæ‰èƒ½å­˜ä¸‹çš„æ•°ï¼Œé‚£å°±æ˜¯å†…å­˜æº¢å‡ºã€‚å†…å­˜æº¢å‡ºé€šä¿—çš„è®²å°±æ˜¯å†…å­˜ä¸å¤Ÿç”¨ã€‚ å†…å­˜æ³„æ¼ memory leakï¼šæ˜¯æŒ‡ç¨‹åºåœ¨ç”³è¯·å†…å­˜åŽï¼Œæ— æ³•é‡Šæ”¾è‡ªå·±ç”³è¯·çš„å†…å­˜ç©ºé—´ï¼Œä¸€æ¬¡å†…å­˜æ³„éœ²å±å®³å¯ä»¥å¿½ç•¥ï¼Œä½†å†…å­˜æ³„éœ²å †ç§¯åŽæžœå¾ˆä¸¥é‡ï¼Œæ— è®ºå¤šå°‘å†…å­˜ï¼Œè¿Ÿæ—©ä¼šè¢«å å…‰ã€‚ å¸¸è§çš„äº§ç”Ÿå†…å­˜æ³„æ¼çš„æƒ…å†µå¦‚ä¸‹æ‰€ç¤ºï¼š- æŒæœ‰é™æ€çš„Contextï¼ˆActivityï¼‰å¼•ç”¨ã€‚- æŒæœ‰é™æ€çš„Viewå¼•ç”¨ï¼Œ- å†…éƒ¨ç±»&amp;åŒ¿åå†…éƒ¨ç±»å®žä¾‹æ— æ³•é‡Šæ”¾ï¼ˆæœ‰å»¶è¿Ÿæ—¶é—´ç­‰ç­‰ï¼‰ï¼Œè€Œå†…éƒ¨ç±»åˆæŒæœ‰å¤–éƒ¨ç±»çš„å¼ºå¼•ç”¨ï¼Œå¯¼è‡´å¤–éƒ¨ç±»æ— æ³•é‡Šæ”¾ï¼Œè¿™ç§åŒ¿åå†…éƒ¨ç±»å¸¸è§äºŽç›‘å¬å™¨ã€Handlerã€Threadã€TimerTask- èµ„æºä½¿ç”¨å®ŒæˆåŽæ²¡æœ‰å…³é—­ï¼Œä¾‹å¦‚ï¼šBraodcastReceiverï¼ŒContentObserverï¼ŒFileï¼ŒCursorï¼ŒStreamï¼ŒBitmapã€‚- ä¸æ­£ç¡®çš„å•ä¾‹æ¨¡å¼ï¼Œæ¯”å¦‚å•ä¾‹æŒæœ‰Activityã€‚- é›†åˆç±»å†…å­˜æ³„æ¼ï¼Œå¦‚æžœä¸€ä¸ªé›†åˆç±»æ˜¯é™æ€çš„ï¼ˆç¼“å­˜HashMapï¼‰ï¼Œåªæœ‰æ·»åŠ æ–¹æ³•ï¼Œæ²¡æœ‰å¯¹åº”çš„åˆ é™¤æ–¹æ³•ï¼Œä¼šå¯¼è‡´å¼•ç”¨æ— æ³•è¢«é‡Šæ”¾ï¼Œå¼•å‘å†…å­˜æ³„æ¼ã€‚- é”™è¯¯çš„è¦†å†™äº†finalize()æ–¹æ³•ï¼Œfinalize()æ–¹æ³•æ‰§è¡Œæ‰§è¡Œä¸ç¡®å®šï¼Œå¯èƒ½ä¼šå¯¼è‡´å¼•ç”¨æ— æ³•è¢«é‡Šæ”¾ã€‚æŸ¥æ‰¾å†…å­˜æ³„æ¼å¯ä»¥ä½¿ç”¨Android Profilerå·¥å…·æˆ–è€…åˆ©ç”¨LeakCanaryå·¥å…·ã€‚### Androidæœ‰å“ªå‡ ç§è¿›ç¨‹ï¼Œæ˜¯å¦‚ä½•ç®¡ç†çš„ï¼ŸAndroidçš„è¿›ç¨‹ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š**å‰å°è¿›ç¨‹**ç”¨æˆ·å½“å‰æ“ä½œæ‰€å¿…éœ€çš„è¿›ç¨‹ã€‚å¦‚æžœä¸€ä¸ªè¿›ç¨‹æ»¡è¶³ä»¥ä¸‹ä»»ä¸€æ¡ä»¶ï¼Œå³è§†ä¸ºå‰å°è¿›ç¨‹ï¼š- æ‰˜ç®¡ç”¨æˆ·æ­£åœ¨äº¤äº’çš„ Activityï¼ˆå·²è°ƒç”¨ Activity çš„ onResume() æ–¹æ³•ï¼‰- æ‰˜ç®¡æŸä¸ª Serviceï¼ŒåŽè€…ç»‘å®šåˆ°ç”¨æˆ·æ­£åœ¨äº¤äº’çš„ Activity- æ‰˜ç®¡æ­£åœ¨â€œå‰å°â€è¿è¡Œçš„ Serviceï¼ˆæœåŠ¡å·²è°ƒç”¨ startForeground()ï¼‰- æ‰˜ç®¡æ­£æ‰§è¡Œä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå›žè°ƒçš„ Serviceï¼ˆonCreate()ã€onStart() æˆ– onDestroy()ï¼‰- æ‰˜ç®¡æ­£æ‰§è¡Œå…¶ onReceive() æ–¹æ³•çš„ BroadcastReceiveré€šå¸¸ï¼Œåœ¨ä»»æ„ç»™å®šæ—¶é—´å‰å°è¿›ç¨‹éƒ½ä¸ºæ•°ä¸å¤šã€‚åªæœ‰åœ¨å†…å­˜ä¸è¶³ä»¥æ”¯æŒå®ƒä»¬åŒæ—¶ç»§ç»­è¿è¡Œè¿™ä¸€ä¸‡ä¸å¾—å·²çš„æƒ…å†µä¸‹ï¼Œç³»ç»Ÿæ‰ä¼šç»ˆæ­¢å®ƒä»¬ã€‚ æ­¤æ—¶ï¼Œè®¾å¤‡å¾€å¾€å·²è¾¾åˆ°å†…å­˜åˆ†é¡µçŠ¶æ€ï¼Œå› æ­¤éœ€è¦ç»ˆæ­¢ä¸€äº›å‰å°è¿›ç¨‹æ¥ç¡®ä¿ç”¨æˆ·ç•Œé¢æ­£å¸¸å“åº”ã€‚**å¯è§è¿›ç¨‹**æ²¡æœ‰ä»»ä½•å‰å°ç»„ä»¶ã€ä½†ä»ä¼šå½±å“ç”¨æˆ·åœ¨å±å¹•ä¸Šæ‰€è§å†…å®¹çš„è¿›ç¨‹ã€‚ å¦‚æžœä¸€ä¸ªè¿›ç¨‹æ»¡è¶³ä»¥ä¸‹ä»»ä¸€æ¡ä»¶ï¼Œå³è§†ä¸ºå¯è§è¿›ç¨‹ï¼š- æ‰˜ç®¡ä¸åœ¨å‰å°ã€ä½†ä»å¯¹ç”¨æˆ·å¯è§çš„ Activityï¼ˆå·²è°ƒç”¨å…¶ onPause() æ–¹æ³•ï¼‰ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœå‰å° Activity å¯åŠ¨äº†ä¸€ä¸ªå¯¹è¯æ¡†ï¼Œå…è®¸åœ¨å…¶åŽæ˜¾ç¤ºä¸Šä¸€ Activityï¼Œåˆ™æœ‰å¯èƒ½ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚- æ‰˜ç®¡ç»‘å®šåˆ°å¯è§ï¼ˆæˆ–å‰å°ï¼‰Activity çš„ Serviceã€‚å¯è§è¿›ç¨‹è¢«è§†ä¸ºæ˜¯æžå…¶é‡è¦çš„è¿›ç¨‹ï¼Œé™¤éžä¸ºäº†ç»´æŒæ‰€æœ‰å‰å°è¿›ç¨‹åŒæ—¶è¿è¡Œè€Œå¿…é¡»ç»ˆæ­¢ï¼Œå¦åˆ™ç³»ç»Ÿä¸ä¼šç»ˆæ­¢è¿™äº›è¿›ç¨‹ã€‚**æœåŠ¡è¿›ç¨‹**æ­£åœ¨è¿è¡Œå·²ä½¿ç”¨ startService() æ–¹æ³•å¯åŠ¨çš„æœåŠ¡ä¸”ä¸å±žäºŽä¸Šè¿°ä¸¤ä¸ªæ›´é«˜ç±»åˆ«è¿›ç¨‹çš„è¿›ç¨‹ã€‚å°½ç®¡æœåŠ¡è¿›ç¨‹ä¸Žç”¨æˆ·æ‰€è§å†…å®¹æ²¡æœ‰ç›´æŽ¥å…³è”ï¼Œä½†æ˜¯å®ƒä»¬é€šå¸¸åœ¨æ‰§è¡Œä¸€äº›ç”¨æˆ·å…³å¿ƒçš„æ“ä½œï¼ˆä¾‹å¦‚ï¼Œåœ¨åŽå°æ’­æ”¾éŸ³ä¹æˆ–ä»Žç½‘ç»œä¸‹è½½æ•°æ®ï¼‰ã€‚å› æ­¤ï¼Œé™¤éžå†…å­˜ä¸è¶³ä»¥ç»´æŒæ‰€æœ‰å‰å°è¿›ç¨‹å’Œå¯è§è¿›ç¨‹åŒæ—¶è¿è¡Œï¼Œå¦åˆ™ç³»ç»Ÿä¼šè®©æœåŠ¡è¿›ç¨‹ä¿æŒè¿è¡ŒçŠ¶æ€ã€‚**åŽå°è¿›ç¨‹**åŒ…å«ç›®å‰å¯¹ç”¨æˆ·ä¸å¯è§çš„ Activity çš„è¿›ç¨‹ï¼ˆå·²è°ƒç”¨ Activity çš„ onStop() æ–¹æ³•ï¼‰ã€‚è¿™äº›è¿›ç¨‹å¯¹ç”¨æˆ·ä½“éªŒæ²¡æœ‰ç›´æŽ¥å½±å“ï¼Œç³»ç»Ÿå¯èƒ½éšæ—¶ç»ˆæ­¢å®ƒä»¬ï¼Œä»¥å›žæ”¶å†…å­˜ä¾›å‰å°è¿›ç¨‹ã€å¯è§è¿›ç¨‹æˆ–æœåŠ¡è¿›ç¨‹ä½¿ç”¨ã€‚ é€šå¸¸ä¼šæœ‰å¾ˆå¤šåŽå°è¿›ç¨‹åœ¨è¿è¡Œï¼Œå› æ­¤å®ƒä»¬ä¼šä¿å­˜åœ¨ LRU ï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰åˆ—è¡¨ä¸­ï¼Œä»¥ç¡®ä¿åŒ…å«ç”¨æˆ·æœ€è¿‘æŸ¥çœ‹çš„ Activity çš„è¿›ç¨‹æœ€åŽä¸€ä¸ªè¢«ç»ˆæ­¢ã€‚å¦‚æžœæŸä¸ª Activity æ­£ç¡®å®žçŽ°äº†ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå¹¶ä¿å­˜äº†å…¶å½“å‰çŠ¶æ€ï¼Œåˆ™ç»ˆæ­¢å…¶è¿›ç¨‹ä¸ä¼šå¯¹ç”¨æˆ·ä½“éªŒäº§ç”Ÿæ˜Žæ˜¾å½±å“ï¼Œå› ä¸ºå½“ç”¨æˆ·å¯¼èˆªå›žè¯¥ Activity æ—¶ï¼ŒActivity ä¼šæ¢å¤å…¶æ‰€æœ‰å¯è§çŠ¶æ€ã€‚**ç©ºè¿›ç¨‹**ä¸å«ä»»ä½•æ´»åŠ¨åº”ç”¨ç»„ä»¶çš„è¿›ç¨‹ã€‚ä¿ç•™è¿™ç§è¿›ç¨‹çš„çš„å”¯ä¸€ç›®çš„æ˜¯ç”¨ä½œç¼“å­˜ï¼Œä»¥ç¼©çŸ­ä¸‹æ¬¡åœ¨å…¶ä¸­è¿è¡Œç»„ä»¶æ‰€éœ€çš„å¯åŠ¨æ—¶é—´ã€‚ ä¸ºä½¿æ€»ä½“ç³»ç»Ÿèµ„æºåœ¨è¿›ç¨‹ç¼“å­˜å’Œåº•å±‚å†…æ ¸ç¼“å­˜ä¹‹é—´ä¿æŒå¹³è¡¡ï¼Œç³»ç»Ÿå¾€å¾€ä¼šç»ˆæ­¢è¿™äº›è¿›ç¨‹ã€‚ActivityManagerServiceè´Ÿè´£æ ¹æ®å„ç§ç­–ç•¥ç®—æ³•è®¡ç®—è¿›ç¨‹çš„adjå€¼ï¼Œç„¶åŽäº¤ç”±ç³»ç»Ÿå†…æ ¸è¿›è¡Œè¿›ç¨‹çš„ç®¡ç†ã€‚### SharePreferenceæ€§èƒ½ä¼˜åŒ–ï¼Œå¯ä»¥åšè¿›ç¨‹åŒæ­¥å—ï¼Ÿåœ¨Androidä¸­, SharePreferencesæ˜¯ä¸€ä¸ªè½»é‡çº§çš„å­˜å‚¨ç±»ï¼Œç‰¹åˆ«é€‚åˆç”¨äºŽä¿å­˜è½¯ä»¶é…ç½®å‚æ•°ã€‚ä½¿ç”¨SharedPreferencesä¿å­˜æ•°æ®ï¼Œå…¶èƒŒåŽæ˜¯ç”¨xmlæ–‡ä»¶å­˜æ”¾æ•°æ®ï¼Œæ–‡ä»¶å­˜æ”¾åœ¨/data/data/ &lt; package name &gt; /shared_prefsç›®å½•ä¸‹.ä¹‹æ‰€ä»¥è¯´SharedPreferenceæ˜¯ä¸€ç§è½»é‡çº§çš„å­˜å‚¨æ–¹å¼ï¼Œæ˜¯å› ä¸ºå®ƒåœ¨åˆ›å»ºçš„æ—¶å€™ä¼šæŠŠæ•´ä¸ªæ–‡ä»¶å…¨éƒ¨åŠ è½½è¿›å†…å­˜ï¼Œå¦‚æžœSharedPreferenceæ–‡ä»¶æ¯”è¾ƒå¤§ï¼Œä¼šå¸¦æ¥ä»¥ä¸‹é—®é¢˜ï¼š1. ç¬¬ä¸€æ¬¡ä»Žspä¸­èŽ·å–å€¼çš„æ—¶å€™ï¼Œæœ‰å¯èƒ½é˜»å¡žä¸»çº¿ç¨‹ï¼Œä½¿ç•Œé¢å¡é¡¿ã€æŽ‰å¸§ã€‚2. è§£æžspçš„æ—¶å€™ä¼šäº§ç”Ÿå¤§é‡çš„ä¸´æ—¶å¯¹è±¡ï¼Œå¯¼è‡´é¢‘ç¹GCï¼Œå¼•èµ·ç•Œé¢å¡é¡¿ã€‚3. è¿™äº›keyå’Œvalueä¼šæ°¸è¿œå­˜åœ¨äºŽå†…å­˜ä¹‹ä¸­ï¼Œå ç”¨å¤§é‡å†…å­˜ã€‚ä¼˜åŒ–å»ºè®®1. ä¸è¦å­˜æ”¾å¤§çš„keyå’Œvalueï¼Œä¼šå¼•èµ·ç•Œé¢å¡ã€é¢‘ç¹GCã€å ç”¨å†…å­˜ç­‰ç­‰ã€‚2. æ¯«ä¸ç›¸å…³çš„é…ç½®é¡¹å°±ä¸è¦æ”¾åœ¨åœ¨ä¸€èµ·ï¼Œæ–‡ä»¶è¶Šå¤§è¯»å–è¶Šæ…¢ã€‚3. è¯»å–é¢‘ç¹çš„keyå’Œä¸æ˜“å˜åŠ¨çš„keyå°½é‡ä¸è¦æ”¾åœ¨ä¸€èµ·ï¼Œå½±å“é€Ÿåº¦ï¼Œå¦‚æžœæ•´ä¸ªæ–‡ä»¶å¾ˆå°ï¼Œé‚£ä¹ˆå¿½ç•¥å§ï¼Œä¸ºäº†è¿™ç‚¹æ€§èƒ½æ·»åŠ ç»´æŠ¤æˆæœ¬å¾—ä¸å¿å¤±ã€‚4. ä¸è¦ä¹±editå’Œapplyï¼Œå°½é‡æ‰¹é‡ä¿®æ”¹ä¸€æ¬¡æäº¤ï¼Œå¤šæ¬¡applyä¼šé˜»å¡žä¸»çº¿ç¨‹ã€‚5. å°½é‡ä¸è¦å­˜æ”¾JSONå’ŒHTMLï¼Œè¿™ç§åœºæ™¯è¯·ç›´æŽ¥ä½¿ç”¨JSONã€‚6. SharedPreferenceæ— æ³•è¿›è¡Œè·¨è¿›ç¨‹é€šä¿¡ï¼ŒMODE_MULTI_PROCESSåªæ˜¯ä¿è¯äº†åœ¨API 11ä»¥å‰çš„ç³»ç»Ÿä¸Šï¼Œå¦‚æžœspå·²ç»è¢«è¯»å–è¿›å†…å­˜ï¼Œå†æ¬¡èŽ·å–è¿™ä¸ªSharedPreferenceçš„æ—¶å€™ï¼Œå¦‚æžœæœ‰è¿™ä¸ªflagï¼Œä¼šé‡æ–°è¯»ä¸€éæ–‡ä»¶ï¼Œä»…æ­¤è€Œå·²ã€‚### å¦‚ä½•åšSQLiteå‡çº§ï¼Ÿæ•°æ®åº“å‡çº§å¢žåŠ è¡¨å’Œåˆ é™¤è¡¨éƒ½ä¸æ¶‰åŠæ•°æ®è¿ç§»ï¼Œä½†æ˜¯ä¿®æ”¹è¡¨æ¶‰åŠåˆ°å¯¹åŽŸæœ‰æ•°æ®è¿›è¡Œè¿ç§»ã€‚å‡çº§çš„æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š1. å°†çŽ°æœ‰è¡¨å‘½åä¸ºä¸´æ—¶è¡¨ã€‚2. åˆ›å»ºæ–°è¡¨ã€‚3. å°†ä¸´æ—¶è¡¨çš„æ•°æ®å¯¼å…¥æ–°è¡¨ã€‚4. åˆ é™¤ä¸´æ—¶è¡¨ã€‚é‡å†™å¦‚æžœæ˜¯è·¨ç‰ˆæœ¬æ•°æ®åº“å‡çº§ï¼Œå¯ä»¥ç”±ä¸¤ç§æ–¹å¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š1. é€çº§å‡çº§ï¼Œç¡®å®šç›¸é‚»ç‰ˆæœ¬ä¸ŽçŽ°åœ¨ç‰ˆæœ¬çš„å·®åˆ«ï¼ŒV1å‡çº§åˆ°V2,V2å‡çº§åˆ°V3ï¼Œä¾æ¬¡ç±»æŽ¨ã€‚2. è·¨çº§å‡çº§ï¼Œç¡®å®šæ¯ä¸ªç‰ˆæœ¬ä¸ŽçŽ°åœ¨æ•°æ®åº“çš„å·®åˆ«ï¼Œä¸ºæ¯ä¸ªcaseç¼–å†™ä¸“é—¨å‡çº§å¤§ä»£ç ã€‚### è¿›ç¨‹ä¿æŠ¤å¦‚ä½•åšï¼Œå¦‚ä½•å”¤é†’å…¶ä»–è¿›ç¨‹ï¼Ÿè¿›ç¨‹ä¿æ´»ä¸»è¦æœ‰ä¸¤ä¸ªæ€è·¯ï¼š1. æå‡è¿›ç¨‹çš„ä¼˜å…ˆçº§ï¼Œé™ä½Žè¿›ç¨‹è¢«æ€æ­»çš„æ¦‚çŽ‡ã€‚2. æ‹‰æ´»å·²ç»è¢«æ€æ­»çš„è¿›ç¨‹ã€‚å¦‚ä½•æå‡ä¼˜å…ˆçº§ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼šç›‘æŽ§æ‰‹æœºé”å±äº‹ä»¶ï¼Œåœ¨å±å¹•é”å±æ—¶å¯åŠ¨ä¸€ä¸ªåƒç´ çš„Activityï¼Œåœ¨ç”¨æˆ·è§£é”æ—¶å°†Activityé”€æ¯æŽ‰ï¼Œå‰å°Activityå¯ä»¥å°†è¿›ç¨‹å˜æˆå‰å°è¿›ç¨‹ï¼Œä¼˜å…ˆçº§å‡çº§åˆ°æœ€é«˜ã€‚å¦‚æžœæ‹‰æ´»åˆ©ç”¨å¹¿æ’­æ‹‰æ´»Activityã€‚### ç†è§£åºåˆ—åŒ–å—ï¼ŒAndroidä¸ºä»€ä¹ˆå¼•å…¥Parcelableï¼Ÿæ‰€è°“åºåˆ—åŒ–å°±æ˜¯å°†å¯¹è±¡å˜æˆäºŒè¿›åˆ¶æµï¼Œä¾¿äºŽå­˜å‚¨å’Œä¼ è¾“ã€‚- Serializableæ˜¯javaå®žçŽ°çš„ä¸€å¥—åºåˆ—åŒ–æ–¹å¼ï¼Œå¯èƒ½ä¼šè§¦å‘é¢‘ç¹çš„IOæ“ä½œï¼Œæ•ˆçŽ‡æ¯”è¾ƒä½Žï¼Œé€‚åˆå°†å¯¹è±¡å­˜å‚¨åˆ°ç£ç›˜ä¸Šçš„æƒ…å†µã€‚- Parcelableæ˜¯Androidæä¾›ä¸€å¥—åºåˆ—åŒ–æœºåˆ¶ï¼Œå®ƒå°†åºåˆ—åŒ–åŽçš„å­—èŠ‚æµå†™å…¥åˆ°ä¸€ä¸ªå…±æ€§å†…å­˜ä¸­ï¼Œå…¶ä»–å¯¹è±¡å¯ä»¥ä»Žè¿™å—å…±äº«å†…å­˜ä¸­è¯»å‡ºå­—èŠ‚æµï¼Œå¹¶ååºåˆ—åŒ–æˆå¯¹è±¡ã€‚å› æ­¤æ•ˆçŽ‡æ¯”è¾ƒé«˜ï¼Œé€‚åˆåœ¨å¯¹è±¡é—´æˆ–è€…è¿›ç¨‹é—´ä¼ é€’ä¿¡æ¯ã€‚### å¦‚ä½•è®¡ç®—ä¸€ä¸ªBitmapå ç”¨å†…å­˜çš„å¤§å°ï¼Œæ€Žä¹ˆä¿è¯åŠ è½½Bitmapä¸äº§ç”Ÿå†…å­˜æº¢å‡ºï¼ŸBitamp å ç”¨å†…å­˜å¤§å° = å®½åº¦åƒç´  x ï¼ˆinTargetDensity / inDensityï¼‰ x é«˜åº¦åƒç´  x ï¼ˆinTargetDensity / inDensityï¼‰x ä¸€ä¸ªåƒç´ æ‰€å çš„å†…å­˜æ³¨ï¼šè¿™é‡ŒinDensityè¡¨ç¤ºç›®æ ‡å›¾ç‰‡çš„dpiï¼ˆæ”¾åœ¨å“ªä¸ªèµ„æºæ–‡ä»¶å¤¹ä¸‹ï¼‰ï¼ŒinTargetDensityè¡¨ç¤ºç›®æ ‡å±å¹•çš„dpiï¼Œæ‰€ä»¥ä½ å¯ä»¥å‘çŽ°inDensityå’ŒinTargetDensityä¼šå¯¹Bitmapçš„å®½é«˜è¿›è¡Œæ‹‰ä¼¸ï¼Œè¿›è€Œæ”¹å˜Bitmapå ç”¨å†…å­˜çš„å¤§å°ã€‚åœ¨Bitmapé‡Œæœ‰ä¸¤ä¸ªèŽ·å–å†…å­˜å ç”¨å¤§å°çš„æ–¹æ³•ã€‚- getByteCount()ï¼šAPI12 åŠ å…¥ï¼Œä»£è¡¨å­˜å‚¨ Bitmap çš„åƒç´ éœ€è¦çš„æœ€å°‘å†…å­˜ã€‚- getAllocationByteCount()ï¼šAPI19 åŠ å…¥ï¼Œä»£è¡¨åœ¨å†…å­˜ä¸­ä¸º Bitmap åˆ†é…çš„å†…å­˜å¤§å°ï¼Œä»£æ›¿äº† getByteCount() æ–¹æ³•ã€‚åœ¨ä¸å¤ç”¨ Bitmap æ—¶ï¼ŒgetByteCount() å’Œ getAllocationByteCount è¿”å›žçš„ç»“æžœæ˜¯ä¸€æ ·çš„ã€‚åœ¨é€šè¿‡å¤ç”¨ Bitmap æ¥è§£ç å›¾ç‰‡æ—¶ï¼Œé‚£ä¹ˆ getByteCount() è¡¨ç¤ºæ–°è§£ç å›¾ç‰‡å ç”¨å†…å­˜çš„å¤§å°ï¼ŒgetAllocationByteCount() è¡¨ç¤ºè¢«å¤ç”¨ BitmapçœŸå®žå ç”¨çš„å†…å­˜å¤§å°ï¼ˆå³ mBuffer çš„é•¿åº¦ï¼‰ã€‚ä¸ºäº†ä¿è¯åœ¨åŠ è½½Bitmapçš„æ—¶å€™ä¸äº§ç”Ÿå†…å­˜æº¢å‡ºï¼Œå¯ä»¥å—ç”¨BitmapFactoryè¿›è¡Œå›¾ç‰‡åŽ‹ç¼©ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªå‚æ•°ï¼š- BitmapFactory.Options.inPreferredConfigï¼šå°†ARGB_8888æ”¹ä¸ºRGB_565ï¼Œæ”¹å˜ç¼–ç æ–¹å¼ï¼ŒèŠ‚çº¦å†…å­˜ã€‚- BitmapFactory.Options.inSampleSizeï¼šç¼©æ”¾æ¯”ä¾‹ï¼Œå¯ä»¥å‚è€ƒLubané‚£ä¸ªåº“ï¼Œæ ¹æ®å›¾ç‰‡å®½é«˜è®¡ç®—å‡ºåˆé€‚çš„ç¼©æ”¾æ¯”ä¾‹ã€‚- BitmapFactory.Options.inPurgeableï¼šè®©ç³»ç»Ÿå¯ä»¥å†…å­˜ä¸è¶³æ—¶å›žæ”¶å†…å­˜ã€‚### Androidå¦‚ä½•åœ¨ä¸åŽ‹ç¼©çš„æƒ…å†µä¸‹åŠ è½½é«˜æ¸…å¤§å›¾ï¼Ÿä½¿ç”¨BitmapRegionDecoderè¿›è¡Œå¸ƒå±€åŠ è½½ã€‚### Androidé‡Œçš„å†…å­˜ç¼“å­˜å’Œç£ç›˜ç¼“å­˜æ˜¯æ€Žä¹ˆå®žçŽ°çš„ã€‚å†…å­˜ç¼“å­˜åŸºäºŽLruCacheå®žçŽ°ï¼Œç£ç›˜ç¼“å­˜åŸºäºŽDiskLruCacheå®žçŽ°ã€‚è¿™ä¸¤ä¸ªç±»éƒ½åŸºäºŽLruç®—æ³•å’ŒLinkedHashMapæ¥å®žçŽ°ã€‚LRUç®—æ³•å¯ä»¥ç”¨ä¸€å¥è¯æ¥æè¿°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&gt;LRUæ˜¯Least Recently Usedçš„ç¼©å†™ï¼Œæœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ç®—æ³•ï¼Œä»Žå®ƒçš„åå­—å°±å¯ä»¥çœ‹å‡ºï¼Œå®ƒçš„æ ¸å¿ƒåŽŸåˆ™æ˜¯å¦‚æžœä¸€ä¸ªæ•°æ®åœ¨æœ€è¿‘ä¸€æ®µæ—¶é—´æ²¡æœ‰ä½¿ç”¨åˆ°ï¼Œé‚£ä¹ˆå®ƒåœ¨å°†æ¥è¢«è®¿é—®åˆ°çš„å¯èƒ½æ€§ä¹Ÿå¾ˆå°ï¼Œåˆ™è¿™ç±»æ•°æ®é¡¹ä¼šè¢«ä¼˜å…ˆæ·˜æ±°æŽ‰ã€‚LruCacheçš„åŽŸç†æ˜¯åˆ©ç”¨LinkedHashMapæŒæœ‰å¯¹è±¡çš„å¼ºå¼•ç”¨ï¼ŒæŒ‰ç…§Lruç®—æ³•è¿›è¡Œå¯¹è±¡æ·˜æ±°ã€‚å…·ä½“è¯´æ¥å‡è®¾æˆ‘ä»¬ä»Žè¡¨å°¾è®¿é—®æ•°æ®ï¼Œåœ¨è¡¨å¤´åˆ é™¤æ•°æ®ï¼Œå½“è®¿é—®çš„æ•°æ®é¡¹åœ¨é“¾è¡¨ä¸­å­˜åœ¨æ—¶ï¼Œåˆ™å°†è¯¥æ•°æ®é¡¹ç§»åŠ¨åˆ°è¡¨å°¾ï¼Œå¦åˆ™åœ¨è¡¨å°¾æ–°å»ºä¸€ä¸ªæ•°æ®é¡¹ã€‚å½“é“¾è¡¨å®¹é‡è¶…è¿‡ä¸€å®šé˜ˆå€¼ï¼Œåˆ™ç§»é™¤è¡¨å¤´çš„æ•°æ®ã€‚ ä¸ºä»€ä¹ˆä¼šé€‰æ‹©LinkedHashMapå‘¢ï¼Ÿè¿™è·ŸLinkedHashMapçš„ç‰¹æ€§æœ‰å…³ï¼ŒLinkedHashMapçš„æž„é€ å‡½æ•°é‡Œæœ‰ä¸ªå¸ƒå°”å‚æ•°accessOrderï¼Œå½“å®ƒä¸ºtrueæ—¶ï¼ŒLinkedHashMapä¼šä»¥è®¿é—®é¡ºåºä¸ºåºæŽ’åˆ—å…ƒç´ ï¼Œå¦åˆ™ä»¥æ’å…¥é¡ºåºä¸ºåºæŽ’åºå…ƒç´ ã€‚DiskLruCacheä¸ŽLruCacheåŽŸç†ç›¸ä¼¼ï¼Œåªæ˜¯å¤šäº†ä¸€ä¸ªjournalæ–‡ä»¶æ¥åšç£ç›˜æ–‡ä»¶çš„ç®¡ç†å’Œè¿Žç¥žï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š libcore.io.DiskLruCache111 DIRTY 1517126350519CLEAN 1517126350519 5325928REMOVE 1517126350519123456789101112æ³¨ï¼šè¿™é‡Œçš„ç¼“å­˜ç›®å½•æ˜¯åº”ç”¨çš„ç¼“å­˜ç›®å½•/data/data/pckagename/cacheï¼Œæœªrootçš„æ‰‹æœºå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›å…¥åˆ°è¯¥ç›®å½•ä¸­æˆ–è€…å°†è¯¥ç›®å½•æ•´ä½“æ‹·è´å‡ºæ¥ï¼š```java//è¿›å…¥/data/data/pckagename/cacheç›®å½•adb shellrun-as com.your.packagename cp /data/data/com.your.packagename///å°†/data/data/pckagenameç›®å½•æ‹·è´å‡ºæ¥adb backup -noapk com.your.packagename æˆ‘ä»¬æ¥åˆ†æžä¸‹è¿™ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼š ç¬¬ä¸€è¡Œï¼šlibcore.io.DiskLruCacheï¼Œå›ºå®šå­—ç¬¦ä¸²ã€‚ ç¬¬äºŒè¡Œï¼š1ï¼ŒDiskLruCacheæºç ç‰ˆæœ¬å·ã€‚ ç¬¬ä¸‰è¡Œï¼š1ï¼ŒAppçš„ç‰ˆæœ¬å·ï¼Œé€šè¿‡open()æ–¹æ³•ä¼ å…¥è¿›åŽ»çš„ã€‚ ç¬¬å››è¡Œï¼š1ï¼Œæ¯ä¸ªkeyå¯¹åº”å‡ ä¸ªæ–‡ä»¶ï¼Œä¸€èˆ¬ä¸º1. ç¬¬äº”è¡Œï¼šç©ºè¡Œ ç¬¬å…­è¡ŒåŠåŽç»­è¡Œï¼šç¼“å­˜æ“ä½œè®°å½•ã€‚ ç¬¬å…­è¡ŒåŠåŽç»­è¡Œè¡¨ç¤ºç¼“å­˜æ“ä½œè®°å½•ï¼Œå…³äºŽæ“ä½œè®°å½•ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ä»¥ä¸‹ä¸‰ç‚¹ï¼š DIRTY è¡¨ç¤ºä¸€ä¸ªentryæ­£åœ¨è¢«å†™å…¥ã€‚å†™å…¥åˆ†ä¸¤ç§æƒ…å†µï¼Œå¦‚æžœæˆåŠŸä¼šç´§æŽ¥ç€å†™å…¥ä¸€è¡ŒCLEANçš„è®°å½•ï¼›å¦‚æžœå¤±è´¥ï¼Œä¼šå¢žåŠ ä¸€è¡ŒREMOVEè®°å½•ã€‚æ³¨æ„å•ç‹¬åªæœ‰DIRTYçŠ¶æ€çš„è®°å½•æ˜¯éžæ³•çš„ã€‚ å½“æ‰‹åŠ¨è°ƒç”¨remove(key)æ–¹æ³•çš„æ—¶å€™ä¹Ÿä¼šå†™å…¥ä¸€æ¡REMOVEè®°å½•ã€‚ READå°±æ˜¯è¯´æ˜Žæœ‰ä¸€æ¬¡è¯»å–çš„è®°å½•ã€‚ CLEANçš„åŽé¢è¿˜è®°å½•äº†æ–‡ä»¶çš„é•¿åº¦ï¼Œæ³¨æ„å¯èƒ½ä¼šä¸€ä¸ªkeyå¯¹åº”å¤šä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆå°±ä¼šæœ‰å¤šä¸ªæ•°å­—ã€‚ Android ä¸­è·¨è¿›ç¨‹é€šè®¯çš„å‡ ç§æ–¹å¼ Android è·¨è¿›ç¨‹é€šä¿¡ï¼Œåƒ Intentï¼ŒcontentProviderï¼Œbroadcastï¼Œservice éƒ½å¯ä»¥è·¨è¿›ç¨‹é€šä¿¡ã€‚ Intentï¼šè¿™ç§è·¨è¿›ç¨‹æ–¹å¼å¹¶ä¸æ˜¯è®¿é—®å†…å­˜çš„å½¢å¼ï¼Œå®ƒéœ€è¦ä¼ é€’ä¸€ä¸ª uriï¼Œæ¯”å¦‚æ‰“ç”µè¯ contentProviderï¼šè¿™ç§å½¢å¼æ˜¯ä½¿ç”¨æ•°æ®å…±äº«çš„æ–¹å¼è¿›è¡Œæ•°æ®å…±äº« serviceï¼šè¿œç¨‹æœåŠ¡ï¼Œaidl å¹¿æ’­ï¼š ä¿å­˜ Activity çŠ¶æ€onSaveInstanceState(Bundle)ä¼šåœ¨ activity è½¬å…¥åŽå°çŠ¶æ€ä¹‹å‰è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯ onStop()æ–¹æ³•ä¹‹å‰ï¼ŒonPause æ–¹æ³•ä¹‹åŽè¢«è°ƒç”¨ï¼› Android ä¸­çš„å‡ ç§åŠ¨ç”» å¸§åŠ¨ç”»ï¼šæŒ‡é€šè¿‡æŒ‡å®šæ¯ä¸€å¸§çš„å›¾ç‰‡å’Œæ’­æ”¾æ—¶é—´ï¼Œæœ‰åºçš„è¿›è¡Œæ’­æ”¾è€Œå½¢æˆåŠ¨ç”»æ•ˆæžœï¼Œæ¯”å¦‚éŸ³ä¹çš„å¾‹åŠ¨æ¡ è¡¥é—´åŠ¨ç”»ï¼šæŒ‡é€šè¿‡æŒ‡å®š View çš„åˆå§‹çŠ¶æ€ã€å˜åŒ–æ—¶é—´ã€æ–¹å¼ï¼Œé€šè¿‡ä¸€ç³»åˆ—çš„ç®—æ³•åŽ»è¿›è¡Œå›¾å½¢å˜æ¢ï¼Œä»Žè€Œå½¢æˆåŠ¨ç”»æ•ˆæžœï¼Œä¸»è¦æœ‰ Alphaã€Scaleã€Translateã€Rotate å››ç§æ•ˆæžœã€‚æ³¨æ„ï¼šåªæ˜¯åœ¨è§†å›¾å±‚å®žçŽ°äº†åŠ¨ç”»æ•ˆæžœï¼Œå¹¶æ²¡æœ‰çœŸæ­£æ”¹å˜ View çš„å±žæ€§ï¼Œæ¯”å¦‚æ»‘åŠ¨åˆ—è¡¨ï¼Œæ”¹å˜æ ‡é¢˜æ çš„é€æ˜Žåº¦ã€‚ å±žæ€§åŠ¨ç”»ï¼šåœ¨ Android3.0 çš„æ—¶å€™æ‰æ”¯æŒï¼Œé€šè¿‡ä¸æ–­çš„æ”¹å˜ View çš„å±žæ€§ï¼Œä¸æ–­çš„é‡ç»˜è€Œå½¢æˆåŠ¨ç”»æ•ˆæžœã€‚ç›¸æ¯”äºŽè§†å›¾åŠ¨ç”»ï¼ŒView çš„å±žæ€§æ˜¯çœŸæ­£æ”¹å˜äº†ã€‚æ¯”å¦‚ View çš„æ—‹è½¬ï¼Œæ”¾å¤§ï¼Œç¼©å°ã€‚ PathClassLoaderä¸ŽDexClassLoaderæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ PathClassLoaderï¼šåªèƒ½åŠ è½½å·²ç»å®‰è£…åˆ°Androidç³»ç»Ÿçš„APKæ–‡ä»¶ï¼Œå³/data/appç›®å½•ï¼ŒAndroidé»˜è®¤çš„ç±»åŠ è½½å™¨ã€‚ DexClassLoaderï¼šå¯ä»¥åŠ è½½ä»»æ„ç›®å½•ä¸‹çš„dexã€jarã€apkã€zipæ–‡ä»¶ã€‚ WebViewä¼˜åŒ–äº†è§£å—ï¼Œå¦‚ä½•æé«˜WebViewçš„åŠ è½½é€Ÿåº¦ï¼Ÿä¸ºä»€ä¹ˆWebViewåŠ è½½ä¼šæ…¢å‘¢ï¼Ÿ è¿™æ˜¯å› ä¸ºåœ¨å®¢æˆ·ç«¯ä¸­ï¼ŒåŠ è½½H5é¡µé¢ä¹‹å‰ï¼Œéœ€è¦å…ˆåˆå§‹åŒ–WebViewï¼Œåœ¨WebViewå®Œå…¨åˆå§‹åŒ–å®Œæˆä¹‹å‰ï¼ŒåŽç»­çš„ç•Œé¢åŠ è½½è¿‡ç¨‹éƒ½æ˜¯è¢«é˜»å¡žçš„ã€‚ ä¼˜åŒ–æ‰‹æ®µå›´ç»•ç€ä»¥ä¸‹ä¸¤ä¸ªç‚¹è¿›è¡Œï¼š é¢„åŠ è½½WebViewã€‚ åŠ è½½WebViewçš„åŒæ—¶ï¼Œè¯·æ±‚H5é¡µé¢æ•°æ®ã€‚ å› æ­¤å¸¸è§çš„æ–¹æ³•æ˜¯ï¼š å…¨å±€WebViewã€‚ å®¢æˆ·ç«¯ä»£ç†é¡µé¢è¯·æ±‚ã€‚WebViewåˆå§‹åŒ–å®ŒæˆåŽå‘å®¢æˆ·ç«¯è¯·æ±‚æ•°æ®ã€‚ assetå­˜æ”¾ç¦»çº¿åŒ…ã€‚ é™¤æ­¤ä¹‹å¤–è¿˜æœ‰ä¸€äº›å…¶ä»–çš„ä¼˜åŒ–æ‰‹æ®µï¼š è„šæœ¬æ‰§è¡Œæ…¢ï¼Œå¯ä»¥è®©è„šæœ¬æœ€åŽè¿è¡Œï¼Œä¸é˜»å¡žé¡µé¢è§£æžã€‚ DNSä¸Žé“¾æŽ¥æ…¢ï¼Œå¯ä»¥è®©å®¢æˆ·ç«¯å¤ç”¨ä½¿ç”¨çš„åŸŸåä¸Žé“¾æŽ¥ã€‚ Reactæ¡†æž¶ä»£ç æ‰§è¡Œæ…¢ï¼Œå¯ä»¥å°†è¿™éƒ¨åˆ†ä»£ç æ‹†åˆ†å‡ºæ¥ï¼Œæå‰è¿›è¡Œè§£æžã€‚ ä¿å­˜ Activity çŠ¶æ€Javaå’ŒJSçš„ç›¸äº’è°ƒç”¨æ€Žä¹ˆå®žçŽ°ï¼Œæœ‰åšè¿‡ä»€ä¹ˆä¼˜åŒ–å—ï¼Ÿjockeyjsï¼šhttps://github.com/tcoulter/jockeyjs å¯¹åè®®è¿›è¡Œç»Ÿä¸€çš„å°è£…å’Œå¤„ç†ã€‚ JNIäº†è§£å—ï¼ŒJavaä¸ŽC++å¦‚ä½•ç›¸äº’è°ƒç”¨ï¼ŸJavaè°ƒç”¨C++ åœ¨Javaä¸­å£°æ˜ŽNativeæ–¹æ³•ï¼ˆå³éœ€è¦è°ƒç”¨çš„æœ¬åœ°æ–¹æ³•ï¼‰ ç¼–è¯‘ä¸Šè¿° Javaæºæ–‡ä»¶javacï¼ˆå¾—åˆ° .classæ–‡ä»¶ï¼‰ é€šè¿‡ javah å‘½ä»¤å¯¼å‡ºJNIçš„å¤´æ–‡ä»¶ï¼ˆ.hæ–‡ä»¶ï¼‰ ä½¿ç”¨ Javaéœ€è¦äº¤äº’çš„æœ¬åœ°ä»£ç  å®žçŽ°åœ¨ Javaä¸­å£°æ˜Žçš„Nativeæ–¹æ³• ç¼–è¯‘.soåº“æ–‡ä»¶ é€šè¿‡Javaå‘½ä»¤æ‰§è¡Œ Javaç¨‹åºï¼Œæœ€ç»ˆå®žçŽ°Javaè°ƒç”¨æœ¬åœ°ä»£ç  C++è°ƒç”¨Java ä»Žclasspathè·¯å¾„ä¸‹æœç´¢ClassMethodè¿™ä¸ªç±»ï¼Œå¹¶è¿”å›žè¯¥ç±»çš„Classå¯¹è±¡ã€‚ èŽ·å–ç±»çš„é»˜è®¤æž„é€ æ–¹æ³•IDã€‚ æŸ¥æ‰¾å®žä¾‹æ–¹æ³•çš„IDã€‚ åˆ›å»ºè¯¥ç±»çš„å®žä¾‹ã€‚ è°ƒç”¨å¯¹è±¡çš„å®žä¾‹æ–¹æ³•ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445JNIEXPORT void JNICALL Java_com_study_jnilearn_AccessMethod_callJavaInstaceMethod (JNIEnv *env, jclass cls) &#123; jclass clazz = NULL; jobject jobj = NULL; jmethodID mid_construct = NULL; jmethodID mid_instance = NULL; jstring str_arg = NULL; // 1ã€ä»Žclasspathè·¯å¾„ä¸‹æœç´¢ClassMethodè¿™ä¸ªç±»ï¼Œå¹¶è¿”å›žè¯¥ç±»çš„Classå¯¹è±¡ clazz = (*env)-&gt;FindClass(env, "com/study/jnilearn/ClassMethod"); if (clazz == NULL) &#123; printf("æ‰¾ä¸åˆ°'com.study.jnilearn.ClassMethod'è¿™ä¸ªç±»"); return; &#125; // 2ã€èŽ·å–ç±»çš„é»˜è®¤æž„é€ æ–¹æ³•ID mid_construct = (*env)-&gt;GetMethodID(env,clazz, "&lt;init&gt;","()V"); if (mid_construct == NULL) &#123; printf("æ‰¾ä¸åˆ°é»˜è®¤çš„æž„é€ æ–¹æ³•"); return; &#125; // 3ã€æŸ¥æ‰¾å®žä¾‹æ–¹æ³•çš„ID mid_instance = (*env)-&gt;GetMethodID(env, clazz, "callInstanceMethod", "(Ljava/lang/String;I)V"); if (mid_instance == NULL) &#123; return; &#125; // 4ã€åˆ›å»ºè¯¥ç±»çš„å®žä¾‹ jobj = (*env)-&gt;NewObject(env,clazz,mid_construct); if (jobj == NULL) &#123; printf("åœ¨com.study.jnilearn.ClassMethodç±»ä¸­æ‰¾ä¸åˆ°callInstanceMethodæ–¹æ³•"); return; &#125; // 5ã€è°ƒç”¨å¯¹è±¡çš„å®žä¾‹æ–¹æ³• str_arg = (*env)-&gt;NewStringUTF(env,"æˆ‘æ˜¯å®žä¾‹æ–¹æ³•"); (*env)-&gt;CallVoidMethod(env,jobj,mid_instance,str_arg,200); // åˆ é™¤å±€éƒ¨å¼•ç”¨ (*env)-&gt;DeleteLocalRef(env,clazz); (*env)-&gt;DeleteLocalRef(env,jobj); (*env)-&gt;DeleteLocalRef(env,str_arg); &#125; äº†è§£æ’ä»¶åŒ–å’Œçƒ­ä¿®å¤å—ï¼Œå®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œç†è§£å®ƒä»¬çš„åŽŸç†å—ï¼Ÿ æ’ä»¶åŒ–ï¼šæ’ä»¶åŒ–æ˜¯ä½“çŽ°åœ¨åŠŸèƒ½æ‹†åˆ†æ–¹é¢çš„ï¼Œå®ƒå°†æŸä¸ªåŠŸèƒ½ç‹¬ç«‹æå–å‡ºæ¥ï¼Œç‹¬ç«‹å¼€å‘ï¼Œç‹¬ç«‹æµ‹è¯•ï¼Œå†æ’å…¥åˆ°ä¸»åº”ç”¨ä¸­ã€‚ä¾æ¬¡æ¥è¾ƒå°‘ä¸»åº”ç”¨çš„è§„æ¨¡ã€‚ çƒ­ä¿®å¤ï¼šçƒ­ä¿®å¤æ˜¯ä½“çŽ°åœ¨bugä¿®å¤æ–¹é¢çš„ï¼Œå®ƒå®žçŽ°çš„æ˜¯ä¸éœ€è¦é‡æ–°å‘ç‰ˆå’Œé‡æ–°å®‰è£…ï¼Œå°±å¯ä»¥åŽ»ä¿®å¤å·²çŸ¥çš„bugã€‚ åˆ©ç”¨PathClassLoaderå’ŒDexClassLoaderåŽ»åŠ è½½ä¸Žbugç±»åŒåçš„ç±»ï¼Œæ›¿æ¢æŽ‰bugç±»ï¼Œè¿›è€Œè¾¾åˆ°ä¿®å¤bugçš„ç›®çš„ï¼ŒåŽŸç†æ˜¯åœ¨appæ‰“åŒ…çš„æ—¶å€™é˜»æ­¢ç±»æ‰“ä¸ŠCLASS_ISPREVERIFIEDæ ‡å¿—ï¼Œç„¶åŽåœ¨çƒ­ä¿®å¤çš„æ—¶å€™åŠ¨æ€æ”¹å˜BaseDexClassLoaderå¯¹è±¡é—´æŽ¥å¼•ç”¨çš„dexElementsï¼Œæ›¿æ¢æŽ‰æ—§çš„ç±»ã€‚ ç›®å‰çƒ­ä¿®å¤æ¡†æž¶ä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼š Sophixï¼šä¿®æ”¹æ–¹æ³•æŒ‡é’ˆã€‚ Tinkerï¼šä¿®æ”¹dexæ•°ç»„å…ƒç´ ã€‚ å¦‚ä½•åšæ€§èƒ½ä¼˜åŒ–ï¼Ÿ èŠ‚åˆ¶çš„ä½¿ç”¨Serviceï¼Œå½“å¯åŠ¨ä¸€ä¸ªServiceæ—¶ï¼Œç³»ç»Ÿæ€»æ˜¯å€¾å‘äºŽä¿ç•™è¿™ä¸ªServiceä¾èµ–çš„è¿›ç¨‹ï¼Œè¿™æ ·ä¼šé€ æˆç³»ç»Ÿèµ„æºçš„æµªè´¹ï¼Œå¯ä»¥ä½¿ç”¨IntentServiceï¼Œæ‰§è¡Œå®Œæˆä»»åŠ¡åŽä¼šè‡ªåŠ¨åœæ­¢ã€‚ å½“ç•Œé¢ä¸å¯è§æ—¶é‡Šæ”¾å†…å­˜ï¼Œå¯ä»¥é‡å†™Activityçš„onTrimMemory()æ–¹æ³•ï¼Œç„¶åŽç›‘å¬TRIM_MEMORY_UI_HIDDENè¿™ä¸ªçº§åˆ«ï¼Œè¿™ä¸ªçº§åˆ«è¯´æ˜Žç”¨æˆ·ç¦»å¼€äº†é¡µé¢ï¼Œå¯ä»¥è€ƒè™‘é‡Šæ”¾å†…å­˜å’Œèµ„æºã€‚ å¯¹å›¾ç‰‡æœ¬èº«è¿›è¡Œæ“ä½œã€‚å°½é‡ä¸è¦ä½¿ç”¨ setImageBitmapã€setImageResourceã€BitmapFactory.decodeResource æ¥è®¾ç½®ä¸€å¼ å¤§å›¾ï¼Œå› ä¸ºè¿™äº›æ–¹æ³•åœ¨å®Œæˆ decode åŽï¼Œæœ€ç»ˆéƒ½æ˜¯é€šè¿‡ java å±‚çš„ createBitmap æ¥å®Œæˆçš„ï¼Œéœ€è¦æ¶ˆè€—æ›´å¤šå†…å­˜ã€‚ é¿å…åœ¨Bitmapæµªè´¹è¿‡å¤šçš„å†…å­˜ï¼Œä½¿ç”¨åŽ‹ç¼©è¿‡çš„å›¾ç‰‡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Frescoç­‰åº“æ¥ä¼˜åŒ–å¯¹Bitmapæ˜¾ç¤ºçš„ç®¡ç†ã€‚ä¸ç”¨çš„å›¾ç‰‡è®°å¾—è°ƒç”¨å›¾ç‰‡çš„ recycle()æ–¹æ³•å›žæ”¶ã€‚ ä½¿ç”¨ä¼˜åŒ–è¿‡çš„æ•°æ®é›†åˆSparseArrayä»£æ›¿HashMapï¼ŒHashMapä¸ºæ¯ä¸ªé”®å€¼éƒ½æä¾›ä¸€ä¸ªå¯¹è±¡å…¥å£ï¼Œä½¿ç”¨SparseArrayå¯ä»¥å…åŽ»åŸºæœ¬å¯¹è±¡ç±»åž‹è½¬æ¢ä¸ºå¼•ç”¨æ•°æ®ç±»æƒ³çš„æ—¶é—´ã€‚ ANRANR å…¨å Application Not Respondingï¼Œä¹Ÿå°±æ˜¯â€œåº”ç”¨æ— å“åº”â€ã€‚å½“æ“ä½œåœ¨ä¸€æ®µæ—¶é—´å†…ç³»ç»Ÿæ— æ³•å¤„ç†æ—¶ï¼Œç³»ç»Ÿå±‚é¢ä¼šå¼¹å‡º ANR å¯¹è¯æ¡†äº§ç”ŸåŽŸå› &amp;è§£å†³æ–¹æ³•ï¼š 5s å†…æ— å“åº”ç”¨æˆ·è¾“å…¥äº‹ä»¶(ä¾‹å¦‚é”®ç›˜è¾“å…¥ï¼Œè§¦æ‘¸å±å¹•ç­‰)ã€‚ ä¸è¦åœ¨ä¸»çº¿ç¨‹ä¸­åšè€—æ—¶æ“ä½œï¼Œè€Œåº”åœ¨å­çº¿ç¨‹ä¸­æ¥å®žçŽ°ã€‚å¦‚ onCreate()å’Œ onResume()é‡Œå°½å¯èƒ½å°‘çš„åŽ»åšåˆ›å»ºæ“ä½œã€‚ BroadcastReceiver åœ¨ 10s å†…æ— æ³•ç»“æŸ åº”ç”¨ç¨‹åºåº”è¯¥é¿å…åœ¨ BroadcastReceiver é‡Œåšè€—æ—¶æ“ä½œæˆ–è®¡ç®—ã€‚ é¿å…åœ¨ IntentReceiver é‡Œå¯åŠ¨ä¸€ä¸ª Activityï¼Œå› ä¸ºå®ƒä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç”»é¢ï¼Œå¹¶ä»Žå½“å‰ç”¨æˆ·æ­£åœ¨è¿è¡Œçš„ç¨‹åºä¸ŠæŠ¢å¤ºç„¦ç‚¹ Service 20s å†…æ— æ³•ç»“æŸ service æ˜¯è¿è¡Œåœ¨ä¸»çº¿ç¨‹çš„ï¼Œæ‰€ä»¥å† service ä¸­åšè€—æ—¶æ“ä½œï¼Œå¿…é¡»è¦æ”¾åœ¨å­çº¿ç¨‹ä¸­ã€‚ å¦‚æžœé˜²æ­¢è¿‡åº¦ç»˜åˆ¶ï¼Œå¦‚ä½•åšå¸ƒå±€ä¼˜åŒ–ï¼Ÿ ä½¿ç”¨includeå¤ç”¨å¸ƒå±€æ–‡ä»¶ã€‚ ä½¿ç”¨mergeæ ‡ç­¾é¿å…åµŒå¥—å¸ƒå±€ã€‚ ä½¿ç”¨stubæ ‡ç­¾ä»…åœ¨éœ€è¦çš„æ—¶å€™åœ¨å±•ç¤ºå‡ºæ¥ã€‚ å¦‚ä½•æäº¤ä»£ç è´¨é‡ï¼Ÿ é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡ï¼Œå°½å¯èƒ½é¿å…é¢‘ç¹çš„åˆ›å»ºä¸´æ—¶å¯¹è±¡ï¼Œä¾‹å¦‚åœ¨forå¾ªçŽ¯å†…ï¼Œå‡å°‘GCçš„æ¬¡æ•°ã€‚ å°½é‡ä½¿ç”¨åŸºæœ¬æ•°æ®ç±»åž‹ä»£æ›¿å¼•ç”¨æ•°æ®ç±»åž‹ã€‚ é™æ€æ–¹æ³•è°ƒç”¨æ•ˆçŽ‡é«˜äºŽåŠ¨æ€æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥é¿å…åˆ›å»ºé¢å¤–å¯¹è±¡ã€‚ å¯¹äºŽåŸºæœ¬æ•°æ®ç±»åž‹å’ŒStringç±»åž‹çš„å¸¸é‡è¦ä½¿ç”¨static finalä¿®é¥°ï¼Œè¿™æ ·å¸¸é‡ä¼šåœ¨dexæ–‡ä»¶çš„åˆå§‹åŒ–å™¨ä¸­è¿›è¡Œåˆå§‹åŒ–ï¼Œä½¿ç”¨çš„æ—¶å€™å¯ä»¥ç›´æŽ¥ä½¿ç”¨ã€‚ å¤šä½¿ç”¨ç³»ç»ŸAPIï¼Œä¾‹å¦‚æ•°ç»„æ‹·è´System.arrayCopy()æ–¹æ³•ï¼Œè¦æ¯”æˆ‘ä»¬ç”¨forå¾ªçŽ¯æ•ˆçŽ‡å¿«9å€ä»¥ä¸Šï¼Œå› ä¸ºç³»ç»ŸAPIå¾ˆå¤šéƒ½æ˜¯é€šè¿‡åº•å±‚çš„æ±‡ç¼–æ¨¡å¼æ‰§è¡Œçš„ï¼Œæ•ˆçŽ‡æ¯”è¾ƒé«˜ã€‚ æœ‰æ²¡æœ‰é‡åˆ°64ké—®é¢˜ï¼Œä¸ºä»€ä¹ˆï¼Œå¦‚ä½•è§£å†³ï¼Ÿ åœ¨DEXæ–‡ä»¶ä¸­ï¼Œmethodã€fieldã€classç­‰çš„ä¸ªæ•°ä½¿ç”¨shortç±»åž‹æ¥åšç´¢å¼•ï¼Œå³ä¸¤ä¸ªå­—èŠ‚ï¼ˆ65535ï¼‰ï¼Œmethodã€fieldã€classç­‰å‡æœ‰æ­¤é™åˆ¶ã€‚ APKåœ¨å®‰è£…è¿‡ç¨‹ä¸­ä¼šè°ƒç”¨dexoptå°†DEXæ–‡ä»¶ä¼˜åŒ–æˆODEXæ–‡ä»¶ï¼Œdexoptä½¿ç”¨LinearAllocæ¥å­˜å‚¨åº”ç”¨ä¿¡æ¯ï¼Œå…³äºŽLinearAllocç¼“å†²åŒºå¤§å°ï¼Œä¸åŒçš„ç‰ˆæœ¬ç»åŽ†äº†4M/8M/16Mçš„é™åˆ¶ï¼Œè¶…å‡ºç¼“å†²åŒºæ—¶å°±ä¼šæŠ›å‡ºINSTALL_FAILED_DEXOPTé”™è¯¯ã€‚ è§£å†³æ–¹æ¡ˆæ˜¯Googleçš„MultiDexæ–¹æ¡ˆï¼Œå…·ä½“å‚è§ï¼šé…ç½®æ–¹æ³•æ•°è¶…è¿‡ 64K çš„åº”ç”¨ã€‚ MVCã€MVPä¸ŽMVVMä¹‹é—´çš„å¯¹æ¯”åˆ†æžï¼Ÿ MVCï¼šPCæ—¶ä»£å°±æœ‰çš„æž¶æž„æ–¹æ¡ˆï¼Œåœ¨Androidä¸Šä¹Ÿæ˜¯æœ€æ—©çš„æ–¹æ¡ˆï¼ŒActivity/Fragmentè¿™äº›ä¸Šå¸è§’è‰²æ—¢æ‰¿æ‹…äº†Vçš„è§’è‰²ï¼Œä¹Ÿæ‰¿æ‹…äº†Cçš„è§’è‰²ï¼Œå°é¡¹ç›®å¼€å‘èµ·æ¥ååˆ†é¡ºæ‰‹ï¼Œå¤§é¡¹ç›®å°±ä¼šé‡åˆ°è€¦åˆè¿‡é‡ï¼ŒActivity/Fragmentç±»è¿‡å¤§ç­‰é—®é¢˜ã€‚ MVPï¼šä¸ºäº†è§£å†³MVCè€¦åˆè¿‡é‡çš„é—®é¢˜ï¼ŒMVPçš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯æä¾›ä¸€ä¸ªPresenterå°†è§†å›¾é€»è¾‘Iå’Œä¸šåŠ¡é€»è¾‘ç›¸åˆ†ç¦»ï¼Œè¾¾åˆ°è§£è€¦çš„ç›®çš„ã€‚ MVVMï¼šä½¿ç”¨ViewModelä»£æ›¿Presenterï¼Œå®žçŽ°æ•°æ®ä¸ŽViewçš„åŒå‘ç»‘å®šï¼Œè¿™å¥—æ¡†æž¶æœ€æ—©ä½¿ç”¨çš„data-bindingå°†æ•°æ®ç»‘å®šåˆ°xmlé‡Œï¼Œè¿™ä¹ˆåšåœ¨å¤§è§„æ¨¡åº”ç”¨çš„æ—¶å€™æ˜¯ä¸è¡Œçš„ï¼Œä¸è¿‡æ•°æ®ç»‘å®šæ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„æ¦‚å¿µï¼ŒåŽç»­GoogleåˆæŽ¨å‡ºäº†ViewModelç»„ä»¶ä¸ŽLiveDataç»„ä»¶ã€‚ViewModelç»„ä»¶è§„èŒƒäº†ViewModelæ‰€å¤„çš„åœ°ä½ã€ç”Ÿå‘½å‘¨æœŸã€ç”Ÿäº§æ–¹å¼ä»¥åŠä¸€ä¸ªActivityä¸‹å¤šä¸ªFragmentå…±äº«ViewModelæ•°æ®çš„é—®é¢˜ã€‚LiveDataç»„ä»¶åˆ™æä¾›äº†åœ¨Javaå±‚é¢Viewè®¢é˜…ViewModelæ•°æ®æºçš„å®žçŽ°æ–¹æ¡ˆã€‚]]></content>
      <tags>
        <tag>Android</tag>
        <tag>Interview</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¡ç®—æœºç½‘ç»œåŸºç¡€æ±‡æ€»]]></title>
    <url>%2F2018%2F03%2F30%2F%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB%2F</url>
    <content type="text"><![CDATA[è®¡ç®—æœºç½‘ç»œä½“ç³»åˆ†ç±»ï¼šè®¡ç®—æœºç½‘ç»œæ•´ä¸ªä½“ç³»æœ‰ä¸¤ä¸ªå¤§çš„åˆ†ç±»ï¼šä¸€ä¸ªæ˜¯å›½é™…ç»„ç»‡åˆ¶å®šçš„OSIä¸ƒå±‚æ¨¡åž‹ï¼Œä¸€ç§æ˜¯å®žé™…ä½¿ç”¨ä¸­çš„TCP/IPå››å±‚æ¨¡åž‹ã€‚ OSIä¸ƒå±‚æ¨¡åž‹ TCP/IPå››å±‚æ¨¡åž‹ åº”ç”¨å±‚ â€”- è¡¨ç¤ºå±‚ åº”ç”¨å±‚ ä¼šè¯å±‚ â€”- ä¼ è¾“å±‚ ä¼ è¾“å±‚ ç½‘ç»œå±‚ ç½‘ç»œå±‚ æ•°æ®é“¾è·¯å±‚ ç‰©ç†æŽ¥å…¥å±‚ ç‰©ç†å±‚ â€”- ç‰©ç†å±‚ï¼šç‰©ç†å±‚ä¸»è¦æ˜¯å®žçŽ°ä¸»æœºå’Œç½‘ç»œä¹‹é—´çš„ç‰©ç†è¿žæŽ¥ï¼Œè§„å®šä¸€äº›ä¸Žä¼ è¾“åª’ä½“æŽ¥å£æœ‰å…³çš„ä¸€äº›ç‰¹æ€§ã€‚ é€šä¿¡æ–¹å¼ï¼š å•å·¥é€šä¿¡ï¼šåªèƒ½ç”±Aä¸»æœºå‘Bä¸»æœºå‘é€æ¶ˆæ¯ï¼Œé€šä¿¡æ˜¯å•å‘çš„ã€‚ åŠåŒå·¥é€šä¿¡ï¼šåŒä¸€æ—¶é—´åªèƒ½æ˜¯ç”±Aä¸»æœºå‘Bä¸»æœºæˆ–è€…æ˜¯Bä¸»æœºå‘Aä¸»æœºå‘é€ä¿¡æ¯ï¼Œä¸èƒ½åŒæ—¶å‘é€æ¶ˆæ¯ã€‚ å…¨åŒå·¥é€šä¿¡ï¼š Aä¸»æœºå’ŒBä¸»æœºå¯ä»¥å®žçŽ°åœ¨åŒä¸€æ—¶é—´å†…æ—¢æŽ¥æ”¶æ¶ˆæ¯ï¼Œåˆå‘é€æ¶ˆæ¯ï¼Œæžå¤§çš„æå‡äº†é€šä¿¡æ•ˆçŽ‡ã€‚ å¸¸è§å¼•å¯¼åž‹ä¼ è¾“åª’ä½“ï¼šåŒç»žçº¿ï¼šåˆ†ä¸ºå±è”½åŒç»žçº¿ï¼ˆSTPï¼‰å’Œéžå±è”½åŒç»žçº¿ï¼ˆUTPï¼‰ï¼Œå±è”½åŒç»žçº¿å°±æ˜¯åœ¨éžå±è”½åŒç»žçº¿å¤–è¾¹åˆåŠ äº†ä¸€å±‚å±è”½å±‚ tipsï¼šä¸ºä»€ä¹ˆåŒç»žçº¿è¦ä¸¤æ ¹çº¿ç»žèµ·æ¥ï¼Œä¸¤ä¸ªçº¿ç»žèµ·æ¥å¯ä»¥æœ‰æ•ˆçš„å‡å°‘ç›¸äº’ä¹‹é—´çš„ç”µç£å¹²æ‰°ã€‚ åŒè½´ç”µç¼†ï¼šç”±å†…å¯¼ä½“é“œåˆ¶èŠ¯çº¿ï¼Œç»ç¼˜å±‚ï¼Œç½‘çŠ¶ç¼–ç»‡çš„å¤–å¯¼ä½“å±è”½å±‚ï¼Œä»¥åŠå¡‘æ–™ä¿æŠ¤å¤–å±‚ç»„æˆã€‚æœ‰è‰¯å¥½çš„æŠ—å¹²æ‰°æ€§ï¼Œè¢«å¹¿æ³›ç”¨äºŽè¾ƒé«˜é€ŸçŽ‡çš„ä¼ è¾“ã€‚ å…‰ç¼†ï¼šç”±éžå¸¸é€æ˜Žçš„çŸ³è‹±çŽ»ç’ƒæ‹‰æˆç»†ä¸ï¼Œä¸»è¦ç”±çº¤èŠ¯å’ŒåŒ…å±‚æž„æˆåŒå±‚é€šè®¯æŸ±ã€‚å¯ä»¥åˆ†ä¸ºå•æ¨¡å…‰çº¤å’Œå¤šæ¨¡å…‰çº¤ã€‚ ä¿¡é“å¤ç”¨æŠ€æœ¯ï¼š é¢‘åˆ†å¤ç”¨ï¼šæ ¹æ®ä¼ è¾“çš„æ³¢çš„é¢‘çŽ‡çš„ä¸åŒï¼Œå°†ä¸åŒé¢‘æ®µçš„æ³¢ç”¨äºŽä¸åŒçš„é€šä¿¡ã€‚ æ—¶åˆ†å¤ç”¨ï¼šå°†æ—¶é—´åˆ†å‰²ä¸ºæ—¶é—´æ®µï¼Œè§„å®šåœ¨æŸä¸ªæ—¶é—´æ®µå†…å‘é€ä»€ä¹ˆæ ·çš„ä¿¡æ¯ï¼Œæ ¹æ®æ—¶é—´æ®µæ¥è¿›è¡Œä¿¡æ¯ç±»åˆ«çš„åŒºåˆ†ã€‚ä¹Ÿç§°ä¸ºåŒæ­¥æ—¶åˆ†å¤ç”¨ ç»Ÿè®¡æ—¶åˆ†å¤ç”¨ï¼šåŸºäºŽæ—¶åˆ†å¤ç”¨çš„ä¸€ç§æ”¹è¿›ï¼Œç”±äºŽåŸºæœ¬çš„æ—¶åˆ†å¤ç”¨å¹¶æ²¡æœ‰è€ƒè™‘åˆ°æ¯ä¸ªæ—¶é—´æ®µå†…æ˜¯å¦æœ‰ä¿¡æ¯å‘å‡ºï¼Œä¾‹å¦‚è¯´æ¯ä¸ªæ—¶é—´æ®µæ˜¯20ï¼Œä½†æ˜¯å‘é€æ¶ˆæ¯åªå ç”¨å…¶ä¸­çš„2ï¼Œé‚£ä¹ˆå‰©ä¸‹çš„18å°±å¤„äºŽç©ºé—²æ—¶é—´ã€‚ç»Ÿè®¡æ—¶åˆ†å¤ç”¨å°±æ˜¯åŸºäºŽè¿™ç§è€ƒè™‘è€Œè®¾è®¡çš„ï¼Œä»–å…è®¸ç”¨æˆ·æœ‰æ•°æ®æ—¶å°±å°†æ•°æ®å‘é€åˆ°ç¼“å­˜ä¸­ï¼Œç„¶åŽä¼šä¾æ¬¡æ‰«æè¾“å…¥ç¼“å­˜ï¼ŒæŠŠç¼“å­˜ä¸­çš„æ•°æ®æ”¾å…¥åˆ°STMDå¸§ä¸­ï¼Œè‹¥æ²¡æœ‰å°±è·³è¿‡ï¼Œæ¯å½“ä¸€ä¸ªå¸§æ»¡äº†å°±æŠŠè¿™ä¸ªå¸§å‘å‡ºåŽ»ã€‚STMDå¸§ä¸æ˜¯åˆ†é…çš„å›ºå®šæ—¶åºï¼Œè€Œæ˜¯æ ¹æ®éœ€è¦åŠ¨æ€çš„åˆ†é…æ—¶éš™ï¼Œä¹Ÿç§°ä¹‹ä¸ºå¼‚æ­¥æ—¶åˆ†å¤ç”¨ å…‰åˆ†å¤ç”¨ï¼šå°±æ˜¯å…‰çš„é¢‘åˆ†å¤ç”¨ï¼Œæ ¹æ®å…‰è°±ä¸­é¢‘çŽ‡çš„ä¸åŒï¼Œç”¨ä¸åŒé¢‘çŽ‡çš„å…‰æ¥æºå¸¦ä¸åŒçš„ä¿¡æ¯ã€‚ æ•°æ®é“¾è·¯å±‚ï¼šæ•°æ®é“¾è·¯å±‚ä¸»è¦æ˜¯å°†ä¸Šå±‚çš„æ•°æ®è½¬åŒ–ä¸ºæ•°æ®å¸§å‘é€åˆ°é“¾è·¯ä¸Šï¼Œä»¥åŠæŠŠæŽ¥å—åˆ°çš„å¸§ä¸­çš„æ•°æ®å–å‡ºå¹¶äº¤ç»™ç½‘ç»œå±‚ã€‚ é€šä¿¡æ–¹å¼ï¼š ç‚¹å¯¹ç‚¹é€šä¿¡ï¼šé€šä¿¡æ–¹å¼æ˜¯ç‚¹åˆ°ç‚¹çš„ï¼Œä¹Ÿå°±æ˜¯åªèƒ½æ˜¯ä¸¤ä¸ªç‚¹ä¹‹é—´çš„é€šä¿¡ã€‚å¸¸è§çš„å°±æ˜¯PPPåè®® å¹¿æ’­é€šä¿¡ï¼šå¹¿æ’­é€šè®¯ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥åŒæ—¶å®žçŽ°ä¸€å¯¹å¤šçš„é€šä¿¡ã€‚å¸¸è§çš„å°±æ˜¯CSMA/CDï¼ˆè½½æ³¢ç›‘å¬å¤šç‚¹è®¿é—®/å†²çªæ£€æµ‹ï¼‰ æ ¸å¿ƒè¦è§£å†³çš„é—®é¢˜ï¼š å°è£…æˆå¸§ï¼šåœ¨ä¸€æ®µæ•°æ®çš„å‰åŽåˆ†åˆ«æ·»åŠ é¦–éƒ¨å’Œå°¾éƒ¨ï¼Œè¿™æ ·å°±æž„æˆäº†ä¸€ä¸ªå¸§ã€‚æŽ¥æ”¶ç«¯åœ¨æŽ¥å—åˆ°åŽå°±å¯ä»¥æ–¹ä¾¿å‡†ç¡®çš„ç¡®å®šå¸§çš„é¦–å°¾ï¼Œä¹Ÿç§°ä¸ºå¸§å®šç•Œç¬¦ã€‚åŒæ—¶å®šä¹‰å‡ºäº†æœ€å¤§ä¼ è¾“å•å…ƒï¼ˆMTUï¼‰â€“è¡¨ç¤ºä¸€æ¬¡å¯ä»¥ä¼ è¾“çš„æœ€å¤§é•¿åº¦ä¸Šé™ã€‚ é€æ˜Žä¼ è¾“ï¼š ç”±äºŽä½¿ç”¨ç‰¹å®šçš„å­—ç¬¦æ¥è¡¨ç¤ºå¸§çš„å¼€å§‹å’Œç»“æŸï¼Œæ‰€ä»¥ä¼ è¾“çš„å†…å®¹ä¸­ä¸èƒ½å‡ºçŽ°å’Œå¸§å®šç•Œç¬¦ç›¸åŒçš„å­—ç¬¦ï¼Œä½†è¿™æ˜¾ç„¶æ˜¯ä¸å¯èƒ½çš„ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªåŠžæ³•ï¼Œå°±å¯ä»¥åœ¨å†…å®¹ä¸­å’Œå¸§å®šç•Œç¬¦ä¸€æ ·çš„å­—ç¬¦å‰è¾¹åŠ ä¸Šè§„å®šå¥½çš„è½¬ä¹‰å­—ç¬¦ï¼Œè¿™ç§æ–¹æ³•ç§°ä¸ºå­—ç¬¦å¡«å……æˆ–è€…æ˜¯å­—èŠ‚å¡«å……ã€‚ å·®é”™æ£€æµ‹ï¼š æ¯”ç‰¹åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å¯èƒ½äº§ç”Ÿå·®é”™ï¼Œå·®é”™æ£€æµ‹å°±æ˜¯ç”¨äºŽæ£€æµ‹å‡ºçŽ°çš„å·®é”™ï¼Œä»¥ä¾¿åŠæ—¶çš„é‡ä¼ ï¼Œæœ€å¸¸ç”¨çš„å·®é”™æ£€æµ‹ç®—æ³•å°±æ˜¯CRCï¼ˆå¾ªçŽ¯å†—ä½™æ£€éªŒï¼‰ ç½‘ç»œå±‚ç½‘ç»œå±‚ä¸»è¦æ˜¯å‘ä¸Šåªæä¾›ç®€å•çµæ´»çš„ï¼Œæ— è¿žæŽ¥çš„ï¼Œå°½æœ€å¤§åŠªåŠ›äº¤ä»˜çš„æ•°æ®æŠ¥æœåŠ¡ã€‚ IPåè®®ï¼ˆç½‘é™…åè®®ï¼‰ï¼šIPåè®®æ˜¯TCP/IPä½“ç³»ä¸­æœ€ä¸»è¦çš„åè®®ä¹‹ä¸€ï¼Œä¸€åˆ‡åœ¨IPä¹‹ä¸‹ï¼Œä¸€åˆ‡åˆåœ¨IPä¹‹ä¸Šã€‚æˆ‘ä»¬å¸¸è¯´çš„åº”è¯¥æ˜¯IPåè®®æ—ï¼Œè¿˜åŒ…å«é…å¥—çš„åè®®ï¼š ARPï¼ˆåœ°å€è§£æžåè®®ï¼‰ï¼šå°†ç½‘ç»œçš„IPåœ°å€è½¬åŒ–ä¸ºå®žé™…çš„ç‰©ç†åœ°å€ï¼ˆMACåœ°å€ï¼‰ï¼Œå¹¶å­˜å‚¨åœ¨MACåœ°å€è¡¨ä¸­ã€‚ ICMPï¼ˆç½‘é™…æŽ§åˆ¶æŠ¥æ–‡åè®®ï¼‰ï¼šç”¨äºŽè¿›è¡Œå·®é”™æƒ…å†µå’Œå¼‚å¸¸æƒ…å†µçš„åé¦ˆï¼Œåˆ†ä¸ºè¯¢é—®æŠ¥æ–‡å’Œå·®é”™æŠ¥å‘ŠæŠ¥æ–‡ã€‚ IGMPï¼ˆç½‘é™…ç»„ç®¡ç†åè®®ï¼‰ï¼šç”¨äºŽæŽ§åˆ¶å’Œç®¡ç†å¤šæ’­å’Œç»„æ’­çš„åè®®ã€‚ ç½‘ç»œåœ°å€ï¼ˆIPåœ°å€ï¼‰ä¸»è¦åˆ†ä¸ºäº”ç±»ï¼š Aç±»ï¼šå‰8ä½ä¸ºç½‘ç»œä½ï¼ŒåŽ24ä½ä¸ºä¸»æœºä½ï¼Œé¦–ä½ä¸º0 Bç±»ï¼šå‰16ä½ä¸ºç½‘ç»œä½ï¼ŒåŽ16ä½ä¸ºä¸»æœºä½ï¼Œå‰ä¸¤ä½ä¸º10 Cç±»ï¼šå‰24ä½ä¸ºç½‘ç»œä½ï¼ŒåŽ8ä½ä½ä¸»æœºä½ï¼Œå‰ä¸‰ä½ä¸º110 Dç±»ï¼šå‰å››ä½ä¸º1110ï¼Œç”¨äºŽå¤šæ’­åœ°å€ Eç±»ï¼šå‰å››ä½ä¸º1111ï¼Œä¿ç•™ä¸ºä»¥åŽä½¿ç”¨ è·¯ç”±é€‰æ‹©åè®®ï¼šè·¯ç”±é€‰æ‹©åè®®åˆ†ä¸ºå†…éƒ¨ç½‘å…³åè®®ï¼ˆIGPï¼‰å’Œå¤–éƒ¨ç½‘å…³åè®®ï¼ˆEGPï¼‰ å†…éƒ¨ç½‘å…³åè®®ï¼šä¸»è¦æ˜¯æœ‰RIPåè®®å’ŒOSPFåè®® RIPåè®®ï¼ˆè·¯ç”±ä¿¡æ¯åè®®ï¼‰ï¼šåŸºäºŽè·ç¦»çŸ¢é‡çš„åè®® OSPFï¼ˆå¼€æ”¾æœ€çŸ­è·¯å¾„ä¼˜å…ˆåè®®ï¼‰ï¼šåŸºäºŽé“¾è·¯çŠ¶æ€çš„åè®® å¤–éƒ¨ç½‘å…³åè®®ï¼šä¸»è¦æ˜¯è¾¹ç•Œç½‘å…³åè®®ï¼ˆBGPï¼‰ï¼Œå°†ä¸€ä¸ªå¤§çš„ç½‘ç»œåˆ†ä¸ºå¤šä¸ªå°çš„è‡ªæ²»åŸŸï¼Œæ¯ä¸ªè‡ªæ²»åŸŸå†…æœ‰ä¸€ä¸ªç½‘å…³è·¯ç”±è´Ÿè´£å’Œå…¶ä»–çš„è‡ªæ²»åŸŸçš„ç½‘å…³è¿›è¡Œé€šè®¯ã€‚ ä¼ è¾“å±‚ç½‘ç»œå±‚ä¸»è¦æ˜¯ä¸ºä¸»æœºä¹‹é—´æä¾›é€»è¾‘é€šè®¯ï¼Œè€Œä¼ è¾“å±‚ä¸ºåº”ç”¨ç¨‹åºä¹‹é—´æä¾›ç«¯åˆ°ç«¯çš„é€»è¾‘é€šè®¯ã€‚ä¸»è¦æ˜¯ä¸¤ç§ç±»åž‹çš„é€šè®¯æ–¹å¼ï¼Œé¢å‘è¿žæŽ¥çš„TCPåè®®å’Œé¢å‘æ— è¿žæŽ¥çš„UDPã€‚ ç«¯å£å·ï¼šç«¯å£å·æŒ‰ç…§ä½¿ç”¨åœ°æ–¹çš„ä¸åŒåˆ†ä¸ºä¸¤å¤§ç±»ï¼šæœåŠ¡ç«¯ç«¯å£å·ï¼Œå®¢æˆ·ç«¯ç«¯å£å·ã€‚æŒ‰ç…§å ç”¨æ—¶é•¿åˆå¯ä»¥åˆ†ä¸ºç†ŸçŸ¥ç«¯å£å·ï¼ˆ0~1023ï¼‰ï¼Œç™»è®°ç«¯å£å·ï¼ˆ1024~49151ï¼‰ï¼ŒçŸ­æš‚ç«¯å£å·ï¼ˆ49152~65535ï¼‰ å¸¸è§ç«¯å£ï¼š FTPï¼ˆæ–‡ä»¶ä¼ è¾“åè®®ï¼‰ï¼š20ï¼Œ21â€”â€”å…¶ä¸­20ç«¯å£ç”¨äºŽä¼ è¾“æ•°æ®ï¼Œ21ç«¯å£ç”¨äºŽå‘½ä»¤æŽ§åˆ¶ Telnetï¼ˆè¿œç¨‹ç™»å½•åè®®ï¼‰ï¼š23 DNSï¼ˆåŸŸåè§£æžæœåŠ¡ï¼‰ï¼š53 TFTPï¼ˆç®€å•æ–‡ä»¶ä¼ è¾“åè®®ï¼‰ï¼š69 HTTPï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰ï¼š80 ä¸¤ç§åè®®ï¼š UDPï¼ˆç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰ï¼š UDPæ˜¯æ— è¿žæŽ¥çš„ UDPä½¿ç”¨å°½æœ€å¤§åŠªåŠ›äº¤ä»˜ï¼Œä½†æ˜¯ä¸ä¿è¯å¯é äº¤ä»˜ UDPæ˜¯é¢å‘æŠ¥æ–‡çš„ UDPæ²¡æœ‰æ‹¥å¡žæŽ§åˆ¶ UDPæ”¯æŒä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼Œå¤šå¯¹ä¸€ï¼Œå¤šå¯¹ä¸€çš„äº¤äº’é€šè®¯ UDPé¦–éƒ¨çš„å¼€é”€å° TCPï¼ˆä¼ è¾“æŽ§åˆ¶åè®®ï¼‰ï¼š TCPæ˜¯é¢å‘è¿žæŽ¥çš„ æ¯ä¸€æ¡TCPè¿žæŽ¥åªèƒ½ç”±ä¸¤ä¸ªç«¯ç‚¹ï¼Œæ¯ä¸€æ¡TCPè¿žæŽ¥åªèƒ½æ˜¯ç‚¹å¯¹ç‚¹çš„$TCPè¿žæŽ¥ï¼šï¼š= { socket_1,socket_2 } ={ (IP_1:port_1),(IP_2:port_2)}$ TCPæä¾›å¯é äº¤ä»˜çš„æœåŠ¡ TCPæä¾›å…¨åŒå·¥é€šä¿¡ é¢å‘å­—èŠ‚æµ å¯é ä¼ è¾“çš„å®žçŽ°æœºåˆ¶ï¼š åœæ­¢ç­‰å¾…åè®®ï¼š æ¯å‘å®Œä¸€ä¸ªåˆ†ç»„å°±åœæ­¢å‘é€ï¼Œç›´åˆ°æ”¶åˆ°ä¸Šä¸€ä¸ªåˆ†ç»„çš„ç¡®è®¤ä¿¡æ¯ã€‚è‹¥è¶…è¿‡è§„å®šæ—¶é—´æ²¡æœ‰æŽ¥æ”¶åˆ°ç¡®è®¤ä¿¡æ¯ï¼Œè¾¹è®¤ä¸ºæ˜¯åˆ†ç»„ä¸¢å¤±ï¼Œå¼€å§‹é‡ä¼ ã€‚ è¿žç»­ARQåè®®ï¼š å‘é€æ–¹é‡‡ç”¨æ»‘åŠ¨çª—å£çš„å½¢å¼ï¼Œå¤„äºŽæ»‘åŠ¨çª—å£çš„åˆ†ç»„å¯ä»¥ç›´æŽ¥å‘é€å‡ºåŽ»ï¼›æŽ¥æ”¶æ–¹ä¸€èˆ¬é‡‡ç”¨ç´¯ç§¯ç¡®è®¤çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯è¯´æŽ¥å—æ–¹ä¸å¿…å¯¹æŽ¥æ”¶åˆ°çš„æ¯ä¸€ä¸ªåˆ†ç»„éƒ½è¿›è¡Œç¡®è®¤ï¼Œè€Œæ˜¯å¯¹æŒ‰åºåˆ°è¾¾çš„æœ€åŽä¸€ä¸ªåˆ†ç»„è¿›è¡Œç¡®è®¤ï¼Œè€Œå‘é€æ–¹æ¯æŽ¥æ”¶åˆ°ä¸€ä¸ªç¡®è®¤ï¼Œçª—å£å°±å‘å‰æ»‘åŠ¨ä¸€å®šè·ç¦»ã€‚ æµé‡æŽ§åˆ¶ï¼šåè°ƒå‘é€æ–¹å’ŒæŽ¥æ”¶æ–¹çš„æ”¶å‘é€ŸçŽ‡ï¼Œåˆ©ç”¨æ»‘åŠ¨çª—å£æ¥åè°ƒï¼Œä½¿ç”¨æŽ¢æµ‹æŠ¥æ–‡æ¥æŽ¢æµ‹å½“å‰åº”è¯¥å‘é€çš„é€ŸçŽ‡ï¼Œé‡‡ç”¨Nagleç®—æ³• æ‹¥å¡žæŽ§åˆ¶ï¼šå½“ç½‘ç»œä¸­æŸä¸€èµ„æºçš„éœ€æ±‚è¶…å‡ºäº†è¯¥èµ„æºæ‰€èƒ½æä¾›çš„å¯ç”¨éƒ¨åˆ†ï¼Œè¿™æ—¶ç½‘ç»œçš„æ€§èƒ½å°±è¦å¼€å§‹å˜åï¼Œè¿™ç§æƒ…å†µå°±å«åšæ‹¥å¡žã€‚è€Œæ‹¥å¡žæŽ§åˆ¶å°±æ˜¯ä¸ºäº†å‡å°‘æˆ–è€…é¿å…æ‹¥å¡žå¯¹ç½‘ç»œæ€§èƒ½çš„å½±å“è€Œåšå‡ºçš„ä¸€ç§æŽ§åˆ¶æ‰‹æ®µã€‚ æ‹¥å¡žæŽ§åˆ¶æ€è·¯ï¼šå‘é€æ–¹ç»´æŒä¸€ä¸ªå«åšæ‹¥å¡žçª—å£çš„çŠ¶æ€å˜é‡ï¼Œæ‹¥å¡žçª—å£çš„å¤§å°å–å†³äºŽç½‘ç»œçš„æ‹¥å¡žç¨‹åº¦ï¼Œå¹¶ä¸”åœ¨åŠ¨æ€çš„å˜åŒ–ã€‚å‘é€æ–¹è®©è‡ªå·±çš„å‘é€çª—å£ç­‰äºŽæ‹¥å¡žçª—å£ï¼Œå¦‚æžœåœ¨è€ƒè™‘æŽ¥æ”¶æ–¹çš„æŽ¥æ”¶èƒ½åŠ›ï¼Œä¸€èˆ¬å‘é€çª—å£è¿˜è¦å°äºŽæ‹¥å¡žçª—å£ã€‚ æ…¢å¼€å§‹ï¼šå½“ä¸»æœºå¼€å§‹å‘é€æ•°æ®çš„æ—¶å€™ï¼Œç”±å°åˆ°å¤§çš„å¢žå¤§å‘é€çª—å£ï¼Œä¹Ÿå°±æ˜¯ç”±å°åˆ°å¤§çš„å¢žå¤§æ‹¥å¡žçª—å£ã€‚æŽ¥æ”¶æ–¹æŽ¥æ”¶åˆ°ä¸€ä¸ªæŠ¥æ–‡ä¹‹åŽå°±å›žä¼ ä¸€ä¸ªç¡®è®¤æŠ¥æ–‡ï¼Œå‘é€æ–¹æ¯æŽ¥æ”¶åˆ°ä¸€ä¸ªç¡®è®¤æŠ¥æ–‡ï¼Œå°±å°†æ‹¥å¡žçª—å£åŠ 1ï¼Œè¿™æ ·æ¯ç»è¿‡ä¸€ä¸ªä¼ è¾“è½®æ¬¡ä¹‹åŽï¼Œæ‹¥å¡žçª—å£å°±å¢žå¤§ä¸€å€ã€‚ æ‹¥å¡žé¿å…ï¼šæ€è·¯æ˜¯è®©æ‹¥å¡žçª—å£ç¼“æ…¢çš„å¢žå¤§ï¼Œå³æ¯ç»è¿‡ä¸€ä¸ªå¾€è¿”æ—¶é—´RTTå°±æŠŠå‘é€æ–¹çš„æ‹¥å¡žçª—å£åŠ 1ï¼Œè€Œä¸æ˜¯åŠ å€ï¼Œè¿™æ ·æ‹¥å¡žçª—å£å°±æ˜¯çº¿æ€§ç¼“æ…¢å¢žåŠ ï¼Œæ¯”æ…¢å¼€å§‹çš„å¢žé•¿é€ŸçŽ‡ç¼“æ…¢çš„å¤šã€‚ æ…¢å¼€å§‹é—¨é™ï¼šä¸ºäº†é˜²æ­¢æ‹¥å¡žçª—å£å¢žé•¿è¿‡å¤§å¼•èµ·ç½‘ç»œæ‹¥å¡žï¼Œè¿˜éœ€è¦è®¾ç½®ä¸€ä¸ªæ…¢å¼€å§‹é—¨é™ æ‹¥å¡žçª—å£&lt;æ…¢å¼€å§‹é—¨é™æ—¶ï¼Œä½¿ç”¨æ…¢å¼€å§‹ç®—æ³• æ‹¥å¡žçª—å£&gt;æ…¢å¼€å§‹é—¨é™æ—¶ï¼Œä½¿ç”¨æ‹¥å¡žé¿å…ç®—æ³• æ‹¥å¡žçª—å£=æ…¢å¼€å§‹é—¨é™æ—¶ï¼Œä¸¤ç§ç®—æ³•éƒ½å¯ä»¥ å¿«é‡ä¼ ï¼šè¦æ±‚æ”¶åˆ°æ–¹æ¯æ”¶åˆ°ä¸€ä¸ªæ—¶åºçš„æŠ¥æ–‡æ®µä¹‹åŽå°±ç«‹å³å‘å‡ºé‡å¤ç¡®è®¤ï¼Œè€Œä¸è¦ç­‰åˆ°è‡ªå·±å‘é€æ•°æ®æ—¶æ‰è¿›è¡ŒæŽå¸¦ç¡®è®¤ã€‚è€Œå‘é€æ–¹åªè¦ä¸€è¿žæ”¶åˆ°ä¸‰ä¸ªé‡å¤ç¡®è®¤å°±åº”å½“ç«‹å³é‡ä¼ å¯¹æ–¹å°šæœªæŽ¥å—åˆ°çš„æŠ¥æ–‡ï¼Œè€Œä¸å¿…ç­‰å¾…ä¸ºæŠ¥æ–‡è®¾ç½®çš„é‡ä¼ è®¡æ—¶å™¨åˆ°æœŸã€‚ å¿«å›žå¤ï¼šä¸Žå¿«é‡ä¼ é…åˆä½¿ç”¨ï¼Œå½“å‘é€æ–¹è¿žç»­æ”¶åˆ°ä¸‰ä¸ªé‡å¤ç¡®è®¤çš„æ—¶å€™ï¼Œå°±æ‰§è¡Œâ€œä¹˜æ³•å‡å°â€ç®—æ³•ï¼Œå°†æ…¢å¼€å§‹é—¨é™å‡åŠã€‚å°†æ‹¥å¡žçª—å£è®¾ç½®ä¸ºæ…¢å¼€å§‹é—¨é™å‡åŠä¹‹åŽçš„å€¼ï¼Œå¹¶å¼€å§‹æŒ‡å‘æ‹¥å¡žé¿å…ç®—æ³•ã€‚ TCPçš„è¿žæŽ¥ç®¡ç†ï¼šè¿žæŽ¥ä¸‰æ¬¡æ¡æ‰‹ï¼š å®¢æˆ·ç«¯è¯·æ±‚å»ºç«‹è¿žæŽ¥ï¼šSYN=1ï¼Œseq=xï¼› æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯çš„è¯·æ±‚è¿›è¡Œå“åº”ï¼šSYN=1ï¼ŒACK=1ï¼Œseq=yï¼Œack=x+1 å®¢æˆ·ç«¯å¯¹æœåŠ¡å™¨ç«¯çš„å“åº”ä¿¡æ¯è¿›è¡Œå›žåº”ï¼šACK=1ï¼Œseq=x+1ï¼Œack=y+1 æ³¨ï¼š SYNä¸ºåŒæ­¥ä¿¡æ¯ï¼Œåœ¨å»ºç«‹è¿žæŽ¥è¿‡ç¨‹ä¸­å§‹ç»ˆä¸º1 æ–­å¼€è¿žæŽ¥å››æ¬¡æ¡æ‰‹ï¼š å®¢æˆ·ç«¯è¯·æ±‚æ–­å¼€è¿žæŽ¥ï¼š FIN=1ï¼Œseq = uï¼› æœåŠ¡ç«¯å¯¹å®¢æˆ·ç«¯çš„è¯·æ±‚åº”ç­”ï¼šACK=1ï¼Œseq=vï¼Œack=u+1ï¼› æœåŠ¡ç«¯è¯·æ±‚æ–­å¼€è¿žæŽ¥ï¼šFIN=1ï¼ŒACK=1ï¼Œseq=wï¼Œack=u+1ï¼› å®¢æˆ·ç«¯å¯¹æœåŠ¡ç«¯çš„è¯·æ±‚åº”ç­”ï¼šACK=1ï¼Œseq=u+1ï¼Œack=w+1ï¼› åº”ç”¨å±‚åº”ç”¨å±‚æœ‰å¤šç§åè®®ï¼Œå¸¸ç”¨åˆ°çš„å°±æ˜¯HTTPä»¥åŠHTTPSã€‚ HTTPåè®®æŠ¥æ–‡æ ¼å¼ è¯·æ±‚æŠ¥æ–‡ ç›¸åº”æŠ¥æ–‡ è¯·æ±‚è¡Œï¼ˆç”¨äºŽåŒºåˆ†æ˜¯è¯·æ±‚æŠ¥æ–‡è¿˜æ˜¯å“åº”æŠ¥æ–‡ï¼Œåœ¨å“åº”æŠ¥æ–‡ä¸­ä¸ºçŠ¶æ€è¡Œï¼‰ çŠ¶æ€è¡Œ é¦–éƒ¨è¡Œï¼ˆç”¨æ¥è¯´æ˜Žæµè§ˆå™¨ï¼ŒæœåŠ¡å™¨æˆ–è€…æ˜¯æŠ¥æ–‡ä¸»ä½“çš„ä¸€äº›ä¿¡æ¯ï¼‰ é¦–éƒ¨è¡Œ ç©ºè¡Œï¼ˆç”¨äºŽéš”å¼€è¯·æ±‚å®žä½“å’Œé¦–éƒ¨è¡Œï¼‰ ç©ºè¡Œ å®žä½“ä¸»ä½“ï¼ˆç”¨äºŽä¸€äº›è¯·æ±‚æˆ–è€…æ˜¯å“åº”çš„çš„å‚æ•°å†…å®¹ç­‰ï¼‰ å®žä½“ä¸»ä½“ å¸¸è§çŠ¶æ€ç  1xxï¼šè¡¨ç¤ºé€šçŸ¥ä¿¡æ¯ï¼Œä¾‹å¦‚è¡¨ç¤ºæ”¶åˆ°æˆ–è€…æ˜¯æ­£åœ¨å¤„ç†2xxï¼šè¡¨ç¤ºæˆåŠŸï¼Œä¾‹å¦‚è¡¨ç¤ºæŽ¥å—æˆ–çŸ¥é“äº†3xxï¼šè¡¨ç¤ºé‡å®šå‘ï¼Œä¾‹å¦‚è¡¨ç¤ºå®Œæˆè¯·æ±‚è¿˜éœ€è¦é‡‡å–è¿›ä¸€æ­¥çš„è¡ŒåŠ¨4xxï¼šè¡¨ç¤ºå®¢æˆ·ç«¯çš„å·®é”™ï¼Œä¾‹å¦‚è¡¨ç¤ºè¯·æ±‚ä¸­æœ‰è¯­æ³•é”™è¯¯æˆ–ä¸èƒ½å®Œæˆ5xxï¼šè¡¨ç¤ºæœåŠ¡å™¨ç«¯çš„å·®é”™ï¼šä¾‹å¦‚è¡¨ç¤ºæœåŠ¡å™¨å¤±æ•ˆæ— æ³•å®Œæˆè¯·æ±‚ HTTPSåè®®å°±æ˜¯å¯¹HTTPåè®®çš„åŠ å¯†ï¼Œæ›´åŠ å®‰å…¨å¯é ï¼Œé‡‡ç”¨HTTP+SSLï¼ˆå®‰å…¨å¥—æŽ¥å­—å±‚ï¼‰æ¥ä¿è¯æ•°æ®çš„å®‰å…¨æ€§ã€‚]]></content>
      <tags>
        <tag>Network</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸€ä¸ªå›¾ç‰‡ä»Žè¯»å–åˆ°æ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„æ•´ä¸ªæ¸²æŸ“è¿‡ç¨‹]]></title>
    <url>%2F2018%2F03%2F29%2F%E4%B8%80%E4%B8%AA%E5%9B%BE%E7%89%87%E4%BB%8E%E8%AF%BB%E5%8F%96%E5%88%B0%E6%98%BE%E7%A4%BA%E5%9C%A8%E5%B1%8F%E5%B9%95%E4%B8%8A%E7%9A%84%E6%95%B4%E4%B8%AA%E6%B8%B2%E6%9F%93%E8%BF%87%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[æ˜¾ç¤ºæµç¨‹æ•´ä¸ªè¿‡ç¨‹å¯åˆ†ä¸ºä¸‰æ­¥ å¾—åˆ°ä½å›¾ï¼ˆBitmapï¼‰çš„å†…å­˜æ•°æ®ï¼Œå³ä»Žç›¸åº”çš„å›¾ç‰‡æ–‡ä»¶è§£ç ï¼Œå¾—åˆ°æ•°æ®æ”¾å¹¶æ”¾åˆ°å†…å­˜ã€‚ ä½¿ç”¨æŸç§2Då¼•æ“Žï¼Œå°†ä½å›¾å†…å­˜æŒ‰ä¸€å®šæ–¹å¼ï¼Œæ¸²æŸ“åˆ°å¯ç”¨äºŽæ˜¾ç¤ºçš„å›¾å½¢å†…å­˜ï¼ˆGraphicBufferï¼‰ä¸Šã€‚ ç”±ä¸€ä¸ªä¸­å¿ƒæ˜¾ç¤ºæŽ§åˆ¶å™¨ï¼ˆSurfaceflingerï¼‰ï¼Œå°†ç›¸åº”çš„å›¾å½¢å†…å­˜æŠ•æ”¾åˆ°æ˜¾ç¤ºå±ï¼ˆLCDï¼‰ã€‚ æ˜¾ç¤ºæµç¨‹ ä»Žå›¾ç‰‡æ–‡ä»¶åˆ°ä½å›¾ æ‰¾åˆ°åˆé€‚çš„å›¾ç‰‡æ–‡ä»¶å½“æŠŠé£Žæ™¯å›¾ç‰‡æ”¾åœ¨drawableç›®å½•æ—¶ï¼ŒAndroidç³»ç»Ÿä¸­ä¼šæ ¹æ®è®¾å¤‡çš„åˆ†è¾¨çŽ‡ï¼ŒåŽ»ç›¸åº”åˆ†è¾¨çŽ‡çš„ç›®å½•é€‰æ‹©å›¾ç‰‡æ–‡ä»¶ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬æŠŠå›¾ç‰‡æ”¾åœ¨assetç›®å½•ä¸‹ï¼Œç”¨ asset manager åŽ»æ‰“å¼€æ—¶ï¼Œæˆ–è€…æ”¾åœ¨sdcardä¸‹ï¼Œå°±ä¸å­˜åœ¨è¿™ä¸ªä¸€ä¸ªé€‚é…è¿‡ç¨‹ï¼Œç³»ç»Ÿä¼šå¿ å®žåœ°è¯»å–æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶ã€‚ å°†å›¾ç‰‡æ–‡ä»¶è§£ç åˆ°å†…å­˜ï¼Œå½¢æˆä½å›¾ï¼ˆBitmapï¼‰è§£ç å™¨ä¸€èˆ¬ä½¿ç”¨ç³»ç»Ÿçš„ï¼ŒAndroidä¸­æ˜¯ä»¥Skiaä¸»å¯¼è§£ç çš„è¿‡ç¨‹ã€‚å…·ä½“å¾€ä¸‹ç”¨ç¡¬ä»¶è§£ç è¿˜æ˜¯è½¯ä»¶è§£ç ï¼Œå°±ç”±èŠ¯ç‰‡åŽ‚å•†å†³å®šäº†ã€‚ä¸è¿‡ï¼Œç»å¤§éƒ¨åˆ†Androidè®¾å¤‡çš„ç¡¬è§£ç å’Œç¡¬ç¼–ç éƒ½ç”¨äºŽè‡ªå®¶çš„åº”ç”¨ï¼ˆæ¯”å¦‚æ‹ç…§ï¼‰ï¼Œå¯¹ç¬¬ä¸‰æ–¹åº”ç”¨å¼€æ”¾çš„åªæœ‰è½¯ä»¶ç¼–è§£ç ã€‚ å›¾åƒç¼–è§£ç éƒ½æ˜¯å¾ˆå¤æ‚çš„ç®—æ³•ï¼Œgoogleæä¾›çš„Androidç‰ˆæœ¬é‡Œå¯¹æ­¤ä¹Ÿæ˜¯ä¸æ–­è¿›è¡Œç€ä¼˜åŒ–ï¼Œå¯¼è‡´ç³»ç»Ÿçš„ç¼–è§£ç åº“æ€§èƒ½ä¸€èˆ¬æ¥è¯´æ˜¯å¾ˆä¼˜ç§€çš„ã€‚å¦‚æžœæ²¡æœ‰ä¸“ä¸šçš„ç®—æ³•ä¼˜åŒ–äººå‘˜ï¼Œå°±ä¸è¦æŒ‡æœ›é ç§»æ¤ç¬¬ä¸‰æ–¹åº“æ‰“è´¥ç³»ç»Ÿçš„è§£ç å™¨äº†ã€‚ load å°±æ›´ä¸€èˆ¬çš„åœºæ™¯è€Œè¨€ï¼Œå›¾ç‰‡åŽŸå§‹æ¥æºäºŽç£ç›˜ã€ç½‘ç»œæˆ–å›¾å½¢å†…å­˜ï¼ˆAndroidéƒ¨åˆ†ç³»ç»Ÿå›¾ç‰‡é¢„åŠ è½½ï¼‰ã€‚å¦‚ä½•åœ¨å¯¼å…¥å¤§é‡å›¾ç‰‡æ—¶ä¸è‡´å‡ºçŽ°å†…å­˜æº¢å‡ºï¼Œå¦‚ä½•å¿«é€Ÿå¯¼å…¥ä¸€ä¸ªé¡µé¢çš„å›¾ç‰‡ä»¥å…ç”¨æˆ·äº§ç”Ÿç­‰å¾…æ„Ÿï¼Œæ˜¯ä¸ªå¤æ‚çš„äº‹æƒ…ã€‚è®¸å¤šå¼€æºå›¾ç‰‡ç¼“å­˜æ¡†æž¶ï¼ˆå¦‚imageloaderï¼‰å°±åœ¨è¿™ä¸€è¿‡ç¨‹åšæ–‡ç« ï¼Œä¸å¤šè¿°ã€‚ ä»Žä½å›¾åˆ°å›¾å½¢å†…å­˜Androidå‘åº”ç”¨å¼€å‘è€…å¼€æ”¾çš„æƒŸä¸€ä¸€æ¡æ˜¾ç¤ºçš„è·¯å¾„æ˜¯Viewã€‚ä¸ç®¡æƒ³æ˜¾ç¤ºä»€ä¹ˆï¼Œéƒ½å¿…é¡»å…ˆå¼„ä¸ªå¸ƒå±€ï¼Œç„¶åŽæŠŠè¦æ˜¾ç¤ºçš„å†…å®¹å’Œå¸ƒå±€ä¸­çš„Viewå…³è”èµ·æ¥ã€‚ å¸ƒå±€ï¼Œç¡®å®šViewæœ¬èº«ä½ç½®åœ¨ä¸Šé¢çš„UIæ˜¾ç¤ºå›¾ä¸­ï¼Œæˆ‘ä»¬å‘çŽ°ï¼Œå›¾å¹¶æ²¡æœ‰æ¨ªå‘å¡«æ»¡æ‰‹æœºå±å¹•ï¼Œè¿™æ˜¯ç”±äºŽå¸ƒå±€ä¸­è®¾ç½®äº†ç•™ç™½é€ æˆçš„ï¼š 1234android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;android:paddingTop=&quot;@dimen/activity_vertical_margin&quot; å¸ƒå±€å°±æ˜¯æ¯ä¸ªViewçš„measureå’Œlayoutè¿‡ç¨‹ï¼ŒAndroidå›¾å½¢ç³»ç»Ÿçš„frameworkå±‚è§£æžå¸ƒå±€æ–‡ä»¶ï¼ŒåŽ»è®¡ç®—æ¯ä¸ªViewçš„ä½ç½®ã€‚æœ¬æ–‡çš„ä¾‹å­ä¸­ï¼Œæ˜¯ RelativeLayout â€”â€” ImageView çš„è§£æžè¿‡ç¨‹ã€‚ å¸ƒå±€è§£æžçš„ä¸€èˆ¬æµç¨‹å‚è€ƒä»¥ä¸‹æ–‡ç« ï¼šhttp://blog.csdn.net/qinjuning/article/details/8074262 æ¸²æŸ“ï¼ŒæŠŠä½å›¾ç”»ä¸Šå›¾å½¢å†…å­˜ä¸è€ƒè™‘SurfaceViewçš„éžä¸»çº¿æ¸²æŸ“ï¼Œåªè€ƒè™‘ä¸»çº¿æ¸²æŸ“çš„ä¸¤ä¸ªåˆ†æ”¯ï¼šè½¯ä»¶ç»˜åˆ¶ï¼ˆskiaï¼‰ä¸Žç¡¬ä»¶åŠ é€Ÿç»˜åˆ¶ï¼ˆhwuiï¼‰ã€‚è½¯ä»¶ç»˜åˆ¶ä¸‹ï¼Œç”±ä½å›¾ç›´æŽ¥ç”»ä¸ŠåŽ»ã€‚ç¡¬ä»¶åŠ é€Ÿç»˜åˆ¶ï¼Œå®žé™…ä¸Šæ˜¯GPUç»˜åˆ¶çš„æƒ…å†µä¸‹ï¼Œéœ€è¦å…ˆæŠŠä½å›¾ä¸Šä¼ åˆ°GPUå½¢æˆçº¹ç†ï¼Œå†åŸºäºŽçº¹ç†é‡‡æ ·ï¼Œæ¸²æŸ“åˆ°å›¾å½¢å†…å­˜ä¸Šã€‚ draw çœ‹ä¸ŠåŽ»ï¼ŒGPUç»˜å›¾éœ€è¦å…ˆä¸Šä¼ ä¸ºTextureï¼Œæ˜Žæ˜¾å¤šäº†ä¸€æ­¥ï¼Œä½†è¯·è€ƒè™‘å¦‚ä¸‹çš„é—®é¢˜ï¼š å¤§éƒ¨åˆ†æƒ…å†µï¼ŒæŠŠä½å›¾ç”»ä¸Šå›¾å½¢å†…å­˜ï¼Œä¸æ˜¯ç®€å•çš„memcpyã€‚å¦‚æœ¬å¤„çš„é£Žæ™¯ç…§ï¼Œå¾ˆæ˜Žæ˜¾å°±éœ€è¦ç¼©å°ã€‚è¿™ç§æƒ…å†µä¸‹ï¼ŒCPUç»˜åˆ¶éœ€è¦å…ˆé‡‡æ ·ï¼Œè¿™æ˜¯å¾ˆæ…¢çš„ã€‚ ç»˜åˆ¶ä¸æ˜¯ä¸€æ¬¡æ€§çš„å·¥ä½œï¼Œå®ƒæ˜¯è¦åˆ·å¸§çš„ã€‚ä½¿ç”¨GPUç»˜åˆ¶æ—¶ï¼Œçº¹ç†ä¸Šä¼ å›ºç„¶åœ¨ç¬¬ä¸€æ¬¡æ—¶å¢žåŠ äº†å¯åŠ¨æ—¶é—´ï¼Œä½†åŽç»­å¹¶ä¸éœ€è¦é‡åšï¼Œå¯ä»¥ç»§ç»­ä½¿ç”¨GPUå¼ºå¤§çš„æ¸²æŸ“èƒ½åŠ›ã€‚ ä»Žå›¾å½¢å†…å­˜åˆ°æ˜¾ç¤ºå±è¿™ä¸€å¥—æµç¨‹ä¾¿æ˜¯Androidçš„ä¸‹å±‚æ˜¾ç¤ºå†…å®¹ã€‚SurfaceFlingeræ±‡é›†æ‰€æœ‰å›¾å±‚çš„ä¿¡æ¯ï¼Œé‡‡ç”¨ç¦»çº¿åˆæˆæˆ–åœ¨çº¿åˆæˆçš„æ–¹å¼ï¼Œå°†å›¾å½¢å†…å­˜çš„å†…å®¹é€è¾¾æ˜¾ç¤ºå±LCDã€‚ å‚è§ http://blog.csdn.net/jxt1234and2010/article/details/46057267 æ›´å¥½çš„æ–¹æ¡ˆï¼Ÿ1. æ—¢ç„¶åˆ°å›¾å½¢å†…å­˜æ‰èƒ½æ˜¾ç¤ºï¼Œä¸ºä»€ä¹ˆä¸ç›´æŽ¥è§£ç åˆ°å›¾å½¢å†…å­˜ï¼Ÿå½“ç„¶å¯ä»¥ï¼Œå¼€æœºåŠ¨ç”»å°±æ˜¯è¿™ä¹ˆæžçš„ï¼Œè§£åˆ°å›¾å½¢å†…å­˜ç›´æŽ¥æ˜¾ç¤ºã€‚ä¸è¿‡ï¼Œç”±äºŽå›¾å½¢å†…å­˜æ˜¯ä¸€ç§è¿›ç¨‹é—´å…±äº«å†…å­˜ï¼Œéœ€è¦ä½œå¾ˆå¤šé¢å¤–çš„åŒæ­¥ã€æ˜ å°„ç­‰ç®¡ç†å·¥ä½œã€‚å¯¹äºŽä¸€èˆ¬çš„åº”ç”¨åœºæ™¯ï¼Œåœ¨è‡ªå·±çš„è¿›ç¨‹ç©ºé—´ç”³è¯·å†…å­˜ï¼Œæ— ç–‘æ˜¯æ›´æ–¹ä¾¿ç®¡ç†çš„ï¼Œä¹Ÿä¸ä¼šé€ æˆç³»ç»Ÿçš„é¢å¤–è´Ÿæ‹…ã€‚ 2. è§£ç å›¾ç‰‡éœ€è¦æ—¶é—´ï¼Œå¯ä¸å¯ä»¥ä¸€å¼€å§‹å°±ç”¨åŽŸå§‹ä½å›¾ï¼Œè·³è¿‡è¿™ä¸€è¿‡ç¨‹ï¼Ÿå½“ç„¶å¯ä»¥ï¼ŒAndroidçš„ç³»ç»Ÿå›¾åº“ä¼šä¸ºæ¯ä¸€å¼ ç…§ç‰‡åˆ›å»ºä¸€å¼ ç¼©ç•¥å›¾ï¼Œè¿™ä¸€å¼ ç¼©ç•¥å›¾å°±æ˜¯æ— åŽ‹ç¼©çš„ä½å›¾æ ¼å¼ï¼Œä»¥ä¾¿ç”¨æˆ·å¿«é€Ÿçœ‹åˆ°é¢„è§ˆçš„ç…§ç‰‡ã€‚ä½†å½“åƒç´ å€¼æ¯”è¾ƒå¤§æ—¶ï¼ŒåŽŸå§‹ä½å›¾å®žåœ¨æ˜¯å¤ªå¤§äº†ï¼Œç›¸æœºæ‹å‡ºæ¥ä¸€å¼ 800wåƒç´ çš„å›¾ç‰‡æŽ¥è¿‘32Mï¼Œå­˜å‚¨è®¾å¤‡å’Œç½‘ç»œä¼ è¾“éƒ½åƒä¸æ¶ˆã€‚ ä¸€ç§æ›´å¥½çš„æ–¹æ³•æ˜¯ä½¿ç”¨åŽ‹ç¼©çº¹ç†ï¼Œè¿™æ ·æ—¢èƒ½çœåŽ»è§£ç å›¾ç‰‡çš„æ—¶é—´ï¼Œåˆèƒ½å‡å°‘æ¸²æŸ“æ—¶æ‰€éœ€è¦çš„è¯»å–å†…å­˜é‡ã€‚ä½†è¿™ä¸ªå­˜åœ¨å¦‚ä¸‹é—®é¢˜ï¼šç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ï¼ŒAndroidçš„ç¡¬ä»¶åŠ é€Ÿæœºåˆ¶æ˜¯åŸºäºŽè½¯ä»¶ç»˜åˆ¶æµç¨‹ä¿®æ”¹è€Œæ¥çš„ï¼Œå®ƒéœ€è¦ä¸Žè½¯ä»¶ç»˜åˆ¶æœ‰ç›¸åŒçš„ä¸Šå±‚æŽ¥å£ï¼Œè¿™å°±æ„å‘³ç€ï¼Œè½¯ä»¶ç»˜åˆ¶ä¹Ÿè¦è®¾æ³•æ”¯æŒè¿™ç§æ¨¡å¼ã€‚è®©è½¯ä»¶ç»˜åˆ¶æ”¯æŒåŽ‹ç¼©çº¹ç†çš„è§£åŽ‹æ˜¯ä¸å¤§çŽ°å®žçš„ï¼Œä¸è¿‡å‘¢ï¼Œå¯ä»¥è€ƒè™‘å‰¯æœ¬çš„æ¨¡å¼ï¼Œå³åŒæ—¶æä¾›jpg/pngå’ŒåŽ‹ç¼©çº¹ç†çš„èµ„æºã€‚ç¬¬äºŒä¸ªé—®é¢˜æ›´åŠ æ£˜æ‰‹ï¼Œç§»åŠ¨è®¾å¤‡çš„GPUæ˜¯åˆ†æ•£çš„ï¼Œæ‰€æä¾›çš„åŽ‹ç¼©çº¹ç†æ ¼å¼ä¹Ÿäº’ä¸ç›¸åŒï¼Œè™½ç„¶æœ‰ETC1å’ŒETC2ä½œä¸ºæ ‡å‡†æ ¼å¼ï¼Œä½†å…¶æ˜¾ç¤ºæ•ˆæžœå·®å¼ºäººæ„ã€‚ 3. å°±æ˜¾ç¤ºä¸€å¼ å›¾ç‰‡ï¼Œä¸ºä»€ä¹ˆè¦åˆæˆï¼Œç›´æŽ¥ä¼ ç»™LCDä¸å¯ä»¥ä¹ˆï¼Ÿå½“ç„¶å¯ä»¥ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„OverlayæŠ€æœ¯ï¼Œè¿›ä¸€æ­¥ï¼Œæ˜¯åœ¨çº¿åˆæˆã€‚æ®è¯´ï¼Œiosçš„å›¾åº“æ˜¾ç¤ºç…§ç‰‡æ—¶æ­£æ˜¯è¿™ä¹ˆåšçš„ã€‚ä¸è¿‡ï¼Œä½¿ç”¨è¿™ä¸ªæŠ€æœ¯æœ‰å¾ˆå¤šå‘ã€‚ç¬¬ä¸€ä¸ªå‘æ˜¯Bufferå¾ªçŽ¯æœºåˆ¶ï¼Œå¤„ç†ä¸å¥½ï¼Œå°±å®¹æ˜“å‡ºçŽ°è£‚å±ã€‚ç¬¬äºŒä¸ªå‘æ˜¯åƒå¥‡ç™¾æ€ªçš„å¸ƒå±€ä½ç½®ï¼Œå•ä¸ªå›¾å±‚è¾…æ»¡æ˜¾ç¤ºå±å¥½å¤„ç†ï¼Œä½†çº¯å¤§éƒ¨åˆ†æƒ…å†µæ˜¯å¤šä¸ªå›¾å±‚å„å å±å¹•çš„ä¸€éƒ¨åˆ†ï¼Œå¦å¤–è¿˜ä¼šæœ‰é‡å çš„æƒ…å†µã€‚ç¬¬ä¸‰ä¸ªå‘åˆ™æ˜¯åŽå¤„ç†éœ€æ±‚ï¼Œæœ‰æ—¶å€™ç¼©æ”¾å’Œæ—‹è½¬ä¼šå»¶è¿Ÿåˆ°åˆæˆé˜¶æ®µåšå¤„ç†ï¼Œç›´æŽ¥ä¼ ç»™LCDæ—¶å¦‚ä½•åšè¿™äº›å¤„ç†ä¹Ÿæ˜¯ä¸ªé—®é¢˜ã€‚ åœ¨ç†è§£æ¸…æ¥šåŽŸç†åŽï¼Œæ‰¾åˆ°æ€§èƒ½ç“¶é¢ˆå¹¶å‘çŽ°ä¼˜åŒ–ç‚¹ï¼Œå¹¶ä¸æ˜¯ä»¶éš¾äº‹ï¼Œä½†æ€Žä¹ˆé’ˆå¯¹æ€§åœ°å®žæ–½ä¼˜åŒ–å¹¶å…¼å®¹åŽŸæœ‰ç³»ç»Ÿè¿™ä¹ˆä¸€ä¸ªå®å¤§çš„ä½“ç³»ï¼Œå°±ä¸æ˜¯é‚£ä¹ˆå¥½åšäº† ã€‚ä¸è¿‡ï¼Œè§£å†³é—®é¢˜çš„å…³é”®è¿˜æ˜¯åŽŸç†è¦æ­£ç¡®ï¼Œè¦ç›¸ä¿¡ï¼Œåªè¦åŽŸç†æ˜¯æ­£ç¡®çš„ï¼Œæµç¨‹ä¸Šå³ä¾¿åƒèˆ¬é˜»ç¢ï¼Œæœ€ç»ˆä¹Ÿèƒ½è¾¾åˆ°ç›®æ ‡çš„ã€‚]]></content>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RecyclerViewä¸ºä»€ä¹ˆä¼šæ›¿ä»£scrollView]]></title>
    <url>%2F2018%2F03%2F22%2FRecyclerView%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BC%9A%E6%9B%BF%E4%BB%A3scrollView%2F</url>
    <content type="text"><![CDATA[2018-03-21 19:35 å¹¿å·žè…¾è®¯è§†é¢‘Androidå²—æ‰“æ¥äº†é¢è¯•ç”µè¯â€¦æ­¤æ¬¡é¢è¯•ä¸­å‘çŽ°äº†è‡ªå·±çš„è–„å¼±ä¸Žä¸è¶³â€¦ç”šè‡³è¢«é—®åˆ°ä¸€ä¸ªä»Žæ¥ä¹Ÿæ²¡æœ‰æƒ³è¿‡éœ€è¦åŽ»æ¯”è¾ƒçš„Viewâ€¦æœ€åŽä¸€ä¸ªé—®é¢˜ï¼š é—®ï¼šè¯·é—®åœ¨é¡¹ç›®å¼€å‘ä¸­ç”¨è¿‡å“ªäº›å¸ƒå±€ï¼Ÿ ç­”ï¼šLinearLayoutã€RelativeLayoutã€è‡ªå®šä¹‰ViewGroupã€FrameLayoutã€TableLayoutã€AbsoluteLayoutå…­ç§å¸ƒå±€ é—®ï¼šè‡ªå®šä¹‰å¸ƒå±€ç”¨è¿‡å“ªäº›ï¼Ÿ ç­”ï¼šæœ€å¸¸ç”¨çš„åº”è¯¥æ˜¯RecyclerView é—®ï¼šèƒ½å‘Šè¯‰æˆ‘scollViewå’ŒRecyclerViewçš„åŒºåˆ«å—ï¼Ÿä¸ºä»€ä¹ˆRecyclerViewå¯ä»¥æ›¿ä»£scollViewï¼Ÿ æˆ‘ä¸€è„¸èŒ«ç„¶â€¦ è¿™çš„ç¡®æ˜¯æˆ‘çš„çŸ¥è¯†æ¼æ´žâ€¦ä¹Ÿæ›¾æ¯”è¾ƒè¿‡ListViewå’ŒRecyclerViewå¯ä»Žæ¥æ²¡æœ‰æƒ³è¿‡è¦å’Œscollviewæ¥åšç±»æ¯”â€¦é¢è¯•åŽå°±åšäº†è¿™æ–¹é¢çš„åŠŸè¯¾..ç»ˆäºŽæ‰¾åˆ°äº†ä¸€ç¯‡å¯ä»¥è§£å†³æˆ‘å¿ƒä¸­å›°æƒ‘çš„æ–‡ç«  ä»¥å‰æˆ‘ä»¬å¼€å‘ä¸€ä¸ªé¡µé¢ï¼Œå‡ ä¹Žéƒ½æ˜¯é‡‡ç”¨ScrollViewä½œä¸ºçˆ¶å®¹å™¨ï¼Œç„¶åŽåœ¨ScrollViewä¸­åŒ…å«å„ä¸ªæ¨¡å—Viewã€‚ä»¥å¦‚ä¸‹é¡µé¢æºç¨‹ä¸ºä¾‹ï¼Œæˆ‘å°†å¯¹è¿™ä¸ªç¼–ç¨‹æ¡†æž¶è¿›è¡Œè®²è§£ã€‚ æ‹¿åˆ°ä¸€ä¸ªéœ€è¦æ–°å¼€å‘çš„é¡µé¢ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦ç»™è¿™ä¸ªé¡µé¢åˆ†åŠŸèƒ½æ¨¡å—ã€‚æŠŠé¡µé¢ä¸­æ¯ä¸€ä¸ªæ¨¡å—ä½œä¸ºRecyclerViewçš„ä¸€ä¸ªitemã€‚åœ¨listViewä¸­æŠŠæ¯ä¸ªitemè®¾è®¡ä¸ºä¸åŒçš„ç»“æž„æ—¶ï¼Œä»£ç å†™èµ·æ¥ä¼šç‰¹åˆ«å†—ä½™ï¼Œç»“æž„ä¼šéžå¸¸ä¹±ã€‚è€ŒRecyclViewæœ¬èº«ä¸€ä¸ªå¾ˆé‡è¦çš„ç‰¹ç‚¹å°±æ˜¯å¯ä»¥å®žçŽ°å¤šç§ç±»ITEMã€‚ç»™å¼ å›¾æ¥è§£é‡Šä¸€ä¸‹ï¼Œ ä½¿ç”¨RecyclerViewæ¥è®¾è®¡è¿™æ ·ä¸€ä¸ªé¡µé¢èƒ½è§£å†³åŠ è½½æ…¢å’Œå†…å­˜ç´§å¼ çš„é—®é¢˜ï¼Œå› ä¸ºRecyclerViewæœ¬èº«å°±å…·æœ‰å›žæ”¶å’Œå»¶è¿ŸåŠ è½½çš„ç‰¹æ€§ã€‚ç„¶è€Œï¼Œå¯¹äºŽè¿™æ ·åŠŸèƒ½å¤æ‚çš„RecyclerViewï¼Œå¦‚æžœè¦æ˜¯ä¸è®¾è®¡ä¸€ä¸‹ç»“æž„ï¼Œå¯æƒ³è€ŒçŸ¥ï¼Œè¿™ä¸ªä»£ç ç»´æŠ¤èµ·æ¥å¾—æœ‰å¤šä¹±ï¼ï¼ï¼å› ä¸ºRecyclerViewçš„ä¸šåŠ¡é€»è¾‘éƒ½æ˜¯å†™åœ¨MainAdapter.javaï¼Œè¦æŠŠè¿™å‡ ç§typeçš„iteméƒ½å†™åœ¨MainAdapter.javaä¸­ï¼Œç»´æŠ¤èµ·æ¥å¾—å¤šè´¹åŠ²ï¼ï¼ äºŽæ˜¯ï¼Œæˆ‘è®¾è®¡äº†è¿™æ ·ä¸€ç§ç»“æž„ã€‚ æˆ‘ç”¨çº¢è‰²åœ†åœˆåœˆèµ·æ¥çš„æ˜¯ç¨‹åºçš„3ä¸ªæ ¸å¿ƒç±»ï¼šMainActivityã€MainAdapterã€AdapterViewHolderManagerã€‚ MainAcitivityç”¨äºŽç»„ç»‡ä¸šåŠ¡é€»è¾‘ã€‚ MainAdapteræ˜¯RecyclerViewå¯¹åº”çš„Adapterã€‚ AdapterViewHolderManageræ¥ç®¡ç†æ‰€æœ‰çš„ViewHolderã€‚å¯æƒ³è€ŒçŸ¥ï¼ŒAdapterä¸­æœ‰å¤šå°‘ä¸ªtypeçš„itemï¼Œå°±æœ‰å¤šå°‘ä¸ªViewHolderã€‚ ä»Žæ€ç»´å¯¼å›¾ä¸­å¯ä»¥çœ‹åˆ°æœ‰ä¸ªdelegateæ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰æ¯ä¸€ç§viewholderçš„delegateã€‚å…¶ä¸­ï¼ŒAdapterDelegateæ˜¯æ¯ä¸€ç§delegateéƒ½è¦å®žçŽ°çš„æŽ¥å£ã€‚ç”±äºŽçŽ°åœ¨ç¼–å†™ç¨‹åºéƒ½æ˜¯æ•°æ®é©±åŠ¨ä¸šåŠ¡é€»è¾‘ï¼Œmodelæ–‡ä»¶å¤¹é‡Œå°±æ˜¯æ¯ä¸€ç§delegateå¯¹åº”çš„æ•°æ®ï¼Œè€Œæœ€ç»ˆéœ€è¦æŠŠæ¯ä¸€ç§delegateçš„æ•°æ®éƒ½æ”¾åˆ°ä¸€ä¸ªlistä¸­ï¼Œè¿™å°±éœ€è¦è®©æ¯ä¸€ä¸ªæ•°æ®ç±»éƒ½å®žçŽ°IIndependentTravelDataæŽ¥å£ã€‚è¿™é‡Œç»™å‡ºdemoå·¥ç¨‹çš„æ–‡ä»¶ç»“æž„ã€‚ çŽ°åœ¨ï¼Œä½ æ— æ³•æƒ³è±¡æœ¬è¯¥ä»£ç å¾ˆå¤æ‚çš„ä¸»Adapterä¸­çš„ä»£ç ç»“æž„æœ‰å¤šæ¸…æ™°ã€‚ è¿™é‡ŒonBindViewHolderç­‰æ–¹æ³•é‡Œå†ä¹Ÿä¸éœ€è¦å†™switchæ¥åˆ¤æ–­ä¸åŒçš„typeï¼Œæ ¹æ®ä¸åŒçš„typeåšç›¸åº”æ“ä½œäº†ã€‚ä¸ºä»€ä¹ˆç»“æž„ä¼šå¦‚æ­¤æ¸…æ™°ï¼Ÿè¿™é‡Œç”¨åˆ°äº†javaçš„å¤šæ€ã€‚åœ¨MainAdapterçš„æž„é€ æ–¹æ³•é‡ŒæŠŠæ¯ä¸€ä¸ªdelegateçš„å¼•ç”¨addåˆ°managerä¸­ï¼Œåœ¨å››ä¸ªå®žçŽ°æ–¹æ³•é‡Œåªéœ€è¦è°ƒç”¨manger.*å¯¹åº”çš„æ–¹æ³•å°±å¯ä»¥äº†ã€‚ è¿™æ ·è®¾è®¡ç¨‹åºä¸å…‰æœ‰ç»“æž„æ¸…æ™°çš„ç‰¹ç‚¹ï¼Œç»´æŠ¤èµ·æ¥ä¹Ÿéžå¸¸å®¹æ˜“ã€‚æ¯”å¦‚ï¼Œæˆ‘çŽ°åœ¨è¦è°ƒæ•´ä¸€ä¸‹æ¯ä¸€ä¸ªitemçš„å±•ç¤ºé¡ºåºï¼Œæˆ‘åªéœ€è¦è°ƒæ•´listä¸­æ¯ä¸ªitemçš„modelé¡ºåºå°±å¯ä»¥äº†ã€‚ æ€»ç»“ï¼šåœ¨æ—¥å¸¸å¼€å‘ä¸­çš„ç±»ä¼¼Listé•¿åˆ—è¡¨åŠ è½½å±•ç¤ºçš„ä½¿ç”¨éžå¸¸å¤š..å¹¶ä¸”ä¸ä»…ä»…æ˜¯å•ä¸€çš„ä¸€ç§viewè¿›è¡Œå¾ªçŽ¯åŠ è½½æ•°æ®å¡«å……..è¿™æ—¶scollviewç›¸å¯¹äºŽRecyclerViewå°±å˜å¾—éžå¸¸ä¸é€‚ç”¨â€¦å½“å¯¹scollviewä¸­è¿›è¡Œä¸åŒviewçš„å¡«å……å°±ä¼šå½±å“æ•´ä½“æ€§èƒ½å’Œèµ„æºå ç”¨â€¦å¯¹äºŽscollviewè¿™æ ·çš„ç¼–ç¨‹æ¡†æž¶æœ‰ä»¥ä¸‹ä¸¤ä¸ªç¼ºç‚¹ï¼š1ã€åŠ è½½æ—¶é—´é•¿ã€‚2ã€å ç”¨å†…å­˜å¤§ã€‚å› ä¸ºè¿›å…¥é¡µé¢éœ€è¦æŠŠå…¨éƒ¨æ¨¡å—éƒ½åŠ è½½å‡ºæ¥ï¼Œè¿™ä¸ä½†ä¼šéœ€è¦å¾ˆé•¿çš„åŠ è½½æ—¶é—´ï¼Œè€Œä¸”å•ä¸ªé¡µé¢å¦‚æžœå ç”¨å†…å­˜è¿‡å¤§ï¼Œä¼šä½¿å¾—é¡µé¢éžå¸¸å¡é¡¿ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚è€Œæˆ‘å°†RecyclerViewä»£æ›¿ScrollViewï¼Œå¹¶ä»¥RecyclerViewä½œä¸ºåŸºç¡€ï¼Œä»¥å¢žå¼ºå¯æ‰©å±•æ€§ã€çµæ´»æ€§ä¸ºç›®æ ‡ï¼Œå¹¶ä½¿å¾—å„æ¨¡å—é—´å®Œå…¨è§£è€¦ã€‚æ‰€ä»¥è¯´ï¼Œè¿™ä¸ªç¼–ç¨‹æ¡†æž¶éžå¸¸å€¼å¾—ä½ æ¥åº”ç”¨ä¸€ä¸‹ï¼Œç›®å‰æˆ‘ä¹Ÿåœ¨å¤šä¸ªçº¿ä¸Šé¡µé¢ä¸­é‡‡ç”¨äº†è¿™ç§æ¡†æž¶ã€‚]]></content>
      <tags>
        <tag>Android</tag>
        <tag>Interview</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å“ªäº›æƒ…å†µä¸‹çš„å¯¹è±¡ä¼šè¢«åžƒåœ¾å›žæ”¶æœºåˆ¶å¤„ç†æŽ‰ï¼Ÿ]]></title>
    <url>%2F2018%2F03%2F03%2F%E5%93%AA%E4%BA%9B%E6%83%85%E5%86%B5%E4%B8%8B%E7%9A%84%E5%AF%B9%E8%B1%A1%E4%BC%9A%E8%A2%AB%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6%E5%A4%84%E7%90%86%E6%8E%89%EF%BC%9F%2F</url>
    <content type="text"><![CDATA[Javaå¯¹è±¡ç¬¦åˆä»¥ä¸‹æ¡ä»¶ä¾¿ä¼šè¢«åžƒåœ¾å›žæ”¶ï¼š1.æ‰€æœ‰å®žä¾‹éƒ½æ²¡æœ‰æ´»åŠ¨çº¿ç¨‹è®¿é—®ã€‚2.æ²¡æœ‰è¢«å…¶ä»–ä»»ä½•å®žä¾‹è®¿é—®çš„å¾ªçŽ¯å¼•ç”¨å®žä¾‹ã€‚3.Java ä¸­æœ‰ä¸åŒçš„å¼•ç”¨ç±»åž‹ã€‚åˆ¤æ–­å®žä¾‹æ˜¯å¦ç¬¦åˆåžƒåœ¾æ”¶é›†çš„æ¡ä»¶éƒ½ä¾èµ–äºŽå®ƒçš„å¼•ç”¨ç±»åž‹ã€‚[ ç‚¹å‡»æŸ¥çœ‹å¤§å›¾ 123456789101112åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ä½œä¸ºä¸€ç§ä¼˜åŒ–æŠ€æœ¯ï¼ŒJava ç¼–è¯‘å™¨èƒ½é€‰æ‹©ç»™å®žä¾‹èµ‹ null å€¼ï¼Œä»Žè€Œæ ‡è®°å®žä¾‹ä¸ºå¯å›žæ”¶ã€‚class Animal &#123; public static void main(String[] args) &#123; Animal lion =new Animal(); System.out.println("Main is completed."); &#125; protected void finalize() &#123; System.out.println("Rest in Peace!"); &#125;&#125;]]></content>
      <tags>
        <tag>Interview</tag>
        <tag>Java</tag>
        <tag>GC</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[volatileå…³é”®å­—]]></title>
    <url>%2F2018%2F03%2F01%2Fvolatile%E5%85%B3%E9%94%AE%E5%AD%97%2F</url>
    <content type="text"><![CDATA[æ˜¨å¤©æŠ•äº†é˜¿é‡ŒAndroidå¼€å‘çš„å†…æŽ¨ç®€åŽ†â€¦ä»Šå¤©ç»“æŸäº†ä¸€é¢â€¦å¯¹äºŽé¢è¯•å®˜æé—®volatileå…³é”®å­—çš„æ„ä¹‰å›žç­”å¾—æ¯”è¾ƒå«ç³Šâ€¦å½“æ—¶åªæœ‰ä¹‹å‰ç”¨è¿‡ä»¥åŠåœ¨JavaæŠ€æœ¯ä¹¦ä¸Šçš„æ¨¡ç³Šè®°å¿†ä½œç­”â€¦ç‰¹ä»¥æ­¤æ–‡æ¥å¼¥è¡¥è‡ªå·±çŸ¥è¯†çš„æ¼æ´žä¸€ã€Javaå†…å­˜æ¨¡åž‹æƒ³è¦ç†è§£volatileä¸ºä»€ä¹ˆèƒ½ç¡®ä¿å¯è§æ€§ï¼Œå°±è¦å…ˆç†è§£Javaä¸­çš„å†…å­˜æ¨¡åž‹æ˜¯ä»€ä¹ˆæ ·çš„ã€‚ Javaå†…å­˜æ¨¡åž‹è§„å®šäº†æ‰€æœ‰çš„å˜é‡éƒ½å­˜å‚¨åœ¨ä¸»å†…å­˜ä¸­ã€‚æ¯æ¡çº¿ç¨‹ä¸­è¿˜æœ‰è‡ªå·±çš„å·¥ä½œå†…å­˜ï¼Œçº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­ä¿å­˜äº†è¢«è¯¥çº¿ç¨‹æ‰€ä½¿ç”¨åˆ°çš„å˜é‡ï¼ˆè¿™äº›å˜é‡æ˜¯ä»Žä¸»å†…å­˜ä¸­æ‹·è´è€Œæ¥ï¼‰ã€‚çº¿ç¨‹å¯¹å˜é‡çš„æ‰€æœ‰æ“ä½œï¼ˆè¯»å–ï¼Œèµ‹å€¼ï¼‰éƒ½å¿…é¡»åœ¨å·¥ä½œå†…å­˜ä¸­è¿›è¡Œã€‚ä¸åŒçº¿ç¨‹ä¹‹é—´ä¹Ÿæ— æ³•ç›´æŽ¥è®¿é—®å¯¹æ–¹å·¥ä½œå†…å­˜ä¸­çš„å˜é‡ï¼Œçº¿ç¨‹é—´å˜é‡å€¼çš„ä¼ é€’å‡éœ€è¦é€šè¿‡ä¸»å†…å­˜æ¥å®Œæˆã€‚ åŸºäºŽæ­¤ç§å†…å­˜æ¨¡åž‹ï¼Œä¾¿äº§ç”Ÿäº†å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­çš„æ•°æ®â€œè„è¯»â€ç­‰é—®é¢˜ã€‚ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼šåœ¨javaä¸­ï¼Œæ‰§è¡Œä¸‹é¢è¿™ä¸ªè¯­å¥ï¼š1i = 10; æ‰§è¡Œçº¿ç¨‹å¿…é¡»å…ˆåœ¨è‡ªå·±çš„å·¥ä½œçº¿ç¨‹ä¸­å¯¹å˜é‡iæ‰€åœ¨çš„ç¼“å­˜è¡Œè¿›è¡Œèµ‹å€¼æ“ä½œï¼Œç„¶åŽå†å†™å…¥ä¸»å­˜å½“ä¸­ã€‚è€Œä¸æ˜¯ç›´æŽ¥å°†æ•°å€¼10å†™å…¥ä¸»å­˜å½“ä¸­ã€‚ æ¯”å¦‚åŒæ—¶æœ‰2ä¸ªçº¿ç¨‹æ‰§è¡Œè¿™æ®µä»£ç ï¼Œå‡å¦‚åˆå§‹æ—¶içš„å€¼ä¸º10ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¸Œæœ›ä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œä¹‹åŽiçš„å€¼å˜ä¸º12ã€‚ä½†æ˜¯äº‹å®žä¼šæ˜¯è¿™æ ·å—ï¼Ÿ å¯èƒ½å­˜åœ¨ä¸‹é¢ä¸€ç§æƒ…å†µï¼šåˆå§‹æ—¶ï¼Œä¸¤ä¸ªçº¿ç¨‹åˆ†åˆ«è¯»å–içš„å€¼å­˜å…¥å„è‡ªæ‰€åœ¨çš„å·¥ä½œå†…å­˜å½“ä¸­ï¼Œç„¶åŽçº¿ç¨‹1è¿›è¡ŒåŠ 1æ“ä½œï¼Œç„¶åŽæŠŠiçš„æœ€æ–°å€¼11å†™å…¥åˆ°å†…å­˜ã€‚æ­¤æ—¶çº¿ç¨‹2çš„å·¥ä½œå†…å­˜å½“ä¸­içš„å€¼è¿˜æ˜¯10ï¼Œè¿›è¡ŒåŠ 1æ“ä½œä¹‹åŽï¼Œiçš„å€¼ä¸º11ï¼Œç„¶åŽçº¿ç¨‹2æŠŠiçš„å€¼å†™å…¥å†…å­˜ã€‚ æœ€ç»ˆç»“æžœiçš„å€¼æ˜¯11ï¼Œè€Œä¸æ˜¯12ã€‚è¿™å°±æ˜¯è‘—åçš„ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ã€‚é€šå¸¸ç§°è¿™ç§è¢«å¤šä¸ªçº¿ç¨‹è®¿é—®çš„å˜é‡ä¸ºå…±äº«å˜é‡ã€‚ é‚£ä¹ˆå¦‚ä½•ç¡®ä¿å…±äº«å˜é‡åœ¨å¤šçº¿ç¨‹è®¿é—®æ—¶èƒ½å¤Ÿæ­£ç¡®è¾“å‡ºç»“æžœå‘¢ï¼Ÿ åœ¨è§£å†³è¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆäº†è§£å¹¶å‘ç¼–ç¨‹çš„ä¸‰å¤§æ¦‚å¿µï¼šåŽŸå­æ€§ï¼Œæœ‰åºæ€§ï¼Œå¯è§æ€§ã€‚ äºŒã€åŽŸå­æ€§1.å®šä¹‰åŽŸå­æ€§ï¼šå³ä¸€ä¸ªæ“ä½œæˆ–è€…å¤šä¸ªæ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œå¹¶ä¸”æ‰§è¡Œçš„è¿‡ç¨‹ä¸ä¼šè¢«ä»»ä½•å› ç´ æ‰“æ–­ï¼Œè¦ä¹ˆå°±éƒ½ä¸æ‰§è¡Œã€‚ 2.å®žä¾‹ä¸€ä¸ªå¾ˆç»å…¸çš„ä¾‹å­å°±æ˜¯é“¶è¡Œè´¦æˆ·è½¬è´¦é—®é¢˜ï¼š æ¯”å¦‚ä»Žè´¦æˆ·Aå‘è´¦æˆ·Bè½¬1000å…ƒï¼Œé‚£ä¹ˆå¿…ç„¶åŒ…æ‹¬2ä¸ªæ“ä½œï¼šä»Žè´¦æˆ·Aå‡åŽ»1000å…ƒï¼Œå¾€è´¦æˆ·BåŠ ä¸Š1000å…ƒã€‚ è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æžœè¿™2ä¸ªæ“ä½œä¸å…·å¤‡åŽŸå­æ€§ï¼Œä¼šé€ æˆä»€ä¹ˆæ ·çš„åŽæžœã€‚å‡å¦‚ä»Žè´¦æˆ·Aå‡åŽ»1000å…ƒä¹‹åŽï¼Œæ“ä½œçªç„¶ä¸­æ­¢ã€‚è¿™æ ·å°±ä¼šå¯¼è‡´è´¦æˆ·Aè™½ç„¶å‡åŽ»äº†1000å…ƒï¼Œä½†æ˜¯è´¦æˆ·Bæ²¡æœ‰æ”¶åˆ°è¿™ä¸ªè½¬è¿‡æ¥çš„1000å…ƒã€‚ æ‰€ä»¥è¿™2ä¸ªæ“ä½œå¿…é¡»è¦å…·å¤‡åŽŸå­æ€§æ‰èƒ½ä¿è¯ä¸å‡ºçŽ°ä¸€äº›æ„å¤–çš„é—®é¢˜ã€‚ åŒæ ·åœ°åæ˜ åˆ°å¹¶å‘ç¼–ç¨‹ä¸­ä¼šå‡ºçŽ°ä»€ä¹ˆç»“æžœå‘¢ï¼Ÿ ä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œå¤§å®¶æƒ³ä¸€ä¸‹å‡å¦‚ä¸ºä¸€ä¸ª32ä½çš„å˜é‡èµ‹å€¼è¿‡ç¨‹ä¸å…·å¤‡åŽŸå­æ€§çš„è¯ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆåŽæžœï¼Ÿ1234567891011121314151617i = 9;``` å‡è‹¥ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œåˆ°è¿™ä¸ªè¯­å¥æ—¶ï¼Œæˆ‘æš‚ä¸”å‡è®¾ä¸ºä¸€ä¸ª32ä½çš„å˜é‡èµ‹å€¼åŒ…æ‹¬ä¸¤ä¸ªè¿‡ç¨‹ï¼šä¸ºä½Ž16ä½èµ‹å€¼ï¼Œä¸ºé«˜16ä½èµ‹å€¼ã€‚é‚£ä¹ˆå°±å¯èƒ½å‘ç”Ÿä¸€ç§æƒ…å†µï¼šå½“å°†ä½Ž16ä½æ•°å€¼å†™å…¥ä¹‹åŽï¼Œçªç„¶è¢«ä¸­æ–­ï¼Œè€Œæ­¤æ—¶åˆæœ‰ä¸€ä¸ªçº¿ç¨‹åŽ»è¯»å–içš„å€¼ï¼Œé‚£ä¹ˆè¯»å–åˆ°çš„å°±æ˜¯é”™è¯¯çš„æ•°æ®ã€‚### 3.Javaä¸­çš„åŽŸå­æ€§åœ¨Javaä¸­ï¼Œ**å¯¹åŸºæœ¬æ•°æ®ç±»åž‹çš„å˜é‡çš„è¯»å–å’Œèµ‹å€¼æ“ä½œæ˜¯åŽŸå­æ€§æ“ä½œ**ï¼Œå³è¿™äº›æ“ä½œæ˜¯ä¸å¯è¢«ä¸­æ–­çš„ï¼Œè¦ä¹ˆæ‰§è¡Œï¼Œè¦ä¹ˆä¸æ‰§è¡Œã€‚ä¸Šé¢ä¸€å¥è¯è™½ç„¶çœ‹èµ·æ¥ç®€å•ï¼Œä½†æ˜¯ç†è§£èµ·æ¥å¹¶ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“ã€‚çœ‹ä¸‹é¢ä¸€ä¸ªä¾‹å­iï¼šè¯·åˆ†æžä»¥ä¸‹å“ªäº›æ“ä½œæ˜¯åŽŸå­æ€§æ“ä½œï¼š```javax = 10; //è¯­å¥1y = x; //è¯­å¥2x++; //è¯­å¥3x = x + 1; //è¯­å¥4 å’‹ä¸€çœ‹ï¼Œå¯èƒ½ä¼šè¯´ä¸Šé¢çš„4ä¸ªè¯­å¥ä¸­çš„æ“ä½œéƒ½æ˜¯åŽŸå­æ€§æ“ä½œã€‚å…¶å®žåªæœ‰è¯­å¥1æ˜¯åŽŸå­æ€§æ“ä½œï¼Œå…¶ä»–ä¸‰ä¸ªè¯­å¥éƒ½ä¸æ˜¯åŽŸå­æ€§æ“ä½œã€‚ è¯­å¥1æ˜¯ç›´æŽ¥å°†æ•°å€¼10èµ‹å€¼ç»™xï¼Œä¹Ÿå°±æ˜¯è¯´çº¿ç¨‹æ‰§è¡Œè¿™ä¸ªè¯­å¥çš„ä¼šç›´æŽ¥å°†æ•°å€¼10å†™å…¥åˆ°å·¥ä½œå†…å­˜ä¸­ã€‚ è¯­å¥2å®žé™…ä¸ŠåŒ…å«2ä¸ªæ“ä½œï¼Œå®ƒå…ˆè¦åŽ»è¯»å–xçš„å€¼ï¼Œå†å°†xçš„å€¼å†™å…¥å·¥ä½œå†…å­˜ï¼Œè™½ç„¶è¯»å–xçš„å€¼ä»¥åŠå°†xçš„å€¼å†™å…¥å·¥ä½œå†…å­˜ï¼Œè¿™2ä¸ªæ“ä½œéƒ½æ˜¯åŽŸå­æ€§æ“ä½œï¼Œä½†æ˜¯åˆèµ·æ¥å°±ä¸æ˜¯åŽŸå­æ€§æ“ä½œäº†ã€‚ åŒæ ·çš„ï¼Œx++å’Œ x = x+1åŒ…æ‹¬3ä¸ªæ“ä½œï¼šè¯»å–xçš„å€¼ï¼Œè¿›è¡ŒåŠ 1æ“ä½œï¼Œå†™å…¥æ–°çš„å€¼ã€‚ æ‰€ä»¥ä¸Šé¢4ä¸ªè¯­å¥åªæœ‰è¯­å¥1çš„æ“ä½œå…·å¤‡åŽŸå­æ€§ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰ç®€å•çš„è¯»å–ã€èµ‹å€¼ï¼ˆè€Œä¸”å¿…é¡»æ˜¯å°†æ•°å­—èµ‹å€¼ç»™æŸä¸ªå˜é‡ï¼Œå˜é‡ä¹‹é—´çš„ç›¸äº’èµ‹å€¼ä¸æ˜¯åŽŸå­æ“ä½œï¼‰æ‰æ˜¯åŽŸå­æ“ä½œã€‚ ä»Žä¸Šé¢å¯ä»¥çœ‹å‡ºï¼ŒJavaå†…å­˜æ¨¡åž‹åªä¿è¯äº†åŸºæœ¬è¯»å–å’Œèµ‹å€¼æ˜¯åŽŸå­æ€§æ“ä½œï¼Œå¦‚æžœè¦å®žçŽ°æ›´å¤§èŒƒå›´æ“ä½œçš„åŽŸå­æ€§ï¼Œå¯ä»¥é€šè¿‡synchronizedå’ŒLockæ¥å®žçŽ°ã€‚ç”±äºŽsynchronizedå’ŒLockèƒ½å¤Ÿä¿è¯ä»»ä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè¯¥ä»£ç å—ï¼Œé‚£ä¹ˆè‡ªç„¶å°±ä¸å­˜åœ¨åŽŸå­æ€§é—®é¢˜äº†ï¼Œä»Žè€Œä¿è¯äº†åŽŸå­æ€§ã€‚ ä¸‰ã€å¯è§æ€§1.å®šä¹‰å¯è§æ€§æ˜¯æŒ‡å½“å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªå˜é‡æ—¶ï¼Œä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†è¿™ä¸ªå˜é‡çš„å€¼ï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹å³çœ‹å¾—åˆ°ä¿®æ”¹çš„å€¼ã€‚ 2.å®žä¾‹ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œçœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼š 123456//çº¿ç¨‹1æ‰§è¡Œçš„ä»£ç int i = 0;i = 10;//çº¿ç¨‹2æ‰§è¡Œçš„ä»£ç j = i; ç”±ä¸Šé¢çš„åˆ†æžå¯çŸ¥ï¼Œå½“çº¿ç¨‹1æ‰§è¡Œ i =10è¿™å¥æ—¶ï¼Œä¼šå…ˆæŠŠiçš„åˆå§‹å€¼åŠ è½½åˆ°å·¥ä½œå†…å­˜ä¸­ï¼Œç„¶åŽèµ‹å€¼ä¸º10ï¼Œé‚£ä¹ˆåœ¨çº¿ç¨‹1çš„å·¥ä½œå†…å­˜å½“ä¸­içš„å€¼å˜ä¸º10äº†ï¼Œå´æ²¡æœ‰ç«‹å³å†™å…¥åˆ°ä¸»å­˜å½“ä¸­ã€‚ æ­¤æ—¶çº¿ç¨‹2æ‰§è¡Œ j = iï¼Œå®ƒä¼šå…ˆåŽ»ä¸»å­˜è¯»å–içš„å€¼å¹¶åŠ è½½åˆ°çº¿ç¨‹2çš„å·¥ä½œå†…å­˜å½“ä¸­ï¼Œæ³¨æ„æ­¤æ—¶å†…å­˜å½“ä¸­içš„å€¼è¿˜æ˜¯0ï¼Œé‚£ä¹ˆå°±ä¼šä½¿å¾—jçš„å€¼ä¸º0ï¼Œè€Œä¸æ˜¯10. è¿™å°±æ˜¯å¯è§æ€§é—®é¢˜ï¼Œçº¿ç¨‹1å¯¹å˜é‡iä¿®æ”¹äº†ä¹‹åŽï¼Œçº¿ç¨‹2æ²¡æœ‰ç«‹å³çœ‹åˆ°çº¿ç¨‹1ä¿®æ”¹çš„å€¼ã€‚ 3.Javaä¸­çš„å¯è§æ€§å¯¹äºŽå¯è§æ€§ï¼ŒJavaæä¾›äº†volatileå…³é”®å­—æ¥ä¿è¯å¯è§æ€§ã€‚ å½“ä¸€ä¸ªå…±äº«å˜é‡è¢«volatileä¿®é¥°æ—¶ï¼Œå®ƒä¼šä¿è¯ä¿®æ”¹çš„å€¼ä¼šç«‹å³è¢«æ›´æ–°åˆ°ä¸»å­˜ï¼Œå½“æœ‰å…¶ä»–çº¿ç¨‹éœ€è¦è¯»å–æ—¶ï¼Œå®ƒä¼šåŽ»å†…å­˜ä¸­è¯»å–æ–°å€¼ã€‚ è€Œæ™®é€šçš„å…±äº«å˜é‡ä¸èƒ½ä¿è¯å¯è§æ€§ï¼Œå› ä¸ºæ™®é€šå…±äº«å˜é‡è¢«ä¿®æ”¹ä¹‹åŽï¼Œä»€ä¹ˆæ—¶å€™è¢«å†™å…¥ä¸»å­˜æ˜¯ä¸ç¡®å®šçš„ï¼Œå½“å…¶ä»–çº¿ç¨‹åŽ»è¯»å–æ—¶ï¼Œæ­¤æ—¶å†…å­˜ä¸­å¯èƒ½è¿˜æ˜¯åŽŸæ¥çš„æ—§å€¼ï¼Œå› æ­¤æ— æ³•ä¿è¯å¯è§æ€§ã€‚ å¦å¤–ï¼Œé€šè¿‡synchronizedå’ŒLockä¹Ÿèƒ½å¤Ÿä¿è¯å¯è§æ€§ï¼Œsynchronizedå’ŒLockèƒ½ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èŽ·å–é”ç„¶åŽæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œå¹¶ä¸”åœ¨é‡Šæ”¾é”ä¹‹å‰ä¼šå°†å¯¹å˜é‡çš„ä¿®æ”¹åˆ·æ–°åˆ°ä¸»å­˜å½“ä¸­ã€‚å› æ­¤å¯ä»¥ä¿è¯å¯è§æ€§ã€‚ å››ã€æœ‰åºæ€§1.å®šä¹‰æœ‰åºæ€§ï¼šå³ç¨‹åºæ‰§è¡Œçš„é¡ºåºæŒ‰ç…§ä»£ç çš„å…ˆåŽé¡ºåºæ‰§è¡Œã€‚ 2.å®žä¾‹ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œçœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼š 123456int i = 0;boolean flag = false;i = 1; //è¯­å¥1flag = true; //è¯­å¥2 ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªintåž‹å˜é‡ï¼Œå®šä¹‰äº†ä¸€ä¸ªbooleanç±»åž‹å˜é‡ï¼Œç„¶åŽåˆ†åˆ«å¯¹ä¸¤ä¸ªå˜é‡è¿›è¡Œèµ‹å€¼æ“ä½œã€‚ä»Žä»£ç é¡ºåºä¸Šçœ‹ï¼Œè¯­å¥1æ˜¯åœ¨è¯­å¥2å‰é¢çš„ï¼Œé‚£ä¹ˆJVMåœ¨çœŸæ­£æ‰§è¡Œè¿™æ®µä»£ç çš„æ—¶å€™ä¼šä¿è¯è¯­å¥1ä¸€å®šä¼šåœ¨è¯­å¥2å‰é¢æ‰§è¡Œå—ï¼Ÿä¸ä¸€å®šï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿè¿™é‡Œå¯èƒ½ä¼šå‘ç”ŸæŒ‡ä»¤é‡æŽ’åºï¼ˆInstruction Reorderï¼‰ã€‚ ä¸‹é¢è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯æŒ‡ä»¤é‡æŽ’åºï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå¤„ç†å™¨ä¸ºäº†æé«˜ç¨‹åºè¿è¡Œæ•ˆçŽ‡ï¼Œå¯èƒ½ä¼šå¯¹è¾“å…¥ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œå®ƒä¸ä¿è¯ç¨‹åºä¸­å„ä¸ªè¯­å¥çš„æ‰§è¡Œå…ˆåŽé¡ºåºåŒä»£ç ä¸­çš„é¡ºåºä¸€è‡´ï¼Œä½†æ˜¯å®ƒä¼šä¿è¯ç¨‹åºæœ€ç»ˆæ‰§è¡Œç»“æžœå’Œä»£ç é¡ºåºæ‰§è¡Œçš„ç»“æžœæ˜¯ä¸€è‡´çš„ã€‚ æ¯”å¦‚ä¸Šé¢çš„ä»£ç ä¸­ï¼Œè¯­å¥1å’Œè¯­å¥2è°å…ˆæ‰§è¡Œå¯¹æœ€ç»ˆçš„ç¨‹åºç»“æžœå¹¶æ²¡æœ‰å½±å“ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè¯­å¥2å…ˆæ‰§è¡Œè€Œè¯­å¥1åŽæ‰§è¡Œã€‚ ä½†æ˜¯è¦æ³¨æ„ï¼Œè™½ç„¶å¤„ç†å™¨ä¼šå¯¹æŒ‡ä»¤è¿›è¡Œé‡æŽ’åºï¼Œä½†æ˜¯å®ƒä¼šä¿è¯ç¨‹åºæœ€ç»ˆç»“æžœä¼šå’Œä»£ç é¡ºåºæ‰§è¡Œç»“æžœç›¸åŒï¼Œé‚£ä¹ˆå®ƒé ä»€ä¹ˆä¿è¯çš„å‘¢ï¼Ÿå†çœ‹ä¸‹é¢ä¸€ä¸ªä¾‹å­ï¼š1234int a = 10; //è¯­å¥1int r = 2; //è¯­å¥2a = a + 3; //è¯­å¥3r = a*a; //è¯­å¥4 è¿™æ®µä»£ç æœ‰4ä¸ªè¯­å¥ï¼Œé‚£ä¹ˆå¯èƒ½çš„ä¸€ä¸ªæ‰§è¡Œé¡ºåºæ˜¯ï¼š é‚£ä¹ˆå¯ä¸å¯èƒ½æ˜¯è¿™ä¸ªæ‰§è¡Œé¡ºåºå‘¢ï¼š è¯­å¥2 è¯­å¥1 è¯­å¥4 è¯­å¥3 ä¸å¯èƒ½ï¼Œå› ä¸ºå¤„ç†å™¨åœ¨è¿›è¡Œé‡æŽ’åºæ—¶æ˜¯ä¼šè€ƒè™‘æŒ‡ä»¤ä¹‹é—´çš„æ•°æ®ä¾èµ–æ€§ï¼Œå¦‚æžœä¸€ä¸ªæŒ‡ä»¤Instruction 2å¿…é¡»ç”¨åˆ°Instruction 1çš„ç»“æžœï¼Œé‚£ä¹ˆå¤„ç†å™¨ä¼šä¿è¯Instruction 1ä¼šåœ¨Instruction 2ä¹‹å‰æ‰§è¡Œã€‚ è™½ç„¶é‡æŽ’åºä¸ä¼šå½±å“å•ä¸ªçº¿ç¨‹å†…ç¨‹åºæ‰§è¡Œçš„ç»“æžœï¼Œä½†æ˜¯å¤šçº¿ç¨‹å‘¢ï¼Ÿä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­ï¼š 12345678910//çº¿ç¨‹1:context = loadContext(); //è¯­å¥1inited = true; //è¯­å¥2 //çº¿ç¨‹2:while(!inited )&#123; sleep()&#125;doSomethingwithconfig(context); ä¸Šé¢ä»£ç ä¸­ï¼Œç”±äºŽè¯­å¥1å’Œè¯­å¥2æ²¡æœ‰æ•°æ®ä¾èµ–æ€§ï¼Œå› æ­¤å¯èƒ½ä¼šè¢«é‡æŽ’åºã€‚å‡å¦‚å‘ç”Ÿäº†é‡æŽ’åºï¼Œåœ¨çº¿ç¨‹1æ‰§è¡Œè¿‡ç¨‹ä¸­å…ˆæ‰§è¡Œè¯­å¥2ï¼Œè€Œæ­¤æ˜¯çº¿ç¨‹2ä¼šä»¥ä¸ºåˆå§‹åŒ–å·¥ä½œå·²ç»å®Œæˆï¼Œé‚£ä¹ˆå°±ä¼šè·³å‡ºwhileå¾ªçŽ¯ï¼ŒåŽ»æ‰§è¡ŒdoSomethingwithconfig(context)æ–¹æ³•ï¼Œè€Œæ­¤æ—¶contextå¹¶æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œå°±ä¼šå¯¼è‡´ç¨‹åºå‡ºé”™ã€‚ ä»Žä¸Šé¢å¯ä»¥çœ‹å‡ºï¼ŒæŒ‡ä»¤é‡æŽ’åºä¸ä¼šå½±å“å•ä¸ªçº¿ç¨‹çš„æ‰§è¡Œï¼Œä½†æ˜¯ä¼šå½±å“åˆ°çº¿ç¨‹å¹¶å‘æ‰§è¡Œçš„æ­£ç¡®æ€§ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œè¦æƒ³å¹¶å‘ç¨‹åºæ­£ç¡®åœ°æ‰§è¡Œï¼Œå¿…é¡»è¦ä¿è¯åŽŸå­æ€§ã€å¯è§æ€§ä»¥åŠæœ‰åºæ€§ã€‚åªè¦æœ‰ä¸€ä¸ªæ²¡æœ‰è¢«ä¿è¯ï¼Œå°±æœ‰å¯èƒ½ä¼šå¯¼è‡´ç¨‹åºè¿è¡Œä¸æ­£ç¡®ã€‚ 3.Javaä¸­çš„æœ‰åºæ€§åœ¨Javaå†…å­˜æ¨¡åž‹ä¸­ï¼Œå…è®¸ç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¯¹æŒ‡ä»¤è¿›è¡Œé‡æŽ’åºï¼Œä½†æ˜¯é‡æŽ’åºè¿‡ç¨‹ä¸ä¼šå½±å“åˆ°å•çº¿ç¨‹ç¨‹åºçš„æ‰§è¡Œï¼Œå´ä¼šå½±å“åˆ°å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œçš„æ­£ç¡®æ€§ã€‚ åœ¨Javaé‡Œé¢ï¼Œå¯ä»¥é€šè¿‡volatileå…³é”®å­—æ¥ä¿è¯ä¸€å®šçš„â€œæœ‰åºæ€§â€ã€‚å¦å¤–å¯ä»¥é€šè¿‡synchronizedå’ŒLockæ¥ä¿è¯æœ‰åºæ€§ï¼Œå¾ˆæ˜¾ç„¶ï¼Œsynchronizedå’ŒLockä¿è¯æ¯ä¸ªæ—¶åˆ»æ˜¯æœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œç›¸å½“äºŽæ˜¯è®©çº¿ç¨‹é¡ºåºæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œè‡ªç„¶å°±ä¿è¯äº†æœ‰åºæ€§ã€‚ å¦å¤–ï¼ŒJavaå†…å­˜æ¨¡åž‹å…·å¤‡ä¸€äº›å…ˆå¤©çš„â€œæœ‰åºæ€§â€ï¼Œå³ä¸éœ€è¦é€šè¿‡ä»»ä½•æ‰‹æ®µå°±èƒ½å¤Ÿå¾—åˆ°ä¿è¯çš„æœ‰åºæ€§ï¼Œè¿™ä¸ªé€šå¸¸ä¹Ÿç§°ä¸º happens-before åŽŸåˆ™ã€‚å¦‚æžœä¸¤ä¸ªæ“ä½œçš„æ‰§è¡Œæ¬¡åºæ— æ³•ä»Žhappens-beforeåŽŸåˆ™æŽ¨å¯¼å‡ºæ¥ï¼Œé‚£ä¹ˆå®ƒä»¬å°±ä¸èƒ½ä¿è¯å®ƒä»¬çš„æœ‰åºæ€§ï¼Œè™šæ‹Ÿæœºå¯ä»¥éšæ„åœ°å¯¹å®ƒä»¬è¿›è¡Œé‡æŽ’åºã€‚ ä¸‹é¢å°±æ¥å…·ä½“ä»‹ç»ä¸‹happens-beforeåŽŸåˆ™ï¼ˆå…ˆè¡Œå‘ç”ŸåŽŸåˆ™ï¼‰ï¼šâ‘ ç¨‹åºæ¬¡åºè§„åˆ™ï¼šä¸€ä¸ªçº¿ç¨‹å†…ï¼ŒæŒ‰ç…§ä»£ç é¡ºåºï¼Œä¹¦å†™åœ¨å‰é¢çš„æ“ä½œå…ˆè¡Œå‘ç”ŸäºŽä¹¦å†™åœ¨åŽé¢çš„æ“ä½œ â‘¡é”å®šè§„åˆ™ï¼šä¸€ä¸ªunLockæ“ä½œå…ˆè¡Œå‘ç”ŸäºŽåŽé¢å¯¹åŒä¸€ä¸ªé”çš„lockæ“ä½œ â‘¢volatileå˜é‡è§„åˆ™ï¼šå¯¹ä¸€ä¸ªå˜é‡çš„å†™æ“ä½œå…ˆè¡Œå‘ç”ŸäºŽåŽé¢å¯¹è¿™ä¸ªå˜é‡çš„è¯»æ“ä½œ â‘£ä¼ é€’è§„åˆ™ï¼šå¦‚æžœæ“ä½œAå…ˆè¡Œå‘ç”ŸäºŽæ“ä½œBï¼Œè€Œæ“ä½œBåˆå…ˆè¡Œå‘ç”ŸäºŽæ“ä½œCï¼Œåˆ™å¯ä»¥å¾—å‡ºæ“ä½œAå…ˆè¡Œå‘ç”ŸäºŽæ“ä½œC â‘¤çº¿ç¨‹å¯åŠ¨è§„åˆ™ï¼šThreadå¯¹è±¡çš„start()æ–¹æ³•å…ˆè¡Œå‘ç”ŸäºŽæ­¤çº¿ç¨‹çš„æ¯ä¸ªä¸€ä¸ªåŠ¨ä½œ â‘¥çº¿ç¨‹ä¸­æ–­è§„åˆ™ï¼šå¯¹çº¿ç¨‹interrupt()æ–¹æ³•çš„è°ƒç”¨å…ˆè¡Œå‘ç”ŸäºŽè¢«ä¸­æ–­çº¿ç¨‹çš„ä»£ç æ£€æµ‹åˆ°ä¸­æ–­äº‹ä»¶çš„å‘ç”Ÿ â‘¦çº¿ç¨‹ç»ˆç»“è§„åˆ™ï¼šçº¿ç¨‹ä¸­æ‰€æœ‰çš„æ“ä½œéƒ½å…ˆè¡Œå‘ç”ŸäºŽçº¿ç¨‹çš„ç»ˆæ­¢æ£€æµ‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Thread.join()æ–¹æ³•ç»“æŸã€Thread.isAlive()çš„è¿”å›žå€¼æ‰‹æ®µæ£€æµ‹åˆ°çº¿ç¨‹å·²ç»ç»ˆæ­¢æ‰§è¡Œ â‘§å¯¹è±¡ç»ˆç»“è§„åˆ™ï¼šä¸€ä¸ªå¯¹è±¡çš„åˆå§‹åŒ–å®Œæˆå…ˆè¡Œå‘ç”ŸäºŽä»–çš„finalize()æ–¹æ³•çš„å¼€å§‹ è¿™8æ¡è§„åˆ™ä¸­ï¼Œå‰4æ¡è§„åˆ™æ˜¯æ¯”è¾ƒé‡è¦çš„ï¼ŒåŽ4æ¡è§„åˆ™éƒ½æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚ ä¸‹é¢æˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹å‰4æ¡è§„åˆ™ï¼š å¯¹äºŽç¨‹åºæ¬¡åºè§„åˆ™æ¥è¯´ï¼Œå°±æ˜¯ä¸€æ®µç¨‹åºä»£ç çš„æ‰§è¡Œåœ¨å•ä¸ªçº¿ç¨‹ä¸­çœ‹èµ·æ¥æ˜¯æœ‰åºçš„ã€‚æ³¨æ„ï¼Œè™½ç„¶è¿™æ¡è§„åˆ™ä¸­æåˆ°â€œä¹¦å†™åœ¨å‰é¢çš„æ“ä½œå…ˆè¡Œå‘ç”ŸäºŽä¹¦å†™åœ¨åŽé¢çš„æ“ä½œâ€ï¼Œè¿™ä¸ªåº”è¯¥æ˜¯ç¨‹åºçœ‹èµ·æ¥æ‰§è¡Œçš„é¡ºåºæ˜¯æŒ‰ç…§ä»£ç é¡ºåºæ‰§è¡Œçš„ï¼Œä½†æ˜¯è™šæ‹Ÿæœºå¯èƒ½ä¼šå¯¹ç¨‹åºä»£ç è¿›è¡ŒæŒ‡ä»¤é‡æŽ’åºã€‚è™½ç„¶è¿›è¡Œé‡æŽ’åºï¼Œä½†æ˜¯æœ€ç»ˆæ‰§è¡Œçš„ç»“æžœæ˜¯ä¸Žç¨‹åºé¡ºåºæ‰§è¡Œçš„ç»“æžœä¸€è‡´çš„ï¼Œå®ƒåªä¼šå¯¹ä¸å­˜åœ¨æ•°æ®ä¾èµ–æ€§çš„æŒ‡ä»¤è¿›è¡Œé‡æŽ’åºã€‚å› æ­¤ï¼Œåœ¨å•ä¸ªçº¿ç¨‹ä¸­ï¼Œç¨‹åºæ‰§è¡Œçœ‹èµ·æ¥æ˜¯æœ‰åºæ‰§è¡Œçš„ï¼Œè¿™ä¸€ç‚¹è¦æ³¨æ„ç†è§£ã€‚äº‹å®žä¸Šï¼Œè¿™ä¸ªè§„åˆ™æ˜¯ç”¨æ¥ä¿è¯ç¨‹åºåœ¨å•çº¿ç¨‹ä¸­æ‰§è¡Œç»“æžœçš„æ­£ç¡®æ€§ï¼Œä½†æ— æ³•ä¿è¯ç¨‹åºåœ¨å¤šçº¿ç¨‹ä¸­æ‰§è¡Œçš„æ­£ç¡®æ€§ã€‚ ç¬¬äºŒæ¡è§„åˆ™ä¹Ÿæ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œä¹Ÿå°±æ˜¯è¯´æ— è®ºåœ¨å•çº¿ç¨‹ä¸­è¿˜æ˜¯å¤šçº¿ç¨‹ä¸­ï¼ŒåŒä¸€ä¸ªé”å¦‚æžœå¤„äºŽè¢«é”å®šçš„çŠ¶æ€ï¼Œé‚£ä¹ˆå¿…é¡»å…ˆå¯¹é”è¿›è¡Œäº†é‡Šæ”¾æ“ä½œï¼ŒåŽé¢æ‰èƒ½ç»§ç»­è¿›è¡Œlockæ“ä½œã€‚ ç¬¬ä¸‰æ¡è§„åˆ™æ˜¯ä¸€æ¡æ¯”è¾ƒé‡è¦çš„è§„åˆ™ã€‚ç›´è§‚åœ°è§£é‡Šå°±æ˜¯ï¼Œå¦‚æžœä¸€ä¸ªçº¿ç¨‹å…ˆåŽ»å†™ä¸€ä¸ªå˜é‡ï¼Œç„¶åŽä¸€ä¸ªçº¿ç¨‹åŽ»è¿›è¡Œè¯»å–ï¼Œé‚£ä¹ˆå†™å…¥æ“ä½œè‚¯å®šä¼šå…ˆè¡Œå‘ç”ŸäºŽè¯»æ“ä½œã€‚ ç¬¬å››æ¡è§„åˆ™å®žé™…ä¸Šå°±æ˜¯ä½“çŽ°happens-beforeåŽŸåˆ™å…·å¤‡ä¼ é€’æ€§ã€‚ äº”ã€æ·±å…¥ç†è§£volatileå…³é”®å­—1.volatileä¿è¯å¯è§æ€§ä¸€æ—¦ä¸€ä¸ªå…±äº«å˜é‡ï¼ˆç±»çš„æˆå‘˜å˜é‡ã€ç±»çš„é™æ€æˆå‘˜å˜é‡ï¼‰è¢«volatileä¿®é¥°ä¹‹åŽï¼Œé‚£ä¹ˆå°±å…·å¤‡äº†ä¸¤å±‚è¯­ä¹‰ï¼š 1ï¼‰ä¿è¯äº†ä¸åŒçº¿ç¨‹å¯¹è¿™ä¸ªå˜é‡è¿›è¡Œæ“ä½œæ—¶çš„å¯è§æ€§ï¼Œå³ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†æŸä¸ªå˜é‡çš„å€¼ï¼Œè¿™æ–°å€¼å¯¹å…¶ä»–çº¿ç¨‹æ¥è¯´æ˜¯ç«‹å³å¯è§çš„ã€‚ 2ï¼‰ç¦æ­¢è¿›è¡ŒæŒ‡ä»¤é‡æŽ’åºã€‚ å…ˆçœ‹ä¸€æ®µä»£ç ï¼Œå‡å¦‚çº¿ç¨‹1å…ˆæ‰§è¡Œï¼Œçº¿ç¨‹2åŽæ‰§è¡Œï¼š12345678//çº¿ç¨‹1boolean stop = false;while(!stop)&#123; doSomething();&#125; //çº¿ç¨‹2stop = true; è¿™æ®µä»£ç æ˜¯å¾ˆå…¸åž‹çš„ä¸€æ®µä»£ç ï¼Œå¾ˆå¤šäººåœ¨ä¸­æ–­çº¿ç¨‹æ—¶å¯èƒ½éƒ½ä¼šé‡‡ç”¨è¿™ç§æ ‡è®°åŠžæ³•ã€‚ä½†æ˜¯äº‹å®žä¸Šï¼Œè¿™æ®µä»£ç ä¼šå®Œå…¨è¿è¡Œæ­£ç¡®ä¹ˆï¼Ÿå³ä¸€å®šä¼šå°†çº¿ç¨‹ä¸­æ–­ä¹ˆï¼Ÿä¸ä¸€å®šï¼Œä¹Ÿè®¸åœ¨å¤§å¤šæ•°æ—¶å€™ï¼Œè¿™ä¸ªä»£ç èƒ½å¤ŸæŠŠçº¿ç¨‹ä¸­æ–­ï¼Œä½†æ˜¯ä¹Ÿæœ‰å¯èƒ½ä¼šå¯¼è‡´æ— æ³•ä¸­æ–­çº¿ç¨‹ï¼ˆè™½ç„¶è¿™ä¸ªå¯èƒ½æ€§å¾ˆå°ï¼Œä½†æ˜¯åªè¦ä¸€æ—¦å‘ç”Ÿè¿™ç§æƒ…å†µå°±ä¼šé€ æˆæ­»å¾ªçŽ¯äº†ï¼‰ã€‚ ä¸‹é¢è§£é‡Šä¸€ä¸‹è¿™æ®µä»£ç ä¸ºä½•æœ‰å¯èƒ½å¯¼è‡´æ— æ³•ä¸­æ–­çº¿ç¨‹ã€‚åœ¨å‰é¢å·²ç»è§£é‡Šè¿‡ï¼Œæ¯ä¸ªçº¿ç¨‹åœ¨è¿è¡Œè¿‡ç¨‹ä¸­éƒ½æœ‰è‡ªå·±çš„å·¥ä½œå†…å­˜ï¼Œé‚£ä¹ˆçº¿ç¨‹1åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œä¼šå°†stopå˜é‡çš„å€¼æ‹·è´ä¸€ä»½æ”¾åœ¨è‡ªå·±çš„å·¥ä½œå†…å­˜å½“ä¸­ã€‚ é‚£ä¹ˆå½“çº¿ç¨‹2æ›´æ”¹äº†stopå˜é‡çš„å€¼ä¹‹åŽï¼Œä½†æ˜¯è¿˜æ²¡æ¥å¾—åŠå†™å…¥ä¸»å­˜å½“ä¸­ï¼Œçº¿ç¨‹2è½¬åŽ»åšå…¶ä»–äº‹æƒ…äº†ï¼Œé‚£ä¹ˆçº¿ç¨‹1ç”±äºŽä¸çŸ¥é“çº¿ç¨‹2å¯¹stopå˜é‡çš„æ›´æ”¹ï¼Œå› æ­¤è¿˜ä¼šä¸€ç›´å¾ªçŽ¯ä¸‹åŽ»ã€‚ ä½†æ˜¯ç”¨volatileä¿®é¥°ä¹‹åŽå°±å˜å¾—ä¸ä¸€æ ·äº†ï¼š ç¬¬ä¸€ï¼šä½¿ç”¨volatileå…³é”®å­—ä¼šå¼ºåˆ¶å°†ä¿®æ”¹çš„å€¼ç«‹å³å†™å…¥ä¸»å­˜ï¼› ç¬¬äºŒï¼šä½¿ç”¨volatileå…³é”®å­—çš„è¯ï¼Œå½“çº¿ç¨‹2è¿›è¡Œä¿®æ”¹æ—¶ï¼Œä¼šå¯¼è‡´çº¿ç¨‹1çš„å·¥ä½œå†…å­˜ä¸­ç¼“å­˜å˜é‡stopçš„ç¼“å­˜è¡Œæ— æ•ˆï¼ˆåæ˜ åˆ°ç¡¬ä»¶å±‚çš„è¯ï¼Œå°±æ˜¯CPUçš„L1æˆ–è€…L2ç¼“å­˜ä¸­å¯¹åº”çš„ç¼“å­˜è¡Œæ— æ•ˆï¼‰ï¼› ç¬¬ä¸‰ï¼šç”±äºŽçº¿ç¨‹1çš„å·¥ä½œå†…å­˜ä¸­ç¼“å­˜å˜é‡stopçš„ç¼“å­˜è¡Œæ— æ•ˆï¼Œæ‰€ä»¥çº¿ç¨‹1å†æ¬¡è¯»å–å˜é‡stopçš„å€¼æ—¶ä¼šåŽ»ä¸»å­˜è¯»å–ã€‚ é‚£ä¹ˆåœ¨çº¿ç¨‹2ä¿®æ”¹stopå€¼æ—¶ï¼ˆå½“ç„¶è¿™é‡ŒåŒ…æ‹¬2ä¸ªæ“ä½œï¼Œä¿®æ”¹çº¿ç¨‹2å·¥ä½œå†…å­˜ä¸­çš„å€¼ï¼Œç„¶åŽå°†ä¿®æ”¹åŽçš„å€¼å†™å…¥å†…å­˜ï¼‰ï¼Œä¼šä½¿å¾—çº¿ç¨‹1çš„å·¥ä½œå†…å­˜ä¸­ç¼“å­˜å˜é‡stopçš„ç¼“å­˜è¡Œæ— æ•ˆï¼Œç„¶åŽçº¿ç¨‹1è¯»å–æ—¶ï¼Œå‘çŽ°è‡ªå·±çš„ç¼“å­˜è¡Œæ— æ•ˆï¼Œå®ƒä¼šç­‰å¾…ç¼“å­˜è¡Œå¯¹åº”çš„ä¸»å­˜åœ°å€è¢«æ›´æ–°ä¹‹åŽï¼Œç„¶åŽåŽ»å¯¹åº”çš„ä¸»å­˜è¯»å–æœ€æ–°çš„å€¼ã€‚ é‚£ä¹ˆçº¿ç¨‹1è¯»å–åˆ°çš„å°±æ˜¯æœ€æ–°çš„æ­£ç¡®çš„å€¼ã€‚ 2.volatileä¸èƒ½ç¡®ä¿åŽŸå­æ€§ä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­ï¼š 123456789101112131415161718192021222324252627282930313233343536public class Nothing &#123; private volatile int inc = 0; private volatile static int count = 10; private void increase() &#123; ++inc; &#125; public static void main(String[] args) &#123; int loop = 10; Nothing nothing = new Nothing(); while (loop-- &gt; 0) &#123; nothing.operation(); &#125; &#125; private void operation() &#123; final Nothing test = new Nothing(); for (int i = 0; i &lt; 10; i++) &#123; new Thread(() -&gt; &#123; for (int j = 0; j &lt; 1000000; j++) &#123; test.increase(); &#125; --count; &#125;).start(); &#125; // ä¿è¯å‰é¢çš„çº¿ç¨‹éƒ½æ‰§è¡Œå®Œ while (count &gt; 0) &#123; &#125; System.out.println("æœ€åŽçš„æ•°æ®ä¸ºï¼š" + test.inc); &#125;&#125; è¿è¡Œç»“æžœä¸ºï¼š 12345678910æœ€åŽçš„æ•°æ®ä¸ºï¼š5919956æœ€åŽçš„æ•°æ®ä¸ºï¼š3637231æœ€åŽçš„æ•°æ®ä¸ºï¼š2144549æœ€åŽçš„æ•°æ®ä¸ºï¼š2403538æœ€åŽçš„æ•°æ®ä¸ºï¼š1762639æœ€åŽçš„æ•°æ®ä¸ºï¼š2878721æœ€åŽçš„æ•°æ®ä¸ºï¼š2658645æœ€åŽçš„æ•°æ®ä¸ºï¼š2534078æœ€åŽçš„æ•°æ®ä¸ºï¼š2031751æœ€åŽçš„æ•°æ®ä¸ºï¼š2924506 å¤§å®¶æƒ³ä¸€ä¸‹è¿™æ®µç¨‹åºçš„è¾“å‡ºç»“æžœæ˜¯å¤šå°‘ï¼Ÿä¹Ÿè®¸æœ‰äº›æœ‹å‹è®¤ä¸ºæ˜¯1000000ã€‚ä½†æ˜¯äº‹å®žä¸Šè¿è¡Œå®ƒä¼šå‘çŽ°æ¯æ¬¡è¿è¡Œç»“æžœéƒ½ä¸ä¸€è‡´ï¼Œéƒ½æ˜¯ä¸€ä¸ªå°äºŽ1000000çš„æ•°å­—ã€‚ å¯èƒ½æœ‰çš„æœ‹å‹å°±ä¼šæœ‰ç–‘é—®ï¼Œä¸å¯¹å•Šï¼Œä¸Šé¢æ˜¯å¯¹å˜é‡incè¿›è¡Œè‡ªå¢žæ“ä½œï¼Œç”±äºŽvolatileä¿è¯äº†å¯è§æ€§ï¼Œé‚£ä¹ˆåœ¨æ¯ä¸ªçº¿ç¨‹ä¸­å¯¹incè‡ªå¢žå®Œä¹‹åŽï¼Œåœ¨å…¶ä»–çº¿ç¨‹ä¸­éƒ½èƒ½çœ‹åˆ°ä¿®æ”¹åŽçš„å€¼å•Šï¼Œæ‰€ä»¥æœ‰10ä¸ªçº¿ç¨‹åˆ†åˆ«è¿›è¡Œäº†1000000æ¬¡æ“ä½œï¼Œé‚£ä¹ˆæœ€ç»ˆincçš„å€¼åº”è¯¥æ˜¯1000000*10=10000000ã€‚ è¿™é‡Œé¢å°±æœ‰ä¸€ä¸ªè¯¯åŒºäº†ï¼Œvolatileå…³é”®å­—èƒ½ä¿è¯å¯è§æ€§æ²¡æœ‰é”™ï¼Œä½†æ˜¯ä¸Šé¢çš„ç¨‹åºé”™åœ¨æ²¡èƒ½ä¿è¯åŽŸå­æ€§ã€‚ å¯è§æ€§åªèƒ½ä¿è¯æ¯æ¬¡è¯»å–çš„æ˜¯æœ€æ–°çš„å€¼ï¼Œä½†æ˜¯volatileæ²¡åŠžæ³•ä¿è¯å¯¹å˜é‡çš„æ“ä½œçš„åŽŸå­æ€§ã€‚ åœ¨å‰é¢å·²ç»æåˆ°è¿‡ï¼Œè‡ªå¢žæ“ä½œæ˜¯ä¸å…·å¤‡åŽŸå­æ€§çš„ï¼Œå®ƒåŒ…æ‹¬è¯»å–å˜é‡çš„åŽŸå§‹å€¼ã€è¿›è¡ŒåŠ 1æ“ä½œã€å†™å…¥å·¥ä½œå†…å­˜ã€‚é‚£ä¹ˆå°±æ˜¯è¯´è‡ªå¢žæ“ä½œçš„ä¸‰ä¸ªå­æ“ä½œå¯èƒ½ä¼šåˆ†å‰²å¼€æ‰§è¡Œï¼Œå°±æœ‰å¯èƒ½å¯¼è‡´ä¸‹é¢è¿™ç§æƒ…å†µå‡ºçŽ°ï¼š å‡å¦‚æŸä¸ªæ—¶åˆ»å˜é‡incçš„å€¼ä¸º10ï¼Œçº¿ç¨‹1å¯¹å˜é‡è¿›è¡Œè‡ªå¢žæ“ä½œï¼Œçº¿ç¨‹1å…ˆè¯»å–äº†å˜é‡incçš„åŽŸå§‹å€¼ï¼Œç„¶åŽçº¿ç¨‹1è¢«é˜»å¡žäº†ï¼› ç„¶åŽçº¿ç¨‹2å¯¹å˜é‡è¿›è¡Œè‡ªå¢žæ“ä½œï¼Œçº¿ç¨‹2ä¹ŸåŽ»è¯»å–å˜é‡incçš„åŽŸå§‹å€¼ï¼Œç”±äºŽçº¿ç¨‹1åªæ˜¯å¯¹å˜é‡incè¿›è¡Œè¯»å–æ“ä½œï¼Œè€Œæ²¡æœ‰å¯¹å˜é‡è¿›è¡Œä¿®æ”¹æ“ä½œï¼Œæ‰€ä»¥ä¸ä¼šå¯¼è‡´çº¿ç¨‹2çš„å·¥ä½œå†…å­˜ä¸­ç¼“å­˜å˜é‡incçš„ç¼“å­˜è¡Œæ— æ•ˆï¼Œä¹Ÿä¸ä¼šå¯¼è‡´ä¸»å­˜ä¸­çš„å€¼åˆ·æ–°ï¼Œ æ‰€ä»¥çº¿ç¨‹2ä¼šç›´æŽ¥åŽ»ä¸»å­˜è¯»å–incçš„å€¼ï¼Œå‘çŽ°incçš„å€¼æ—¶10ï¼Œç„¶åŽè¿›è¡ŒåŠ 1æ“ä½œï¼Œå¹¶æŠŠ11å†™å…¥å·¥ä½œå†…å­˜ï¼Œæœ€åŽå†™å…¥ä¸»å­˜ã€‚ ç„¶åŽçº¿ç¨‹1æŽ¥ç€è¿›è¡ŒåŠ 1æ“ä½œï¼Œç”±äºŽå·²ç»è¯»å–äº†incçš„å€¼ï¼Œæ³¨æ„æ­¤æ—¶åœ¨çº¿ç¨‹1çš„å·¥ä½œå†…å­˜ä¸­incçš„å€¼ä»ç„¶ä¸º10ï¼Œæ‰€ä»¥çº¿ç¨‹1å¯¹incè¿›è¡ŒåŠ 1æ“ä½œåŽincçš„å€¼ä¸º11ï¼Œç„¶åŽå°†11å†™å…¥å·¥ä½œå†…å­˜ï¼Œæœ€åŽå†™å…¥ä¸»å­˜ã€‚ é‚£ä¹ˆä¸¤ä¸ªçº¿ç¨‹åˆ†åˆ«è¿›è¡Œäº†ä¸€æ¬¡è‡ªå¢žæ“ä½œåŽï¼Œincåªå¢žåŠ äº†1ã€‚ æ ¹æºå°±åœ¨è¿™é‡Œï¼Œè‡ªå¢žæ“ä½œä¸æ˜¯åŽŸå­æ€§æ“ä½œï¼Œè€Œä¸”volatileä¹Ÿæ— æ³•ä¿è¯å¯¹å˜é‡çš„ä»»ä½•æ“ä½œéƒ½æ˜¯åŽŸå­æ€§çš„ã€‚ è§£å†³æ–¹æ¡ˆï¼šå¯ä»¥é€šè¿‡synchronizedæˆ–lockï¼Œè¿›è¡ŒåŠ é”ï¼Œæ¥ä¿è¯æ“ä½œçš„åŽŸå­æ€§ã€‚ä¹Ÿå¯ä»¥é€šè¿‡AtomicIntegerã€‚ åœ¨java 1.5çš„java.util.concurrent.atomicåŒ…ä¸‹æä¾›äº†ä¸€äº›åŽŸå­æ“ä½œç±»ï¼Œå³å¯¹åŸºæœ¬æ•°æ®ç±»åž‹çš„ è‡ªå¢žï¼ˆåŠ 1æ“ä½œï¼‰ï¼Œè‡ªå‡ï¼ˆå‡1æ“ä½œï¼‰ã€ä»¥åŠåŠ æ³•æ“ä½œï¼ˆåŠ ä¸€ä¸ªæ•°ï¼‰ï¼Œå‡æ³•æ“ä½œï¼ˆå‡ä¸€ä¸ªæ•°ï¼‰è¿›è¡Œäº†å°è£…ï¼Œä¿è¯è¿™äº›æ“ä½œæ˜¯åŽŸå­æ€§æ“ä½œã€‚atomicæ˜¯åˆ©ç”¨CASæ¥å®žçŽ°åŽŸå­æ€§æ“ä½œçš„ï¼ˆCompare And Swapï¼‰ï¼ŒCASå®žé™…ä¸Šæ˜¯åˆ©ç”¨å¤„ç†å™¨æä¾›çš„CMPXCHGæŒ‡ä»¤å®žçŽ°çš„ï¼Œè€Œå¤„ç†å™¨æ‰§è¡ŒCMPXCHGæŒ‡ä»¤æ˜¯ä¸€ä¸ªåŽŸå­æ€§æ“ä½œã€‚ 3.volatileä¿è¯æœ‰åºæ€§åœ¨å‰é¢æåˆ°volatileå…³é”®å­—èƒ½ç¦æ­¢æŒ‡ä»¤é‡æŽ’åºï¼Œæ‰€ä»¥volatileèƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¿è¯æœ‰åºæ€§ã€‚ volatileå…³é”®å­—ç¦æ­¢æŒ‡ä»¤é‡æŽ’åºæœ‰ä¸¤å±‚æ„æ€ï¼š 1ï¼‰å½“ç¨‹åºæ‰§è¡Œåˆ°volatileå˜é‡çš„è¯»æ“ä½œæˆ–è€…å†™æ“ä½œæ—¶ï¼Œåœ¨å…¶å‰é¢çš„æ“ä½œçš„æ›´æ”¹è‚¯å®šå…¨éƒ¨å·²ç»è¿›è¡Œï¼Œä¸”ç»“æžœå·²ç»å¯¹åŽé¢çš„æ“ä½œå¯è§ï¼›åœ¨å…¶åŽé¢çš„æ“ä½œè‚¯å®šè¿˜æ²¡æœ‰è¿›è¡Œï¼› 2ï¼‰åœ¨è¿›è¡ŒæŒ‡ä»¤ä¼˜åŒ–æ—¶ï¼Œä¸èƒ½å°†åœ¨å¯¹volatileå˜é‡çš„è¯»æ“ä½œæˆ–è€…å†™æ“ä½œçš„è¯­å¥æ”¾åœ¨å…¶åŽé¢æ‰§è¡Œï¼Œä¹Ÿä¸èƒ½æŠŠvolatileå˜é‡åŽé¢çš„è¯­å¥æ”¾åˆ°å…¶å‰é¢æ‰§è¡Œã€‚ å¯èƒ½ä¸Šé¢è¯´çš„æ¯”è¾ƒç»•ï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼š 12345678// xã€yä¸ºéžvolatileå˜é‡// flagä¸ºvolatileå˜é‡x = 2; //è¯­å¥1y = 0; //è¯­å¥2flag = true; //è¯­å¥3x = 4; //è¯­å¥4y = -1; //è¯­å¥5 ç”±äºŽflagå˜é‡ä¸ºvolatileå˜é‡ï¼Œé‚£ä¹ˆåœ¨è¿›è¡ŒæŒ‡ä»¤é‡æŽ’åºçš„è¿‡ç¨‹çš„æ—¶å€™ï¼Œä¸ä¼šå°†è¯­å¥3æ”¾åˆ°è¯­å¥1ã€è¯­å¥2å‰é¢ï¼Œä¹Ÿä¸ä¼šè®²è¯­å¥3æ”¾åˆ°è¯­å¥4ã€è¯­å¥5åŽé¢ã€‚ä½†æ˜¯è¦æ³¨æ„è¯­å¥1å’Œè¯­å¥2çš„é¡ºåºã€è¯­å¥4å’Œè¯­å¥5çš„é¡ºåºæ˜¯ä¸ä½œä»»ä½•ä¿è¯çš„ã€‚ å¹¶ä¸”volatileå…³é”®å­—èƒ½ä¿è¯ï¼Œæ‰§è¡Œåˆ°è¯­å¥3æ—¶ï¼Œè¯­å¥1å’Œè¯­å¥2å¿…å®šæ˜¯æ‰§è¡Œå®Œæ¯•äº†çš„ï¼Œä¸”è¯­å¥1å’Œè¯­å¥2çš„æ‰§è¡Œç»“æžœå¯¹è¯­å¥3ã€è¯­å¥4ã€è¯­å¥5æ˜¯å¯è§çš„ã€‚ é‚£ä¹ˆæˆ‘ä»¬å›žåˆ°å‰é¢ä¸¾çš„ä¸€ä¸ªä¾‹å­ï¼š 123456789//çº¿ç¨‹1:context = loadContext(); //è¯­å¥1inited = true; //è¯­å¥2//çº¿ç¨‹2:while(!inited )&#123; sleep()&#125;doSomethingwithconfig(context); å‰é¢ä¸¾è¿™ä¸ªä¾‹å­çš„æ—¶å€™ï¼Œæåˆ°æœ‰å¯èƒ½è¯­å¥2ä¼šåœ¨è¯­å¥1ä¹‹å‰æ‰§è¡Œï¼Œé‚£ä¹ˆä¹…å¯èƒ½å¯¼è‡´contextè¿˜æ²¡è¢«åˆå§‹åŒ–ï¼Œè€Œçº¿ç¨‹2ä¸­å°±ä½¿ç”¨æœªåˆå§‹åŒ–çš„contextåŽ»è¿›è¡Œæ“ä½œï¼Œå¯¼è‡´ç¨‹åºå‡ºé”™ã€‚ è¿™é‡Œå¦‚æžœç”¨volatileå…³é”®å­—å¯¹initedå˜é‡è¿›è¡Œä¿®é¥°ï¼Œå°±ä¸ä¼šå‡ºçŽ°è¿™ç§é—®é¢˜äº†ï¼Œå› ä¸ºå½“æ‰§è¡Œåˆ°è¯­å¥2æ—¶ï¼Œå¿…å®šèƒ½ä¿è¯contextå·²ç»åˆå§‹åŒ–å®Œæ¯•ã€‚ å…­ã€volatileçš„å®žçŽ°åŽŸç†1.å¯è§æ€§å¤„ç†å™¨ä¸ºäº†æé«˜å¤„ç†é€Ÿåº¦ï¼Œä¸ç›´æŽ¥å’Œå†…å­˜è¿›è¡Œé€šè®¯ï¼Œè€Œæ˜¯å°†ç³»ç»Ÿå†…å­˜çš„æ•°æ®ç‹¬åˆ°å†…éƒ¨ç¼“å­˜åŽå†è¿›è¡Œæ“ä½œï¼Œä½†æ“ä½œå®ŒåŽä¸çŸ¥ä»€ä¹ˆæ—¶å€™ä¼šå†™åˆ°å†…å­˜ã€‚ å¦‚æžœå¯¹å£°æ˜Žäº†volatileå˜é‡è¿›è¡Œå†™æ“ä½œæ—¶ï¼ŒJVMä¼šå‘å¤„ç†å™¨å‘é€ä¸€æ¡Lockå‰ç¼€çš„æŒ‡ä»¤ï¼Œå°†è¿™ä¸ªå˜é‡æ‰€åœ¨ç¼“å­˜è¡Œçš„æ•°æ®å†™ä¼šåˆ°ç³»ç»Ÿå†…å­˜ã€‚ è¿™ä¸€æ­¥ç¡®ä¿äº†å¦‚æžœæœ‰å…¶ä»–çº¿ç¨‹å¯¹å£°æ˜Žäº†volatileå˜é‡è¿›è¡Œä¿®æ”¹ï¼Œåˆ™ç«‹å³æ›´æ–°ä¸»å†…å­˜ä¸­æ•°æ®ã€‚ ä½†è¿™æ—¶å€™å…¶ä»–å¤„ç†å™¨çš„ç¼“å­˜è¿˜æ˜¯æ—§çš„ï¼Œæ‰€ä»¥åœ¨å¤šå¤„ç†å™¨çŽ¯å¢ƒä¸‹ï¼Œä¸ºäº†ä¿è¯å„ä¸ªå¤„ç†å™¨ç¼“å­˜ä¸€è‡´ï¼Œæ¯ä¸ªå¤„ç†ä¼šé€šè¿‡å—…æŽ¢åœ¨æ€»çº¿ä¸Šä¼ æ’­çš„æ•°æ®æ¥æ£€æŸ¥ è‡ªå·±çš„ç¼“å­˜æ˜¯å¦è¿‡æœŸï¼Œ å½“å¤„ç†å™¨å‘çŽ°è‡ªå·±ç¼“å­˜è¡Œå¯¹åº”çš„å†…å­˜åœ°å€è¢«ä¿®æ”¹äº†ï¼Œå°±ä¼šå°†å½“å‰å¤„ç†å™¨çš„ç¼“å­˜è¡Œè®¾ç½®æˆæ— æ•ˆçŠ¶æ€ï¼Œå½“å¤„ç†å™¨è¦å¯¹è¿™ä¸ªæ•°æ®è¿›è¡Œä¿®æ”¹æ“ä½œæ—¶ï¼Œä¼šå¼ºåˆ¶é‡æ–°ä»Žç³»ç»Ÿå†…å­˜æŠŠæ•°æ®è¯»åˆ°å¤„ç†å™¨ç¼“å­˜é‡Œã€‚ è¿™ä¸€æ­¥ç¡®ä¿äº†å…¶ä»–çº¿ç¨‹èŽ·å¾—çš„å£°æ˜Žäº†volatileå˜é‡éƒ½æ˜¯ä»Žä¸»å†…å­˜ä¸­èŽ·å–æœ€æ–°çš„ã€‚ 2.æœ‰åºæ€§Lockå‰ç¼€æŒ‡ä»¤å®žé™…ä¸Šç›¸å½“äºŽä¸€ä¸ªå†…å­˜å±éšœï¼ˆä¹Ÿæˆå†…å­˜æ …æ ï¼‰ï¼Œå®ƒç¡®ä¿æŒ‡ä»¤é‡æŽ’åºæ—¶ä¸ä¼šæŠŠå…¶åŽé¢çš„æŒ‡ä»¤æŽ’åˆ°å†…å­˜å±éšœä¹‹å‰çš„ä½ç½®ï¼Œä¹Ÿä¸ä¼šæŠŠå‰é¢çš„æŒ‡ä»¤æŽ’åˆ°å†…å­˜å±éšœçš„åŽé¢ï¼›å³åœ¨æ‰§è¡Œåˆ°å†…å­˜å±éšœè¿™å¥æŒ‡ä»¤æ—¶ï¼Œåœ¨å®ƒå‰é¢çš„æ“ä½œå·²ç»å…¨éƒ¨å®Œæˆã€‚ ä¸ƒã€volatileçš„åº”ç”¨åœºæ™¯synchronizedå…³é”®å­—æ˜¯é˜²æ­¢å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œä¸€æ®µä»£ç ï¼Œé‚£ä¹ˆå°±ä¼šå¾ˆå½±å“ç¨‹åºæ‰§è¡Œæ•ˆçŽ‡ï¼Œè€Œvolatileå…³é”®å­—åœ¨æŸäº›æƒ…å†µä¸‹æ€§èƒ½è¦ä¼˜äºŽsynchronizedï¼Œä½†æ˜¯è¦æ³¨æ„volatileå…³é”®å­—æ˜¯æ— æ³•æ›¿ä»£synchronizedå…³é”®å­—çš„ï¼Œå› ä¸ºvolatileå…³é”®å­—æ— æ³•ä¿è¯æ“ä½œçš„åŽŸå­æ€§ã€‚é€šå¸¸æ¥è¯´ï¼Œä½¿ç”¨volatileå¿…é¡»å…·å¤‡ä»¥ä¸‹2ä¸ªæ¡ä»¶ï¼š 1ï¼‰å¯¹å˜é‡çš„å†™æ“ä½œä¸ä¾èµ–äºŽå½“å‰å€¼ 2ï¼‰è¯¥å˜é‡æ²¡æœ‰åŒ…å«åœ¨å…·æœ‰å…¶ä»–å˜é‡çš„ä¸å˜å¼ä¸­ ä¸‹é¢åˆ—ä¸¾å‡ ä¸ªJavaä¸­ä½¿ç”¨volatileçš„å‡ ä¸ªåœºæ™¯ã€‚ â‘ .çŠ¶æ€æ ‡è®°é‡ 123456789volatile boolean flag = false; //çº¿ç¨‹1while(!flag)&#123; doSomething();&#125; //çº¿ç¨‹2public void setFlag() &#123; flag = true;&#125; æ ¹æ®çŠ¶æ€æ ‡è®°ï¼Œç»ˆæ­¢çº¿ç¨‹ã€‚ â‘¡.å•ä¾‹æ¨¡å¼ä¸­çš„double check 1234567891011121314151617class Singleton &#123; private volatile static Singleton instance = null; private Singleton() &#123; &#125; public static Singleton getInstance() &#123; if (instance == null) &#123; synchronized (Singleton.class) &#123; if (instance == null) instance = new Singleton(); &#125; &#125; return instance; &#125;&#125; ä¸ºä»€ä¹ˆè¦ä½¿ç”¨volatile ä¿®é¥°instanceï¼Ÿä¸»è¦åœ¨äºŽinstance = new Singleton()è¿™å¥ï¼Œè¿™å¹¶éžæ˜¯ä¸€ä¸ªåŽŸå­æ“ä½œï¼Œäº‹å®žä¸Šåœ¨ JVM ä¸­è¿™å¥è¯å¤§æ¦‚åšäº†ä¸‹é¢ 3 ä»¶äº‹æƒ…: 1.ç»™ instance åˆ†é…å†…å­˜ 2.è°ƒç”¨ Singleton çš„æž„é€ å‡½æ•°æ¥åˆå§‹åŒ–æˆå‘˜å˜é‡ 3.å°†instanceå¯¹è±¡æŒ‡å‘åˆ†é…çš„å†…å­˜ç©ºé—´ï¼ˆæ‰§è¡Œå®Œè¿™æ­¥ instance å°±ä¸ºéž null äº†ï¼‰ã€‚ ä½†æ˜¯åœ¨ JVM çš„å³æ—¶ç¼–è¯‘å™¨ä¸­å­˜åœ¨æŒ‡ä»¤é‡æŽ’åºçš„ä¼˜åŒ–ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸Šé¢çš„ç¬¬äºŒæ­¥å’Œç¬¬ä¸‰æ­¥çš„é¡ºåºæ˜¯ä¸èƒ½ä¿è¯çš„ï¼Œæœ€ç»ˆçš„æ‰§è¡Œé¡ºåºå¯èƒ½æ˜¯ 1-2-3 ä¹Ÿå¯èƒ½æ˜¯ 1-3-2ã€‚å¦‚æžœæ˜¯åŽè€…ï¼Œåˆ™åœ¨ 3 æ‰§è¡Œå®Œæ¯•ã€2 æœªæ‰§è¡Œä¹‹å‰ï¼Œè¢«çº¿ç¨‹äºŒæŠ¢å äº†ï¼Œè¿™æ—¶ instance å·²ç»æ˜¯éž null äº†ï¼ˆä½†å´æ²¡æœ‰åˆå§‹åŒ–ï¼‰ï¼Œæ‰€ä»¥çº¿ç¨‹äºŒä¼šç›´æŽ¥è¿”å›ž instanceï¼Œç„¶åŽä½¿ç”¨ï¼Œç„¶åŽé¡ºç†æˆç« åœ°æŠ¥é”™ã€‚]]></content>
      <tags>
        <tag>Interview</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[synchronizedå’ŒReentrantLockçš„æ¯”è¾ƒ]]></title>
    <url>%2F2018%2F01%2F20%2Fsynchronized%E5%92%8CReentrantLock%E7%9A%84%E6%AF%94%E8%BE%83%2F</url>
    <content type="text"><![CDATA[ä¸€ã€çº¿ç¨‹åŒæ­¥é—®é¢˜çš„äº§ç”ŸåŠè§£å†³æ–¹æ¡ˆé—®é¢˜çš„äº§ç”Ÿï¼š Javaå…è®¸å¤šçº¿ç¨‹å¹¶å‘æŽ§åˆ¶ï¼Œå½“å¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œä¸€ä¸ªå¯å…±äº«çš„èµ„æºå˜é‡æ—¶ï¼ˆå¦‚æ•°æ®çš„å¢žåˆ æ”¹æŸ¥ï¼‰ï¼Œå°†ä¼šå¯¼è‡´æ•°æ®ä¸å‡†ç¡®ï¼Œç›¸äº’ä¹‹é—´äº§ç”Ÿå†²çªã€‚ å¦‚ä¸‹ä¾‹ï¼šå‡è®¾æœ‰ä¸€ä¸ªå–ç¥¨ç³»ç»Ÿï¼Œä¸€å…±æœ‰100å¼ ç¥¨ï¼Œæœ‰4ä¸ªçª—å£åŒæ—¶å–ã€‚ 1234567891011121314151617public class Ticket implements Runnable &#123; // å½“å‰æ‹¥æœ‰çš„ç¥¨æ•° private int num = 100; public void run() &#123; while (true) &#123; if (num &gt; 0) &#123; try &#123; Thread.sleep(10); &#125; catch (InterruptedException e) &#123; &#125; // è¾“å‡ºå–ç¥¨ä¿¡æ¯ System.out.println(Thread.currentThread().getName() + ".....sale...." + num--); &#125; &#125; &#125;&#125; 12345678910111213141516public class Nothing &#123; public static void main(String[] args) &#123; Ticket t = new Ticket();//åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ä»»åŠ¡å¯¹è±¡ã€‚ //åˆ›å»º4ä¸ªçº¿ç¨‹åŒæ—¶å–ç¥¨ Thread t1 = new Thread(t); Thread t2 = new Thread(t); Thread t3 = new Thread(t); Thread t4 = new Thread(t); //å¯åŠ¨çº¿ç¨‹ t1.start(); t2.start(); t3.start(); t4.start(); &#125;&#125; è¾“å‡ºéƒ¨åˆ†ç»“æžœï¼š Thread-1â€¦..saleâ€¦.2Thread-0â€¦..saleâ€¦.3Thread-2â€¦..saleâ€¦.1Thread-0â€¦..saleâ€¦.0Thread-1â€¦..saleâ€¦.0Thread-3â€¦..saleâ€¦.1 æ˜¾ç„¶ä¸Šè¿°ç»“æžœæ˜¯ä¸åˆç†çš„ï¼Œå¯¹äºŽåŒä¸€å¼ ç¥¨è¿›è¡Œäº†å¤šæ¬¡å”®å‡ºã€‚è¿™å°±æ˜¯å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œå‡ºçŽ°äº†æ•°æ®â€œè„è¯»â€æƒ…å†µã€‚å³å¤šä¸ªçº¿ç¨‹è®¿é—®ä½™ç¥¨numæ—¶ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹èŽ·å¾—ä½™ç¥¨çš„æ•°é‡ï¼Œè¦åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œ-1çš„æ“ä½œä¹‹å‰ï¼Œå…¶ä»–çº¿ç¨‹å¯èƒ½å·²ç»å–å‡ºå¤šå¼ ç¥¨ï¼Œå¯¼è‡´èŽ·å¾—çš„numä¸æ˜¯æœ€æ–°çš„ï¼Œç„¶åŽ-1åŽæ›´æ–°çš„æ•°æ®å°±ä¼šæœ‰è¯¯ã€‚è¿™å°±éœ€è¦çº¿ç¨‹åŒæ­¥çš„å®žçŽ°äº†ã€‚ é—®é¢˜çš„è§£å†³ï¼š å› æ­¤åŠ å…¥åŒæ­¥é”ä»¥é¿å…åœ¨è¯¥çº¿ç¨‹æ²¡æœ‰å®Œæˆæ“ä½œä¹‹å‰ï¼Œè¢«å…¶ä»–çº¿ç¨‹çš„è°ƒç”¨ï¼Œä»Žè€Œä¿è¯äº†è¯¥å˜é‡çš„å”¯ä¸€æ€§å’Œå‡†ç¡®æ€§ã€‚ ä¸€å…±æœ‰ä¸¤ç§é”ï¼Œæ¥å®žçŽ°çº¿ç¨‹åŒæ­¥é—®é¢˜ï¼Œåˆ†åˆ«æ˜¯ï¼šsynchronizedå’ŒReentrantLockã€‚ä¸‹é¢æˆ‘ä»¬å°±å¸¦ç€ä¸Šè¿°é—®é¢˜ï¼Œçœ‹çœ‹è¿™ä¸¤ç§é”æ˜¯å¦‚ä½•è§£å†³çš„ã€‚ äºŒã€synchronizedå…³é”®å­—1.synchronizedç®€ä»‹ synchronizedå®žçŽ°åŒæ­¥çš„åŸºç¡€ï¼šJavaä¸­æ¯ä¸ªå¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºé”ã€‚å½“çº¿ç¨‹è¯•å›¾è®¿é—®åŒæ­¥ä»£ç æ—¶ï¼Œå¿…é¡»å…ˆèŽ·å¾—å¯¹è±¡é”ï¼Œé€€å‡ºæˆ–æŠ›å‡ºå¼‚å¸¸æ—¶å¿…é¡»é‡Šæ”¾é”ã€‚ Synchronziedå®žçŽ°åŒæ­¥çš„è¡¨çŽ°å½¢å¼åˆ†ä¸ºï¼šä»£ç å—åŒæ­¥ å’Œ æ–¹æ³•åŒæ­¥ã€‚ 2.synchronizedåŽŸç†JVMåŸºäºŽè¿›å…¥å’Œé€€å‡ºMonitorå¯¹è±¡æ¥å®žçŽ° ä»£ç å—åŒæ­¥ å’Œ æ–¹æ³•åŒæ­¥ ï¼Œä¸¤è€…å®žçŽ°ç»†èŠ‚ä¸åŒã€‚ ä»£ç å—åŒæ­¥ï¼š åœ¨ç¼–è¯‘åŽé€šè¿‡å°†monitorenteræŒ‡ä»¤æ’å…¥åˆ°åŒæ­¥ä»£ç å—çš„å¼€å§‹å¤„ï¼Œå°†monitorexitæŒ‡ä»¤æ’å…¥åˆ°æ–¹æ³•ç»“æŸå¤„å’Œå¼‚å¸¸å¤„ï¼Œé€šè¿‡åç¼–è¯‘å­—èŠ‚ç å¯ä»¥è§‚å¯Ÿåˆ°ã€‚ä»»ä½•ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªmonitorä¸Žä¹‹å…³è”ï¼Œçº¿ç¨‹æ‰§è¡ŒmonitorenteræŒ‡ä»¤æ—¶ï¼Œä¼šå°è¯•èŽ·å–å¯¹è±¡å¯¹åº”çš„monitorçš„æ‰€æœ‰æƒï¼Œå³å°è¯•èŽ·å¾—å¯¹è±¡çš„é”ã€‚ æ–¹æ³•åŒæ­¥ï¼š synchronizedæ–¹æ³•åœ¨method_infoç»“æž„æœ‰ACC_synchronizedæ ‡è®°ï¼Œçº¿ç¨‹æ‰§è¡Œæ—¶ä¼šè¯†åˆ«è¯¥æ ‡è®°ï¼ŒèŽ·å–å¯¹åº”çš„é”ï¼Œå®žçŽ°æ–¹æ³•åŒæ­¥ã€‚ ä¸¤è€…è™½ç„¶å®žçŽ°ç»†èŠ‚ä¸åŒï¼Œä½†æœ¬è´¨ä¸Šéƒ½æ˜¯å¯¹ä¸€ä¸ªå¯¹è±¡çš„ç›‘è§†å™¨ï¼ˆmonitorï¼‰çš„èŽ·å–ã€‚ä»»æ„ä¸€ä¸ªå¯¹è±¡éƒ½æ‹¥æœ‰è‡ªå·±çš„ç›‘è§†å™¨ï¼Œå½“åŒæ­¥ä»£ç å—æˆ–åŒæ­¥æ–¹æ³•æ—¶ï¼Œæ‰§è¡Œæ–¹æ³•çš„çº¿ç¨‹å¿…é¡»å…ˆèŽ·å¾—è¯¥å¯¹è±¡çš„ç›‘è§†å™¨æ‰èƒ½è¿›å…¥åŒæ­¥å—æˆ–åŒæ­¥æ–¹æ³•ï¼Œæ²¡æœ‰èŽ·å–åˆ°ç›‘è§†å™¨çš„çº¿ç¨‹å°†ä¼šè¢«é˜»å¡žï¼Œå¹¶è¿›å…¥åŒæ­¥é˜Ÿåˆ—ï¼ŒçŠ¶æ€å˜ä¸ºBLOCKEDã€‚å½“æˆåŠŸèŽ·å–ç›‘è§†å™¨çš„çº¿ç¨‹é‡Šæ”¾äº†é”åŽï¼Œä¼šå”¤é†’é˜»å¡žåœ¨åŒæ­¥é˜Ÿåˆ—çš„çº¿ç¨‹ï¼Œä½¿å…¶é‡æ–°å°è¯•å¯¹ç›‘è§†å™¨çš„èŽ·å–ã€‚ å¯¹è±¡ã€ç›‘è§†å™¨ã€åŒæ­¥é˜Ÿåˆ—å’Œæ‰§è¡Œçº¿ç¨‹é—´çš„å…³ç³»å¦‚ä¸‹å›¾ï¼š 3.synchronizedçš„ä½¿ç”¨åœºæ™¯â‘ æ–¹æ³•åŒæ­¥ 1public synchronized void method1 é”ä½çš„æ˜¯è¯¥å¯¹è±¡,ç±»çš„å…¶ä¸­ä¸€ä¸ªå®žä¾‹ï¼Œå½“è¯¥å¯¹è±¡(ä»…ä»…æ˜¯è¿™ä¸€ä¸ªå¯¹è±¡)åœ¨ä¸åŒçº¿ç¨‹ä¸­æ‰§è¡Œè¿™ä¸ªåŒæ­¥æ–¹æ³•æ—¶ï¼Œçº¿ç¨‹ä¹‹é—´ä¼šå½¢æˆäº’æ–¥ã€‚è¾¾åˆ°åŒæ­¥æ•ˆæžœï¼Œä½†å¦‚æžœä¸åŒçº¿ç¨‹åŒæ—¶å¯¹è¯¥ç±»çš„ä¸åŒå¯¹è±¡æ‰§è¡Œè¿™ä¸ªåŒæ­¥æ–¹æ³•æ—¶ï¼Œåˆ™çº¿ç¨‹ä¹‹é—´ä¸ä¼šå½¢æˆäº’æ–¥ï¼Œå› ä¸ºä»–ä»¬æ‹¥æœ‰çš„æ˜¯ä¸åŒçš„é”ã€‚ â‘¡ä»£ç å—åŒæ­¥ 1synchronized(this)&#123; //TODO &#125; æè¿°åŒâ‘  â‘¢æ–¹æ³•åŒæ­¥ 1public synchronized static void method3 é”ä½çš„æ˜¯è¯¥ç±»ï¼Œå½“æ‰€æœ‰è¯¥ç±»çš„å¯¹è±¡(å¤šä¸ªå¯¹è±¡)åœ¨ä¸åŒçº¿ç¨‹ä¸­è°ƒç”¨è¿™ä¸ªstaticåŒæ­¥æ–¹æ³•æ—¶ï¼Œçº¿ç¨‹ä¹‹é—´ä¼šå½¢æˆäº’æ–¥ï¼Œè¾¾åˆ°åŒæ­¥æ•ˆæžœã€‚ â‘£ä»£ç å—åŒæ­¥1synchronized(Test.class)&#123; //TODO&#125; åŒâ‘¢ â‘¤ä»£ç å—åŒæ­¥1synchronized(o) &#123;&#125; è¿™é‡Œé¢çš„oå¯ä»¥æ˜¯ä¸€ä¸ªä»»ä½•Objectå¯¹è±¡æˆ–æ•°ç»„ï¼Œå¹¶ä¸ä¸€å®šæ˜¯å®ƒæœ¬èº«å¯¹è±¡æˆ–è€…ç±»ï¼Œè°æ‹¥æœ‰oè¿™ä¸ªé”ï¼Œè°å°±èƒ½å¤Ÿæ“ä½œè¯¥å—ç¨‹åºä»£ç ã€‚ 4.è§£å†³çº¿ç¨‹åŒæ­¥çš„å®žä¾‹é’ˆå¯¹ä¸Šè¿°æ–¹æ³•ï¼Œå…·ä½“çš„è§£å†³æ–¹å¼å¦‚ä¸‹ï¼š 1234567891011121314151617181920public class Ticket implements Runnable &#123; // å½“å‰æ‹¥æœ‰çš„ç¥¨æ•° private int num = 100; public void run() &#123; while (true) &#123; try &#123; Thread.sleep(10); &#125; catch (InterruptedException e) &#123; &#125; synchronized (this) &#123; // è¾“å‡ºå–ç¥¨ä¿¡æ¯ if (num &gt; 0) &#123; System.out.println(Thread.currentThread().getName() + ".....sale...." + num--); &#125; &#125; &#125; &#125;&#125; è¾“å‡ºéƒ¨åˆ†ç»“æžœï¼š Thread-2â€¦..saleâ€¦.10Thread-1â€¦..saleâ€¦.9Thread-3â€¦..saleâ€¦.8Thread-0â€¦..saleâ€¦.7Thread-2â€¦..saleâ€¦.6Thread-1â€¦..saleâ€¦.5Thread-2â€¦..saleâ€¦.4Thread-1â€¦..saleâ€¦.3Thread-3â€¦..saleâ€¦.2Thread-0â€¦..saleâ€¦.1 å¯ä»¥çœ‹å‡ºå®žçŽ°äº†çº¿ç¨‹åŒæ­¥ã€‚åŒæ—¶æ”¹äº†ä¸€ä¸‹é€»è¾‘ï¼Œåœ¨è¿›å…¥åˆ°åŒæ­¥ä»£ç å—æ—¶ï¼Œå…ˆåˆ¤æ–­çŽ°åœ¨æ˜¯å¦æœ‰æ²¡æœ‰ç¥¨ï¼Œç„¶åŽå†ä¹°ç¥¨ï¼Œé˜²æ­¢å‡ºçŽ°æ²¡ç¥¨è¿˜è¦å”®å‡ºçš„æƒ…å†µã€‚é€šè¿‡åŒæ­¥ä»£ç å—å®žçŽ°äº†çº¿ç¨‹åŒæ­¥ï¼Œå…¶ä»–æ–¹æ³•ä¹Ÿä¸€æ ·å¯ä»¥å®žçŽ°è¯¥æ•ˆæžœã€‚ ä¸‰ã€ReentrantLocké”ReentrantLockï¼Œä¸€ä¸ªå¯é‡å…¥çš„äº’æ–¥é”ï¼Œå®ƒå…·æœ‰ä¸Žä½¿ç”¨synchronizedæ–¹æ³•å’Œè¯­å¥æ‰€è®¿é—®çš„éšå¼ç›‘è§†å™¨é”ç›¸åŒçš„ä¸€äº›åŸºæœ¬è¡Œä¸ºå’Œè¯­ä¹‰ï¼Œä½†åŠŸèƒ½æ›´å¼ºå¤§ã€‚ï¼ˆé‡å…¥é”åŽé¢ä»‹ç»ï¼‰ 1.LockæŽ¥å£Lockï¼Œé”å¯¹è±¡ã€‚åœ¨Javaä¸­é”æ˜¯ç”¨æ¥æŽ§åˆ¶å¤šä¸ªçº¿ç¨‹è®¿é—®å…±äº«èµ„æºçš„æ–¹å¼ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªé”èƒ½å¤Ÿé˜²æ­¢å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å…±äº«èµ„æºï¼ˆä½†æœ‰çš„é”å¯ä»¥å…è®¸å¤šä¸ªçº¿ç¨‹å¹¶å‘è®¿é—®å…±äº«èµ„æºï¼Œæ¯”å¦‚è¯»å†™é”ï¼ŒåŽé¢æˆ‘ä»¬ä¼šåˆ†æžï¼‰ã€‚åœ¨LockæŽ¥å£å‡ºçŽ°ä¹‹å‰ï¼ŒJavaç¨‹åºæ˜¯é synchronizedå…³é”®å­—ï¼ˆåŽé¢åˆ†æžï¼‰å®žçŽ°é”åŠŸèƒ½çš„ï¼Œè€ŒJAVA SE5.0ä¹‹åŽå¹¶å‘åŒ…ä¸­æ–°å¢žäº†LockæŽ¥å£ç”¨æ¥å®žçŽ°é”çš„åŠŸèƒ½ï¼Œå®ƒæä¾›äº†ä¸Žsynchronizedå…³é”®å­—ç±»ä¼¼çš„åŒæ­¥åŠŸèƒ½ï¼Œåªæ˜¯åœ¨ä½¿ç”¨æ—¶éœ€è¦æ˜¾å¼åœ°èŽ·å–å’Œé‡Šæ”¾é”ï¼Œç¼ºç‚¹å°±æ˜¯ç¼ºå°‘åƒsynchronizedé‚£æ ·éšå¼èŽ·å–é‡Šæ”¾é”çš„ä¾¿æ·æ€§ï¼Œä½†æ˜¯å´æ‹¥æœ‰äº†é”èŽ·å–ä¸Žé‡Šæ”¾çš„å¯æ“ä½œæ€§ï¼Œå¯ä¸­æ–­çš„èŽ·å–é”ä»¥åŠè¶…æ—¶èŽ·å–é”ç­‰å¤šç§synchronizedå…³é”®å­—æ‰€ä¸å…·å¤‡çš„åŒæ­¥ç‰¹æ€§ã€‚ LockæŽ¥å£çš„ä¸»è¦æ–¹æ³•ï¼ˆè¿˜æœ‰ä¸¤ä¸ªæ–¹æ³•æ¯”è¾ƒå¤æ‚ï¼Œæš‚ä¸ä»‹ç»ï¼‰ï¼š void lock(): æ‰§è¡Œæ­¤æ–¹æ³•æ—¶ï¼Œå¦‚æžœé”å¤„äºŽç©ºé—²çŠ¶æ€ï¼Œå½“å‰çº¿ç¨‹å°†èŽ·å–åˆ°é”ã€‚ç›¸åï¼Œå¦‚æžœé”å·²ç»è¢«å…¶ä»–çº¿ç¨‹æŒæœ‰ï¼Œå°†ç¦ç”¨å½“å‰çº¿ç¨‹ï¼Œç›´åˆ°å½“å‰çº¿ç¨‹èŽ·å–åˆ°é”ã€‚boolean tryLock()ï¼š å¦‚æžœé”å¯ç”¨ï¼Œåˆ™èŽ·å–é”ï¼Œå¹¶ç«‹å³è¿”å›žtrueï¼Œå¦åˆ™è¿”å›žfalse. è¯¥æ–¹æ³•å’Œlock()çš„åŒºåˆ«åœ¨äºŽï¼ŒtryLock()åªæ˜¯â€è¯•å›¾â€èŽ·å–é”ï¼Œå¦‚æžœé”ä¸å¯ç”¨ï¼Œä¸ä¼šå¯¼è‡´å½“å‰çº¿ç¨‹è¢«ç¦ç”¨ï¼Œå½“å‰çº¿ç¨‹ä»ç„¶ç»§ç»­å¾€ä¸‹æ‰§è¡Œä»£ç ã€‚è€Œlock()æ–¹æ³•åˆ™æ˜¯ä¸€å®šè¦èŽ·å–åˆ°é”ï¼Œå¦‚æžœé”ä¸å¯ç”¨ï¼Œå°±ä¸€ç›´ç­‰å¾…ï¼Œåœ¨æœªèŽ·å¾—é”ä¹‹å‰,å½“å‰çº¿ç¨‹å¹¶ä¸ç»§ç»­å‘ä¸‹æ‰§è¡Œ. é€šå¸¸é‡‡ç”¨å¦‚ä¸‹çš„ä»£ç å½¢å¼è°ƒç”¨tryLock()æ–¹æ³•ï¼švoid unlock()ï¼š æ‰§è¡Œæ­¤æ–¹æ³•æ—¶ï¼Œå½“å‰çº¿ç¨‹å°†é‡Šæ”¾æŒæœ‰çš„é”. é”åªèƒ½ç”±æŒæœ‰è€…é‡Šæ”¾ï¼Œå¦‚æžœçº¿ç¨‹å¹¶ä¸æŒæœ‰é”ï¼Œå´æ‰§è¡Œè¯¥æ–¹æ³•ï¼Œå¯èƒ½å¯¼è‡´å¼‚å¸¸çš„å‘ç”Ÿ.Condition newCondition()ï¼š æ¡ä»¶å¯¹è±¡ï¼ŒèŽ·å–ç­‰å¾…é€šçŸ¥ç»„ä»¶ã€‚è¯¥ç»„ä»¶å’Œå½“å‰çš„é”ç»‘å®šï¼Œå½“å‰çº¿ç¨‹åªæœ‰èŽ·å–äº†é”ï¼Œæ‰èƒ½è°ƒç”¨è¯¥ç»„ä»¶çš„await()æ–¹æ³•ï¼Œè€Œè°ƒç”¨åŽï¼Œå½“å‰çº¿ç¨‹å°†ç¼©æ”¾é”ã€‚ 2.ReentrantLockçš„ä½¿ç”¨å…³äºŽReentrantLockçš„ä½¿ç”¨å¾ˆç®€å•ï¼Œåªéœ€è¦æ˜¾ç¤ºè°ƒç”¨ï¼ŒèŽ·å¾—åŒæ­¥é”ï¼Œé‡Šæ”¾åŒæ­¥é”å³å¯ã€‚ 12345678ReentrantLock lock = new ReentrantLock(); //å‚æ•°é»˜è®¤falseï¼Œä¸å…¬å¹³é”.....................lock.lock(); //å¦‚æžœè¢«å…¶å®ƒèµ„æºé”å®šï¼Œä¼šåœ¨æ­¤ç­‰å¾…é”é‡Šæ”¾ï¼Œè¾¾åˆ°æš‚åœçš„æ•ˆæžœtry &#123; //æ“ä½œ&#125; finally &#123; lock.unlock(); //é‡Šæ”¾é”&#125; 3.è§£å†³çº¿ç¨‹åŒæ­¥çš„å®žä¾‹é’ˆå¯¹ä¸Šè¿°æ–¹æ³•ï¼Œå…·ä½“çš„è§£å†³æ–¹å¼å¦‚ä¸‹ï¼š 12345678910111213141516171819202122public class Ticket implements Runnable &#123; // å½“å‰æ‹¥æœ‰çš„ç¥¨æ•° private int num = 100; ReentrantLock lock = new ReentrantLock(); public void run() &#123; while (true) &#123; try &#123; Thread.sleep(10); &#125; catch (InterruptedException e) &#123; &#125; lock.lock(); // è¾“å‡ºå–ç¥¨ä¿¡æ¯ if (num &gt; 0) &#123; System.out.println(Thread.currentThread().getName() + ".....sale...." + num--); &#125; lock.unlock(); &#125; &#125;&#125; å››ã€é‡å…¥é”å½“ä¸€ä¸ªçº¿ç¨‹å¾—åˆ°ä¸€ä¸ªå¯¹è±¡åŽï¼Œå†æ¬¡è¯·æ±‚è¯¥å¯¹è±¡é”æ—¶æ˜¯å¯ä»¥å†æ¬¡å¾—åˆ°è¯¥å¯¹è±¡çš„é”çš„ã€‚ å…·ä½“æ¦‚å¿µå°±æ˜¯ï¼šè‡ªå·±å¯ä»¥å†æ¬¡èŽ·å–è‡ªå·±çš„å†…éƒ¨é”ã€‚ Javaé‡Œé¢å†…ç½®é”(synchronized)å’ŒLock(ReentrantLock)éƒ½æ˜¯å¯é‡å…¥çš„ã€‚ 12345678910111213141516public class SynchronizedTest &#123; public void method1() &#123; synchronized (SynchronizedTest.class) &#123; System.out.println("æ–¹æ³•1èŽ·å¾—ReentrantTestçš„é”è¿è¡Œäº†"); method2(); &#125; &#125; public void method2() &#123; synchronized (SynchronizedTest.class) &#123; System.out.println("æ–¹æ³•1é‡Œé¢è°ƒç”¨çš„æ–¹æ³•2é‡å…¥é”,ä¹Ÿæ­£å¸¸è¿è¡Œäº†"); &#125; &#125; public static void main(String[] args) &#123; new SynchronizedTest().method1(); &#125;&#125; ä¸Šé¢ä¾¿æ˜¯synchronizedçš„é‡å…¥é”ç‰¹æ€§ï¼Œå³è°ƒç”¨method1()æ–¹æ³•æ—¶ï¼Œå·²ç»èŽ·å¾—äº†é”ï¼Œæ­¤æ—¶å†…éƒ¨è°ƒç”¨method2()æ–¹æ³•æ—¶ï¼Œç”±äºŽæœ¬èº«å·²ç»å…·æœ‰è¯¥é”ï¼Œæ‰€ä»¥å¯ä»¥å†æ¬¡èŽ·å–ã€‚ 1234567891011121314151617181920212223public class ReentrantLockTest &#123; private Lock lock = new ReentrantLock(); public void method1() &#123; lock.lock(); try &#123; System.out.println("æ–¹æ³•1èŽ·å¾—ReentrantLocké”è¿è¡Œäº†"); method2(); &#125; finally &#123; lock.unlock(); &#125; &#125; public void method2() &#123; lock.lock(); try &#123; System.out.println("æ–¹æ³•1é‡Œé¢è°ƒç”¨çš„æ–¹æ³•2é‡å…¥ReentrantLocké”,ä¹Ÿæ­£å¸¸è¿è¡Œäº†"); &#125; finally &#123; lock.unlock(); &#125; &#125; public static void main(String[] args) &#123; new ReentrantLockTest().method1(); &#125;&#125; ä¸Šé¢ä¾¿æ˜¯ReentrantLockçš„é‡å…¥é”ç‰¹æ€§ï¼Œå³è°ƒç”¨method1()æ–¹æ³•æ—¶ï¼Œå·²ç»èŽ·å¾—äº†é”ï¼Œæ­¤æ—¶å†…éƒ¨è°ƒç”¨method2()æ–¹æ³•æ—¶ï¼Œ ç”±äºŽæœ¬èº«å·²ç»å…·æœ‰è¯¥é”ï¼Œæ‰€ä»¥å¯ä»¥å†æ¬¡èŽ·å–ã€‚ äº”ã€å…¬å¹³é”CPUåœ¨è°ƒåº¦çº¿ç¨‹çš„æ—¶å€™æ˜¯åœ¨ç­‰å¾…é˜Ÿåˆ—é‡ŒéšæœºæŒ‘é€‰ä¸€ä¸ªçº¿ç¨‹ï¼Œç”±äºŽè¿™ç§éšæœºæ€§æ‰€ä»¥æ˜¯æ— æ³•ä¿è¯çº¿ç¨‹å…ˆåˆ°å…ˆå¾—çš„ï¼ˆsynchronizedæŽ§åˆ¶çš„é”å°±æ˜¯è¿™ç§éžå…¬å¹³é”ï¼‰ã€‚ä½†è¿™æ ·å°±ä¼šäº§ç”Ÿé¥¥é¥¿çŽ°è±¡ï¼Œå³æœ‰äº›çº¿ç¨‹ï¼ˆä¼˜å…ˆçº§è¾ƒä½Žçš„çº¿ç¨‹ï¼‰å¯èƒ½æ°¸è¿œä¹Ÿæ— æ³•èŽ·å–CPUçš„æ‰§è¡Œæƒï¼Œä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹ä¼šä¸æ–­çš„å¼ºåˆ¶å®ƒçš„èµ„æºã€‚é‚£ä¹ˆå¦‚ä½•è§£å†³é¥¥é¥¿é—®é¢˜å‘¢ï¼Œè¿™å°±éœ€è¦å…¬å¹³é”äº†ã€‚å…¬å¹³é”å¯ä»¥ä¿è¯çº¿ç¨‹æŒ‰ç…§æ—¶é—´çš„å…ˆåŽé¡ºåºæ‰§è¡Œï¼Œé¿å…é¥¥é¥¿çŽ°è±¡çš„äº§ç”Ÿã€‚ä½†å…¬å¹³é”çš„æ•ˆçŽ‡æ¯”è¾ƒä½Žï¼Œå› ä¸ºè¦å®žçŽ°é¡ºåºæ‰§è¡Œï¼Œéœ€è¦ç»´æŠ¤ä¸€ä¸ªæœ‰åºé˜Ÿåˆ—ã€‚ ReentrantLockä¾¿æ˜¯ä¸€ç§å…¬å¹³é”ï¼Œé€šè¿‡åœ¨æž„é€ æ–¹æ³•ä¸­ä¼ å…¥trueå°±æ˜¯å…¬å¹³é”ï¼Œä¼ å…¥falseï¼Œå°±æ˜¯éžå…¬å¹³é”ã€‚ 123public ReentrantLock(boolean fair) &#123; sync = fair ? new FairSync() : new NonfairSync(); &#125; ä»¥ä¸‹æ˜¯ä½¿ç”¨å…¬å¹³é”å®žçŽ°çš„æ•ˆæžœï¼š 123456789101112131415161718192021public class LockFairTest implements Runnable&#123; //åˆ›å»ºå…¬å¹³é” private static ReentrantLock lock=new ReentrantLock(true); public void run() &#123; while(true)&#123; lock.lock(); try&#123; System.out.println(Thread.currentThread().getName()+"èŽ·å¾—é”"); &#125;finally&#123; lock.unlock(); &#125; &#125; &#125; public static void main(String[] args) &#123; LockFairTest lft=new LockFairTest(); Thread th1=new Thread(lft); Thread th2=new Thread(lft); th1.start(); th2.start(); &#125;&#125; è¾“å‡ºç»“æžœï¼š Thread-1èŽ·å¾—é”Thread-0èŽ·å¾—é”Thread-1èŽ·å¾—é”Thread-0èŽ·å¾—é”Thread-1èŽ·å¾—é”Thread-0èŽ·å¾—é”Thread-1èŽ·å¾—é”Thread-0èŽ·å¾—é”Thread-1èŽ·å¾—é”Thread-0èŽ·å¾—é”Thread-1èŽ·å¾—é”Thread-0èŽ·å¾—é”Thread-1èŽ·å¾—é”Thread-0èŽ·å¾—é”Thread-1èŽ·å¾—é”Thread-0èŽ·å¾—é” è¿™æ˜¯æˆªå–çš„éƒ¨åˆ†æ‰§è¡Œç»“æžœï¼Œåˆ†æžç»“æžœå¯çœ‹å‡ºä¸¤ä¸ªçº¿ç¨‹æ˜¯äº¤æ›¿æ‰§è¡Œçš„ï¼Œå‡ ä¹Žä¸ä¼šå‡ºçŽ°åŒä¸€ä¸ªçº¿ç¨‹è¿žç»­æ‰§è¡Œå¤šæ¬¡ã€‚ å…­ã€synchronizedå’ŒReentrantLockçš„æ¯”è¾ƒ1.åŒºåˆ«ï¼š1ï¼‰Lockæ˜¯ä¸€ä¸ªæŽ¥å£ï¼Œè€Œsynchronizedæ˜¯Javaä¸­çš„å…³é”®å­—ï¼Œsynchronizedæ˜¯å†…ç½®çš„è¯­è¨€å®žçŽ°ï¼› 2ï¼‰synchronizedåœ¨å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œä¼šè‡ªåŠ¨é‡Šæ”¾çº¿ç¨‹å æœ‰çš„é”ï¼Œå› æ­¤ä¸ä¼šå¯¼è‡´æ­»é”çŽ°è±¡å‘ç”Ÿï¼›è€ŒLockåœ¨å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œå¦‚æžœæ²¡æœ‰ä¸»åŠ¨é€šè¿‡unLock()åŽ»é‡Šæ”¾é”ï¼Œåˆ™å¾ˆå¯èƒ½é€ æˆæ­»é”çŽ°è±¡ï¼Œå› æ­¤ä½¿ç”¨Lockæ—¶éœ€è¦åœ¨finallyå—ä¸­é‡Šæ”¾é”ï¼› 3ï¼‰Lockå¯ä»¥è®©ç­‰å¾…é”çš„çº¿ç¨‹å“åº”ä¸­æ–­ï¼Œè€Œsynchronizedå´ä¸è¡Œï¼Œä½¿ç”¨synchronizedæ—¶ï¼Œç­‰å¾…çš„çº¿ç¨‹ä¼šä¸€ç›´ç­‰å¾…ä¸‹åŽ»ï¼Œä¸èƒ½å¤Ÿå“åº”ä¸­æ–­ï¼› 4ï¼‰é€šè¿‡Lockå¯ä»¥çŸ¥é“æœ‰æ²¡æœ‰æˆåŠŸèŽ·å–é”ï¼Œè€Œsynchronizedå´æ— æ³•åŠžåˆ°ã€‚ 5ï¼‰Lockå¯ä»¥æé«˜å¤šä¸ªçº¿ç¨‹è¿›è¡Œè¯»æ“ä½œçš„æ•ˆçŽ‡ã€‚ æ€»ç»“ï¼šReentrantLockç›¸æ¯”synchronizedï¼Œå¢žåŠ äº†ä¸€äº›é«˜çº§çš„åŠŸèƒ½ã€‚ä½†ä¹Ÿæœ‰ä¸€å®šç¼ºé™·ã€‚ åœ¨ReentrantLockç±»ä¸­å®šä¹‰äº†å¾ˆå¤šæ–¹æ³•ï¼Œæ¯”å¦‚ï¼š 1234567isFair() //åˆ¤æ–­é”æ˜¯å¦æ˜¯å…¬å¹³é”isLocked() //åˆ¤æ–­é”æ˜¯å¦è¢«ä»»ä½•çº¿ç¨‹èŽ·å–äº†isHeldByCurrentThread() //åˆ¤æ–­é”æ˜¯å¦è¢«å½“å‰çº¿ç¨‹èŽ·å–äº†hasQueuedThreads() //åˆ¤æ–­æ˜¯å¦æœ‰çº¿ç¨‹åœ¨ç­‰å¾…è¯¥é” 2.ä¸¤è€…åœ¨é”çš„ç›¸å…³æ¦‚å¿µä¸ŠåŒºåˆ«ï¼š1)å¯ä¸­æ–­é” é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å¯ä»¥å“åº”ä¸­æ–­çš„é”ã€‚ åœ¨Javaä¸­ï¼Œsynchronizedå°±ä¸æ˜¯å¯ä¸­æ–­é”ï¼Œè€ŒLockæ˜¯å¯ä¸­æ–­é”ã€‚å¦‚æžœæŸä¸€çº¿ç¨‹Aæ­£åœ¨æ‰§è¡Œé”ä¸­çš„ä»£ç ï¼Œå¦ä¸€çº¿ç¨‹Bæ­£åœ¨ç­‰å¾…èŽ·å–è¯¥é”ï¼Œå¯èƒ½ç”±äºŽç­‰å¾…æ—¶é—´è¿‡é•¿ï¼Œçº¿ç¨‹Bä¸æƒ³ç­‰å¾…äº†ï¼Œæƒ³å…ˆå¤„ç†å…¶ä»–äº‹æƒ…ï¼Œæˆ‘ä»¬å¯ä»¥è®©å®ƒä¸­æ–­è‡ªå·±æˆ–è€…åœ¨åˆ«çš„çº¿ç¨‹ä¸­ä¸­æ–­å®ƒï¼Œè¿™ç§å°±æ˜¯å¯ä¸­æ–­é”ã€‚ lockInterruptibly()çš„ç”¨æ³•ä½“çŽ°äº†Lockçš„å¯ä¸­æ–­æ€§ã€‚ 2)å…¬å¹³é” å…¬å¹³é”å³å°½é‡ä»¥è¯·æ±‚é”çš„é¡ºåºæ¥èŽ·å–é”ã€‚æ¯”å¦‚åŒæ˜¯æœ‰å¤šä¸ªçº¿ç¨‹åœ¨ç­‰å¾…ä¸€ä¸ªé”ï¼Œå½“è¿™ä¸ªé”è¢«é‡Šæ”¾æ—¶ï¼Œç­‰å¾…æ—¶é—´æœ€ä¹…çš„çº¿ç¨‹ï¼ˆæœ€å…ˆè¯·æ±‚çš„çº¿ç¨‹ï¼‰ä¼šèŽ·å¾—è¯¥é”ï¼ˆå¹¶ä¸æ˜¯ç»å¯¹çš„ï¼Œå¤§ä½“ä¸Šæ˜¯è¿™ç§é¡ºåºï¼‰ï¼Œè¿™ç§å°±æ˜¯å…¬å¹³é”ã€‚ éžå…¬å¹³é”å³æ— æ³•ä¿è¯é”çš„èŽ·å–æ˜¯æŒ‰ç…§è¯·æ±‚é”çš„é¡ºåºè¿›è¡Œçš„ã€‚è¿™æ ·å°±å¯èƒ½å¯¼è‡´æŸä¸ªæˆ–è€…ä¸€äº›çº¿ç¨‹æ°¸è¿œèŽ·å–ä¸åˆ°é”ã€‚ åœ¨Javaä¸­ï¼Œsynchronizedå°±æ˜¯éžå…¬å¹³é”ï¼Œå®ƒæ— æ³•ä¿è¯ç­‰å¾…çš„çº¿ç¨‹èŽ·å–é”çš„é¡ºåºã€‚ReentrantLockå¯ä»¥è®¾ç½®æˆå…¬å¹³é”ã€‚ 3)è¯»å†™é” è¯»å†™é”å°†å¯¹ä¸€ä¸ªèµ„æºï¼ˆæ¯”å¦‚æ–‡ä»¶ï¼‰çš„è®¿é—®åˆ†æˆäº†2ä¸ªé”ï¼Œä¸€ä¸ªè¯»é”å’Œä¸€ä¸ªå†™é”ã€‚ æ­£å› ä¸ºæœ‰äº†è¯»å†™é”ï¼Œæ‰ä½¿å¾—å¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„è¯»æ“ä½œå¯ä»¥å¹¶å‘è¿›è¡Œï¼Œä¸éœ€è¦åŒæ­¥ï¼Œè€Œå†™æ“ä½œéœ€è¦åŒæ­¥è¿›è¡Œï¼Œæé«˜äº†æ•ˆçŽ‡ã€‚ ReadWriteLockå°±æ˜¯è¯»å†™é”ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŽ¥å£ï¼ŒReentrantReadWriteLockå®žçŽ°äº†è¿™ä¸ªæŽ¥å£ã€‚ å¯ä»¥é€šè¿‡readLock()èŽ·å–è¯»é”ï¼Œé€šè¿‡writeLock()èŽ·å–å†™é”ã€‚ 4)ç»‘å®šå¤šä¸ªæ¡ä»¶ ä¸€ä¸ªReentrantLockå¯¹è±¡å¯ä»¥åŒæ—¶ç»‘å®šå¤šä¸ªConditionå¯¹è±¡ï¼Œè€Œåœ¨synchronizedä¸­ï¼Œé”å¯¹è±¡çš„wait()å’Œnotify()æˆ–notifyAll()æ–¹æ³•å¯ä»¥å®žçŽ°ä¸€ä¸ªéšå«çš„æ¡ä»¶ï¼Œå¦‚æžœè¦å’Œå¤šä½™ä¸€ä¸ªæ¡ä»¶å…³è”çš„æ—¶å€™ï¼Œå°±ä¸å¾—ä¸é¢å¤–åœ°æ·»åŠ ä¸€ä¸ªé”ï¼Œè€ŒReentrantLockåˆ™æ— é¡»è¿™ä¹ˆåšï¼Œåªéœ€è¦å¤šæ¬¡è°ƒç”¨new Condition()æ–¹æ³•å³å¯ã€‚ 3.æ€§èƒ½æ¯”è¾ƒåœ¨æ€§èƒ½ä¸Šæ¥è¯´ï¼Œå¦‚æžœç«žäº‰èµ„æºä¸æ¿€çƒˆï¼Œä¸¤è€…çš„æ€§èƒ½æ˜¯å·®ä¸å¤šçš„ï¼Œè€Œ å½“ç«žäº‰èµ„æºéžå¸¸æ¿€çƒˆæ—¶ï¼ˆå³æœ‰å¤§é‡çº¿ç¨‹åŒæ—¶ç«žäº‰ï¼‰ï¼Œæ­¤æ—¶ReentrantLockçš„æ€§èƒ½è¦è¿œè¿œä¼˜äºŽsynchronized ã€‚æ‰€ä»¥è¯´ï¼Œåœ¨å…·ä½“ä½¿ç”¨æ—¶è¦æ ¹æ®é€‚å½“æƒ…å†µé€‰æ‹©ã€‚ åœ¨JDK1.5ä¸­ï¼Œsynchronizedæ˜¯æ€§èƒ½ä½Žæ•ˆçš„ã€‚å› ä¸ºè¿™æ˜¯ä¸€ä¸ªé‡é‡çº§æ“ä½œï¼Œå®ƒå¯¹æ€§èƒ½æœ€å¤§çš„å½±å“æ˜¯é˜»å¡žçš„æ˜¯å®žçŽ°ï¼ŒæŒ‚èµ·çº¿ç¨‹å’Œæ¢å¤çº¿ç¨‹çš„æ“ä½œéƒ½éœ€è¦è½¬å…¥å†…æ ¸æ€ä¸­å®Œæˆï¼Œè¿™äº›æ“ä½œç»™ç³»ç»Ÿçš„å¹¶å‘æ€§å¸¦æ¥äº†å¾ˆå¤§çš„åŽ‹åŠ›ã€‚ç›¸æ¯”ä¹‹ä¸‹ä½¿ç”¨Javaæä¾›çš„ReentrankLockå¯¹è±¡ï¼Œæ€§èƒ½æ›´é«˜ä¸€äº›ã€‚åˆ°äº†JDK1.6ï¼Œå‘ç”Ÿäº†å˜åŒ–ï¼Œå¯¹synchronizeåŠ å…¥äº†å¾ˆå¤šä¼˜åŒ–æŽªæ–½ï¼Œæœ‰è‡ªé€‚åº”è‡ªæ—‹ï¼Œé”æ¶ˆé™¤ï¼Œé”ç²—åŒ–ï¼Œè½»é‡çº§é”ï¼Œåå‘é”ç­‰ç­‰ã€‚å¯¼è‡´åœ¨JDK1.6ä¸Šsynchronizeçš„æ€§èƒ½å¹¶ä¸æ¯”Lockå·®ã€‚å®˜æ–¹ä¹Ÿè¡¨ç¤ºï¼Œä»–ä»¬ä¹Ÿæ›´æ”¯æŒsynchronizeï¼Œåœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­è¿˜æœ‰ä¼˜åŒ–ä½™åœ°ï¼Œæ‰€ä»¥è¿˜æ˜¯æå€¡åœ¨synchronizedèƒ½å®žçŽ°éœ€æ±‚çš„æƒ…å†µä¸‹ï¼Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨synchronizedæ¥è¿›è¡ŒåŒæ­¥ã€‚]]></content>
      <tags>
        <tag>Interview</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Javaåˆ›å»ºçº¿ç¨‹çš„ä¸‰ç§æ–¹å¼]]></title>
    <url>%2F2018%2F01%2F15%2FJava%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[ä¸€ã€ç»§æ‰¿Threadç±»åˆ›å»ºçº¿ç¨‹ç±»ï¼ˆ1ï¼‰å®šä¹‰Threadç±»çš„å­ç±»ï¼Œå¹¶é‡å†™è¯¥ç±»çš„runæ–¹æ³•ï¼Œè¯¥runæ–¹æ³•çš„æ–¹æ³•ä½“å°±ä»£è¡¨äº†çº¿ç¨‹è¦å®Œæˆçš„ä»»åŠ¡ã€‚å› æ­¤æŠŠrun()æ–¹æ³•ç§°ä¸ºæ‰§è¡Œä½“ã€‚ ï¼ˆ2ï¼‰åˆ›å»ºThreadå­ç±»çš„å®žä¾‹ï¼Œå³åˆ›å»ºäº†çº¿ç¨‹å¯¹è±¡ã€‚ ï¼ˆ3ï¼‰è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„start()æ–¹æ³•æ¥å¯åŠ¨è¯¥çº¿ç¨‹ã€‚12345678910111213141516171819202122public class FirstThreadTest extends Thread &#123; int i = 0; //é‡å†™runæ–¹æ³•ï¼Œrunæ–¹æ³•çš„æ–¹æ³•ä½“å°±æ˜¯çŽ°åœºæ‰§è¡Œä½“ public void run() &#123; for (; i &lt; 100; i++) &#123; System.out.println(getName() + " " + i); &#125; &#125; public static void main(String[] args) &#123; for (int i = 0; i &lt; 100; i++) &#123; System.out.println(Thread.currentThread().getName() + " : " + i); if (i == 20) &#123; new FirstThreadTest().start(); new FirstThreadTest().start(); &#125; &#125; &#125;&#125; ä¸Šè¿°ä»£ç ä¸­Thread.currentThread()æ–¹æ³•è¿”å›žå½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡ã€‚GetName()æ–¹æ³•è¿”å›žè°ƒç”¨è¯¥æ–¹æ³•çš„çº¿ç¨‹çš„åå­—ã€‚ äºŒã€é€šè¿‡RunnableæŽ¥å£åˆ›å»ºçº¿ç¨‹ç±»ï¼ˆ1ï¼‰å®šä¹‰runnableæŽ¥å£çš„å®žçŽ°ç±»ï¼Œå¹¶é‡å†™è¯¥æŽ¥å£çš„run()æ–¹æ³•ï¼Œè¯¥run()æ–¹æ³•çš„æ–¹æ³•ä½“åŒæ ·æ˜¯è¯¥çº¿ç¨‹çš„çº¿ç¨‹æ‰§è¡Œä½“ã€‚ ï¼ˆ2ï¼‰åˆ›å»º Runnableå®žçŽ°ç±»çš„å®žä¾‹ï¼Œå¹¶ä¾æ­¤å®žä¾‹ä½œä¸ºThreadçš„targetæ¥åˆ›å»ºThreadå¯¹è±¡ï¼Œè¯¥Threadå¯¹è±¡æ‰æ˜¯çœŸæ­£çš„çº¿ç¨‹å¯¹è±¡ã€‚ ï¼ˆ3ï¼‰è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„start()æ–¹æ³•æ¥å¯åŠ¨è¯¥çº¿ç¨‹ã€‚ 12345678910111213141516171819202122public class RunnableThreadTest implements Runnable &#123; private int i; public void run() &#123; for (i = 0; i &lt; 100; i++) &#123; System.out.println(Thread.currentThread().getName() + " " + i); &#125; &#125; public static void main(String[] args) &#123; for (int i = 0; i &lt; 100; i++) &#123; System.out.println(Thread.currentThread().getName() + " " + i); if (i == 20) &#123; RunnableThreadTest rtt = new RunnableThreadTest(); new Thread(rtt, "æ–°çº¿ç¨‹1").start(); new Thread(rtt, "æ–°çº¿ç¨‹2").start(); &#125; &#125; &#125;&#125; ä¸‰ã€é€šè¿‡Callableå’ŒFutureåˆ›å»ºçº¿ç¨‹ï¼ˆ1ï¼‰åˆ›å»ºCallableæŽ¥å£çš„å®žçŽ°ç±»ï¼Œå¹¶å®žçŽ°call()æ–¹æ³•ï¼Œè¯¥call()æ–¹æ³•å°†ä½œä¸ºçº¿ç¨‹æ‰§è¡Œä½“ï¼Œå¹¶ä¸”æœ‰è¿”å›žå€¼ã€‚ ï¼ˆ2ï¼‰åˆ›å»ºCallableå®žçŽ°ç±»çš„å®žä¾‹ï¼Œä½¿ç”¨FutureTaskç±»æ¥åŒ…è£…Callableå¯¹è±¡ï¼Œè¯¥FutureTaskå¯¹è±¡å°è£…äº†è¯¥Callableå¯¹è±¡çš„call()æ–¹æ³•çš„è¿”å›žå€¼ã€‚ ï¼ˆ3ï¼‰ä½¿ç”¨FutureTaskå¯¹è±¡ä½œä¸ºThreadå¯¹è±¡çš„targetåˆ›å»ºå¹¶å¯åŠ¨æ–°çº¿ç¨‹ã€‚ ï¼ˆ4ï¼‰è°ƒç”¨FutureTaskå¯¹è±¡çš„get()æ–¹æ³•æ¥èŽ·å¾—å­çº¿ç¨‹æ‰§è¡Œç»“æŸåŽçš„è¿”å›žå€¼ï¼Œè°ƒç”¨get()æ–¹æ³•ä¼šé˜»å¡žçº¿ç¨‹ã€‚ 1234567891011121314151617181920212223242526272829public class CallableThreadTest implements Callable&lt;Integer&gt; &#123; public static void main(String[] args) &#123; CallableThreadTest ctt = new CallableThreadTest(); FutureTask&lt;Integer&gt; ft = new FutureTask&lt;&gt;(ctt); for (int i = 0; i &lt; 100; i++) &#123; System.out.println(Thread.currentThread().getName() + " çš„å¾ªçŽ¯å˜é‡içš„å€¼" + i); if (i == 20) &#123; new Thread(ft, "æœ‰è¿”å›žå€¼çš„çº¿ç¨‹").start(); &#125; &#125; try &#123; System.out.println("å­çº¿ç¨‹çš„è¿”å›žå€¼ï¼š" + ft.get()); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; catch (ExecutionException e) &#123; e.printStackTrace(); &#125; &#125; @Override public Integer call() throws Exception &#123; int i = 0; for (; i &lt; 100; i++) &#123; System.out.println(Thread.currentThread().getName() + " " + i); &#125; return i; &#125;&#125; å››ã€åˆ›å»ºçº¿ç¨‹çš„ä¸‰ç§æ–¹å¼çš„å¯¹æ¯”é‡‡ç”¨å®žçŽ°Runnableã€CallableæŽ¥å£çš„æ–¹å¼åˆ›è§å¤šçº¿ç¨‹æ—¶ï¼Œä¼˜åŠ¿æ˜¯ï¼š çº¿ç¨‹ç±»åªæ˜¯å®žçŽ°äº†RunnableæŽ¥å£æˆ–CallableæŽ¥å£ï¼Œè¿˜å¯ä»¥ç»§æ‰¿å…¶ä»–ç±»ã€‚ åœ¨è¿™ç§æ–¹å¼ä¸‹ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥å…±äº«åŒä¸€ä¸ªtargetå¯¹è±¡ï¼Œæ‰€ä»¥éžå¸¸é€‚åˆå¤šä¸ªç›¸åŒçº¿ç¨‹æ¥å¤„ç†åŒä¸€ä»½èµ„æºçš„æƒ…å†µï¼Œä»Žè€Œå¯ä»¥å°†CPUã€ä»£ç å’Œæ•°æ®åˆ†å¼€ï¼Œå½¢æˆæ¸…æ™°çš„æ¨¡åž‹ï¼Œè¾ƒå¥½åœ°ä½“çŽ°äº†é¢å‘å¯¹è±¡çš„æ€æƒ³ã€‚ åŠ£åŠ¿æ˜¯ï¼š ç¼–ç¨‹ç¨å¾®å¤æ‚ï¼Œå¦‚æžœè¦è®¿é—®å½“å‰çº¿ç¨‹ï¼Œåˆ™å¿…é¡»ä½¿ç”¨Thread.currentThread()æ–¹æ³•ã€‚ ä½¿ç”¨ç»§æ‰¿Threadç±»çš„æ–¹å¼åˆ›å»ºå¤šçº¿ç¨‹æ—¶ä¼˜åŠ¿æ˜¯ï¼š ç¼–å†™ç®€å•ï¼Œå¦‚æžœéœ€è¦è®¿é—®å½“å‰çº¿ç¨‹ï¼Œåˆ™æ— éœ€ä½¿ç”¨Thread.currentThread()æ–¹æ³•ï¼Œç›´æŽ¥ä½¿ç”¨thiså³å¯èŽ·å¾—å½“å‰çº¿ç¨‹ã€‚ åŠ£åŠ¿æ˜¯ï¼š çº¿ç¨‹ç±»å·²ç»ç»§æ‰¿äº†Threadç±»ï¼Œæ‰€ä»¥ä¸èƒ½å†ç»§æ‰¿å…¶ä»–çˆ¶ç±»ã€‚]]></content>
      <tags>
        <tag>Interview</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€è½¬è½½ã€‘äºšé©¬é€Šé«˜çº§å·¥ç¨‹å¸ˆï¼šå¹³å‡¡æ˜¯ç¨‹åºå‘˜å”¯ä¸€çš„ç­”æ¡ˆå—ï¼Ÿ]]></title>
    <url>%2F2017%2F09%2F18%2F%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91%E4%BA%9A%E9%A9%AC%E9%80%8A%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%EF%BC%9A%E5%B9%B3%E5%87%A1%E6%98%AF%E7%A8%8B%E5%BA%8F%E5%91%98%E5%94%AF%E4%B8%80%E7%9A%84%E7%AD%94%E6%A1%88%E5%90%97%EF%BC%9F%2F</url>
    <content type="text"><![CDATA[ã€è½¬è½½ã€‘äºšé©¬é€Šé«˜çº§å·¥ç¨‹å¸ˆï¼šå¹³å‡¡æ˜¯ç¨‹åºå‘˜å”¯ä¸€çš„ç­”æ¡ˆå—ï¼Ÿæœ¬æ–‡ä½œè€…ï¼šæ•…èƒ¤é“é•¿ CMU ç¡•å£«æ¯•ä¸šï¼Œå¸¸å¹´å±…ä½äºŽç¾Žå›½çš„ iOS å¼€å‘è€…ã€‚Githubç´¯è®¡ 4000 æ˜Ÿï¼Œå‰ Uber æ ¸å¿ƒæž¶æž„ç»„æˆå‘˜ï¼ŒçŽ°äºšé©¬é€Šæ‹…ä»»é¡¹ç›®æŠ€æœ¯è´Ÿè´£äººã€‚ ä»¥ä¸‹ä¸ºæ­£æ–‡ï¼š æˆ‘åœ¨ Facebook æœ‰ä¸€ä½å¥½å‹ã€‚ä»–æœ¬ç§‘å›½å†… Top 2 å¤§å­¦æ¯•ä¸šï¼Œåœ¨ç¾Žå›½æ‹¿äº†æœ€é¡¶å°–å¤§å­¦çš„ç¡•å£«å­¦ä½ï¼Œç„¶åŽå¹´çºªè½»è½»å°±åšåˆ°äº†æŠ€æœ¯è´Ÿè´£äººï¼Œæ‹¿ç€è¶…é«˜çš„è–ªæ°´ã€‚å°±æ˜¯è¿™ä¹ˆä¸€ä¸ªå¼€äº†æŒ‚ä¸€èˆ¬çš„å¤©æ‰ï¼Œæ¯ä¸ªæ˜ŸæœŸå…­æ™šä¸Šçš„å¤œé‡Œï¼Œä»–æ˜¯æ°¸è¿œæ˜¯ç¡ä¸ç€çš„ã€‚ æˆ‘é—®ä»–ä¸ºä»€ä¹ˆå¤±çœ ã€‚ä»–çš„å›žç­”æ˜¯ç„¦è™‘ã€‚ ä»–è¯´ï¼Œä»–é©¬ä¸Šå°±è¦30å²äº†ã€‚ä»–çš„è€æ¿æ‰Žå…‹ä¼¯æ ¼åœ¨30å²æ—¶æ—¶å·²ç»ç¼”é€ äº† Facebookï¼›è´ä½æ–¯è¾žåŽ»äº†åŽå°”è¡—çš„å‰¯æ€»è£èŒä½ï¼Œå¼€å§‹äº† Amazon çš„åˆ›ä¸šæ—…ç¨‹ï¼›ä¸ç£Šå·²ç»æˆä¸ºäº†ä¸­å›½é¦–å¯Œï¼›æŽå½¦å®ä¹Ÿåœ¨è¿™ä¸€å¹´æ”¾å¼ƒäº†è´¢åŠ¡è‡ªç”±çš„ç¡…è°·ç”Ÿæ´»ï¼Œè½¬èº«å›žåˆ°ä¸­å›½ï¼Œåˆ›ç«‹äº†ç™¾åº¦ã€‚è¿œçš„ä¸è¯´ï¼Œè¿‘å¤„ä»–æœ‰å‡ ä¸ªè®¤è¯†çš„åŒé¾„äººåœ¨å›½å†…åˆ›ä¸šé£Žç”Ÿæ°´èµ·ï¼Œåƒä¸‡æŠ•èµ„ï¼Œè¿˜æœ‰å‡ ä¸ªè¢«è¯„ä¸º Forbes 30 Under 30ã€‚ è€Œä»–å‘¢ï¼Œä¸è¿‡ä¸€ä¸ªç¨‹åºå‘˜ã€‚30å²çš„æ—¶å€™ä¾ç„¶åœ¨ç¡…è°·ç§Ÿç€æˆ¿å­ï¼Œè‡³ä»Šæ²¡æœ‰æ„Ÿè§‰åšå‡ºä»€ä¹ˆæ”¹å˜ä¸–ç•Œçš„äº§å“ã€‚æ¯å½“çœ‹åˆ°ç¡…è°·å¤§åŽè¶…å¸‚é‡Œé¢æ‹–å®¶å¸¦å£çš„åŽäººè€å·¥ç¨‹å¸ˆï¼Œä»–å°±è§‰å¾—å¯ä»¥çœ‹ç©¿æœªæ¥ â€”â€” åå¹´åŽä»–ä¹Ÿä¼šæ˜¯è¿™æ ·ï¼šæŒºç€å¤§è‚šå­ï¼Œå¸¦ç€å­©å­ï¼Œä¸ºæŸ´ç±³æ²¹ç›æ–¤æ–¤è®¡è¾ƒã€‚ æˆ‘å½“æ—¶ç¬‘ç€è¯´ï¼Œä½ å“ªä¼šé‚£æ ·ã€‚ä½ çŽ°åœ¨åªä¸è¿‡æ˜¯å°‘å¹´ç»´ç‰¹çš„çƒ¦æ¼ï¼Œä½ ä¹‹å‰çš„ç”Ÿå‘½å¦‚å¤èŠ±èˆ¬ç¿çƒ‚ï¼Œè¿™ä¹‹åŽå¹³å‡¡ä¹Ÿä¸ä¼šæ˜¯å”¯ä¸€çš„ç­”æ¡ˆã€‚ çŽ°åœ¨æƒ³æƒ³ï¼Œæˆ‘ä¹Ÿè®¸è¿‡äºŽä¹è§‚äº†ã€‚çŽ°åœ¨è¶…å¸‚é‡Œçœ‹åˆ°çš„åŽäººå·¥ç¨‹å¸ˆï¼Œä»–ä»¬å½“å¹´éƒ½æ˜¯å›½å†…æ•°ä¸€æ•°äºŒçš„å­¦éœ¸ï¼Œå¤§å¤šåœ¨æ²¡æœ‰çˆ¶æ¯æ”¯æŒçš„æƒ…å†µä¸‹ï¼Œæ¼‚æ´‹è¿‡æµ·ï¼Œå­¦æˆæ¯•ä¸šï¼Œç•™åœ¨ç¡…è°·ï¼ˆé‚£ä¸ªæ—¶å€™ææ€•è°·æ­Œè¿˜æ²¡ä¸Šå¸‚ï¼‰ï¼ŒçœŸæ˜¯æ¯”æˆ‘ä»¬è¿™ä»£ç•™å­¦ç”Ÿä¼˜ç§€å¤ªå¤šã€‚å³ä½¿è¿™æ ·ï¼Œåœ¨æˆ‘ä»¬è¿™å¸®ä¸çŸ¥å¤©é«˜åœ°åŽšçš„å¹´è½»äººçœ‹æ¥ï¼Œä»–ä»¬ä¹Ÿè€äº†ã€æ— èŠäº†ã€æ³¯ç„¶ä¼—äººçŸ£äº†ã€‚åå¹´ä¹‹åŽï¼Œæˆ‘ä»¬è¿™ä»£ç¨‹åºå‘˜ï¼Œæ˜¯å¦ä¹Ÿä¼šè¢«åŽè¾ˆæ‰€é„™å¼ƒï¼Ÿ è¿™ä¸ªé—®é¢˜æˆ‘æƒ³æ— æ•°äººæ€è€ƒè¿‡ï¼Œæ— è®ºæ˜¯å›½å†…çš„è¿˜æ˜¯ç¡…è°·çš„ï¼Œæ— è®ºæ˜¯ä¸æ˜¯ç¨‹åºå‘˜ã€‚å½“å¹´æ‰Žå…‹ä¼¯æ ¼ä¸€ç›´ä¸ºè‡ªå·±æžå®¢çš„èº«ä»½æ„Ÿåˆ°è‡ªè±ªï¼Œä¹Ÿæƒ§æ€•æœ€åŽè¢«ä¸–ä¿—è£¹æŒŸï¼Œæˆä¸ºæ‰€è°“èŒåœºä¸ŠæŒ‡æ‰‹ç”»è„šçš„è€æ²¹æ¡â€”â€”äºŽæ˜¯ä»–åœ¨è‡ªå·±åç‰‡ä¸Šçš„èŒä½ CEO å‰åŠ ä¸Šäº†ä¸ªâ€œä»–å¦ˆçš„â€ï¼›è¶…çº§æžå®¢çº¦ç¿°å¡é©¬å…‹åœ¨æˆä¸º Oculus CTO ä¹‹åŽï¼Œä¾ç„¶åšæŒæ¯å¤©å†™ä»£ç ï¼Œä¸€å¤©ä¸å†™å°±è§‰å¾—æµ‘èº«ä¸èˆ’æœï¼Œè¦åœ¨æŽ¨ç‰¹ä¸Šåæ§½è‡ªå·±ã€‚ è¿™ä¸¤ä¸ªäººç›´åˆ°ä»Šå¤©ä¾ç„¶å¾ˆé…·ï¼Œä¾ç„¶æ˜¯ç¨‹åºå‘˜å¿ƒä¸­çš„å¶åƒã€‚ æœ‰äººè¯´ï¼Œè¿™ä¸¤ä¸ªäººå¤©èµ‹å¼‚ç¦€ï¼Œéª¨éª¼æƒŠå¥‡ï¼Œæ˜¯ä¸‡ä¸­æ— ä¸€çš„ç¨‹åºå‘˜ã€‚ç„¶è€Œä¸»æµä¸–ç•Œè§‚å°±æ˜¯ï¼Œæˆ‘ä»¬ç»ˆå°†è€åŽ»ã€‚ç§‘æŠ€è¡Œä¸šçš„æ—¥æ–°æœˆå¼‚æ›´æ˜¯å†³å®šäº†ï¼Œæˆ‘ä»¬çš„ä»£ç ç»ˆå°†è¢«è¦†ç›–ï¼Œæˆ‘ä»¬åšçš„äº§å“ç»ˆå°†ä¼šè½å¯žï¼Œæˆ‘ä»¬è®¨è®ºçš„æŠ€æœ¯ç»ˆå°†ä¼šæ·˜æ±°ï¼Œé‚£æˆ‘ä»¬ç¨‹åºå‘˜è¿˜å‰©ä¸‹ä»€ä¹ˆï¼Ÿ ç¥žé¾Ÿè™½å¯¿ï¼ŒçŠ¹æœ‰ç«Ÿæ—¶ã€‚è…¾è›‡ä¹˜é›¾ï¼Œç»ˆä¸ºåœŸç°ã€‚ è¦å›žç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘æƒ³è°ˆä¸¤ä½è‰ºæœ¯å®¶ã€‚ä¸€ä½æ˜¯éŸ³ä¹ä¹‹çˆ¶å·´èµ«ï¼Œå¦ä¸€ä½æ˜¯éŸ³ä¹ç¥žç«¥èŽ«æ‰Žç‰¹ã€‚å‰è€…ç”Ÿå‰æ˜¯ä¸€ä½å®«å»·ä¹æ‰‹ï¼Œä¸ºçŽ‹å®«è´µæ—è°±æ›²ï¼Œæ­»åŽ80å¹´ï¼Œä»–ä¼Ÿå¤§çš„ä½œå“æ‰åœ¨æžå…¶å¶ç„¶çš„æƒ…å†µä¸‹è¢«é—¨å¾·å°”æ¾å‘çŽ°ï¼›åŽè€…ç”Ÿå‰äº¦ä¸å—å¾…è§ï¼Œè‹±å¹´æ—©é€åŽæ— äººé€è‘¬ã€‚ è¿™ä¸¤ä¸ªäººåœ¨ç”Ÿå‰éƒ½æ˜¯æ™®æ™®é€šé€šï¼Œç»ä¸åƒè¿ˆå…‹å°”æ°å…‹é€Šé‚£æ ·å®¶å–»æˆ·æ™“ï¼Œèº«å‰èº«åŽéƒ½ç²‰ä¸æ— æ•°ã€‚ä»–ä»¬çš„å¹³å¸¸å·¥ä½œï¼Œä¸Žæˆ‘ä»¬ç¨‹åºå‘˜ä¸€æ ·ï¼Œä¸è¿‡æˆ‘ä»¬å†™ä»£ç ï¼Œä»–ä»¬å†™ä¹è°±ã€‚ æˆ‘æƒ³ï¼Œå·´èµ«å’ŒèŽ«æ‰Žç‰¹ï¼Œåœ¨å®‰å®‰é™é™çš„è°±å†™ä¸€é¦–åˆä¸€é¦–æ›²ç›®çš„æ—¶å€™ï¼Œä»Žæ¥æ²¡æœ‰è€ƒè™‘è¿‡ï¼Œä»–ä»¬ä»¥åŽä¼šæˆä¸ºè¥¿æ–¹éŸ³ä¹çš„ä»£åè¯ã€‚ æˆ‘ä»¬ç¨‹åºå‘˜ä¹Ÿä¸€æ ·ï¼Œä¹Ÿè®¸åœ¨ä»–äººçœ‹æ¥æˆ‘ä»¬åªæ˜¯èžºä¸é’‰ã€‚ä½†æ˜¯æˆ‘ä»¬æ•²ä¸‹æ¥çš„æ¯ä¸€è¡Œä»£ç ï¼Œä¹Ÿè®¸éƒ½å°†ç¼”é€ ä¸å‡¡ã€‚ å²ä¸Šæœ€ä¼Ÿå¤§çš„å¥³ç¨‹åºå‘˜çŽ›æ ¼ä¸½ç‰¹Â·æ±‰å¯†å°”é¡¿åœ¨ä¸º NASA å†™ä»£ç çš„æ—¶å€™ï¼Œå¥¹è´Ÿè´£çš„é¡¹ç›®åªæ˜¯ä¸ºäº†åº”å¯¹ä¸‡åˆ†ä¹‹ä¸€çš„æ„å¤–äº‹ä»¶ï¼Œè€Œå¥¹ä»ç„¶å…¢å…¢ä¸šä¸šåœ°å®Œæˆäº†å·¥ä½œã€‚æœ€åŽï¼Œå¥¹çš„ç¨‹åºçœŸçš„å‘æŒ¥äº†ä½œç”¨ï¼Œæ‹¯æ•‘äº†é˜¿æ³¢ç½—è®¡åˆ’ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬ç¨‹åºå‘˜ä¸€å®šè¦åŠŸæˆåå°±å—ï¼Ÿä¸€å®šè¦è£è€€æ˜¾è¾¾å—ï¼Ÿè¿™æ‰ç®—æ˜¯ä¸å¹³å‡¡æ‰æ˜¯å¹¸ç¦å—ï¼Ÿè™½ç„¶å†™ä»£ç ç¡®å®žèµšé’±ï¼Œä½†å¦‚æžœå¤šå¹´åŽé€€ä¼‘çš„æˆ‘å›žåˆ°å…¬å¸ï¼Œå‘çŽ°å¹´è½»æ—¶å€™æˆ‘å†™çš„ä»£ç æˆ–è€…åº“ä¾ç„¶åœ¨è¢«å¹¿æ³›çš„ä½¿ç”¨ï¼Œæˆ‘ä¼šç”±è¡·çš„æ¬£æ…°ã€‚ ä½œä¸ºä¸€åå¹´è½»çš„ç¨‹åºå‘˜ï¼Œæˆ‘è¿˜æƒ³åšå‡ºä¸€äº›å¾ˆé…·çš„äº§å“ï¼›è¿˜æƒ³åœ¨ Github ä¸Šå¼€æºä¸€äº›ç¨‹åºä¾›å¤§å®¶å‚è€ƒæˆ–è€…ä½¿ç”¨ï¼›æˆ‘è¿˜æƒ³å†å†™å‡ºä¸€æ®µæ®µä»£ç ï¼Œè®©å¾ˆå¤šäººçš„ä½“éªŒå› ä¸ºæˆ‘çš„å·¥ä½œè€Œä¸åŒã€‚ æŽå¼€å¤è€å¸ˆå‰æ®µæ—¶é—´åœ¨å“¥å¤§æ¼”è®²ã€‚çœ‹ç€ä»–æ€ç»´æ´»è·ƒï¼Œè·Ÿæ¯•ä¸šç”Ÿä»¬ç•…è°ˆäººå·¥æ™ºèƒ½ï¼Œæˆ‘ä¾ç„¶è§‰å¾—ä»–æ˜¯ä¸€ä½å¾ˆé…·çš„ç¨‹åºå‘˜ã€‚ä¹Ÿè®¸è¿™å°±æ˜¯ç¨‹åºå‘˜è¿™ä»½å·¥ä½œæ„ä¹‰çš„æ‰€åœ¨ï¼šæ•°åå¹´ä¹‹åŽï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥é€šè¿‡æŠ€æœ¯ç´§è·Ÿå¹´è½»äººçš„ä¸–ç•Œï¼Œè€Œå¹´è½»äººä¾ç„¶è§‰å¾—æˆ‘ä»¬æ˜¯ä¸€ç¾¤å¾ˆé…·çš„æžå®¢ã€‚ æœ¬æ–‡æ˜¯æ•…èƒ¤é“é•¿ã€Šç¡…è°·é—®é“ã€‹ä¸“æ çš„å‘åˆŠè¯ï¼Œã€Šç¡…è°·é—®é“ã€‹æ ¸å¿ƒå†…å®¹æ˜¯å¯¹ç¾Žå›½æœ€æ–° iOS äº§å“ä»‹ç»çš„å’Œåˆ†æžï¼›ç¡…è°·å…¬å¸å…ˆè¿›çš„ç®¡ç†æ–¹æ³•å’ŒèŒåœºä¹‹é“ï¼›ç§‘æŠ€è®ºå›å’Œå¤§ä¼šå¦‚ WWDCï¼ŒFacebook F8ï¼ŒGoogle IOçš„æ·±åº¦å›žé¡¾ï¼›Facebookï¼ŒGoogleï¼ŒAmazonï¼ŒAppleç­‰ç¾Žå›½ä¸€æµäº’è”ç½‘å…¬å¸çš„ç§‘æŠ€åŠ¨æ€ã€‚]]></content>
      <tags>
        <tag>Inspire</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[TensorFlow_Cifar_10]]></title>
    <url>%2F2017%2F07%2F15%2FTensorFlow_Cifar10%E6%B5%8B%E8%AF%95%E6%95%99%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[The examples of image recognition with the dataset CIFAR10 via tensorflow.1 CIFAR-10 æ•°æ®é›†CIFAR-10æ•°æ®é›†æ˜¯æœºå™¨å­¦ä¹ ä¸­çš„ä¸€ä¸ªé€šç”¨çš„ç”¨äºŽå›¾åƒè¯†åˆ«çš„åŸºç¡€æ•°æ®é›†ï¼Œå®˜ç½‘é“¾æŽ¥ä¸ºï¼šThe CIFAR-10 dataset cifar10 ä¸‹è½½ä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯ï¼š version å°†å…¶è§£åŽ‹åŽï¼ˆä»£ç ä¸­åŒ…å«è‡ªåŠ¨è§£åŽ‹ä»£ç ï¼‰ï¼Œå†…å®¹ä¸ºï¼š cifar10 data2 2 æµ‹è¯•ä»£ç æµ‹è¯•ä»£ç å…¬å¸ƒåœ¨GitHubï¼šEdwardZhang ä¸»è¦ä»£ç åŠä½œç”¨ï¼š æ–‡ä»¶ ä½œç”¨ cifar10_input.py è¯»å–æœ¬åœ°æˆ–è€…åœ¨çº¿ä¸‹è½½CIFAR-10çš„äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼æ•°æ®é›† cifar10.py å»ºç«‹CIFAR-10çš„æ¨¡åž‹ cifar10_train.py åœ¨CPUæˆ–GPUä¸Šè®­ç»ƒCIFAR-10çš„æ¨¡åž‹ cifar10_multi_gpu_train.py åœ¨å¤šä¸ªGPUä¸Šè®­ç»ƒCIFAR-10çš„æ¨¡åž‹ cifar10_eval.py è¯„ä¼°CIFAR-10æ¨¡åž‹çš„é¢„æµ‹æ€§èƒ½ $ $ è¯¥éƒ¨åˆ†çš„ä»£ç ï¼Œä»‹ç»äº†å¦‚ä½•ä½¿ç”¨TensorFlowåœ¨CPUå’ŒGPUä¸Šè®­ç»ƒå’Œè¯„ä¼°å·ç§¯ç¥žç»ç½‘ç»œï¼ˆconvolutional neural network, CNNï¼‰ã€‚ ###3 ç›¸å…³ç½‘é¡µåŠæ•™ç¨‹æ›´åŠ è¯¦ç»†åœ°ä»‹ç»è¯´æ˜Žï¼Œè¯·æµè§ˆç½‘é¡µï¼šConvolutional Neural Networks ä¸­æ–‡ç½‘ç«™æžå®¢å­¦é™¢ä¹Ÿæœ‰è¯¥éƒ¨åˆ†çš„æ±‰è¯‘ç‰ˆï¼šå·ç§¯ç¥žç»ç½‘ç»œ ä»£ç æºè‡ªtensorflowå®˜ç½‘ï¼štensorflow/models/image/cifar10 4 ä»£ç ä¿®æ”¹è¯´æ˜ŽGitHubå…¬å¸ƒä»£ç ç›¸å¯¹æºç ï¼Œä¸»è¦è¿›è¡Œäº†ä»¥ä¸‹ä¿®æ­£ï¼š cifar10.py 12345#indices = tf.reshape(tf.range(FLAGS.batch_size), [FLAGS.batch_size, 1])indices = tf.reshape(range(FLAGS.batch_size), [FLAGS.batch_size, 1])# orindices = tf.reshape(tf.range(0, FLAGS.batch_size, 1), [FLAGS.batch_size, 1]) æ­¤å¤„ï¼Œæºç ç¼–è¯‘æ—¶ä¼šå‡ºçŽ°ä»¥ä¸‹é”™è¯¯ï¼š 1234 ... File ".../cifar10.py", line 271, in loss indices = tf.reshape(tf.range(FLAGS.batch_size), [FLAGS.batch_size, 1])TypeError: range() takes at least 2 arguments (1 given) cifar10_input_test.py 123456#self.assertEqual("%s:%d" % (filename, i), tf.compat.as_text(key))import compat as cp...self.assertEqual("%s:%d" % (filename, i), cp.as_text(key)) ä¸ç„¶çš„è¯ï¼Œæˆ‘æµ‹è¯•çš„æ—¶å€™å°±ä¼šå‡ºçŽ°è¿™çš„é”™è¯¯ï¼š 1AttributeError: 'module' object has no attribute 'compat' cifar10_train.pyå’Œcifar10_multi_gpu_train.py æºä»£ç é‡Œçš„æœ€å¤§è¿­ä»£æ¬¡æ•°max_stepsä¸º1000000ï¼Œå¦‚ä½¿ç”¨CPUè®­ç»ƒéœ€è¦å¥½å‡ ä¸ªå°æ—¶ï¼ŒæŽ¨èå¤§å®¶ä½¿ç”¨GPUè®­ç»ƒï¼ŒGPUè®­ç»ƒçŽ¯å¢ƒå®‰è£…æ•™ç¨‹ã€‚]]></content>
      <tags>
        <tag>TensorFlow</tag>
        <tag>Cifar-10</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[DeepLearning æ€’å‘æ•™ç¨‹ï¼ï¼ï¼Ubuntu16.04ç³»ç»Ÿæ­å»ºTensorFlowGPU]]></title>
    <url>%2F2017%2F06%2F30%2FDeepLearning%20%20%20%E6%80%92%E5%8F%91%E6%95%99%E7%A8%8B%EF%BC%81%EF%BC%81%EF%BC%81Ubuntu16.04%E7%B3%BB%E7%BB%9F%E6%90%AD%E5%BB%BATensorFlowGPU%2F</url>
    <content type="text"><![CDATA[â€‹å¤§æ¦‚åœ¨ä¸€ä¸ªæœˆå‰å¼€å§‹æŽ¥è§¦æ¨¡å¼è¯†åˆ«ã€äººå·¥ç¥žç»ç½‘ç»œã€å›¾åƒè¯†åˆ«æ–¹å‘ã€‚ ä»ŽMatlabå¼€å§‹ä¸€è¾¹ç†è§£ç¥žç»ç½‘ç»œå±‚ä¸€è¾¹çœ‹ä»£ç è·‘äº†æœ€åŸºç¡€çš„MNISTè¯†åˆ«æ‰‹å†™æ•°å­—çš„ä»£ç ï¼Œä¸­é—´é‡åˆ°äº†å¾ˆå¤šé—®é¢˜ï¼Œæ¯”å¦‚è¯´åœ¨å›¾åƒå¤„ç†æ–¹é¢CPUè¿œä¸åŠGPUå¼ºè€Œåœ¨IOè¯»å†™ä¸ŠCPUåˆå¾ˆå ä¼˜åŠ¿ã€‚å½“æˆ‘åœ¨è¿›ä¸€æ­¥å­¦ä¹ å·ç§¯ç¥žç»ç½‘ç»œçš„è¿‡ç¨‹ä¸­å‘çŽ°äº†Matlabçš„å¼ºå¤§å’Œä¸è¶³ã€‚åœ¨ä¸¤å¹´å‰Googleçˆ¸çˆ¸å‡ºå“äº†TensorFlowè¿™ä¸€æ·±åº¦å­¦ä¹ å¼€æºæ¡†æž¶ã€‚åŽ†ç»2å¤©1å¤œ13æ¬¡é‡è£…ç³»ç»Ÿã€‚ã€‚ã€‚æ‰€ä»¥ä¸ºä»€ä¹ˆè¦æ€’å‘æ•™ç¨‹ï¼Œä½ æ‡‚çš„ã€‚è¯ä¸å¤šè¯´ç›´æŽ¥å¼€é…ï¼ requirements Ubuntu-16.04 python-2.7 cuda-8 cuDNN-5.1 tensorflow GPU ç‰ˆæœ¬ å®‰è£…nvidia driver ç»è¿‡ä¸æ–­è¸©å‘çš„å®‰è£…ï¼Œç»ˆäºŽgoogleåˆ°äº†é è°±çš„æ–¹æ³•ï¼Œé¦–å…ˆæ£€æŸ¥ä½ çš„NVIDIA VGA card model Ctrl+Alt+T æ‰“å¼€ç»ˆç«¯ è¾“å…¥ï¼š 1sudo lshw -numeric -C display å¯ä»¥çœ‹åˆ°ä½ çš„æ˜¾å¡ä¿¡æ¯ï¼Œæ¯”å¦‚æˆ‘çš„å°±æ˜¯ product: GM107M [GeForce GTX 960M] [10DE:139B] æ‰¾åˆ° ç³»ç»Ÿè®¾ç½®-&gt;è½¯ä»¶æ›´æ–°-&gt;é™„åŠ é©±åŠ¨ æŸ¥çœ‹å’Œä¸Šé¢GPUåž‹å·ç›¸å¯¹åº”çš„æ˜¾å¡ é€‰æ‹©æœ€æ–°çš„æ˜¾å¡é©±åŠ¨å¹¶ç‚¹å‡»åº”ç”¨æ›´æ”¹ ç„¶åŽå–æ¯å’–å•¡é™å€™åº”ç”¨æ›´æ”¹å®Œæˆ è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š 1sudo apt-get install mesa-common-devsudo apt-get install freeglut3-dev å®‰è£…å®Œæˆä¹‹åŽï¼Œé‡å¯ç”µè„‘ï¼Œé©±åŠ¨åº”è¯¥å°±å®Œæˆäº†ï¼ ä½ å¯ä»¥åœ¨dashboardä¸Šæœç´¢nvidia çœ‹åˆ°åƒ NVIDIA X Server Settingsçš„ä¸œè¥¿ å°±è¯´æ˜Žå®‰è£…é©±åŠ¨æˆåŠŸäº† æŽ¥ä¸‹æ¥å°±è¯¥å®‰è£…cuda8 å®‰è£…cuda8é¦–å…ˆä¹Ÿæ˜¯åŽ»ä¸‹è½½cuda toolkit 8.0 è€é“ï¼çœ‹æˆ‘çš„æ•™ç¨‹å°±æŒ‰æˆ‘çš„æ¥ï¼ç…§ç€å›¾å¥½å¥½é€‰ï¼ ä¸€å®šè¦é€‰æ‹©runfile.ä¸‹è½½å®Œæˆä¹‹åŽï¼Œæ‰§è¡Œ 1sudo sh cuda_8.0.44_linux.run ç„¶åŽå°±è¿›å…¥å®‰è£…è¿‡ç¨‹ å¼€å§‹éƒ½æ˜¯End User License Agreement ä½ å¯ä»¥CTRL +C è·³è¿‡ ç„¶åŽacceptï¼Œä¸‹é¢å°±æ˜¯å®‰è£…çš„äº¤äº’ç•Œé¢ å¼€å§‹çš„Install NVIDIA Accelerated Graphics Driver for Linux-x86_64 375.66? é€‰æ‹©nï¼Œå› ä¸ºä½ å·²ç»å®‰è£…é©±åŠ¨äº†ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869Using more to view the EULA.End User License AgreementPrefaceThe following contains specific license terms and conditionsfor four separate NVIDIA products. By accepting thisagreement, you agree to comply with all the terms andconditions applicable to the specific product(s) includedherein.NVIDIA CUDA ToolkitDescriptionThe NVIDIA CUDA Toolkit provides command-line and graphicaltools for building, debugging and optimizing the performanceof applications accelerated by NVIDIA GPUs, runtime and mathlibraries, and documentation including programming guides,user manuals, and API references. The NVIDIA CUDA ToolkitLicense Agreement is available in Chapter 1.Default Install Location of CUDA ToolkitWindows platform:Do you accept the previously read EULA?accept/decline/quit: acceptInstall NVIDIA Accelerated Graphics Driver for Linux-x86_64 367.48?(y)es/(n)o/(q)uit: nInstall the CUDA 8.0 Toolkit?(y)es/(n)o/(q)uit: yEnter Toolkit Location [ default is /usr/local/cuda-8.0 ]: Do you want to install a symbolic link at /usr/local/cuda?(y)es/(n)o/(q)uit: yInstall the CUDA 8.0 Samples?(y)es/(n)o/(q)uit: y Enter CUDA Samples Location [ default is /home/kinny ]: Installing the CUDA Toolkit in /usr/local/cuda-8.0 ...Missing recommended library: libXmu.soInstalling the CUDA Samples in /home/kinny ...Copying samples to /home/kinny/NVIDIA_CUDA-8.0_Samples now...Finished copying samples.============ Summary ============Driver: Not SelectedToolkit: Installed in /usr/local/cuda-8.0Samples: Installed in /home/kinny, but missing recommended librariesPlease make sure that - PATH includes /usr/local/cuda-8.0/bin - LD_LIBRARY_PATH includes /usr/local/cuda-8.0/lib64, or, add /usr/local/cuda-8.0/lib64 to /etc/ld.so.conf and run ldconfig as rootTo uninstall the CUDA Toolkit, run the uninstall script in /usr/local/cuda-8.0/binPlease see CUDA_Installation_Guide_Linux.pdf in /usr/local/cuda-8.0/doc/pdf for detailed information on setting up CUDA.***WARNING: Incomplete installation! This installation did not install the CUDA Driver. A driver of version at least 361.00 is required for CUDA 8.0 functionality to work.To install the driver using this installer, run the following command, replacing &lt;CudaInstaller&gt; with the name of this run file: sudo &lt;CudaInstaller&gt;.run -silent -driverLogfile is /tmp/cuda_install_17494.log é…ç½®cudaçŽ¯å¢ƒå˜é‡1export PATH=&quot;$PATH:/usr/local/cuda-8.0/bin&quot;export LD_LIBRARY_PATH=&quot;/usr/local/cuda-8.0/lib64&quot;nvidia-smi ç»“æžœå‡ºçŽ°ä»¥ä¸‹è¾“å‡ºï¼Œè¯´æ˜Žé…ç½®æˆåŠŸ å®‰è£…æ·±åº¦å­¦ä¹ åº“cuDNN-v5.1é¦–å…ˆä¸‹è½½cuDNN5.1ï¼Œç›´æŽ¥ä¸‹è½½ï¼Œæ³¨æ„å‰ææ˜¯ä½ å·²ç»æ³¨å†Œä¸ºå¼€å‘è€…äº†ï¼ è§£åŽ‹ï¼š 1tar xvzf cudnn-8.0-linux-x64-v5.1.tgz ç„¶åŽå°†åº“å¤´æ–‡ä»¶Copyåˆ°cudaç›®å½• 123sudo cp cuda/include/cudnn.h /usr/local/cuda/includesudo cp cuda/lib64/libcudnn* /usr/local/cuda/lib64sudo chmod a+r /usr/local/cuda/include/cudnn.h /usr/local/cuda/lib64/libcudnn* å®‰è£…tensorflow gpu enable python 2.7 ç‰ˆæœ¬ï¼Œè¯¦è§å®˜ç½‘123456789101112131415export TF_BINARY_URL=https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.11.0-cp27-none-linux_x86_64.whlsudo pip install --upgrade $TF_BINARY_URLéªŒè¯$python Python 2.7.12 (default, Jul 1 2016, 15:12:24) [GCC 5.4.0 20160609] on linux2Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.&gt;&gt;&gt; import tensorflowI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcublas.so locallyI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcudnn.so locallyI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcufft.so locallyI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcuda.so.1 locallyI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcurand.so locally&gt;&gt;&gt; quit()å¤§åŠŸå‘Šæˆï¼ å…¨éƒ¨ç»“æŸ è°¢è°¢è§‚çœ‹ï¼ çŽ°åœ¨å°±å¯ä»¥æ”¾å¿ƒçš„å¼€å§‹ä½ çš„æ·±åº¦å­¦ä¹ ä¹‹è·¯äº† ä¸è¦è§‰å¾—å¥½å®¹æ˜“ã€‚ã€‚ã€‚éƒ½æ˜¯å‡ åéè¡€çš„æ•™è®­æˆå°±çš„ï¼ ä¹‹åŽæˆ‘ä¼šç»§ç»­æ›´æ–°ä¸ªäººå…¬ä¼—å·ï¼Œå‘å¸ƒä¸€äº›è‡ªå·±åœ¨æ·±åº¦å­¦ä¹ æ–¹é¢çš„è§é—»ã€‚ CreatedbyEdwardZhangâˆ£ä¸€ä¸ªä¸åªåšæŠ€æœ¯çš„å…¬ä¼—å· é•¿æŒ‰ï¼Œè¯†åˆ«äºŒç»´ç ï¼ŒåŠ å…³æ³¨ 0.gif]]></content>
      <tags>
        <tag>DeepLearning</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android Chapter III. Androidå››å¤§ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ]]></title>
    <url>%2F2017%2F06%2F11%2FAndroid%20Chapter%20III.%20%20%20Android%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%2F</url>
    <content type="text"><![CDATA[â€‹Hello everybody,ä¸Šä¸€æ¬¡æˆ‘ä»¬è®²å®Œäº†Androidå››å¤§ç»„ä»¶é‚£ä¹ˆä¼´éšå››å¤§ç»„ä»¶å¿…ä¸å¯å°‘çš„å°±æ˜¯ä»–ä»¬çš„ç”Ÿå‘½å‘¨æœŸäº†ï¼Œé‚£ä¹ˆä»Šå¤©æˆ‘ä»¬å°±å†å¨å¨ç”Ÿå‘½å‘¨æœŸçš„ä¸‰ä¸¤äº‹å§ã€‚ ä»‹ç»ç”Ÿå‘½å‘¨æœŸä¹‹å‰ï¼Œå…ˆæä¸€ä¸‹ä»»åŠ¡çš„æ¦‚å¿µ ä»»åŠ¡å…¶å®žå°±æ˜¯activity çš„æ ˆå®ƒç”±ä¸€ä¸ªæˆ–å¤šä¸ªActivityç»„æˆçš„å…±åŒå®Œæˆä¸€ä¸ªå®Œæ•´çš„ç”¨æˆ·ä½“éªŒï¼Œ æ¢å¥è¯è¯´ä»»åŠ¡å°±æ˜¯â€ åº”ç”¨ç¨‹åºâ€ ï¼ˆå¯ä»¥æ˜¯ä¸€ä¸ªä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªï¼Œæ¯”å¦‚å‡è®¾ä½ æƒ³è®©ç”¨æˆ·çœ‹åˆ°æŸä¸ªåœ°æ–¹çš„è¡—é“åœ°å›¾ã€‚è€Œå·²ç»å­˜åœ¨ä¸€ä¸ªå…·æœ‰æ­¤åŠŸèƒ½çš„activity äº†ï¼Œé‚£ä¹ˆä½ çš„activity æ‰€éœ€è¦åšçš„å·¥ä½œå°±æ˜¯æŠŠè¯·æ±‚ä¿¡æ¯æ”¾åˆ°ä¸€ä¸ªIntent å¯¹è±¡é‡Œé¢ï¼Œå¹¶æŠŠå®ƒä¼ é€’ç»™startActivity()ã€‚äºŽæ˜¯åœ°å›¾æµè§ˆå™¨å°±ä¼šæ˜¾ç¤ºé‚£ä¸ªåœ°å›¾ã€‚è€Œå½“ç”¨æˆ·æŒ‰ä¸‹BACK é”®çš„æ—¶å€™ï¼Œä½ çš„activity åˆä¼šå†ä¸€æ¬¡çš„æ˜¾ç¤ºåœ¨å±å¹•ä¸Šï¼Œæ­¤æ—¶ä»»åŠ¡æ˜¯ç”±2ä¸ªåº”ç”¨ç¨‹åºä¸­çš„ç›¸å…³activityç»„æˆçš„ï¼‰æ ˆåº•çš„æ˜¯å¯åŠ¨æ•´ä¸ªä»»åŠ¡çš„Activityï¼Œæ ˆé¡¶çš„æ˜¯å½“å‰è¿è¡Œçš„ç”¨æˆ·å¯ä»¥äº¤äº’çš„Activityï¼Œå½“ä¸€ä¸ªactivity å¯åŠ¨å¦å¤–ä¸€ä¸ªçš„æ—¶å€™ï¼Œæ–°çš„activity å°±è¢«åŽ‹å…¥æ ˆï¼Œå¹¶æˆä¸ºå½“å‰è¿è¡Œçš„activityã€‚è€Œå‰ä¸€ä¸ªactivity ä»ä¿æŒåœ¨æ ˆä¹‹ä¸­ã€‚å½“ç”¨æˆ·æŒ‰ä¸‹BACK é”®çš„æ—¶å€™ï¼Œå½“å‰activity å‡ºæ ˆï¼Œè€Œå‰ä¸€ä¸ªæ¢å¤ä¸ºå½“å‰è¿è¡Œçš„activityã€‚æ ˆä¸­ä¿å­˜çš„å…¶å®žæ˜¯å¯¹è±¡ï¼Œæ ˆä¸­çš„Activity æ°¸è¿œä¸ä¼šé‡æŽ’ï¼Œåªä¼šåŽ‹å…¥æˆ–å¼¹å‡ºï¼Œæ‰€ä»¥å¦‚æžœå‘ç”Ÿäº†è¯¸å¦‚éœ€è¦å¤šä¸ªåœ°å›¾æµè§ˆå™¨çš„æƒ…å†µï¼Œå°±ä¼šä½¿å¾—ä¸€ä¸ªä»»åŠ¡ä¸­å‡ºçŽ°å¤šä¸ªåŒä¸€Activity å­ç±»çš„å®žä¾‹åŒæ—¶å­˜åœ¨ã€‚ ä»»åŠ¡ä¸­çš„æ‰€æœ‰activity æ˜¯ä½œä¸ºä¸€ä¸ªæ•´ä½“è¿›è¡Œç§»åŠ¨çš„ã€‚æ•´ä¸ªçš„ä»»åŠ¡ï¼ˆå³activity æ ˆï¼‰å¯ä»¥ç§»åˆ°å‰å°ï¼Œæˆ–é€€è‡³åŽå°ã€‚ä¸¾ä¸ªä¾‹å­è¯´ï¼Œæ¯”å¦‚å½“å‰ä»»åŠ¡åœ¨æ ˆä¸­å­˜æœ‰å››ä¸ªactivityâ”€â”€ä¸‰ä¸ªåœ¨å½“å‰activity ä¹‹ä¸‹ã€‚å½“ç”¨æˆ·æŒ‰ä¸‹HOME é”®çš„æ—¶å€™ï¼Œå›žåˆ°äº†åº”ç”¨ç¨‹åºåŠ è½½å™¨ï¼Œç„¶åŽé€‰æ‹©äº†ä¸€ä¸ªæ–°çš„åº”ç”¨ç¨‹åºï¼ˆä¹Ÿå°±æ˜¯ä¸€ä¸ªæ–°ä»»åŠ¡ï¼‰ã€‚åˆ™å½“å‰ä»»åŠ¡éå…¥åŽå°ï¼Œè€Œæ–°ä»»åŠ¡çš„æ ¹activity æ˜¾ç¤ºå‡ºæ¥ã€‚ç„¶åŽï¼Œè¿‡äº†ä¸€å°ä¼šå„¿ï¼Œç”¨æˆ·å†æ¬¡å›žåˆ°äº†åº”ç”¨ç¨‹åºåŠ è½½å™¨è€Œåˆé€‰æ‹©äº†å‰ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼ˆä¸Šä¸€ä¸ªä»»åŠ¡ï¼‰ã€‚äºŽæ˜¯é‚£ä¸ªä»»åŠ¡ï¼Œå¸¦ç€å®ƒæ ˆä¸­æ‰€æœ‰çš„å››ä¸ªactivityï¼Œå†ä¸€æ¬¡çš„åˆ°äº†å‰å°ã€‚å½“ç”¨æˆ·æŒ‰ä¸‹BACK é”®çš„æ—¶å€™ï¼Œå±å¹•ä¸ä¼šæ˜¾ç¤ºå‡ºç”¨æˆ·åˆšæ‰ç¦»å¼€çš„activityï¼ˆä¸Šä¸€ä¸ªä»»åŠ¡çš„æ ¹activityï¼‰ã€‚å–è€Œä»£ä¹‹ï¼Œå½“å‰ä»»åŠ¡çš„æ ˆä¸­æœ€ä¸Šé¢çš„activity è¢«å¼¹å‡ºï¼Œè€ŒåŒä¸€ä»»åŠ¡ä¸­çš„ä¸Šä¸€ä¸ªactivity æ˜¾ç¤ºäº†å‡ºæ¥ã€‚ Activityæ ˆï¼šå…ˆè¿›åŽå‡ºè§„åˆ™ Androidç³»ç»Ÿæ˜¯ä¸€ä¸ªå¤šä»»åŠ¡(Multi-Task)çš„æ“ä½œç³»ç»Ÿï¼Œå¯ä»¥åœ¨ç”¨æ‰‹æœºå¬éŸ³ä¹çš„åŒæ—¶ï¼Œä¹Ÿæ‰§è¡Œå…¶ä»–å¤šä¸ªç¨‹åºã€‚æ¯å¤šæ‰§è¡Œä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå°±ä¼šå¤šè€—è´¹ä¸€äº›ç³»ç»Ÿå†…å­˜ï¼Œå½“åŒæ—¶æ‰§è¡Œçš„ç¨‹åºè¿‡å¤šï¼Œæˆ–æ˜¯å…³é—­çš„ç¨‹åºæ²¡æœ‰æ­£ç¡®é‡Šæ”¾æŽ‰å†…å­˜ï¼Œç³»ç»Ÿå°±ä¼šè§‰å¾—è¶Šæ¥è¶Šæ…¢ï¼Œç”šè‡³ä¸ç¨³å®šã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ Android å¼•å…¥äº†ä¸€ä¸ªæ–°çš„æœºåˆ¶â€“ ç”Ÿå‘½å‘¨æœŸ(Life Cycle)ã€‚ Android åº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸæ˜¯ç”±Android æ¡†æž¶è¿›è¡Œç®¡ç†ï¼Œè€Œä¸æ˜¯ç”±åº”ç”¨ç¨‹åºç›´æŽ¥æŽ§ åˆ¶ã€‚é€šå¸¸ï¼Œæ¯ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼ˆå…¥å£ä¸€èˆ¬ä¼šæ˜¯ä¸€ä¸ªActivity çš„onCreate æ–¹æ³•ï¼‰ï¼Œéƒ½ä¼šäº§ç”Ÿ ä¸€ä¸ªè¿›ç¨‹(Process)ã€‚å½“ç³»ç»Ÿå†…å­˜å³å°†ä¸è¶³çš„æ—¶å€™ï¼Œä¼šä¾ç…§ä¼˜å…ˆçº§è‡ªåŠ¨è¿›è¡Œè¿›ç¨‹(process)çš„å›žæ”¶ã€‚ä¸ç®¡æ˜¯ä½¿ç”¨è€…æˆ–å¼€å‘è€…ï¼Œ éƒ½æ— æ³•ç¡®å®šçš„åº”ç”¨ç¨‹åºä½•æ—¶ä¼šè¢«å›žæ”¶ã€‚æ‰€ä»¥ä¸ºäº†å¾ˆå¥½çš„é˜²æ­¢æ•°æ®ä¸¢å¤±å’Œå…¶ä»–é—®é¢˜ï¼Œäº†è§£ç”Ÿå‘½å‘¨æœŸå¾ˆé‡è¦ã€‚ Activityç”Ÿå‘½å‘¨æœŸï¼š å›¾3.1activityç”Ÿå‘½å‘¨æœŸå›¾ Activityæ•´ä¸ªç”Ÿå‘½å‘¨æœŸçš„4ç§çŠ¶æ€ã€7ä¸ªé‡è¦æ–¹æ³•å’Œ3ä¸ªåµŒå¥—å¾ªçŽ¯ 1&gt; å››ç§çŠ¶æ€ æ´»åŠ¨ï¼ˆActive/Runningï¼‰çŠ¶æ€ å½“Activityè¿è¡Œåœ¨å±å¹•å‰å°(å¤„äºŽå½“å‰ä»»åŠ¡æ´»åŠ¨æ ˆçš„æœ€ä¸Šé¢),æ­¤æ—¶å®ƒèŽ·å–äº†ç„¦ç‚¹èƒ½å“åº”ç”¨æˆ·çš„æ“ä½œ,å±žäºŽè¿è¡ŒçŠ¶æ€ï¼ŒåŒä¸€ä¸ªæ—¶åˆ»åªä¼šæœ‰ä¸€ä¸ªActivity å¤„äºŽæ´»åŠ¨(Active)æˆ–è¿è¡Œ (Running)çŠ¶æ€ æš‚åœ(Paused)çŠ¶æ€ å½“Activityå¤±åŽ»ç„¦ç‚¹ä½†ä»å¯¹ç”¨æˆ·å¯è§(å¦‚åœ¨å®ƒä¹‹ä¸Šæœ‰å¦ä¸€ä¸ªé€æ˜Žçš„Activityæˆ–Toastã€AlertDialogç­‰å¼¹å‡ºçª—å£æ—¶)å®ƒå¤„äºŽæš‚åœçŠ¶æ€ã€‚æš‚åœçš„Activityä»ç„¶æ˜¯å­˜æ´»çŠ¶æ€(å®ƒä¿ç•™ç€æ‰€æœ‰çš„çŠ¶æ€å’Œæˆå‘˜ä¿¡æ¯å¹¶ä¿æŒå’Œçª—å£ç®¡ç†å™¨çš„è¿žæŽ¥),ä½†æ˜¯å½“ç³»ç»Ÿå†…å­˜æžå°æ—¶å¯ä»¥è¢«ç³»ç»Ÿæ€æŽ‰ åœæ­¢(Stopped)çŠ¶æ€ å®Œå…¨è¢«å¦ä¸€ä¸ªActivityé®æŒ¡æ—¶å¤„äºŽåœæ­¢çŠ¶æ€,å®ƒä»ç„¶ä¿ç•™ç€æ‰€æœ‰çš„çŠ¶æ€å’Œæˆå‘˜ä¿¡æ¯ã€‚åªæ˜¯å¯¹ç”¨æˆ·ä¸å¯è§,å½“å…¶ä»–åœ°æ–¹éœ€è¦å†…å­˜æ—¶å®ƒå¾€å¾€è¢«ç³»ç»Ÿæ€æŽ‰ éžæ´»åŠ¨ï¼ˆDeadï¼‰çŠ¶æ€ Activity å°šæœªè¢«å¯åŠ¨ã€å·²ç»è¢«æ‰‹åŠ¨ç»ˆæ­¢ï¼Œæˆ–å·²ç»è¢«ç³»ç»Ÿå›žæ”¶æ—¶å¤„äºŽéžæ´»åŠ¨çš„çŠ¶æ€ï¼Œè¦æ‰‹åŠ¨ç»ˆæ­¢Activityï¼Œå¯ä»¥åœ¨ç¨‹åºä¸­è°ƒç”¨â€finishâ€æ–¹æ³•ã€‚ å¦‚æžœæ˜¯ï¼ˆæŒ‰æ ¹æ®å†…å­˜ä¸è¶³æ—¶çš„å›žæ”¶è§„åˆ™ï¼‰è¢«ç³»ç»Ÿå›žæ”¶ï¼Œå¯èƒ½æ˜¯å› ä¸ºå†…å­˜ä¸è¶³äº† å†…å­˜ä¸è¶³æ—¶ï¼ŒDalvak è™šæ‹Ÿæœºä¼šæ ¹æ®å…¶å†…å­˜å›žæ”¶è§„åˆ™æ¥å›žæ”¶å†…å­˜ï¼š 1. å…ˆå›žæ”¶ä¸Žå…¶ä»–Activity æˆ–Service/Intent Receiver æ— å…³çš„è¿›ç¨‹(å³ä¼˜å…ˆå›žæ”¶ç‹¬ç«‹çš„Activity)å› æ­¤å»ºè®®,æˆ‘ä»¬çš„ä¸€äº›(è€—æ—¶)åŽå°æ“ä½œï¼Œæœ€å¥½æ˜¯ä½œæˆServiceçš„å½¢å¼ 2.ä¸å¯è§(å¤„äºŽStoppedçŠ¶æ€çš„)Activity 3.Serviceè¿›ç¨‹(é™¤éžçœŸçš„æ²¡æœ‰å†…å­˜å¯ç”¨æ—¶ä¼šè¢«é”€æ¯) 4.éžæ´»åŠ¨çš„å¯è§çš„(PausedçŠ¶æ€çš„)Activity 5.å½“å‰æ­£åœ¨è¿è¡Œï¼ˆActive/RunningçŠ¶æ€çš„ï¼‰Activity 2&gt; 7ä¸ªé‡è¦æ–¹æ³•,å½“Activityä»Žä¸€ç§çŠ¶æ€è¿›å…¥å¦ä¸€çŠ¶æ€æ—¶ç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨ä¸‹é¢ç›¸åº”çš„æ–¹ æ³•æ¥é€šçŸ¥ç”¨æˆ·è¿™ç§å˜åŒ– å½“Activityç¬¬ä¸€æ¬¡è¢«å®žä¾‹åŒ–çš„æ—¶å€™ç³»ç»Ÿä¼šè°ƒç”¨, æ•´ä¸ªç”Ÿå‘½å‘¨æœŸåªè°ƒç”¨1æ¬¡è¿™ä¸ªæ–¹æ³• é€šå¸¸ç”¨äºŽåˆå§‹åŒ–è®¾ç½®: 1ã€ä¸ºActivityè®¾ç½®æ‰€è¦ä½¿ç”¨çš„å¸ƒå±€æ–‡ä»¶2ã€ä¸ºæŒ‰é’®ç»‘å®šç›‘å¬å™¨ç­‰é™æ€çš„è®¾ç½®æ“ä½œ onCreate(Bundle savedInstanceState); å½“Activityå¯è§æœªèŽ·å¾—ç”¨æˆ·ç„¦ç‚¹ä¸èƒ½äº¤äº’æ—¶ç³»ç»Ÿä¼šè°ƒç”¨ onStart(); å½“Activityå·²ç»åœæ­¢ç„¶åŽé‡æ–°è¢«å¯åŠ¨æ—¶ç³»ç»Ÿä¼šè°ƒç”¨ onRestart(); å½“Activityå¯è§ä¸”èŽ·å¾—ç”¨æˆ·ç„¦ç‚¹èƒ½äº¤äº’æ—¶ç³»ç»Ÿä¼šè°ƒç”¨ onResume(); å½“ç³»ç»Ÿå¯åŠ¨å¦å¤–ä¸€ä¸ªæ–°çš„Activityæ—¶,åœ¨æ–°Activityå¯åŠ¨ä¹‹å‰è¢«ç³»ç»Ÿè°ƒç”¨ä¿å­˜çŽ°æœ‰çš„Activityä¸­çš„æŒä¹…æ•°æ®ã€åœæ­¢åŠ¨ç”»ç­‰,è¿™ä¸ªå®žçŽ°æ–¹æ³•å¿…é¡»éžå¸¸å¿«ã€‚å½“ç³»ç»Ÿè€Œä¸æ˜¯ç”¨æˆ·è‡ªå·±å‡ºäºŽå›žæ”¶å†…å­˜æ—¶ï¼Œå…³é—­äº†activity ä¹‹åŽã€‚ç”¨æˆ·ä¼šæœŸæœ›å½“ä»–å†æ¬¡å›žåˆ°è¿™ä¸ªactivity çš„æ—¶å€™ï¼Œå®ƒä»ä¿æŒç€ä¸Šæ¬¡ç¦»å¼€æ—¶çš„æ ·å­ã€‚æ­¤æ—¶ç”¨åˆ°äº†onSaveInstanceState()ï¼Œæ–¹æ³•onSaveInstanceState()ç”¨æ¥ä¿å­˜Activityè¢«æ€ä¹‹å‰çš„çŠ¶æ€,åœ¨onPause()ä¹‹å‰è¢«è§¦å‘,å½“ç³»ç»Ÿä¸ºäº†èŠ‚çœå†…å­˜é”€æ¯äº†Activity(ç”¨æˆ·æœ¬ä¸æƒ³é”€æ¯)æ—¶å°±éœ€è¦é‡å†™è¿™ä¸ªæ–¹æ³•äº†,å½“æ­¤Activityå†æ¬¡è¢«å®žä¾‹åŒ–æ—¶ä¼šé€šè¿‡onCreate(Bundle savedInstanceState)å°†å·²ç»ä¿å­˜çš„ä¸´æ—¶çŠ¶æ€æ•°æ®ä¼ å…¥å› ä¸ºonSaveInstanceState()æ–¹æ³•ä¸æ€»æ˜¯è¢«è°ƒç”¨,è§¦å‘æ¡ä»¶ä¸º(æŒ‰ä¸‹HOMEé”®,æŒ‰ä¸‹ç”µæºæŒ‰é”®å…³é—­å±å¹•,æ¨ªç«–å±åˆ‡æ¢æƒ…å†µä¸‹),ä½ åº”è¯¥ä»…é‡å†™onSaveInstanceState()æ¥è®°å½•activityçš„ä¸´æ—¶çŠ¶æ€ï¼Œè€Œä¸æ˜¯æŒä¹…çš„æ•°æ®ã€‚åº”è¯¥ä½¿ç”¨onPause()æ¥å­˜å‚¨æŒä¹…æ•°æ®ã€‚ onPause(); å½“Activityè¢«æ–°çš„Activityå®Œå…¨è¦†ç›–ä¸å¯è§æ—¶è¢«ç³»ç»Ÿè°ƒç”¨ onStop(); å½“Activity(ç”¨æˆ·è°ƒç”¨finish()æˆ–ç³»ç»Ÿç”±äºŽå†…å­˜ä¸è¶³)è¢«ç³»ç»Ÿé”€æ¯æ€æŽ‰æ—¶ç³»ç»Ÿè°ƒç”¨,ï¼ˆæ•´ä¸ªç”Ÿå‘½å‘¨æœŸåªè°ƒç”¨1æ¬¡ï¼‰ç”¨æ¥é‡Šæ”¾onCreate ()æ–¹æ³•ä¸­åˆ›å»ºçš„èµ„æº,å¦‚ç»“æŸçº¿ç¨‹ç­‰ onDestroy(); 3&gt; 3ä¸ªåµŒå¥—å¾ªçŽ¯ 1.Activityå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸ:ä»Žç¬¬ä¸€æ¬¡è°ƒç”¨onCreate()å¼€å§‹ç›´åˆ°è°ƒç”¨onDestroy()ç»“æŸ 2.Activityçš„å¯è§†ç”Ÿå‘½å‘¨æœŸ:ä»Žè°ƒç”¨onStart()åˆ°ç›¸åº”çš„è°ƒç”¨onStop() åœ¨è¿™ä¸¤ä¸ªæ–¹æ³•ä¹‹é—´,å¯ä»¥ä¿æŒæ˜¾ç¤ºActivityæ‰€éœ€è¦çš„èµ„æºã€‚å¦‚åœ¨onStart()ä¸­æ³¨å†Œä¸€ä¸ªå¹¿æ’­æŽ¥æ”¶è€…ç›‘å¬å½±å“ä½ çš„UIçš„æ”¹å˜,åœ¨onStop() ä¸­æ³¨é”€ã€‚ 3.Activityçš„å‰å°ç”Ÿå‘½å‘¨æœŸ:ä»Žè°ƒç”¨onResume()åˆ°ç›¸åº”çš„è°ƒç”¨onPause()ã€‚ ä¸¾ä¾‹è¯´æ˜Ž: ä¾‹1ï¼šæœ‰3ä¸ªAcitivity,åˆ†åˆ«ç”¨One,Two(é€æ˜Žçš„),Threeè¡¨ç¤º,Oneæ˜¯åº”ç”¨å¯åŠ¨æ—¶çš„ä¸»Activity å¯åŠ¨ç¬¬ä¸€ä¸ªç•Œé¢Activity Oneæ—¶,å®ƒçš„æ¬¡åºæ˜¯ onCreate (ONE) - onStart (ONE) - onResume(ONE) ç‚¹&quot;æ‰“å¼€é€æ˜ŽActivity&quot;æŒ‰é’®æ—¶,è¿™æ—¶èµ°çš„æ¬¡åºæ˜¯ onPause(ONE) - onCreate(TWO) - onStart(TWO) - onResume(TWO) å†ç‚¹backå›žåˆ°ç¬¬ä¸€ä¸ªç•Œé¢,Twoä¼šè¢«æ€è¿™æ—¶èµ°çš„æ¬¡åºæ˜¯ onPause(TWO) - onActivityResult(ONE) - onResume(ONE) - onStop(TWO) - onDestroy(TWO) ç‚¹&quot;æ‰“å¼€å…¨å±Activity&quot;æŒ‰é’®æ—¶,è¿™æ—¶èµ°çš„æ¬¡åºæ˜¯ onPause(ONE) - onCreate(Three) - onStart(Three) - onResume(Three) - onStop(ONE) å†ç‚¹backå›žåˆ°ç¬¬ä¸€ä¸ªç•Œé¢,Threeä¼šè¢«æ€è¿™æ—¶èµ°çš„æ¬¡åºæ˜¯ onPause(Three) - onActivityResult(ONE) - onRestart(ONE) - onStart(ONE)- onResume(ONE) - onStop(Three) - onDestroy(Three) å†ç‚¹backé€€å‡ºåº”ç”¨æ—¶,å®ƒçš„æ¬¡åºæ˜¯ onPause(ONE) - onStop(ONE) - onDestroy(ONE) ä¾‹2ï¼šæ¨ªç«–å±åˆ‡æ¢æ—¶å€™Activityçš„ç”Ÿå‘½å‘¨æœŸ ä»–åˆ‡æ¢æ—¶å…·ä½“çš„ç”Ÿå‘½å‘¨æœŸæ˜¯æ€Žä¹ˆæ ·çš„ï¼š 1ã€æ–°å»ºä¸€ä¸ªActivityï¼Œå¹¶æŠŠå„ä¸ªç”Ÿå‘½å‘¨æœŸæ‰“å°å‡ºæ¥ 2ã€è¿è¡ŒActivityï¼Œå¾—åˆ°å¦‚ä¸‹ä¿¡æ¯ onCreateâ€“&gt;onStartâ€“&gt;onResumeâ€“&gt; 3ã€æŒ‰crtl+f12åˆ‡æ¢æˆæ¨ªå±æ—¶ onSaveInstanceStateâ€“&gt;onPauseâ€“&gt;onStopâ€“&gt;onDestroyâ€“&gt;onCreateâ€“&gt;onStartâ€“&gt;onRestoreInstanceStateâ€“&gt;onResumeâ€“&gt; 4ã€å†æŒ‰crtl+f12åˆ‡æ¢æˆç«–å±æ—¶ï¼Œå‘çŽ°æ‰“å°äº†ä¸¤æ¬¡ç›¸åŒçš„log onSaveInstanceStateâ€“&gt;onPauseâ€“&gt;onStopâ€“&gt;onDestroyâ€“&gt;onCreateâ€“&gt;onStartâ€“&gt;onRestoreInstanceStateâ€“&gt;onResumeâ€“&gt;onSaveInstanceStateâ€“&gt;onPauseâ€“&gt;onStopâ€“&gt;onDestroyâ€“&gt;onCreateâ€“&gt;onStartâ€“&gt;onRestoreInstanceStateâ€“&gt;onResumeâ€“&gt; 5ã€ä¿®æ”¹AndroidManifest.xmlï¼ŒæŠŠè¯¥Activityæ·»åŠ android:configChanges=â€orientationâ€ï¼Œæ‰§è¡Œæ­¥éª¤3 onSaveInstanceStateâ€“&gt;onPauseâ€“&gt;onStopâ€“&gt;onDestroyâ€“&gt;onCreateâ€“&gt;onStartâ€“&gt;onRestoreInstanceStateâ€“&gt;onResumeâ€“&gt; 6ã€å†æ‰§è¡Œæ­¥éª¤4ï¼Œå‘çŽ°ä¸ä¼šå†æ‰“å°ç›¸åŒä¿¡æ¯ï¼Œä½†å¤šæ‰“å°äº†ä¸€è¡ŒonConfigChanged onSaveInstanceStateâ€“&gt;onPauseâ€“&gt;onStopâ€“&gt;onDestroyâ€“&gt;onCreateâ€“&gt;onStartâ€“&gt;onRestoreInstanceStateâ€“&gt;onResumeâ€“&gt;onConfigurationChangedâ€“&gt; 7ã€æŠŠæ­¥éª¤5çš„android:configChanges=â€orientationâ€ æ”¹æˆ android:configChanges=â€orientation|keyboardHiddenâ€ï¼Œæ‰§è¡Œæ­¥éª¤3ï¼Œå°±åªæ‰“å°onConfigChanged onConfigurationChangedâ€“&gt; 8ã€æ‰§è¡Œæ­¥éª¤4 onConfigurationChangedâ€“&gt;onConfigurationChangedâ€“&gt; æ€»ç»“ï¼š 1ã€ä¸è®¾ç½®Activityçš„android:configChangesæ—¶ï¼Œåˆ‡å±ä¼šé‡æ–°è°ƒç”¨å„ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåˆ‡æ¨ªå±æ—¶ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œåˆ‡ç«–å±æ—¶ä¼šæ‰§è¡Œä¸¤æ¬¡ 2ã€è®¾ç½®Activityçš„android:configChanges=â€orientationâ€æ—¶ï¼Œåˆ‡å±è¿˜æ˜¯ä¼šé‡æ–°è°ƒç”¨å„ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåˆ‡æ¨ªã€ç«–å±æ—¶åªä¼šæ‰§è¡Œä¸€æ¬¡ 3ã€è®¾ç½®Activityçš„android:configChanges=â€orientation|keyboardHiddenâ€æ—¶ï¼Œåˆ‡å±ä¸ä¼šé‡æ–°è°ƒç”¨å„ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåªä¼šæ‰§è¡ŒonConfigurationChangedæ–¹æ³• æ€»ç»“ä¸€ä¸‹æ•´ä¸ªActivityçš„ç”Ÿå‘½å‘¨æœŸ è¡¥å……ä¸€ç‚¹ï¼Œå½“å‰Activityäº§ç”Ÿäº‹ä»¶å¼¹å‡ºToastå’ŒAlertDialogçš„æ—¶å€™Activityçš„ç”Ÿå‘½å‘¨æœŸä¸ä¼šæœ‰æ”¹å˜ Activityè¿è¡Œæ—¶æŒ‰ä¸‹HOMEé”®(è·Ÿè¢«å®Œå…¨è¦†ç›–æ˜¯ä¸€æ ·çš„)ï¼šonSaveInstanceState â€“&gt; onPause â€“&gt; onStopï¼Œå†æ¬¡è¿›å…¥æ¿€æ´»çŠ¶æ€æ—¶ï¼š onRestart â€“&gt;onStartâ€”&gt;onResume BroadcastReceiveå¹¿æ’­æŽ¥æ”¶å™¨ç”Ÿå‘½å‘¨æœŸï¼š ç”Ÿå‘½å‘¨æœŸåªæœ‰åç§’å·¦å³ï¼Œå¦‚æžœåœ¨ onReceive() å†…åšè¶…è¿‡åç§’å†…çš„äº‹æƒ…ï¼Œå°±ä¼šæŠ¥ANR(Application No Response) ç¨‹åºæ— å“åº”çš„é”™è¯¯ä¿¡æ¯ å®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸ºä»Žå›žè°ƒonReceive()æ–¹æ³•å¼€å§‹åˆ°è¯¥æ–¹æ³•è¿”å›žç»“æžœåŽç»“æŸ ServiceæœåŠ¡ç”Ÿå‘½å‘¨æœŸï¼š å›¾3.2serviceç”Ÿå‘½å‘¨æœŸå›¾ Serviceå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸ:ä»Žè°ƒç”¨onCreate()å¼€å§‹ç›´åˆ°è°ƒç”¨onDestroy()ç»“æŸ Serviceæœ‰ä¸¤ç§ä½¿ç”¨æ–¹æ³•ï¼š 1&gt;ä»¥è°ƒç”¨Context.startService()å¯åŠ¨ï¼Œè€Œä»¥è°ƒç”¨Context.stopService()ç»“æŸ 2&gt;ä»¥è°ƒç”¨Context.bindService()æ–¹æ³•å»ºç«‹ï¼Œä»¥è°ƒç”¨Context.unbindService()å…³é—­ serviceé‡è¦çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³• å½“ç”¨æˆ·è°ƒç”¨startService ï¼ˆï¼‰æˆ–bindServiceï¼ˆï¼‰æ—¶ï¼ŒServiceç¬¬ä¸€æ¬¡è¢«å®žä¾‹åŒ–çš„æ—¶å€™ç³»ç»Ÿä¼šè°ƒç”¨,æ•´ä¸ªç”Ÿå‘½å‘¨æœŸåªè°ƒç”¨1æ¬¡è¿™ä¸ªæ–¹æ³•ï¼Œé€šå¸¸ç”¨äºŽåˆå§‹åŒ–è®¾ç½®ã€‚æ³¨æ„ï¼šå¤šæ¬¡è°ƒç”¨startServiceï¼ˆï¼‰æˆ–bindServiceï¼ˆï¼‰æ–¹æ³•ä¸ä¼šå¤šæ¬¡è§¦å‘onCreateï¼ˆï¼‰æ–¹æ³• void onCreate() å½“ç”¨æˆ·è°ƒç”¨stopService()æˆ–unbindServiceï¼ˆï¼‰æ¥åœæ­¢æœåŠ¡æ—¶è¢«ç³»ç»Ÿè°ƒç”¨,ï¼ˆæ•´ä¸ªç”Ÿå‘½å‘¨æœŸåªè°ƒç”¨1æ¬¡ï¼‰ç”¨æ¥é‡Šæ”¾onCreate()æ–¹æ³•ä¸­åˆ›å»ºçš„èµ„æº void onDestroy() é€šè¿‡startService()æ–¹æ³•å¯åŠ¨çš„æœåŠ¡ åˆå§‹åŒ–ç»“æŸåŽç³»ç»Ÿä¼šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œç”¨äºŽå¤„ç†ä¼ é€’ç»™startService()çš„Intentå¯¹è±¡ã€‚å¦‚éŸ³ä¹æœåŠ¡ä¼šæ‰“å¼€Intent æ¥æŽ¢æ˜Žå°†è¦æ’­æ”¾å“ªé¦–éŸ³ä¹ï¼Œå¹¶å¼€å§‹æ’­æ”¾ã€‚æ³¨æ„ï¼šå¤šæ¬¡è°ƒç”¨startServiceï¼ˆï¼‰æ–¹æ³•ä¼šå¤šæ¬¡è§¦å‘onStartï¼ˆï¼‰æ–¹æ³• void onStart(Intent intent) é€šè¿‡bindService ()æ–¹æ³•å¯åŠ¨çš„æœåŠ¡ åˆå§‹åŒ–ç»“æŸåŽç³»ç»Ÿä¼šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œç”¨æ¥ç»‘å®šä¼ é€’ç»™bindService çš„Intent çš„å¯¹è±¡ã€‚æ³¨æ„ï¼šå¤šæ¬¡è°ƒç”¨bindServiceï¼ˆï¼‰æ—¶ï¼Œå¦‚æžœè¯¥æœåŠ¡å·²å¯åŠ¨åˆ™ä¸ä¼šå†è§¦å‘æ­¤æ–¹æ³• IBinder onBind(Intent intent) ç”¨æˆ·è°ƒç”¨unbindService()æ—¶ç³»ç»Ÿè°ƒç”¨æ­¤æ–¹æ³•ï¼ŒIntent å¯¹è±¡åŒæ ·ä¼ é€’ç»™è¯¥æ–¹æ³• boolean onUnbind(Intent intent) å¦‚æžœæœ‰æ–°çš„å®¢æˆ·ç«¯è¿žæŽ¥è‡³è¯¥æœåŠ¡ï¼Œåªæœ‰å½“æ—§çš„è°ƒç”¨onUnbind()åŽï¼Œæ–°çš„æ‰ä¼šè°ƒç”¨è¯¥æ–¹æ³• void onRebind(Intent intent) è¡¥å……ï¼šonCreate(Bundle savedInstanceState)ä¸ŽonSaveInstanceState(Bundle savedInstanceState)é…åˆä½¿ç”¨ï¼Œè§å¦‚ä¸‹ä»£ç ï¼Œè¾¾åˆ°æ˜¾ç¤ºactivityè¢«ç³»ç»Ÿæ€æ­»å‰çš„çŠ¶æ€ @Overridepublic void onCreate(Bundle savedInstanceState) {super.onCreate(savedInstanceState); if (null != savedInstanceState) { String _userid = savedInstanceState.getString(â€œStrUserIdâ€); String _uid = savedInstanceState.getString(â€œStrUidâ€); String _serverid = savedInstanceState.getString(â€œStrServerIdâ€); String _servername = savedInstanceState.getString(â€œStrServerNameâ€); int _rate = savedInstanceState.getInt(â€œStrRateâ€); //updateUserId(_userid); //updateUId(_uid); //updateServerId(_serverid); //updateUserServer(_servername); //updateRate(_rate); } } @Overrideprotected void onSaveInstanceState(Bundle savedInstanceState) {super.onSaveInstanceState(savedInstanceState); savedInstanceState.putString(&quot;StrUserId&quot;, getUserId()); savedInstanceState.putString(&quot;StrUid&quot;, getUId()); savedInstanceState.putString(&quot;StrServerId&quot;, getServerId()); savedInstanceState.putString(&quot;StrServerName&quot;, getServerName()); savedInstanceState.putInt(&quot;StrRate&quot;, getRate()); } å¦‚æžœå¤§å®¶å¯¹è¿™æœ‰è¶£å®žç”¨çš„æŠ€æœ¯è´´æ„Ÿå…´è¶£ æˆ‘åŽæœŸä¼šç»§ç»­åŠªåŠ›çš„ï¼ è¯·å¤§å®¶æ‰«æäºŒç»´ç ï¼ å…³æ³¨æˆ‘ï¼]]></content>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android Chapter II. Androidå››å¤§ç»„ä»¶]]></title>
    <url>%2F2017%2F06%2F10%2FAndroid%20Chapter%20II.%20%20%20Android%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[â€‹å­¦ä¹ Androidæœ€é‡è¦çš„èŽ«è¿‡äºŽå¯¹äºŽå››å¤§ç»„ä»¶ã€äº”å¤§å¸ƒå±€ä»¥åŠç”Ÿå‘½å‘¨æœŸçš„å­¦ä¹ ï¼Œè¿™ä¸€æœŸæˆ‘ä»¬å°±ä¸€èµ·æ¥å¨å¨Androidå››å¤§åŸºæœ¬ç»„ä»¶ç›¸å…³çš„çŸ¥è¯†ã€‚Androidå››å¤§åŸºæœ¬ç»„ä»¶åˆ†åˆ«æ˜¯Activityï¼ŒServiceæœåŠ¡,Content Providerå†…å®¹æä¾›è€…ï¼ŒBroadcastReceiverå¹¿æ’­æŽ¥æ”¶å™¨ã€‚ äº†è§£å››å¤§åŸºæœ¬ç»„ä»¶ Activity** :** åº”ç”¨ç¨‹åºä¸­ï¼Œä¸€ä¸ªActivityé€šå¸¸å°±æ˜¯ä¸€ä¸ªå•ç‹¬çš„å±å¹•ï¼Œå®ƒä¸Šé¢å¯ä»¥æ˜¾ç¤ºä¸€äº›æŽ§ä»¶ä¹Ÿå¯ä»¥ç›‘å¬å¹¶å¤„ç†ç”¨æˆ·çš„äº‹ä»¶åšå‡ºå“åº”ã€‚ Activityä¹‹é—´é€šè¿‡Intentè¿›è¡Œé€šä¿¡ã€‚åœ¨Intent çš„æè¿°ç»“æž„ä¸­ï¼Œæœ‰ä¸¤ä¸ªæœ€é‡è¦çš„éƒ¨åˆ†ï¼šåŠ¨ä½œå’ŒåŠ¨ä½œå¯¹åº”çš„æ•°æ®ã€‚ å…¸åž‹çš„åŠ¨ä½œç±»åž‹æœ‰ï¼šM AINï¼ˆactivityçš„é—¨æˆ·ï¼‰ã€VIEWã€PICKã€EDIT ç­‰ã€‚è€ŒåŠ¨ä½œå¯¹åº”çš„æ•°æ®åˆ™ä»¥URI çš„å½¢å¼è¿›è¡Œè¡¨ç¤ºã€‚ä¾‹å¦‚ï¼šè¦æŸ¥çœ‹ä¸€ä¸ªäººçš„è”ç³»æ–¹å¼ï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªåŠ¨ä½œç±»åž‹ä¸ºVIEW çš„intentï¼Œä»¥åŠä¸€ä¸ªè¡¨ç¤ºè¿™ä¸ªäººçš„URIã€‚ ä¸Žä¹‹æœ‰å…³ç³»çš„ä¸€ä¸ªç±»å«IntentFilterã€‚ç›¸å¯¹äºŽintent æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„åšæŸäº‹çš„è¯·æ±‚ï¼Œä¸€ä¸ªintentfilter åˆ™ç”¨äºŽæè¿°ä¸€ä¸ªactivityï¼ˆæˆ–è€…IntentReceiverï¼‰èƒ½å¤Ÿæ“ä½œå“ªäº›intentã€‚ä¸€ä¸ªactivity å¦‚æžœè¦æ˜¾ç¤ºä¸€ä¸ªäººçš„è”ç³»æ–¹å¼æ—¶ï¼Œéœ€è¦å£°æ˜Žä¸€ä¸ªIntentFilterï¼Œè¿™ä¸ªIntentFilter è¦çŸ¥é“æ€Žä¹ˆåŽ»å¤„ç†VIEW åŠ¨ä½œå’Œè¡¨ç¤ºä¸€ä¸ªäººçš„URIã€‚IntentFilter éœ€è¦åœ¨AndroidManifest.xml ä¸­å®šä¹‰ã€‚é€šè¿‡è§£æžå„ç§intentï¼Œä»Žä¸€ä¸ªå±å¹•å¯¼èˆªåˆ°å¦ä¸€ä¸ªå±å¹•æ˜¯å¾ˆç®€å•çš„ã€‚å½“å‘å‰å¯¼èˆªæ—¶ï¼Œactivity å°†ä¼šè°ƒç”¨startActivity(Intent myIntent)æ–¹æ³•ã€‚ç„¶åŽï¼Œç³»ç»Ÿä¼šåœ¨æ‰€æœ‰å®‰è£…çš„åº”ç”¨ç¨‹åºä¸­å®šä¹‰çš„IntentFilter ä¸­æŸ¥æ‰¾ï¼Œæ‰¾åˆ°æœ€åŒ¹é…myIntent çš„Intent å¯¹åº”çš„activityã€‚æ–°çš„activity æŽ¥æ”¶åˆ°myIntent çš„é€šçŸ¥åŽï¼Œå¼€å§‹è¿è¡Œã€‚å½“startActivity æ–¹æ³•è¢«è°ƒç”¨å°†è§¦å‘è§£æžmyIntent çš„åŠ¨ä½œï¼Œè¿™ä¸ªæœºåˆ¶æä¾›äº†ä¸¤ä¸ªå…³é”®å¥½å¤„ï¼š Aã€Activities èƒ½å¤Ÿé‡å¤åˆ©ç”¨ä»Žå…¶å®ƒç»„ä»¶ä¸­ä»¥Intent çš„å½¢å¼äº§ç”Ÿçš„ä¸€ä¸ªè¯·æ±‚ï¼› Bã€Activities å¯ä»¥åœ¨ä»»ä½•æ—¶å€™è¢«ä¸€ä¸ªå…·æœ‰ç›¸åŒIntentFilter çš„æ–°çš„Activity å–ä»£ã€‚ AndroidManifestæ–‡ä»¶ä¸­å«æœ‰å¦‚ä¸‹è¿‡æ»¤å™¨çš„Activityç»„ä»¶ä¸ºé»˜è®¤å¯åŠ¨ç±»å½“ç¨‹åºå¯åŠ¨æ—¶ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨å®ƒ BroadcastReceiveå¹¿æ’­æŽ¥æ”¶å™¨: ä½ çš„åº”ç”¨å¯ä»¥ä½¿ç”¨å®ƒå¯¹å¤–éƒ¨äº‹ä»¶è¿›è¡Œè¿‡æ»¤åªå¯¹æ„Ÿå…´è¶£çš„å¤–éƒ¨äº‹ä»¶(å¦‚å½“ç”µè¯å‘¼å…¥æ—¶ï¼Œæˆ–è€…æ•°æ®ç½‘ç»œå¯ç”¨æ—¶)è¿›è¡ŒæŽ¥æ”¶å¹¶åšå‡ºå“åº”ã€‚å¹¿æ’­æŽ¥æ”¶å™¨æ²¡æœ‰ç”¨æˆ·ç•Œé¢ã€‚ç„¶è€Œï¼Œå®ƒä»¬å¯ä»¥å¯åŠ¨ä¸€ä¸ªactivityæˆ–serice æ¥å“åº”å®ƒä»¬æ”¶åˆ°çš„ä¿¡æ¯ï¼Œæˆ–è€…ç”¨NotificationManager æ¥é€šçŸ¥ç”¨æˆ·ã€‚é€šçŸ¥å¯ä»¥ç”¨å¾ˆå¤šç§æ–¹å¼æ¥å¸å¼•ç”¨æˆ·çš„æ³¨æ„åŠ›â”€â”€é—ªåŠ¨èƒŒç¯ã€éœ‡åŠ¨ã€æ’­æ”¾å£°éŸ³ç­‰ã€‚ä¸€èˆ¬æ¥è¯´æ˜¯åœ¨çŠ¶æ€æ ä¸Šæ”¾ä¸€ä¸ªæŒä¹…çš„å›¾æ ‡ï¼Œç”¨æˆ·å¯ä»¥æ‰“å¼€å®ƒå¹¶èŽ·å–æ¶ˆæ¯ã€‚ å¹¿æ’­ç±»åž‹ï¼š æ™®é€šå¹¿æ’­ï¼Œé€šè¿‡Context.sendBroadcast(Intent myIntent)å‘é€çš„ æœ‰åºå¹¿æ’­ï¼Œé€šè¿‡Context.sendOrderedBroadcast(intent, receiverPermission)å‘é€çš„ï¼Œè¯¥æ–¹æ³•ç¬¬2ä¸ªå‚æ•°å†³å®šè¯¥å¹¿æ’­çš„çº§åˆ«ï¼Œçº§åˆ«æ•°å€¼æ˜¯åœ¨ -1000 åˆ° 1000 ä¹‹é—´ , å€¼è¶Šå¤§ , å‘é€çš„ä¼˜å…ˆçº§è¶Šé«˜ï¼›å¹¿æ’­æŽ¥æ”¶è€…æŽ¥æ”¶å¹¿æ’­æ—¶çš„çº§åˆ«çº§åˆ«ï¼ˆå¯é€šè¿‡intentfilterä¸­çš„priorityè¿›è¡Œè®¾ç½®è®¾ä¸º2147483647æ—¶ä¼˜å…ˆçº§æœ€é«˜ï¼‰ï¼ŒåŒçº§åˆ«æŽ¥æ”¶çš„å…ˆåŽæ˜¯éšæœºçš„ï¼Œ å†åˆ°çº§åˆ«ä½Žçš„æ”¶åˆ°å¹¿æ’­ï¼Œé«˜çº§åˆ«çš„æˆ–åŒçº§åˆ«å…ˆæŽ¥æ”¶åˆ°å¹¿æ’­çš„å¯ä»¥é€šè¿‡abortBroadcast()æ–¹æ³•æˆªæ–­å¹¿æ’­ä½¿å…¶ä»–çš„æŽ¥æ”¶è€…æ— æ³•æ”¶åˆ°è¯¥å¹¿æ’­ï¼Œè¿˜æœ‰å…¶ä»–æž„é€ å‡½æ•° å¼‚æ­¥å¹¿æ’­ï¼Œé€šè¿‡Context.sendStickyBroadcast(Intent myIntent)å‘é€çš„ï¼Œè¿˜æœ‰sendStickyOrderedBroadcast(intent, resultReceiver, scheduler, initialCode, initialData, initialExtras)æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å…·æœ‰æœ‰åºå¹¿æ’­çš„ç‰¹æ€§ä¹Ÿæœ‰å¼‚æ­¥å¹¿æ’­çš„ç‰¹æ€§ï¼›å‘é€å¼‚æ­¥å¹¿æ’­è¦ï¼š æƒé™ï¼ŒæŽ¥æ”¶å¹¶å¤„ç†å®ŒIntentåŽï¼Œå¹¿æ’­ä¾ç„¶å­˜åœ¨ï¼Œç›´åˆ°ä½ è°ƒç”¨removeStickyBroadcast(intent)ä¸»åŠ¨æŠŠå®ƒåŽ»æŽ‰ æ³¨æ„ï¼šå‘é€å¹¿æ’­æ—¶çš„intentå‚æ•°ä¸ŽContex.startActivity()å¯åŠ¨èµ·æ¥çš„Intentä¸åŒ,å‰è€…å¯ä»¥è¢«å¤šä¸ªè®¢é˜…å®ƒçš„å¹¿æ’­æŽ¥æ”¶å™¨è°ƒç”¨,åŽè€…åªèƒ½è¢«ä¸€ä¸ª(Activityæˆ–service)è°ƒç”¨ ç›‘å¬å¹¿æ’­Intentæ­¥éª¤: 1&gt;å†™ä¸€ä¸ªç»§æ‰¿BroadCastReceiverçš„ç±»,é‡å†™onReceive()æ–¹æ³•,å¹¿æ’­æŽ¥æ”¶å™¨ä»…åœ¨å®ƒæ‰§è¡Œè¿™ä¸ªæ–¹æ³•æ—¶å¤„äºŽæ´»è·ƒçŠ¶æ€ã€‚å½“onReceive()è¿”å›žåŽï¼Œå®ƒå³ä¸ºå¤±æ´»çŠ¶æ€,æ³¨æ„:ä¸ºäº†ä¿è¯ç”¨æˆ·äº¤äº’è¿‡ç¨‹çš„æµç•…,ä¸€äº›è´¹æ—¶çš„æ“ä½œè¦æ”¾åˆ°çº¿ç¨‹é‡Œ,å¦‚ç±»åSMSBroadcastReceiver 2&gt;æ³¨å†Œè¯¥å¹¿æ’­æŽ¥æ”¶è€…,æ³¨å†Œæœ‰ä¸¤ç§æ–¹æ³•ç¨‹åºåŠ¨æ€æ³¨å†Œå’ŒAndroidManifestæ–‡ä»¶ä¸­è¿›è¡Œé™æ€æ³¨å†Œï¼ˆå¯ç†è§£ä¸ºç³»ç»Ÿä¸­æ³¨å†Œï¼‰å¦‚ä¸‹ï¼š é™æ€æ³¨å†Œ,æ³¨å†Œçš„å¹¿æ’­ï¼Œä¸‹é¢çš„priorityè¡¨ç¤ºæŽ¥æ”¶å¹¿æ’­çš„çº§åˆ«&quot;2147483647&quot;ä¸ºæœ€é«˜ä¼˜å…ˆçº§ 1&lt;receiver android:name=&quot;.SMSBroadcastReceiver&quot; &gt; &lt;intent-filter android:priority = &quot;2147483647&quot; &gt; &lt;action android:name=&quot;android.provider.Telephony.SMS_RECEIVED&quot; /&gt; &lt;/intent-filter&gt;&lt;/receiver &gt; åŠ¨æ€æ³¨å†Œï¼Œä¸€èˆ¬åœ¨Activityå¯äº¤äº’æ—¶onResume()å†…æ³¨å†ŒBroadcastReceiver IntentFilter intentFilter=new IntentFilter(â€œandroid.provider.Telephony.SMS_RECEIVEDâ€);registerReceiver(mBatteryInfoReceiver ,intentFilter);//åæ³¨å†ŒunregisterReceiver(receiver); æ³¨æ„ï¼š 1.ç”Ÿå‘½å‘¨æœŸåªæœ‰åç§’å·¦å³ï¼Œå¦‚æžœåœ¨ onReceive() å†…åšè¶…è¿‡åç§’å†…çš„äº‹æƒ…ï¼Œå°±ä¼šæŠ¥ANR(Application No Response) ç¨‹åºæ— å“åº”çš„é”™è¯¯ä¿¡æ¯ï¼Œå¦‚æžœéœ€è¦å®Œæˆä¸€é¡¹æ¯”è¾ƒè€—æ—¶çš„å·¥ä½œ , åº”è¯¥é€šè¿‡å‘é€ Intent ç»™ Service, ç”±Service æ¥å®Œæˆ . è¿™é‡Œä¸èƒ½ä½¿ç”¨å­çº¿ç¨‹æ¥è§£å†³ , å› ä¸º BroadcastReceiver çš„ç”Ÿå‘½å‘¨æœŸå¾ˆçŸ­ , å­çº¿ç¨‹å¯èƒ½è¿˜æ²¡æœ‰ç»“æŸBroadcastReceiver å°±å…ˆç»“æŸäº† .BroadcastReceiver ä¸€æ—¦ç»“æŸ , æ­¤æ—¶ BroadcastReceiver çš„æ‰€åœ¨è¿›ç¨‹å¾ˆå®¹æ˜“åœ¨ç³»ç»Ÿéœ€è¦å†…å­˜æ—¶è¢«ä¼˜å…ˆæ€æ­» , å› ä¸ºå®ƒå±žäºŽç©ºè¿›ç¨‹ ( æ²¡æœ‰ä»»ä½•æ´»åŠ¨ç»„ä»¶çš„è¿›ç¨‹ ). å¦‚æžœå®ƒçš„å®¿ä¸»è¿›ç¨‹è¢«æ€æ­» , é‚£ä¹ˆæ­£åœ¨å·¥ä½œçš„å­çº¿ç¨‹ä¹Ÿä¼šè¢«æ€æ­» . æ‰€ä»¥é‡‡ç”¨å­çº¿ç¨‹æ¥è§£å†³æ˜¯ä¸å¯é çš„ 2. åŠ¨æ€æ³¨å†Œå¹¿æ’­æŽ¥æ”¶å™¨è¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯å½“ç”¨æ¥æ³¨å†Œçš„Activityå…³æŽ‰åŽï¼Œå¹¿æ’­ä¹Ÿå°±å¤±æ•ˆäº†ã€‚é™æ€æ³¨å†Œæ— éœ€æ‹…å¿§å¹¿æ’­æŽ¥æ”¶å™¨æ˜¯å¦è¢«å…³é—­,åªè¦è®¾å¤‡æ˜¯å¼€å¯çŠ¶æ€,å¹¿æ’­æŽ¥æ”¶å™¨ä¹Ÿæ˜¯æ‰“å¼€ç€çš„ã€‚ä¹Ÿå°±æ˜¯è¯´å“ªæ€•appæœ¬èº«æœªå¯åŠ¨,è¯¥appè®¢é˜…çš„å¹¿æ’­åœ¨è§¦å‘æ—¶ä¹Ÿä¼šå¯¹å®ƒèµ·ä½œç”¨ ç³»ç»Ÿå¸¸è§å¹¿æ’­Intent,å¦‚å¼€æœºå¯åŠ¨ã€ç”µæ± ç”µé‡å˜åŒ–ã€æ—¶é—´æ”¹å˜ç­‰å¹¿æ’­ Service æœåŠ¡: ä¸€ä¸ªService æ˜¯ä¸€æ®µé•¿ç”Ÿå‘½å‘¨æœŸçš„ï¼Œæ²¡æœ‰ç”¨æˆ·ç•Œé¢çš„ç¨‹åºï¼Œå¯ä»¥ç”¨æ¥å¼€å‘å¦‚ç›‘æŽ§ç±»ç¨‹åºã€‚ æ¯”è¾ƒå¥½çš„ä¸€ä¸ªä¾‹å­å°±æ˜¯ä¸€ä¸ªæ­£åœ¨ä»Žæ’­æ”¾åˆ—è¡¨ä¸­æ’­æ”¾æ­Œæ›²çš„åª’ä½“æ’­æ”¾å™¨ã€‚åœ¨ä¸€ä¸ªåª’ä½“æ’­æ”¾å™¨çš„åº”ç”¨ä¸­ï¼Œåº”è¯¥ä¼šæœ‰å¤šä¸ªactivityï¼Œè®©ä½¿ç”¨è€…å¯ä»¥é€‰æ‹©æ­Œæ›²å¹¶æ’­æ”¾æ­Œæ›²ã€‚ç„¶è€Œï¼ŒéŸ³ä¹é‡æ”¾è¿™ä¸ªåŠŸèƒ½å¹¶æ²¡æœ‰å¯¹åº”çš„activityï¼Œå› ä¸ºä½¿ç”¨è€…å½“ç„¶ä¼šè®¤ä¸ºåœ¨å¯¼èˆªåˆ°å…¶å®ƒå±å¹•æ—¶éŸ³ä¹åº”è¯¥è¿˜åœ¨æ’­æ”¾çš„ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåª’ä½“æ’­æ”¾å™¨è¿™ä¸ªactivity ä¼šä½¿ç”¨Context.startService()æ¥å¯åŠ¨ä¸€ä¸ªserviceï¼Œä»Žè€Œå¯ä»¥åœ¨åŽå°ä¿æŒéŸ³ä¹çš„æ’­æ”¾ã€‚åŒæ—¶ï¼Œç³»ç»Ÿä¹Ÿå°†ä¿æŒè¿™ä¸ªservice ä¸€ç›´æ‰§è¡Œï¼Œç›´åˆ°è¿™ä¸ªservice è¿è¡Œç»“æŸã€‚å¦å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨Context.bindService()æ–¹æ³•ï¼Œè¿žæŽ¥åˆ°ä¸€ä¸ªservice ä¸Šï¼ˆå¦‚æžœè¿™ä¸ªservice è¿˜æ²¡æœ‰è¿è¡Œå°†å¯åŠ¨å®ƒï¼‰ã€‚å½“è¿žæŽ¥åˆ°ä¸€ä¸ªservice ä¹‹åŽï¼Œæˆ‘ä»¬è¿˜å¯ä»¥service æä¾›çš„æŽ¥å£ä¸Žå®ƒè¿›è¡Œé€šè®¯ã€‚æ‹¿åª’ä½“æ’­æ”¾å™¨è¿™ä¸ªä¾‹å­æ¥è¯´ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è¿›è¡Œæš‚åœã€é‡æ’­ç­‰æ“ä½œã€‚ Serviceä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ 1&gt;ç»§æ‰¿serviceç±» 2&gt;AndroidManifast.xmlé…ç½®æ¸…å•æ–‡ä»¶ä¸­&lt;application&gt;èŠ‚ç‚¹é‡Œå¯¹æœåŠ¡è¿›è¡Œé…ç½® &lt;service name=&quot;.SMSService&quot;/&gt; æœåŠ¡ä¸èƒ½è‡ªå·±è¿è¡Œ,éœ€è¦é€šè¿‡Contex.startService()æˆ–Contex.bindService()å¯åŠ¨æœåŠ¡ é€šè¿‡startService()æ–¹æ³•å¯åŠ¨çš„æœåŠ¡äºŽè°ƒç”¨è€…æ²¡æœ‰å…³ç³»,å³ä½¿è°ƒç”¨è€…å…³é—­äº†,æœåŠ¡ä»ç„¶è¿è¡Œæƒ³åœæ­¢æœåŠ¡è¦è°ƒç”¨Context.stopService(),æ­¤æ—¶ç³»ç»Ÿä¼šè°ƒç”¨onDestory(),ä½¿ç”¨æ­¤æ–¹æ³•å¯åŠ¨æ—¶,æœåŠ¡é¦–æ¬¡å¯åŠ¨ç³»ç»Ÿå…ˆè°ƒç”¨æœåŠ¡çš„onCreate()â€“&gt;onStart(),å¦‚æžœæœåŠ¡å·²ç»å¯åŠ¨å†æ¬¡è°ƒç”¨åªä¼šè§¦å‘onStart()æ–¹æ³• ä½¿ç”¨bindService()å¯åŠ¨çš„æœåŠ¡ä¸Žè°ƒç”¨è€…ç»‘å®š,åªè¦è°ƒç”¨è€…å…³é—­æœåŠ¡å°±ç»ˆæ­¢,ä½¿ç”¨æ­¤æ–¹æ³•å¯åŠ¨æ—¶,æœåŠ¡é¦–æ¬¡å¯åŠ¨ç³»ç»Ÿå…ˆè°ƒç”¨æœåŠ¡çš„onCreate()â€“&gt;onBind(),å¦‚æžœæœåŠ¡å·²ç»å¯åŠ¨å†æ¬¡è°ƒç”¨ä¸ä¼šå†è§¦å‘è¿™2ä¸ªæ–¹æ³•,è°ƒç”¨è€…é€€å‡ºæ—¶ç³»ç»Ÿä¼šè°ƒç”¨æœåŠ¡çš„onUnbind()â€“&gt;onDestory(),æƒ³ä¸»åŠ¨è§£é™¤ç»‘å®šå¯ä½¿ç”¨Contex.unbindService(),ç³»ç»Ÿä¾æ¬¡è°ƒç”¨onUnbind()â€“&gt;onDestory(); Content Providerå†…å®¹æä¾›è€… : androidå¹³å°æä¾›äº†Content Providerä½¿ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„æŒ‡å®šæ•°æ®é›†æä¾›ç»™å…¶ä»–åº”ç”¨ç¨‹åºã€‚è¿™äº›æ•°æ®å¯ä»¥å­˜å‚¨åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ã€åœ¨ä¸€ä¸ªSQLiteæ•°æ®åº“ã€æˆ–ä»¥ä»»ä½•å…¶ä»–åˆç†çš„æ–¹å¼, å…¶ä»–åº”ç”¨å¯ä»¥é€šè¿‡ContentResolverç±»(è§ContentProviderAccessAppä¾‹å­)ä»Žè¯¥å†…å®¹æä¾›è€…ä¸­èŽ·å–æˆ–å­˜å…¥æ•°æ®.(ç›¸å½“äºŽåœ¨åº”ç”¨å¤–åŒ…äº†ä¸€å±‚å£³), åªæœ‰éœ€è¦åœ¨å¤šä¸ªåº”ç”¨ç¨‹åºé—´å…±äº«æ•°æ®æ˜¯æ‰éœ€è¦å†…å®¹æä¾›è€…ã€‚ä¾‹å¦‚ï¼Œé€šè®¯å½•æ•°æ®è¢«å¤šä¸ªåº”ç”¨ç¨‹åºä½¿ç”¨ï¼Œä¸”å¿…é¡»å­˜å‚¨åœ¨ä¸€ä¸ªå†…å®¹æä¾›è€…ä¸­ å®ƒçš„å¥½å¤„:ç»Ÿä¸€æ•°æ®è®¿é—®æ–¹å¼ã€‚ androidç³»ç»Ÿè‡ªå¸¦çš„å†…å®¹æä¾›è€…(é¡¶çº§çš„è¡¨ç¤ºæ•°æ®åº“å,éžé¡¶çº§çš„éƒ½æ˜¯è¡¨å)è¿™äº›å†…å®¹æä¾›è€…åœ¨SDKæ–‡æ¡£çš„android.provider JavaåŒ…ä¸­éƒ½æœ‰ä»‹ç»ã€‚è§ï¼šhttp://developer.android.com/reference/android/provider/package-summary.html â”œâ”€â”€â”€â”€Browser â”œâ”€â”€â”€â”€CallLog â”œâ”€â”€â”€â”€Contacts â”‚ â”œâ”€â”€â”€â”€Groups â”‚ â”œâ”€â”€â”€â”€People â”‚ â”œâ”€â”€â”€â”€Phones â”‚ â””â”€â”€â”€â”€Photos â”œâ”€â”€â”€â”€Images â”‚ â””â”€â”€â”€â”€Thumbnails â”œâ”€â”€â”€â”€MediaStore â”‚ â”œâ”€â”€â”€â”€Albums â”‚ â”œâ”€â”€â”€â”€Artists â”‚ â”œâ”€â”€â”€â”€Audio â”‚ â”œâ”€â”€â”€â”€Genres â”‚ â””â”€â”€â”€â”€Playlists â”œâ”€â”€â”€â”€Settings â””â”€â”€â”€â”€Video CallLogï¼šåœ°å€å’ŒæŽ¥æ”¶åˆ°çš„ç”µè¯ä¿¡æ¯ Contact.People.Phonesï¼šå­˜å‚¨ç”µè¯å·ç  Setting.Systemï¼šç³»ç»Ÿè®¾ç½®å’Œåå¥½è®¾ç½® ä½¿ç”¨Content Providerå¯¹å¤–å…±äº«æ•°æ®çš„æ­¥éª¤ 1&gt;ç»§æ‰¿ContentProviderç±»å¹¶æ ¹æ®éœ€æ±‚é‡å†™ä»¥ä¸‹æ–¹æ³•: public boolean onCreate();//å¤„ç†åˆå§‹åŒ–æ“ä½œ /** * æ’å…¥æ•°æ®åˆ°å†…å®¹æä¾›è€…(å…è®¸å…¶ä»–åº”ç”¨å‘ä½ çš„åº”ç”¨ä¸­æ’å…¥æ•°æ®æ—¶é‡å†™) * @param uri * @param initialValues æ’å…¥çš„æ•°æ® * @return */ public Uri insert(Uri uri, ContentValues initialValues); /** * ä»Žå†…å®¹æä¾›è€…ä¸­åˆ é™¤æ•°æ®(å…è®¸å…¶ä»–åº”ç”¨åˆ é™¤ä½ åº”ç”¨çš„æ•°æ®æ—¶é‡å†™) * @param uri * @param selection æ¡ä»¶è¯­å¥ * @param selectionArgs å‚æ•° * @return */ public int delete(Uri uri, String selection, String[] selectionArgs); /** * æ›´æ–°å†…å®¹æä¾›è€…å·²å­˜åœ¨çš„æ•°æ®(å…è®¸å…¶ä»–åº”ç”¨æ›´æ–°ä½ åº”ç”¨çš„æ•°æ®æ—¶é‡å†™) * @param uri * @param values æ›´æ–°çš„æ•°æ® * @param selection æ¡ä»¶è¯­å¥ * @param selectionArgs å‚æ•° * @return */ public int update(Uri uri, ContentValues values, String selection, String[] selectionArgs); /** * è¿”å›žæ•°æ®ç»™è°ƒç”¨è€…(å…è®¸å…¶ä»–åº”ç”¨ä»Žä½ çš„åº”ç”¨ä¸­èŽ·å–æ•°æ®æ—¶é‡å†™) * @param uri * @param projection åˆ—å * @param selection æ¡ä»¶è¯­å¥ * @param selectionArgs å‚æ•° * @param sortOrder æŽ’åº * @return */ public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) ; /** * ç”¨äºŽè¿”å›žå½“å‰Uriæ‰€ä»£è¡¨æ•°æ®çš„MIMEç±»åž‹ * å¦‚æžœæ“ä½œçš„æ•°æ®ä¸ºé›†åˆç±»åž‹(å¤šæ¡æ•°æ®),é‚£ä¹ˆè¿”å›žçš„ç±»åž‹å­—ç¬¦ä¸²åº”è¯¥ä¸ºvnd.android.cursor.dir/å¼€å¤´ * ä¾‹å¦‚è¦å¾—åˆ°æ‰€æœ‰personè®°å½•çš„Uriä¸ºcontent://com.bravestarr.provider.personprovider/person, * é‚£ä¹ˆè¿”å›žçš„MIMEç±»åž‹å­—ç¬¦ä¸²åº”è¯¥ä¸ºâ€vnd.android.cursor.dir/personâ€ * å¦‚æžœæ“ä½œçš„æ•°æ®ä¸ºå•ä¸€æ•°æ®,é‚£ä¹ˆè¿”å›žçš„ç±»åž‹å­—ç¬¦ä¸²åº”è¯¥ä¸ºvnd.android.cursor.item/å¼€å¤´ * ä¾‹å¦‚è¦å¾—åˆ°idä¸º10çš„personè®°å½•çš„Uriä¸ºcontent://com.bravestarr.provider.personprovider/person/10, * é‚£ä¹ˆè¿”å›žçš„MIMEç±»åž‹å­—ç¬¦ä¸²åº”è¯¥ä¸ºâ€vnd.android.cursor.item/personâ€ * @param uri */ public String getType(Uri uri) è¿™äº›æ–¹æ³•ä¸­çš„Uriå‚æ•°,å¾—åˆ°åŽéœ€è¦è¿›è¡Œè§£æžç„¶åŽåšå¯¹åº”å¤„ç†,Uriè¡¨ç¤ºè¦æ“ä½œçš„æ•°æ®,åŒ…å«ä¸¤éƒ¨åˆ†ä¿¡æ¯: 1.éœ€è¦æ“ä½œçš„contentprovider 2.å¯¹contentproviderä¸­çš„ä»€ä¹ˆæ•°æ®è¿›è¡Œæ“ä½œ,ä¸€ä¸ªUriæ ¼å¼:ç»“æž„å¤´://authorities(åŸŸå)/è·¯å¾„(è¦æ“ä½œçš„æ•°æ®,æ ¹æ®ä¸šåŠ¡è€Œå®š) content://com.bravestarr.provider.personprovider/person/10 è¯´æ˜Ž:contentproviderçš„ç»“æž„å¤´å·²ç»ç”±androidè§„å®šä¸ºcontent:// authoritiesç”¨äºŽå”¯ä¸€æ ‡è¯†è¿™ä¸ªcontentproviderç¨‹åº,å¤–éƒ¨è°ƒç”¨è€…å¯ä»¥æ ¹æ®è¿™ä¸ªæ‰¾åˆ°ä»– è·¯å¾„è¡¨ç¤ºæˆ‘ä»¬è¦æ“ä½œçš„æ•°æ®,è·¯å¾„çš„æž„å»ºæ ¹æ®ä¸šåŠ¡è€Œå®š.è·¯å¾„æ ¼å¼å¦‚ä¸‹: è¦æ“ä½œpersonè¡¨è¡Œå·ä¸º10çš„è®°å½•,å¯ä»¥è¿™æ ·æž„å»º/person/10 è¦æ“ä½œpersonè¡¨çš„æ‰€æœ‰è®°å½•,å¯ä»¥è¿™æ ·æž„å»º/person 2&gt;åœ¨AndroidManifest.xmlä¸­ä½¿ç”¨å¯¹ContentProviderè¿›è¡Œé…ç½®æ³¨å†Œ(å†…å®¹æä¾›è€…æ³¨å†Œå®ƒè‡ªå·±å°±åƒç½‘ç«™æ³¨å†ŒåŸŸå),ContentProvideré‡‡ç”¨authoritie(åŽŸæ„æŽˆæƒ,å¯ç†è§£ä¸ºåŸŸå)ä½œä¸ºå”¯ä¸€æ ‡è¯†,æ–¹ä¾¿å…¶ä»–åº”ç”¨èƒ½æ‰¾åˆ° â€¦ å…³äºŽå››å¤§åŸºæœ¬ç»„ä»¶çš„ä¸€ä¸ªæ€»ç»“ï¼š 1&gt; 4å¤§ç»„ä»¶çš„æ³¨å†Œ 4å¤§åŸºæœ¬ç»„ä»¶éƒ½éœ€è¦æ³¨å†Œæ‰èƒ½ä½¿ç”¨,æ¯ä¸ªActivityã€serviceã€Content Providerå†…å®¹æä¾›è€…éƒ½éœ€è¦åœ¨AndroidManifestæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®AndroidManifestæ–‡ä»¶ä¸­æœªè¿›è¡Œå£°æ˜Žçš„activityã€æœåŠ¡ä»¥åŠå†…å®¹æä¾›è€…å°†ä¸ä¸ºç³»ç»Ÿæ‰€è§ï¼Œä»Žè€Œä¹Ÿå°±ä¸å¯ç”¨ï¼Œè€ŒBroadcastReceiveå¹¿æ’­æŽ¥æ”¶è€…çš„æ³¨å†Œåˆ†é™æ€æ³¨å†Œï¼ˆåœ¨AndroidManifestæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼‰å’Œé€šè¿‡ä»£ç åŠ¨æ€åˆ›å»ºå¹¶ä»¥è°ƒç”¨Context.registerReceiver()çš„æ–¹å¼æ³¨å†Œè‡³ç³»ç»Ÿã€‚éœ€è¦æ³¨æ„çš„æ˜¯åœ¨AndroidManifestæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®çš„å¹¿æ’­æŽ¥æ”¶è€…ä¼šéšç³»ç»Ÿçš„å¯åŠ¨è€Œä¸€ç›´å¤„äºŽæ´»è·ƒçŠ¶æ€,åªè¦æŽ¥æ”¶åˆ°æ„Ÿå…´è¶£çš„å¹¿æ’­å°±ä¼šè§¦å‘ï¼ˆå³ä½¿ç¨‹åºæœªè¿è¡Œï¼‰ AndroidManifestæ–‡ä»¶ä¸­è¿›è¡Œæ³¨å†Œæ ¼å¼å¦‚ä¸‹ï¼š å…ƒç´ çš„name å±žæ€§æŒ‡å®šäº†å®žçŽ°äº†è¿™ä¸ªactivity çš„Activity çš„å­ç±»ã€‚icon å’Œlabel å±žæ€§æŒ‡å‘äº†åŒ…å«å±•ç¤ºç»™ç”¨æˆ·çš„æ­¤activity çš„å›¾æ ‡å’Œæ ‡ç­¾çš„èµ„æºæ–‡ä»¶ã€‚ å…ƒç´ ç”¨äºŽå£°æ˜ŽæœåŠ¡ å…ƒç´ ç”¨äºŽå£°æ˜Žå¹¿æ’­æŽ¥æ”¶å™¨ å…ƒç´ ç”¨äºŽå£°æ˜Žå†…å®¹æä¾›è€… 2&gt; 4å¤§ç»„ä»¶çš„æ¿€æ´» â€¢ å®¹æä¾›è€…çš„æ¿€æ´»ï¼šå½“æŽ¥æ”¶åˆ°ContentResolver å‘å‡ºçš„è¯·æ±‚åŽï¼Œå†…å®¹æä¾›è€…è¢«æ¿€æ´»ã€‚è€Œå…¶å®ƒä¸‰ç§ç»„ä»¶â”€â”€activityã€æœåŠ¡å’Œå¹¿æ’­æŽ¥æ”¶å™¨è¢«ä¸€ç§å«åšintent çš„å¼‚æ­¥æ¶ˆæ¯æ‰€æ¿€æ´» â€¢ Activityçš„æ¿€æ´»é€šè¿‡ä¼ é€’ä¸€ä¸ªIntent å¯¹è±¡è‡³Context.startActivity()æˆ–Activity.startActivityForResult()ä»¥è½½å…¥ï¼ˆæˆ–æŒ‡å®šæ–°å·¥ä½œç»™ï¼‰ä¸€ä¸ªactivityã€‚ç›¸åº”çš„activity å¯ä»¥é€šè¿‡è°ƒç”¨getIntent() æ–¹æ³•æ¥æŸ¥çœ‹æ¿€æ´»å®ƒçš„intentã€‚å¦‚æžœå®ƒæœŸæœ›å®ƒæ‰€å¯åŠ¨çš„é‚£ä¸ªactivity è¿”å›žä¸€ä¸ªç»“æžœï¼Œå®ƒä¼šä»¥è°ƒç”¨startActivityForResult()æ¥å–ä»£startActivity()ã€‚æ¯”å¦‚è¯´ï¼Œå¦‚æžœå®ƒå¯åŠ¨äº†å¦å¤–ä¸€ä¸ªActivity ä»¥ä½¿ç”¨æˆ·æŒ‘é€‰ä¸€å¼ ç…§ç‰‡ï¼Œå®ƒä¹Ÿè®¸æƒ³çŸ¥é“å“ªå¼ ç…§ç‰‡è¢«é€‰ä¸­äº†ã€‚ç»“æžœå°†ä¼šè¢«å°è£…åœ¨ä¸€ä¸ªIntent å¯¹è±¡ä¸­ï¼Œå¹¶ä¼ é€’ç»™å‘å‡ºè°ƒç”¨çš„activity çš„onActivityResult() æ–¹æ³•ã€‚ â€¢ æœåŠ¡çš„æ¿€æ´»å¯ä»¥é€šè¿‡ä¼ é€’ä¸€ä¸ªIntent å¯¹è±¡è‡³Context.startService()æˆ–Context.bindService()å‰è€…Android è°ƒç”¨æœåŠ¡çš„onStart()æ–¹æ³•å¹¶å°†Intent å¯¹è±¡ä¼ é€’ç»™å®ƒï¼ŒåŽè€…Android è°ƒç”¨æœåŠ¡çš„onBind()æ–¹æ³•å°†è¿™ä¸ªIntent å¯¹è±¡ä¼ é€’ç»™å®ƒ â€¢ å‘é€å¹¿æ’­å¯ä»¥é€šè¿‡ä¼ é€’ä¸€ä¸ªIntent å¯¹è±¡è‡³ç»™Context.sendBroadcast() ã€ Context.sendOrderedBroadcast()æˆ–Context.sendStickyBroadcast()Android ä¼šè°ƒç”¨æ‰€æœ‰å¯¹æ­¤å¹¿æ’­æœ‰å…´è¶£çš„å¹¿æ’­æŽ¥æ”¶å™¨çš„onReceive()æ–¹æ³•ï¼Œå°†intent ä¼ é€’ç»™å®ƒä»¬ 3&gt; å››å¤§ç»„ä»¶çš„å…³é—­ å†…å®¹æä¾›è€…ä»…åœ¨å“åº”ContentResolver æå‡ºè¯·æ±‚çš„æ—¶å€™æ¿€æ´»ã€‚è€Œä¸€ä¸ªå¹¿æ’­æŽ¥æ”¶å™¨ä»…åœ¨å“åº”å¹¿æ’­ä¿¡æ¯çš„æ—¶å€™æ¿€æ´»ã€‚æ‰€ä»¥ï¼Œæ²¡æœ‰å¿…è¦åŽ»æ˜¾å¼çš„å…³é—­è¿™äº›ç»„ä»¶ã€‚ Activityå…³é—­ï¼šå¯ä»¥é€šè¿‡è°ƒç”¨å®ƒçš„finish()æ–¹æ³•æ¥å…³é—­ä¸€ä¸ªactivity æœåŠ¡å…³é—­ï¼šå¯¹äºŽé€šè¿‡startService()æ–¹æ³•å¯åŠ¨çš„æœåŠ¡è¦è°ƒç”¨Context.stopService()æ–¹æ³•å…³é—­æœåŠ¡ï¼Œä½¿ç”¨bindService()æ–¹æ³•å¯åŠ¨çš„æœåŠ¡è¦è°ƒç”¨Contex.unbindService ()æ–¹æ³•å…³é—­æœåŠ¡ CreatedbyEdwardZhangâˆ£ä¸€ä¸ªä¸åªåšæŠ€æœ¯çš„å…¬ä¼—å· é•¿æŒ‰ï¼Œè¯†åˆ«äºŒç»´ç ï¼ŒåŠ å…³æ³¨]]></content>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android Chapter I. ç£¨äººçš„ä¸æ˜¯ Android è€Œæ˜¯ AndroidStudio :ï¼ˆ]]></title>
    <url>%2F2017%2F06%2F09%2FAndroid%20Chapter%20I.%20%E7%A3%A8%E4%BA%BA%E7%9A%84%E4%B8%8D%E6%98%AF%20Android%20%E8%80%8C%E6%98%AF%20AndroidStudio%2F</url>
    <content type="text"><![CDATA[è§£å†³ Android Studio åˆ›å»ºé¡¹ç›®æ—¶æžå…¶çš„æ…¢çš„å°´å°¬Android Studio åˆ›å»ºæ–°é¡¹ç›®çš„æ—¶å€™ï¼Œä¼šåœ¨è¿›åº¦æ¡çš„ç•Œé¢æ»žç•™å¾ˆä¹…ã€‚ æœ‰æ—¶å€™ä¸€å¤©éƒ½å¡åœ¨è¿™. æ‰“å¼€å…¶å®ƒé¡¹ç›®æœ‰äº›æ—¶å€™,ä¹Ÿä¼šå‡ºçŽ°è¿™ç§æƒ…å†µã€‚ è¿™é‡Œå†™å›¾ç‰‡æè¿° â™¦åˆ›å»ºå·¥ç¨‹ åŽŸå› ï¼šåœ¨åˆ›å»ºæ–°é¡¹ç›®çš„æ—¶å€™å¯¼è‡´è¿›åº¦æ¡ä¸€ç›´åœåœ¨ Gradle:Project: çš„ä¸»è¦åŽŸå› å°±æ˜¯ï¼Œä½ å¯¼å…¥çš„é¡¹ç›®ä¸Žä½ çš„IDEç‰ˆæœ¬ä¸åŒ¹é…ï¼Œæ­¤è¿‡ç¨‹æ­£åœ¨ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„ gradleã€‚å¦‚æžœç½‘ç»œæ¯å…·çš„è¯ï¼Œ å‘µå‘µ â€¦ è¿™é‡Œå†™å›¾ç‰‡æè¿° æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤æ¥å°±èƒ½å®Œç¾Žè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåªè¦ä¸¤æ­¥å°±OKäº†ï¼ŒHere we go ! æŸ¥çœ‹å¯¹åº”çš„ Gradle ç‰ˆæœ¬æ‰¾åˆ°ä½ åˆ›å»ºé¡¹ç›®æ—¶çš„ä¿å­˜è·¯å¾„ï¼Œé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ gradle æ–‡ä»¶å¤¹ è¿™é‡Œå†™å›¾ç‰‡æè¿° â™¦æ‰¾åˆ° gradle æ–‡ä»¶å¤¹ æŽ¥ç€åŒå‡»è¿›å…¥ gradle æ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ° wrapper\gradle-wrapper.properties æ–‡ä»¶ è¿™é‡Œå†™å›¾ç‰‡æè¿° â™¦gradle-wrapper.properties æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ distributionBase=GRADLE_USER_HOMEdistributionPath=wrapper/distszipStoreBase=GRADLE_USER_HOMEzipStorePath=wrapper/distsdistributionUrl=https\://services.gradle.org/distributions/gradle-3.3-all.zipåœ¨æœ€åŽä¸€è¡Œå¯ä»¥çœ‹åˆ°ï¼Œå½“å‰é¡¹ç›®ä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯ gradle-3.3-allï¼Œå¦‚æžœä½ çš„ç”µè„‘ä¸Šï¼Œå·²ç»ä¸‹è½½äº†è¿™ä¸ªç‰ˆæœ¬ï¼Œé‚£ä¹ˆé¡¹ç›®å¾ˆå¿«å°±æ‰“å¼€äº†ã€‚å½“ç„¶ï¼Œ å¦‚æžœä¸å­˜åœ¨çš„è¯ï¼Œè‚¯å®šæ˜¯éœ€è¦ä¸‹è½½çš„ â€¦ å‘µå‘µ ä½ å¯ä»¥åœ¨ä»¥ä¸‹ä½ç½®æ‰¾åˆ°ç”µè„‘ä¸Šå®‰è£…äº†ä»€ä¹ˆç‰ˆæœ¬çš„ Gradleï¼š 1%USERPROFILE%\.gradle\wrapper\dists è¿™é‡Œå†™å›¾ç‰‡æè¿° æŸ¥çœ‹å½“å‰å·²å®‰è£…çš„ Gradle ç‰ˆæœ¬æ³¨æ„ï¼šæœ‰äº›æ—¶å€™ï¼Œä½ ä¼šå‘çŽ°ä½ åˆ›å»ºçš„é¡¹ç›®ä¸­æ ¹æœ¬æ²¡æœ‰ gradle æ–‡ä»¶å¤¹ã€‚ (æˆ‘æ“¦ï¼Œé‚£å²‚ä¸æ˜¯çžŽæ¯”æ¯”äº†ï¼Ÿ) å½“é¡¹ç›®ä¸­ä¸å­˜åœ¨ gradle æ–‡ä»¶å¤¹çš„æ—¶å€™ï¼Œ è¿™ç§æƒ…å†µå’Œåˆ›å»ºæ–°çš„é¡¹ç›®æ˜¯ä¸€æ ·çš„ã€‚éƒ½é»˜è®¤ä½¿ç”¨ Android Studio ç‰ˆæœ¬å¯¹åº”çš„ gradle ç‰ˆæœ¬ï¼›ä¹Ÿå°±æ˜¯å¦‚æžœä½ çš„ Android Studio ç‰ˆæœ¬è¶Šé«˜, å¯¹åº”çš„ gradle ç‰ˆæœ¬å°±è¶Šé«˜ â€¦ å…·ä½“çš„éœ€è¦åœ¨ Android å®˜ç½‘ æŸ¥çœ‹ï¼Œæˆ–è€…æŸ¥çœ‹ Android Studio å®‰è£…ç›®å½•ä¸‹çš„ gradle æ–‡ä»¶å¤¹ã€‚2. æ‰‹åŠ¨ä¸‹è½½å¯¹åº”çš„ Gradle ç‰ˆæœ¬å¾ˆå¤šæ—¶å€™ï¼Œè‡ªåŠ¨ä¸‹è½½ä¼š å¾ˆæ…¢ å¾ˆæ…¢ å¾ˆæ…¢ï¼ˆé‡è¦çš„äº‹æƒ…è¦è¯´å‡ éæ¥ç€ï¼Ÿè¿™å°±æ˜¯åˆ›å»ºé¡¹ç›®æ—¶å¡åŠå¤©çš„åŽŸå› ï¼‰ï¼Œæ¯•ç«Ÿä¸æ˜¯æ‰€æœ‰äººçš„ç½‘ç»œéƒ½é‚£ä¹ˆåŠ â€¦ æ€»æœ‰ç—›è‹¦çš„äººç¾¤ â€¦ è¿™ä¸ªæ—¶å€™ï¼Œå°±éœ€è¦æ‰‹åŠ¨ä¸‹è½½äº†ã€‚ æ‰‹åŠ¨ä¸‹è½½ä¹‹å‰ï¼Œéœ€è¦çŸ¥é“å½“å‰ Android Studio å¯¹åº”çš„ Gradle ç‰ˆæœ¬æ˜¯å¤šå°‘ â€¦ æ€Žä¹ˆçœ‹å‘¢ï¼Ÿ æ–¹æ³•1ï¼šå®˜ç½‘æŸ¥çœ‹ â€¦ (ä¸æŽ¨è)æ–¹æ³•2ï¼šåœ¨æˆ‘ä»¬ä¸Šé¢æŸ¥çœ‹å½“å‰é¡¹ç›®å¯¹åº”çš„ Gradle ç‰ˆæœ¬æ—¶ï¼ˆé¡¹ç›®å\gradle\wrapper\gradle-wrapper.properties ï¼‰ï¼Œè¿™é‡Œçš„å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„ç‰ˆæœ¬ï¼Œä½¿ç”¨è¿™ä¸ªé“¾æŽ¥ä¸‹è½½å³å¯ã€‚ 1distributionUrl=https\://services.gradle.org/distributions/gradle-3.3-all.zip é‚£ä¹ˆæˆ‘ä»¬ä¸‹è½½å¥½äº†ï¼Œè¦ä¿å­˜åœ¨å“ªé‡Œå‘¢ï¼Œä¸æ€¥ï¼Œæˆ‘ä»¬ç»“åˆä¸‹é¢è¿™ä¸ªæ–¹æ³•ä¸€èµ·çœ‹ æ–¹æ³•3ï¼šï¼ˆæœªåˆ›å»ºé¡¹ç›®çš„å…„å¼Ÿï¼‰æ‰“å¼€ Android Studioï¼Œåˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ï¼Œå½“å‡ºçŽ°è¿›åº¦æ¡çš„æ—¶å€™. (ä¸€èˆ¬æ¥è¯´ä¼šå¡åœ¨è¿™é‡Œ.) æ­¤æ—¶èŽ«æ…Œï¼Œ é‡ç‚¹æ¥äº† æ‰“å¼€è¿™ä¸ªè·¯å¾„ï¼š %USERPROFILE%\.gradle\wrapper\dists ï¼Œä¸å‡ºæ„å¤–, ä½ ä¼šçœ‹åˆ°ä¸€ä¸ªåŒ…å«ç‰ˆæœ¬ä¿¡æ¯çš„æ–‡ä»¶å¤¹.( å¦‚æžœæ²¡æœ‰çœ‹åˆ°ï¼Œé‚£å°±ç­‰ç­‰ â€¦ ) è¿™é‡Œå†™å›¾ç‰‡æè¿° æ‰“å¼€è¿™ä¸ªç‰ˆæœ¬æ–‡ä»¶å¤¹ï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªéšæœºç”Ÿæˆçš„æ–‡ä»¶å¤¹ï¼š( è¿™ä¸ªæ–‡ä»¶å¤¹ç‰¹åˆ«éœ€è¦æ³¨æ„ï¼Œå› ä¸ºè¿™æ˜¯å…³é”® ã€‚æœ‰äº›æ—¶å€™ï¼Œä½ ä¼šå‘çŽ°ï¼Œæ˜Žæ˜Žå·²ç»ä¸‹è½½äº†å¯¹åº”ç‰ˆæœ¬çš„ Gradleï¼Œä½†æ˜¯èŽ«åå…¶å¦™çš„åˆä¸‹è½½äº†ä¸€æ¬¡ã€‚å°±æ˜¯å› ä¸ºè¿™ä¸ªéšæœºæ–‡ä»¶å¤¹ä¸å¯¹å¯¼è‡´çš„ã€‚è§£å†³æ–¹æ³•æ˜¯ï¼Œåœ¨æ¯ä¸ªéšæœºæ–‡ä»¶å¤¹ä¸­éƒ½ æ‹·è´ ä¸€ä»½ä½ ä¸‹è½½å¥½çš„ gradle-ç‰ˆæœ¬-all.zip å°±è¡Œäº† ) è¿™é‡Œå†™å›¾ç‰‡æè¿° éšæœºç”Ÿæˆçš„æ–‡ä»¶å¤¹å¦‚æžœä¸Šé¢çš„éšæœºæ–‡ä»¶å¤¹æ²¡æœ‰ç”Ÿæˆ, é‚£å°±ç­‰ç­‰ â€¦. é€šè¿‡ä»¥ä¸Šç¿»å±±è¶Šå²­ï¼Œæˆ‘ä»¬åªéœ€è¦è¿™ä¸ªåŒ…å«éšæœºæ–‡ä»¶å¤¹çš„è·¯å¾„ â€¦ å› ä¸ºæ‰‹åŠ¨ä¸‹è½½çš„ Gradle å¿…é¡»æ”¾åœ¨è¿™ä¸ªè‹›åˆ»çš„è·¯å¾„ä¸‹ï¼Œæ‰æœ‰æ•ˆ ã€‚ ä¸€å®šè¦æŒ‰ç…§å¯¹åº”çš„ç‰ˆæœ¬ä¸‹è½½å“¦ï¼Œå¹¶ä¸”ä¸€å®šè¦æ”¾åœ¨åˆšåˆšåƒè¾›ä¸‡è‹¦ç”Ÿæˆçš„éšæœºæ–‡ä»¶å¤¹çš„è·¯å¾„ä¸­â€¦ ä¹‹åŽï¼Œé‡å¯ Android Studioï¼Œå†æ¬¡åˆ›å»ºæ–°é¡¹ç›®ï¼Œä½ å°±ä¼šå‘çŽ° â€¦ å“‡å¡žï¼Œè¿™ä¹ˆå¿« ??? è¿™é‡Œå†™å›¾ç‰‡æè¿° ç›¸è§æ¨æ™š hhhå¦‚æžœå¤§å®¶å¯¹è¿™æœ‰è¶£å®žç”¨çš„æŠ€æœ¯è´´æ„Ÿå…´è¶£æˆ‘åŽæœŸä¼šç»§ç»­åŠªåŠ›çš„ï¼è¯·å¤§å®¶æ‰«æäºŒç»´ç ï¼å…³æ³¨æˆ‘ï¼ è¿™é‡Œå†™å›¾ç‰‡æè¿° è¿™é‡Œå†™å›¾ç‰‡æè¿°]]></content>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Access denied for user 'root'@'localhost' (using password YES)]]></title>
    <url>%2F2017%2F06%2F09%2FAccess%20denied%20for%20user%20'root'%40'localhost'%20(using%20password%20YES)%2F</url>
    <content type="text"><![CDATA[Access denied for user â€˜rootâ€™@â€™localhostâ€™ (using password:YES)å®‰è£…æˆåŠŸçš„MySQLï¼Œå†æ¬¡ç™»å½•é—®é¢˜ã€‚ 1.ç™»å½•å‡ºçŽ°Access denied for user â€˜rootâ€™@â€™localhostâ€™ (using password:YES)é—®é¢˜ è®¤å‡†ç™»å½•å‘½ä»¤æ˜¯å¦å†™æ­£ç¡®ï¼Œè¯·ä¸€å®šçœ‹ä»”ç»†äº†ã€‚ 1mysql -hlocalhost -uroot -p ç„¶åŽè¾“å…¥å¯†ç ã€‚ç”¨æˆ·åä¸€å®šä¸ºrootã€‚è¾“é”™å°±æ˜¯å¦‚ä¸Šé—®é¢˜ã€‚ 2.æ‰¾ä¸åˆ°é»˜è®¤çš„Cï¼š//pragramdataä¸‹MySQLæ•°æ®åº“æ–‡ä»¶é—®é¢˜ åœ¨win10ä¸­programdataæ–‡ä»¶å¤¹æ˜¯è¢«éšè—äº†çš„ï¼Œæ˜¾ç¤ºéšè—å³å¯ã€‚ å¦‚æžœè¦å°†å·²å­˜åœ¨çš„æ•°æ®åº“å­˜æ”¾è·¯å¾„æ”¹ä¸ºè‡ªå·±æƒ³è¦çš„ï¼ŒæŠŠåŽŸæ–‡ä»¶å‰ªåˆ‡åˆ°ç›®æ ‡è·¯å¾„ä¸‹ã€‚ ç„¶åŽï¼Œæ›´æ”¹my.inié…ç½®æ–‡ä»¶ä¸­çš„datadirå€¼ä¸ºç›®æ ‡è·¯å¾„ã€‚ é‡å¯MySQLå³å¯ã€‚ æ³¨æ„ï¼š å¦‚æžœä¿®æ”¹äº†datadirè·¯å¾„ï¼Œä½†æ˜¯æ²¡æœ‰å°†åŽŸæ–‡ä»¶æ‹·è´è¿‡æ¥ï¼Œä¼šå‡ºçŽ°æ— æ³•å¯åŠ¨MySQLã€‚ CreatedbyEdwardZhangâˆ£ä¸€ä¸ªä¸åªåšæŠ€æœ¯çš„å…¬ä¼—å· é•¿æŒ‰ï¼Œè¯†åˆ«äºŒç»´ç ï¼ŒåŠ å…³æ³¨]]></content>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åˆ©ç”¨ Github+Hexo æ­å»ºBlog]]></title>
    <url>%2F2016%2F06%2F08%2F%E5%88%A9%E7%94%A8%20Github%2BHexo%20%E6%90%AD%E5%BB%BABlog%2F</url>
    <content type="text"><![CDATA[Blog å°±æ˜¯ç”¨æ¥è®°å½•è‡ªå·±çš„ç”Ÿæ´»æˆ–æ˜¯å‘è¡¨è‡ªå·±çš„è§è§£çš„ä¸€ç§ç½‘ç»œæ—¥è®°ã€‚æ—¢ç„¶ä¸€åˆ‡äº’è”ç½‘çš„åˆè¡·æ˜¯ Freeï¼ˆè‡ªç”±ï¼‰ Freeï¼ˆå…è´¹ï¼‰ï¼Œé‚£æˆ‘ä»¬åˆä½•å¿…ä¸ºäº†è®°æ—¥è®°è€Œæ–¥å·¨èµ„å‘¢ï¼Ÿ wikipedia â™ â™¥â™¦â™£ ï¼ˆFrom.wikipediaï¼‰ So å¹²è´§ coming!ä»Šå¤©EdwardZhangå°±æ¥å¸¦å¤§å®¶çœ‹çœ‹å¦‚ä½•0è´¹ç”¨æ­å»ºç¬¦åˆè‡ªå·±å®¡ç¾Žçš„Blogï¼Here we go ~ åˆ©ç”¨ Github+Hexo è¿›è¡Œæ­å»ºï¼ˆä»¥ä¸‹è¿‡ç¨‹åŸºäºŽWindowsç³»ç»Ÿï¼‰å‡†å¤‡å·¥ä½œï¼š&emsp;1.å®‰è£…Node.js&emsp;&ensp;&ensp;ä¸‹è½½åœ°å€ï¼šä¼ é€é—¨&emsp;&ensp;&ensp;åŽ» NodeJs å®˜ç½‘ä¸‹è½½ç›¸åº”ç‰ˆæœ¬ï¼Œè¿›è¡Œå®‰è£…å³å¯ã€‚&emsp;&ensp;&ensp;å¯ä»¥é€šè¿‡node -vçš„å‘½ä»¤æ¥æµ‹è¯•NodeJSæ˜¯å¦å®‰è£…æˆåŠŸ è¿™é‡Œå†™å›¾ç‰‡æè¿° &emsp;2.å®‰è£…Git&emsp;&ensp;&ensp;ä¸‹è½½åœ°å€ï¼šä¼ é€é—¨&emsp;&ensp;&ensp;åŽ» Git å®˜ç½‘ä¸‹è½½ç›¸åº”ç‰ˆæœ¬ï¼Œè¿›è¡Œå®‰è£…å³å¯ã€‚ git1 git2 git3 git4 git5 &emsp;&ensp;&ensp;å¯ä»¥é€šè¿‡git â€“versionçš„å‘½ä»¤æ¥æµ‹è¯•gitæ˜¯å¦å®‰è£…æˆåŠŸ gitcmd &emsp;3.æ³¨å†ŒGithubè´¦å·&emsp;&ensp;&ensp;åŽ» Github å®˜ç½‘è¿›è¡Œæ³¨å†Œå³å¯ã€‚&emsp;&ensp;&ensp;æ³¨å†Œå®Œä¹‹åŽè®°å¾—æ·»åŠ  SSH Keyã€‚&emsp;&ensp;&ensp;è¿™ä¸ª SSH Keyæ˜¯ä¸€ä¸ªè®¤è¯ï¼Œè®©githubè¯†åˆ«ç»‘&emsp;&ensp;&ensp;è¿™å°æœºå™¨ï¼Œå…è®¸è¿™å°æœºå™¨æäº¤ã€‚æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š&emsp;&ensp;&ensp;cd ~/.ssh&emsp;&ensp;&ensp;~è¿™ä¸ªç¬¦å·ï¼Œè¡¨ç¤ºåœ¨ç”¨æˆ·ç›®å½•ä¸‹&emsp;&ensp;&ensp;æ‰§è¡Œä»£ç å¦‚æžœæç¤ºï¼šNo such file or directory è¯´æ˜Žä½ æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨gitã€‚&emsp;&ensp;&ensp;ä¸‹é¢å°±è¯´ä¸‹æ€Žä¹ˆé…ç½®SSH Keyã€‚&emsp;&ensp;&ensp;ç”Ÿäº§æ–°çš„SSH Keyé…ç½®&emsp;&ensp;&ensp;åœ¨Git Bashæ‰§è¡Œä»£ç ï¼šï¼ˆæ­¤å¤„æœ‰å‘ï¼è¦æ³¨æ„è¿è¡ŒGit Bashæ—¶å³é”®ä½¿ç”¨ç®¡ç†å‘˜èº«ä»½è¿è¡Œï¼‰&emsp;&ensp;&ensp;ssh-keygen -t rsa -C &quot;your email address&quot;&emsp;&ensp;&ensp;è®°å¾—ä¿®æ”¹æˆä½ è‡ªå·±é‚®ç®±åœ°å€ã€‚&emsp;&ensp;&ensp;æˆåŠŸåŽä¼šç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶id_rsa ä»¥åŠid_rsa.pubã€‚&emsp;&ensp;&ensp;è¿™ä¸¤ä¸ªæ–‡ä»¶åœ¨åˆšæ‰ç”¨æˆ·çš„.sshç›®å½•ä¸‹&emsp;&ensp;&ensp;å¦‚å›¾ï¼š 12345 &emsp;&ensp;&ensp;id_rsa&emsp;&ensp;&ensp;id_rsa.pub 0 &emsp;&ensp;&ensp;ä¹‹åŽåœ¨githubæ·»åŠ SSH Key,åœ¨ä»»æ„ç•Œé¢å³ä¸Šè§’&emsp;&ensp;&ensp;ç‚¹å‡»ä½ çš„å¤´åƒï¼Œé€‰æ‹©Settings-&gt; SSH keys-&gt;New SSH key è¿™é‡Œå†™å›¾ç‰‡æè¿°&emsp;&ensp;&ensp;Congratulationsï¼&emsp;&ensp;&ensp;æ·»åŠ æˆåŠŸï¼ æ­å»ºåšå®¢ï¼š&emsp;1.å®‰è£…Hexo&emsp;&ensp;&ensp;åœ¨æœ¬åœ°æ–°å»ºä¸€ä¸ªBlogæ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å³é”®ï¼Œé€‰æ‹©Git Bashã€‚ è¿™é‡Œå†™å›¾ç‰‡æè¿° è¾“å…¥æŒ‡ä»¤å®‰è£…hexoï¼šnpm install -g hexo&emsp;&ensp;&ensp;ç­‰å®‰è£…å®Œæ¯•ï¼Œé€šè¿‡è¾“å…¥hexoçš„å‘½ä»¤æ¥æµ‹è¯•Hexoæ˜¯å¦å®‰è£…æˆåŠŸï¼ŒæˆåŠŸå¦‚ä¸‹å›¾å±•ç¤ºï¼š è¿™é‡Œå†™å›¾ç‰‡æè¿° æŽ¥ç€åˆå§‹åŒ–Hexoï¼šhexo init hexo&emsp;&ensp;&ensp;åˆå§‹åŒ–æˆåŠŸä¼šæ˜¾ç¤ºStart blogging with Hexo! 1 &emsp;&ensp;&ensp;è¿™æ—¶åœ¨ä½ åˆšæ‰åˆ›å»ºçš„Blogé‡Œé¢ä¼šå¤šå‡ºä¸€ä¸ªhexoæ–‡ä»¶ è¿™é‡Œå†™å›¾ç‰‡æè¿° &emsp;&ensp;&ensp;è¿›å…¥åˆ°hexoç›®å½•ï¼Œè¾“å…¥æŒ‡ä»¤npm install&emsp;&ensp;&ensp;å®‰è£…ä¾èµ–æ–‡ä»¶ä»¥åŠéƒ¨ç½²å½¢æˆæ–‡ä»¶&emsp;&ensp;&ensp;æ‰“å¼€hexoç›®å½• cd hexo&emsp;&ensp;&ensp;å®‰è£…ä¾èµ–æ–‡ä»¶ npm install&emsp;&ensp;&ensp;éƒ¨ç½²å½¢æˆæ–‡ä»¶ hexo generatehexo generate 123 &emsp;&ensp;&ensp;æœ€åŽåªå‰©ä¸‹è¿è¡Œserver&emsp;&ensp;&ensp;è·‘èµ·hexoæœåŠ¡&emsp;&ensp;&ensp;hexo server è¿™é‡Œå†™å›¾ç‰‡æè¿° &emsp;&ensp;&ensp;è¿™æ—¶æç¤º&emsp;&ensp;&ensp;Hexo is running at http://loalhost:4000/.&emsp;&ensp;&ensp;æŽ¥ç€æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥http://localhost:4000&emsp;&ensp;&ensp;ä¾¿å¯çœ‹åˆ°é»˜è®¤çš„åšå®¢ï¼Œå¦‚å›¾ï¼š 12 &emsp;&ensp;&ensp;è‡³æ­¤ï¼Œhexoå·²ç»å®‰è£…å®Œæ¯•ã€‚&emsp;é…ç½®githubPageï¼š&emsp;&ensp;&ensp;ç™»å½•githubï¼Œç‚¹å‡»â€œNew respositoryâ€ &emsp;&ensp;&ensp;æ–°å»ºä¸€ä¸ªä»“åº“&emsp;&ensp;&ensp;è¾“å…¥ä»“åº“åï¼šä½ çš„githubåç§°,github.io&emsp;&ensp;&ensp;ï¼ˆè¿™é‡Œåƒä¸‡ä¸è¦å¿ƒå­˜ä¾¥å¹¸éšæ„è¾“åŸŸåã€‚ã€‚ã€‚åŽæžœä½ æ‡‚ï¼‰&emsp;&ensp;&ensp;ç„¶åŽç‚¹å‡»Create repositoryã€‚ è¿™é‡Œå†™å›¾ç‰‡æè¿° &emsp;&ensp;&ensp;æ³¨æ„ï¼šè¿™è¾¹çš„åˆ›å»ºåå­—&emsp;&ensp;&ensp;ä¸€å®šè¦ç”¨çš„githubçš„ç”¨æˆ·åï¼&emsp;&ensp;&ensp;ä¸€å®šè¦ç”¨çš„githubçš„ç”¨æˆ·åï¼&emsp;&ensp;&ensp;ä¸€å®šè¦ç”¨çš„githubçš„ç”¨æˆ·åï¼&emsp;å¯ç”¨GitHub Page&emsp;&ensp;&ensp;ç‚¹å‡»å³è¾¹çš„â€œSettingâ€èœå•è¿›å…¥è®¾ç½® è¿™é‡Œå†™å›¾ç‰‡æè¿° &emsp;&ensp;&ensp;æ‹‰åˆ°æœ€ä¸‹é¢&emsp;&ensp;&ensp;ç‚¹å‡» Choose a theme&emsp;&ensp;&ensp;éšä¾¿é€‰æ‹©ä¸€ä¸ªæ ·å¼ ä¹‹åŽä¼šç”¨è‡ªå·±çš„hexoè¦†ç›–&emsp;&ensp;&ensp;ç‚¹å‡»â€Publish pageâ€&emsp;&ensp;&ensp;å‘å¸ƒgithubé»˜è®¤ç”Ÿæˆçš„ä¸€ä¸ªé™æ€ç«™ç‚¹&emsp;&ensp;&ensp;è¯•ç€æ‰“å¼€è‡ªå·±åœ¨githubçš„é™æ€ç½‘å€ï¼Œ&emsp;&ensp;&ensp;æˆ‘çš„https://Edward7Zhang.github.io ï¼Œ&emsp;&ensp;&ensp;ä½ ä¼šå‘çŽ°ï¼Œ&emsp;&ensp;&ensp;æ‰“å¼€æ˜¯ä½ è‡ªå·±åˆšæ‰é€‰æ‹©é™æ€ç«™ç‚¹æ¨¡ç‰ˆã€‚&emsp;&ensp;&ensp;å°†æœ¬åœ°hexoé¡¹ç›®æ‰˜ç®¡åˆ°Github&emsp;&ensp;&ensp;æ‰“å¼€ä¿®æ”¹hexoç›®å½•ä¸‹é…ç½®æ–‡ä»¶_config.yml è¿™é‡Œå†™å›¾ç‰‡æè¿° &emsp;&ensp;&ensp;ç¼–è¾‘æœ€åŽé¢çš„deployå±žæ€§ï¼ŒåŠ å…¥ä»£ç ï¼š 1234type: gitrepository: git@github.com:your-github-name/your-github-name.github.io.gitbranch: master typeä½¿ç”¨æ˜¯gitã€‚ &emsp;&ensp;&ensp;repositoryå±žæ€§æ”¹æˆä½ çš„åˆšæ‰åˆ›å»ºä»“åº“gitåœ°å€ã€‚&emsp;&ensp;&ensp;åˆ†æ”¯branchå¡«å†™masterã€‚&emsp;&ensp;&ensp;è¿™è¾¹è¯´ä¸‹æœ¬åœ°ç½‘ç«™é…ç½®æ–‡ä»¶ _config.yml&emsp;&ensp;&ensp;ç½‘ç«™çš„é…ç½®æ–‡ä»¶ï¼Œ&emsp;&ensp;&ensp;ä½ å¯ä»¥åœ¨è¿™é‡Œé…ç½®ä¸€äº›åŸºæœ¬ä¿¡æ¯ã€‚&emsp;&ensp;&ensp;ï¼ˆåªè¦ä½ è¿‡äº†å››çº§åº”è¯¥éƒ½æ‡‚ /// ///ï¼‰&emsp;&ensp;&ensp;æ ¹æ®è‡ªå·±çš„éœ€è¦ä¿®æ”¹å³å¯ï¼&emsp;&ensp;&ensp;å®‰è£…hexo-deployer-gitæ’ä»¶ 1cnpm install hexo-deployer-git --save è¿™é‡Œå†™å›¾ç‰‡æè¿° &emsp;&ensp;&ensp;éƒ¨ç½²ä½ æœ¬åœ°çš„ä¸»é¢˜åˆ°githubä¸Š &emsp;&ensp;&ensp;ä»£ç å¦‚ä¸‹ï¼Œæ¯æ¬¡ä¿®æ”¹æœ¬åœ°ä¸»é¢˜ï¼Œéƒ½éœ€è¦æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼š 123hexo cleanhexo generator #ç®€å†™ hexo ghexo deploy #ç®€å†™ hexo d è¿™é‡Œå†™å›¾ç‰‡æè¿° è¿™é‡Œå†™å›¾ç‰‡æè¿° è¿™é‡Œå†™å›¾ç‰‡æè¿° &emsp;&ensp;&ensp;æœ€åŽçœ‹ä¸‹ï¼Œéƒ¨ç½²åˆ°githubä¸Šçš„æ•ˆæžœï¼ è¿™é‡Œå†™å›¾ç‰‡æè¿° &emsp;&ensp;&ensp;Congratulation!!!Finished this project! â€‹&emsp;&ensp;&ensp;æ˜¯ä¸æ˜¯çž¬é—´æ„Ÿè§‰è‡ªå·±å¼ºçš„ä¸è¡Œ è¿™é‡Œå†™å›¾ç‰‡æè¿° &emsp;&ensp;&ensp;OK,ä»¥ä¸Šä¸ºWindowsä¸‹ä½¿ç”¨Hexo+Githubæ­å»ºä¸ªäººåšå®¢ã€‚ æ€Žä¹ˆæ ·No Payï¼ŒMore Gain è¿™é‡Œå†™å›¾ç‰‡æè¿°]]></content>
      <tags>
        <tag>Blog</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2016%2F06%2F08%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to EdwardZhangâ€™s Blog! This is my first step,there are more about my codingLife and insLife.You can ask me on GitHub or Weibo. -haveaniceday.]]></content>
  </entry>
</search>