{"meta":{"title":"EdwardZhang's Blog","subtitle":"Life starts at the end of your comfort zone. âš½ ğŸ‚ ğŸƒ ğŸš´ âŒ¨ï¸","description":"Life starts at the end of your comfort zone.","author":"EdwardZhang","url":"https://edward7zhang.github.io"},"pages":[{"title":"","date":"2017-06-07T17:11:42.146Z","updated":"2017-06-07T17:11:42.146Z","comments":true,"path":"404.html","permalink":"https://edward7zhang.github.io/404.html","excerpt":"","text":""},{"title":"Friends' Link","date":"2018-04-06T09:54:51.000Z","updated":"2019-03-06T11:54:37.833Z","comments":true,"path":"link/index.html","permalink":"https://edward7zhang.github.io/link/index.html","excerpt":"","text":"@card{ æ¯“å½¦ } @card{ Fury97 }"},{"title":"categories","date":"2018-03-02T15:59:33.944Z","updated":"2018-03-02T15:59:33.944Z","comments":false,"path":"categories/index.html","permalink":"https://edward7zhang.github.io/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2018-04-06T09:01:56.000Z","updated":"2018-04-06T09:15:40.257Z","comments":true,"path":"tags/index.html","permalink":"https://edward7zhang.github.io/tags/index.html","excerpt":"","text":""},{"title":"IN ART WE LIVE.","date":"2018-05-01T19:39:00.000Z","updated":"2018-05-05T15:53:34.567Z","comments":false,"path":"photo/index.html","permalink":"https://edward7zhang.github.io/photo/index.html","excerpt":"","text":"@column-2{ @card{ - } @card{ - } } @column-2{ @card{ - } @card{ - } } @column-2{ @card{ - } @card{ - } } @column-2{ @card{ - } @card{ - } } @column-2{ @card{ - } @card{ - } } @column-2{ @card{ - } @card{ - } } @column-2{ @card{ - } @card{ - } } @column-2{ @card{ - } @card{ - } } @column-2{ @card{ - } @card{ - } } @column-2{ @card{ - } @card{ - } } @column-2{ @card{ - } @card{ - } } @column-2{ @card{ - } @card{ - } } @column-2{ @card{ - } @card{ - } } @column-2{ @card{ - } @card{ - } } @column-2{ @card{ - } @card{ - } } @column-2{ @card{ - } @card{ - } } @column-2{ @card{ - } @card{ - } } @column-2{ @card{ - } @card{ - } } @column-2{ @card{ - } @card{ - } } @column-2{ @card{ - } @card{ - } } IN ART WE LIVE."}],"posts":[{"title":"è®ºï¼šçº¿ç¨‹ã€å¤šçº¿ç¨‹å’Œçº¿ç¨‹æ± ","slug":"è®ºï¼šçº¿ç¨‹ã€å¤šçº¿ç¨‹å’Œçº¿ç¨‹æ± ","date":"2019-03-06T04:07:14.000Z","updated":"2019-03-07T08:29:22.706Z","comments":true,"path":"2019/03/06/è®ºï¼šçº¿ç¨‹ã€å¤šçº¿ç¨‹å’Œçº¿ç¨‹æ± /","link":"","permalink":"https://edward7zhang.github.io/2019/03/06/è®ºï¼šçº¿ç¨‹ã€å¤šçº¿ç¨‹å’Œçº¿ç¨‹æ± /","excerpt":"","text":"å…³äº Javaå¤šçº¿ç¨‹ï¼Œåœ¨é¢è¯•çš„æ—¶å€™ï¼Œé—®çš„æ¯”è¾ƒå¤šçš„å°±æ˜¯â‘ æ‚²è§‚é”å’Œä¹è§‚é”ã€â‘¡synchronizedå’ŒlockåŒºåˆ«ä»¥åŠvolatileå’Œsynchronizedçš„åŒºåˆ«ï¼Œâ‘¢å¯é‡å…¥é”ä¸éå¯é‡å…¥é”çš„åŒº åˆ«ã€â‘£å¤šçº¿ç¨‹æ˜¯è§£å†³ä»€ä¹ˆé—®é¢˜çš„ã€â‘¤çº¿ç¨‹æ± è§£å†³ä»€ä¹ˆé—®é¢˜ã€â‘¥çº¿ç¨‹æ± çš„åŸç†ã€â‘¦çº¿ç¨‹æ± ä½¿ç”¨æ—¶çš„æ³¨æ„äº‹é¡¹ã€â‘§AQSåŸ ç†ã€â‘¨ReentranLockæºç ï¼Œè®¾è®¡åŸç†ï¼Œæ•´ä½“è¿‡ç¨‹ ç­‰ç­‰é—®é¢˜ã€‚ å¼€å¯çº¿ç¨‹çš„ä¸‰ç§æ–¹å¼ï¼Ÿ ç»§æ‰¿ Thread ç±»ï¼Œé‡å†™ run()æ–¹æ³•ï¼Œåœ¨ run()æ–¹æ³•ä¸­ç¼–å†™è¦å®Œæˆçš„ä»»åŠ¡ 1new Thread().start(); å®ç° Runnable æ¥å£ï¼Œå®ç° run()æ–¹æ³• 1new Thread(new MyRunnable()).start(); å®ç° Callable æ¥å£ MyCallable ç±»ï¼Œå®ç° call()æ–¹æ³•ï¼Œä½¿ç”¨ FutureTask ç±»æ¥åŒ…è£… Callable å¯¹è±¡ï¼Œä½¿ç”¨ FutureTask å¯¹è±¡ä½œä¸º Thread å¯¹è±¡çš„ target åˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹ï¼›è°ƒç”¨ FutureTask å¯¹è±¡çš„ get() æ–¹æ³•æ¥è·å¾—å­çº¿ç¨‹æ‰§è¡Œç»“æŸåçš„è¿”å›å€¼ã€‚ 12FutureTask&lt;Integer&gt; ft = new FutureTask&lt;Integer&gt;(new MyCallable());new Thread(ft).start(); run() å’Œ start() æ–¹æ³•çš„åŒºåˆ«run()æ–¹æ³•åªæ˜¯çº¿ç¨‹çš„ä¸»æ–¹æ³•ä½“ï¼Œå’Œæ™®é€šæ–¹æ³•ä¸€æ ·ï¼Œä¸ä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹ã€‚åªæœ‰è°ƒç”¨ start()æ–¹æ³•ï¼Œæ‰ä¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œæ–°çº¿ç¨‹æ‰ä¼šè°ƒç”¨ run()æ–¹æ³•ï¼Œçº¿ç¨‹æ‰ä¼šå¼€å§‹æ‰§è¡Œã€‚ å¦‚ä½•æ§åˆ¶æŸä¸ªæ–¹æ³•å…è®¸å¹¶å‘è®¿é—®çš„çº¿ç¨‹æ•°ï¼Ÿåˆ›å»º Semaphore å˜é‡ï¼Œ1Semaphore semaphore = new Semaphore(5, true); å½“æ–¹æ³•è¿›å…¥æ—¶ï¼Œè¯·æ±‚ä¸€ä¸ªä¿¡å·ï¼Œå¦‚æœä¿¡å·è¢«ç”¨å®Œåˆ™ç­‰å¾…ï¼Œæ–¹æ³•è¿è¡Œå®Œï¼Œé‡Šæ”¾ä¸€ä¸ªä¿¡å·ï¼Œé‡Šæ”¾çš„ä¿¡å·æ–°çš„çº¿ç¨‹å°±å¯ä»¥ä½¿ç”¨ã€‚ åœ¨ Java ä¸­ wait å’Œ sleep æ–¹æ³•çš„ä¸åŒ wait()æ–¹æ³•å±äº Object ç±»ï¼Œè°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œçº¿ç¨‹ä¼šæ”¾å¼ƒå¯¹è±¡é”ï¼Œåªæœ‰è¯¥å¯¹è±¡è°ƒç”¨ notify()æ–¹æ³•åæœ¬çº¿ç¨‹æ‰è¿›å…¥å¯¹è±¡é”å®šæ± å‡†å¤‡è·å–å¯¹è±¡é”è¿›å…¥è¿è¡ŒçŠ¶æ€ã€‚ sleep()æ–¹æ³•å±äº Thread ç±»ï¼Œsleep å¯¼è‡´ç¨‹åºæš‚åœæ‰§è¡ŒæŒ‡å®šçš„æ—¶é—´ï¼Œè®©å‡º CPUï¼Œä½†ä»–çš„ç›‘æ§çŠ¶æ€ä¾ç„¶ä¿å­˜ç€ï¼Œå½“æŒ‡å®šæ—¶é—´åˆ°äº†åˆä¼šå›åˆ°è¿è¡ŒçŠ¶æ€ï¼Œsleep()æ–¹æ³•ä¸­çº¿ç¨‹ä¸ä¼šé‡Šæ”¾å¯¹è±¡é”ã€‚è°ˆè°ˆ wait()/notfiy() æ–¹æ³•çš„ç†è§£ notify()ï¼šå”¤é†’åœ¨æ­¤å¯¹è±¡ç›‘è§†å™¨ä¸Šç­‰å¾…çš„å•ä¸ªçº¿ç¨‹ notifyAll()ï¼šé€šçŸ¥æ‰€æœ‰ç­‰å¾…ç«äº‰è¯¥èµ„æºçš„çº¿ç¨‹ wait()ï¼šé‡Šæ”¾ obj çš„é”ï¼Œå¯¼è‡´å½“å‰çš„çº¿ç¨‹ç­‰å¾…ï¼Œç›´æ¥å…¶ä»–çº¿ç¨‹è°ƒç”¨æ­¤å¯¹è±¡çš„ notify()æˆ– notifyAll(); å½“è¦è°ƒç”¨ wait()æˆ– notify()/notifyAll()æ–¹æ³•æ—¶ï¼Œä¸€å®šè¦å¯¹ç«äº‰èµ„æºè¿›è¡ŒåŠ é”ï¼Œä¸€èˆ¬æ”¾åˆ° synchronized(obj)ä»£ç ä¸­ã€‚å½“è°ƒç”¨ obj.notify/notifyAll åï¼Œè°ƒç”¨çº¿ç¨‹ä¾æ—§æŒæœ‰ obj é”ï¼Œå› æ­¤ç­‰å¾…çº¿ç¨‹è™½è¢«å”¤é†’ï¼Œä½†ä»æ— æ³•è·å¾— obj é”ï¼ŒçŸ¥é“è°ƒç”¨çº¿ç¨‹é€€å‡º synchronized å—ï¼Œé‡Šæ”¾ obj é”åï¼Œå…¶ä»–ç­‰å¾…çº¿ç¨‹æ‰æœ‰æœºä¼šè·å¾—é”ç»§ç»­æ‰§è¡Œã€‚ä»€ä¹ˆå¯¼è‡´çº¿ç¨‹é˜»å¡ï¼Ÿ çº¿ç¨‹æ‰§è¡Œäº† Thread.sleep(int millsecond)æ–¹æ³•ï¼Œæ”¾å¼ƒ CPUï¼Œç¡çœ ä¸€æ®µæ—¶é—´ï¼Œä¸€æ®µæ—¶é—´è¿‡åæ¢å¤æ‰§è¡Œï¼› çº¿ç¨‹æ‰§è¡Œä¸€æ®µåŒæ­¥ä»£ç ï¼Œä½†æ— æ³•è·å¾—ç›¸å…³çš„åŒæ­¥é”ï¼Œåªèƒ½è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œç­‰åˆ°è·å–åŒæ­¥é”ï¼Œæ‰èƒ½æ¢å¤æ‰§è¡Œï¼› çº¿ç¨‹æ‰§è¡Œäº†ä¸€ä¸ªå¯¹è±¡çš„ wait()æ–¹æ³•ï¼Œç›´æ¥è¿›å…¥é˜»å¡æ€ï¼Œç­‰å¾…å…¶ä»–çº¿ç¨‹æ‰§è¡Œ notify()/notifyAll()æ“ä½œï¼› çº¿ç¨‹æ‰§è¡ŒæŸäº› IO æ“ä½œï¼Œå› ä¸ºç­‰å¾…ç›¸å…³èµ„æºè€Œè¿›å…¥äº†é˜»å¡æ€ï¼Œå¦‚ System.inï¼Œä½†æ²¡æœ‰æ”¶åˆ°é”®ç›˜çš„è¾“å…¥ï¼Œåˆ™è¿›å…¥é˜»å¡æ€ã€‚ çº¿ç¨‹ç¤¼è®©ï¼ŒThread.yield()æ–¹æ³•ï¼Œæš‚åœå½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡ï¼ŒæŠŠæ‰§è¡Œæœºä¼šè®©ç»™ç›¸åŒæˆ–è€…æ›´é«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹ï¼Œä½†å¹¶ä¸ä¼šä½¿çº¿ç¨‹è¿›å…¥é˜»å¡æ€ï¼Œçº¿ç¨‹ä»å¤„äºå¯æ‰§è¡Œæ€ï¼Œéšæ—¶å¯èƒ½å†æ¬¡åˆ†å¾— CPU æ—¶é—´ã€‚çº¿ç¨‹è‡ªé—­ï¼Œjoin()æ–¹æ³•ï¼Œåœ¨å½“å‰çº¿ç¨‹è°ƒç”¨å¦ä¸€ä¸ªçº¿ç¨‹çš„ join()æ–¹æ³•ï¼Œåˆ™å½“å‰çº¿ç¨‹è¿›å…¥é˜»å¡æ€ï¼Œç›´åˆ°å¦ä¸€ä¸ªçº¿ç¨‹è¿è¡Œç»“æŸï¼Œå½“å‰çº¿ç¨‹å†ç”±é˜»å¡è½¬ä¸ºå°±ç»ªæ€ã€‚ çº¿ç¨‹æ‰§è¡Œ suspend()ä½¿çº¿ç¨‹è¿›å…¥é˜»å¡æ€ï¼Œå¿…é¡» resume()æ–¹æ³•è¢«è°ƒç”¨ï¼Œæ‰èƒ½ä½¿çº¿ç¨‹é‡æ–°è¿›å…¥å¯æ‰§è¡ŒçŠ¶æ€ã€‚çº¿ç¨‹å¦‚ä½•å…³é—­ï¼Ÿ ä½¿ç”¨æ ‡å¿—ä½ ä½¿ç”¨ stop() æ–¹æ³•ï¼Œä½†è¯¥æ–¹æ³•å°±åƒå…³æ‰ç”µè„‘ç”µæºä¸€æ ·ï¼Œå¯èƒ½ä¼šå‘ç”Ÿé¢„æ–™ä¸åˆ°çš„é—®é¢˜ ä½¿ç”¨ä¸­æ–­ interrupt()12345678public class Thread&#123; //ä¸­æ–­å½“å‰çº¿ç¨‹ public void interrupt(); //åˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­ public boolean isInterrupt(); //æ¸…é™¤å½“å‰çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ï¼Œå¹¶è¿”å›ä¹‹å‰çš„å€¼ public static boolen interrupted();&#125; ä½†è°ƒç”¨ interrupt()æ–¹æ³•åªæ˜¯ä¼ é€’ä¸­æ–­è¯·æ±‚æ¶ˆæ¯ï¼Œå¹¶ä¸ä»£è¡¨è¦ç«‹é©¬åœæ­¢ç›®æ ‡çº¿ç¨‹ è®²ä¸€ä¸‹ Java ä¸­çš„åŒæ­¥çš„æ–¹æ³•ä¹‹æ‰€ä»¥éœ€è¦åŒæ­¥ï¼Œå› ä¸ºåœ¨å¤šçº¿ç¨‹å¹¶å‘æ§åˆ¶ï¼Œå½“å¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œä¸€ä¸ªå¯å…±äº«çš„èµ„æºæ—¶ï¼Œå¦‚æœæ²¡æœ‰é‡‡å–åŒæ­¥æœºåˆ¶ï¼Œå°†ä¼šå¯¼è‡´æ•°æ®ä¸å‡†ç¡®ï¼Œå› æ­¤éœ€è¦åŠ å…¥åŒæ­¥é”ï¼Œç¡®ä¿åœ¨è¯¥çº¿ç¨‹æ²¡æœ‰å®Œæˆæ“ä½œå‰è¢«å…¶ä»–çº¿ç¨‹è°ƒç”¨ï¼Œä»è€Œä¿è¯è¯¥å˜é‡çš„å”¯ä¸€æ€§å’Œå‡†ç¡®æ€§ã€‚ synchronized ä¿®é¥°åŒæ­¥ä»£ç å—æˆ–æ–¹æ³•ç”±äº Java çš„æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå†…ç½®é”ï¼Œç”¨æ­¤å…³é”®å­—ä¿®é¥°æ–¹æ³•æ—¶ï¼Œå†…ç½®é”ä¼šä¿æŠ¤æ•´ä¸ªæ–¹æ³•ã€‚åœ¨è°ƒç”¨è¯¥æ–¹æ³•å‰ï¼Œéœ€è·å¾—å†…ç½®é”ï¼Œå¦åˆ™å°±å¤„äºé˜»å¡çŠ¶æ€ volatile ä¿®é¥°å˜é‡ä¿è¯å˜é‡åœ¨çº¿ç¨‹é—´çš„å¯è§æ€§æ¯æ¬¡çº¿ç¨‹è¦è®¿é—® volatile ä¿®é¥°çš„å˜é‡æ—¶éƒ½ä»ä¸»å­˜ä¸­è¯»å–ï¼Œè€Œä¸æ˜¯ç¼“å­˜ä¸­ï¼Œè¿™æ ·æ¯ä¸ªçº¿ç¨‹è®¿é—®åˆ°çš„å˜é‡éƒ½æ˜¯ä¸€æ ·çš„ã€‚ä¸”ä½¿ç”¨å†…å­˜å±éšœã€‚ ReentrantLock é‡å…¥é”ï¼Œå®ƒå¸¸ç”¨çš„æ–¹æ³•æœ‰ ReentrantLock()ï¼šåˆ›å»ºä¸€ä¸ª ReentrantLock å®ä¾‹lock()è·å¾—é” unlock()é‡Šæ”¾é” ä½¿ç”¨å±€éƒ¨å˜é‡ ThreadLocal å®ç°çº¿ç¨‹åŒæ­¥æ¯ä¸ªçº¿ç¨‹éƒ½ä¼šä¿å­˜ä¸€ä»½è¯¥å˜é‡çš„å‰¯æœ¬ï¼Œå‰¯æœ¬ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œè¿™æ ·æ¯ä¸ªçº¿ç¨‹éƒ½å¯ä»¥éšæ„ä¿®æ”¹è‡ªå·±çš„å‰¯æœ¬ï¼Œè€Œä¸å½±å“å…¶ä»–çº¿ç¨‹ã€‚å¸¸ç”¨æ–¹æ³•ï¼š ThreadLocal()åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æœ¬åœ°å˜é‡ï¼› get()è¿”å›æ­¤çº¿ç¨‹å°±ä¸æ‡‚å½“å‰çº¿ç¨‹å‰¯æœ¬å˜é‡ï¼› initialValue()è¿”å›æ¬¡çº¿ç¨‹å±€éƒ¨å˜é‡çš„å½“å‰çº¿ç¨‹çš„å‡ºäº‹å€¼ï¼› set(T value)å°†æ­¤çº¿ç¨‹å˜é‡çš„å½“å‰çº¿ç¨‹å‰¯æœ¬ä¸­çš„å€¼è®¾ç½®ä¸º valueä½¿ç”¨åŸå­å˜é‡å¦‚ AtomicIntegerå¸¸ç”¨æ–¹æ³•ï¼š AtomicInteger(int value)åˆ›å»ºä¸ªæœ‰ç»™å®šåˆè¯•å€¼çš„ AtomicInteger æ•´æ•°ï¼› addAndGet(int data)ä»¥åŸå­æ–¹å¼å°†ç»™å®šå€¼ä¸å½“å‰å€¼ç›¸åŠ ä½¿ç”¨é˜»å¡é˜Ÿåˆ—å®ç°çº¿ç¨‹åŒæ­¥LinkedBlockingQueue é¢è¯•ä¸­å…³äº synchronized å…³é”®å­—çš„ 5 è¿å‡»è¯´ä¸€è¯´è‡ªå·±å¯¹äº synchronized å…³é”®å­—çš„äº†è§£è¯´ä¸€è¯´è‡ªå·±æ˜¯æ€ä¹ˆä½¿ç”¨ synchronized å…³é”®å­—ï¼Œåœ¨é¡¹ç›®ä¸­ç”¨åˆ°äº†å—ï¼Ÿè®²ä¸€ä¸‹ synchronized å…³é”®å­—çš„åº•å±‚åŸç†è¯´ä¸€è¯´ JDK1.6 ä¹‹åçš„ synchronized å…³é”®å­—åº•å±‚åäº†å“ªäº›ä¼˜åŒ–ï¼Œå¯ä»¥è¯¦ç»†ä»‹ç»ä¸€ä¸‹è¿™äº›ä¼˜åŒ–å—ï¼Ÿè°ˆè°ˆ synchronized å’Œ ReenTrantLock çš„åŒºåˆ«","categories":[],"tags":[{"name":"Interview","slug":"Interview","permalink":"https://edward7zhang.github.io/tags/Interview/"},{"name":"Java","slug":"Java","permalink":"https://edward7zhang.github.io/tags/Java/"}]},{"title":"Androidç«¯å„ç±»å›¾ç‰‡åŠ è½½æ¡†æ¶å¯¹æ¯”","slug":"Androidç«¯å„ç±»å›¾ç‰‡åŠ è½½æ¡†æ¶å¯¹æ¯”","date":"2019-03-04T04:07:14.000Z","updated":"2019-03-04T01:13:13.575Z","comments":true,"path":"2019/03/04/Androidç«¯å„ç±»å›¾ç‰‡åŠ è½½æ¡†æ¶å¯¹æ¯”/","link":"","permalink":"https://edward7zhang.github.io/2019/03/04/Androidç«¯å„ç±»å›¾ç‰‡åŠ è½½æ¡†æ¶å¯¹æ¯”/","excerpt":"","text":"å‰æ®µæ—¶é—´çš„é¢è¯•è¿‡ç¨‹ä¸­è¢«é—®åˆ°ç”¨è¿‡ä»€ä¹ˆå›¾ç‰‡åŠ è½½æ¡†æ¶ï¼Œæˆ‘éšå£è€Œå‡ºGlideï¼Œé¢è¯•å®˜ç»§ç»­è¿½é—®ä¸‹å»æ˜¯åšè¿‡ä»€ä¹ˆæ¯”è¾ƒå¾—å‡ºGlideæ¯”è¾ƒé«˜æ•ˆå—ï¼Ÿæˆ‘å°±é˜»å¡äº†â€¦æ‰€ä»¥åœ¨æ­¤åšä¸€æ¬¡å¤ç›˜ï¼Œé’ˆå¯¹Androidç«¯çš„å„ç§åŠ è½½æ¡†æ¶è¿›è¡Œå¯¹æ¯” å‰è¨€ å›¾ç‰‡åŠ è½½æ˜¯Androidå¼€å‘ä¸­æœ€æœ€åŸºç¡€çš„åŠŸèƒ½ï¼ŒåŒæ—¶å›¾ç‰‡åŠ è½½OOMä¹Ÿä¸€ç›´å›°æ‰°ç€å¾ˆå¤šå¼€å‘è€…ï¼Œå› æ­¤ä¸ºäº†é™ä½å¼€å‘å‘¨æœŸå’Œéš¾åº¦ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé€‰ç”¨ä¸€äº›å›¾ç‰‡åŠ è½½çš„å¼€æºåº“ã€‚ è€ç‰Œçš„æœ‰ImageLoaderï¼ŒUIL, Volleyï¼Œä¸»æµçš„æœ‰ï¼ŒPicassoï¼ŒGlideï¼ŒFrescoç­‰ç­‰ï¼Œé€‰æ‹©ä¸€æ¬¾å¥½çš„å›¾ç‰‡åŠ è½½è£¤å°±æˆäº†æˆ‘ä»¬çš„é¦–è¦é—®é¢˜ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬å¯¹æ¯”ä¸€ä¸‹ä¸»æµçš„ä¸‰æ¬¾ Picassoï¼ŒGlideï¼ŒFrescoæ¡†æ¶çš„ä¼˜ç¼ºç‚¹ã€‚ Picassoï¼ŒGlideï¼ŒFrescoçš„å‰ä¸–ä»Šç”ŸåŸºæœ¬é¡¹å¯¹æ¯” å¯¹æ¯”é¡¹ Picasso Glide Fresco åœ°å€ github.com/square/picaâ€¦ github.com/bumptech/glâ€¦ github.com/facebook/frâ€¦ å‘å¸ƒæ—¶é—´ 2013å¹´5æœˆ 2014å¹´9æœˆ 2015å¹´5æœˆ æ˜¯å¦æ”¯æŒgif false true true æ˜¯å¦æ”¯æŒwebP true true true è§†é¢‘ç¼©ç•¥å›¾ false true true å¤§å° 100k 500 KB 2ï½3M åŠ è½½é€Ÿåº¦ ä¸­ é«˜ é«˜ Disk+Men Cache true true true Easy of use low mediun difficult star 13160 14709 12444 å¼€å‘è€… Squareä¸»å¯¼ Googleä¸»å¯¼ Facebookä¸»å¯¼ åŠ è½½å›¾ç‰‡è€—æ—¶åŠå†…å­˜å¯¹æ¯”without animations å¯¹æ¯”é¡¹ Picasso Glide Fresco java heapï¼native heap/å¹³å‡è€—æ—¶ï¼ˆwithout animationsï¼‰ PicassoåŠ è½½æ— åŠ¨ç”»å›¾ç‰‡](https://user-gold-cdn.xitu.io/2018/5/14/1635f4318d2b55e8?imageslim) | ![GlideåŠ è½½æ— åŠ¨ç”»å›¾ç‰‡](https://user-gold-cdn.xitu.io/2018/5/14/1635f4318d1496bb?imageslim) | ![FrescoåŠ è½½æ— åŠ¨ç”»å›¾ç‰‡ max java heap 12.6MB 11.1MB 13.9MB max native heap 43.8MB 43.8MB 43.8MB avg wait time 241ms 34ms 44ms ä»ä¸Šé¢çš„åŠ è½½é™æ€å›¾ç‰‡å¯ä»¥çœ‹å‡ºä¸‰å¤§ä¸»æµæ¡†æ¶æ€§èƒ½éƒ½ä¸é”™ï¼Œä¸è¿‡ç”¨æ•°æ®è¯´è¯æ•´ä½“è€Œè¨€Glideæ›´èƒœä¸€ç­¹ã€‚ allow animations å¯¹æ¯”é¡¹ Picasso Glide Fresco java heapï¼native heap/å¹³å‡è€—æ—¶ï¼ˆallow animationsï¼‰ PicassoåŠ è½½åŠ¨ç”»å›¾ç‰‡](https://user-gold-cdn.xitu.io/2018/5/14/1635f4318d57eddb?imageslim) | ![GlideåŠ è½½æ— åŠ¨ç”»å›¾ç‰‡](https://user-gold-cdn.xitu.io/2018/5/14/1635f431b031be09?imageslim) | ![FrescoåŠ è½½åŠ¨ç”»å›¾ç‰‡ max java heap 6.8MB 74.8.1MB 36.1MB max native heap 18.2MB 66.8MB 545.3MB avg wait time 1707ms 33910ms 15142ms ä¸Šé¢çš„æ•°æ®æˆ‘ä»¬å¯ä»¥å¿½ç•¥Picassoäº†ï¼Œå› ä¸ºå®ƒæ ¹æœ¬ä¸æ”¯æŒgifï¼Œé‚£ä¹ˆGlideå’ŒFrescoå¯ä»¥çœ‹å‡ºFrescoçš„java heapåŸºæœ¬ä¿æŒè¾ƒä½å¹³ç¨³çŠ¶æ€ï¼Œè€ŒGlideçš„java heapåŸºæœ¬ä¸ºFrescoçš„ä¸€å€ï¼Œæ‰€ä»¥OOMçš„é£é™©ä¹Ÿæ¯”frescoå¤§ä¸€å€ã€‚ä»æ—¶é—´ä¸Šglideæ˜¯æœ‰ä¸€å®šå·®è·ï¼Œä¸è¿‡frescoæœ‰ä¸¤å¼ å›¾ç‰‡æ²¡åŠ è½½å®Œæˆï¼Œæ‰€ä»¥æ—¶é—´ä¸æ˜¯å®Œå…¨å¯é çš„æ•°æ®ä»native heapå¯ä»¥çœ‹å‡ºFrescoæœ€é«˜545MBï¼Œè¿™ä¸ªæœ‰ç‚¹ææ€–ï¼Œä¸‹é¢æˆ‘ä»¬çœ‹ä¸ªçŸ¥è¯†ç‚¹ã€‚ çŸ¥è¯†ç‚¹ Java Heapæ˜¯å¯¹äºJava è™šæ‹Ÿæœºè€Œè¯´çš„ï¼Œä¸€èˆ¬çš„å¤§å°ä¸Šé™æ˜¯ 16M 24M 48M 76M å…·ä½“è§†æ‰‹æœºè€Œå®šã€‚ Native Heapæ˜¯å¯¹äºC/C++ç›´æ¥æ“çºµçš„ç³»ç»Ÿå †å†…å­˜ï¼Œæ‰€ä»¥å®ƒçš„ä¸Šé™ä¸€èˆ¬æ˜¯å…·ä½“RAMçš„2/3å·¦å³ã€‚ æ‰€ä»¥å¯¹äº2Gçš„æ‰‹æœºè€Œè¨€ï¼ŒJava Heap å¤§æ¦‚76Mï¼Œè€ŒNative Heapæ˜¯760Må·¦å³ï¼Œç›¸å·®10å€ã€‚ æ‰€ä»¥Frescoä¹Ÿæ˜¯å­˜åœ¨ä¸€å®šé£é™©çš„ï¼Œå› ä¸ºnative heapæ•°æ®å®åœ¨æ˜¯å¤ªææ€–äº†ã€‚ è¯¦ç»†å±æ€§å¯¹æ¯”æ¥ä¸‹æ¥åªè¯¦ç»†å¯¹æ¯”Frescoå’ŒGlidePicassoä»å„æ–¹é¢éƒ½æ¯”è¿™ä¸¤ä¸ªå¼±ï¼Œè¿™é‡Œå°±ä¸æµªè´¹æ—¶é—´äº†ã€‚ å¯¹æ¯”é¡¹ Glide Fresco é…ç½® compile &#39;com.github.bumptech.glide:glide:XXX.XXX&#39; compile &#39;com.facebook.fresco:fresco:XXX.XXX åˆå§‹åŒ– ç›´æ¥ä½¿ç”¨ Fresco.initialize(this); layout æ™®é€šImageView ç‹¬æœ‰çš„SimpleDraweeView åœ†è§’ï¼Œ åœ†å½¢ éœ€è¦è‡ªå·±å®ç°åœ†è§’ï¼Œç»§æ‰¿è‡ªBitmapTransformationæ“ä½œbitmapå¯¹è±¡å®ç° é€šè¿‡RoundingParamsè®¾ç½®å‚æ•° ç¼“å­˜ Glideå†…å­˜å’Œç£ç›˜ç¼“å­˜ ä¸‰çº§ç¼“å­˜ï¼Œåˆ†åˆ«æ˜¯ Bitmapç¼“å­˜ï¼Œæœªè§£ç å›¾ç‰‡ç¼“å­˜ï¼Œ æ–‡ä»¶ç¼“å­˜ã€‚ ç¼“å­˜å›¾åƒå¤§å° Glideåˆ™ä¼šæ ¹æ®ImageViewæ§ä»¶å°ºå¯¸è·å¾—å¯¹åº”çš„å¤§å°çš„bitmapæ¥å±•ç¤ºï¼Œä»è€Œç¼“å­˜ä¹Ÿå¯ä»¥é’ˆå¯¹ä¸åŒçš„å¯¹è±¡ï¼šåŸå§‹å›¾åƒï¼ˆsourceï¼‰ï¼Œç»“æœå›¾åƒ(result) ç¼“å­˜åŸå§‹å›¾åƒ åŠ è½½ç­–ç•¥ Glideåªæœ‰å ä½å›¾ å…ˆåŠ è½½å°å°ºå¯¸å›¾ç‰‡ï¼Œå†åŠ è½½å¤§å°ºå¯¸çš„ åŠ è½½è¿›åº¦ false true ä»ä¸Šé¢çš„å¯¹æ¯”ä¸­å¯ä»¥çœ‹å‡ºæ¥Frescoè›®å¼ºå¤§çš„ï¼Œä¸è¿‡ä½¿ç”¨èµ·æ¥ç›¸å¯¹Glideè¦å¤æ‚ä¸€ç‚¹ï¼Œè€Œä¸”éœ€è¦è‡ªå·±çš„SimpleDraweeViewï¼Œè¿™ä¸€ç‚¹åœ¨åˆ‡æ¢æ¡†æ¶çš„æ—¶å€™æœ€è®©äººå¤´ç–¼äº†ã€‚è€Œä¸”Glideç›´æ¥ç¼“å­˜ç›¸å¯¹å¤§å°çš„å›¾ç‰‡ï¼ŒèŠ‚çœç©ºé—´çš„åŒæ—¶ä¸‹åœºå¦‚æœæ˜¯åŒæ ·å¤§å°çš„å›¾ç‰‡å°±ä¸è¦å†æ¬¡è¯·æ±‚ï¼Œç›´æ¥å¯ä»¥ä½¿ç”¨ã€‚ ä¾èµ–Glide123456789repositories &#123; mavenCentral() google()&#125;dependencies &#123; implementation 'com.github.bumptech.glide:glide:4.9.0' annotationProcessor 'com.github.bumptech.glide:compiler:4.9.0'&#125; Frescoè¦ä½¿ç”¨å®Œæ•´çš„FrescoåŠŸèƒ½å°±è¦å¯¼å…¥å¦‚ä¸‹çš„ä¾èµ–123dependencies &#123; implementation 'com.facebook.fresco:fresco:1.12.1'&#125; bitmapæ“ä½œGlide 1234Bitmap myBitmap = Glide.with(ä¸Šä¸‹æ–‡) .load(url) .asBitmap() //å¿…é¡» .get() FrescoFrescoè¦è·å–bitmapæ›´åŠ å¤æ‚ï¼Œ è€Œä¸”ä½¿ç”¨èµ·æ¥ä¹Ÿå¹¶ä¸æ˜¯é‚£ä¹ˆé¡ºç•…ã€‚é¦–å…ˆï¼ŒFrescoä¸ºäº†æ›´å¥½åœ°ç®¡ç†bitmap å¯¹è±¡ï¼ˆbitmapå¯¹è±¡ç”³è¯·å’Œé‡Šæ”¾ä¼šå¼•èµ·é¢‘ç¹çš„GCæ“ä½œï¼Œä»è€Œå¼•èµ·ç•Œé¢å¡é¡¿ï¼‰ï¼Œ å¼•å…¥äº†å¯å…³é—­çš„å¼•ç”¨ï¼ˆCloseableReferenceï¼‰, æŒæœ‰è€…åœ¨ç¦»å¼€ä½œç”¨åŸŸçš„æ—¶å€™éœ€è¦å…³é—­è¯¥å¼•ç”¨ï¼Œè€Œæˆ‘ä»¬è¦è·å–çš„bitmap å¯¹è±¡å°±æ˜¯å¯å…³é—­çš„å¼•ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¸èƒ½åƒä¸Šé¢Glideé‚£æ ·æŠŠbitmap å¯¹è±¡å–å‡ºæ¥ä¼ é€’ç»™å…¶å®ƒåœ°æ–¹ä½¿ç”¨ï¼Œ åªèƒ½åœ¨Frescoæä¾›çš„ä½œç”¨åŸŸèŒƒå›´å†…ä½¿ç”¨ã€‚å®é™…é¡¹ç›®ä¸­ä¼šè·å–ç¼“å†²çš„æ–‡ä»¶å¯¹è±¡ï¼š 12345//åŒæ ·åœ¨DataSubscriberä¸­è·å–FileBinaryResource resource = (FileBinaryResource) Fresco.getImagePipelineFactory().getMainFileCache().getResource(new SimpleCacheKey(url));if (resource != null &amp;&amp; resource.getFile() != null) &#123; setImage(ImageSource.uri(Uri.fromFile(resource.getFile())));&#125; ä¼˜ç‚¹Glide å¤šç§å›¾ç‰‡æ ¼å¼çš„ç¼“å­˜ï¼Œé€‚ç”¨äºæ›´å¤šçš„å†…å®¹è¡¨ç°å½¢å¼ï¼ˆå¦‚Gifã€WebPã€ç¼©ç•¥å›¾ã€Videoï¼‰ ç”Ÿå‘½å‘¨æœŸé›†æˆï¼ˆæ ¹æ®Activityæˆ–è€…Fragmentçš„ç”Ÿå‘½å‘¨æœŸç®¡ç†å›¾ç‰‡åŠ è½½è¯·æ±‚ï¼‰ é«˜æ•ˆå¤„ç†Bitmapï¼ˆbitmapçš„å¤ç”¨å’Œä¸»åŠ¨å›æ”¶ï¼Œå‡å°‘ç³»ç»Ÿå›æ”¶å‹åŠ›ï¼‰ é«˜æ•ˆçš„ç¼“å­˜ç­–ç•¥ï¼Œçµæ´»ï¼ˆPicassoåªä¼šç¼“å­˜åŸå§‹å°ºå¯¸çš„å›¾ç‰‡ï¼ŒGlideç¼“å­˜çš„æ˜¯å¤šç§è§„æ ¼ï¼‰ï¼ŒåŠ è½½é€Ÿåº¦å¿«ä¸”å†…å­˜å¼€é”€å°ï¼ˆé»˜è®¤Bitmapæ ¼å¼çš„ä¸åŒï¼Œä½¿å¾—å†…å­˜å¼€é”€æ˜¯Picassoçš„ä¸€åŠï¼‰ Fresco æœ€å¤§çš„ä¼˜åŠ¿åœ¨äº5.0ä»¥ä¸‹(æœ€ä½2.3)çš„bitmapåŠ è½½ã€‚åœ¨5.0ä»¥ä¸‹ç³»ç»Ÿï¼ŒFrescoå°†å›¾ç‰‡æ”¾åˆ°ä¸€ä¸ªç‰¹åˆ«çš„å†…å­˜åŒºåŸŸ(AshmemåŒº) å¤§å¤§å‡å°‘OOMï¼ˆåœ¨æ›´åº•å±‚çš„Nativeå±‚å¯¹OOMè¿›è¡Œå¤„ç†ï¼Œå›¾ç‰‡å°†ä¸å†å ç”¨Appçš„å†…å­˜ï¼‰ é€‚ç”¨äºéœ€è¦é«˜æ€§èƒ½åŠ è½½å¤§é‡å›¾ç‰‡çš„åœºæ™¯ ç¼ºç‚¹Glide -æ²¡æœ‰æ–‡ä»¶ç¼“å­˜ -java heapæ¯”Frescoé«˜ Fresco åŒ…è¾ƒå¤§ï¼ˆ2~3Mï¼‰ ç”¨æ³•å¤æ‚ åº•å±‚æ¶‰åŠc++é¢†åŸŸï¼Œé˜…è¯»æºç æ·±å…¥å­¦ä¹ éš¾åº¦å¤§ ç»“è®ºFrescoè™½ç„¶å¾ˆå¼ºå¤§ï¼Œä½†æ˜¯åŒ…å¾ˆå¤§ï¼Œä¾èµ–å¾ˆå¤šï¼Œä½¿ç”¨å¤æ‚ï¼Œè€Œä¸”è¿˜è¦åœ¨å¸ƒå±€ä½¿ç”¨SimpleDraweeViewæ§ä»¶åŠ è½½å›¾ç‰‡ã€‚ç›¸å¯¹è€Œè¨€Glideä¼šè½»å¥½å¤šï¼Œä¸Šæ‰‹å¿«ï¼Œä½¿ç”¨ç®€å•ï¼Œé…ç½®æ–¹ä¾¿ï¼Œè€Œä¸”ä»åŠ è½½é€Ÿåº¦å’Œæ€§èƒ½æ–¹é¢ä¸ç›¸ä¸Šä¸‹ã€‚å¯¹äºä¸€èˆ¬çš„APPæ¥è¯´Glideæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œå¦‚æœæ˜¯ä¸“ä¸šçš„å›¾ç‰‡APPé‚£ä¹ˆFrescoè¿˜æ˜¯å¿…è¦çš„ã€‚ æ–‡ç« éƒ¨åˆ†è½¬è½½äº","categories":[],"tags":[{"name":"Android","slug":"Android","permalink":"https://edward7zhang.github.io/tags/Android/"}]},{"title":"Retrofit2.0 ä½¿ç”¨æ•™ç¨‹ï¼ˆä¸å¸¸è§ç½‘ç»œè¯·æ±‚åº“å¯¹æ¯”ï¼‰","slug":"Retrofit2.0 ä½¿ç”¨æ•™ç¨‹ï¼ˆä¸å¸¸è§ç½‘ç»œè¯·æ±‚åº“å¯¹æ¯”ï¼‰","date":"2019-03-03T04:07:14.000Z","updated":"2019-03-03T09:11:48.794Z","comments":true,"path":"2019/03/03/Retrofit2.0 ä½¿ç”¨æ•™ç¨‹ï¼ˆä¸å¸¸è§ç½‘ç»œè¯·æ±‚åº“å¯¹æ¯”ï¼‰/","link":"","permalink":"https://edward7zhang.github.io/2019/03/03/Retrofit2.0 ä½¿ç”¨æ•™ç¨‹ï¼ˆä¸å¸¸è§ç½‘ç»œè¯·æ±‚åº“å¯¹æ¯”ï¼‰/","excerpt":"","text":"å‰è¨€ åœ¨Androidå¼€å‘ä¸­ï¼Œç½‘ç»œè¯·æ±‚ååˆ†å¸¸ç”¨ å½“ä¸‹çš„ç½‘ç»œè¯·æ±‚åŠ è½½åº“ä¸­ï¼ŒRetrofitåˆ™æ˜¯å½“ä¸‹hottestçš„ä¸€ä¸ªç½‘ç»œè¯·æ±‚åº“ ç®€ä»‹ ç‰¹åˆ«æ³¨æ„ï¼š å‡†ç¡®æ¥è¯´ï¼ŒRetrofitæ˜¯ä¸€ä¸ª RESTful çš„ HTTP ç½‘ç»œè¯·æ±‚æ¡†æ¶çš„å°è£… åŸå› ï¼šç½‘ç»œè¯·æ±‚çš„å·¥ä½œæœ¬è´¨ä¸Šæ˜¯OkHttpå®Œæˆçš„ï¼Œè€ŒRetrofitä»…è´Ÿè´£ç½‘ç»œè¯·æ±‚æ¥å£çš„å°è£… Appåº”ç”¨ç¨‹åºé€šè¿‡ Retrofit è¯·æ±‚ç½‘ç»œï¼Œå®é™…ä¸Šæ˜¯ä½¿ç”¨Retrofitæ¥å£å±‚å°è£…è¯·æ±‚å‚æ•°ã€Headerã€Urlç­‰ä¿¡æ¯ï¼Œä¹‹åç”±OkHttpå®Œæˆåç»­çš„è¯·æ±‚æ“ä½œ åœ¨æœåŠ¡ç«¯è¿”å›æ•°æ®ä¹‹åï¼ŒOkHttpå°†åŸå§‹çš„ç»“æœäº¤ç»™Retrofitï¼ŒRetrofitæ ¹æ®ç”¨æˆ·çš„éœ€æ±‚å¯¹ç»“æœè¿›è¡Œè§£æ ä¸å…¶ä»–å¼€æºåº“å¯¹æ¯”é™¤äº† Retrofitï¼Œå¦‚ä»Š Android ä¸­ä¸»æµçš„ç½‘ç»œè¯·æ±‚æ¡†æ¶æœ‰ï¼š Android-Async-Http Volly OkHttp ä»‹ç» å‡ ç§ç½‘ç»œè¯·æ±‚åº“ä¹‹é—´çš„åŒºåˆ«å¯¹æ¯” é™„ï¼šå„ä¸ªä¸»æµç½‘ç»œè¯·æ±‚åº“çš„ Github åœ°å€ Android-Async-Http Volley OkHttp Retrofit Retrofitä½¿ç”¨ä»‹ç»ä½¿ç”¨Retrofitçš„æ­¥éª¤å…±æœ‰7ä¸ªï¼š æ­¥éª¤1ï¼šæ·»åŠ  Retrofit åº“çš„ä¾èµ– æ­¥éª¤2ï¼šåˆ›å»º æ¥å—æœåŠ¡å™¨è¿”å›æ•°æ® çš„ç±» æ­¥éª¤3ï¼šåˆ›å»º ç”¨äºæè¿°ç½‘ç»œè¯·æ±‚ çš„æ¥å£ æ­¥éª¤4ï¼šåˆ›å»º Retrofit å®ä¾‹ æ­¥éª¤5ï¼šåˆ›å»º ç½‘ç»œè¯·æ±‚æ¥å£å®ä¾‹ å¹¶ é…ç½®ç½‘ç»œè¯·æ±‚å‚æ•° æ­¥éª¤6ï¼šå‘é€ç½‘ç»œè¯·æ±‚ï¼ˆå¼‚æ­¥\\åŒæ­¥ï¼‰ &gt; å°è£…äº† æ•°æ®è½¬æ¢ã€çº¿ç¨‹åˆ‡æ¢çš„æ“ä½œ æ­¥éª¤7ï¼šå¤„ç†æœåŠ¡å™¨è¿”å›çš„æ•°æ® æ¥ä¸‹æ¥æˆ‘ä»¬å°†è¿™äº›æ­¥éª¤è¿›è¡Œåˆ†è§£ æ­¥éª¤1ï¼šæ·»åŠ  Retrofit åº“çš„ä¾èµ–1.åœ¨GradleåŠ å…¥Retrofitåº“çš„ä¾èµ– ç”±äºRetrofitæ˜¯åŸºäºOkHttpï¼Œæ‰€ä»¥è¿˜éœ€è¦æ·»åŠ OkHttpåº“ä¾èµ– build.gradle 123456dependencies &#123; compile&apos;com.squareup.retrofit2:retrofit:2.0.2&apos; // Retrofitåº“ compile &apos;com.squareup.okhttp3:okhttp:3.1.2&apos; // Okhttpåº“ &#125; 2.æ·»åŠ  ç½‘ç»œæƒé™AndroidManifest.xml 1&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt; æ­¥éª¤2ï¼šåˆ›å»º æ¥å—æœåŠ¡å™¨è¿”å›æ•°æ® çš„ç±»Reception.java12345public class Reception&#123; ... //æ ¹æ®è¿”å›æ•°æ®çš„æ ¼å¼å’Œæ•°æ®è§£ææ–¹å¼ï¼ˆJsonã€XMLç­‰ï¼‰å®šä¹‰ //ä¸‹é¢ä¼šåœ¨å®ä¾‹ä¸­è¿›è¡Œè¯´æ˜&#125; æ­¥éª¤3ï¼šåˆ›å»º ç”¨äºæè¿°ç½‘ç»œè¯·æ±‚ çš„æ¥å£ Retrofitå°†Httpè¯·æ±‚æŠ½è±¡æˆJavaæ¥å£ï¼šé‡‡ç”¨æ³¨è§£æè¿°ç½‘ç»œè¯·æ±‚çš„å‚æ•° å’Œ é…ç½®ç½‘ç»œè¯·æ±‚å‚æ•° 1.ç”¨ åŠ¨æ€ä»£ç† åŠ¨æ€ å°†è¯¥æ¥å£çš„æ³¨è§£â€œç¿»è¯‘â€æˆä¸€ä¸ªHttpè¯·æ±‚ï¼Œæœ€åå†æ‰§è¡ŒHttpè¯·æ±‚2.æ³¨ï¼šæ¥å£ä¸­çš„æ¯ä¸ªæ–¹æ³•çš„å‚æ•°éƒ½éœ€è¦ä½¿ç”¨æ³¨è§£æ ‡æ³¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™ _GetRequestInterface.interface 12345678public interface GetRequest_Interface&#123; @GET(\"openapi.do?keyfrom=Yanzhikai&amp;key=2032414398&amp;type=data&amp;doctype=json&amp;version=1.1&amp;q=car\") Call&lt;Translation&gt; getCall(); //@GETæ³¨è§£çš„ä½œç”¨ï¼šé‡‡ç”¨Getæ–¹æ³•å‘é€ç½‘ç»œè¯·æ±‚ //getCall() = æ¥å—ç½‘ç»œè¯·æ±‚æ•°æ®çš„æ–¹æ³• //å…¶ä¸­è¿”å›ç±»å‹ä¸ºCall&lt;*&gt;,*æ˜¯æ¥æ”¶æ•°æ®çš„ç±»ï¼ˆå³ä¸Šé¢å®šä¹‰çš„Translationç±»ï¼‰ //å¦‚æœæƒ³ç›´æ¥è·å¾—Responsebodyä¸­çš„å†…å®¹ï¼Œå¯ä»¥å®šä¹‰ç½‘ç»œè¯·æ±‚è¿”å›å€¼ä¸ºCall&lt;ResponseBody&gt;&#125; ä¸‹é¢è¯¦ç»†ä»‹ç»Retrofitç½‘ç»œè¯·æ±‚æ¥å£ çš„æ³¨è§£ç±»å‹æ³¨è§£ç±»å‹ æ³¨è§£è¯´æ˜ ç¬¬ä¸€ç±»ï¼šç½‘ç»œè¯·æ±‚æ–¹æ³• è¯¦ç»†è¯´æ˜ï¼ša.@GETã€@POSTã€@PUTã€@DELETEã€@HEADä»¥ä¸Šæ–¹æ³•åˆ†åˆ«å¯¹åº”HTTPä¸­çš„ç½‘ç»œè¯·æ±‚æ–¹å¼1234567public interface GetRequest_Interface &#123; @GET(\"openapi.do?keyfrom=Yanzhikai&amp;key=2032414398&amp;type=data&amp;doctype=json&amp;version=1.1&amp;q=car\") Call&lt;Translation&gt; getCall(); // @GETæ³¨è§£çš„ä½œç”¨:é‡‡ç”¨Getæ–¹æ³•å‘é€ç½‘ç»œè¯·æ±‚ // getCall() = æ¥æ”¶ç½‘ç»œè¯·æ±‚æ•°æ®çš„æ–¹æ³• // å…¶ä¸­è¿”å›ç±»å‹ä¸ºCall&lt;*&gt;ï¼Œ*æ˜¯æ¥æ”¶æ•°æ®çš„ç±»ï¼ˆå³ä¸Šé¢å®šä¹‰çš„Translationç±»ï¼‰ &#125; æ­¤å¤„ç‰¹æ„è¯´æ˜URLçš„ç»„æˆï¼šRetrofitæŠŠ ç½‘ç»œè¯·æ±‚çš„URLåˆ†æˆäº†ä¸¤éƒ¨åˆ†è®¾ç½®ï¼š12345678910111213// ç¬¬1éƒ¨åˆ†ï¼šåœ¨ç½‘ç»œè¯·æ±‚æ¥å£çš„æ³¨è§£è®¾ç½® @GET(\"openapi.do?keyfrom=Yanzhikai&amp;key=2032414398&amp;type=data&amp;doctype=json&amp;version=1.1&amp;q=car\")Call&lt;Translation&gt; getCall();// ç¬¬2éƒ¨åˆ†ï¼šåœ¨åˆ›å»ºRetrofitå®ä¾‹æ—¶é€šè¿‡.baseUrl()è®¾ç½®Retrofit retrofit = new Retrofit.Builder() .baseUrl(\"http://fanyi.youdao.com/\") //è®¾ç½®ç½‘ç»œè¯·æ±‚çš„Urlåœ°å€ .addConverterFactory(GsonConverterFactory.create()) //è®¾ç½®æ•°æ®è§£æå™¨ .build();// ä»ä¸Šé¢çœ‹å‡ºï¼šä¸€ä¸ªè¯·æ±‚çš„URLå¯ä»¥é€šè¿‡ æ›¿æ¢å— å’Œ è¯·æ±‚æ–¹æ³•çš„å‚æ•° æ¥è¿›è¡ŒåŠ¨æ€çš„URLæ›´æ–°ã€‚// æ›¿æ¢å—æ˜¯ç”± è¢«&#123;&#125;åŒ…è£¹èµ·æ¥çš„å­—ç¬¦ä¸²æ„æˆ// å³ï¼šRetrofitæ”¯æŒåŠ¨æ€æ”¹å˜ç½‘ç»œè¯·æ±‚æ ¹ç›®å½• ç½‘ç»œè¯·æ±‚çš„å®Œæ•´ Url = åœ¨åˆ›å»º Retrofit å®ä¾‹æ—¶é€šè¿‡.baseUrl() è®¾ç½® + ç½‘ç»œè¯·æ±‚æ¥å£çš„æ³¨è§£è®¾ç½®ï¼ˆä¸‹é¢ç§°â€œpathâ€ï¼‰ å…·ä½“æ•´åˆçš„è§„åˆ™å¦‚ä¸‹ï¼š å»ºè®®é‡‡ç”¨ç¬¬ä¸‰ç§æ–¹å¼æ¥é…ç½®ï¼Œå¹¶å°½é‡ä½¿ç”¨åŒä¸€ç§è·¯å¾„å½¢å¼ã€‚ b.@HTTP ä½œç”¨ï¼šæ›¿æ¢@GETã€@POSTã€@PUTã€@DELETEã€@HEADæ³¨è§£çš„ä½œç”¨ åŠ æ›´å¤šåŠŸèƒ½æ‹“å±• å…·ä½“ä½¿ç”¨ï¼šé€šè¿‡å±æ€§ methodã€pathã€hasBodyè¿›è¡Œè®¾ç½® 1234567891011public interface GetRequest_Interface &#123; /** * methodï¼šç½‘ç»œè¯·æ±‚çš„æ–¹æ³•ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ * pathï¼šç½‘ç»œè¯·æ±‚åœ°å€è·¯å¾„ * hasBodyï¼šæ˜¯å¦æœ‰è¯·æ±‚ä½“ */ @HTTP(method = \"GET\", path = \"blog/&#123;id&#125;\", hasBody = false) Call&lt;ResponseBody&gt; getCall(@Path(\"id\") int id); // &#123;id&#125; è¡¨ç¤ºæ˜¯ä¸€ä¸ªå˜é‡ // method çš„å€¼ retrofit ä¸ä¼šåšå¤„ç†ï¼Œæ‰€ä»¥è¦è‡ªè¡Œä¿è¯å‡†ç¡®&#125; ç¬¬äºŒç±»ï¼šæ ‡è®° a.@FormUrlEncoded ä½œç”¨ï¼šè¡¨ç¤ºå‘é€form-encoded çš„æ•°æ® æ¯ä¸ªé”®å€¼å¯¹éœ€è¦ç”¨ @Filed æ¥æ³¨è§£é”®åï¼Œéšåçš„å¯¹è±¡éœ€è¦æä¾›å€¼ã€‚ b.@Multipart ä½œç”¨ï¼šè¡¨ç¤ºå‘é€form-encoded çš„æ•°æ®ï¼ˆé€‚ç”¨äº æœ‰æ–‡ä»¶ ä¸Šä¼ çš„åœºæ™¯ï¼‰ æ¯ä¸ªé”®å€¼å¯¹éœ€è¦ç”¨ @Part æ¥æ³¨è§£é”®åï¼Œéšåçš„å¯¹è±¡éœ€è¦æä¾›å€¼ã€‚ å…·ä½“ä½¿ç”¨å¦‚ä¸‹ï¼š_GetRequestInterface 123456789101112131415161718192021222324252627282930public interface GetRequest_Interface &#123; /** *è¡¨æ˜æ˜¯ä¸€ä¸ªè¡¨å•æ ¼å¼çš„è¯·æ±‚ï¼ˆContent-Type:application/x-www-form-urlencodedï¼‰ * &lt;code&gt;Field(\"username\")&lt;/code&gt; è¡¨ç¤ºå°†åé¢çš„ &lt;code&gt;String name&lt;/code&gt; ä¸­nameçš„å–å€¼ä½œä¸º username çš„å€¼ */ @POST(\"/form\") @FormUrlEncoded Call&lt;ResponseBody&gt; testFormUrlEncoded1(@Field(\"username\") String name, @Field(\"age\") int age); /** * &#123;@link Part&#125; åé¢æ”¯æŒä¸‰ç§ç±»å‹ï¼Œ&#123;@link RequestBody&#125;ã€&#123;@link okhttp3.MultipartBody.Part&#125; ã€ä»»æ„ç±»å‹ * é™¤ &#123;@link okhttp3.MultipartBody.Part&#125; ä»¥å¤–ï¼Œå…¶å®ƒç±»å‹éƒ½å¿…é¡»å¸¦ä¸Šè¡¨å•å­—æ®µ(&#123;@link okhttp3.MultipartBody.Part&#125; ä¸­å·²ç»åŒ…å«äº†è¡¨å•å­—æ®µçš„ä¿¡æ¯)ï¼Œ */ @POST(\"/form\") @Multipart Call&lt;ResponseBody&gt; testFileUpload1(@Part(\"name\") RequestBody name, @Part(\"age\") RequestBody age, @Part MultipartBody.Part file);&#125;// å…·ä½“ä½¿ç”¨ GetRequest_Interface service = retrofit.create(GetRequest_Interface.class); // @FormUrlEncoded Call&lt;ResponseBody&gt; call1 = service.testFormUrlEncoded1(\"Carson\", 24); // @Multipart RequestBody name = RequestBody.create(textType, \"Carson\"); RequestBody age = RequestBody.create(textType, \"24\"); MultipartBody.Part filePart = MultipartBody.Part.createFormData(\"file\", \"test.txt\", file); Call&lt;ResponseBody&gt; call3 = service.testFileUpload1(name, age, filePart); ç¬¬ä¸‰ç±»ï¼šç½‘ç»œè¯·æ±‚å‚æ•° è¯¦ç»†è¯´æ˜ a.@Header &amp; @Headers ä½œç”¨ï¼šæ·»åŠ è¯·æ±‚å¤´ &amp; æ·»åŠ ä¸å›ºå®šçš„è¯·æ±‚å¤´ å…·ä½“ä½¿ç”¨å¦‚ä¸‹ï¼š12345678910111213// @Header@GET(\"user\")Call&lt;User&gt; getUser(@Header(\"Authorization\") String authorization)// @Headers@Headers(\"Authorization: authorization\")@GET(\"user\")Call&lt;User&gt; getUser()// ä»¥ä¸Šçš„æ•ˆæœæ˜¯ä¸€è‡´çš„ã€‚// åŒºåˆ«åœ¨äºä½¿ç”¨åœºæ™¯å’Œä½¿ç”¨æ–¹å¼// 1. ä½¿ç”¨åœºæ™¯ï¼š@Headerç”¨äºæ·»åŠ ä¸å›ºå®šçš„è¯·æ±‚å¤´ï¼Œ@Headersç”¨äºæ·»åŠ å›ºå®šçš„è¯·æ±‚å¤´// 2. ä½¿ç”¨æ–¹å¼ï¼š@Headerä½œç”¨äºæ–¹æ³•çš„å‚æ•°ï¼›@Headersä½œç”¨äºæ–¹æ³• b.@Body ä½œç”¨ï¼šä»¥postæ–¹å¼ ä¼ é€’ è‡ªå®šä¹‰æ•°æ®ç±»å‹ç»™æœåŠ¡å™¨ ç‰¹åˆ«æ³¨æ„ï¼šå¦‚æœæäº¤çš„æ˜¯ä¸€ä¸ªMapï¼Œé‚£ä¹ˆä½œç”¨ç›¸å½“äº@Field ä¸è¿‡ Map è¦ç»è¿‡FormBody.Builderç±»å¤„ç†æˆä¸ºç¬¦åˆOkHttpæ ¼å¼çš„è¡¨å•ï¼Œå¦‚ï¼š 12FormBody.Builder builder = new ForBody.Builder();builder.add(\"key\",\"value\"); c.@Field &amp; @FieldMap ä½œç”¨ï¼šå‘é€ Post è¯·æ±‚ æ—¶æäº¤è¯·æ±‚çš„è¡¨å•å­—æ®µ å…·ä½“ä½¿ç”¨ï¼šä¸ @FormUrlEncoded æ³¨è§£é…åˆä½¿ç”¨12345678910111213141516171819202122232425262728public interface GetRequest_Interface &#123; /** *è¡¨æ˜æ˜¯ä¸€ä¸ªè¡¨å•æ ¼å¼çš„è¯·æ±‚ï¼ˆContent-Type:application/x-www-form-urlencodedï¼‰ * &lt;code&gt;Field(\"username\")&lt;/code&gt; è¡¨ç¤ºå°†åé¢çš„ &lt;code&gt;String name&lt;/code&gt; ä¸­nameçš„å–å€¼ä½œä¸º username çš„å€¼ */ @POST(\"/form\") @FormUrlEncoded Call&lt;ResponseBody&gt; testFormUrlEncoded1(@Field(\"username\") String name, @Field(\"age\") int age);/** * Mapçš„keyä½œä¸ºè¡¨å•çš„é”® */ @POST(\"/form\") @FormUrlEncoded Call&lt;ResponseBody&gt; testFormUrlEncoded2(@FieldMap Map&lt;String, Object&gt; map);&#125;// å…·ä½“ä½¿ç”¨ // @Field Call&lt;ResponseBody&gt; call1 = service.testFormUrlEncoded1(\"Carson\", 24); // @FieldMap // å®ç°çš„æ•ˆæœä¸ä¸Šé¢ç›¸åŒï¼Œä½†è¦ä¼ å…¥Map Map&lt;String, Object&gt; map = new HashMap&lt;&gt;(); map.put(\"username\", \"Carson\"); map.put(\"age\", 24); Call&lt;ResponseBody&gt; call2 = service.testFormUrlEncoded2(map); d.@Part &amp; @PartMape.@Query &amp; @QueryMapf.@Pathg.@Urlæ±‡æ€» æ­¥éª¤4ï¼šåˆ›å»º Retrofit å®ä¾‹æ­¥éª¤5ï¼šåˆ›å»º ç½‘ç»œè¯·æ±‚æ¥å£å®ä¾‹ å¹¶ é…ç½®ç½‘ç»œè¯·æ±‚å‚æ•°æ­¥éª¤6ï¼šå‘é€ç½‘ç»œè¯·æ±‚ï¼ˆå¼‚æ­¥\\åŒæ­¥ï¼‰æ­¥éª¤7ï¼šå¤„ç†æœåŠ¡å™¨è¿”å›çš„æ•°æ®","categories":[],"tags":[{"name":"Android","slug":"Android","permalink":"https://edward7zhang.github.io/tags/Android/"}]},{"title":"AndroidStudioç¼–è¯‘è¿‡ç¨‹","slug":"AndroidStudioç¼–è¯‘è¿‡ç¨‹","date":"2019-03-02T04:07:14.000Z","updated":"2019-03-04T07:35:29.654Z","comments":true,"path":"2019/03/02/AndroidStudioç¼–è¯‘è¿‡ç¨‹/","link":"","permalink":"https://edward7zhang.github.io/2019/03/02/AndroidStudioç¼–è¯‘è¿‡ç¨‹/","excerpt":"","text":"åœ¨æ­¤è®°å½•ä¸€ä¸‹AndroidStudioç¼–è¯‘è¿‡ç¨‹ å…¶ä¸­ä½¿ç”¨åˆ°çš„ç¼–è¯‘å·¥å…·ï¼šaaptã€aidlã€Java Compilerã€dexã€zipalign ä¸»è¦æ­¥éª¤æè¿°ï¼š 1.é€šè¿‡aaptæ‰“åŒ…resèµ„æºæ–‡ä»¶ï¼Œç”ŸæˆR.javaã€resource.arscå’Œresæ–‡ä»¶ï¼ˆäºŒè¿›åˆ¶&amp;éäºŒè¿›åˆ¶å¦‚res/rawå’Œpicä¿æŒåŸæ ·ï¼‰ 2.å¤„ç†.aidlæ–‡ä»¶ï¼Œç”Ÿæˆå¯¹åº”çš„Javaæ¥å£æ–‡ä»¶ 3.é€šè¿‡Java Compilerç¼–è¯‘R.javaã€Javaæ¥å£æ–‡ä»¶ã€Javaæºæ–‡ä»¶ï¼Œç”Ÿæˆ.classæ–‡ä»¶ 4.é€šè¿‡dexå‘½ä»¤ï¼Œå°†.classæ–‡ä»¶å’Œç¬¬ä¸‰æ–¹åº“ä¸­çš„.classæ–‡ä»¶å¤„ç†ç”Ÿæˆclasses.dex 5.é€šè¿‡apkbuilderå·¥å…·ï¼Œå°†aaptç”Ÿæˆçš„resource.arscå’Œresæ–‡ä»¶ã€assetsæ–‡ä»¶å’Œclasses.dexä¸€èµ·æ‰“åŒ…ç”Ÿæˆapk 6.é€šè¿‡Jarsignerå·¥å…·ï¼Œå¯¹ä¸Šé¢çš„apkè¿›è¡Œdebugæˆ–releaseç­¾å 7.é€šè¿‡zipalignå·¥å…·ï¼Œå°†ç­¾ååçš„apkè¿›è¡Œå¯¹é½å¤„ç† link","categories":[],"tags":[{"name":"Android","slug":"Android","permalink":"https://edward7zhang.github.io/tags/Android/"}]},{"title":"è®°ä¸€é“ç®€å•çš„Javaé¢è¯•é¢˜ã€è½¬è½½è‡ª çŸ¥ä¹â€”â€”æ–¹å¿—å®ã€‘","slug":"è®°ä¸€é“ç®€å•çš„Javaé¢è¯•é¢˜","date":"2019-03-01T11:07:14.000Z","updated":"2019-03-01T08:35:17.911Z","comments":true,"path":"2019/03/01/è®°ä¸€é“ç®€å•çš„Javaé¢è¯•é¢˜/","link":"","permalink":"https://edward7zhang.github.io/2019/03/01/è®°ä¸€é“ç®€å•çš„Javaé¢è¯•é¢˜/","excerpt":"","text":"è¿™å¯èƒ½æ˜¯å†å²ä¸Šæœ€ç®€å•çš„ä¸€é“javaé¢è¯•é¢˜äº†ã€‚ é¢˜ç›®å¾ˆç®€å•ï¼Œå®Œæˆä»£ç ï¼Œåˆ¤æ–­ä¸€ä¸ªæ•´æ•°æ˜¯å¦æ˜¯å¥‡æ•°ï¼š 1public boolean isOdd(int i) ç›¸ä¿¡ç›¸å½“æ•°é‡çš„äººéƒ½å·²ç»åœ¨å‡†å¤‡åæ§½äº†ï¼Œåªè¦çœ‹è¿‡ã€Šç¼–ç¨‹ç ç‘ã€‹çš„äººéƒ½çŸ¥é“è¿™é“é¢˜çš„ç­”æ¡ˆå’Œå…¶ä¸­æä¸ºç®€å•çš„é“ç†ã€‚ä¸è¿‡åˆ«ç€æ€¥éª‚è¡—ï¼Œä¸ç®¡ä½ ä¿¡ä¸ä¿¡ï¼Œè¿™é“ç¬”è¯•é¢˜æˆ‘æ‹¿åˆ°çš„ç­”æ¡ˆå¥½å¤šéƒ½é•¿è¿™æ ·ï¼š 1234567public boolean isOdd(int i) &#123; if (i % 2 == 1) &#123; System.out.println(\"æ˜¯å¥‡æ•°\"); &#125; else &#123; System.out.println(\"æ˜¯å¶æ•°\"); &#125;&#125; ç„¶åç¼–è¯‘ä¸€ä¸‹ï¼Œå‘ç°é”™è¯¯äº†ï¼ŒæŒ æŒ å¤´ï¼Œé¡¶å¤šæ”¹æˆè¿™æ ·ï¼š 1234567public boolean isOdd(int i) &#123; if (i % 2 == 1) &#123; return true; &#125; else &#123; return false; &#125;&#125; å¥½å§ï¼Œæˆ‘æ‰¿è®¤æˆ‘åœ¨ç­›é€‰ç®€å†çš„èƒ½åŠ›å¯èƒ½æœ‰ä¸€äº›é—®é¢˜ï¼Œä¸è¿‡ä¸ç®¡ä½ ä¿¡ä¸ä¿¡ï¼Œå¥½å¤šå¤§å‚å·¥ä½œäº†å‡ å¹´çš„ç¨‹åºå‘˜ï¼Œéƒ½ä¼šå†™å‡ºå¦‚ä¸Šé£æ ¼çš„ä»£ç ã€‚ äºæ˜¯æˆ‘ç»§ç»­è¿›è¡Œå¼•å¯¼ï¼š æˆ‘ï¼šâ€œè¿™ä¸ªå‡½æ•°çš„å®šä¹‰è¦æ±‚è¿”å›ä¸€ä¸ªä»€ä¹ˆç±»å‹çš„å€¼ï¼Ÿâ€ å€™é€‰äººçœ‹äº†çœ‹é¢˜å¹²ï¼šâ€œå¸ƒå°”ç±»å‹ã€‚â€ æˆ‘ï¼šâ€œé‚£ä¹ˆï¼Œä½ ifåé¢çš„æ‹¬å·é‡Œé¢çš„è¡¨è¾¾å¼çš„å€¼æ˜¯ä¸€ä¸ªä»€ä¹ˆç±»å‹çš„ï¼Ÿâ€ å¼•å¯¼åˆ°è¿™ä¸€æ­¥çš„æ—¶å€™ï¼Œä¾ç„¶æœ‰é«˜è¾¾ä¸¤æˆçš„å€™é€‰äººé€‰æ‹©äº†æ”¾å¼ƒï¼Œè¡¨ç¤ºä»–ä»¬ä¸çŸ¥é“ã€‚å¥½å§ï¼Œæˆ‘çœŸçš„ä¸çŸ¥é“ä½ ä»¬æ¥é¢è¯•è¿™ä¸ªèŒä½çš„ä¿¡å¿ƒä½•åœ¨ã€‚ä¸è¿‡å¤§éƒ¨åˆ†äººæƒ³äº†æƒ³ï¼Œè¿˜ä¼šå›ç­”å‡ºæ­£ç¡®ç­”æ¡ˆï¼š å€™é€‰äººï¼šâ€œä¹Ÿæ˜¯å¸ƒå°”ç±»å‹ã€‚â€ æˆ‘ï¼šâ€œç„¶åå‘¢ï¼Ÿâ€ æœ‰å°‘é‡å€™é€‰äººè™½ç„¶æ²¡è¯´å‡ºæ¥ï¼Œä½†æ˜¯æˆ‘èƒ½çœ‹å‡ºæ¥ä»–ä»¬è§‰å¾—è¿™åªæ˜¯ä¸€ä¸ªå·§åˆï¼Œå¹¶ä¸çŸ¥é“æ€ä¹ˆè¿›è¡Œä¸‹ä¸€æ­¥ã€‚ä¸è¿‡ï¼Œå¤§å¤šæ•°äººæƒ³äº†æƒ³ä¹‹åï¼Œè¿˜æ˜¯ä¼šä¼˜åŒ–æˆå¦‚ä¸‹ä»£ç ï¼š 123public boolean isOdd(int i) &#123; return i % 2 == 1;&#125; ç»ˆäºè¿‡äº†ç¬¬ä¸€å…³äº†ï¼Œè¿›è¡Œç¬¬äºŒå…³çš„å¼•å¯¼ï¼š æˆ‘ï¼šâ€œé‚£æˆ‘ä¼ è¿›æ¥ä¸€ä¸ª-1å‘¢ï¼Ÿâ€ å°†è¿‘ä¸€åŠçš„äººåœ¨æƒ³äº†æƒ³ä¹‹åä¼šå˜´ç¡¬åœ°è¡¨ç¤ºä»–ä»¬ä»å°è¢«æ•™å¯¼åªæœ‰è‡ªç„¶æ•°æ‰æœ‰å¥‡æ•°å¶æ•°ä¹‹åˆ†ï¼Œè´Ÿæ•°æ²¡æœ‰å¥‡å¶è¿™ä¸€è¯´ã€‚å‰©ä½™çš„äººæ¥å—äº†è¿™ä¸ªè®¾å®šï¼Œæƒ³äº†ä¸€ä¼šå„¿ï¼Œæ”¹æˆè¿™æ ·ï¼š 123public boolean isOdd(int i) &#123; return i % 2 == 1 || i % 2 == -1;&#125; å¹¶ä¸”åœ¨æç¤ºä¹‹åä¼˜åŒ–æˆè¿™æ ·ï¼š 123public boolean isOdd(int i) &#123; return i % 2 != 0;&#125; å¥½å§ï¼Œè¿™æ˜¯è¿„ä»Šä¸ºæ­¢ç¬¬ä¸€ä¸ªèƒ½é€šè¿‡ç¼–è¯‘ä¸”å®Œå…¨æ»¡è¶³äº†éœ€æ±‚çš„ä»£ç å®ç°äº†ã€‚è¯´å®è¯ï¼Œä¸€å¼€å§‹å°±å†™æˆè¿™æ ·çš„äººï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–ä»€ä¹ˆæ˜æ˜¾çš„ç¼ºç‚¹çš„è¯ï¼Œæˆ‘è¿™é‡ŒåŸºæœ¬å°±èƒ½é€šè¿‡äº†ã€‚æˆ‘æ‰¿è®¤æˆ‘çš„è¦æ±‚æ¯”è¾ƒä½ï¼Œä½†æ˜¯æ¥é¢è¯•çš„äººèƒ½ç›´æ¥å†™å‡ºè¿™æ ·çš„çœŸçš„ä¸å¤ªå¤šï¼Œç²—ç•¥åœ°ä¼°è®¡çš„è¯ï¼Œå¤§æ¦‚å ä¸€åˆ°ä¸¤æˆå§ã€‚ ä½†æ˜¯è¿™é‡Œè¿˜æ²¡å®Œå‘¢ï¼Œè¿˜æœ‰æœ€é‡è¦çš„ç¬¬ä¸‰å…³å‘¢ï¼š æˆ‘ï¼šâ€œæœ‰æ›´å¥½çš„åŠæ³•å—ï¼Ÿâ€ å€™é€‰äººï¼šâ€œï¼Ÿâ€ æˆ‘ï¼šâ€œæˆ‘è§‰å¾—å–æ¨¡æ“ä½œæ¯”è¾ƒæ…¢ï¼Œæœ‰æ›´å¿«çš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿâ€ é™¤äº†å°‘æ•°äººèƒ½è‡ªå·±æƒ³æƒ³å°±æƒ³å‡ºæ¥äº†ä¹‹å¤–ï¼Œç»å¤§éƒ¨åˆ†ï¼ˆæ¯«ä¸å¤¸å¼ ï¼‰å€™é€‰äººè¡¨ç¤ºæ²¡æœ‰æˆ–è€…ä¸çŸ¥é“ï¼Œäºæ˜¯è¿›è¡Œä¸‹ä¸€æ­¥æç¤ºï¼š æˆ‘ï¼šâ€œå¥‡æ•°å’Œå¶æ•°è½¬æ¢æˆäºŒè¿›åˆ¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿâ€ ç›¸å½“ä¸€éƒ¨åˆ†å€™é€‰äººè¡¨ç¤ºè‡ªå·±ä¸æ‡‚ä»€ä¹ˆå«äºŒè¿›åˆ¶å’Œä½è¿ç®—ï¼Œæœ‰çš„è¿˜è¡¨ç¤ºjavaä¸æ˜¯cè¯­è¨€ï¼Œä¸ç”¨ç ”ç©¶è¿™äº›ï¼Œå°±è·Ÿå¾ˆå¤šè¯„è®ºä¼šåæ§½æˆ‘åœ¨è£…é€¼ä¸€æ ·ã€‚å°‘éƒ¨åˆ†å€™é€‰äººæƒ³äº†æƒ³ï¼Œä¼šæ€¯æ€¯åœ°å›ç­”ã€‚ å€™é€‰äººï¼šâ€œå¥‡æ•°æœ€åä¸€ä½æ˜¯1ï¼Œå¶æ•°æœ€åä¸€ä½æ˜¯0ã€‚â€ æˆ‘ï¼šâ€œç„¶åå‘¢ï¼Ÿâ€ è¿™é‡Œå¾ˆå¥‡æ€ªçš„ç‚¹æ˜¯ï¼Œå¤§éƒ¨åˆ†èƒ½èŠåˆ°è¿™é‡Œæ¥çš„å€™é€‰äººä¼šæƒ³èµ·æ¥ç§»ä½æ“ä½œï¼Œæˆ‘çœŸçš„ä¸çŸ¥é“æ˜¯ä¸ºä»€ä¹ˆï¼Œè™½ç„¶è¿™é“é¢˜ç¡®å®å¯ä»¥æœ‰è¿™ç§æ“ä½œï¼š 123public boolean isOdd(int i) &#123; return i &gt;&gt; 1 &lt;&lt; 1 != i;&#125; ä½†æ˜¯è¿™æ ¹æœ¬ä¸æ˜¯é‡ç‚¹å¥½å§ï¼ï¼ï¼ æ€»ä¹‹ï¼Œæ— è®ºå¦‚ä½•ï¼Œèƒ½åœ¨ç¬¬ä¸‰å…³çš„å„ç§å¼•å¯¼ä¹‹åï¼Œèƒ½å†™å‡ºä¸‹é¢è¿™ä¸ªç»“æœæ¥çš„äººï¼ŒçœŸçš„ä¸å¤šã€‚èƒ½ä¸€å¼€å§‹æ²¡æœ‰ä»»ä½•å¼•å¯¼çš„å°±å†™å‡ºæ¥çš„äººï¼Œè‡³ä»Šåªè§è¿‡ä¸¤ä¸ªï¼Œä¸€ä¸ªæˆ‘å»å“ªå„¿éƒ½å¸¦ç€ï¼Œä¸€ä¸ªæ‹’äº†æˆ‘çš„offerã€‚ 123public boolean isOdd(int i) &#123; return (i &amp; 1) == 1;&#125; åˆ«ä»¥ä¸ºè¿™å°±å®Œäº†ï¼ç»ˆæbossæ¥äº†ï¼š æˆ‘ï¼šâ€œè¿™æ ·æ˜¯ä¸æ˜¯æ¯”ä¸Šé¢å–æ¨¡è¿ç®—è¦å¿«ï¼Ÿâ€ å€™é€‰äººï¼šâ€œé‚£å½“ç„¶äº†ï¼Œä½è¿ç®—è‚¯å®šå¿«å•Šã€‚â€ æˆ‘ï¼šâ€œä½†æ˜¯æˆ‘ä»¬å®é™…ä»£ç æµ‹è¯•è¿‡ï¼Œå‘ç°ä¸Šé¢çš„æŒ‰ä½ä¸æ“ä½œå’Œå–æ¨¡æ“ä½œï¼Œå®é™…è¿è¡Œçš„æ—¶é—´æ˜¯å·®ä¸å¤šçš„ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿâ€ å€™é€‰äººå¿ƒé‡Œmmpï¼šâ€œé—¹äº†åŠå¤©ä½ è¿™æ˜¯åœ¨é€—æˆ‘ç©å•Šï¼Ÿï¼Ÿï¼Ÿâ€ ç„¶è€ŒçœŸæ­£èƒ½å›ç­”å‡ºåŸå› æ¥çš„äººï¼Œé¢è¯•è¿‡ç¨‹ä¸­æˆ‘æ²¡è§è¿‡ï¼Œå¯èƒ½æ˜¯å¤§ç‰›éƒ½çœ‹ä¸ä¸Šæˆ‘æ‰€åœ¨çš„å…¬å¸å§ã€‚åªæœ‰åœ¨æŸå…¬å¸çš„æ—¶å€™ï¼Œä¸€ä¸ªåŒäº‹æƒ³äº†æƒ³ï¼Œç»™å‡ºäº†æˆ‘æ­£ç¡®ç­”æ¡ˆï¼šâ€œç¼–è¯‘å™¨ä¼šå°†å¯¹2çš„æŒ‡æ•°çš„å–æ¨¡æ“ä½œï¼Œä¼˜åŒ–æˆä½è¿ç®—æ“ä½œã€‚â€ éš¾é“æ˜¯æˆ‘ç»å†çš„å…¬å¸éƒ½å¤ªlowäº†ä¹ˆâ€¦â€¦ ä½œè€…ï¼šæ–¹å¿—å®é“¾æ¥ï¼šhttps://zhuanlan.zhihu.com/p/57859872æ¥æºï¼šçŸ¥ä¹è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚","categories":[],"tags":[{"name":"Java","slug":"Java","permalink":"https://edward7zhang.github.io/tags/Java/"}]},{"title":"ByteDanceã€ä¸€é¢æ€»ç»“ã€‘","slug":"ByteDanceã€ä¸€é¢æ€»ç»“ã€‘","date":"2019-02-18T11:07:14.000Z","updated":"2019-03-02T14:28:47.932Z","comments":true,"path":"2019/02/18/ByteDanceã€ä¸€é¢æ€»ç»“ã€‘/","link":"","permalink":"https://edward7zhang.github.io/2019/02/18/ByteDanceã€ä¸€é¢æ€»ç»“ã€‘/","excerpt":"","text":"å¤§æ¦‚åœ¨æ•°å¤©å‰æŠ•é€’äº†å­—èŠ‚è·³åŠ¨-æŠ–éŸ³æ–¹å‘çš„å®ä¹ ç”Ÿå²—ä½æ˜¨å¤©æ¥åˆ°äº†é¢è¯•é€šçŸ¥ï¼Œä»Šå¤©é¢è¯•åå¯¹æ¶‰åŠåˆ°çš„é—®é¢˜è¿›è¡Œä¸€ä¸ªå¤ç›˜ã€‚ï¼ˆå­—èŠ‚è·³åŠ¨æœç„¶åä¸è™šä¼ â€¦é¢è¯•å®˜ç›¸å½“äº²åˆ‡ä¸”å–„äºå¾ªå¾ªå–„è¯±æ¥å¼•å¯¼æˆ‘å›ç­”é—®é¢˜ï¼‰ 1.Javaä¸­çš„å¼•ç”¨ç±»å‹æœ‰æ²¡æœ‰ä»€ä¹ˆäº†è§£ï¼ŸJava.lang.refæ˜¯Javaç±»åº“ä¸­æ¯”è¾ƒç‰¹æ®Šçš„ä¸€ä¸ªåŒ…ï¼Œå®ƒæä¾›äº†ä¸Javaåƒåœ¾å›æ”¶å™¨å¯†åˆ‡ç›¸å…³çš„å¼•ç”¨ç±»ã€‚ StrongReferenceï¼ˆå¼ºå¼•ç”¨ï¼‰ SoftReferenceï¼ˆè½¯å¼•ç”¨ï¼‰ WeakReferenceï¼ˆå¼±å¼•ç”¨ï¼‰ PhantomReferenceï¼ˆè™šå¼•ç”¨ï¼‰ å¼•ç”¨ç±»å‹å¯¹æ¯” åºå· å¼•ç”¨ç±»å‹ å–å¾—ç›®æ ‡å¯¹è±¡æ–¹å¼ åƒåœ¾å›æ”¶æ¡ä»¶ æ˜¯å¦å¯èƒ½å†…å­˜æ³„æ¼ 1 å¼ºå¼•ç”¨ ç›´æ¥è°ƒç”¨ ä¸å›æ”¶ å¯èƒ½ 2 è½¯å¼•ç”¨ é€šè¿‡ get()æ–¹æ³• è§†å†…å­˜æƒ…å†µå›æ”¶ ä¸å¯èƒ½ 3 å¼±å¼•ç”¨ é€šè¿‡ get()æ–¹æ³• æ°¸è¿œå›æ”¶ ä¸å¯èƒ½ 4 è™šå¼•ç”¨ æ— æ³•å–å¾— ä¸å›æ”¶ å¯èƒ½ 1.StrongReferenceï¼ˆå¼ºå¼•ç”¨ï¼‰å¦‚æœä¸€ä¸ªå¯¹è±¡å…·æœ‰å¼ºå¼•ç”¨ï¼Œé‚£åƒåœ¾å›æ”¶å™¨ç»ä¸ä¼šå›æ”¶å®ƒã€‚å½“å†…å­˜ç©ºé—´ä¸è¶³ï¼ŒJavaè™šæ‹Ÿæœºå®æ„¿æŠ›å‡ºOutOfMemoryErroré”™è¯¯ï¼Œä½¿ç¨‹åºå¼‚å¸¸ç»ˆæ­¢ï¼Œä¹Ÿä¸ä¼šé éšæ„å›æ”¶å…·æœ‰å¼ºå¼•ç”¨çš„å¯¹è±¡æ¥è§£å†³å†…å­˜ä¸è¶³çš„é—®é¢˜ã€‚ ç¤ºä¾‹ 1String[] arr = new String[]&#123;\"a\",\"b\",\"c\"&#125;; 2.SoftReferenceï¼ˆè½¯å¼•ç”¨ï¼‰å¦‚æœä¸€ä¸ªå¯¹è±¡åªå…·æœ‰è½¯å¼•ç”¨ï¼Œå¦‚æœå†…å­˜ç©ºé—´è¶³å¤Ÿï¼Œåƒåœ¾å›æ”¶å™¨å°±ä¸ä¼šå›æ”¶å®ƒï¼›å¦‚æœå†…å­˜ç©ºé—´ä¸è¶³ï¼Œå°±ä¼šå›æ”¶è¿™äº›å¯¹è±¡çš„å†…å­˜ã€‚åªè¦åƒåœ¾å›æ”¶å™¨æ²¡æœ‰å›æ”¶å®ƒï¼Œè¯¥å¯¹è±¡å°±å¯ä»¥è¢«ç¨‹åºä½¿ç”¨ã€‚è½¯å¼•ç”¨å¯ç”¨æ¥å®ç°å†…å­˜æ•æ„Ÿçš„é«˜é€Ÿç¼“å­˜ã€‚è½¯å¼•ç”¨å¯ä»¥å’Œä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ï¼Œå¦‚æœè½¯å¼•ç”¨æ‰€å¼•ç”¨çš„å¯¹è±¡è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ï¼ŒJavaè™šæ‹Ÿæœºå°±ä¼šæŠŠè¿™ä¸ªè½¯å¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚ ç¤ºä¾‹123456//Example1SoftReference&lt;String[]&gt; softBean = new SoftReference&lt;String[]&gt;(new String[]&#123;\"a\",\"b\",\"c\"&#125;);//Example2ReferenceQueue&lt;String[]&gt; referenceQueue = new ReferenceQueue&lt;String[]&gt;();SoftReference&lt;String[]&gt; softBean = new SoftReference&lt;String[]&gt;(new String[]&#123;\"a\", \"b\", \"c\"&#125;, referenceQueue); 3.WeakReferenceï¼ˆå¼±å¼•ç”¨ï¼‰å¼±å¼•ç”¨ä¸è½¯å¼•ç”¨çš„åŒºåˆ«åœ¨äºï¼šåªå…·æœ‰å¼±å¼•ç”¨çš„å¯¹è±¡æ‹¥æœ‰æ›´çŸ­æš‚çš„ç”Ÿå‘½å‘¨æœŸã€‚åœ¨åƒåœ¾å›æ”¶å™¨çº¿ç¨‹æ‰«æå®ƒæ‰€ç®¡è¾–çš„å†…å­˜åŒºåŸŸçš„è¿‡ç¨‹ä¸­ï¼Œä¸€æ—¦å‘ç°äº†åªå…·æœ‰å¼±å¼•ç”¨çš„å¯¹è±¡ï¼Œä¸ç®¡å½“å‰å†…å­˜ç©ºé—´è¶³å¤Ÿä¸å¦ï¼Œéƒ½ä¼šå›æ”¶å®ƒçš„å†…å­˜ã€‚ä¸è¿‡ï¼Œç”±äºåƒåœ¾å›æ”¶å™¨æ˜¯ä¸€ä¸ªä¼˜å…ˆçº§å¾ˆä½çš„çº¿ç¨‹ï¼Œå› æ­¤ä¸ä¸€å®šä¼šå¾ˆå¿«å‘ç°é‚£äº›åªå…·æœ‰å¼±å¼•ç”¨çš„å¯¹è±¡ã€‚ å¼±å¼•ç”¨å¯ä»¥å’Œä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ï¼Œå¦‚æœå¼±å¼•ç”¨æ‰€å¼•ç”¨çš„å¯¹è±¡è¢«åƒåœ¾å›æ”¶ï¼ŒJavaè™šæ‹Ÿæœºå°±ä¼šæŠŠè¿™ä¸ªå¼±å¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚ ç¤ºä¾‹12345//Example1WeakReference&lt;String[]&gt; weakBean = new WeakReference&lt;String[]&gt;(new String[]&#123;\"a\", \"b\", \"c\"&#125;);//Example2ReferenceQueue&lt;String[]&gt; referenceQueue = new ReferenceQueue&lt;String[]&gt;();WeakReference&lt;String[]&gt; softBean = new WeakReference&lt;String[]&gt;(new String[]&#123;\"a\", \"b\", \"c\"&#125;, referenceQueue); 4.PhantomReferenceï¼ˆè™šå¼•ç”¨ï¼‰â€œè™šå¼•ç”¨â€é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å½¢åŒè™šè®¾ï¼Œä¸å…¶ä»–å‡ ç§å¼•ç”¨éƒ½ä¸åŒï¼Œè™šå¼•ç”¨å¹¶ä¸ä¼šå†³å®šå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡ä»…æŒæœ‰è™šå¼•ç”¨ï¼Œé‚£ä¹ˆå®ƒå°±å’Œæ²¡æœ‰ä»»ä½•å¼•ç”¨ä¸€æ ·ï¼Œåœ¨ä»»ä½•æ—¶å€™éƒ½å¯èƒ½è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ã€‚è™šå¼•ç”¨ä¸»è¦ç”¨æ¥è·Ÿè¸ªå¯¹è±¡è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶çš„æ´»åŠ¨ã€‚è™šå¼•ç”¨ä¸è½¯å¼•ç”¨å’Œå¼±å¼•ç”¨çš„ä¸€ä¸ªåŒºåˆ«åœ¨äºï¼šè™šå¼•ç”¨å¿…é¡»å’Œå¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ã€‚å½“åƒåœ¾å›æ”¶å™¨å‡†å¤‡æ”¶ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æœå‘ç°å®ƒè¿˜æœ‰è™šå¼•ç”¨ï¼Œå°±ä¼šåœ¨å›æ”¶å¯¹è±¡çš„å†…å­˜ä¹‹å‰ï¼ŒæŠŠè¿™ä¸ªè™šå¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚ ç¤ºä¾‹12ReferenceQueue&lt;String[]&gt; referenceQueue = new ReferenceQueue&lt;String[]&gt;();PhantomReference&lt;String[]&gt; referent = new PhantomReference&lt;String&gt;(new String[]&#123;\"a\", \"b\", \"c\"&#125;, referenceQueue); 2.Javaä¸­åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼æœ‰å“ªäº›1.ç»§æ‰¿Threadç±»åˆ›å»ºçº¿ç¨‹ç±»(1) å®šä¹‰Threadç±»çš„å­ç±»ï¼Œå¹¶é‡å†™è¯¥ç±»çš„runæ–¹æ³•ï¼Œè¯¥runæ–¹æ³•çš„æ–¹æ³•ä½“å°±ä»£è¡¨äº†çº¿ç¨‹è¦å®Œæˆçš„ä»»åŠ¡ã€‚å› æ­¤æŠŠrun()æ–¹æ³•ç§°ä¸ºæ‰§è¡Œä½“ã€‚ (2) åˆ›å»ºThreadå­ç±»çš„å®ä¾‹ï¼Œå³åˆ›å»ºäº†çº¿ç¨‹å¯¹è±¡ã€‚ (3) è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„start()æ–¹æ³•æ¥å¯ç”¨è¯¥çº¿ç¨‹ã€‚ 1234567891011121314151617public class FirstThreadTest extends Thread &#123; int i = 0; //é‡å†™runæ–¹æ³•ï¼Œrunæ–¹æ³•çš„æ–¹æ³•ä½“å°±æ˜¯ç°åœºæ‰§è¡Œä½“ public void run() &#123; for (; i &lt; 100; i++) &#123; System.out.println(getName() + \" \" + i); &#125; &#125; public static void main(String[] args) &#123; for (int i = 0; i &lt; 100; i++) &#123; System.out.println(Thread.currentThread().getName() + \" : \" + i); if (i == 20) &#123; new FirstThreadTest().start(); new FirstThreadTest().start(); &#125; &#125; &#125;&#125; ä¸Šè¿°ä»£ç ä¸­Thread.currentThread()æ–¹æ³•è¿”å›å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡ã€‚GetName() æ–¹æ³•è¿”å›è°ƒç”¨è¯¥æ–¹æ³•çš„çº¿ç¨‹çš„åå­—ã€‚ 2.é€šè¿‡Runnableæ¥å£åˆ›å»ºçº¿ç¨‹ç±»ï¼ˆ1ï¼‰å®šä¹‰runnableæ¥å£çš„å®ç°ç±»ï¼Œå¹¶é‡å†™è¯¥æ¥å£çš„run()æ–¹æ³•ï¼Œè¯¥run()æ–¹æ³•çš„æ–¹æ³• ä½“åŒæ ·æ˜¯è¯¥çº¿ç¨‹çš„çº¿ç¨‹æ‰§è¡Œä½“ã€‚ ï¼ˆ2ï¼‰åˆ›å»º Runnableå®ç°ç±»çš„å®ä¾‹ï¼Œå¹¶ä¾æ­¤å®ä¾‹ä½œä¸ºThreadçš„targetæ¥åˆ›å»ºThread å¯¹è±¡ï¼Œè¯¥Threadå¯¹è±¡æ‰æ˜¯çœŸæ­£çš„çº¿ç¨‹å¯¹è±¡ã€‚ ï¼ˆ3ï¼‰è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„start()æ–¹æ³•æ¥å¯åŠ¨è¯¥çº¿ç¨‹ã€‚ 3.é€šè¿‡Callableå’ŒFutureåˆ›å»ºçº¿ç¨‹ï¼ˆ1ï¼‰åˆ›å»ºCallableæ¥å£çš„å®ç°ç±»ï¼Œå¹¶å®ç°call()æ–¹æ³•ï¼Œè¯¥call()æ–¹æ³•å°†ä½œä¸ºçº¿ç¨‹æ‰§è¡Œ ä½“ï¼Œå¹¶ä¸”æœ‰è¿”å›å€¼ã€‚ ï¼ˆ2ï¼‰åˆ›å»ºCallableå®ç°ç±»çš„å®ä¾‹ï¼Œä½¿ç”¨FutureTaskç±»æ¥åŒ…è£…Callableå¯¹è±¡ï¼Œè¯¥ FutureTaskå¯¹è±¡å°è£…äº†è¯¥Callableå¯¹è±¡çš„call()æ–¹æ³•çš„è¿”å›å€¼ã€‚ ï¼ˆ3ï¼‰ä½¿ç”¨FutureTaskå¯¹è±¡ä½œä¸ºThreadå¯¹è±¡çš„targetåˆ›å»ºå¹¶å¯åŠ¨æ–°çº¿ç¨‹ã€‚ ï¼ˆ4ï¼‰è°ƒç”¨FutureTaskå¯¹è±¡çš„get()æ–¹æ³•æ¥è·å¾—å­çº¿ç¨‹æ‰§è¡Œç»“æŸåçš„è¿”å›å€¼ï¼Œè°ƒç”¨ get()æ–¹æ³•ä¼šé˜»å¡çº¿ç¨‹ã€‚ åˆ›å»ºçº¿ç¨‹çš„ä¸‰ç§æ–¹å¼çš„å¯¹æ¯”é‡‡ç”¨å®ç°Runnableã€Callableæ¥å£çš„æ–¹å¼åˆ›è§å¤šçº¿ç¨‹æ—¶ï¼Œä¼˜åŠ¿æ˜¯ï¼š çº¿ç¨‹ç±»åªæ˜¯å®ç°äº†Runnableæ¥å£æˆ–Callableæ¥å£ï¼Œè¿˜å¯ä»¥ç»§æ‰¿å…¶ä»–ç±»ã€‚ åœ¨è¿™ç§æ–¹å¼ä¸‹ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥å…±äº«åŒä¸€ä¸ªtargetå¯¹è±¡ï¼Œæ‰€ä»¥éå¸¸é€‚åˆå¤šä¸ªç›¸åŒçº¿ç¨‹ æ¥å¤„ç†åŒä¸€ä»½èµ„æºçš„æƒ…å†µï¼Œä»è€Œå¯ä»¥å°†CPUã€ä»£ç å’Œæ•°æ®åˆ†å¼€ï¼Œå½¢æˆæ¸…æ™°çš„æ¨¡å‹ï¼Œ è¾ƒå¥½åœ°ä½“ç°äº†é¢å‘å¯¹è±¡çš„æ€æƒ³ã€‚ åŠ£åŠ¿æ˜¯ï¼š ç¼–ç¨‹ç¨å¾®å¤æ‚ï¼Œå¦‚æœè¦è®¿é—®å½“å‰çº¿ç¨‹ï¼Œåˆ™å¿…é¡»ä½¿ç”¨Thread.currentThread()æ–¹æ³•ã€‚ ä½¿ç”¨ç»§æ‰¿Threadç±»çš„æ–¹å¼åˆ›å»ºå¤šçº¿ç¨‹æ—¶ä¼˜åŠ¿æ˜¯ï¼š ç¼–å†™ç®€å•ï¼Œå¦‚æœéœ€è¦è®¿é—®å½“å‰çº¿ç¨‹ï¼Œåˆ™æ— éœ€ä½¿ç”¨Thread.currentThread()æ–¹æ³•ï¼Œç›´æ¥ ä½¿ç”¨thiså³å¯è·å¾—å½“å‰çº¿ç¨‹ã€‚ åŠ£åŠ¿æ˜¯ï¼š çº¿ç¨‹ç±»å·²ç»ç»§æ‰¿äº†Threadç±»ï¼Œæ‰€ä»¥ä¸èƒ½å†ç»§æ‰¿å…¶ä»–çˆ¶ç±»ã€‚ 3.Objectç±»å¯¹è±¡å«æœ‰çš„æ–¹æ³•æœ‰å“ªäº›ï¼ŸJavaä¸­çš„Objectç±»æ˜¯æ‰€æœ‰ç±»çš„çˆ¶ç±»ï¼Œå®ƒæä¾›äº†ä»¥ä¸‹11ä¸ªæ–¹æ³•ï¼š 1.public final native Class&lt;?&gt;getClass() 2.public native int hashCode() 3.public boolean equals(Object obj) 4.protected native Object clone() throws CloneNotSupportedException 5.public String toString() 6.public final native void notify() 7.public final native void notifyAll() 8.public final native void wait(long timeout) throws InterruptedException 9.public final void wait(long timeout,int nanos)throws InterruptedException 10.public final void wait() throws InterruptedException 11.protected void finalize() throws Throwable{} 4.Androidä¸­çš„è¿›ç¨‹é—´é€šä¿¡æœ‰å“ªäº›æ–¹å¼ï¼Ÿå…·ä½“è¯´è¯´BinderAndroidä¸­çš„IPCæ–¹å¼ ä½¿ç”¨Intent ä½¿ç”¨æ–‡ä»¶å…±äº« ä½¿ç”¨Messenger ä½¿ç”¨AIDL ä½¿ç”¨ContentProvider ä½¿ç”¨Socket 1.ä½¿ç”¨Intent1.Activityï¼ŒServiceï¼ŒReceiveréƒ½æ”¯æŒåœ¨Intentä¸­ä¼ é€’Bundleæ•°æ®ï¼Œè€ŒBundleå®ç°äº†Parcelableæ¥å£ï¼Œå¯ä»¥åœ¨ä¸åŒçš„è¿›ç¨‹é—´è¿›è¡Œä¼ è¾“ã€‚2.åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­å¯åŠ¨äº†å¦ä¸€ä¸ªè¿›ç¨‹çš„Activityï¼ŒServiceå’ŒReceiverï¼Œå¯ä»¥åœ¨Bundleä¸­é™„åŠ è¦ä¼ é€’çš„æ•°æ®é€šè¿‡Intentå‘é€å‡ºå»ã€‚2.ä½¿ç”¨æ–‡ä»¶å…±äº«1.Windowsä¸Šï¼Œä¸€ä¸ªæ–‡ä»¶å¦‚æœè¢«åŠ äº†æ’æ–¥é”ä¼šå¯¼è‡´å…¶ä»–çº¿ç¨‹æ— æ³•å¯¹å…¶è¿›è¡Œè®¿é—®ï¼ŒåŒ…æ‹¬è¯»å’Œå†™ï¼›è€ŒAndroidç³»ç»ŸåŸºäºLinuxï¼Œä½¿å¾—å…¶å¹¶å‘è¯»å–æ–‡ä»¶æ²¡æœ‰é™åˆ¶åœ°è¿›è¡Œï¼Œç”šè‡³å…è®¸ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œï¼Œalthough this may be a problem.2.å¯ä»¥åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­åºåˆ—åŒ–ä¸€ä¸ªå¯¹è±¡åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œåœ¨å¦ä¸€ä¸ªè¿›ç¨‹ä¸­ååºåˆ—åŒ–æ¢å¤è¿™ä¸ªå¯¹è±¡ï¼ˆAttentionï¼šå¹¶ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œåªæ˜¯å†…å®¹ç›¸åŒï¼‰3.SharePreferenceæ˜¯ä¸ªç‰¹ä¾‹ï¼Œç³»ç»Ÿå¯¹å®ƒçš„è¯»/å†™æœ‰ä¸€å®šçš„ç¼“å­˜ç­–ç•¥ï¼Œå³å†…å­˜ä¸­ä¼šæœ‰ä¸€ä»½SharePreferencesæ–‡ä»¶çš„ç¼“å­˜ï¼Œç³»ç»Ÿå¯¹å®ƒçš„è¯»/å†™å°±å˜å¾—ä¸å¯é ï¼Œå½“é¢å¯¹é«˜å¹¶å‘çš„è¯»å†™è®¿é—®ï¼ŒSharePreferencesæœ‰å¾ˆå¤§çš„å‡ ç‡ä¸¢å¤±æ•°æ®ã€‚å› æ­¤ï¼ŒIPCä¸å»ºè®®é‡‡ç”¨SharePreferencesã€‚3.ä½¿ç”¨MessengerMessengeræ˜¯ä¸€ç§è½»é‡çº§çš„IPCæ–¹æ¡ˆï¼Œå®ƒçš„åº•å±‚å®ç°æ˜¯AIDLï¼Œå¯ä»¥åœ¨ä¸åŒè¿›ç¨‹ä¸­ä¼ é€’Messageå¯¹è±¡ï¼Œå®ƒä¸€æ¬¡åªå¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼Œåœ¨æœåŠ¡ç«¯ä¸éœ€è¦è€ƒè™‘çº¿ç¨‹åŒæ­¥çš„é—®é¢˜ï¼ŒæœåŠ¡ç«¯ä¸å­˜åœ¨å¹¶å‘æ‰§è¡Œçš„æƒ…å½¢ æœåŠ¡ç«¯è¿›ç¨‹ï¼šæœåŠ¡ç«¯åˆ›å»ºä¸€ä¸ªServiceæ¥å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ï¼ŒåŒæ—¶é€šè¿‡ä¸€ä¸ªHandlerå¯¹è±¡æ¥å®ä¾‹åŒ–ä¸€ä¸ªMeaaengerå¯¹è±¡ï¼Œç„¶ååœ¨Serviveçš„onBindä¸­è¿”å›è¿™ä¸ªMessengerå¯¹è±¡åº•å±‚çš„Binderå³å¯ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940public class MessengerSercive extends Service&#123; private static final String TAG = MessengerSercive.class.getSimpleName(); private class MessengerHandler extends Handler&#123; /** * @param msg */ @Override public void handleMessage(Message msg)&#123; switch (msg.what) &#123; case Constants.MSG_FROM_CLIENT: Log.d(TAG, \"receive msg from client: msg = [\" + msg.getData().getString(Constants.MSG_KEY) + \"]\"); Toast.makeText(MessengerService.this, \"receive msg from client: msg = [\" + msg.getData().getString(Constants.MSG_KEY) + \"]\", Toast.LENGTH_SHORT).show(); Messenger client = msg.replyTo; Message replyMsg = Message.obtain(null, Constants.MSG_FROM_SERVICE); Bundle bundle = new Bundle(); bundle.putString(Constants.MSG_KEY, \"æˆ‘å·²ç»æ”¶åˆ°ä½ çš„æ¶ˆæ¯ï¼Œç¨åå›å¤ä½ ï¼\"); replyMsg.setData(bundle); try &#123; client.send(replyMsg); &#125; catch (RemoteException e) &#123; e.printStackTrace(); &#125; break; default: super.handleMessage(msg); &#125; &#125; &#125; private Messenger mMessenger = new Messenger(new MessengerHandler()); @Nullable @Override public IBinder onBind(Intent intent)&#123; return mMessenger.getBinder(); &#125;&#125; å®¢æˆ·ç«¯è¿›ç¨‹ï¼šé¦–å…ˆç»‘å®šæœåŠ¡ç«¯Serviceï¼Œç»‘å®šæˆåŠŸä¹‹åç”¨æœåŠ¡ç«¯çš„IBinderå¯¹è±¡åˆ›å»ºä¸€ä¸ªMessengerï¼Œé€šè¿‡è¿™ä¸ªMessengerå°±å¯ä»¥å‘æœåŠ¡ç«¯å‘é€æ¶ˆæ¯äº†ï¼Œæ¶ˆæ¯ç±»å‹æ˜¯Messageã€‚å¦‚æœéœ€è¦æœåŠ¡ç«¯å“åº”ï¼Œåˆ™éœ€è¦åˆ›å»ºä¸€ä¸ªHandlerå¹¶é€šè¿‡å®ƒæ¥åˆ›å»ºä¸€ä¸ªMessengerï¼ˆå’ŒæœåŠ¡ç«¯ä¸€æ ·ï¼‰ï¼Œå¹¶é€šè¿‡Messageçš„replyToå‚æ•°ä¼ é€’ç»™æœåŠ¡ç«¯ã€‚æœåŠ¡ç«¯é€šè¿‡Messageçš„replyToå‚æ•°å°±å¯ä»¥å›åº”å®¢æˆ·ç«¯äº†ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172public class MainActivity extends AppCompatActivity&#123; private static final String TAG = MainActivity.class.getSimpleName(); private Messenger mGetReplyMessenger = new Messenger(new MessageHandler()); private Messenger mService; private class MessageHandler extends Handler&#123; @Override public void handleMessage(Message msg)&#123; switch(msg.what)&#123; case Constants.MSG_FROM_SERVICE: Log.d(TAG, \"received msg form service: msg = [\" + msg.getData().getString(Constants.MSG_KEY) + \"]\"); Toast.makeText(MainActivity.this, \"received vice: msg = [\" + msg.getData().getString(Constants.MSG_KEY) + \"]\", Toast.LENGTH_SHORT).show(); break; default: super.handleMessage(msg); &#125; &#125; &#125; @Override protected void onCreate(Bundle savedInsttanceState)&#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); &#125; public void bindService(View v)&#123; Intent mIntent = new Intent(thia,MessengerService.class); bindService(mIntent, mServiceConnection, Context.BIND_AUTO_CREATE); &#125; public void sendMessage(View v)&#123; Message msg = Message.obtain(null,Constants.MSG_FROM_CLIENT); Bundle data = new Bunle(); data.putString(Constants.MSG_KEY, \"Hello! This is client.\"); msg.setData(data); msg.replyTo = mGetReplyMessenger; try&#123; mService.send(mag); &#125;catch(RemoteException e)&#123; e.printStackTrace(); &#125; &#125; @Override protected void onDestroy()&#123; unbindService(mServiceConnection); super.onDestroy(); &#125; private ServiceConnection mServiceConnection = new ServiceConnection()&#123; /** * @param name * @param service */ @Override public void onServiceConnected(ComponentName name, IBinder service)&#123; mService = new Messenger(service); Message msg = Message.obtain(null, Constants.MSG_FROM_CLIENT); Bundle data = new Bundle(); data.putString(Constants.MSG_KEY,\"Hello! This is cient.\"); msg.setData(data); mag.replyTo = mGetReplyMessenger; try&#123; mService.send(msg); &#125;catch(RemoteException e)&#123; e.printStackTrace(); &#125; &#125; /** * @param name */ @Override public void onServiceDiscommected(ComponentName name)&#123; &#125; &#125;;&#125; æ³¨æ„ï¼š å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ˜¯é€šè¿‡é€šè¿‡æ‹¿åˆ°å¯¹æ–¹çš„Messengeræ¥å‘é€Messageçš„ã€‚åªä¸è¿‡å®¢æˆ·ç«¯é€šè¿‡bindService onServiceConnectedè€ŒæœåŠ¡ç«¯é€šè¿‡message.replyToæ¥è·å¾—å¯¹æ–¹çš„Messengerã€‚Messengerä¸­æœ‰ä¸€ä¸ªHanlderä»¥ä¸²è¡Œçš„æ–¹å¼å¤„ç†é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ã€‚ä¸å­˜åœ¨å¹¶å‘æ‰§è¡Œï¼Œå› æ­¤æˆ‘ä»¬ä¸è€ƒè™‘çº¿ç¨‹åŒæ­¥çš„é—®é¢˜ã€‚ 4.ä½¿ç”¨AIDLMessengeræ˜¯ä»¥ä¸²è¡Œçš„æ–¹å¼å¤„ç†å®¢æˆ·ç«¯å‘æ¥çš„æ¶ˆæ¯ï¼Œå¦‚æœå¤§é‡æ¶ˆæ¯åŒæ—¶å‘é€åˆ°æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯åªèƒ½ä¸€ä¸ªä¸€ä¸ªå¤„ç†ï¼Œæ‰€ä»¥å¤§é‡å¹¶å‘è¯·æ±‚å°±ä¸é€‚åˆç”¨Messengerï¼Œè€Œä¸”Messengeråªé€‚åˆä¼ é€’æ¶ˆæ¯ï¼Œä¸èƒ½è·¨è¿›ç¨‹è°ƒç”¨æ–¹æ³•çš„é—®é¢˜ï¼Œè¦çŸ¥é“Messengeræœ¬è´¨ä¸Šä¹Ÿæ˜¯AIDLï¼Œåªä¸è¿‡ç³»ç»Ÿåšäº†å°è£…æ–¹ä¾¿ä¸Šå±‚çš„è°ƒç”¨è€Œå·²ã€‚ AIDLæ–‡ä»¶æ”¯æŒçš„æ•°æ®ç±»å‹ åŸºæœ¬æ•°æ®ç±»å‹ï¼› Stringå’ŒCharSequenceï¼› ArrayListï¼Œé‡Œé¢çš„å…ƒç´ å¿…é¡»èƒ½å¤Ÿè¢«AIDLæ”¯æŒï¼› HashMapï¼Œå®ç°Parcelableæ¥å£çš„å¯¹è±¡ï¼›æ³¨æ„ï¼šå¦‚æœAIDLæ–‡ä»¶ä¸­ç”¨åˆ°äº†è‡ªå®šä¹‰çš„Parcelableå¯¹è±¡ï¼Œå¿…é¡»æ–°å»ºä¸€ä¸ªå’Œå®ƒåŒåçš„AIDLæ–‡ä»¶ã€‚ AIDLï¼ŒAIDLæ¥å£æœ¬èº«ä¹Ÿå¯ä»¥åœ¨AIDLæ–‡ä»¶ä¸­ä½¿ç”¨ã€‚æœåŠ¡ç«¯æœåŠ¡ç«¯åˆ›å»ºä¸€ä¸ªServiceç”¨æ¥ç›‘å¬å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªAIDLæ–‡ä»¶ï¼Œå°†æš´éœ²ç»™å®¢æˆ·ç«¯çš„æ¥å£åœ¨è¿™ä¸ªAIDLæ–‡ä»¶ä¸­å£°æ˜ï¼Œæœ€ååœ¨Serviceä¸­å®ç°è¿™ä¸ªAIDLæ¥å£å³å¯ã€‚å®¢æˆ·ç«¯ç»‘å®šæœåŠ¡ç«¯çš„Serviceï¼Œç»‘å®šæˆåŠŸåï¼Œå°†æœåŠ¡ç«¯è¿”å›çš„Binderå¯¹è±¡è½¬æˆAIDLæ¥å£æ‰€å±çš„ç±»å‹ï¼Œç„¶åå°±å¯ä»¥è°ƒç”¨AIDLä¸­çš„æ–¹æ³•äº†ã€‚å®¢æˆ·ç«¯è°ƒç”¨è¿œç¨‹æœåŠ¡çš„æ–¹æ³•ï¼Œè¢«è°ƒç”¨çš„æ–¹æ³•è¿è¡Œåœ¨æœåŠ¡ç«¯çš„Binderçº¿ç¨‹æ± ä¸­ï¼ŒåŒæ—¶å®¢æˆ·ç«¯çš„çº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼Œå¦‚æœæœåŠ¡ç«¯æ–¹æ³•æ‰§è¡Œæ¯”è¾ƒè€—æ—¶ï¼Œå°±ä¼šå¯¼è‡´å®¢æˆ·ç«¯çº¿ç¨‹é•¿æ—¶é—´é˜»å¡ï¼Œå¯¼è‡´ANRã€‚å®¢æˆ·ç«¯çš„onServiceConnectedå’ŒonServiceDisconnectedæ–¹æ³•éƒ½åœ¨UIçº¿ç¨‹ä¸­ã€‚ 5.Androidä¸­çš„AsyncTaskçš„ä½œç”¨ï¼Ÿ6.Androidä¸­çš„æ¶ˆæ¯æœºåˆ¶ï¼Ÿ7.Androidä¸­çš„äº‹ä»¶åˆ†å‘æœºåˆ¶äº†è§£å¤šå°‘ï¼Ÿå¦‚ä½•è§£å†³æ»‘åŠ¨å†²çª8.Javaä¸­çš„æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«ï¼Ÿç†è§£æŠ½è±¡abstract class å’Œ interface æ˜¯Javaè¯­è¨€ä¸­å¯¹äºæŠ½è±¡ç±»å®šä¹‰è¿›è¡Œæ”¯æŒçš„ä¸¤ç§æœºåˆ¶ï¼Œæ­£æ˜¯ç”±äºè¿™ä¸¤ç§æœºåˆ¶çš„å­˜åœ¨ï¼Œæ‰èµ‹äºˆäº†Javaå¼ºå¤§çš„é¢å‘å¯¹è±¡èƒ½åŠ›ã€‚abstract calsså’Œinterfaceä¹‹é—´å¯¹äºæŠ½è±¡ç±»å®šä¹‰çš„æ”¯æŒæ–¹é¢å…·æœ‰å¾ˆå¤§çš„ç›¸ä¼¼æ€§ï¼Œç”šè‡³å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œå› æ­¤å¾ˆå¤šå¼€å‘è€…åœ¨è¿›è¡ŒæŠ½è±¡ç±»å®šä¹‰æ—¶å¯¹äºabstract classå’Œinterfaceçš„é€‰æ‹©æ˜¾å¾—æ¯”è¾ƒéšæ„ã€‚ å…¶å®ï¼Œä¸¤è€…ä¹‹é—´è¿˜æ˜¯æœ‰å¾ˆå¤§åŒºåˆ«çš„ï¼Œå¯¹äºå®ƒä»¬çš„é€‰æ‹©ç”šè‡³åæ˜ å‡ºå¯¹äºé—®é¢˜é¢†åŸŸæœ¬è´¨çš„ç†è§£ã€å¯¹äºè®¾è®¡æ„å›¾çš„ç†è§£æ˜¯å¦æ­£ç¡®ã€åˆç†ã€‚ è¯­æ³•å®šä¹‰ç†è§£1.æŠ½è±¡ç±»12345abstract class Demo&#123; abstract void method1(); abstract void method2(); ...&#125; 2.æ¥å£12345interface Demo&#123; void method1(); void method2(); ...&#125; åœ¨abstract classæ–¹å¼ä¸­ï¼ŒDemoå¯ä»¥æœ‰è‡ªå·±çš„æ•°æ®æˆå‘˜ï¼Œä¹Ÿå¯ä»¥æœ‰éabstarctçš„æˆå‘˜æ–¹æ³•ï¼Œè€Œåœ¨interfaceæ–¹å¼çš„å®ç°ä¸­ï¼ŒDemoåªèƒ½å¤Ÿæœ‰é™æ€çš„ä¸èƒ½è¢«ä¿®é¥°çš„æ•°æ®æˆå‘˜ï¼ˆä¹Ÿå°±æ˜¯å¿…é¡»æ˜¯static finalçš„ï¼Œä¸è¿‡åœ¨interfaceä¸­ä¸€èˆ¬ä¸å®šä¹‰æ•°æ®æˆå‘˜ï¼‰ï¼Œæ‰€æœ‰çš„æˆå‘˜æ–¹æ³•éƒ½æ˜¯abstractçš„ã€‚ä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œinterfaceæ˜¯ä¸€ç§ç‰¹æ®Šå½¢å¼çš„abstract calssã€‚ ç¼–ç¨‹è§’åº¦ç†è§£é¦–å…ˆï¼Œabstract classåœ¨Javaè¯­è¨€ä¸­è¡¨ç¤ºçš„æ˜¯ä¸€ç§ç»§æ‰¿å…³ç³»ï¼Œä¸€ä¸ªç±»åªèƒ½ä½¿ç”¨ä¸€æ¬¡ç»§æ‰¿å…³ç³»ã€‚ä½†æ˜¯ï¼Œä¸€ä¸ªç±»å´å¯ä»¥å®ç°å¤šä¸ªinterfaceã€‚ä¹Ÿè®¸ï¼Œè¿™æ˜¯Javaè¯­è¨€çš„è®¾è®¡è€…åœ¨è€ƒè™‘Javaå¯¹äºå¤šç»§æ‰¿çš„æ”¯æŒæ–¹é¢çš„ä¸€ç§æŠ˜ä¸­è€ƒè™‘å§ã€‚ å…¶æ¬¡ï¼Œåœ¨abstract classçš„å®šä¹‰ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥èµ‹äºˆæ–¹æ³•çš„é»˜è®¤è¡Œä¸ºã€‚ ä½†æ˜¯åœ¨interfaceçš„å®šä¹‰ä¸­ï¼Œæ–¹æ³•å´ä¸èƒ½æ‹¥æœ‰é»˜è®¤è¡Œä¸ºï¼Œä¸è¿‡åœ¨JDK1.8ä¸­å¯ä»¥ä½¿ç”¨defaultå…³é”®å­—å®ç°é»˜è®¤æ–¹æ³•ã€‚12345interface InterfaceA&#123; default void foo()&#123; System.out.println(\"InterfaceA foo\"); &#125;&#125; åœ¨ Java 8 ä¹‹å‰ï¼Œæ¥å£ä¸å…¶å®ç°ç±»ä¹‹é—´çš„è€¦åˆåº¦å¤ªé«˜äº†ï¼ˆtightly coupledï¼‰ï¼Œå½“éœ€è¦ä¸ºä¸€ä¸ªæ¥å£æ·»åŠ æ–¹æ³•æ—¶ï¼Œæ‰€æœ‰çš„å®ç°ç±»éƒ½å¿…é¡»éšä¹‹ä¿®æ”¹ã€‚é»˜è®¤æ–¹æ³•è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå®ƒå¯ä»¥ä¸ºæ¥å£æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œè€Œä¸ä¼šç ´åå·²æœ‰çš„æ¥å£çš„å®ç°ã€‚è¿™åœ¨lambdaè¡¨è¾¾å¼ä½œä¸ºJava8è¯­è¨€çš„é‡è¦ç‰¹æ€§è€Œå‡ºç°ä¹‹é™…ï¼Œä¸ºå‡çº§æ—§æ¥å£ä¸”ä¿æŒå‘åå…¼å®¹ï¼ˆbackward compatibilityï¼‰æä¾›äº†é€”å¾„ã€‚ ä¸€èˆ¬æ€§ç†è§£æ¥å£å’ŒæŠ½è±¡ç±»çš„æ¦‚å¿µä¸ä¸€æ ·ã€‚æ¥å£æ˜¯å¯¹åŠ¨ä½œçš„æŠ½è±¡ï¼ŒæŠ½è±¡ç±»æ˜¯å¯¹æ ¹æºçš„æŠ½è±¡ã€‚ä»è®¾è®¡ç†å¿µä¸Šï¼Œæ¥å£åæ˜ çš„æ˜¯â€œlike-aâ€å…³ç³»ï¼ŒæŠ½è±¡ç±»åæ˜ çš„æ˜¯â€œis-aâ€å…³ç³»ã€‚æŠ½è±¡ç±»è¡¨ç¤ºçš„æ˜¯ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯ä»€ä¹ˆã€‚æ¥å£è¡¨ç¤ºçš„æ˜¯ï¼Œè¿™ä¸ªå¯¹è±¡èƒ½åšä»€ä¹ˆã€‚æ¯”å¦‚ï¼Œç”·äººï¼Œå¥³äººï¼Œè¿™ä¸¤ä¸ªç±»ï¼ˆif they are classï¼‰ï¼Œä»–ä»¬çš„æŠ½è±¡ç±»æ˜¯äººã€‚è¯´æ˜ï¼Œä»–ä»¬éƒ½æ˜¯äººã€‚äººå¯ä»¥åƒä¸œè¥¿ï¼Œç‹—ä¹Ÿå¯ä»¥åƒä¸œè¥¿ï¼Œä½ å¯ä»¥æŠŠâ€œåƒä¸œè¥¿â€å®šä¹‰æˆä¸€ä¸ªæ¥å£ï¼Œç„¶åè®©è¿™äº›ç±»å»å®ç°å®ƒï¼Œæ‰€ä»¥ï¼Œåœ¨é«˜çº§è¯­è¨€ä¸Šï¼Œä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªç±»ï¼ˆæŠ½è±¡ç±»ï¼‰ï¼ˆæ­£å¦‚äººä¸å¯èƒ½åŒæ—¶æ˜¯ç”Ÿç‰©å’Œéç”Ÿç‰©ï¼‰ï¼Œä½†æ˜¯å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼ˆåƒé¥­æ¥å£ã€èµ°è·¯æ¥å£ï¼‰ã€‚ æ€»ç»“1.æŠ½è±¡ç±»å’Œæ¥å£éƒ½ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ï¼Œå¦‚æœè¦å®ä¾‹åŒ–ï¼ŒæŠ½è±¡ç±»å˜é‡å¿…é¡»æŒ‡å‘å®ç°æ‰€æœ‰æŠ½è±¡æ–¹æ³•çš„å­ç±»å¯¹è±¡ï¼Œæ¥å£å˜é‡å¿…é¡»æŒ‡å‘å®ç°æ‰€æœ‰æ¥å£æ–¹æ³•çš„ç±»å¯¹è±¡ã€‚ 2.æŠ½è±¡ç±»è¦è¢«å­ç±»ç»§æ‰¿ï¼Œæ¥å£è¦è¢«ç±»å®ç°ã€‚ 3.æ¥å£é‡Œå®šä¹‰çš„å˜é‡åªèƒ½æ˜¯å…¬å…±çš„é™æ€çš„å¸¸é‡ï¼ŒæŠ½è±¡ç±»ä¸­çš„å˜é‡æ˜¯æ™®é€šå˜é‡ã€‚ 4.æŠ½è±¡ç±»é‡Œå¯ä»¥æ²¡æœ‰æŠ½è±¡æ–¹æ³•ã€‚ 5.æ¥å£å¯ä»¥è¢«ç±»å¤šå®ç°ï¼ˆè¢«å…¶ä»–æ¥å£å¤šç»§æ‰¿ï¼‰ï¼ŒæŠ½è±¡ç±»åªèƒ½è¢«å•ç»§æ‰¿ã€‚ 6.æ¥å£ä¸­æ²¡æœ‰ this æŒ‡é’ˆï¼Œæ²¡æœ‰æ„é€ å‡½æ•°ï¼Œä¸èƒ½æ‹¥æœ‰å®ä¾‹å­—æ®µï¼ˆå®ä¾‹å˜é‡ï¼‰æˆ–å®ä¾‹æ–¹æ³•ã€‚ 7.æŠ½è±¡ç±»ä¸èƒ½åœ¨Java 8çš„ lambda è¡¨è¾¾å¼ä¸­ä½¿ç”¨ã€‚ 9.Javaè®¾è®¡æ¨¡å¼äº†è§£å¤šå°‘ï¼Ÿè§‚å¯Ÿè€…æ¨¡å¼åœ¨å“ªé‡Œä½¿ç”¨è¿‡ï¼Ÿ10.æœ‰æ²¡æœ‰ç”¨è¿‡MVC\\MVP\\MVVMï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸMVPæ˜¯å¦‚ä½•ä½¿modelä¸viewè¿›è¡Œäº’é€šçš„ï¼Ÿ","categories":[],"tags":[{"name":"Interview","slug":"Interview","permalink":"https://edward7zhang.github.io/tags/Interview/"}]},{"title":"æ·±åº¦å­¦ä¹ æ¨¡å‹çš„è½¬æ¢ [å­¦ä¹ &è½¬è½½]","slug":"æ·±åº¦å­¦ä¹ æ¨¡å‹çš„è½¬æ¢","date":"2019-01-26T11:07:14.000Z","updated":"2019-01-26T14:04:00.096Z","comments":true,"path":"2019/01/26/æ·±åº¦å­¦ä¹ æ¨¡å‹çš„è½¬æ¢/","link":"","permalink":"https://edward7zhang.github.io/2019/01/26/æ·±åº¦å­¦ä¹ æ¨¡å‹çš„è½¬æ¢/","excerpt":"","text":"ç”±äºå„ç§æ·±åº¦å­¦ä¹ æ¡†æ¶çš„å±‚å‡ºä¸ç©·ï¼Œæˆ‘ä»¬åœ¨è¿›è¡Œç®—æ³•å¼€å‘åˆ°ç®—æ³•éƒ¨ç½²çš„è¿‡ç¨‹ä¸­ï¼Œå¾€å¾€éƒ½éœ€è¦ç”¨åˆ°ä¸åŒçš„æ¡†æ¶ã€‚ä¾‹å¦‚æˆ‘ä»¬å¾ˆæœ‰å¯èƒ½ä½¿ç”¨tensorflow,pytorchç­‰è¿›è¡Œç®—æ³•å¼€å‘å’Œè°ƒè¯•ï¼Œåœ¨æ—©æœŸå·¥ç¨‹inferenceçš„æ—¶å€™æˆ‘ä»¬å¾€å¾€ä½¿ç”¨è¾ƒä¸ºè½»é‡çš„caffeæˆ–è€…é­”æ”¹åçš„caffeã€‚åˆ°äº†ç§»åŠ¨ç«¯éƒ¨ç½²æˆ‘ä»¬å¯èƒ½ä¼šä½¿ç”¨feather CNN nihuiçš„NCNNæˆ–è€…å°ç±³çš„maceç­‰æ¡†æ¶ã€‚facebook ONNXçš„å‡ºç°ä¸ºæ¨¡å‹çš„è½¬æ¢æä¾›äº†ä¸€ç§æ€è·¯ï¼Œä½†é™¤äº†pytorchç­‰æ¡†æ¶èƒ½å¾ˆå¥½çš„æ”¯æŒONNXã€‚å…¶ä»–ç­‰æ¡†æ¶å¹¶æœªå¾ˆå¥½çš„å¯¹æ¥ONNXã€‚åœ¨MMdnnå‡ºç°ä¹‹å‰ï¼Œå¤§å®¶éƒ½æŠŠcaffemodelä½œä¸ºä¸€ä¸ªä¸­é—´ä½“æ¥è¿›è¡Œè½¬æ¢ã€‚ å…¶å®å°±æ¨¡å‹è½¬æ¢è€Œè¨€åªæ˜¯ä¸ªå¡«å‚æ•°çš„è¿‡ç¨‹ï¼ŒæŠŠæ¨¡å‹ç»“æ„æ­å¥½ï¼ŒæŠŠå‚æ•°å¡«è¿›å»å°±å³å¯ï¼Œä½†æ˜¯å®è·µè¿‡çš„æœ‹å‹å¤§å®¶ä¸€å®šä¼šçŸ¥é“è¿™å…¶ä¸­å­˜åœ¨ä¸å°‘å‘ï¼Œä½†æ˜¯æˆ‘ä»¬æ›´å¸Œæœ›æœ‰ä¸€ç§è‡ªåŠ¨åŒ–çš„æ¨¡å‹è½¬æ¢æ–¹æ¡ˆæ¥è¿›è¡Œæ¨¡å‹è½¬æ¢ã€‚ MMdnnçš„å‡ºç°ä¸ºæ¨¡å‹è½¬æ¢å¸¦æ¥äº†ä¸å°‘çš„ç¦éŸ³ï¼ŒMMdnnæä¾›äº†ä¸€ç§IR(ä¸­é—´è¡¨ç¤º)æ¥æ¥è¡”æ¥å„ä¸ªæ¨¡å‹ä¹‹é—´çš„è½¬æ¢ã€‚ä»–å›Šæ‹¬å¹¶æ”¯æŒäº†ä¸»æµçš„DNNæ¡†æ¶ã€‚ ä¸‹é¢æˆ‘å°±ç®€è¦è®²ä¸€ä¸‹å‡ ä¸ªçš„ç®€å•æ¨¡å‹è½¬æ¢ åœ¨æ­¤æˆ‘æ¨èä¸€ä¸ªæŸ¥çœ‹æ¨¡å‹ç»“æ„çš„å·¥å…·Netron æ”¯æŒæ•°ç§ä¸»æµæ·±åº¦å­¦ä¹ æ¡†æ¶(Caffe,Tensorflow,ONNXç­‰)çš„æ¨¡å‹ç»“æ„æŸ¥çœ‹ã€‚ ä¾‹å¦‚ä¸‹å›¾æ˜¯MTCNN Pnetçš„æ¨¡å‹ç»“æ„å›¾ MMdnnçš„å®‰è£…MMdnnçš„å®‰è£…éå¸¸ç®€å• 1pip install mmdnn è½¬æ¢ä¸­çš„ä¸€äº›å‘1.å¹¶ä¸æ˜¯æ‰€æœ‰Layerå’Œæ‰€æœ‰ç½‘ç»œéƒ½æ”¯æŒè½¬æ¢ç”±äºå„ä¸ªæ·±åº¦å­¦ä¹ æ¡†æ¶ä¹‹é—´çš„è®¾è®¡æ¨¡å¼ä¸åŒæœ‰çš„æ˜¯åŸºäºå‘½ä»¤å¼çš„æœ‰çš„æ˜¯åŸºäºç¬¦å·å½¢å¼çš„ã€‚å„ä¸ªæ¡†æ¶ä¹‹é—´çš„opçš„ç²’åº¦ä¸åŒï¼Œåˆç”±äºæ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€çš„æ ‡å‡†ï¼Œæ”¯æŒæ‰€æœ‰æ¡†æ¶ä¹‹é—´çš„è½¬æ¢æ˜¯ä¸€ä»¶éå¸¸éš¾çš„äº‹æƒ…ã€‚MMdnnä¹Ÿåªæ˜¯æŠŠä¸€äº›æä¾›çš„å¸¸ç”¨çš„opï¼Œå¦‚conv,poolingç­‰å¸¸è§„opã€‚ 2.Tensorflowä¸caffeçš„paddingæ–¹å¼å¹¶ä¸ç›¸åŒè¿™ä¸ªé—®é¢˜ä¼šå‡ºç°åœ¨MobileNetåœ¨è½¬æ¢çš„è¿‡ç¨‹ä¸­ï¼Œå› ä¸ºTensorflowçš„paddingæ–¹å¼å’Œå…¶ä»–æ¡†æ¶æ˜¯ä¸åŒçš„ã€‚Tensorflowæ ‡å‡†çš„å·ç§¯æ“ä½œé€šå¸¸é‡‡ç”¨éå¯¹ç§°çš„paddingï¼Œè€Œcaffeç­‰å…¶ä»–æ¡†æ¶çš„å·ç§¯æ“ä½œåˆ™æ˜¯é‡‡ç”¨å¯¹ç§°çš„paddingã€‚ å¦‚ä¸‹å›¾ ï¼Œæ¯”å¦‚å½“ å·ç§¯æ ¸çš„å¤§å°ä¸º3x3 strideä¸º2çš„æ—¶å€™ã€‚å°½ç®¡ä»–ä»¬çš„paddingæ–¹å¼ä¸åŒï¼Œä½†å·ç§¯ä¹‹åçš„å°ºå¯¸ç¡®æ˜¯ä¸€æ ·çš„ã€‚ img è½¬æ¢æ­¥éª¤ä¾‹å¦‚ç°åœ¨æˆ‘ä»¬æƒ³æŠŠMTCNNçš„Keras Pnetè½¬åŒ–æˆcaffeodelç”¨äºéƒ¨ç½²ã€‚ 1mmtoir -f keras -w pnet.h5 -o pnet æŠŠkerasæ¨¡å‹è½¬åŒ–æˆMMdnn IRä¸­é—´è¡¨ç¤ºï¼Œåœ¨å½“ç„¶ç›®å½•ä¸‹ä¼šç”Ÿæˆä¸€ä¸ª.npy çš„weightsæ–‡ä»¶å’Œä¸€ä¸ª.pbæ–‡ä»¶ã€‚æ¥ç€ä½¿ç”¨ 1mmtomodel -f caffe -in pnet -iw pnet.npy -o pnet","categories":[],"tags":[{"name":"DeepLearning","slug":"DeepLearning","permalink":"https://edward7zhang.github.io/tags/DeepLearning/"}]},{"title":"æ·±åº¦å­¦ä¹ ç»å…¸å·ç§¯ç¥ç»ç½‘ç»œ [å­¦ä¹ &è½¬è½½]","slug":"æ·±åº¦å­¦ä¹ ç»å…¸å·ç§¯ç¥ç»ç½‘ç»œ","date":"2019-01-16T11:07:14.000Z","updated":"2019-01-26T14:03:30.420Z","comments":true,"path":"2019/01/16/æ·±åº¦å­¦ä¹ ç»å…¸å·ç§¯ç¥ç»ç½‘ç»œ/","link":"","permalink":"https://edward7zhang.github.io/2019/01/16/æ·±åº¦å­¦ä¹ ç»å…¸å·ç§¯ç¥ç»ç½‘ç»œ/","excerpt":"","text":"éšç€æ·±åº¦å­¦ä¹ çš„å‘å±•ï¼Œç ”ç©¶äººå‘˜æå‡ºäº†å¾ˆå¤šæ¨¡å‹ï¼Œè¿™å…¶ä¸­ä¸€äº›è®¾è®¡æ–¹å¼ï¼Œåœ¨å½“æ—¶å–å¾—äº†å¾ˆå¥½çš„æ•ˆæœï¼Œä¹Ÿä¸ºå…¶ä»–ç§‘ç ”å·¥ä½œè€…æä¾›äº†å¾ˆå¥½çš„æ€è·¯ã€‚CNN çš„ç»å…¸ç»“æ„å§‹äº1998å¹´çš„LeNet-5ï¼Œæˆäº2012å¹´å†å²æ€§çš„AlexNetï¼Œä»æ­¤å¹¿æ³›ç”¨äºå›¾åƒç›¸å…³é¢†åŸŸï¼Œä¸»è¦åŒ…æ‹¬ï¼š 1.LeNet-5, 1998å¹´ 2.AlexNet, 2012å¹´ 3.ZF-Net, 2013å¹´ 4.GoogleNet, 2014å¹´ 5.VGG, 2014å¹´ 6.ResNet, 2015å¹´ ç»è¿‡ç§‘ç ”å·¥ä½œè€…çš„åå¤éªŒè¯åŠå¹¿æ³›ä½¿ç”¨ï¼Œè¿™äº›æ¨¡å‹é€æ¸æˆä¸ºç»å…¸ï¼Œæˆ‘ä»¬è¿™é‡Œæ”¶é›†äº†ä¸€äº›å¸¸ç”¨çš„æ¨¡å‹è¿›è¡Œä»‹ç»ã€‚ 1. VGGè®ºæ–‡åœ°å€ VGGNetæ˜¯ç‰›æ´¥å¤§å­¦è®¡ç®—æœºè§†è§‰ç»„ï¼ˆVisual Geometry Groupï¼‰å’Œ Google DeepMind å…¬å¸çš„ç ”ç©¶å‘˜ä¸€èµ·ç ”å‘çš„çš„æ·±åº¦å·ç§¯ç¥ç»ç½‘ç»œã€‚VGGNet æ¢ç´¢äº†å·ç§¯ç¥ç»ç½‘ç»œçš„æ·±åº¦ä¸å…¶æ€§èƒ½ä¹‹é—´çš„å…³ç³»ï¼Œä¸€å…±æœ‰å…­ç§ä¸åŒçš„ç½‘ç»œç»“æ„ï¼Œä½†æ˜¯æ¯ç§ç»“æ„éƒ½æœ‰å«æœ‰ï¼•ç»„å·ç§¯ï¼Œæ¯ç»„å·ç§¯éƒ½ä½¿ç”¨ï¼“ï½˜ï¼“çš„å·ç§¯æ ¸ï¼Œæ¯ç»„å·ç§¯åè¿›è¡Œä¸€ä¸ªï¼’ï½˜ï¼’æœ€å¤§æ± åŒ–ï¼Œæ¥ä¸‹æ¥æ˜¯ä¸‰ä¸ªå…¨è¿æ¥å±‚ã€‚åœ¨è®­ç»ƒé«˜çº§åˆ«çš„ç½‘ç»œæ—¶ï¼Œå¯ä»¥å…ˆè®­ç»ƒä½çº§åˆ«çš„ç½‘ç»œï¼Œç”¨å‰è€…è·å¾—çš„æƒé‡åˆå§‹åŒ–é«˜çº§åˆ«çš„ç½‘ç»œï¼Œå¯ä»¥åŠ é€Ÿç½‘ç»œçš„æ”¶æ•›ã€‚VGGNet ç›¸æ¯”ä¹‹å‰state-of-the-artçš„ç½‘ç»œç»“æ„ï¼Œé”™è¯¯ç‡å¤§å¹…ä¸‹é™ï¼Œå¹¶å–å¾—äº†ILSVRC 2014æ¯”èµ›åˆ†ç±»é¡¹ç›®çš„ç¬¬2åå’Œå®šä½é¡¹ç›®çš„ç¬¬1åã€‚åŒæ—¶VGGNetçš„æ‹“å±•æ€§å¾ˆå¼ºï¼Œè¿ç§»åˆ°å…¶ä»–å›¾ç‰‡æ•°æ®ä¸Šçš„æ³›åŒ–æ€§éå¸¸å¥½ã€‚VGGNetçš„ç»“æ„éå¸¸ç®€æ´ï¼Œæ•´ä¸ªç½‘ç»œéƒ½ä½¿ç”¨äº†åŒæ ·å¤§å°çš„å·ç§¯æ ¸å°ºå¯¸ï¼ˆ33ï¼‰å’Œæœ€å¤§æ± åŒ–å°ºå¯¸ï¼ˆ22ï¼‰ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒVGGNetä¾ç„¶ç»å¸¸è¢«ç”¨æ¥æå–å›¾åƒç‰¹å¾ã€‚ ç»å…¸å·ç§¯ç¥ç»ç½‘ç»œä¹‹VGGNet VGGæ¨¡å‹æ ¸å¿ƒæ‹†è§£ 2. GoogLeNet[v1] Going Deeper with Convolutions [v2] Batch Normalization: Accelerating Deep Network Training by Reducing Internal Covariate Shift [v3] Rethinking the Inception Architecture for Computer Vision [v4] Inception-v4, Inception-ResNet and the Impact of Residual Connections on Learning GoogLeNetçš„æœ€æ—©ç‰ˆæœ¬ï¼Œå‡ºç°åœ¨2014å¹´çš„â€ Going deeper with convolutions â€œã€‚ä¹‹æ‰€ä»¥åä¸º â€œGoogLeNetâ€ è€Œé â€œGoogleNetâ€ ,æ–‡ç« è¯´æ˜¯ä¸ºäº†å‘æ—©æœŸçš„LeNetè‡´æ•¬ã€‚GoogleNetæå‡ºäº†ä¸€ä¸ªå…¨æ–°çš„æ·±åº¦ CNN æ¶æ„â€”â€”Inceptionï¼Œæ— å…¨è¿æ¥å±‚ï¼Œå¯ä»¥èŠ‚çœè¿ç®—çš„åŒæ—¶ï¼Œå‡å°‘äº†å¾ˆå¤šå‚æ•°ï¼Œå‚æ•°æ•°é‡æ˜¯AlexNetçš„1/12ï¼Œæ•°é‡åªæœ‰5 millionï¼Œè€Œä¸”åœ¨ImageNetç«èµ›ä¸­å–å¾—äº†å¾ˆå¥½çš„æˆç»©ã€‚ GoogleNetç³»åˆ—è®ºæ–‡å­¦ä¹  3. Resnetè®ºæ–‡åœ°å€ ResNetåœ¨2015å¹´è¢«æå‡ºï¼Œåœ¨ImageNetæ¯”èµ›classificationä»»åŠ¡ä¸Šè·å¾—ç¬¬ä¸€åï¼Œå› ä¸ºå®ƒ â€œç®€å•ä¸å®ç”¨â€ å¹¶å­˜ï¼Œä¹‹åå¾ˆå¤šæ–¹æ³•éƒ½å»ºç«‹åœ¨ResNet50æˆ–è€…ResNet101çš„åŸºç¡€ä¸Šå®Œæˆçš„ï¼Œæ£€æµ‹ï¼Œåˆ†å‰²ï¼Œè¯†åˆ«ç­‰é¢†åŸŸéƒ½çº·çº·ä½¿ç”¨ResNetï¼Œå…·æœ‰å¾ˆå¼ºçš„é€‚åº”æ€§ã€‚ResNetçš„ä½œè€…ä½•å‡¯æ˜ä¹Ÿå› æ­¤æ‘˜å¾—CVPR2016æœ€ä½³è®ºæ–‡å¥–ã€‚ ResNetè§£æ ResNetå­¦ä¹  4. MobileNet-V1 &amp; MobileNet -V2V1è®ºæ–‡åœ°å€ V2è®ºæ–‡åœ°å€ MobileNetæ˜¯Googleå›¢é˜Ÿé’ˆå¯¹ç§»åŠ¨ç«¯æå‡ºçš„é«˜æ•ˆå›¾åƒè¯†åˆ«ç½‘ç»œï¼Œæ·±å…¥çš„ç ”ç©¶äº†Depthwise Separable Convolutionsä½¿ç”¨æ–¹æ³•åè®¾è®¡å‡ºMobileNetï¼ŒDepthwise Separable Convolutionsçš„æœ¬è´¨æ˜¯å†—ä½™ä¿¡æ¯æ›´å°‘çš„ç¨€ç–åŒ–è¡¨è¾¾ã€‚åœ¨æ­¤åŸºç¡€ä¸Šç»™å‡ºäº†é«˜æ•ˆæ¨¡å‹è®¾è®¡çš„ä¸¤ä¸ªé€‰æ‹©ï¼šå®½åº¦å› å­(Width Multiplier)å’Œåˆ†è¾¨ç‡å› å­(Resolution Multiplier)ï¼›é€šè¿‡æƒè¡¡å¤§å°ã€å»¶è¿Ÿæ—¶é—´ä»¥åŠç²¾åº¦ï¼Œæ¥æ„å»ºè§„æ¨¡æ›´å°ã€é€Ÿåº¦æ›´å¿«çš„MobileNetã€‚ MobileNet V2æ˜¯ä¹‹å‰MobileNet V1çš„æ”¹è¿›ç‰ˆã€‚MobileNet V1ä¸­ä¸»è¦æ˜¯å¼•å…¥äº†Depthwise Separable Convolutionä»£æ›¿ä¼ ç»Ÿçš„å·ç§¯æ“ä½œï¼Œç›¸å½“äºå®ç°äº†spatialå’Œchannelä¹‹é—´çš„è§£è€¦ï¼Œè¾¾åˆ°æ¨¡å‹åŠ é€Ÿçš„ç›®çš„ï¼Œæ•´ä½“ç½‘ç»œç»“æ„è¿˜æ˜¯å»¶ç»­äº†VGGç½‘ç»œç›´ä¸Šç›´ä¸‹çš„ç‰¹ç‚¹ã€‚å’ŒMobileNet V1ç›¸æ¯”ï¼ŒMobileNet V2ä¸»è¦çš„æ”¹è¿›æœ‰ä¸¤ç‚¹ï¼š1ã€Linear Bottlenecksã€‚ä¹Ÿå°±æ˜¯å»æ‰äº†å°ç»´åº¦è¾“å‡ºå±‚åé¢çš„éçº¿æ€§æ¿€æ´»å±‚ï¼Œç›®çš„æ˜¯ä¸ºäº†ä¿è¯æ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›ã€‚2ã€Inverted Residual blockã€‚è¯¥ç»“æ„å’Œä¼ ç»Ÿresidual blockä¸­ç»´åº¦å…ˆç¼©å‡å†æ‰©å¢æ­£å¥½ç›¸åï¼Œå› æ­¤shotcutä¹Ÿå°±å˜æˆäº†è¿æ¥çš„æ˜¯ç»´åº¦ç¼©å‡åçš„feature mapã€‚ æ·±åº¦è§£è¯»è°·æ­ŒMobileNet è½»é‡åŒ–ç½‘ç»œï¼šMobileNet-V2 5. U-NETè®ºæ–‡åœ°å€ é¡¹ç›®åœ°å€ è¿™æ˜¯Encoder-Decoderç½‘ç»œçš„ä¸€ç§ï¼Œåœ¨æ— ç›‘ç£å­¦ä¹ ä¸­çš„æ¡†æ¶ï¼Œåˆ©ç”¨convä¸deconvé™ç»´å‡ç»´æ¥è¿›è¡Œå­¦ä¹ ï¼Œåˆ†åˆ«å«åšencoderä¸decoderç¼–ç è§£ç ï¼Œä¸€èˆ¬åŸºäºå·ç§¯ç½‘ç»œï¼Œencoderåç›¸å½“äºå­¦ä¹ åˆ°äº†ç‰¹å¾ï¼Œè€Œdecoderåç›¸å½“äºè¿˜åŸäº†å›¾åƒï¼Œæ—¢å¯ä»¥ç”¨è¾“å…¥å›¾åƒè¿›è¡Œè®­ç»ƒï¼Œè®­ç»ƒå¥½ä¸€å±‚åŠ æ·±ä¸€å±‚ã€‚å†å¯ä»¥åˆ©ç”¨æœ‰ç›‘ç£å¾®è°ƒï¼Œä»è€Œè¾¾åˆ°åˆ†ç±»æˆ–è€…å›¾åƒè½¬æ¢çš„ç›®çš„ã€‚ 6. GANæ€»ç»“ï¼šåˆ©ç”¨ä¸¤ä¸ªç½‘ç»œå¯¹æŠ—ç”Ÿæˆæ¨¡å‹ï¼Œç”Ÿæˆå™¨ä¸è¾¨åˆ«å™¨ï¼Œç”Ÿæˆå™¨è¾“å…¥å›¾åƒï¼Œç”Ÿæˆæ‰€éœ€å›¾åƒï¼Œè¾¨åˆ«å™¨è¾¨åˆ«æ‰€éœ€å›¾åƒä¸ç”Ÿæˆå›¾åƒï¼Œä½¿ç”Ÿæˆå™¨çš„ç”Ÿæˆå›¾åƒéª—è¿‡è¾¨åˆ«å™¨ã€‚","categories":[],"tags":[{"name":"DeepLearning","slug":"DeepLearning","permalink":"https://edward7zhang.github.io/tags/DeepLearning/"}]},{"title":"å¸¸ç”¨æ·±åº¦å­¦ä¹ æ¡†æ¶[å­¦ä¹ &è½¬è½½]","slug":"å¸¸è§æ·±åº¦å­¦ä¹ æ¡†æ¶","date":"2019-01-09T11:07:14.000Z","updated":"2019-01-09T12:55:52.270Z","comments":true,"path":"2019/01/09/å¸¸è§æ·±åº¦å­¦ä¹ æ¡†æ¶/","link":"","permalink":"https://edward7zhang.github.io/2019/01/09/å¸¸è§æ·±åº¦å­¦ä¹ æ¡†æ¶/","excerpt":"","text":"æ·±åº¦å­¦ä¹ ç ”ç©¶çš„çƒ­æ½®æŒç»­é«˜æ¶¨ï¼Œå„ç§å¼€æºæ·±åº¦å­¦ä¹ æ¡†æ¶ä¹Ÿå±‚å‡ºä¸ç©·ï¼Œå…¶ä¸­åŒ…æ‹¬TensorFlowã€Caffeã€Kerasã€CNTKã€Torch7ã€MXNetã€Leafã€Theanoã€DeepLearning4ã€Lasagneã€Neonç­‰ã€‚æˆ‘ä»¬å‚è€ƒå¼€æºçš„æµ‹è¯•ç»“æœï¼Œç»“åˆè‡ªå·±æ•´ç†çš„æ•°æ®ï¼Œé’ˆå¯¹ä¸»æµçš„æ·±åº¦å­¦ä¹ æ¡†æ¶è¿›è¡Œç®€å•å¯¹æ¯”åŠä»‹ç»ã€‚ æ¡†æ¶ æœºæ„ æ”¯æŒè¯­è¨€ Stars Forks Caffe BVLC C++/Python/Matlab 25480 15560 CNTK Microsoft C++ 15083 4020 Keras Fchollet Python 33332 12563 Tensorflow Google Python/C++/Goâ€¦ 109115 67339 MXNet DMLC Python/C++/Râ€¦ 15162 5484 PyTorch Facebook Python 18517 4426 æ€§èƒ½å¯¹æ¯”1. è®­ç»ƒæ—¶é—´: Network DenseNet-121 (Multi-GPU)è¿è¡Œäº SSD ç¡¬ç›˜ æ¡†æ¶ 1xV100/CUDA 9/CuDNN 7 4xV100/CUDA 9/CuDNN 7 Pytorch 27min 10min Keras(TF) 38min 18min Tensorflow 33min 22min MXNet(Gluon) 29min 10min è¿è¡ŒäºRAMå†…å­˜ä¸­ æ¡†æ¶ 1xV100/CUDA 9/CuDNN 7 4xV100/CUDA 9/CuDNN 7 Pytorch 25min 8min Keras(TF) 36min 15min Tensorflow 25min 14min MXNet(Gluon) 28min 8min 2. 1000å¼ å›¾ç‰‡æ¨ç†æ—¶é—´(s): Network ResNet-50 æ¡†æ¶ K80/CUDA 8/CuDNN 6 P100/CUDA 8/CuDNN 6 CNTK 8.5 1.6 Keras(TF) 10.2 2.9 Tensorflow 6.5 1.8 MXNet 7.7 1.6 PyTorch 7.7 1.9 3. CPUæ¨ç†æ—¶é—´(s): E5-2630v4, Network FCN5 æ¡†æ¶ 1 Thread 2 Threads 4 Threads 8 Threads 16 Threads 32 Threads Caffe 1887.2ms 1316.7ms 1051.8ms 952.1ms 952.3ms 834.7ms CNTK 1238.7ms 616.3ms 352.7ms 229.5ms 155.9ms 192.4ms Tensorflow 992.2ms 773.6ms 419.3ms 252.3ms 149.7ms 124.7ms MXNet 1386.8ms 915.5ms 559.0ms 499.1ms 416.3ms 413.9ms æ¡†æ¶è¯„ä»· æ¡†æ¶ å®‰è£…æˆæœ¬ ä»£ç ç†è§£ç¨‹åº¦ APIä¸°å¯Œç¨‹åº¦ æ¨¡å‹ä¸°å¯Œç¨‹åº¦ æ–‡æ¡£å®Œæ•´ç¨‹åº¦ è®­ç»ƒä¸æµ‹è¿‡ç¨‹ å­¦ä¹ èµ„æº CNTK è‰¯å¥½ è‰¯å¥½ è‰¯å¥½ è‰¯å¥½ ä¼˜ç§€ è‰¯å¥½ è‰¯å¥½ Keras è‰¯å¥½ è‰¯å¥½ ä¼˜ç§€ ä¼˜ç§€ è‰¯å¥½ ä¼˜ç§€ è‰¯å¥½ MXNet è‰¯å¥½ è‰¯å¥½ è‰¯å¥½ è‰¯å¥½ è‰¯å¥½ ä¼˜ç§€ ä¼˜ç§€ Pytorch ä¼˜ç§€ ä¼˜ç§€ è‰¯å¥½ è‰¯å¥½ ä¼˜ç§€ è‰¯å¥½ è‰¯å¥½ Tensorflow è‰¯å¥½ è‰¯å¥½ ä¼˜ç§€ ä¼˜ç§€ ä¼˜ç§€ ä¼˜ç§€ ä¼˜ç§€ Caffe è‰¯å¥½ ä¼˜ç§€ è‰¯å¥½ è‰¯å¥½ ä¼˜ç§€ è‰¯å¥½ ä¼˜ç§€ æ¨èæ¡†æ¶ç›®å‰ä¼—å¤šçš„æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œä½¿ç”¨è€…åªè¦é€‰æ‹©é€‚åˆè‡ªå·±çš„æ¡†æ¶å³å¯ï¼Œæˆ‘ä»¬åœ¨æ—¥å¸¸ä½¿ç”¨ä¸­ï¼Œè€ƒè™‘åˆ°è®­ç»ƒçš„å¿«æ·ç¨‹åº¦ï¼Œéƒ¨ç½²éš¾åº¦ä»¥åŠå¯¹CNNã€RNNæ¨¡å‹çš„ç›´æ¥ç¨‹åº¦ï¼Œæ¨èä»¥ä¸‹å‡ æ¬¾æ·±åº¦å­¦ä¹ æ¡†æ¶ã€‚ 1.KerasKeras æä¾›äº†ç®€å•æ˜“ç”¨çš„ API æ¥å£ï¼Œå…¥é—¨å¿«ï¼Œç‰¹åˆ«é€‚åˆåˆå­¦è€…å…¥é—¨ã€‚å…¶åç«¯é‡‡ç”¨ TensorFlow, CNTKï¼Œä»¥åŠ Theanoã€‚å¦å¤–ï¼ŒDeeplearning4j çš„ Python ä¹Ÿæ˜¯åŸºäº Keras å®ç°çš„ã€‚Keras å‡ ä¹å·²ç»æˆäº† Python ç¥ç»ç½‘ç»œçš„æ¥å£æ ‡å‡†ã€‚ 2.TensorFlowè°·æ­Œå‡ºå“ï¼Œè¿½éšè€…ä¼—å¤šã€‚ä»£ç è´¨é‡é«˜ï¼Œæ”¯æŒæ¨¡å‹ä¸°å¯Œï¼Œæ”¯æŒè¯­è¨€å¤šæ ·ï¼Œ TensorBoard å¯è§†åŒ–å·¥å…·ä½¿ç”¨æ–¹ä¾¿ã€‚ 3.MXNetå·²è¢«äºšé©¬é€Šé€‰ä¸º AWS ä¸Šçš„æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œæ”¯æŒåŠ¨æ€å›¾è®¡ç®—ã€‚MXNet æœ‰è®¸å¤šä¸­å›½å¼€å‘è€…ï¼Œå› è€Œæœ‰éå¸¸è‰¯å¥½çš„ä¸­æ–‡æ–‡æ¡£æ”¯æŒã€‚Gluon æ¥å£ä½¿å¾— MXNet åƒ Keras ä¸€æ ·ç®€å•æ˜“ç”¨ã€‚ å‚è€ƒèµ„æ–™ é¦™æ¸¯æµ¸ä¼šå¤§å­¦æ·±åº¦å­¦ä¹ æ¡†æ¶Benchmark DeepLearningFrameworks åšå®¢ å¼€å‘è€…å¦‚ä½•é€‰æ‹©æ·±åº¦å­¦ä¹ æ¡†æ¶?","categories":[],"tags":[{"name":"DeepLearning","slug":"DeepLearning","permalink":"https://edward7zhang.github.io/tags/DeepLearning/"}]},{"title":"å›ç¯ï¼Œæœªæ¥å¯æœŸ","slug":"å›ç¯ï¼Œæœªæ¥å¯æœŸ","date":"2018-08-26T17:42:07.000Z","updated":"2018-08-26T13:25:57.009Z","comments":true,"path":"2018/08/27/å›ç¯ï¼Œæœªæ¥å¯æœŸ/","link":"","permalink":"https://edward7zhang.github.io/2018/08/27/å›ç¯ï¼Œæœªæ¥å¯æœŸ/","excerpt":"","text":"ä»Šå¤©ï¼Œæ˜¯æˆ‘21å²çš„ç”Ÿæ—¥ã€‚åœ¨ä¸€ä¸ªåŠæœˆå‰æˆ‘è¾èŒäº†ï¼Œä½†å‡†ç¡®çš„è¯´æ˜¯è¢«åŠ¨å¼è¾èŒã€‚ç°åœ¨çœ‹æ¥è¿™æ˜¯ä¸€ä»¶å¥½äº‹ã€‚ ç¬¬ä¸€å¤©åˆ°å…¬å¸æ¥¼ä¸‹ å·¥ç‰Œ ç¬¬ä¸€å¤©å®‰é¡¿ä¸‹æ¥ ä¼¼ä¹äººç”Ÿè¿›å…¥å¼±å† ä¹‹åï¼Œå¾ˆå¤šäº‹æƒ…éƒ½äº‹å‘çªç„¶ï¼Œå¥½åœ¨äº‹æƒ…å‘ç”Ÿè¿‡åï¼Œå†å›å¤´çœ‹ï¼Œä¸å¤±æ˜¯ä¸€ç§ä¸é”™çš„ç»å†è¾èŒçš„åŸå› æ˜¯ä¼˜ç§€çš„projectä¸è¢«è®¤å¯â€¦æ‰€ä»¥å’Œæˆ‘çš„ç›´æ¥ä¸»ç®¡å°±ä¸€å¹¶é€‰æ‹©äº†ç¦»èŒâ€¦ åœ¨å¤–ç•Œäººçœ‹æ¥å¯èƒ½è¿™ç§åšæ³•ç®€ç›´æ˜¯ä¸è§£â€¦ å—¯ï¼Œå¸Œæœ›è¿™å®¶å…¬å¸å¯ä»¥ä¿æŒåˆå¿ƒ å¯æ˜¯å¯¹äºç¨‹åºçŒ¿è¿™ç±»äººæ¥è¯´ï¼Œèƒ½åšè‡ªå·±æ„Ÿå…´è¶£çš„äº‹æƒ…åº”è¯¥æ˜¯æœ€é«˜çš„è£èª‰â€¦ å†µä¸”æ˜¯åœ¨ä¸€ä¸ªä¼˜ç§€projectå¹¶ä¸”åœ¨æœ‰è‰¯å¥½å®ç°çš„åŸºç¡€ä¸Šè¢«å¦æ‰â€¦è¿™ç§ç—›è‹¦è«è¿‡äºé¥®é¸© æ­£å¦‚æ ‡é¢˜æ‰€è¨€ å›ç¯ ï¼Œåˆšåˆšæ¥åˆ°æ¶ˆæ¯çš„æ—¶å€™è‡ªå·±è¿˜éƒé—·äº†ä¸€æ•´å¤©ï¼Œç°åœ¨å›å¤´çœ‹è¿™åº”è¯¥æ˜¯ä¸€ç§å›ç¯ï¼Œå°±å¦‚åŒç«‹äº¤æ¡¥çš„è½¬ç¯åŒé“ï¼Œè™½ç„¶åˆç»•å›äº†åŸç‚¹ï¼Œä½†æ˜¯å´æå‡äº†ä¸€ä¸ªç»´åº¦ã€‚ å¹¸è¿å¦‚æˆ‘ï¼Œåœ¨è¿™çŸ­æš‚çš„å®ä¹ ä¸­é‡åˆ°äº†éå¸¸niceçš„ä¸»ç®¡ï¼Œæ¶¨äº†å¾ˆå¤šè§è¯†ï¼Œæ„è¯†åˆ°æˆ‘ä¹‹å‰æ˜¯å¤šä¹ˆçš„çŸ­è§†â€¦ä»è€Œä¹Ÿçœ‹åˆ°äº†è‡ªå·±æœªæ¥çš„ä¸€äº›å¯èƒ½ï¼Œä½†å‰æè¦åšä¸€äº›ä»˜å‡ºã€‚ å…¬å¸å¯¹é¢çš„è…¾è®¯&å®Œç¾ä¸–ç•Œ åœ¨è¿™ä¸¤ä¸ªæœˆçš„å®ä¹ ä¸­ï¼Œé¡¹ç›®è¿›å±•æœ‰å¦‚ç¥åŠ©åœ¨å®ä¹ è¿™æ®µæ—¶é—´ï¼Œé¡¹ç›®è¿›å±•é€Ÿåº¦æƒŠäººï¼Œæ¯å¤©éƒ½å¾ˆå……å®ï¼Œæ¯å¤©ä¸€ç»„çš„ä¼™ä¼´ä»¬éƒ½åœ¨ä¸€èµ·æƒ³å¯¹ç­–ï¼Œç°åœ¨å›å¤´æƒ³æƒ³ä¹Ÿè®¸æ˜¯ä¹‹å‰è‡ªå·±åœ¨äººå·¥æ™ºèƒ½æ–¹é¢çš„ä¸€ç‚¹å°å°çš„ç»éªŒåŠ ä¹‹ä¸»ç®¡ä¹‹å‰åœ¨NLPæ–¹é¢çš„ç ”ç©¶çš„å…±äº¤ä½¿å¾—é¡¹ç›®å‘å±•è¿…é€Ÿã€‚ ä¸¤ä¸ªæœˆçš„æ—¶é—´å®ç°äº†æ¨¡å‹çš„æ­å»ºä»¥åŠdemoçš„å®ç°&amp;é¡¹ç›®é¢„æ¼”â€¦ å·¥ä½ åœ¨å…¬å¸æœ€åä¸€å¤©çš„é¡¹ç›®æ±‡æŠ¥ è‡³äºä¸ºä»€ä¹ˆå¦æ‰æˆ‘ä»¬â€¦å„ç§å› ç´ â€¦ä¸æƒ³æ˜è¯´äº†â€¦æœ‰ç‚¹å®˜å®¦é£æ ¼â€¦å„ä½çœ‹å®¢è‡ªå·±æƒ³è±¡å§â€¦ ä¸‹ä¸€æ­¥ï¼Œå†è¿›ç«™ åå°„ è¿™ä¸€è¶Ÿå®ä¹ ä¸‹æ¥ï¼Œå¯ä»¥è¯´å½»åº•æ”¹å˜äº†æˆ‘æ›¾ç»å¯¹è‡ªå·±çš„çœ‹æ³•â€¦ æ€»çš„æ¥è¯´ï¼Œè¿‡å»æˆ‘å¸¸å¸¸è§†çº¿è¿‡åº¦çŸ­æµ…â€¦åœ¨å¯¹è‡ªå·±äººç”Ÿçš„è§„åˆ’ä¸Šä¹Ÿè¿‡äºä¿å®ˆå§â€¦ äº‹å®ä¸Šï¼Œä¸€ä¸ªäººæ‰€çœ‹åˆ°çš„å¾€å¾€æ˜¯ç‹­çª„çš„ï¼Œé€šè¿‡ä¸æ–­çš„æ¥è§¦é«˜å±‚æ¬¡çš„äººå’Œäº‹ç‰©æ‰èƒ½è®©è‡ªå·±å˜å¾—æ›´openã€‚ å†³å®šäº†è€ƒç ”ï¼Œä¹Ÿçœ‹æ¸…äº†å›½å†…çš„äº’è”ç½‘ç¯å¢ƒçš„è™šå®â€¦å¸Œæœ›è‡ªå·±èƒ½ä»˜æœ‰æ‰€å¾—â€¦ å¦‚æœæœ‰æœºä¼šï¼Œè¿˜æ˜¯å»æ¥è§¦æ¥è§¦æŠ€æœ¯åŸå§‹åœ°ç†é™¶ç†é™¶å§â€¦ æœªæ¥å¯æœŸåœ¨å¤§å­¦é‡Œçš„ä¸‰å¹´å†ç®—ä¸Šå®ä¹ çš„ç»å†â€¦å°è¯•äº†äº’è”ç½‘å¼€å‘çš„å¾ˆå¤šæ–¹å‘â€¦ æœ€ç»ˆå¸å¼•æˆ‘çš„å¹¶ä¸æ˜¯å„ç§æ¡†æ¶ç‚«æŠ€çš„å¼€å‘â€¦è€Œæ˜¯èƒ½èµ‹äºˆåº”ç”¨çµé­‚çš„äººå·¥æ™ºèƒ½æ–¹å‘â€¦ å¤§æ¦‚æœªæ¥çš„å‘å±•æ–¹å‘ä¹Ÿå°±å®šåœ¨è¿™æ ·çš„è¶‹åŠ¿äº†â€¦ ç»§ç»­è¡Œèµ°ï¼Œæœªæ¥å¯æœŸã€‚ ç¦»å¼€é‚£å¤©å¤©æ°”å¾ˆå¥½ æœªæ¥å¯æœŸ","categories":[],"tags":[{"name":"Inspire","slug":"Inspire","permalink":"https://edward7zhang.github.io/tags/Inspire/"}]},{"title":"åŸºäºTensorFlowçš„CNNä¸­æ–‡æ–‡æœ¬åˆ†ç±»","slug":"åŸºäºTensorFlowçš„CNNä¸­æ–‡æ–‡æœ¬åˆ†ç±»","date":"2018-05-20T10:00:07.000Z","updated":"2018-05-20T10:50:21.054Z","comments":true,"path":"2018/05/20/åŸºäºTensorFlowçš„CNNä¸­æ–‡æ–‡æœ¬åˆ†ç±»/","link":"","permalink":"https://edward7zhang.github.io/2018/05/20/åŸºäºTensorFlowçš„CNNä¸­æ–‡æ–‡æœ¬åˆ†ç±»/","excerpt":"","text":"CNNåœ¨è®¡ç®—æœºè§†è§‰é¢†åŸŸå–å¾—äº†å¾ˆå¥½çš„ç»“æœï¼ŒåŒæ—¶å®ƒå¯ä»¥åº”ç”¨åœ¨æ–‡æœ¬åˆ†ç±»ä¸Šé¢ï¼Œæ­¤æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨tensorflowå®ç°æ­¤ä»»åŠ¡ã€‚ CNNå®ç°æ–‡æœ¬åˆ†ç±»çš„åŸç†ä¸‹å›¾å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨cnnè¿›è¡Œå¥å­åˆ†ç±»ã€‚è¾“å…¥æ˜¯ä¸€ä¸ªå¥å­ï¼Œä¸ºäº†ä½¿å…¶å¯ä»¥è¿›è¡Œå·ç§¯ï¼Œé¦–å…ˆéœ€è¦å°†å…¶è½¬åŒ–ä¸ºå‘é‡è¡¨ç¤ºï¼Œé€šå¸¸ä½¿ç”¨word2vecå®ç°ã€‚d=5è¡¨ç¤ºæ¯ä¸ªè¯è½¬åŒ–ä¸º5ç»´çš„å‘é‡ï¼ŒçŸ©é˜µçš„å½¢çŠ¶æ˜¯[sentence_length Ã—Ã— 5]ï¼Œå³[7 Ã—Ã— 5]ã€‚6ä¸ªfilterï¼ˆå·ç§¯æ ¸ï¼‰ï¼Œä¸å›¾åƒä¸­ä½¿ç”¨çš„å·ç§¯æ ¸ä¸åŒçš„æ˜¯ï¼Œnlpä½¿ç”¨çš„å·ç§¯æ ¸çš„å®½ä¸å¥å­çŸ©é˜µçš„å®½ç›¸åŒï¼Œåªæ˜¯é•¿åº¦ä¸åŒã€‚è¿™é‡Œæœ‰ï¼ˆ2ï¼Œ3ï¼Œ4ï¼‰ä¸‰ç§sizeï¼Œæ¯ç§sizeæœ‰ä¸¤ä¸ªfilterï¼Œä¸€å…±æœ‰6ä¸ªfilterã€‚ç„¶åå¼€å§‹å·ç§¯ï¼Œä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œstrideæ˜¯1ï¼Œå› ä¸ºå¯¹äºé«˜æ˜¯4çš„filterï¼Œæœ€åç”Ÿæˆ4ç»´çš„å‘é‡ï¼Œï¼ˆ7-4ï¼‰/1+1=4ã€‚å¯¹äºé«˜æ˜¯3çš„filterï¼Œæœ€åç”Ÿæˆ5ç»´çš„å‘é‡ï¼Œï¼ˆ7-3ï¼‰/1+1=5ã€‚å·ç§¯ä¹‹åï¼Œæˆ‘ä»¬å¾—åˆ°å¥å­çš„ç‰¹å¾ï¼Œä½¿ç”¨activation functionå’Œ1-max-poolingå¾—åˆ°æœ€åçš„å€¼ï¼Œæ¯ä¸ªfilteræœ€åå¾—åˆ°ä¸¤ä¸ªç‰¹å¾ã€‚å°†æ‰€æœ‰ç‰¹å¾åˆå¹¶åï¼Œä½¿ç”¨softmaxè¿›è¡Œåˆ†ç±»ã€‚å›¾ä¸­æ²¡æœ‰ç”¨åˆ°chanel,ä¸‹æ–‡çš„å®éªŒå°†ä¼šä½¿ç”¨ä¸¤ä¸ªé€šé“ï¼Œstaticå’Œnon-staticï¼Œæœ‰ç›¸å…³çš„å…·ä½“è§£é‡Šã€‚ è¿™é‡Œå†™å›¾ç‰‡æè¿° æœ¬æ–‡ä½¿ç”¨çš„æ¨¡å‹ è¿™é‡Œå†™å›¾ç‰‡æè¿° ä¸»è¦åŒ…æ‹¬äº”å±‚ï¼Œç¬¬ä¸€å±‚æ˜¯embedding layer,ç¬¬äºŒå±‚æ˜¯convolutional layer,ç¬¬ä¸‰å±‚æ˜¯max-pooling layer,ç¬¬å››å±‚æ˜¯fully connected layerï¼Œæœ€åä¸€å±‚æ˜¯softmax layer.æ¥ä¸‹æ¥ä¾æ¬¡ä»‹ç»ç›¸å…³ä»£ç å®ç°ã€‚ Input placeholder1234# Placeholders for input, output and dropoutself.input_x = tf.placeholder(tf.int32, [None, sequence_length], name=&quot;input_x&quot;)self.input_y = tf.placeholder(tf.float32, [None, num_classes], name=&quot;input_y&quot;)self.dropout_keep_prob = tf.placeholder(tf.float32, name=&quot;dropout_keep_prob&quot;) tf.placeholder åˆ›å»ºä¸€ä¸ªå ä½ç¬¦å˜é‡ï¼Œåœ¨è®­ç»ƒæˆ–è€…æµ‹è¯•çš„æ—¶å€™ï¼Œéœ€è¦å°†å ä½ç¬¦è¾“å…¥åˆ°ç½‘ç»œä¸­è¿›è¡Œè®¡ç®—ï¼Œå…¶ä¸­çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¾“å…¥å¼ é‡çš„å½¢çŠ¶ã€‚None æ„å‘³ç€å®ƒå¯ä»¥æ˜¯ä»»ä½•ç»´åº¦çš„é•¿åº¦ï¼Œåœ¨æˆ‘ä»¬çš„å®éªŒä¸­å®ƒä»£è¡¨æ‰¹å¤„ç†çš„å¤§å°ï¼ŒNoneä½¿å¾—ç½‘ç»œå¯ä»¥å¤„ç†ä»»æ„é•¿åº¦çš„batchesã€‚å¤±æ´»ç‡åŒæ ·ä¹Ÿæ˜¯è¾“å…¥çš„ä¸€éƒ¨åˆ†ï¼Œåœ¨è®­ç»ƒçš„æ—¶å€™ä½¿ç”¨dropout ï¼Œæµ‹è¯•çš„æ—¶å€™ä¸ä½¿ç”¨dropout ã€‚ EMBEDDING LAYERè¿™ä¸€å±‚å°†å•è¯ç´¢å¼•æ˜ å°„åˆ°ä½ç»´çš„å‘é‡è¡¨ç¤ºï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæŸ¥æ‰¾è¡¨ï¼Œæˆ‘ä»¬ä»æ•°æ®ä¸­é€šè¿‡å­¦ä¹ å¾—åˆ°ã€‚ 1234with tf.device(&apos;/cpu:0&apos;), tf.name_scope(&quot;embedding&quot;): W = tf.Variable(tf.random_uniform([vocab_size, embedding_size], -1.0, 1.0), name=&quot;W&quot;) self.embedded_chars = tf.nn.embedding_lookup(W, self.input_x) self.embedded_chars_expanded = tf.expand_dims(self.embedded_chars, -1) å…¶ä¸­ï¼ŒW æ˜¯ åœ¨è®­ç»ƒæ—¶å¾—åˆ°çš„embedding matrix.ï¼Œç”¨éšæœºå‡åŒ€åˆ†å¸ƒè¿›è¡Œåˆå§‹åŒ–ã€‚tf.nn.embedding_lookupå®ç°embeddingæ“ä½œï¼Œå¾—åˆ° ä¸€ä¸ª3-dimensional çš„å¼ é‡ï¼Œå½¢çŠ¶æ˜¯ [None, sequence_length, embedding_size]. sequence_length æ˜¯æ•°æ®é›†ä¸­æœ€é•¿å¥å­çš„é•¿åº¦ï¼Œå…¶ä»–å¥å­éƒ½é€šè¿‡æ·»åŠ â€œPADâ€è¡¥å……åˆ°è¿™ä¸ªé•¿åº¦ã€‚embedding_size æ˜¯è¯å‘é‡çš„å¤§å°ã€‚ TensorFlowçš„å·ç§¯å‡½æ•°-conv2d éœ€è¦å››ä¸ªå‚æ•°ï¼Œ åˆ†åˆ«æ˜¯batch, width, height ä»¥åŠchannelã€‚ embeddingä¹‹åä¸åŒ…æ‹¬ channel, æ‰€ä»¥æˆ‘ä»¬äººä¸ºåœ°æ·»åŠ ä¸Šå®ƒï¼Œå¹¶è®¾ç½®ä¸º1ã€‚ç°åœ¨å°±æ˜¯[None, sequence_length, embedding_size, 1] CONVOLUTION AND MAX-POOLING LAYERSç”±å›¾ä¸­å¯çŸ¥ï¼Œ æˆ‘ä»¬æœ‰ä¸åŒsizeçš„filtersã€‚å› ä¸ºæ¯æ¬¡å·ç§¯éƒ½ä¼šäº§ç”Ÿä¸åŒå½¢çŠ¶çš„å¼ é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦éå†æ¯ä¸ªfilterï¼Œç„¶åå°†ç»“æœåˆå¹¶æˆä¸€ä¸ªå¤§çš„ç‰¹å¾å‘é‡ã€‚ 12345678910111213141516171819202122232425262728pooled_outputs = []for i, filter_size in enumerate(filter_sizes): with tf.name_scope(&quot;conv-maxpool-%s&quot; % filter_size): # Convolution Layer filter_shape = [filter_size, embedding_size, 1, num_filters] W = tf.Variable(tf.truncated_normal(filter_shape, stddev=0.1), name=&quot;W&quot;) b = tf.Variable(tf.constant(0.1, shape=[num_filters]), name=&quot;b&quot;) conv = tf.nn.conv2d( self.embedded_chars_expanded, W, strides=[1, 1, 1, 1], padding=&quot;VALID&quot;, name=&quot;conv&quot;) # Apply nonlinearity h = tf.nn.relu(tf.nn.bias_add(conv, b), name=&quot;relu&quot;) # Max-pooling over the outputs pooled = tf.nn.max_pool( h, ksize=[1, sequence_length - filter_size + 1, 1, 1], strides=[1, 1, 1, 1], padding=&apos;VALID&apos;, name=&quot;pool&quot;) pooled_outputs.append(pooled)# Combine all the pooled featuresnum_filters_total = num_filters * len(filter_sizes)self.h_pool = tf.concat(3, pooled_outputs)self.h_pool_flat = tf.reshape(self.h_pool, [-1, num_filters_total]) è¿™é‡ŒW æ˜¯filter çŸ©é˜µï¼Œh æ˜¯å¯¹å·ç§¯ç»“æœè¿›è¡Œéçº¿æ€§è½¬æ¢ä¹‹åçš„ç»“æœã€‚æ¯ä¸ª filteréƒ½ä»æ•´ä¸ªembeddingåˆ’è¿‡,ä¸åŒä¹‹å¤„åœ¨äºè¦†ç›–å¤šå°‘å•è¯ã€‚ â€œVALIDâ€ paddingæ„å‘³ç€æ²¡æœ‰å¯¹å¥å­çš„è¾¹ç¼˜è¿›è¡Œpadding,ä¹Ÿå°±æ˜¯ç”¨äº†narrow convolutionï¼Œè¾“å‡ºçš„å½¢çŠ¶æ˜¯ [1, sequence_length - filter_size + 1, 1, 1]ã€‚narrow convolutionä¸ wide convolutionçš„åŒºåˆ«æ˜¯æ˜¯å¦å¯¹è¾¹ç¼˜è¿›è¡Œå¡«å……ã€‚ è¿™é‡Œå†™å›¾ç‰‡æè¿° Narrow vs. Wide Convolution. Filter size 5, input size 7. Source: A Convolutional Neural Network for Modelling Sentences (2014)å½“ä½ çš„filteræ¯”è¾“å…¥çš„sizeè¿˜å¤§æ—¶ï¼Œä½ å¯ä»¥çœ‹åˆ°wide convolutionæ˜¯å¤šä¹ˆçš„æœ‰ç”¨ï¼Œç”šè‡³è¯´æ˜¯å¿…é¡»çš„ã€‚å¦‚ä¸Šæ‰€ç¤ºï¼Œnarrow convolutionäº§å‡ºçš„å°ºå¯¸æ˜¯ï¼ˆ7-5ï¼‰+1=3ï¼Œè€Œwide convolutionäº§å‡ºå°ºå¯¸æ˜¯ï¼ˆ7+2*4-5ï¼‰+1=11ã€‚é€šå¸¸ï¼Œè¾“å‡ºå°ºå¯¸çš„è§„åˆ™è¡¨è¾¾å¼ä¸ºï¼š è¿™é‡Œå†™å›¾ç‰‡æè¿° å¯¹è¾“å‡ºè¿›è¡Œmax-poolingåå¾—åˆ°å½¢çŠ¶æ˜¯ [batch_size, 1, 1, num_filters] çš„å¼ é‡ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç‰¹å¾å‘é‡ï¼Œæœ€åä¸€ä¸ªç»´åº¦æ˜¯ç‰¹å¾ä»£è¡¨æ•°é‡ã€‚æŠŠæ¯ä¸€ä¸ªmax-poolingä¹‹åçš„å¼ é‡åˆå¹¶èµ·æ¥ä¹‹åå¾—åˆ°ä¸€ä¸ªé•¿å‘é‡ [batch_size, num_filters_total]. in tf.reshape ä¸­çš„ -1è¡¨ç¤ºTå°†å‘é‡å±•å¹³ã€‚ DROPOUT LAYERDropoutä¹Ÿè®¸æ˜¯cnnä¸­æœ€æµè¡Œçš„æ­£åˆ™åŒ–æ–¹æ³•ã€‚dropoutçš„æƒ³æ³•å¾ˆç®€å•ï¼Œdropout layeréšæœºåœ°é€‰æ‹©ä¸€äº›ç¥ç»å…ƒï¼Œä½¿å…¶å¤±æ´»ã€‚è¿™æ ·å¯ä»¥é˜»æ­¢co-adapting,è¿«ä½¿å®ƒä»¬æ¯ä¸€ä¸ªéƒ½å­¦ä¹ åˆ°æœ‰ç”¨çš„ç‰¹å¾ã€‚å¤±æ´»çš„ç¥ç»å•å…ƒä¸ªæ•°ç”±dropout_keep_prob å†³å®šã€‚åœ¨è®­ç»ƒçš„æ—¶å€™è®¾ä¸º 0.5 ,æµ‹è¯•çš„æ—¶å€™è®¾ä¸º 1 (disable dropout) . 123# Add dropoutwith tf.name_scope(&quot;dropout&quot;): self.h_drop = tf.nn.dropout(self.h_pool_flat, self.dropout_keep_prob) SCORES AND PREDICTIONSåˆ©ç”¨ç‰¹å¾å‘é‡ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨çŸ©é˜µç›¸ä¹˜è®¡ç®—ä¸¤ç±»çš„å¾—åˆ†ï¼Œä¹Ÿå¯ä»¥ç”¨ softmaxå‡½æ•°è®¡ç®—ä¸¤ç±»çš„æ¦‚ç‡å€¼ã€‚ 12345with tf.name_scope(&quot;output&quot;): W = tf.Variable(tf.truncated_normal([num_filters_total, num_classes], stddev=0.1), name=&quot;W&quot;) b = tf.Variable(tf.constant(0.1, shape=[num_classes]), name=&quot;b&quot;) self.scores = tf.nn.xw_plus_b(self.h_drop, W, b, name=&quot;scores&quot;) self.predictions = tf.argmax(self.scores, 1, name=&quot;predictions&quot;) LOSS AND ACCURACYå¯ä»¥ç”¨å¾—åˆ†å®šä¹‰æŸå¤±å€¼ã€‚æŸå¤±è®¡ç®—çš„æ˜¯ç½‘ç»œçš„è¯¯å·®ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å°†å…¶æœ€å°åŒ–ï¼Œåˆ†ç±»é—®é¢˜æ ‡å‡†çš„æŸå¤±å‡½æ•°æ˜¯äº¤å‰ç†µæŸå¤±ã€‚ 1234# Calculate mean cross-entropy losswith tf.name_scope(&quot;loss&quot;): losses = tf.nn.softmax_cross_entropy_with_logits(self.scores, self.input_y) self.loss = tf.reduce_mean(losses) è®¡ç®—æ­£ç¡®ç‡ 1234# Calculate Accuracywith tf.name_scope(&quot;accuracy&quot;): correct_predictions = tf.equal(self.predictions, tf.argmax(self.input_y, 1)) self.accuracy = tf.reduce_mean(tf.cast(correct_predictions, &quot;float&quot;), name=&quot;accuracy&quot;) MINIMIZING THE LOSSåˆ©ç”¨TensorFlow å†…ç½®çš„optimizersï¼Œä¾‹å¦‚ Adam optimizerï¼Œä¼˜åŒ–ç½‘ç»œæŸå¤±ã€‚ 1234global_step = tf.Variable(0, name=&quot;global_step&quot;, trainable=False)optimizer = tf.train.AdamOptimizer(1e-4)grads_and_vars = optimizer.compute_gradients(cnn.loss)train_op = optimizer.apply_gradients(grads_and_vars, global_step=global_step) train_op æ˜¯ä¸€ä¸ªæ–°å»ºçš„æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‚æ•°ä¸Šè¿›è¡Œæ¢¯åº¦æ›´æ–°ã€‚æ¯æ‰§è¡Œä¸€æ¬¡ train_op å°±æ˜¯ä¸€æ¬¡è®­ç»ƒæ­¥éª¤ã€‚ TensorFlow å¯ä»¥è‡ªåŠ¨åœ°è®¡ç®—æ‰é‚£äº›å˜é‡æ˜¯â€œå¯è®­ç»ƒçš„â€ç„¶åè®¡ç®—ä»–ä»¬çš„æ¢¯åº¦ã€‚é€šè¿‡global_stepè¿™ä¸ªå˜é‡å¯ä»¥è®¡ç®—è®­ç»ƒçš„æ­¥æ•°ï¼Œæ¯è®­ç»ƒä¸€æ¬¡è‡ªåŠ¨åŠ ä¸€ã€‚ CHECKPOINTINGTensorFlow ä¸­å¯ä»¥ç”¨checkpointing ä¿å­˜æ¨¡å‹çš„å‚æ•°ã€‚checkpointingä¸­çš„å‚æ•°ä¹Ÿå¯ä»¥ç”¨æ¥ç»§ç»­è®­ç»ƒã€‚ 1234567# Checkpointingcheckpoint_dir = os.path.abspath(os.path.join(out_dir, &quot;checkpoints&quot;))checkpoint_prefix = os.path.join(checkpoint_dir, &quot;model&quot;)# Tensorflow assumes this directory already exists so we need to create itif not os.path.exists(checkpoint_dir): os.makedirs(checkpoint_dir)saver = tf.train.Saver(tf.all_variables()) DEFINING A SINGLE TRAINING STEPç”¨ä¸€ä¸ªbatchçš„æ•°æ®è¿›è¡Œä¸€æ¬¡è®­ç»ƒã€‚ 123456789101112131415def train_step(x_batch, y_batch): &quot;&quot;&quot; A single training step &quot;&quot;&quot; feed_dict = &#123; cnn.input_x: x_batch, cnn.input_y: y_batch, cnn.dropout_keep_prob: FLAGS.dropout_keep_prob &#125; _, step, summaries, loss, accuracy = sess.run( [train_op, global_step, train_summary_op, cnn.loss, cnn.accuracy], feed_dict) time_str = datetime.datetime.now().isoformat() print(&quot;&#123;&#125;: step &#123;&#125;, loss &#123;:g&#125;, acc &#123;:g&#125;&quot;.format(time_str, step, loss, accuracy)) train_summary_writer.add_summary(summaries, step) train_op ä»€ä¹ˆä¹Ÿä¸è¿”å›ï¼Œåªæ˜¯æ›´æ–°ç½‘ç»œä¸­çš„å‚æ•°ã€‚æœ€ç»ˆï¼Œæ‰“å°å‡ºå½“å‰è®­ç»ƒçš„æŸå¤±å€¼ä¸æ­£ç¡®ç‡ã€‚å¦‚æœbatchçš„sizeå¾ˆå°çš„è¯ï¼Œè¿™ä¸¤è€…åœ¨ä¸åŒçš„batchä¸­å·®åˆ«å¾ˆå¤§ã€‚å› ä¸ºä½¿ç”¨äº†dropoutï¼Œè®­ç»ƒçš„metricså¯èƒ½è¦æ¯”æµ‹è¯•çš„metricsç³Ÿç³•ã€‚ åŒæ ·çš„å‡½æ•°ä¹Ÿå¯ä»¥ç”¨åœ¨æµ‹è¯•æ—¶ã€‚ 12345678910111213141516def dev_step(x_batch, y_batch, writer=None): &quot;&quot;&quot; Evaluates model on a dev set &quot;&quot;&quot; feed_dict = &#123; cnn.input_x: x_batch, cnn.input_y: y_batch, cnn.dropout_keep_prob: 1.0 &#125; step, summaries, loss, accuracy = sess.run( [global_step, dev_summary_op, cnn.loss, cnn.accuracy], feed_dict) time_str = datetime.datetime.now().isoformat() print(&quot;&#123;&#125;: step &#123;&#125;, loss &#123;:g&#125;, acc &#123;:g&#125;&quot;.format(time_str, step, loss, accuracy)) if writer: writer.add_summary(summaries, step) TRAINING LOOPé€šè¿‡è¿­ä»£æ•°æ®è¿›è¡Œè®­ç»ƒã€‚ 123456789101112131415# Generate batchesbatches = data_helpers.batch_iter( zip(x_train, y_train), FLAGS.batch_size, FLAGS.num_epochs)# Training loop. For each batch...for batch in batches: x_batch, y_batch = zip(*batch) train_step(x_batch, y_batch) current_step = tf.train.global_step(sess, global_step) if current_step % FLAGS.evaluate_every == 0: print(&quot;\\nEvaluation:&quot;) dev_step(x_dev, y_dev, writer=dev_summary_writer) print(&quot;&quot;) if current_step % FLAGS.checkpoint_every == 0: path = saver.save(sess, checkpoint_prefix, global_step=current_step) print(&quot;Saved model checkpoint to &#123;&#125;\\n&quot;.format(path)) VISUALIZING RESULTS IN TENSORBOARD è¿™é‡Œå†™å›¾ç‰‡æè¿° è¿™é‡Œå†™å›¾ç‰‡æè¿° ä»ä¸Šå›¾ä¸­æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°: æˆ‘ä»¬çš„è®­ç»ƒ metricsä¸å¹³æ»‘ï¼Œå› ä¸ºç”¨çš„batch sizeså¾ˆå°ã€‚å¦‚æœç”¨å¤§çš„batches (æˆ–è€…åœ¨æ•´ä¸ªæµ‹è¯•é›†ä¸Šè¿›è¡Œè¯„ä¼°)ï¼Œä¼šå¾—åˆ°å¹³æ»‘çš„çº¿ã€‚ æµ‹è¯•é›†çš„ accuracyæ˜æ˜¾æ¯”è®­ç»ƒé›†çš„ä½ï¼Œè¯´æ˜ç½‘ç»œè¿‡æ‹Ÿåˆäº†ï¼Œæˆ‘ä»¬åº”è¯¥ç”¨æ›´å¤§çš„æ•°æ®é›†ï¼Œæ›´å¼ºçš„æ­£åˆ™åŒ–ï¼Œæ›´å°‘çš„æ¨¡å‹å‚æ•°ã€‚ è®­ç»ƒé›†ä¸Šçš„ loss å’Œ accuracyæ¯”æµ‹è¯•é›†ä½çš„åŸå› æ˜¯ç”¨äº†dropout. å‚è€ƒï¼šhttp://www.wildml.com/2015/12/implementing-a-cnn-for-text-classification-in-tensorflow/","categories":[],"tags":[{"name":"TensorFlow","slug":"TensorFlow","permalink":"https://edward7zhang.github.io/tags/TensorFlow/"}]},{"title":"å®éªŒå®¤æ‹›æ–°é¢˜ç›®â‘¡","slug":"å®éªŒå®¤æ‹›æ–°é¢˜ç›®(2)","date":"2018-05-08T10:00:07.000Z","updated":"2018-05-08T16:09:44.840Z","comments":true,"path":"2018/05/08/å®éªŒå®¤æ‹›æ–°é¢˜ç›®(2)/","link":"","permalink":"https://edward7zhang.github.io/2018/05/08/å®éªŒå®¤æ‹›æ–°é¢˜ç›®(2)/","excerpt":"","text":"ç«è½¦è£…ç®± ç°æœ‰ä¸€æ‰¹ç«è½¦è½¦å¢éœ€è¦æŒ‰ç…§æ¯èŠ‚è½¦å¢ä¸­æ‰€å«è´§ç‰©æ•°é‡è¿›è¡Œè¿æ¥å‘è½¦è¦æ±‚ï¼š å…¶ä¸­æ¯èŠ‚è½¦å¢ä¸­åŒ…å«ä¸¤ç§å…ƒç´  è½¦å¢å·ï¼šTrainNum ä»¥åŠæ‰€è£…è½½è´§ç‰©æ•°é‡ï¼šGoodsNumï¼› å…¶ä¸­æ¯èŠ‚è½¦å¢ä»¥å‰è½¦å¢ -&gt; åè½¦å¢ çš„å½¢å¼è¿›è¡Œè¿æ¥ï¼› æŒ‰ç…§æ¯èŠ‚è½¦å¢çš„GoodsNumçš„é™åºè¿›è¡Œè¿æ¥ï¼› è‡ªå®šä¹‰ä¸€ä¸ªTrainCabinæ•°æ®ç»“æ„ 12345struct TrainCabin&#123;//TODO structure your struct&#125;; å†™å‡ºä¸€ä¸ªå‡½æ•° 12TrainCabin* AssembleTraninCabin(TrainCabin* TrainList);//é€‰æ‹©ä½ è®¤ä¸ºæ—¶é—´å¤æ‚åº¦æœ€å°çš„ç®—æ³•è¿›è¡Œç¼–ç  è¿”å›å€¼ä¸ºå·²æŒ‰ç…§ä»¥ä¸Šè¦æ±‚æ’å¥½åºåçš„ç«è½¦é“¾è¡¨ è¾“å…¥ ç¬¬ä¸€ä¸ªå€¼ä¸ºTrainNum ç¬¬äºŒä¸ªå€¼ä¸ºGoodsNum ä¸­é—´ä»¥|åˆ†å‰² è¾“å…¥-1 ä»¥ç»“æŸè¾“å…¥ Inputï¼š1 | 3 2 | 5 3 | 7 4 | 2 5 | 0 -1 è¾“å‡º åœ¨æ§åˆ¶å°ä¸­æ‰“å°æ’å¥½åºçš„ç«è½¦åˆ— æŒ‰ç…§ä»¥ä¸‹ç¤ºä¾‹æ ¼å¼ Outputï¼š| 3 | 7 | -&gt; | 2 | 5 | -&gt; | 1 | 3 | -&gt; | 4 | 2 | -&gt; | 5 | 0 | é¢˜è§£éå¸¸åŸºç¡€çš„ä¸€é“è€ƒå¯Ÿæ•°æ®æŠ½è±¡ã€æ•°æ®ç»“æ„æ„é€ ã€æ’åºç®—æ³•ã€å•å‘é“¾è¡¨çš„ç®€å•é¢˜â€¦ä½†ä»Šå¤©çš„ç°åœºæƒ…å†µä¸å®¹ä¹è§‚12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576#include&lt;iostream.h&gt;#include&lt;stdlib.h&gt;typedef struct TrainCabin&#123; int TrainNum; int GoodsNum; struct TrainCabin *next;&#125;TrainCabin;TrainCabin* AssembleTraninCabin(TrainCabin *TrainList)&#123; TrainCabin *i=TrainList; TrainCabin *j; TrainCabin *temp=(TrainCabin*)malloc(sizeof(TrainCabin)); temp-&gt;next=NULL; while(i!=NULL) &#123; j=i-&gt;next; while(j!=NULL) &#123; if((*i).GoodsNum&gt;(*j).GoodsNum) &#123; (*temp).TrainNum=(*i).TrainNum; (*temp).GoodsNum=(*i).GoodsNum; (*i).TrainNum=(*j).TrainNum; (*i).GoodsNum=(*j).GoodsNum; (*j).TrainNum=(*temp).TrainNum; (*j).GoodsNum=(*temp).GoodsNum; &#125; j=j-&gt;next; &#125; i=i-&gt;next; &#125; return TrainList;&#125;void display(const TrainCabin *TrainList)&#123; while(TrainList-&gt;next!=NULL) &#123; cout&lt;&lt;\"|\"&lt;&lt;(*TrainList).TrainNum&lt;&lt;\"|\"&lt;&lt;(*TrainList).GoodsNum&lt;&lt;\"| -&gt; \"; TrainList=TrainList-&gt;next; &#125; cout&lt;&lt;\"|\"&lt;&lt;(*TrainList).TrainNum&lt;&lt;\"|\"&lt;&lt;(*TrainList).GoodsNum&lt;&lt;\"|\"&lt;&lt;endl;&#125;int main()&#123; int TrainNum=0,GoodsNum=0; TrainCabin *frist,*last; TrainCabin *temp; frist=(TrainCabin*)malloc(sizeof(TrainCabin)); frist-&gt;next=NULL; last=frist; char input; while(1) &#123; cin&gt;&gt;TrainNum; if(TrainNum==-1) break; cin&gt;&gt;input; cin&gt;&gt;GoodsNum; temp=(TrainCabin*)malloc(sizeof(TrainCabin)); temp-&gt;TrainNum=TrainNum; temp-&gt;GoodsNum=GoodsNum; temp-&gt;next=NULL; last-&gt;next=temp; last=temp; &#125; TrainCabin *result=AssembleTraninCabin((*frist).next); display(result); return 0;&#125;","categories":[],"tags":[{"name":"Lab_Interview","slug":"Lab-Interview","permalink":"https://edward7zhang.github.io/tags/Lab-Interview/"}]},{"title":"åç”Ÿå¯ç•","slug":"åç”Ÿå¯ç•","date":"2018-05-06T15:20:07.000Z","updated":"2018-05-06T15:44:43.485Z","comments":true,"path":"2018/05/06/åç”Ÿå¯ç•/","link":"","permalink":"https://edward7zhang.github.io/2018/05/06/åç”Ÿå¯ç•/","excerpt":"","text":"Take your Child to work Day at Google 2018 When I heared a kid who Firmly said I will be a video game programmer, I realize that it is extraordinary.","categories":[],"tags":[{"name":"Inspire","slug":"Inspire","permalink":"https://edward7zhang.github.io/tags/Inspire/"}]},{"title":"Fragment Navigation Drawer","slug":"Fragment Navigation Drawer","date":"2018-05-05T14:20:07.000Z","updated":"2018-05-05T15:28:55.945Z","comments":true,"path":"2018/05/05/Fragment Navigation Drawer/","link":"","permalink":"https://edward7zhang.github.io/2018/05/05/Fragment Navigation Drawer/","excerpt":"","text":"..æœ€è¿‘è¿™æ®µæ—¶é—´åœ¨ç€æ‰‹åšä¸€ä¸ªå¼€æºé¡¹ç›®..ä½¿ç”¨æ–°é²œçš„Kotlinä»¥åŠGoogleæœ€ç»å…¸çš„MaterialDesign..ç”±äºåˆšå¼€å§‹ä½¿ç”¨è‡ªç„¶ä¼šç¢°åˆ°å¾ˆå¤šå‘..ä¸Šé¢æ˜¯æˆ‘çš„é¡¹ç›®LogoğŸ¤£æœ¬ç¯‡æ–‡ç« é‡ç‚¹è®²è§£æœ€ç»å…¸çš„MaterialDesignä¸­çš„æŠ½å±‰å¼å¸ƒå±€ Navigation Drawerè™½ç„¶AndroidStudioå·²ç»é›†æˆäº†Sampleä½†è·Ÿæ‰‹å¤ç°ä¸€éè¿˜æ˜¯å¾ˆå—ç›Šçš„ã€‚ åœ¨2015å¹´I/Oå¤§ä¼šä¸Š..Googleå‘å¸ƒäº†NavigationViewï¼Œä¸ä¹‹å‰çš„å®˜æ–¹æ–‡æ¡£ç›¸æ¯”ï¼Œæœ¬æ–‡æ¡£æ›´å®¹æ˜“åˆ›å»ºå®Œæ•´çš„æŠ½å±‰å¼å¸ƒå±€éšç€Android 5.0 Lollipopçš„å‘å¸ƒï¼Œæ–°çš„ææ–™è®¾è®¡é£æ ¼çš„æŠ½å±‰æ¨ªè·¨å±å¹•çš„æ•´ä¸ªé«˜åº¦ï¼Œå¹¶æ˜¾ç¤ºåœ¨ActionBaråŠé€æ˜çš„ä¸Šæ–¹å¹¶é‡å StatusBarã€‚Like thisï¼š Usageæœ¬æŒ‡å—å°†ä»‹ç»å¦‚ä½•å»ºç«‹ä¸€ä¸ªåŸºäºMaterialDesignçš„å¯ä»¥åˆ‡æ¢ä¸åŒFragmentåˆ°å†…å®¹åŒºåŸŸçš„æŠ½å±‰å¼å¯¼èˆªã€‚In this way,you can define multiple fragments, and then define the list of options which will display in the drawers items list. Each item when clicked will switch the relevant fragment into the activityâ€™s container view. SetupMake sure to setup the Google Design Support Library before using Googleâ€™s new NavigationView,announced as part of the Android M release. The NavigationView should be backwards compatible with all versions down to Android 2.1. Make sure you have this Gradle dependency added to your app/build.gradle file:123dependencies &#123; implementation 'com.android.support:design:27.1.1'&#125; Setup Drawer Resources Create a menu/drawer_view.xml file:1234567891011121314151617&lt;menu xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt; &lt;group android:checkableBehavior=\"single\"&gt; &lt;item android:id=\"@+id/nav_first_fragment\" android:icon=\"@drawable/ic_one\" android:title=\"First\" /&gt; &lt;item android:id=\"@+id/nav_second_fragment\" android:icon=\"@drawable/ic_two\" android:title=\"Second\" /&gt; &lt;item android:id=\"@+id/nav_third_fragment\" android:icon=\"@drawable/ic_three\" android:title=\"Third\" /&gt; &lt;/group&gt;&lt;/menu&gt; Note that you can set one of these elements to be default selected by using android:checked=&quot;true&quot; . You can also create subheaders too and group elements together: 123456789101112&lt;item android:title=\"Sub items\"&gt; &lt;menu&gt; &lt;group android:checkableBehavior=\"single\"&gt; &lt;item android:icon=\"@drawable/ic_dashboard\" android:title=\"Sub item 1\" /&gt; &lt;item android:icon=\"@drawable/ic_forum\" android:title=\"Sub item 2\" /&gt; &lt;/group&gt; &lt;/menu&gt; &lt;/item&gt; Define Fragmentsæ¥ä¸‹æ¥ï¼Œä½ éœ€è¦æ¥å®šä¹‰ä½ çš„Fragmentsï¼Œè¿™äº›Fragmentså°†ä¼šæ˜¾ç¤ºåœ¨ä½ çš„Activityä¸­ã€‚These can be any support fragments you define within your application. Make sure that all the fragments extend from android.support.v4.app.Fragment. Setup ToolbarIn order to slide our navigation drawer over the ActionBar, we need to use the new Toolbar widget as defined in the AppCompat v21 library.The Toolbar can be embedded into your view hierarchy which makes sure that the drawer slides over the ActionBar. Create a new layout file res/layout/toolbar.xml with the following code:1234567891011&lt;android.support.v7.widget.Toolbar xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" android:id=\"@+id/toolbar\" android:layout_height=\"wrap_content\" android:layout_width=\"match_parent\" android:fitsSystemWindows=\"true\" android:minHeight=\"?attr/actionBarSize\" app:theme=\"@style/ThemeOverlay.AppCompat.Dark.ActionBar\" android:background=\"?attr/colorPrimaryDark\"&gt;&lt;/android.support.v7.widget.Toolbar&gt; Note that when the android:fitsSystemWindows attribute is set to true for a view, the view would be laid out as if the StatusBar and the ActionBar were present i.e. the UI on top gets padding enough to not be obscured by the navigation bar. Without this attribute, there is not enough padding factored into consideration for the ToolBar: We want our main content view to have the navigation bar and hence android:fitsSystemWindows is set to true for the Toolbar. To use the Toolbar as an ActionBar, you need to disable the default ActionBar. This can be done by setting the app theme in styles.xml file. 12345678&lt;resources&gt; &lt;!-- Base application theme. --&gt; &lt;style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.NoActionBar\"&gt; &lt;item name=\"colorPrimary\"&gt;#673AB7&lt;/item&gt; &lt;item name=\"colorPrimaryDark\"&gt;#512DA8&lt;/item&gt; &lt;item name=\"colorAccent\"&gt;#FF4081&lt;/item&gt; &lt;/style&gt;&lt;/resources&gt; Also note that normally you should decide on your color scheme by going to Material Palette and choosing a primary and dark primary color. For this example, we will pick purple-based colors as shown in the screenshot. Note: If you forget to disable the ActionBar in styles.xml, you are likely to see a java.lang.IllegalStateException with an error message that reads This Activity already has an action bar supplied by the window decor. Do not request Window.FEATURE_ACTION_BAR and set windowActionBar to false in your theme to use a Toolbar instead.If you see this message, you need to make sure to follow the previous steps. Setup Drawer in ActivityNext, letâ€™s setup a basic navigation drawer based on the following layout file which has the entire drawer setup in res/layout/activity_main.xml. Note that the Toolbar is added as the first child of the main content view by adding the include tag. Note: if you are using a CoordinatorLayout, it must not lie outside of the DrawerLayout. See https://stackoverflow.com/questions/32523188/coordinatorlayout-appbarlayout-navigationdrawer 1234567891011121314151617181920212223242526272829303132333435363738&lt;!-- This DrawerLayout has two children at the root --&gt;&lt;android.support.v4.widget.DrawerLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" android:id=\"@+id/drawer_layout\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\"&gt; &lt;!-- This LinearLayout represents the contents of the screen --&gt; &lt;LinearLayout android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" android:orientation=\"vertical\"&gt; &lt;!-- The ActionBar displayed at the top --&gt; &lt;include layout=\"@layout/toolbar\" android:layout_width=\"match_parent\" android:layout_height=\"wrap_content\" /&gt; &lt;!-- The main content view where fragments are loaded --&gt; &lt;FrameLayout android:id=\"@+id/flContent\" app:layout_behavior=\"@string/appbar_scrolling_view_behavior\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" /&gt; &lt;/LinearLayout&gt; &lt;!-- The navigation drawer that comes from the left --&gt; &lt;!-- Note that `android:layout_gravity` needs to be set to 'start' --&gt; &lt;android.support.design.widget.NavigationView android:id=\"@+id/nvView\" android:layout_width=\"wrap_content\" android:layout_height=\"match_parent\" android:layout_gravity=\"start\" android:background=\"@android:color/white\" app:menu=\"@menu/drawer_view\" /&gt;&lt;/android.support.v4.widget.DrawerLayout&gt; Now, letâ€™s setup the drawer in our activity. We can also setup the menu icon too. 123456789101112131415161718192021222324252627282930313233343536373839 public class MainActivity extends AppCompatActivity &#123; private DrawerLayout mDrawer; private Toolbar toolbar; private NavigationView nvDrawer; // Make sure to be using android.support.v7.app.ActionBarDrawerToggle version. // The android.support.v4.app.ActionBarDrawerToggle has been deprecated. private ActionBarDrawerToggle drawerToggle; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); // Set a Toolbar to replace the ActionBar. toolbar = (Toolbar) findViewById(R.id.toolbar); setSupportActionBar(toolbar); // Find our drawer view mDrawer = (DrawerLayout) findViewById(R.id.drawer_layout); &#125; @Override public boolean onOptionsItemSelected(MenuItem item) &#123; // The action bar home/up action should open or close the drawer. switch (item.getItemId()) &#123; case android.R.id.home: mDrawer.openDrawer(GravityCompat.START); return true; &#125; return super.onOptionsItemSelected(item); &#125;&#125; Navigating between Menu ItemsSetup a handler to respond to click events on the navigation elements and swap out the fragment. This can be put into the activity directly: 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071public class MainActivity extends AppCompatActivity &#123; // ... @Override protected void onCreate(Bundle savedInstanceState) &#123; // ...From section above... // Find our drawer view nvDrawer = (NavigationView) findViewById(R.id.nvView); // Setup drawer view setupDrawerContent(nvDrawer); &#125; private void setupDrawerContent(NavigationView navigationView) &#123; navigationView.setNavigationItemSelectedListener( new NavigationView.OnNavigationItemSelectedListener() &#123; @Override public boolean onNavigationItemSelected(MenuItem menuItem) &#123; selectDrawerItem(menuItem); return true; &#125; &#125;); &#125; public void selectDrawerItem(MenuItem menuItem) &#123; // Create a new fragment and specify the fragment to show based on nav item clicked Fragment fragment = null; Class fragmentClass; switch(menuItem.getItemId()) &#123; case R.id.nav_first_fragment: fragmentClass = FirstFragment.class; break; case R.id.nav_second_fragment: fragmentClass = SecondFragment.class; break; case R.id.nav_third_fragment: fragmentClass = ThirdFragment.class; break; default: fragmentClass = FirstFragment.class; &#125; try &#123; fragment = (Fragment) fragmentClass.newInstance(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; // Insert the fragment by replacing any existing fragment FragmentManager fragmentManager = getSupportFragmentManager(); fragmentManager.beginTransaction().replace(R.id.flContent, fragment).commit(); // Highlight the selected item has been done by NavigationView menuItem.setChecked(true); // Set action bar title setTitle(menuItem.getTitle()); // Close the navigation drawer mDrawer.closeDrawers(); &#125; // ...&#125; Add Navigation Header The NavigationView also accepts a custom attribute that can reference a layout that provides a header of our layout. For instance, you can create a layout/nav_header.xml similar to the following: 1234567891011121314151617&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" android:layout_width=\"match_parent\" android:layout_height=\"192dp\" android:background=\"?attr/colorPrimaryDark\" android:padding=\"16dp\" android:theme=\"@style/ThemeOverlay.AppCompat.Dark\" android:orientation=\"vertical\" android:gravity=\"bottom\"&gt; &lt;TextView android:layout_width=\"match_parent\" android:layout_height=\"wrap_content\" android:text=\"Header\" android:textColor=\"@android:color/white\" android:textAppearance=\"@style/TextAppearance.AppCompat.Body1\"/&gt;&lt;/LinearLayout&gt; You would then reference this in the layout res/layout/activity_main.xml in the NavigationView with the app:headerLayout custom attribute: 12345678&lt;!-- res/layout/activity_main.xml --&gt; &lt;!-- The navigation drawer --&gt; &lt;android.support.design.widget.NavigationView ... app:headerLayout=\"@layout/nav_header\"&gt; &lt;/android.support.design.widget.NavigationView&gt; This app:headerLayout inflates the specified layout into the header automatically. This can alternatively be done at runtime with: 123456789// Lookup navigation viewNavigationView navigationView = (NavigationView) findViewById(R.id.nav_draw);// Inflate the header view at runtimeView headerLayout = navigationView.inflateHeaderView(R.layout.nav_header);// We can now look up items within the header if neededImageView ivHeaderPhoto = headerLayout.findViewById(R.id.imageView); Getting references to the headerNote: Version 23.1.0 of the design support library switches NavigationView to using a RecyclerView and causes NPE (null exceptions) on header lookups unless the header is added at runtime. If you need to get a reference to the header, you need to use the new getHeaderView()method introduced in the latest v23.1.1 update: 1234567// There is usually only 1 header view. // Multiple header views can technically be added at runtime.// We can use navigationView.getHeaderCount() to determine the total number.View headerLayout = navigationView.getHeaderView(0); åŠ¨ç”»æ±‰å ¡å›¾æ ‡ ä¸ºäº†è®©æ±‰å ¡åŒ…å›¾æ ‡åŠ¨ç”»æ˜¾ç¤ºæŠ½å±‰æ­£åœ¨æ‰“å¼€å’Œå…³é—­ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ActionBarDrawerToggleç±»ã€‚ åœ¨ä½ çš„res/values/strings.xmlæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š 12345&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;&lt;resources&gt; &lt;string name=\"drawer_open\"&gt;Open navigation drawer&lt;/string&gt; &lt;string name=\"drawer_close\"&gt;Close navigation drawer&lt;/string&gt;&lt;/resources&gt; æˆ‘ä»¬éœ€è¦å°†DrawerLayoutå’Œå·¥å…·æ ç»“åˆåœ¨ä¸€èµ·ï¼š 1234567891011121314151617181920212223protected void onCreate(Bundle savedInstanceState) &#123; // Set a Toolbar to replace the ActionBar. toolbar = (Toolbar) findViewById(R.id.toolbar); setSupportActionBar(toolbar); // Find our drawer view mDrawer = (DrawerLayout) findViewById(R.id.drawer_layout); drawerToggle = setupDrawerToggle(); // Tie DrawerLayout events to the ActionBarToggle mDrawer.addDrawerListener(drawerToggle); &#125; private ActionBarDrawerToggle setupDrawerToggle() &#123; // NOTE: Make sure you pass in a valid toolbar reference. ActionBarDrawToggle() does not require it // and will not render the hamburger icon without it. return new ActionBarDrawerToggle(this, mDrawer, toolbar, R.string.drawer_open, R.string.drawer_close); &#125; æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿åœ¨æ¢å¤å±å¹•æˆ–é…ç½®å‘ç”Ÿå˜åŒ–ï¼ˆå³å±å¹•æ—‹è½¬ï¼‰æ—¶åŒæ­¥çŠ¶æ€ï¼š 1234567891011121314151617181920212223// `onPostCreate` called when activity start-up is complete after `onStart()`// NOTE 1: Make sure to override the method with only a single `Bundle` argument// Note 2: Make sure you implement the correct `onPostCreate(Bundle savedInstanceState)` method. // There are 2 signatures and only `onPostCreate(Bundle state)` shows the hamburger icon.@Overrideprotected void onPostCreate(Bundle savedInstanceState) &#123; super.onPostCreate(savedInstanceState); // Sync the toggle state after onRestoreInstanceState has occurred. drawerToggle.syncState();&#125;@Overridepublic void onConfigurationChanged(Configuration newConfig) &#123; super.onConfigurationChanged(newConfig); // Pass any configuration change to the drawer toggles drawerToggle.onConfigurationChanged(newConfig);&#125; æˆ‘ä»¬è¿˜éœ€è¦æ›´æ”¹onOptionsItemSelected()æ–¹æ³•å¹¶å…è®¸ActionBarToggleå¤„ç†äº‹ä»¶ã€‚ 1234567@Overridepublic boolean onOptionsItemSelected(MenuItem item) &#123; if (drawerToggle.onOptionsItemSelected(item)) &#123; return true; &#125; return super.onOptionsItemSelected(item);&#125; ActionBarToggleå°†æ‰§è¡Œä¸å…ˆå‰å®Œæˆçš„åŠŸèƒ½ç›¸åŒçš„åŠŸèƒ½ï¼Œä½†ä¼šæ·»åŠ æ›´å¤šæ£€æŸ¥ï¼Œå¹¶å…è®¸é¼ æ ‡â€‹â€‹å•å‡»å›¾æ ‡ä»¥æ‰“å¼€å’Œå…³é—­æŠ½å±‰ã€‚æœ‰å…³æ›´å¤šä¸Šä¸‹æ–‡ï¼Œè¯·å‚é˜…æºä»£ç ã€‚ æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒActionBarDrawerToggleä¼šä¸ºæ‚¨å‘ˆç°æ±‰å ¡å›¾æ ‡çš„è‡ªå®šä¹‰DrawerArrowDrawableã€‚ å¦å¤–ï¼Œè¯·ç¡®ä¿ä½¿ç”¨çš„android.support.v7.app.ActionBarDrawerToggleç‰ˆæœ¬ã€‚åœ¨android.support.v4.app.ActionBarDrawerToggleå·²è¢«å¼ƒç”¨ã€‚ ä½¿çŠ¶æ€æ åŠé€æ˜ è¦ä½¿çŠ¶æ€æ å˜æˆåŠé€æ˜çŠ¶æ€å¹¶è®©æˆ‘ä»¬çš„æŠ½å±‰æ»‘è¿‡å®ƒï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶è®¾ç½®android:windowTranslucentStatusä¸ºtrueã€‚ç”±äºæ­¤æ ·å¼ä¸é€‚ç”¨äºä¹‹å‰çš„Kitkatè®¾å¤‡ï¼Œå› æ­¤æˆ‘ä»¬å°†ä¸ºres/values-v19/styles.xmlAPIç‰ˆæœ¬19åŠä¹‹åçš„ç‰ˆæœ¬æ·»åŠ  æ–‡ä»¶ã€‚ æ³¨æ„ï¼šå¦‚æœres/values/styles.xmlç›´æ¥ç”¨æ­¤android:windowTranslucentStatusè¡Œä¿®æ”¹ï¼Œåˆ™å¯èƒ½éœ€è¦æ„å»ºä»…é€‚ç”¨äº19æˆ–æ›´é«˜ç‰ˆæœ¬çš„SDKï¼Œè¿™æ˜¾ç„¶ä¼šé™åˆ¶æ‚¨æ”¯æŒè®¸å¤šè¾ƒæ—§çš„è®¾å¤‡ã€‚ åœ¨res/values-v19/styles.xmlæˆ‘ä»¬å¯ä»¥æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š 1234567&lt;resources&gt; &lt;!-- Base application theme. --&gt; &lt;style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.NoActionBar\"&gt; &lt;!-- Customize your theme here. --&gt; &lt;item name=\"android:windowTranslucentStatus\"&gt;true&lt;/item&gt; &lt;/style&gt;&lt;/resources&gt; ç°åœ¨ï¼Œå¦‚æœä½ è¿è¡Œä½ çš„åº”ç”¨ç¨‹åºï¼Œä½ åº”è¯¥çœ‹åˆ°å¯¼èˆªæŠ½å±‰ï¼Œå¹¶èƒ½å¤Ÿåœ¨ä½ çš„ç‰‡æ®µä¹‹é—´è¿›è¡Œé€‰æ‹©ã€‚ å°†è‡ªå®šä¹‰è§†å›¾æ·»åŠ åˆ°å¯¼èˆªæŠ½å±‰å¯¹è®¾è®¡æ”¯æŒåº“23.1.0æ‰€åšçš„ä¸€é¡¹æ”¹è¿›æ˜¯å¢åŠ äº†å¯¹å¯¼èˆªæŠ½å±‰é¡¹ç›®çš„è‡ªå®šä¹‰è§†å›¾çš„æ”¯æŒã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºå…¶ä¸­ä¸€è¡Œåˆ›å»ºè‡ªå®šä¹‰å¼€å…³ï¼Œå¦‚Google Playç”µå½±çš„å¯¼èˆªæŠ½å±‰ï¼š è¯¥æ–¹æ³•ä¸å°†ActionViewé¡¹ç›®æ·»åŠ åˆ°ActionBarç›¸åŒã€‚æˆ‘ä»¬åªéœ€è¦å®šä¹‰ä¸€ä¸ªå•ç‹¬çš„å¸ƒå±€ï¼Œå¦‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µã€‚æˆ‘ä»¬å°†è°ƒç”¨è¿™ä¸ªæ–‡ä»¶action_view_switch.xmlï¼š 12345678910&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" android:orientation=\"horizontal\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\"&gt; &lt;android.support.v7.widget.SwitchCompat android:layout_width=\"fill_parent\" android:layout_height=\"match_parent\" android:text=\"Switch\"/&gt;&lt;/LinearLayout&gt; ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨è¯¥app:actionLayoutå±æ€§å¼•ç”¨æ­¤å¸ƒå±€ã€‚æ ‡é¢˜å¿…é¡»æä¾›ï¼Œä½†ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºç©ºç™½ï¼š 12345&lt;menu xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt; &lt;item android:id=\"@+id/nav_switch\" app:actionLayout=\"@layout/action_view_switch\" android:title=\"Downloaded only\" /&gt;&lt;/menu&gt; åªè¦æ‚¨çš„æ´»åŠ¨å°†å®æ–½è¯¥æ–¹æ³•ï¼Œæ‚¨å°±å¯ä»¥ç›´æ¥ä½¿ç”¨XMLé™„åŠ äº‹ä»¶ã€‚è¦é€šè¿‡Javaä»¥ç¼–ç¨‹æ–¹å¼å°†äº‹ä»¶å¤„ç†æ·»åŠ åˆ°åˆ‡æ¢å¼€å…³ï¼Œæ‚¨éœ€è¦å…ˆè·å–èœå•å®ä¾‹å¹¶è®¿é—®ç›¸åº”çš„ActionViewï¼š 123456789Menu menu = navigationView.getMenu();MenuItem menuItem = menu.findItem(R.id.nav_switch);View actionView = MenuItemCompat.getActionView(menuItem);actionView.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; &#125;&#125;); è‡ªå®šä¹‰å°éƒ¨ä»¶çš„ä½¿ç”¨app:actionViewClassä¹Ÿå¯ä»¥ç”¨äºèœå•é¡¹ç›®ã€‚æœ‰å…³Action Viewsçš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…å°†SearchViewæ·»åŠ åˆ°ActionBaræŒ‡å—ã€‚ æŒä¹…å¯¼èˆªæŠ½å±‰åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç‰¹åˆ«æ˜¯åœ¨å¹³æ¿ç”µè„‘ä¸Šï¼Œå¯¼èˆªæŠ½å±‰åº”è¯¥æ˜¯å……å½“ä¾§æ çš„æ´»åŠ¨çš„æ°¸ä¹…å›ºå®šè£…ç½®(Like my Blog Design)ï¼š è¦è¾¾åˆ°æ­¤æ•ˆæœï¼Œè¯·æŸ¥çœ‹ä»¥ä¸‹æè¿°ä¸€ç§æ–¹æ³•çš„é“¾æ¥ï¼š é™æ€å¯¼èˆªæŠ½å±‰ ç›¸å…³çš„Stackoverflowé—®é¢˜ ç¤ºä¾‹ä»£ç  ç¬¬ä¸‰æ–¹åº“ä¹Ÿå¯èƒ½ä½¿è¿™æ›´å®¹æ˜“å®ç°ã€‚ ç¬¬ä¸‰æ–¹åº“æœ‰ä¸€äº›ç¬¬ä¸‰æ–¹åº“ä»ç„¶å¯ä»¥ä½œä¸ºDrawerLayoutç›´æ¥ä½¿ç”¨è‡ªåŠ¨æä¾›æŸäº›ææ–™è®¾è®¡å…ƒç´ çš„æ›¿ä»£æ–¹æ¡ˆï¼š MaterialDrawer NavigationDrawerMaterial é€šå¸¸è¿™äº›éƒ½æ˜¯ä¸å¿…è¦çš„ï¼Œä½†è¯·æ£€æŸ¥å®ƒä»¬ä»¥æŸ¥çœ‹å®ƒä»¬æä¾›çš„åŠŸèƒ½ã€‚ é™åˆ¶è®¾è®¡æ”¯æŒåº“çš„å½“å‰ç‰ˆæœ¬çš„ç¡®æœ‰å…¶å±€é™æ€§ã€‚ä¸»è¦é—®é¢˜åœ¨äºçªå‡ºæ˜¾ç¤ºå¯¼èˆªèœå•ä¸­çš„å½“å‰é¡¹ç›®çš„ç³»ç»Ÿã€‚NavigationViewçš„itemBackgroundå±æ€§ä¸èƒ½æ­£ç¡®å¤„ç†é¡¹ç›®çš„é€‰ä¸­çŠ¶æ€ï¼šä¸ç®¡æ€æ ·ï¼Œæ‰€æœ‰é¡¹ç›®éƒ½çªå‡ºæ˜¾ç¤ºæˆ–è€…æ²¡æœ‰ä»»ä½•é¡¹ç›®ã€‚è¿™ä½¿å¾—è¿™ä¸ªå±æ€§åŸºæœ¬ä¸Šä¸é€‚ç”¨äºå¤§å¤šæ•°åº”ç”¨ç¨‹åºã€‚ Fragmentçš„æ›¿ä»£å“è™½ç„¶è®¸å¤šå¯¼èˆªæŠ½å±‰ç¤ºä¾‹æ˜¾ç¤ºäº†å¦‚ä½•å°†Fragmentç”¨äºå¯¼èˆªæŠ½å±‰ï¼Œä½†å¦‚æœæ‚¨å¸Œæœ›å°†æŠ½å±‰ç”¨ä½œå½“å‰æ˜¾ç¤ºçš„æ´»åŠ¨çš„å åŠ å±‚ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨RelativeLayout/ LinearLayoutã€‚ è€Œä¸æ˜¯&lt;FrameLayout&gt;ä½ å¯ä»¥ç”¨ä¸€ä¸ª&lt;LinearLayout&gt;æ›¿ä»£ 1234567891011121314151617181920212223&lt;android.support.v4.widget.DrawerLayout xmlns:android=\"http://schemas.android.com/apk/res/android\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" android:id=\"@+id/drawer_layout\"&gt; &lt;LinearLayout android:id=\"@+id/content_frame\" android:orientation=\"horizontal\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\"/&gt; &lt;!-- The navigation drawer --&gt; &lt;ListView android:id=\"@+id/left_drawer\" android:layout_width=\"240dp\" android:layout_height=\"wrap_content\" android:layout_gravity=\"start\" android:choiceMode=\"singleChoice\" android:divider=\"@android:color/transparent\" android:dividerHeight=\"0dp\" android:background=\"#111\"/&gt;&lt;/android.support.v4.widget.DrawerLayout&gt; å–è€Œä»£ä¹‹çš„æ˜¯ï¼š 12345// Insert the fragment by replacing any existing fragmentgetFragmentManager().beginTransaction() .replace(R.id.content_frame, fragment) .commit(); æ‚¨å¯ä»¥æ”¹ä¸ºä½¿ç”¨LinearLayoutå®¹å™¨ç›´æ¥ä¸ºæ´»åŠ¨å……æ°”ï¼š 123LayoutInflater inflater = getLayoutInflater();LinearLayout container = (LinearLayout) findViewById(R.id.content_frame);inflater.inflate(R.layout.activity_main, container); References http://android-developers.blogspot.com/2014/10/appcompat-v21-material-design-for-pre.html http://stackoverflow.com/questions/26440879/how-do-i-use-drawerlayout-to-display-over-the-actionbar-toolbar-and-under-the-st http://antonioleiva.com/navigation-view/","categories":[],"tags":[{"name":"Android","slug":"Android","permalink":"https://edward7zhang.github.io/tags/Android/"},{"name":"Material Design","slug":"Material-Design","permalink":"https://edward7zhang.github.io/tags/Material-Design/"}]},{"title":"å®éªŒå®¤æ‹›æ–°é¢˜ç›®â‘ ","slug":"å®éªŒå®¤æ‹›æ–°é¢˜ç›®","date":"2018-04-27T10:00:07.000Z","updated":"2018-05-07T16:02:13.058Z","comments":true,"path":"2018/04/27/å®éªŒå®¤æ‹›æ–°é¢˜ç›®/","link":"","permalink":"https://edward7zhang.github.io/2018/04/27/å®éªŒå®¤æ‹›æ–°é¢˜ç›®/","excerpt":"","text":"æ‘‡ç¯®æ’åºè¾“å…¥æ‘‡ç¯®æ•°ç»„ä»¥æ‘‡ç¯®ä¸­çš„åºå·ä¸ºåŸºå‡†è¿›è¡Œæ’åºè¯·è‡ªå®šä¹‰Bucketçš„æ•°æ®ç»“æ„åŒ…æ‹¬1&#123;&#123;åºå·&#125;,&#123;å­¦ç§‘&#125;&#125; è¦æ±‚ï¼š å†™å‡ºä¸€ä¸ªæ–¹æ³• 1Bucket[] sortBucket(Bucket[] J,boolean Flag) è¿”å›ä¸ºæ’å¥½åºåçš„Bucketæ•°ç»„å¹¶åœ¨æ§åˆ¶å°ä¸­ç­”åº” Flag == trueè¿”å›æ­£åºæ’åº Flag == falseè¿”å›å€’åºæ’åº é¢å‘å¤§ä¸€åŒå­¦è¦æ±‚ï¼šåœ¨æ§åˆ¶å°ä¸­è¾“å…¥Bucketæ•°ç»„exampleï¼šinput: 1 æ•°å­¦ 3 è¯­æ–‡ 2 è‹±è¯­ trueoutput: 1 æ•°å­¦ 2 è‹±è¯­ 3 è¯­æ–‡ é¢å‘å¤§äºŒåŒå­¦è¦æ±‚ï¼šæ„é€ è‡ªå·±ç†Ÿæ‚‰çš„å‰ç«¯ç•Œé¢è¾“å…¥è¾“å‡ºæ¡†ä»¥åŠæ­£åºå€’åºæ’åºæŒ‰é’®åœ¨å…¶ä¸­è¾“å…¥Bucketæ•°ç»„exampleï¼šinput: 1 æ•°å­¦ 3 è¯­æ–‡ 2 è‹±è¯­output: 1 æ•°å­¦ 2 è‹±è¯­ 3 è¯­æ–‡","categories":[],"tags":[{"name":"Lab_Interview","slug":"Lab-Interview","permalink":"https://edward7zhang.github.io/tags/Lab-Interview/"}]},{"title":"ä¸‰å¹´ä¸‰æœˆä¸‰å¤©ä¸‰å°æ—¶","slug":"ä¸‰å¹´ä¸‰æœˆä¸‰å¤©ä¸‰å°æ—¶","date":"2018-04-26T17:42:07.000Z","updated":"2018-04-27T07:52:55.006Z","comments":true,"path":"2018/04/27/ä¸‰å¹´ä¸‰æœˆä¸‰å¤©ä¸‰å°æ—¶/","link":"","permalink":"https://edward7zhang.github.io/2018/04/27/ä¸‰å¹´ä¸‰æœˆä¸‰å¤©ä¸‰å°æ—¶/","excerpt":"","text":"2018.04.26/14:27 ğŸ‘¨â€ğŸ’»æˆ‘æ”¶åˆ°äº†çˆ±å¥‡è‰ºç§»åŠ¨è½¯ä»¶å¼€å‘å²—çš„Offerï¼Œè¯šæƒ¶è¯šæã€‚-æˆ‘çš„ä»·å€¼ç»ˆäºå¾—åˆ°äº†è®¤å¯â€¦å‰20å¹´çš„çŸ¥è¯†ç§¯å¥ ..å3å¹´çš„ä¸“ä¸šæµ…è§¦..ä»¥åŠ3ä¸ªæœˆæ¥çš„å‡†å¤‡..è¿˜æœ‰è¿‘3å¤©ä»¥æ¥çš„ç„¦è™‘..æœ€ç»ˆæ˜¯æ‹¿åˆ°Offerå‰3å°æ—¶çš„ä¸é•‡å®šâ€¦ä¹Ÿè®¸è¿™ç§è¿‡ç¨‹æ­£æ˜¯æˆ‘è¸å…¥ç¤¾ä¼šçš„å¼€å§‹ä»¥åŠæœ€é‡è¦çš„æ˜¯å¯ä»¥åœ¨æˆ‘æ¢¦å¯çš„å¤§å¹³å°ä¸Šå¼€æ‹“è‡ªå·±çš„è§†é‡å¼ºåŒ–è‡ªå·±çš„ä¸“ä¸šçŸ¥è¯†â€¦è¿™ä¸€åˆ‡ä¹Ÿæ¥æºäºæˆ‘3å¹´ä»¥æ¥çš„ä¸æ‡ˆâ€¦ä½†æ›´å€¼å¾—æ„Ÿè°¢çš„æ˜¯æˆ‘çš„ä¼¯ä¹â€“æˆ‘çš„ä¸“ä¸šå¼•è·¯äººåˆ˜è€å¸ˆå’Œç­å¯¼ä¸¥è€å¸ˆåœ¨è¿™ä¸‰å¹´æ¥çš„ç…§æ–™ä¸è§£æƒ‘â€¦åè§‚æˆ‘ä¸‰å¹´å‰åˆšå…¥æ ¡çš„æœ¨è®·ä¸è½»æµ®..åˆ°ç°åœ¨å¯ä»¥è´Ÿè´£å®éªŒå®¤..ä»¥åŠå¾—åˆ°ç¤¾ä¼šçš„è®¤å¯è¿™ä¸€è·¯æ¥æ²¡æœ‰ä»–ä»¬çš„æŒ‡å¼•æˆ‘ä¹Ÿè®¸è¿˜åœ¨è‡ªå·±çš„æ··æ²Œä¸­ä¸èƒ½è‡ªæ‹”â€¦ My favorite mural Creazione di Adamo by Michelangelo æˆ‘ä¹Ÿæ›¾æ„£å¤´é’â€¦åœ¨è¿˜æœªå‡†å¤‡å……åˆ†å°±å†²å»é¢è¯•é˜¿é‡Œâ€¦è¿ç»­æŒ‚æ‰ä¸¤æ¬¡çš„è…¾è®¯é¢è¯•â€¦ä»¥åŠæ²¡æœ‰éŸ³è®¯çš„ç¾å›¢â€¦åˆ°ç°åœ¨æˆ‘å¿ƒå¿ƒå¿µçš„è¿˜åœ¨ç­‰ç»“æœçš„å¤§ç–†â€¦ä»¥åŠæˆ‘å·²æ‹¿åˆ°å®ä¹ Offerçš„çˆ±å¥‡è‰ºâ€¦ æ‹¿åˆ°Offerçš„æˆ‘ä¸€ç‚¹ä¹Ÿæ²¡æœ‰æ¿€åŠ¨â€¦åªæ˜¯è®©æˆ‘åƒç–®ç™¾å­”çš„å¿ƒå¾—åˆ°äº†ä¸€ç‚¹æ»¡è¶³â€¦ åœ¨è¿™ä¸€è·¯çš„é¢è¯•ç»å†ä¸­æˆ‘å‘ç°ï¼Œæˆ‘æœ€ç»ˆæ”¶ç›Šçš„è¿˜æ˜¯æˆ‘å¯¹ä¸“ä¸šçš„åšæŒâ€¦å§‹ç»ˆæ²¡æœ‰æ”¾å¼ƒæˆ‘çƒ­çˆ±çš„Androidç§»åŠ¨ç«¯å¼€å‘..å½“å‡ºç°æ–°çš„æŠ€æœ¯..æˆ‘æ€»æ˜¯é¦–å…ˆæƒ³åˆ°åº”ç”¨äºç§»åŠ¨ç«¯â€¦è‡³å°‘è¿™ç§åŸåŠ›å¼çš„é©±åŠ¨æ¥è‡ªäºæˆ‘çš„ä¸–ç•Œè§‚..æˆ‘è®¤ä¸ºåœ¨è¿™ä¸ªæ—¶ä»£äº’è”ç½‘çš„æœ€å¤§ä½œç”¨åº”è¯¥æ˜¯å¸¦åŠ¨äººç±»å‘å±•è¿›æ­¥..å³ä½¿å¦‚ä»Šæ˜¯ä¸ªç™¾å®¶åˆå”±çš„äº’è”ç½‘ç¯å¢ƒ..æ›´å¤šçš„ä¼ä¸šé€‰æ‹©äº†æ¨åŠ¨ç»æµçš„æé’±å¼è¡Œä¸ºâ€¦å¤§é‡çš„ç ”å‘èµ„æºç”¨äºå¯¹å¨±ä¹æˆ–æ˜¯ä½ä¿—æ–‡åŒ–çš„ä¼ æ’­â€¦ä½¿å¾—å¦‚ä»Šéƒ½æ˜¯é¢å‘ä¸Šå¸‚æ•²é’Ÿå¼åˆ›ä¸šâ€¦ å¼‚æ›²åŒå·¥çš„æ˜¯æœ€è¿‘åœ¨å¹´çº§ç¾¤ä¸­çœ‹åˆ°æœ‰å·²é¢50å®¶å…¬å¸æ‹¿åˆ°3ä¸ªOfferçš„äººå´å¤§è¨€ä¸æƒ­çš„å†™ç€é¢ç»..æ•™å”†æƒ³å»å‚åŠ å·¥ä½œçš„åŒå­¦è‹¥æ˜¯æ²¡æœ‰é¡¹ç›®å»æŸå®èŠ±é’±è´­ä¹°â€¦çº¯ç²¹çš„é¢å‘é¢è¯•çš„ç¼–ç¨‹ä»¤äººæ„Ÿåˆ°æ¶ä¿—â€¦åœ°çƒç§‘æŠ€çš„è¿›æ­¥å¦‚æœå­˜åœ¨å¾ˆå¤šè¿™æ ·çš„äººç®€ç›´ä¸å ªæƒ³è±¡å§â€¦ å¦‚ä»Šè¿™ä¸ªæ—¶ä»£æœ‰ç‚¹ä¼ªæ–‡è‰ºå¤å…´çš„æ„Ÿè§‰â€¦å¥½åƒä¸–é—´å¾ˆçº·ä¹±â€¦ä¸æ˜¯é‚£ä¹ˆå®‰å®šâ€¦ä½†å¤§å®¶å¥½åƒè¿˜è¿‡å¾—è‡ªå¾—å…¶ä¹â€¦è¿™ç§è‡ªæ€å¼çš„ä¹ æƒ¯åœ¨ä¸€ç‚¹ç‚¹çš„åå™¬äººç±»å¿ƒçµæœ€åçš„è¿›å–â€¦ ä¸‰å¹´ ğŸ‘¹å¤§å­¦è¿™ä¸‰å¹´æ¥å…¶å®æ˜¯æ†‹äº†ä¸€å£æ°”çš„å»è¿½èµ¶æˆ‘é«˜ä¸­ä¸‰å¹´æ‰€é—å¤±çš„ç§ç§ä¸‰å¹´åå†çœ‹æˆ‘å€’æ˜¯è¿½å›æ¥äº†ä¸€äº›..è¿™æ˜¯å€¼å¾—è‚¯å®šçš„è‡³å°‘æˆ‘æ²¡æœ‰è¢«ä¸–ä¿—èµ¶ä¸Š..è‡³å°‘æˆ‘æš‚æ—¶èµ¢å¾—äº†è‡ªå·±çš„è®¤å¯ ä¼¯ä¹ ğŸ ä¸–æœ‰ä¼¯ä¹ï¼Œç„¶åæœ‰åƒé‡Œé©¬ã€‚åƒé‡Œé©¬å¸¸æœ‰ï¼Œè€Œä¼¯ä¹ä¸å¸¸æœ‰ã€‚æˆ‘æ˜¯ä¸€ä¸ªå‚²æ…¢çš„è‡ªè°¦çš„ï¼Œä¸æ˜“è¢«ä»–äººå‹åˆ¶çš„ï¼Œå‘å¾€è‡ªç”±çš„äººã€‚ è¿™ä¸‰å¹´æ¥æˆ‘çœŸå¿ƒçš„æ„Ÿè°¢æˆ‘çš„ç­å¯¼ä¸¥çµæ¯“è€å¸ˆã€æˆ‘çš„è®¡ç®—æœºè¯­è¨€å…¥é—¨äººåˆ˜ä¼Ÿè€å¸ˆã€‚æ˜¯ä»–ä»¬çš„æ…§çœ¼ç»™äº†æˆ‘è¿›å‡çš„å¹³å°ã€‚è¿™ä¸¤ä½è€å¸ˆçš„æ€§æ ¼è¿¥å¼‚å¯¹æˆ‘æ¥è¯´æ˜¯éå¸¸å—ç›Šçš„â€¦ å…¶ä¸€ã€é‚£ç§å¯¹å­¦ç”Ÿçš„å…³æ€€ä¸å­¦æœ¯ä¸Šã€äººç”Ÿä¸Šå¤§ä¹‰è‡³ç®€çš„æŒ‡å¯¼ä¸æ²Ÿé€šæ˜¯è®©æˆ‘æ‘†è„±å„ç§æœ¨è®·ä¸æ··æ²Œçš„å”¯ä¸€ç»³ç´¢ã€‚ å¦ä¸€ä½ã€é‚£ç§éšæ€§çš„ä¸ç¾çš„å¸…æ°”çš„ç”·æ€§é£æ ¼æˆä¸ºäº†æˆ‘å¯¹ç”·æ€§ç†è§£çš„æ ‡æ¦œâ€¦ä½œä¸ºæˆ‘é¡¹ç›®æŒ‡å¯¼è€å¸ˆå¯¹æˆ‘çš„ä¿¡ä»»ï¼Œç›´æ¥å½±å“äº†æˆ‘ä¹‹åå¯¹è½¯ä»¶äº§å“çš„çœ‹æ³•ä¸ç†è§£â€¦å°†é¡¹ç›®å¤§æ„è§£é‡Šä¸å­¦ç”Ÿï¼Œå…¶ä»–çš„å¯ä»¥è‡ªæˆ‘å‘æŒ¥çš„åšæ³•ï¼Œè‡³å°‘ç›®å‰æˆ‘æ²¡æœ‰åœ¨å…¶ä»–è€å¸ˆèº«ä¸Šå‘ç°è¿‡â€¦è¿™ç§å¯¹å­¦ç”Ÿçš„ä¿¡ä»»åŒæ ·ä¹Ÿæ˜¯è®©æˆ‘è¾—è½¬å„ç§å®éªŒå®¤åæœ€ç»ˆåˆå›åˆ°Lab603çš„å”¯ä¸€ç†ç”±â€¦ ç°åœ¨å†å›å¤´çœ‹çœ‹è¿™ä¸‰å¹´â€¦å……å®åˆå……æ»¡å›å¿†â€¦ å¼€å‘è€…åŒä¼´ ğŸ˜ å¦‚æœæ‹¿ä¼¯ç‰™ä¸é’Ÿå­æœŸçš„æ•…äº‹æ¥è¯´æˆ‘ä»¬å¯èƒ½è¿‡å¤´..å…¶å®æˆ‘ä»¬ä¹Ÿæ²¡æœ‰åˆ°é‚£ç§å¢ƒç•Œâ€¦åªæ˜¯æƒ³ç”¨è¿™ç§æ„Ÿè§‰æ¥è¡¨è¾¾æˆ‘è¿™ä¸‰å¹´æ¥å¯¹ä»–çš„æ„Ÿè°¢ï¼Œä»–ä¸æˆ‘å…±åŒå¼€å‘äº†æˆ‘è¿™ä¸‰å¹´æ¥çš„å¤§éƒ¨åˆ†é¡¹ç›®â€¦ 2016å¹´10æœˆ12æ—¥ æ˜ŸæœŸä¸‰ 23:22 å¼ ç¿åœ¨æˆ‘çš„å®¿èˆé‡Œä¸€èµ·é‡æ„é¡¹ç›®çœ‹åˆ°ç»“æœåçš„å–œæ‚¦ è¿™ä¸‰å¹´æ¥ä¸ä¸‹10ä¸ªå¤§å¤§å°å°çš„é¡¹ç›®å…¶ä¸­2/3éƒ½æ˜¯æˆ‘å’Œä»–å…±åŒå¼€å‘çš„â€¦æ— æ•°ä¸ªé€šå®µ..æ— æ•°ä¸ªéœ€æ±‚çš„äº‰æ‰§æ— æ•°ä¸ªé—®é¢˜çš„è§£å†³â€¦åœ¨è¿™ä¸€ç³»åˆ—çš„è¿‡ç¨‹ä¸­å¦‚æœæ²¡æœ‰è¿™æ ·ä¸€ä¸ªäººçš„å­˜åœ¨åˆä¼šå˜å¾—æœ‰å¤šå¤§çš„æŒ‘æˆ˜å‘¢ï¼Ÿæˆ‘ç°åœ¨åªèƒ½è¯´å¼ ç¿è¿™ä¸‰å¹´æ¥æ„Ÿè°¢ä½ çš„äº’åŠ©ï¼Œæ²¡æœ‰ä½ æˆ‘ä¹Ÿèµ°ä¸åˆ°è¿™ä¸€æ­¥â€¦æˆ‘ä¼šåœ¨è¿™æ¡è·¯ç»§ç»­èµ°ä¸‹å»çš„â€¦åªä¸ºäº†æˆ‘ä»¬é‚£æ— æ•°ä¸ªæ—¥å¤œçš„å•çº¯çš„æ¢¦ã€‚ 2016å¹´10æœˆ16æ—¥ æ˜ŸæœŸæ—¥ 3:11 æˆ‘ä»¬åˆä½œçš„ç¬¬ä¸€ä¸ªé¡¹ç›®OneKey2Alarmè‚é€šå®µ Project âŒ¨ï¸ é¡¹ç›®ä¹‹äºå¼€å‘è€…å¦‚åŒçˆ¶ä¸å­çš„å…³ç³» ç›¸ä¿¡æ¯ä¸€ä¸ªå¼€å‘è€…åœ¨å®Œæˆä»–çš„Projectåéƒ½ä¼šåŠ å€å¿ƒåŠ›çš„å»ç»´æŠ¤ä»–çš„Projectâ€¦åœ¨è¿™è¿‡ç¨‹ä¸­ä¹ŸåŒæ—¶æ˜¯å¼€å‘è€…ç»éªŒèƒ½åŠ›æå‡çš„å…³é”®â€¦æ‰€ä»¥åœ¨é¢è¯•è¿‡ç¨‹ä¸­æ¯ä¸ªå¼€å‘è€…åœ¨ä»–è¿‡å»å®Œæˆçš„é¡¹ç›®è´¨é‡ä¸æ•°é‡å°±æ˜¾å¾—æ ¼å¤–å®è´µ..é€šè¿‡é¡¹ç›®çš„ä¾§é¢è§‚å¯Ÿå¯ä»¥çœ‹å¾—å‡ºä¸€ä¸ªäººçš„ä»£ç é£æ ¼..ä»–çš„ä¸ªæ€§..ä»–çš„ä¸ºäººâ€¦æ‰€ä»¥å¦‚ä¸Šæ–‡æ‰€è¿°çš„é‚£ç§é¢å‘é¢è¯•çš„ç¼–ç¨‹æ–¹å¼æ˜¯æˆ‘ä¸ªäººéå¸¸åŒæ¶çš„â€¦æˆ‘è®¤ä¸ºåªè¦æ˜¯ä¸€ä¸ªæœ‰è¿½æ±‚çš„å¼€å‘è€…..ä¸€ä¸ªåˆæ ¼çš„ç¨‹åºå‘˜éƒ½ååˆ†æ‘’å¼ƒè¿™ç§åšæ³•â€¦é€šè¿‡è·å–ä»–äººçš„åŠ³åŠ¨æˆæœæ¥æ‰“è‚¿è„¸å……èƒ–å­..æ€»æœ‰ä¸€å¤©ä¼šè´¥éœ²çš„ã€‚çœŸè¯šæ˜¯ä¸€ä¸ªäººæœ€ç¾å¥½ä¹Ÿæ˜¯æœ€åº•çº¿çš„å“è´¨â€¦å¦‚æœä½ æƒ³è®©è¿™ä¸ªä¸–ç•Œè¾¾åˆ°å…¬å¹³é‚£ä¹ˆä¹…åº”è¯¥äººäººæœ‰è´£â€¦é€šè¿‡ä¸æ‹©æ‰‹æ®µçš„æ–¹å¼æ¥é€šè¿‡é¢è¯•è¿™æ ·å¯¹æ›´å¤šä¼˜ç§€çš„é¡¹ç›®å¼€å‘è€…æ— å¼‚äºæ˜¯ä¸€ç§ä¾®è¾±â€¦æˆ‘å‘¨å›´çš„åŒå­¦åœ¨æœ€è¿‘æ‰¾å·¥ä½œçš„è¿‡ç¨‹ä¸­æ²¡æœ‰ä¸€ä¸ªäººæ˜¯è½»æ¾çš„â€¦ä¸€å®¶å®¶å…¬å¸ä¸€æ¬¡æ¬¡çš„æ‹’ç»åˆ°è®©äººæ€€ç–‘è‡ªå·±â€¦ä½†è¯´å®è¯åªæœ‰å†…å¿ƒå¼ºå¤§çš„äººæ‰èƒ½å†²å‡ºè¿™ç‰‡æ··æ²Œâ€¦å› ä¸ºä»æ­¤ä¹‹åä½ å°±ä¼šè„±ç¦»è±¡ç‰™å¡”â€¦ä¸ä¼šå†æœ‰äººå»åº‡æŠ¤ä½ â€¦ä½ è¦é¢å¯¹çš„æ˜¯ç‹°ç‹è€Œæ®‹é…·çš„ç¤¾ä¼š..è¦ä¸ºè‡ªå·±çš„è¨€è¡Œè´Ÿè´£äº†â€¦äººäººä¸æ˜“â€¦å”¯æœ‰åšæŒæ‰èƒ½å†²ç ´é‡å›´â€¦ åœ¨è¿™é‡ŒåŒæ—¶æƒ³æ„Ÿè°¢æˆ‘æœªæ¥çš„éƒ¨é—¨é¢†å¯¼..æ˜¯ä»–å¯¹æˆ‘çš„è®¤å¯..æˆ‘æ‰ç›´æ¥çš„å¾—åˆ°äº†è¿™ä¸€æå‡è‡ªå·±è§†é‡çš„æœºä¼šâ€¦æˆ‘ä¼šå‘è‡ªå·±è¯æ˜ä»–å¹¶æ²¡æœ‰çœ‹é”™ 2018.04 æ­¦æ±‰æ˜¥å­£Hackthon 2018.04 å‡Œæ™¨4:00 æ­¦æ±‰æ˜¥å­£Hackthon 2018.04 æ­¦æ±‰æ˜¥å­£Hackthon äº§å“å±•ç¤º å®¶åº­ ğŸ‘ª æˆ‘æ‹¥æœ‰è¿™æ ·çš„å®¶åº­åº”è¯¥æ˜¯æˆ‘äººç”Ÿèµ°è¿‡20å¹´æ‰€å¹¸è‡³æä¹‹äº‹ çˆ¶æ¯å¯¹æˆ‘çš„å…³å¿ƒä¸çˆ±æŠ¤é€‚åˆä¸”å¾—å½“ çˆ¶æ¯å¯¹æˆ‘çš„æ”¾å…»å¼ç®¡ç†æˆ‘ç§°ä¸ºâ€œä¸ç®¡ä¹‹æ©â€è¿™ç§åšæ³•é—´æ¥çš„ä½¿æˆ‘è‡ªç”±å‘å±•å¯»æˆ‘æ‰€ä¹ çˆ¶æ¯å¯¹æˆ‘çš„æ— æ¡ä»¶æ”¯æŒæˆ‘çš„é€‰æ‹©ä½¿æˆ‘å—ç›Š ç”Ÿäºå¼ å…ˆç”Ÿä¸é™ˆå¥³å£«æ˜¯æˆ‘è¿™ä¸€ç”Ÿæ— å¯æ¯”æ‹Ÿçš„å¹¸è¿ æ„Ÿè°¢æˆ‘çš„çˆ¶æ¯è®©æˆ‘åº¦è¿‡äº†æ— å¿§çš„ç«¥å¹´ã€å°‘å¹´..æœªæ¥ä¸–ç•Œçš„ç‹°ç‹æˆ‘å·²ç»å¯ä»¥ç‹¬è‡ªå»é¢å¯¹äº†ï¼Œä¹Ÿè¯·ä½ ä»¬æ”¾å¿ƒæˆ‘æ°¸è¿œçˆ±ä½ ä»¬â¤ï¸ Last but not least ğŸ’ªé€šè¿‡æˆ‘ä¸€æ¬¡æ¬¡çš„å¤±è´¥..ç»éªŒçš„ç§¯ç´¯..ä¹Ÿæ‹¿åˆ°äº†å¦‚æ„¿çš„Offerâ€¦æˆ‘æ˜ç™½è¿™å¹¶ä¸æ˜¯æ ‡æ¦œç€ä»€ä¹ˆ..è€Œæ˜¯åˆä¸€æ¬¡æ–°çš„å¼€å§‹..æˆ‘è¿™é•¿ä¹…ä»¥æ¥åªæ˜¯åœ¨ä¸ºè‡ªå·±äº‰å–å»æ›´å¥½çš„å¹³å°å­¦ä¹ ..å‘å±•â€¦åœ¨æ­¤æƒ³ç»™æœªæ¥çš„è‡ªå·±è¯´ï¼šä¸è¦è®©ä½ ä¹‹å‰çš„åŠªåŠ›ç™½è´¹..ä¿æŒè‡ªå·±çš„æ¢¦æƒ³..ä¸è¦è¢«ä¸–ä¿—ä¾µæŸ“..ä¿æŒå­¦ä¹ ..ä¿æŒç«äº‰åŠ›..åˆ‡å‹¿è‡ªæ»¡â€¦ è®°ä¸€ä¸ªå³å°†æ­¥å…¥ç¤¾ä¼šçš„ç”·ç”Ÿå›é¦–è¿‡å»20å¹´çš„ç‹°ç‹ä¸å¯¹è‡ªå·±æœªæ¥çš„å‹‰åŠ± Lab603 æˆ‘çš„å·¥ä½ ;-)","categories":[],"tags":[{"name":"Inspire","slug":"Inspire","permalink":"https://edward7zhang.github.io/tags/Inspire/"}]},{"title":"Javaä¸Kotlinä¸‹çš„6ç§å•ä¾‹æ¨¡å¼","slug":"Javaä¸Kotlinä¸‹çš„6ç§å•ä¾‹æ¨¡å¼","date":"2018-04-25T05:44:14.000Z","updated":"2018-04-26T11:15:00.285Z","comments":true,"path":"2018/04/25/Javaä¸Kotlinä¸‹çš„6ç§å•ä¾‹æ¨¡å¼/","link":"","permalink":"https://edward7zhang.github.io/2018/04/25/Javaä¸Kotlinä¸‹çš„6ç§å•ä¾‹æ¨¡å¼/","excerpt":"","text":"å‰è¨€ æœ€è¿‘åœ¨å­¦ä¹ Kotlinï¼Œç”±äºGoogleç²‘ç²‘æŠŠè¿™ä¸€è¯­è¨€ææºä¸ºå®˜æ–¹æŒ‡å®šï¼Œå¹¶ä¸”å¯¹äºç§»åŠ¨ç«¯ç­‰å¼€å‘å¾—å¤©ç‹¬åšçš„ä¼˜åŠ¿ï¼Œä½œä¸ºä¸€åAndroidDeveloperå­¦ä¹ Kotlinæ˜¯å¿…è¦çš„ã€‚å½“åˆåœ¨å­¦ä¹ Javaæ—¶å¯¹å•ä¾‹æ¨¡å¼çš„å…­ç§ä¹¦å†™ä¸åº”ç”¨è®°å¿†æ·±åˆ»æ‰€ä»¥è¿™æ¬¡å¯¹ä¸åŒå•ä¾‹æ¨¡å¼çš„Javaä¸Kotlinå®ç°è¿›è¡Œäº†åˆ†åˆ«æ¢è®¨ã€‚ å…­ç§æ¨¡å¼å¦‚ä¸‹ï¼š é¥¿æ±‰æ¨¡å¼ æ‡’æ±‰æ¨¡å¼ çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰æ¨¡å¼ åŒé‡æ ¡éªŒé”å¼ é™æ€å†…éƒ¨ç±»å¼ æšä¸¾å¼ é¥¿æ±‰æ¨¡å¼ï¼šstatic final fieldé¥¿æ±‰å¼å…¶å®æ˜¯ä¸€ç§æ¯”è¾ƒå½¢è±¡çš„ç§°è°“ã€‚æ—¢ç„¶é¥¿ï¼Œé‚£ä¹ˆåœ¨åˆ›å»ºå¯¹è±¡å®ä¾‹çš„æ—¶å€™å°±æ¯”è¾ƒç€æ€¥ï¼Œé¥¿äº†å˜›ï¼Œäºæ˜¯åœ¨è£…è½½ç±»çš„æ—¶å€™å°±åˆ›å»ºå¯¹è±¡å®ä¾‹ã€‚è¿™ç§æ–¹æ³•éå¸¸ç®€å•ï¼Œå› ä¸ºå•ä¾‹çš„å®ä¾‹è¢«å£°æ˜æˆ static å’Œ final å˜é‡äº†ï¼Œåœ¨ç¬¬ä¸€æ¬¡åŠ è½½ç±»åˆ°å†…å­˜ä¸­æ—¶å°±ä¼šåˆå§‹åŒ–ï¼Œæ‰€ä»¥åˆ›å»ºå®ä¾‹æœ¬èº«æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚123456789//Javaå®ç°public class Singleton&#123; //ç±»åŠ è½½æ—¶å°±åˆå§‹åŒ– private static final Singleton instance = new Singleton(); private Singleton()&#123;&#125; public static Singleton getInstance()&#123; return instance; &#125;&#125; Kotlinå¼•å…¥äº† objectç±»å‹ï¼Œå¯ä»¥å¾ˆå®¹æ˜“å£°æ˜å•ä¾‹æ¨¡å¼12//Kotlinå®ç°object Singleton è¿™ç§æ–¹å¼å’Œ Java å•ä¾‹æ¨¡å¼çš„é¥¿æ±‰å¼ä¸€æ ·ï¼Œä¸è¿‡æ¯” Java ä¸­çš„å®ç°ä»£ç é‡å°‘å¾ˆå¤šï¼Œå…¶å®æ˜¯ä¸ªè¯­æ³•ç³–ï¼ˆKotlinæ¼«å±±éé‡éƒ½æ˜¯è¯­æ³•ç³–ï¼‰ã€‚åç¼–è¯‘ç”Ÿæˆçš„ class æ–‡ä»¶åå¦‚ä¸‹ï¼š 123456789public final class Singleton &#123; public static final Singleton INSTANCE = null; static &#123; Singleton singleton = new Singleton(); &#125; private Singleton() &#123; INSTANCE = this; &#125;&#125; ä»åç¼–è¯‘çš„ä»£ç å¯ä»¥çœ‹å‡º object å¯¹è±¡å®é™…ä¸Šè¿˜æ˜¯åˆ©ç”¨äº† INSTANCE é™æ€å˜é‡ï¼Œä½†æ˜¯åœ¨Javaå’ŒKotlinæ··ç¼–æ—¶ï¼ŒJavaä»£ç ä¸­è°ƒç”¨åˆ™éœ€è¦æ³¨æ„ï¼Œä½¿ç”¨å¦‚ä¸‹Singleton.INSTANCE.test(),Kolintä¸­è°ƒç”¨æ—¶åªéœ€è¦ä½¿ç”¨Singleton.test()ã€‚è¿™ç§å®ç°æ–¹å¼åœ¨ç±»åŠ è½½æ—¶å°±åˆ›å»ºäº†å•ä¾‹å¯¹è±¡ï¼Œæ‰€ä»¥è‚¯å®šæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰é¥¿æ±‰å¼å®ç°æ–¹å¼çš„é—®é¢˜ï¼š å¦‚æœæ„é€ æ–¹æ³•ä¸­æœ‰è€—æ—¶æ“ä½œçš„è¯ï¼Œä¼šå¯¼è‡´è¿™ä¸ªç±»çš„åŠ è½½æ¯”è¾ƒæ…¢ã€‚ é¥¿æ±‰å¼ä¸€å¼€å§‹å°±åˆ›å»ºå®ä¾‹ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰è°ƒç”¨ï¼Œä¼šé€ æˆèµ„æºæµªè´¹ã€‚ è¿˜æœ‰ä¸€ä¸ª Java é¥¿æ±‰å¼å•ä¾‹æ¨¡å¼æ²¡æœ‰çš„é—®é¢˜ï¼šæ— æ³•è‡ªå®šä¹‰æ„é€ å‡½æ•°ï¼Œobject ä¸­ä¸å…è®¸ constructor å‡½æ•°ã€‚ æ‡’æ±‰æ¨¡å¼ï¼šçº¿ç¨‹ä¸å®‰å…¨æ‡’æ±‰å¼å…¶å®æ˜¯ä¸€ç§æ¯”è¾ƒå½¢è±¡çš„ç§°è°“ã€‚æ—¢ç„¶æ‡’ï¼Œé‚£ä¹ˆåœ¨åˆ›å»ºå¯¹è±¡å®ä¾‹çš„æ—¶å€™å°±ä¸ç€æ€¥ã€‚ä¼šä¸€ç›´ç­‰åˆ°é©¬ä¸Šè¦ä½¿ç”¨å¯¹è±¡å®ä¾‹çš„æ—¶å€™æ‰ä¼šåˆ›å»ºï¼Œæ‡’äººå˜›ï¼Œæ€»æ˜¯æ¨è„±ä¸å¼€çš„æ—¶å€™æ‰ä¼šçœŸæ­£å»æ‰§è¡Œå·¥ä½œï¼Œå› æ­¤åœ¨è£…è½½å¯¹è±¡çš„æ—¶å€™ä¸åˆ›å»ºå¯¹è±¡å®ä¾‹ã€‚1234567891011//Javaå®ç°public class Singleton&#123; private static Singleton instance; private Singleton()&#123;&#125; public static Singleton getInstance()&#123; if(instance == null)&#123; instance = new Singleton()ï¼› &#125; return instance; &#125;&#125; è¿™æ®µä»£ç ç®€å•æ˜äº†ï¼Œè€Œä¸”ä½¿ç”¨äº†æ‡’åŠ è½½æ¨¡å¼ï¼Œä½†æ˜¯å´å­˜åœ¨è‡´å‘½çš„é—®é¢˜ã€‚å½“æœ‰å¤šä¸ªçº¿ç¨‹å¹¶è¡Œè°ƒç”¨ getInstance() çš„æ—¶å€™ï¼Œå°±ä¼šåˆ›å»ºå¤šä¸ªå®ä¾‹ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨å¤šçº¿ç¨‹ä¸‹ä¸èƒ½æ­£å¸¸å·¥ä½œã€‚123456789101112131415//Kotlinclass Singleton private constructor()&#123; companion object&#123; private var instance : Singleton? = null get()&#123; if(field == null)&#123; field = Singleton() &#125; return field &#125; fun get():Singleton&#123; return instance!! &#125; &#125;&#125; ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°åœ¨Kotlinå®ç°ä¸­ï¼Œæˆ‘ä»¬è®©å…¶ä¸»æ„é€ å‡½æ•°ç§æœ‰åŒ–å¹¶è‡ªå®šä¹‰äº†å…¶å±æ€§è®¿é—®å™¨ï¼Œå…¶ä½™å†…å®¹å¤§åŒå°å¼‚ã€‚ å¦‚æœä¸æ¸…æ¥šKotlinæ„é€ å‡½æ•°çš„ä½¿ç”¨æ–¹å¼ã€‚è¯·ç‚¹å‡» - - - æ„é€ å‡½æ•° ä¸æ¸…æ¥šKotlinçš„å±æ€§ä¸è®¿é—®å™¨ï¼Œè¯·ç‚¹å‡» - - -å±æ€§å’Œå­—æ®µ çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰æ¨¡å¼ä¸ºäº†è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯å°†æ•´ä¸ª getInstance() æ–¹æ³•è®¾ä¸ºåŒæ­¥ï¼ˆsynchronizedï¼‰ã€‚1234567891011//Javaå®ç°public class Singleton&#123; private static Singleton instance; private Singleton()&#123;&#125; public static synchronized Singleton getInstance()&#123; if(instance == null)&#123; instance = new Singleton()ï¼› &#125; return instance; &#125;&#125; è™½ç„¶åšåˆ°äº†çº¿ç¨‹å®‰å…¨ï¼Œå¹¶ä¸”è§£å†³äº†å¤šå®ä¾‹çš„é—®é¢˜ï¼Œä½†æ˜¯å®ƒå¹¶ä¸é«˜æ•ˆã€‚å› ä¸ºåœ¨ä»»ä½•æ—¶å€™åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨ getInstance() æ–¹æ³•ã€‚ä½†æ˜¯åŒæ­¥æ“ä½œåªéœ€è¦åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶æ‰è¢«éœ€è¦ï¼Œå³ç¬¬ä¸€æ¬¡åˆ›å»ºå•ä¾‹å®ä¾‹å¯¹è±¡æ—¶ã€‚è¿™å°±å¼•å‡ºäº†åŒé‡æ£€éªŒé”ã€‚12345678910111213141516//Kotlinclass Singleton private constructor() &#123; companion object &#123; private var instance: Singleton? = null get() &#123; if (field == null) &#123; field = Singleton() &#125; return field &#125; @Synchronized fun get(): Singleton&#123; return instance!! &#125; &#125;&#125; å¤§å®¶éƒ½çŸ¥é“åœ¨ä½¿ç”¨æ‡’æ±‰å¼ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼Œéœ€è¦ä½¿ç”¨åŒæ­¥é”ï¼Œåœ¨Kotlinä¸­ï¼Œå¦‚æœä½ éœ€è¦å°†æ–¹æ³•å£°æ˜ä¸ºåŒæ­¥ï¼Œéœ€è¦æ·»åŠ  @Synchronized æ³¨è§£ åŒé‡æ ¡éªŒé”å¼åŒé‡æ£€éªŒé”æ¨¡å¼ï¼ˆdouble checked locking patternï¼‰ï¼Œæ˜¯ä¸€ç§ä½¿ç”¨åŒæ­¥å—åŠ é”çš„æ–¹æ³•ã€‚ç¨‹åºå‘˜ç§°å…¶ä¸ºåŒé‡æ£€æŸ¥é”ï¼Œå› ä¸ºä¼šæœ‰ä¸¤æ¬¡æ£€æŸ¥ instance == nullï¼Œä¸€æ¬¡æ˜¯åœ¨åŒæ­¥å—å¤–ï¼Œä¸€æ¬¡æ˜¯åœ¨åŒæ­¥å—å†…ã€‚ä¸ºä»€ä¹ˆåœ¨åŒæ­¥å—å†…è¿˜è¦å†æ£€éªŒä¸€æ¬¡ï¼Ÿå› ä¸ºå¯èƒ½ä¼šæœ‰å¤šä¸ªçº¿ç¨‹ä¸€èµ·è¿›å…¥åŒæ­¥å—å¤–çš„ ifï¼Œå¦‚æœåœ¨åŒæ­¥å—å†…ä¸è¿›è¡ŒäºŒæ¬¡æ£€éªŒçš„è¯å°±ä¼šç”Ÿæˆå¤šä¸ªå®ä¾‹äº†ã€‚12345678910111213141516171819202122//Javaå®ç°public class Singleton&#123; /** * volatileä¿è¯äº†ï¼š * 1.instanceå†å¤šçº¿ç¨‹ä¸‹çš„å¹¶å‘å¯è§æ€§ * 2.ç¦æ­¢instanceåœ¨æ“ä½œæ—¶çš„æŒ‡ä»¤é‡æ’åº */ private volatile static Singleton instance = null; public static Singleton getIntance()&#123; //ç¬¬ä¸€æ¬¡åˆ¤ç©ºï¼Œä¿è¯ä¸å¿…è¦çš„åŒæ­¥ if(instance == null)&#123; //synchronizedå¯¹SingletonåŠ å…¨å±€é”ï¼Œä¿è¯æ¯æ¬¡åªè¦ä¸€ä¸ªçº¿ç¨‹åˆ›å»ºå®ä¾‹ synchronized(Singleton.class)&#123; //ç¬¬äºŒæ¬¡åˆ¤ç©ºæ—¶ä¸ºäº†åœ¨nullçš„æƒ…å†µä¸‹åˆ›å»ºå®ä¾‹ if(instance == null)&#123; instance = new Singleton(); &#125; &#125; &#125; return instance; &#125;&#125; æœ‰äº›äººè®¤ä¸ºä½¿ç”¨ volatile çš„åŸå› æ˜¯å¯è§æ€§ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥ä¿è¯çº¿ç¨‹åœ¨æœ¬åœ°ä¸ä¼šå­˜æœ‰ instance çš„å‰¯æœ¬ï¼Œæ¯æ¬¡éƒ½æ˜¯å»ä¸»å†…å­˜ä¸­è¯»å–ã€‚ä½†å…¶å®æ˜¯ä¸å¯¹çš„ã€‚ä½¿ç”¨ volatile çš„ä¸»è¦åŸå› æ˜¯å…¶å¦ä¸€ä¸ªç‰¹æ€§ï¼šç¦æ­¢æŒ‡ä»¤é‡æ’åºä¼˜åŒ–ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ volatile å˜é‡çš„èµ‹å€¼æ“ä½œåé¢ä¼šæœ‰ä¸€ä¸ªå†…å­˜å±éšœï¼ˆç”Ÿæˆçš„æ±‡ç¼–ä»£ç ä¸Šï¼‰ï¼Œè¯»æ“ä½œä¸ä¼šè¢«é‡æ’åºåˆ°å†…å­˜å±éšœä¹‹å‰ã€‚æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œå–æ“ä½œå¿…é¡»åœ¨æ‰§è¡Œå®Œ 1-2-3 ä¹‹åæˆ–è€… 1-3-2 ä¹‹åï¼Œä¸å­˜åœ¨æ‰§è¡Œåˆ° 1-3 ç„¶åå–åˆ°å€¼çš„æƒ…å†µã€‚ ä»ã€Œå…ˆè¡Œå‘ç”ŸåŸåˆ™ã€çš„è§’åº¦ç†è§£çš„è¯ï¼Œå°±æ˜¯å¯¹äºä¸€ä¸ª volatile å˜é‡çš„å†™æ“ä½œéƒ½å…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹è¿™ä¸ªå˜é‡çš„è¯»æ“ä½œï¼ˆè¿™é‡Œçš„â€œåé¢â€æ˜¯æ—¶é—´ä¸Šçš„å…ˆåé¡ºåºï¼‰ã€‚ ä½†æ˜¯ç‰¹åˆ«æ³¨æ„åœ¨ Java 5 ä»¥å‰çš„ç‰ˆæœ¬ä½¿ç”¨äº† volatile çš„åŒæ£€é”è¿˜æ˜¯æœ‰é—®é¢˜çš„ã€‚å…¶åŸå› æ˜¯ Java 5 ä»¥å‰çš„ JMM ï¼ˆJava å†…å­˜æ¨¡å‹ï¼‰æ˜¯å­˜åœ¨ç¼ºé™·çš„ï¼Œå³æ—¶å°†å˜é‡å£°æ˜æˆ volatile ä¹Ÿä¸èƒ½å®Œå…¨é¿å…é‡æ’åºï¼Œä¸»è¦æ˜¯ volatile å˜é‡å‰åçš„ä»£ç ä»ç„¶å­˜åœ¨é‡æ’åºé—®é¢˜ã€‚è¿™ä¸ª volatile å±è”½é‡æ’åºçš„é—®é¢˜åœ¨ Java 5 ä¸­æ‰å¾—ä»¥ä¿®å¤ï¼Œæ‰€ä»¥åœ¨è¿™ä¹‹åæ‰å¯ä»¥æ”¾å¿ƒä½¿ç”¨ volatileã€‚ ç›¸ä¿¡ä½ ä¸ä¼šå–œæ¬¢è¿™ç§å¤æ‚åˆéšå«é—®é¢˜çš„æ–¹å¼ï¼Œå½“ç„¶æˆ‘ä»¬æœ‰æ›´å¥½çš„å®ç°çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼çš„åŠæ³•ã€‚12345678//Kotlinå®ç°class Singleton private constructor()&#123; companion object&#123; val instance: Singleton by lazy(mode = LazyThreadSafetyMode.SYNCHRONIZED)&#123; SingletonDemo() &#125; &#125;&#125; å“‡ï¼å°ä¼™ä¼´ä»¬æƒŠå–œä¸ï¼Œæ„Ÿä¸æ„ŸåŠ¨å•Šã€‚æˆ‘ä»¬å±…ç„¶å‡ è¡Œä»£ç å°±å®ç°äº†å¤šè¡Œçš„Javaä»£ç ã€‚å…¶ä¸­æˆ‘ä»¬è¿ç”¨åˆ°äº†Kotlinçš„å»¶è¿Ÿå±æ€§ Lazyã€‚ Lazyæ˜¯æ¥å—ä¸€ä¸ª lambda å¹¶è¿”å›ä¸€ä¸ª Lazy å®ä¾‹çš„å‡½æ•°ï¼Œè¿”å›çš„å®ä¾‹å¯ä»¥ä½œä¸ºå®ç°å»¶è¿Ÿå±æ€§çš„å§”æ‰˜ï¼š ç¬¬ä¸€æ¬¡è°ƒç”¨ get() ä¼šæ‰§è¡Œå·²ä¼ é€’ç»™ lazy() çš„ lambda è¡¨è¾¾å¼å¹¶è®°å½•ç»“æœï¼Œ åç»­è°ƒç”¨ get() åªæ˜¯è¿”å›è®°å½•çš„ç»“æœã€‚ è¿™é‡Œè¿˜æœ‰æœ‰ä¸¤ä¸ªé¢å¤–çš„çŸ¥è¯†ç‚¹ã€‚ é«˜é˜¶å‡½æ•° å§”æ‰˜å±æ€§ å¦‚æœä½ äº†è§£ä»¥ä¸ŠçŸ¥è¯†ç‚¹ï¼Œæˆ‘ä»¬ç›´æ¥æ¥çœ‹Lazyçš„å†…éƒ¨å®ç°ã€‚ Lazyå†…éƒ¨å®ç° 123456public fun &lt;T&gt; lazy(mode: LazyThreadSafetyMode, initializer: () -&gt; T): Lazy&lt;T&gt; = when (mode) &#123; LazyThreadSafetyMode.SYNCHRONIZED -&gt; SynchronizedLazyImpl(initializer) LazyThreadSafetyMode.PUBLICATION -&gt; SafePublicationLazyImpl(initializer) LazyThreadSafetyMode.NONE -&gt; UnsafeLazyImpl(initializer) &#125; è§‚å¯Ÿä¸Šè¿°ä»£ç ï¼Œå› ä¸ºæˆ‘ä»¬ä¼ å…¥çš„mode = LazyThreadSafetyMode.SYNCHRONIZEDï¼Œ é‚£ä¹ˆä¼šç›´æ¥èµ° SynchronizedLazyImplï¼Œæˆ‘ä»¬ç»§ç»­è§‚å¯ŸSynchronizedLazyImplã€‚ Lazyæ¥å£ SynchronizedLazyImplå®ç°äº†Lazyæ¥å£ï¼ŒLazyå…·ä½“æ¥å£å¦‚ä¸‹ï¼š 1234567public interface Lazy&lt;out T&gt; &#123; //å½“å‰å®ä¾‹åŒ–å¯¹è±¡ï¼Œä¸€æ—¦å®ä¾‹åŒ–åï¼Œè¯¥å¯¹è±¡ä¸ä¼šå†æ”¹å˜ public val value: T //è¿”å›trueè¡¨ç¤ºï¼Œå·²ç»å»¶è¿Ÿå®ä¾‹åŒ–è¿‡äº†ï¼Œfalse è¡¨ç¤ºï¼Œæ²¡æœ‰è¢«å®ä¾‹åŒ–ï¼Œ //ä¸€æ—¦æ–¹æ³•è¿”å›trueï¼Œè¯¥æ–¹æ³•ä¼šä¸€ç›´è¿”å›true,ä¸”ä¸ä¼šå†ç»§ç»­å®ä¾‹åŒ– public fun isInitialized(): Boolean&#125; ç»§ç»­æŸ¥çœ‹SynchronizedLazyImplï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š SynchronizedLazyImplå†…éƒ¨å®ç° 123456789101112131415161718192021222324252627282930private class SynchronizedLazyImpl&lt;out T&gt;(initializer: () -&gt; T, lock: Any? = null) : Lazy&lt;T&gt;, Serializable &#123; private var initializer: (() -&gt; T)? = initializer @Volatile private var _value: Any? = UNINITIALIZED_VALUE // final field is required to enable safe publication of constructed instance private val lock = lock ?: this override val value: T get() &#123; val _v1 = _value //åˆ¤æ–­æ˜¯å¦å·²ç»åˆå§‹åŒ–è¿‡ï¼Œå¦‚æœåˆå§‹åŒ–è¿‡ç›´æ¥è¿”å›ï¼Œä¸åœ¨è°ƒç”¨é«˜çº§å‡½æ•°å†…éƒ¨é€»è¾‘ if (_v1 !== UNINITIALIZED_VALUE) &#123; @Suppress(\"UNCHECKED_CAST\") return _v1 as T &#125; return synchronized(lock) &#123; val _v2 = _value if (_v2 !== UNINITIALIZED_VALUE) &#123; @Suppress(\"UNCHECKED_CAST\") (_v2 as T) &#125; else &#123; val typedValue = initializer!!()//è°ƒç”¨é«˜çº§å‡½æ•°è·å–å…¶è¿”å›å€¼ _value = typedValue //å°†è¿”å›å€¼èµ‹å€¼ç»™_value,ç”¨äºä¸‹æ¬¡åˆ¤æ–­æ—¶ï¼Œç›´æ¥è¿”å›é«˜çº§å‡½æ•°çš„è¿”å›å€¼ initializer = null typedValue &#125; &#125; &#125; //çœç•¥éƒ¨åˆ†ä»£ç &#125; é€šè¿‡ä¸Šè¿°ä»£ç ï¼Œæˆ‘ä»¬å‘ç° SynchronizedLazyImpl è¦†ç›–äº†Lazyæ¥å£çš„valueå±æ€§ï¼Œå¹¶ä¸”é‡æ–°äº†å…¶å±æ€§è®¿é—®å™¨ã€‚å…¶å…·ä½“é€»è¾‘ä¸Javaçš„åŒé‡æ£€éªŒæ˜¯ç±»ä¼¼çš„ã€‚ åˆ°é‡Œè¿™é‡Œå…¶å®å¤§å®¶è¿˜æ˜¯è‚¯å®šæœ‰ç–‘é—®ï¼Œæˆ‘è¿™é‡Œåªæ˜¯å®ä¾‹åŒ–äº†SynchronizedLazyImplå¯¹è±¡ï¼Œå¹¶æ²¡æœ‰è¿›è¡Œå€¼çš„è·å–ï¼Œå®ƒæ˜¯æ€ä¹ˆæ‹¿åˆ°é«˜é˜¶å‡½æ•°çš„è¿”å›å€¼å‘¢ï¼Ÿã€‚è¿™é‡Œåˆæ¶‰åŠåˆ°äº†å§”æ‰˜å±æ€§ã€‚ å§”æ‰˜å±æ€§è¯­æ³•æ˜¯ï¼š val/var &lt;å±æ€§å&gt;: &lt;ç±»å‹&gt; by &lt;è¡¨è¾¾å¼&gt;ã€‚åœ¨ by åé¢çš„è¡¨è¾¾å¼æ˜¯è¯¥ å§”æ‰˜ï¼Œ å› ä¸ºå±æ€§å¯¹åº”çš„ get()ï¼ˆå’Œ set()ï¼‰ä¼šè¢«å§”æ‰˜ç»™å®ƒçš„ getValue() å’Œ setValue() æ–¹æ³•ã€‚ å±æ€§çš„å§”æ‰˜ä¸å¿…å®ç°ä»»ä½•çš„æ¥å£ï¼Œä½†æ˜¯éœ€è¦æä¾›ä¸€ä¸ª getValue() å‡½æ•°ï¼ˆå’Œ setValue()â€”â€”å¯¹äº var å±æ€§ï¼‰ã€‚ è€ŒLazy.ktæ–‡ä»¶ä¸­ï¼Œå£°æ˜äº†Lazyæ¥å£çš„getValueæ‰©å±•å‡½æ•°ã€‚æ•…åœ¨æœ€ç»ˆèµ‹å€¼çš„æ—¶å€™ä¼šè°ƒç”¨è¯¥æ–¹æ³•ã€‚ 123@kotlin.internal.InlineOnly//è¿”å›åˆå§‹åŒ–çš„å€¼ã€‚public inline operator fun &lt;T&gt; Lazy&lt;T&gt;.getValue(thisRef: Any?, property: KProperty&lt;*&gt;): T = value é™æ€å†…éƒ¨ç±»å¼è¿™ç§æ–¹æ³•ä¹Ÿæ˜¯ã€ŠEffective Javaã€‹ä¸Šæ‰€æ¨èçš„ã€‚12345678910//Javaå®ç°public class Singleton&#123; private static class SingletonHolder&#123; private static final Singleton INSTANCE = new Singleton(); &#125; private Singleton()&#123;&#125; public static final Singleton getInstance()&#123; return SingletonHolder.INSTANCE; &#125;&#125; è¿™ç§å†™æ³•ä»ç„¶ä½¿ç”¨JVMæœ¬èº«æœºåˆ¶ä¿è¯äº†çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ã€‚ç”±äºé™æ€å•ä¾‹å¯¹è±¡æ²¡æœ‰ä½œä¸ºSingletonçš„æˆå‘˜å˜é‡ç›´æ¥å®ä¾‹åŒ–ï¼Œå› æ­¤ç±»åŠ è½½æ—¶ä¸ä¼šå®ä¾‹åŒ–Singletonï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨getInstance()æ—¶å°†å†…éƒ¨ç±»SingletonHodlerï¼Œåœ¨è¯¥å†…éƒ¨ç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªstaticç±»å‹çš„å˜é‡INSTANCEï¼Œæ­¤æ—¶ä¼šé¦–å…ˆåˆå§‹åŒ–è¿™ä¸ªæˆå‘˜å˜é‡ï¼Œç”±Javaè™šæ‹Ÿæœºæ¥ä¿è¯å…¶çº¿ç¨‹å®‰å…¨æ€§ï¼Œç¡®ä¿è¯¥æˆå‘˜å˜é‡åªèƒ½åˆå§‹åŒ–ä¸€æ¬¡ã€‚ç”±äºgetInstance()æ–¹æ³•æ²¡æœ‰ä»»ä½•çº¿ç¨‹é”å®šï¼Œå› æ­¤å…¶æ€§èƒ½ä¸ä¼šé€ æˆä»»ä½•å½±å“ã€‚ ç”±äºSingletonHodleræ˜¯ç§æœ‰çš„ï¼Œé™¤äº†getInstance()ä¹‹å¤–æ²¡æœ‰åŠæ³•è®¿é—®å®ƒï¼Œå› æ­¤å®ƒæ˜¯æ‡’æ±‰å¼çš„ï¼›åŒæ—¶è¯»å–å®ä¾‹çš„æ—¶å€™ä¸ä¼šè¿›è¡ŒåŒæ­¥ï¼Œæ²¡æœ‰æ€§èƒ½ç¼ºé™·ï¼›ä¹Ÿä¸ä¾èµ–JDKç‰ˆæœ¬ã€‚123456789//Kotlinå®ç°class Singleton private constructor() &#123; companion object &#123; val instance = SingletonHolder.holder &#125; private object SingletonHolder &#123; val holder= Singleton() &#125;&#125; æšä¸¾å¼ï¼šEnumç”¨æšä¸¾å†™å•ä¾‹å®åœ¨å¤ªç®€å•äº†ï¼è¿™ä¹Ÿæ˜¯å®ƒæœ€å¤§çš„ä¼˜ç‚¹ã€‚ä¸‹é¢è¿™æ®µä»£ç å°±æ˜¯å£°æ˜æšä¸¾å®ä¾‹çš„é€šå¸¸åšæ³•ã€‚ 1234//Javaå®ç°public enum EasySingleton&#123; INSTANCE;&#125; æˆ‘ä»¬å¯ä»¥é€šè¿‡EasySingleton.INSTANCEæ¥è®¿é—®å®ä¾‹ï¼Œè¿™æ¯”è°ƒç”¨getInstance()æ–¹æ³•ç®€å•å¤šäº†ã€‚åˆ›å»ºæšä¸¾é»˜è®¤å°±æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦æ‹…å¿ƒdouble checked lockingï¼Œè€Œä¸”è¿˜èƒ½é˜²æ­¢ååºåˆ—åŒ–å¯¼è‡´é‡æ–°åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚1234//Kotlinå®ç°enum class EasySingleton&#123; INSTANCE;&#125;","categories":[],"tags":[{"name":"Java","slug":"Java","permalink":"https://edward7zhang.github.io/tags/Java/"},{"name":"Kotlin","slug":"Kotlin","permalink":"https://edward7zhang.github.io/tags/Kotlin/"}]},{"title":"è®°ä¸€æ¬¡å‘†è‹¥æœ¨é¸¡çš„é¢è¯•","slug":"è®°ä¸€æ¬¡å‘†è‹¥æœ¨é¸¡çš„é¢è¯•","date":"2018-04-24T14:24:14.000Z","updated":"2018-04-24T14:52:45.817Z","comments":true,"path":"2018/04/24/è®°ä¸€æ¬¡å‘†è‹¥æœ¨é¸¡çš„é¢è¯•/","link":"","permalink":"https://edward7zhang.github.io/2018/04/24/è®°ä¸€æ¬¡å‘†è‹¥æœ¨é¸¡çš„é¢è¯•/","excerpt":"","text":"è®°å½•ä¸€é“å¾ˆç®€å•å¾ˆç®€å•çš„å…¥é—¨é¢˜â€¦æ ¸å¿ƒå°±æ˜¯ä¸€ä¸ªæˆ‘é«˜ä¸­å°±å­¦è¿‡çš„æ•°å­¦çŸ¥è¯†â€¦å‰ç§¯â€¦å¯æƒœå¹´ä¹…ä¸ç”¨â€¦åœ¨é¢è¯•çš„ç´§è¦å…³å¤´å°±æ˜¾å¾—å‘†è‹¥æœ¨é¸¡â€¦å¾ˆé—æ†¾æ²¡æœ‰è¡¨ç°å‡ºè‡ªå·±çš„çœŸå®æ°´å¹³â€¦ /* * * åœ¨ä¸€ä¸ªå¹³é¢ä¸­.ä»»æ„ä¸€ä¸ªç›´çº¿çº¿æ®µå¯ä»¥ç”±2ä¸ªç‚¹è¡¨ç¤º,ä»»æ„ä¸€ä¸ªç‚¹å¯ä»¥ç”±X,Yåæ ‡å€¼è¡¨ç¤º. *ä¾‹å¦‚çº¿æ®µ J ç”± ç‚¹A(x1, y1), B(x2, y2)è¡¨ç¤º. å…¶ä¸­åæ ‡å€¼ x,y éƒ½ä¸ºint. *æ±‚å†™å‡ºä¸€ä¸ªæ–¹æ³•, boolean checkIntersect(Line J, Line K); *æ£€æŸ¥åœ¨å¹³é¢ä¸­ç»™å‡ºçš„2ä¸ªçº¿æ®µæ˜¯å¦ç›¸äº¤, return true ä»£è¡¨çº¿æ®µç›¸äº¤, false ä¸ºä¸æƒ³äº¤. *è¯·è‡ªè¡Œå®šä¹‰çº¿æ®µLineçš„æ•°æ®ç»“æ„, å¹¶å¯ä»¥å‡è®¾ä¼ å…¥å‚æ•°Line J å’Œ Line K ä¸ºæœ‰æ•ˆè¾“å…¥. */ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118package aiqyInterview;public class CheckIntersect &#123; /** * * @author EdwardZhang * åˆ¤æ–­çº¿æ®µç›¸äº¤ï¼š * ä¸¤ä¸ªçº¿æ®µçš„äº¤ç‚¹ä¸ªæ•°å¯èƒ½æœ‰0ä¸ª 1ä¸ªæˆ–è€…æ— æ•°ä¸ª * åˆ¤æ–­ä¸¤ä¸ªçº¿æ®µç›¸äº¤ï¼Œå¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ­¥éª¤ï¼š * åˆ¤æ–­Aç‚¹Bç‚¹æ˜¯å¦åœ¨çº¿æ®µCDçš„ä¸¤ä¾§ï¼Œå³è®¡ç®—å‰ç§¯æ—¶å¼‚å· * åˆ¤æ–­Cç‚¹å’ŒDç‚¹æ˜¯å¦åœ¨çº¿æ®µABçš„ä¸¤ä¾§ï¼Œå³è®¡ç®—å‰ç§¯æ—¶å¼‚å· * ç„¶ååœ¨å¤„ç†ç‰¹æ®Šæƒ…å†µï¼Œå³ABCDå››ä¸ªç‚¹æœ‰è‡³å°‘ä¸‰ä¸ªç‚¹å…±çº¿çš„æƒ…å†µï¼Œ * å³å‡ºç°å‰ç§¯ä¸ºé›¶çš„æƒ…å†µï¼Œå¦‚æœAç‚¹ä¸çº¿æ®µCDå…±çº¿ï¼Œ * åˆ™è¦æŸ¥çœ‹Aç‚¹æ˜¯å¦åœ¨çº¿æ®µCDä¸Šï¼Œå…¶å®ƒæƒ…å†µä¾æ¬¡ç±»æ¨ã€‚ */ class Point &#123; int x; int y; public int getX() &#123; return x; &#125; public void setX(int x) &#123; this.x = x; &#125; public int getY() &#123; return y; &#125; public void setY(int y) &#123; this.y = y; &#125; &#125; class Line &#123; Point A = new Point(); Point B = new Point(); public Point getA() &#123; return A; &#125; public void setA(int i, int j) &#123; A.x = i; A.y = j; &#125; public Point getB() &#123; return B; &#125; public void setB(int i, int j) &#123; B.x = i; B.y = j; &#125; &#125; public static float direct(Point i, Point j, Point k) &#123; // è®¡ç®—å‰ç§¯ return (k.x - i.x) * (j.y - i.y) - (j.x - i.x) * (k.y - i.y); &#125; public static boolean onSegment(Point a, Point b, Point c) &#123; // å…±çº¿æ—¶ï¼Œåˆ¤æ–­ç‚¹æ˜¯å¦è½åœ¨çº¿æ®µ float minx = Math.min(a.x, b.x); float maxx = Math.max(a.x, b.x); float miny = Math.min(a.y, b.y); float maxy = Math.max(a.y, b.y); if (c.x &gt;= minx &amp;&amp; c.x &lt;= maxx &amp;&amp; c.y &gt;= miny &amp;&amp; c.y &lt;= maxy) &#123; return true; &#125; return false; &#125; public static boolean checkIntersect(Line X, Line Y) &#123; float d1 = direct(Y.A, Y.B, X.A); float d2 = direct(Y.A, Y.B, X.B); float d3 = direct(X.A, X.B, Y.A); float d4 = direct(X.A, X.B, Y.B); if (d1 * d2 &lt; 0 &amp;&amp; d3 * d4 &lt; 0) return true; else if (d1 == 0 &amp;&amp; onSegment(Y.A, Y.B, X.A)) return true; else if (d2 == 0 &amp;&amp; onSegment(Y.A, Y.B, X.B)) return true; else if (d3 == 0 &amp;&amp; onSegment(X.A, X.B, Y.A)) return true; else if (d4 == 0 &amp;&amp; onSegment(X.A, X.B, Y.B)) return true; return false; &#125; public static void main(String[] args) &#123; CheckIntersect checkIntersect = new CheckIntersect(); Line a = checkIntersect.new Line(); Line b = checkIntersect.new Line(); a.setA(0, 0); a.setB(2, 2); b.setA(2, 0); b.setB(0, 2); System.out.println(checkIntersect(a,b));//ç›¸äº¤ true a.setA(0, 0); a.setB(2, 2); b.setA(2, 0); b.setB(1, 0); System.out.println(checkIntersect(a,b));//ç›¸ç¦» false a.setA(0, 0); a.setB(2, 2); b.setA(2, 0); b.setB(4, 2); System.out.println(checkIntersect(a,b));//å¹³è¡Œ false a.setA(0, 0); a.setB(2, 2); b.setA(1, 1); b.setB(3, 3); System.out.println(checkIntersect(a,b));//åœ¨ä¸€æ¡ç›´çº¿ä¸Š true &#125;&#125;","categories":[],"tags":[{"name":"Interview","slug":"Interview","permalink":"https://edward7zhang.github.io/tags/Interview/"},{"name":"Inspire","slug":"Inspire","permalink":"https://edward7zhang.github.io/tags/Inspire/"}]},{"title":"è®¡ç®—æœºç³»åº”å±Šç”Ÿæ±‚èŒæŒ‡åŒ—","slug":"è®¡ç®—æœºç³»åº”å±Šç”Ÿæ±‚èŒæŒ‡åŒ—","date":"2018-04-19T01:07:14.000Z","updated":"2018-04-19T05:18:21.396Z","comments":true,"path":"2018/04/19/è®¡ç®—æœºç³»åº”å±Šç”Ÿæ±‚èŒæŒ‡åŒ—/","link":"","permalink":"https://edward7zhang.github.io/2018/04/19/è®¡ç®—æœºç³»åº”å±Šç”Ÿæ±‚èŒæŒ‡åŒ—/","excerpt":"","text":"ä»Šå¤©æ—©æ™¨çœ‹åˆ°äº†Easyå¤§å¤§çš„è¿™ç¯‡æ–‡ç« ï¼Œåœ¨æ–‡ç« ä¸­è¯»åˆ°äº†è‡ªå·±çš„å½±å­ï¼Œå¹¶ä¸”ä¹Ÿæ˜ç™½äº†è¿™æ®µæ—¶é—´è‡ªå·±åœ¨å®ä¹ æ‹›è˜ä¸­çš„ä¸è¶³ï¼Œå—ç›ŠåŒªæµ…ã€‚å¸Œæœ›æˆ‘çš„å¥½å‹å¯ä»¥çœ‹åˆ°ä»ä¸­å—ç›Šç‰¹æ­¤è½¬è½½ Fromï¼šhttps://github.com/easychen/career-guide-for-cs-graduate è®¡ç®—æœºç³»åº”å±Šç”Ÿæ±‚èŒæŒ‡åŒ—æœ€è¿‘å¸®äº†ä¸€ä¸ªæœ‹å‹çš„æœ‹å‹åšäº†ä¸‹èŒä¸šè§„åˆ’ï¼Œç»“åˆä¹‹å‰åœ¨å¾®åšä¸Šçš„ä¸€äº›é—®ç­”ï¼Œè§‰å¾—ä¸å°‘åº”å±Šç”ŸåŒå­¦å¯¹æ±‚èŒæœ‰è›®å¤šè¯¯è§£çš„ï¼Œæ‰€ä»¥è¿™é‡Œåˆ†äº«ä¸‹æˆ‘çš„ä¸€ç‚¹ç»éªŒå§ã€‚è™½ç„¶æœ¬æ–‡é¢˜ä¸ºæŒ‡åŒ—ï¼Œä½†åªæ˜¯ä¸€ä¸ªé¢å‘å¯¹è¡Œä¸šã€å¯¹ä¸šç•ŒæŠ€æœ¯ä¸ç†Ÿæ‚‰çš„åŒå­¦çš„æ“ä½œæ‰‹å†Œã€‚å„ä½æŠ€æœ¯å¤§ç‰›å¯èƒ½è§‰å¾—ç²—æµ…ï¼Œè¯·è§è°…ã€‚ æœ¬æ–‡ç•¥é•¿ï¼Œä¼šè°ˆåŠä»¥ä¸‹é—®é¢˜ã€‚ èŒä¸šè§„åˆ’è¶Šæ—©è¶Šå¥½ ä¸€å®šè¦çæƒœæ ¡æ‹›çš„æœºä¼šçª—å£ åº”å±Šç”Ÿçš„æ±‚èŒç­–ç•¥ æŠ€æœ¯èŒä½çš„é€‰æ‹© è¯­è¨€å’ŒæŠ€æœ¯æ ˆçš„é€‰æ‹© æŠ€æœ¯æ ˆçš„ä¼˜åŒ– ç®€å†çš„ä¹¦å†™ ä¸‹è¾¹æˆ‘ä»¬ä¸€ç‚¹ä¸€ç‚¹æ¥è®²ã€‚ æœ¬æ–‡ä½œè€… @Easy ï¼ˆ weibo.com/easy ï¼‰ï¼Œæ–¹ç³–å…¨æ ˆè¯¾ï¼ˆ quanzhanke.com ï¼‰ä¸»è®²äººï¼Œæœ‰å¤šå¹´å¤§è§„æ¨¡ç½‘ç«™ã€äº‘å¹³å°å¼€å‘ç»éªŒã€æ›¾è¿è¥è¿‡ç”¨æˆ·æ•°åä¸‡çš„ç¨‹åºå‘˜æ‹å–å¹³å°ï¼Œä¸ºä¸Šåƒåç¨‹åºå‘˜æ‰¾è¿‡å·¥ä½œã€‚è½¬è½½è¯·ä¿ç•™ä»¥ä¸Šä½œè€…ä¿¡æ¯å’Œé“¾æ¥ï¼Œè°¢è°¢ã€‚ å†…å®¹æ›´æ–°é€šçŸ¥ å¯å¾®ä¿¡æ‰«ç ï¼ˆæœªå…³æ³¨ç›´æ¥å…³æ³¨ï¼‰è®¢é˜…æœ¬æŒ‡åŒ—æ›´æ–°ã€‚ èŒä¸šè§„åˆ’è¶Šæ—©è¶Šå¥½èŒä¸šæ˜¯ä¸€ä¸ªéå¸¸ç‰¹æ®Šçš„ä¸œè¥¿ï¼Œå®ƒæœ‰ä¸¤ç‚¹å¾ˆç‰¹åˆ«ï¼Œä¸€ä¸ªæ˜¯ã€Œä¸å¯é‡æ¥ã€ï¼Œå¦ä¸€ä¸ªæ˜¯ã€ŒéªŒè¯è€—æ—¶ã€ã€‚ä¹‹å‰å’Œä¸€ä¸ªè€å‹èŠå¤©ï¼Œä»–æ„Ÿå¹è¯´ï¼Œå›è¿‡å¤´çœ‹çœ‹ï¼Œè‡ªå·±çš„æ•´ä¸ªèŒä¸šè¿‡å¾—ä¹±ä¸ƒå…«ç³Ÿã€‚ç­‰åˆ°ç°åœ¨æ˜ç™½è¿™ç‚¹çš„æ—¶å€™ï¼Œå·²ç»æ¥ä¸åŠäº†ã€‚å› ä¸ºä¸€èˆ¬ä¸€æ®µèŒä¸šç»å†çŸ­åˆ™ä¸€åˆ°ä¸¤å¹´ï¼Œé•¿åˆ™ä¸‰åˆ°äº”å¹´ã€‚æ¢ä¸¤å®¶å…¬å¸ï¼Œåå¹´ä¸€æ™ƒå°±è¿‡å»äº†ã€‚å¦‚æœä½ åœ¨è¿™åå¹´ä¸­æ²¡æœ‰å¾ˆå¥½çš„æˆé•¿ï¼Œåˆä¸å¹¸èº«åœ¨æŸäº›å…¬å¸ï¼Œé‚£ä¸‰åå¤šå²å¯èƒ½å°±é¢ä¸´è¢«æ¸…é€€çš„å¤„å¢ƒäº†ã€‚ æˆ‘ä¸€èˆ¬ä¸å±‘äºå»å’Œåˆ«äººåˆ†äº«ä»€ä¹ˆäººç”Ÿç»éªŒï¼Œæ¯•ç«Ÿæœ‰äº›å‘ä¸è‡ªå·±è·³ä¸‹å»æ˜¯ä¸ä¼šç‰¢è®°åœ¨å¿ƒçš„ã€‚ä½†èŒä¸šçš„å‘ä¸ä¸€æ ·ï¼Œç­‰ä½ å‘ç°åœ¨å‘é‡Œæ—¶ï¼Œå¯èƒ½å·²ç»æ™šäº†ã€‚æ‰€ä»¥æˆ‘èŠ±äº†è›®å¤šæ—¶é—´æ¥ç ”ç©¶è¿™ä¸ªã€‚æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å»è¯»è¯»æˆ‘çš„ã€Šç¨‹åºå‘˜è·³æ§½å…¨æ”»ç•¥ã€‹ï¼Œä¸“é—¨è®²èŒä¸šè§„åˆ’çš„ã€‚( åœ¨æˆ‘çš„ä¸ªäººç½‘ç«™ä¸Šå¯ä»¥å…è´¹è¯» æ–¹ç³–æ°”çƒğŸˆ|ç¨‹åºå‘˜è·³æ§½å…¨æ”»ç•¥ ) ä¸€å®šè¦çæƒœæ ¡æ‹›çš„æœºä¼šçª—å£æˆ‘å¤§å­¦çš„è¯­æ–‡è€å¸ˆæ›¾å‘Šè¯«æˆ‘ä»¬è¯´ï¼Œäººç”Ÿå°±åƒå››å­£ä¸€æ ·ï¼Œæ˜¥å¤©è¯¥æ’­ç§ï¼Œä½ å»æ’­ç§ï¼Œç§‹å¤©è¯¥æ”¶è·ï¼Œä½ å»æ”¶è·ï¼Œè¿™æ ·æ˜¯æœ€çœåŠ›çš„ã€‚ä½ éè¦å€’è¿‡æ¥å‘¢ï¼Œä¹Ÿä¸æ˜¯ä¸è¡Œï¼Œä½†å°±æ˜¯ä¼šå¾ˆç´¯ï¼Œä¼šä»˜å‡ºæ›´å¤šçš„ç²¾åŠ›å’Œä»£ä»·ã€‚ æ ¡æ‹›ä¹Ÿç±»ä¼¼ï¼Œå®ƒæ˜¯ç¤¾ä¼šå’Œä¼ä¸šä¸ºä»æœªæ­¥å…¥èŒåœºçš„åŒå­¦ç‰¹æ„å‡†å¤‡çš„ä¸€ä¸ªç»¿è‰²é€šé“ã€‚åœ¨è¿™ä¸ªé€šé“é‡Œï¼Œæˆ‘ä»¬å°†å€™é€‰äººå½“åšä¸€å¼ ç™½çº¸ï¼Œå¯ä»¥æ²¡æœ‰ç»éªŒã€æ²¡æœ‰è¡Œä¸šå¸¸è¯†ï¼Œåªè¦å¯¹å·¥ä½œå……æ»¡çƒ­æƒ…ã€æœ‰è¿˜ç®—èªæ˜çš„å¤´è„‘ï¼ŒåŸºæœ¬éƒ½ç®—æ˜¯åˆæ ¼çš„ã€‚ä¼ä¸šä¼šä¸ºè¿™äº›åŒå­¦å‡†å¤‡åŸ¹è®­ï¼Œå¹¶ç•™è¶³é€‚åº”æœŸï¼Œæœ‰çš„ç”šè‡³è¿˜ä¼šå®‰æ’ä¸€å¯¹ä¸€çš„è€å‘˜å·¥æ¥å¸¦ã€‚ ä½†æ˜¯ï¼Œä¸€æ—¦ä½ é”™è¿‡äº†å®ƒï¼Œé‚£ä¸€åˆ‡éƒ½ä¸ä¸€æ ·äº†ï¼Œå› ä¸ºä½ è¿›å…¥äº†åä¸ºã€Œç¤¾æ‹›ã€çš„çº¢æµ·ã€‚åœ¨è¿™é‡Œï¼Œæ‰€æœ‰å·²ç»æ¯•ä¸šçš„äººå˜æˆäº†ä½ çš„ç«äº‰å¯¹æ‰‹ï¼Œä¸ä½†è¦é¢å¯¹å’Œä½ ä¸€æ ·å·¥ä½œå¹´é™çš„äººç«äº‰ï¼Œè¿˜è¦é¢å¯¹å…¶ä»–å·¥ä½œæ—¶é—´æ›´é•¿ã€ç»éªŒæ›´ä¸°å¯Œçš„åŒè¡Œè·³æ§½å¸¦æ¥çš„ç«äº‰ã€‚ç”šè‡³ç»å¸¸å‘ç”Ÿå› ä¸ºæ‹›åˆ°äº†ä¸€ä¸ªä¸­çº§å²—ä½çš„å€™é€‰äººï¼Œå–æ¶ˆæ‰ä¸¤ä¸ªåˆçº§å²—ä½çš„æƒ…å†µã€‚ æ‰€ä»¥æ ¡æ‹›éå¸¸é‡è¦ï¼Œä¸€å®šä¸è¦é”™è¿‡ã€‚ åº”å±Šç”Ÿçš„æ±‚èŒç­–ç•¥æ—¢ç„¶æ ¡æ‹›è¿™ä¹ˆé‡è¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆæ‰èƒ½åœ¨å…¶ä¸­å æ®ä¼˜åŠ¿å‘¢ï¼Ÿè®°ä½ä¸¤ä¸ªè¯ã€Œæ‹©ä¼˜å½•å–ã€å’Œã€Œè·‘èµ¢åŒå­¦ã€ã€‚ æ‹©ä¼˜å½•å–åœ¨å¾®åšä¸Šç»å¸¸å¯ä»¥çœ‹åˆ°è¿™æ ·çš„é—®é¢˜ï¼šã€Œæˆ‘è¿™ä¸ªä¹Ÿä¼šã€é‚£ä¸ªä¹Ÿåˆæ ¼ï¼Œå‡­ä»€ä¹ˆä»–ä»¬å°±ä¸æ‹›æˆ‘å‘¢ï¼Ÿã€è¿™æ˜¯å…¸å‹çš„æ²¡æœ‰æ˜ç™½æ‹›è˜æœ¬è´¨çš„è¡¨ç°ã€‚è¦æ˜ç™½ï¼Œæ±‚èŒä¸æ˜¯ã€Œä¼šè€ƒã€è€Œæ˜¯ã€Œé«˜è€ƒã€ï¼Œä¸æ˜¯ä»€ä¹ˆäº§å“çš„å‡ºå‚åˆæ ¼æ ¡éªŒï¼Œè€Œæ˜¯ä¸€åœºä¸­å›½è¿™ä¸ªèµ„æºç´§ç¼ºå‹å›½å®¶é‡Œçš„åˆä¸€åœºä¼˜è´¨èµ„æºäº‰å¤ºæˆ˜ã€‚ é‚£äº›è–ªæ°´é«˜ã€å‘å±•ç©ºé—´å¥½çš„çŸ¥åä¼ä¸šï¼ˆåæ–‡ç®€ç§°å¤§å‚ï¼‰ï¼Œæ¯å¹´æ‹›è˜çš„äººæ•°æ˜¯ä¸€å®šçš„ã€‚æç«¯ç‚¹è¯´ï¼Œå¦‚æœç°åœ¨æ‰€æœ‰å€™é€‰äººçš„æ°´å¹³éƒ½ä¸‹è°ƒ20%ï¼Œä»–ä»¬ä¾ç„¶è¦æ‹›äººçš„ï¼Œä¸ç„¶æ²¡æ³•å‘å±•ï¼ˆä¸¥æ ¼è®²ä¼šæœ‰ä¸€äº›è°ƒæ•´ç©ºé—´ï¼Œä½†ä¹Ÿæ‰›ä¸äº†å¤šä¹…ï¼‰ã€‚ æ‰€ä»¥ï¼Œå°¤å…¶æ˜¯åœ¨æ ¡æ‹›é‡Œè¾¹ï¼Œã€Œç»å¯¹å€¼ã€å¹¶ä¸é‡è¦ï¼Œã€Œç›¸å¯¹å€¼ã€æ‰æ˜¯æœ€é‡è¦çš„ã€‚ è·‘èµ¢åŒå­¦æˆ‘æ¥è®²ä¸€ä¸ªå¾ˆè€çš„ç«¥è¯ï¼Œå¬è¿‡çš„åŒå­¦è¯·è£…ä½œæ²¡å¬è¿‡ã€‚ä¸¤ä¸ªäººåœ¨æ£®æ—é‡Œè¾¹é‡åˆ°äº†ç†ŠğŸ»ï¼Œkuma çœ‹è§ä»–ä»¬å°±å—·å—·çš„è¿½äº†è¿‡æ¥ã€‚ä¸€ä¸ªåŒå­¦è½¬èº«å°±è·‘ï¼Œå¦ä¸€ä¸ªé—®ä»–è¯´ï¼Œæˆ‘ä»¬æ€ä¹ˆè·‘ä¹Ÿè·‘ä¸è¿‡ç†Šçš„ï¼Œé‚£è·‘æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿè¿™ä¸ªåŒå­¦å›ç­”è¯´ï¼Œæˆ‘åªè¦è·‘èµ¢ä½ å°±å¥½äº†å‘€ã€‚ é‚£å…¶å®æ ¡æ‹›ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚å®ƒä¸æ˜¯è¯´ä½ çš„èƒ½åŠ›è¦æœ‰å¤šå°‘ï¼Œå…¶å®å†ç‰›çš„åº”å±Šç”Ÿçš„æ°´å¹³æ”¾åˆ°è¡Œä¸šé‡Œè¾¹ï¼Œéƒ½æ˜¯ä¸å…¥æµçš„ï¼Œå› ä¸ºå¾ˆå¤šæ°´å¹³æ˜¯é æµ·é‡çš„ç”¨æˆ·å‹å‡ºæ¥çš„ï¼Œä½ æ²¡æœ‰é‡åˆ°è¿‡è¿™äº›åœºæ™¯ï¼Œæ€ä¹ˆå¯èƒ½çŸ¥é“æ€ä¹ˆå»åº”å¯¹ã€‚ æ‰€ä»¥åº”å±Šç”Ÿå’Œé‚£äº›ç¤¾æ‹›çš„å€™é€‰äººæ¯”ï¼Œé€šå¸¸éƒ½æ˜¯æ²¡å•¥èƒœç®—çš„ï¼Œä½†å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å’Œä»–ä»¬æ˜¯ä¸åŒçš„èµ›é“ã€‚è¦è·‘èµ¢ä¸€ä¸ªåœ¨å¤§å‚æ ¸å¿ƒå²—ä½å·¥ä½œäº†ä¸€ä¸¤å¹´çš„äººä¸å®¹æ˜“ï¼Œä½†è¦è·‘èµ¢é‚£äº›å’Œä½ ä¸€æ ·åœ¨å¤§å­¦åªå­¦äº†ä¸€å †ç†è®ºåŸºç¡€ï¼Œç”šè‡³ç†è®ºè¯¾éƒ½æ²¡å¥½å¥½å­¦å¤©å¤©åœ¨å¯å®¤åƒé¸¡çš„åŒå­¦ï¼Œå°±å®¹æ˜“å¾ˆå¤šäº†ã€‚ è¦æ‰¿è®¤ï¼Œå³ä½¿è¿™æ ·ï¼Œè¦è·‘èµ¢æŸäº›å¤©èµ„èªé¢–ã€èƒ½åŠ›æ‹”ç¾¤çš„å­¦éœ¸è¿˜æ˜¯æœ‰éš¾åº¦çš„ã€‚ä½†è¿™åœºæ¯”èµ›æ˜¯ä¸å…¬å¹³çš„ï¼Œå› ä¸ºå®ƒæ²¡è§„å®šæ¯ä¸ªäººå¿…é¡»åŒæ—¶å¼€å§‹è·‘ã€‚é²è¿…è¯´å¾—å¥½ï¼Œç¬¨é¸Ÿå…ˆé£ã€‚ï¼ˆé²è¿…ï¼šæˆ‘æ²¡æœ‰è¯´è¿‡ï¼‰å¦‚æœæˆ‘ä»¬èƒ½æ›´æ—©çš„è®¤è¯†åˆ°è¿™ç‚¹ï¼ŒèŠ±æ›´å¤šæ—¶é—´å»å‡†å¤‡ï¼Œé‚£ä¹ˆèµ¢çš„æ¦‚ç‡å°±ä¼šæˆå€æå‡ã€‚ æˆ‘æœ¬èº«å°±æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„ä¾‹å­ã€‚ä¸¥æ ¼çš„è®²ï¼Œæˆ‘çš„èƒ½åŠ›ç®—æ˜¯å¹³åº¸åä¸Šä¸€ç‚¹ç‚¹çš„ï¼Œè™½ç„¶åœ¨å½“æ—¶æ— è®ºå¦‚ä½•æˆ‘éƒ½ä¸ä¼šæ‰¿è®¤ã€‚å½“æˆ‘åœ¨å¤§ä¸€ä¸‹åŠæœŸè®¤è¯†åˆ°è¿™ä¸€ç‚¹æ—¶ï¼Œå°±å¼€å§‹è‡ªå­¦ PHPï¼Œå¤§äºŒçš„æ—¶å€™å†™äº†ä¸€å †æ²¡äººç”¨çš„å¼€æºé¡¹ç›®ï¼Œå¤§ä¸‰ä¸ŠåŠæœŸæ‰¾äº†å®¶å…¬å¸åšå…¼èŒï¼Œå·²ç»èƒ½æŠŠå­¦è´¹æŒ£å›æ¥äº†ã€‚å½“å¤§ä¸‰ä¸‹åŠæœŸå¼€å§‹æ‰¾å®ä¹ æ—¶ï¼Œæˆ‘çš„ç®€å†å·²ç»å¯ä»¥ç§’æ€åŒæ ¡åŒå­¦ï¼Œå°å°PK ä¸€æµé«˜æ ¡çš„åŒå­¦äº†ã€‚ æ‰€ä»¥ä½ ä»¥ä¸ºæ ¡æ‹›æ¯”çš„æ˜¯èƒ½åŠ›ï¼Œå…¶å®å¯¹äºæ‰§è¡ŒåŠ›ä¸­ç­‰ã€åŒæ ·å¤©èµ‹çš„åŒå­¦æ¥è®²ï¼Œæ ¡æ‹›æ¯”çš„å…¶å®æ˜¯è®¤çŸ¥ã€‚è¶Šæ—©è®¤è¯†åˆ°æœ¬è´¨çš„äººï¼Œå°±è¶Šå®¹æ˜“åœ¨è¿™åœºæ¸¸æˆé‡Œè¾¹èƒœå‡ºã€‚ä»è¿™ä¸ªè§’åº¦è®²ï¼ŒåšæŒè¯»åˆ°è¿™é‡Œçš„ä½ ï¼Œç”šè‡³å¯èƒ½å·²ç»èµ¢äº†ä¸€åŠäº†ã€‚æ‰€ä»¥è®°å¾—è¦æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„å¥½æœ‹å‹ï¼Œç„¶ååƒä¸‡åˆ«è®©ä½ ä¸å–œæ¬¢çš„åŒå­¦çŸ¥é“ã€‚ æŠ€æœ¯å²—ä½çš„é€‰æ‹©æŠ€æœ¯å²—ä½çš„å¤§ä½“åˆ†å¸ƒå¦‚å›¾ï¼š ç°åœ¨å‡ ä¹æ‰€æœ‰çš„è½¯ä»¶éƒ½å·²ç»äº’è”ç½‘åŒ–äº†ï¼Œå°±ç®—æ²¡æœ‰äº’è”ç½‘åŒ–çš„ï¼Œå®ƒä»¥åä¹Ÿä¼šäº’è”ç½‘åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ä¸å•çº¯åœ°å»è¯´è½¯ä»¶å¼€å‘è¿™ä¸ªè¡Œä¸šäº†ã€‚ å¼€å‘å²—é¦–å…ˆå°±æ˜¯å¼€å‘å²—ï¼Œè¿™ä¸ªå°±åŒ…æ‹¬äº†å‰ç«¯å¼€å‘ã€åç«¯å¼€å‘å’Œç§»åŠ¨å¼€å‘ã€‚ å‰ç«¯å¼€å‘å’Œåç«¯å¼€å‘ï¼Œä¸»è¦æ˜¯ B/S ç»“æ„é‡Œçš„ã€‚B/S ç»“æ„å°±æ˜¯ Browser-Server ç»“æ„ã€‚è€Œå‰ç«¯æŒ‡çš„å°±æ˜¯æµè§ˆå™¨è¿™ä¸ªç«¯ï¼›åç«¯æŒ‡çš„å°±æ˜¯æœåŠ¡å™¨è¿™ä¸ªç«¯ã€‚ å‰ç«¯å‰ç«¯ä¸»è¦åšçš„äº‹æƒ…ï¼Œå°±æ˜¯æŠŠä»æœåŠ¡å™¨ç«¯è¯»å–åˆ°çš„æ•°æ®å±•ç°ç»™ç”¨æˆ·ï¼Œç„¶åé€šè¿‡å„ç§ UI æ§ä»¶å’Œç”¨æˆ·äº’åŠ¨ï¼Œå†å°†æ–°çš„æ•°æ®é€å›æœåŠ¡å™¨ç«¯ã€‚å…·ä½“çš„æŠ€æœ¯åŒ…æ‹¬ HTMLã€CSSã€JavaScriptï¼Œè¿˜å¯èƒ½æœ‰ä¸€äº›åµŒå…¥æµè§ˆå™¨è¿è¡Œçš„ç»„ä»¶ï¼Œæ¯”å¦‚ Flash ã€ WebGL ã€‚ åç«¯åç«¯åˆ™ä¸»è¦é€æ•°æ®ç»™å‰ç«¯ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼Œä»¥å‰ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯ï¼Œå°†æ•°æ®åœ¨æœåŠ¡å™¨ç«¯å…ˆæ¸²æŸ“å®Œï¼Œç„¶åå°†è¾“å‡ºçš„ç»“æœå‘é€ç»™å‰ç«¯ï¼›ç°åœ¨ç”¨çš„æ¯”è¾ƒå¤šçš„æ–¹å¼æ˜¯å°†çº¯æ•°æ®é€šè¿‡ Json æˆ–è€… xml ç­‰æ ¼å¼å‘é€ç»™å‰ç«¯ï¼Œåœ¨æµè§ˆå™¨ä¸­é€šè¿‡ JS æ¥è¿›è¡Œæ¸²æŸ“ã€‚ æ‰€ä»¥ä»¥å‰å¾ˆå¤šåç«¯çš„å·¥ç¨‹å¸ˆå¾€å¾€ä¹Ÿæ‡‚ä¸€äº›å‰ç«¯çš„çŸ¥è¯†ï¼Œæ¯”å¦‚æˆ‘è®¤è¯†çš„å¾ˆå¤š PHP ç¨‹åºå‘˜ï¼Œä»–ä»¬ä¸ä½†æ‡‚ MySQL å’Œ Apacheï¼Œè¿˜æ‡‚ HTML ã€ CSS ã€ JS å’Œ PSã€‚è¿™ç§å‰åç«¯éƒ½æ‡‚çš„å·¥ç¨‹å¸ˆï¼Œä¹Ÿå«å…¨æ ˆå·¥ç¨‹å¸ˆã€‚ åç«¯å¯ä»¥ç”¨å„ç§è¯­è¨€å¼€å‘ï¼Œå›½å†…ç”¨çš„æ¯”è¾ƒå¤šçš„åŒ…æ‹¬ Javaã€PHP ï¼Œè¿˜æœ‰ç›¸å¯¹å°ä¼—ä¸€äº›çš„ Python ã€ Ruby ã€ Goã€‚å…¶å® C ä¹Ÿæ˜¯å¯ä»¥å†™åç«¯çš„ï¼Œä¸è¿‡ç°åœ¨å·²ç»å¾ˆå°‘æœ‰å…¬å¸ç›´æ¥ç”¨å®ƒå†™äº†ã€‚ åæ¥æœ‰äº† NodeJS ï¼ŒJavaScript ä¹Ÿèƒ½è·‘åˆ°åç«¯äº†ï¼Œæ‰€ä»¥å¾ˆå¤šå‰ç«¯å·¥ç¨‹å¸ˆä¹Ÿæœ‰äº†åç«¯å¼€å‘çš„èƒ½åŠ›ï¼Œä»–ä»¬ä¹Ÿå äº†å…¨æ ˆå·¥ç¨‹å¸ˆçš„å¾ˆå¤§ä¸€éƒ¨åˆ†ã€‚ å®¢æˆ·ç«¯ç›¸å¯¹äº B/S ç»“æ„ï¼Œè¿˜æœ‰ C/S ç»“æ„ï¼Œå°±æ˜¯ Client-Server ã€‚C/S ç»“æ„ä¸‹ä¸ç”¨æµè§ˆå™¨æ¥å±•ç°æ•°æ®å’Œäº¤äº’ï¼Œè€Œæ˜¯ç”¨å®¢æˆ·ç«¯ï¼Œä¸€èˆ¬æ˜¯ Mac/Win/Linux ä¸‰å¤§å¹³å°ã€‚ ç§»åŠ¨ç«¯æ‰‹æœºå¤§æ½®èµ·æ¥ä»¥åï¼Œä¸ç®¡æ˜¯ B/S ç»“æ„è¿˜æ˜¯ C/S ç»“æ„ï¼Œå…¨éƒ¨ç§»åŠ¨åŒ–äº†ã€‚B/S ç»“æ„å¯¹åº”çš„å°±æ˜¯é€‚é…æ‰‹æœºæµè§ˆå™¨çš„ç§»åŠ¨ç½‘é¡µã€ä»¥åŠåµŒå…¥åœ¨å¾®ä¿¡ã€å¾®åšé‡Œè¾¹çš„ H5 é¡µé¢; C/S ç»“æ„å°±æ˜¯ APP ï¼Œä¸€èˆ¬è¦†ç›– iOS å’Œ Android ä¸¤ä¸ªä¸»æµå¹³å°ã€‚ é™¤äº†è¿™äº›æ ‡å‡†å¼€å‘å²—ï¼Œè€Œè¿˜æœ‰ä¸€äº›æ–°å…´æˆ–è€…ç›¸å¯¹å°ä¼—çš„å¼€å‘æ–¹å‘ï¼Œæ¯”å¦‚äººå·¥æ™ºèƒ½/ç®—æ³•å·¥ç¨‹å¸ˆã€åšæ™ºèƒ½ç¡¬ä»¶çš„ç¡¬ä»¶å¼€å‘å·¥ç¨‹å¸ˆã€ç»™ä¼ä¸šåšè§£å†³æ–¹æ¡ˆçš„ä¼ä¸šè½¯ä»¶å·¥ç¨‹å¸ˆã€‚ å…¶ä»–å²—ä½è½¯ä»¶å¹¶ä¸æ˜¯å¼€å‘å‡ºæ¥å°±å®Œäº†çš„ï¼Œåœ¨ä¸Šçº¿æˆ–è€…å‘å¸ƒä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ã€Œæµ‹è¯•å·¥ç¨‹å¸ˆã€æ¥è¿›è¡Œæµ‹è¯•ï¼›è€Œä¸Šçº¿ä»¥åï¼Œè¿˜éœ€è¦ã€Œè¿ç»´å·¥ç¨‹å¸ˆã€æ¥ç®¡ç†å’Œä¼˜åŒ–æœåŠ¡å™¨é›†ç¾¤ã€‚ç°åœ¨æœåŠ¡å™¨éƒ½è™šæ‹ŸåŒ–å’Œå®¹å™¨åŒ–äº†ï¼Œè¿ç»´å·¥ç¨‹å¸ˆä¸­ä¹Ÿå‡ºç°äº†æ‡‚å¼€å‘çš„åˆ†æ”¯ï¼Œå«åš DevOpsã€‚ ä¸­é«˜çº§å²—ä½ä¸ç®¡æ˜¯å¼€å‘å²—è¿˜æ˜¯æµ‹è¯•ã€è¿ç»´å²—ï¼Œéƒ½æœ‰å…¶å¯¹åº”çš„ä¸­é«˜çº§å²—ä½ã€‚å¼€å‘ä¸€èˆ¬æ˜¯æŠ€æœ¯ç»ç†ï¼›è¿ç»´ä¸€èˆ¬æ˜¯æ¶æ„å¸ˆï¼›æµ‹è¯•ä¸€èˆ¬æ˜¯æµ‹è¯•æ€»ç›‘ã€‚æŠ€æœ¯æ€»ç›‘ã€CTO å°±æ˜¯æ›´é«˜ä¸€çº§çš„èŒä½äº†ã€‚ ä»¥ä¸Šçš„èŒä½åˆ†ç±»æˆ‘ä»¬å‚è€ƒäº†æ‹›è˜ç½‘ç«™çš„åˆ†ç±»ï¼Œä¸ä¸€å®šå‡†ç¡®ï¼Œå¯èƒ½ä¼šæœ‰å¾ˆå¤šå²—ä½æ²¡è¦†ç›–åˆ°ï¼Œä¸å°‘å…¬å¸ä¹Ÿä¼šæœ‰è‡ªå·±ç‹¬ç‰¹çš„å²—ä½è®¾ç½®ã€‚ èŒä½çš„é€‰æ‹©å¦‚æœèƒ½é€‰æ‹©çš„è¯ï¼Œä¸å»ºè®®ä¸€å¼€å§‹å°±é€‰è¿ç»´æˆ–è€…æµ‹è¯•ã€‚åŸå› æœ‰ä¸¤ä¸ªï¼šç¬¬ä¸€ï¼Œå› ä¸ºå®ƒä»¬è™½ç„¶å¾ˆé‡è¦ï¼Œä½†ä¸æ˜¯è½¯ä»¶å¼€å‘çš„æ ¸å¿ƒå²—ä½ã€‚ç¬¬äºŒï¼Œä»å¼€å‘å²—å¾€è¿™ä¸¤ä¸ªèŒä½è½¬éå¸¸å®¹æ˜“ï¼Œåä¹‹å´éå¸¸éš¾ã€‚ ä¹‹å‰åœ¨ç»™æ˜é‡‘å†™ã€Šç¨‹åºå‘˜èŒä¸šå°ç™½ä¹¦ã€‹çš„æ—¶å€™ï¼Œæˆ‘åšè¿‡ä¸€ä¸ªé‚®ä»¶è®¿è°ˆï¼Œä»¥é—®é¢˜çš„å½¢å¼é‡‡è®¿äº†å¤šä½åœ¨ä¸åŒé˜¶æ®µã€ä¸åŒå²—ä½ã€ä¸åŒåŸå¸‚çš„ç¨‹åºå‘˜çš„æ—¥å¸¸ã€‚å¤§å®¶å¯ä»¥è¯»ä¸€è¯»ï¼Œäº†è§£ä¸‹ã€‚ç¨‹åºå‘˜ä»¬çš„æ—¥å¸¸æ˜¯æ€æ ·çš„ ï¼ˆè™½ç„¶è¿™ä¸ªå°å†Œæ˜¯æ”¶è´¹çš„ï¼Œä½†è®¿è°ˆè¿™ä¸€ç« å´æ˜¯å¯ä»¥å…è´¹è¯»çš„ï¼Œä¸éœ€è¦è´­ä¹°å“ˆï¼‰ è¯­è¨€å’ŒæŠ€æœ¯æ ˆçš„é€‰æ‹©è¯­è¨€æ¦‚å†µè™½ç„¶å‡ºäºæŸç§æ”¿æ²»æ­£ç¡®ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šè¯´ï¼Œè¯­è¨€ä¸é‡è¦ã€‚ä½†è¯­è¨€çœŸçš„ä¸é‡è¦ä¹ˆï¼Ÿå¹¶ä¸æ˜¯è¿™æ ·çš„ï¼Œæ¯ç§è¯­è¨€éƒ½æœ‰è‡ªå·±çš„ä¼˜ç¼ºç‚¹å’Œé€‚ç”¨èŒƒå›´ã€‚ åƒæ—¥è¯­å’Œè‹±è¯­ä¸€æ ·ï¼Œä¸€ä¸ªæ˜¯çœ‹åŠ¨ç”»ç©æ¸¸æˆç”¨çš„ï¼Œä¸€ä¸ªæ˜¯çœ‹èµ„æ–™å†™ä»£ç ç”¨çš„ã€‚ï¼ˆè¯¯ï¼‰ä¸‹è¾¹ç®€å•ä»‹ç»ä¸‹æˆ‘çœ¼ä¸­çš„å„ä¸ªè¯­è¨€ã€‚ C/C++ ï¼šç³»ç»Ÿè¯­è¨€ï¼Œç”¨æ¥å†™åº•å±‚æ“ä½œç³»ç»Ÿã€é«˜æ€§èƒ½ä¸­é—´ä»¶å’ŒåµŒå…¥å¼å¼€å‘ã€‚ Pythonï¼šäººå·¥æ™ºèƒ½çš„å¥½é€‰æ‹©ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœä½ æƒ³åšäººå·¥æ™ºèƒ½æ–¹å‘çš„è¯ï¼ŒPythonè¯­è¨€å°±æ˜¯éå¸¸ä¸é”™çš„é€‰æ‹©ã€‚å› ä¸ºå®ƒåœ¨å„ä¸ªå¤§å­¦å’Œç ”ç©¶æœºæ„ç”¨çš„éå¸¸å¤šï¼Œæœ‰æˆç†Ÿå¥½ç”¨çš„æ•°å­¦åº“ï¼Œé€‚åˆäºç§‘å­¦è®¡ç®—ã€‚åœ¨æ·±åº¦å­¦ä¹ ç­‰çƒ­é—¨æ–¹å‘ä¸Šï¼Œæœ‰å¤§é‡ç”¨ Python å¼€å‘çš„æ¡†æ¶ï¼Œæ–°å‡ºçš„ Paper ä¹Ÿèƒ½å¾ˆå¿«åœ¨ GitHub ä¸Šæ‰¾åˆ° Python çš„ä»£ç å®ç°ï¼Œå¯ä»¥è¯´æ˜¯ä¸äºŒé€‰æ‹©äº†ã€‚ JavaScriptï¼šå‰ç«¯å’Œå…¨ç«¯å¦‚æœä½ æƒ³åšå‰ç«¯ï¼Œé‚£ä¹ˆç›®å‰æ¥çœ‹ï¼Œé™¤äº† JavaScript è¿˜çœŸæ²¡æœ‰åˆ«çš„é€‰æ‹©ï¼Œå› ä¸ºç°åœ¨èƒ½åœ¨æµè§ˆå™¨é‡Œè¾¹è·‘èµ·æ¥ï¼Œä¹Ÿå°±æ˜¯å®ƒäº†ã€‚è¿‡ä¸¤å¹´ç­‰ wasm æˆç†Ÿå¯èƒ½ä¼šæœ‰å…¶ä»–é€‰æ‹©ï¼Œä½†ç°åœ¨ï¼Œæ˜¯çœŸæ²¡æœ‰ã€‚ è€Œç›¸åº”çš„ï¼Œå¦‚æœä½ å­¦ä¼šäº† JavaScript ï¼Œæƒ³åœ¨è¿™ä¸ªåŸºç¡€ä¸Šå†æŠŠåç«¯ç»™åšäº†ï¼Œé‚£ä¹ˆ Node.JS å°±æ˜¯éå¸¸å¥½çš„é€‰æ‹©ã€‚å› ä¸ºå®ƒä½¿ç”¨çš„å°±æ˜¯ JavaScript çš„è§£é‡Šå™¨ï¼ŒæŒ‰ JavaScript å†™å°±å¥½äº†ã€‚ä»å­¦ä¹ æˆæœ¬ä¸Šæ¥è®²ï¼Œå®ƒæ˜¯éå¸¸ä½çš„ï¼Œå¯ä»¥é€šè¿‡å¾ˆä½çš„æŠ•å…¥ï¼Œå°±è¿›å…¥äº†æœåŠ¡å™¨ç«¯çš„é¢†åŸŸã€‚ PHPï¼šä¾ç„¶æ˜¯ç½‘ç«™é¦–é€‰å¦‚æœä½ è¦åšç½‘ç«™ï¼Œé‚£ä¹ˆ PHP å°±æ˜¯é¦–é€‰äº†ã€‚ä¸€æ–¹é¢æ˜¯æœ‰å¤§é‡çš„å¯ç”¨ä»£ç ï¼Œä¸–ç•Œä¸Šè¶…è¿‡80%çš„ç½‘ç«™éƒ½ç”¨çš„ PHPï¼ŒåŸºæœ¬ä¸Šä½ èƒ½æƒ³åˆ°çš„ç½‘ç«™åŠŸèƒ½ï¼Œéƒ½æœ‰èƒ½æ‰¾åˆ°çš„å®ç°ï¼Œæ‚¬å¿µåªæ˜¯æœ‰æ²¡æœ‰å…è´¹çš„ï¼›å¦ä¸€æ–¹é¢ï¼ŒPHP7 çš„æ€§èƒ½æå‡äº†å¾ˆå¤šï¼Œç”¨æ¥å†™ API ä¹Ÿéå¸¸å¥½ã€‚ å¦å¤–ä¸€ç‚¹ï¼Œå°±æ˜¯ç›®å‰ä½¿ç”¨ PHP çš„å›¢é˜Ÿéå¸¸å¤šï¼Œå³ä½¿åœ¨äºŒä¸‰çº¿åŸå¸‚ä¹Ÿæ¯”è¾ƒå®¹æ˜“æ‰¾åˆ°å·¥ä½œï¼Œå½“ç„¶ï¼Œç»„å»ºå›¢é˜Ÿä¹ŸåŒæ ·ç›¸å¯¹å®¹æ˜“ã€‚ Javaï¼šå¤§æ•°æ®åˆ†æå¦‚æœä½ è¦åšå¤§æ•°æ®åˆ†æï¼Œé‚£ä¹ˆå¯èƒ½å°±ç¦»ä¸å¼€ Java äº†ã€‚ä» Hadoop å¼€å§‹ä¸€ç³»åˆ—çš„ Google Big Table çš„å¼€æºå®ç°éƒ½æ˜¯ Java çš„ï¼Œç”¨äºæµ·é‡æ•°æ®æœç´¢çš„ Elastic Stack ä¹Ÿæ˜¯ Java çš„ã€‚ Goï¼šäº‘è®¡ç®—å’Œå®¹å™¨ç®¡ç†å¦‚æœä½ ç°åœ¨è¦æƒ³å»åšäº‘è®¡ç®—ï¼Œé‚£ Go å°±æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰æ‹©ã€‚ å› ä¸ºå®ƒå°±æ˜¯ä¸ºäº†å¤§è§„æ¨¡è®¡ç®—è®¾è®¡çš„ï¼Œå¹¶å‘ç®¡ç†å’Œæ€§èƒ½éƒ½éå¸¸ä¸é”™ã€‚è€Œä¸”æœ‰å¾ˆå¤šäº‘è®¡ç®—çš„è½¯ä»¶ï¼Œå®ƒå°±æ˜¯ Go å†™çš„ï¼Œå¦‚æœä½ è¦å»ä¿®æ”¹å®ƒï¼Œè°ƒæ•´é‡Œè¾¹çš„å®ç°é€»è¾‘çš„è¯ï¼Œä¸ä¼š Go å¯èƒ½å¾ˆéº»çƒ¦ã€‚å½“ç„¶ï¼Œç†è®ºä¸Šè®²ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡å®¹å™¨å’Œå¾®æœåŠ¡çš„æ–¹å¼æ¥æå®šï¼Œä½†è‚¯å®šæ¯”ç›´æ¥æ”¹ä»£ç éº»çƒ¦ã€‚ å¦å¤–åŒºå—é“¾çš„å¤§çƒ­å¹³å°ä»¥å¤ªåŠçš„å®˜æ–¹ï¼ˆæœ€å…·æ½œåŠ›ï¼‰å®ç°ï¼Œä¹Ÿæ˜¯Goåšçš„ã€‚é’±é€”å¤§å¤§çš„ã€‚ è¯­è¨€çš„é€‰æ‹©å…´è¶£ä¼˜å…ˆåœ¨è¯­è¨€çš„é€‰æ‹©ä¸Šï¼Œå°¤å…¶æ˜¯ç¬¬ä¸€é—¨è¯­è¨€çš„é€‰æ‹©ä¸Šï¼Œæˆ‘ä¸€ç›´æ¨èå…´è¶£ä¼˜å…ˆçš„åŸåˆ™ã€‚å› ä¸ºå¯¹åˆå­¦è€…è€Œè¨€ï¼Œå½“ä½ é‡åˆ°å›°éš¾åšæŒä¸ä¸‹å»æ—¶ï¼Œå…´è¶£ä¼šå¸®ä½ ä¸€æŠŠã€‚ä¸­å­¦æ—¶ä¸ºäº†æ”¹ä»™å‰‘ï¼Œæˆ‘è¿æ±‡ç¼–éƒ½è¯•ç€å­¦äº†ä¸ªå…¥é—¨ ğŸ¤£ å¸‚åœºå…¶æ¬¡ä½†å…¶å®å¯¹ç»å¤§éƒ¨åˆ†åº”å±Šç”Ÿè€Œè¨€ï¼Œå¯¹å„ç§è¯­è¨€å¹¶æ²¡æœ‰ç‰¹åˆ«çš„åå¥½ã€‚è€Œä¸”ã€Œæ‰¾åˆ°å·¥ä½œã€è¿™ä»¶äº‹æ˜¯éå¸¸é‡è¦çš„ã€‚æ‰€ä»¥ä¸å…¶ç›²ç›®çš„é€‰æ‹©è¯­è¨€å­¦ä¹ ä¸å¦‚æ¥çœ‹çœ‹å„ä¸ªè¯­è¨€åœ¨æ‹›è˜å¸‚åœºçš„è¡¨ç°ã€‚ æˆ‘ä¹‹å‰å†™è¿‡ä¸€ä¸ªè„šæœ¬ï¼Œå¯ä»¥æŠ“å–å‡ ä¸ªäº’è”ç½‘æ‹›è˜å¤§ç«™çš„æ‹›è˜å¯äº‹ï¼Œå¹¶æŒ‰èŒä½å¯¹è–ªèµ„è¿›è¡Œç»Ÿè®¡ã€‚ä¸‹è¾¹æ˜¯æœ€è¿‘ä¸€å‘¨çš„ç»Ÿè®¡ç»“æœã€‚ å…ˆæ¥è¯´è¯´è¿™äº›æ•°æ®æ€ä¹ˆçœ‹ã€‚ èŒä½çƒ­åº¦ç±»ä¼¼äºæ‹›è˜èŒä½æ•°ï¼Œå’Œå…¶ä»–è¯­è¨€å¯¹æ¯”å°±èƒ½çœ‹å‡ºå·®è·ã€‚å¹³å‡è–ªèµ„ä¹‹æ‰€æœ‰æœ‰ä¸¤ä¸ªå€¼ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬ä¸€èˆ¬æ‹›è˜æ—¶ä¼šç»™å‡ºè–ªèµ„çš„ä¸Šé™å’Œä¸‹é™ã€‚ä¸¥æ ¼çš„è®²ï¼Œè¿™å¹¶ä¸æ˜¯å½“å‰æŸä¸ªè¯­è¨€çš„ç¨‹åºå‘˜ä»¬çš„è–ªèµ„ï¼Œè€Œæ˜¯ä»–ä»¬ä¸‹ä¸€æ¬¡è·³æ§½æ—¶çš„å¯èƒ½è–ªèµ„ã€‚å¦å¤–ï¼Œéƒ¨åˆ†ä¼ä¸šå–œæ¬¢åœ¨ä¸Šé™å€¼ä¸Šè¾¹è™šé«˜ï¼Œæ‰€ä»¥æŠŠä¸Šé™ä¹˜80%å¯èƒ½æ›´åˆç†ã€‚è€Œä¸‹é™ä¸€èˆ¬æ¯”è¾ƒçœŸå®ï¼Œæ›´å…·å¤‡å¯¹æ¯”ä»·å€¼ã€‚ ç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹èƒ½å‘ç°ä»€ä¹ˆã€‚ Java çš„æ•°æ®éå¸¸ç‰›é¦–å…ˆæˆ‘ä»¬ä¼šå‘ç°ï¼ŒJava çš„èŒä½çƒ­åº¦éå¸¸é«˜ï¼Œå‡ ä¹åœ¨æ‰€æœ‰åŸå¸‚é‡Œè¾¹éƒ½æ˜¯æ’åç¬¬ä¸€çš„ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªç‰¹æ®ŠåŸå› ï¼Œå°±æ˜¯ Android èŒä½åŸºæœ¬ä¹Ÿæ˜¯ä½¿ç”¨ Java è¯­è¨€è¿›è¡Œå¼€å‘çš„ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªèŒä½æœ‰ä¸€äº›é‡å ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå­¦å¥½ Java å…¶å®å¯ä»¥åŒæ—¶åº”è˜ Javaå·¥ç¨‹å¸ˆ å’Œ Android å·¥ç¨‹å¸ˆï¼ˆå¯èƒ½éœ€è¦é¢å¤–åœ¨å­¦ä¸€ç‚¹ç‚¹åº”ç”¨å¼€å‘çš„çŸ¥è¯†ï¼‰ï¼Œè¿™éå¸¸åˆ’ç®—ã€‚è€Œä»è–ªèµ„æ–¹é¢çœ‹ï¼ŒJava ä¹Ÿæ˜¯æ•°ä¸€æ•°äºŒçš„ã€‚ å‰ç«¯ç´§è·Ÿå…¶åç´§éšå…¶åçš„æ˜¯å‰ç«¯èŒä½ã€‚å‰ç«¯æ˜¯ä¸ªéå¸¸æœ‰æ„æ€çš„ç‰¹ç‚¹ï¼Œé‚£å°±æ˜¯â€”â€”å‡ ä¹æ‰€æœ‰çš„å…¬å¸éƒ½ä¼šæ‹›å‰ç«¯ã€‚å¯¹æ¯” Java è€Œè¨€ï¼Œå¯èƒ½æœ‰å¾ˆå¤šå¤§å‚çš„åç«¯ç”¨çš„ä¸æ˜¯ Java ï¼Œé‚£ä»–ä»¬å°±ä¸éœ€è¦æ‹›è˜ Java å·¥ç¨‹å¸ˆã€‚å¦‚æœä½ éå¸¸æƒ³å»è¿™å®¶å…¬å¸ï¼Œä½†ä½ ä¼šçš„è¯­è¨€æ˜¯ Java ï¼Œé‚£ä¹ˆå°±å¯èƒ½å’Œæœºä¼šæ“¦è‚©è€Œè¿‡ã€‚è€Œå‰ç«¯å²—ä½çš„è¯ï¼Œæœºä¼šå°±å¯èƒ½å¤§å¾—å¤šã€‚è¿™æœ‰ç‚¹åƒè¡€å‹é‡Œè¾¹çš„Oå‹è¡€ï¼Œæ€ä¹ˆåœ°æ–¹éƒ½èƒ½ç”¨ã€‚å°±ç®—æ˜¯è‡ªä»¥ä¸ºç«™åœ¨é£Ÿç‰©é“¾é¡¶ç«¯é„™è§†ã€Œå¤å…¸äº’è”ç½‘ã€çš„åŒºå—é“¾å…¬å¸ä¹Ÿä¸å¾—ä¸æ‹›å‰ç«¯å‘¢ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰æ‹©ã€‚ é™¤äº†çœ‹çƒ­åº¦ï¼Œæˆ‘ä»¬ä¹Ÿè¦è€ƒè™‘åˆ°ç«äº‰ï¼Œæ¯”å¦‚ Java æ˜¯ä¸€ä¸ªã€Œä¼ ç»Ÿã€å²—ï¼Œå¾ˆå¤šè½¯ä»¶è¡Œä¸šçš„å·¥ç¨‹å¸ˆä¹Ÿæ˜¯ä¼š Java çš„ã€‚è€Œã€Œå‰ç«¯ã€æ˜¯ä¸€ä¸ªæ–°å…´çš„äº’è”ç½‘å²—ï¼Œä¸“ä¸šå‰ç«¯è¿˜ä¸ç®—å¤ªå¤šï¼ˆå’Œ Java æ¯”å•¦ï¼‰ï¼Œæ‰€ä»¥å…¥èŒéš¾åº¦è¯´ä¸å®šåè€Œä½ä¸€äº›ã€‚ å…¶ä»–è¯­è¨€å…¶ä»–è¯­è¨€åœ¨å„ä¸ªåŸå¸‚çš„æ•°æ®å„ä¸ç›¸åŒï¼Œå¤§å®¶å¯ä»¥æŒ‘è‡ªå·±æ„Ÿå…´è¶£çš„çœ‹ã€‚æ¯”å¦‚ Go è¯­è¨€åœ¨åŒ—äº¬æ¯”å…¶ä»–åŸå¸‚çƒ­å‡ å€ï¼›åŒºå—é“¾è™½ç„¶çœ‹èµ·æ¥å¾ˆç«ï¼Œä½†å…¶å®èŒä½æ•°ä¹Ÿå°±æ¯” PHP çš„ä¸€åŠå¤šç‚¹ï¼›Ruby è™½ç„¶è–ªèµ„ä¸é”™ï¼Œä½†å²—ä½éå¸¸å°‘â€¦ æ€»ä¹‹è¯­è¨€çš„é€‰æ‹©å› äººè€Œå¼‚å› æ—¶è€Œå¼‚ï¼Œè¯·ç»¼åˆå„ç§è§†è§’å»é€‰æ‹©ä¸€ä¸ªé€‚åˆè‡ªå·±çš„ã€‚ å­¦ä¹ è·¯çº¿å›¾åœ¨é€‰æ‹©å¥½èŒä½å’Œè¯­è¨€åï¼Œå°±è¦å¯»æ‰¾å¯¹åº”çš„å­¦ä¹ è·¯çº¿å›¾è¿›è¡Œå­¦ä¹ äº†ã€‚è¿™é‡Œæ¨èè¿™ä¸ª Star æ•°é‡è¶…è¿‡4ä¸‡çš„è·¯çº¿å›¾ï¼ˆçš„ä¸­æ–‡ç‰ˆï¼‰ï¼šGitHub - goodjack/developer-roadmap-chinese: 2018 å¹´æˆç‚º Web é–‹ç™¼äººå“¡çš„è·¯ç·šåœ– è™½ç„¶ä¸æ˜¯å¾ˆå…¨ï¼Œä½†ç»†èŠ‚ä¸é”™ã€‚ å‰ç«¯è·¯çº¿å›¾ åç«¯è·¯çº¿å›¾ DevOPsè·¯çº¿å›¾ æŠ€æœ¯æ ˆçš„ä¼˜åŒ–ä¹‹å‰æˆ‘ä»¬åœ¨åˆ†æ Java æ•°æ®çš„æ—¶å€™ï¼Œå‘ç°ä¸€ä¸ªæœ‰æ„æ€çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯ Java çš„æŠ€æœ¯æ ˆå¯ä»¥åŒæ—¶è¦†ç›–ä¸¤ä¸ªçƒ­é—¨èŒä½ â€”â€” Java å’Œ Androidï¼Œè¿™è®©æˆ‘ä»¬çš„æ±‚èŒç«äº‰åŠ›ä¸€ä¸‹ç¿»äº†ä¸€å€ã€‚é‚£ä¹ˆåœ¨å…¶ä»–çš„è¯­è¨€å’Œå²—ä½ä¸Šè¿˜å­˜ä¸å­˜åœ¨ç±»ä¼¼çš„æƒ…å†µå‘¢ï¼Ÿ å…¶å®æ˜¯æœ‰çš„ï¼Œæ¯”å¦‚å‰ç«¯å²—ä½å°±æ˜¯ä¸€ä¸ªéå¸¸æœ‰æ½œåŠ›çš„ä¾‹å­ï¼Œå®ƒçš„åç«¯è§£å†³æ–¹æ¡ˆ NodeJS æ­£åœ¨æ—¥ç›Šæµè¡Œ ã€‚åœ¨æˆ‘å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œäº’è”ç½‘æ‹›è˜å¤§ç«™ æ‹‰å‹¾ç½‘ ä¸ŠåŒ—äº¬çš„ NodeJS èŒä½æ•°æ˜¯ 181ï¼Œä¸Šæµ·æ˜¯ 114ï¼Œæ·±åœ³æ˜¯ 65 ã€‚æ‰€ä»¥å­¦å®Œå‰ç«¯çŸ¥è¯†å†è¡¥ä¸€ä¸‹ NodeJS çš„æ”¶ç›Šæ˜¯ä¸é”™çš„ã€‚ ä½†è¿™ä¸ªæŠ€æœ¯æ ˆå…¶å®è¿˜å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œå› ä¸ºä¸€ä¸ªå¶ç„¶çš„åŸå› ï¼Œæˆ‘ç»Ÿè®¡äº†ä¸€ä¸‹ PHP å²—ä½å’Œå‰ç«¯å²—ä½æ‹›è˜å¯äº‹é‡Œè¾¹å‡ºç°çš„æŠ€æœ¯å…³é”®è¯ï¼Œå‘ç°å…¶é‡åˆåº¦ç«Ÿç„¶é«˜äº60%ã€‚å…·ä½“çš„æŠ€æœ¯å…³é”®è¯å’Œçƒ­åº¦è§è¿™é‡Œ ã€ŠPHP&amp;å‰ç«¯å²—ï¼ˆ1~3å¹´ï¼‰æ ¸å¿ƒæŠ€æœ¯ç‚¹åˆ†ææŠ¥å‘Šã€‹ å›å¤´ä¸€æƒ³å…¶å®ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œæ¯•ç«Ÿæ‹› PHP æ˜¯æ¥åšç½‘ç«™çš„ï¼ŒHTML CSS JS æ€»å¾—ä¼šä¸€äº›æ‰è¡Œã€‚è¿™æ„å‘³ç€PHPçš„åŒå­¦åªéœ€è¦è¡¥ä¸Šéƒ¨åˆ†å‰ç«¯çŸ¥è¯†ï¼Œæ¯”å¦‚ä¸»æµæ¡†æ¶ React / Vue / Angular å’Œ SPA å¼€å‘å°±å¯ä»¥åŒæ—¶åº”è˜ PHP å’Œ å‰ç«¯ èŒä½ã€‚ è¿™ä¼šæœ‰å¤šå¤§çš„ç«äº‰åŠ›å‘¢ï¼Ÿå‰ç«¯æ‹›è˜å¯äº‹é‡Œè¾¹ï¼Œæœ‰è¶…è¿‡ååˆ†ä¹‹ä¸€çš„ä¼ä¸šæåŠäº†PHPã€‚è¿™è¿˜æ²¡å®Œï¼ŒReact æœ‰ä¸€ä¸ªæ··åˆåº”ç”¨è§£å†³æ–¹æ¡ˆï¼Œå«åš React Nativeï¼Œå¯ä»¥ç›´æ¥ç”¨ React æ ˆæ¥å¼€å‘æ‰‹æœºAPPã€‚è¿™ä¸ªæŠ€æœ¯çš„éœ€æ±‚å¦‚ä½•å‘¢ï¼Ÿç°åœ¨æ‹‰å‹¾ç½‘ä¸ŠåŒ—äº¬çš„ React Native ç›¸å…³èŒä½æ•°æœ‰ 84 ã€‚ äºæ˜¯å‘¢ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹© PHP + React + React Native çš„æŠ€æœ¯æ ˆï¼Œä»…ä»…å¤šå­¦ä¹ ä¸€ç‚¹çŸ¥è¯†ï¼Œå¯ä»¥æŠ•é€’çš„å²—ä½å°±ä»åŸæ¥çš„ 364 å˜æˆäº† 364 + 373 + 84 ã€‚ è¿™å°±æ˜¯æŠ€æœ¯æ ˆä¼˜åŒ–çš„ç­–ç•¥ã€‚å…³äºè¿™ä¸ªæŠ€æœ¯æ ˆçš„ä¼˜åŒ–ç»“æ„ï¼Œå¯ä»¥çœ‹è¿™é‡Œ ã€Šæ–¹ç³–å…¨æ ˆå­¦ä¹ è·¯çº¿å›¾ã€‹ï¼Œè¿™ä¸ªæ ˆè¿˜é¡ºä¾¿æŠŠåŒºå—é“¾åº”ç”¨å¼€å‘ä¹Ÿè¦†ç›–äº†ã€‚å¤§å®¶å¯ä»¥ä¸¾ä¸€åä¸‰ï¼Œå»ä¼˜åŒ–è‡ªå·±é€‰ä¸­çš„æŠ€æœ¯æ ˆã€‚ ç®€å†çš„å†™ä½œä¸è¦æœ€åæ‰¾å·¥ä½œçš„æ—¶å€™å†æ¥å†™ç®€å†ã€‚ç°åœ¨å°±å¼€å§‹å†™ï¼Œå³ä½¿ä½ ä»€ä¹ˆéƒ½ä¸ä¼šã€‚è¿™æ ·ä½ æ‰ä¼šçœŸåˆ‡çš„æ„Ÿå—åˆ°ï¼Œè‡ªå·±çš„ç¼ºç‚¹å’ŒåŠ£åŠ¿ã€‚ç„¶åé€šè¿‡ä¸æ–­çš„å­¦ä¹ ï¼Œå¾€ç®€å†ä¸Šè¿½åŠ æ–°çš„å†…å®¹ï¼Œç›´åˆ°ä½ è‡ªå·±çœ‹èµ·æ¥è§‰å¾—æœ‰ç«äº‰åŠ›äº†ï¼Œç®€å†æ‰ç®—é˜¶æ®µæ€§å®Œæˆäº†ã€‚ å…³äºç®€å†çš„å†™ä½œæŠ€å·§å’Œå·¥å…·ï¼Œæˆ‘ä¹‹å‰å†™è¿‡ä¸€ç¯‡æ–‡ç« è¯¦ç»†è¯´æ˜ï¼Œå¯ä»¥ç‚¹è¿™é‡Œé˜…è¯» ã€Šå¦‚ä½•å†™å‡ºä¸€ä»½ä¸“ä¸šçš„æŠ€æœ¯ç®€å†ã€‹ ï¼ˆè¿™ç¯‡æ–‡ç« æœ¬èº«ä¾ç„¶æ˜¯å…è´¹çš„ï¼Œä¸ç”¨è´­ä¹°å°å†Œå°±èƒ½è¯»ï¼‰ å†™åœ¨æœ€å( ç”±äºVç«™ä¸ŠæŸäº›åŒå­¦çš„ç–‘æƒ‘ï¼Œè¿™é‡Œæˆ‘ä¹Ÿè¡¥å……ä¸€ä¸‹å§ã€‚å­¦å¥½åŸºç¡€çŸ¥è¯†æ˜¯å¿…é¡»çš„ï¼Œè¿™æ˜¯æœ€åŸºæœ¬çš„ï¼Œå¦‚æœè¿™äº›åœ°æ–¹ä½ éƒ½ä¸¢åˆ†äº†ï¼Œè¿™äº›æŠ€å·§å°±éƒ½ç™½è´¹äº† ) ( åˆ·é¢˜åº“æ˜¯é¢è¯•å¿…é¡»çš„ï¼Œä½†åªåˆ·é¢˜åº“å°±èˆæœ¬é€æœ«äº†ï¼Œå®è·µé©±åŠ¨çš„å­¦ä¹ ä¼šè®©ä½ å¯¹åŸºç¡€çš„ç†è§£æ›´æ·±å…¥ï¼Œè™½ç„¶è¾›è‹¦ç‚¹ã€‚é¡ºä¾¿poä¸€ä¸ªé¢˜åº“ç½‘ç«™ [nowcoder]https://www.nowcoder.com/ ) ä¸çŸ¥ä¸è§‰å·²ç»å†™äº†è¿™ä¹ˆå¤šäº†ï¼Œå…¶å®è¿˜æœ‰ä¸€äº›å†…å®¹æƒ³è¯´ï¼Œä½†æš‚æ—¶å°±ä¸å†™åˆ°è¿™é‡Œäº†ã€‚ ç­‰ä»¥åæœ‰ç©ºæˆ‘å†æ•´ç†ä¸€ä¸ªå°å†Œå­å§ã€‚æˆ‘æŠŠæ–‡ç« ä¹ŸåŒæ—¶å‘å¸ƒåˆ°äº† GitHubï¼Œä»¥åçš„æ›´æ–°ä¼šé€šè¿‡ GitHub è¿›è¡Œï¼Œæ¬¢è¿ watch å’Œ star ã€‚https://github.com/easychen/career-guide-for-cs-graduate PSï¼šå¦‚æœä½ è¿˜ä¸çŸ¥é“æ€ä¹ˆç”¨ GitHubï¼Œé‚£ä¹ˆèµ¶ç´§å­¦å­¦å§ï¼Œè¿™å¯æ˜¯ç¨‹åºå‘˜çš„å¿…å¤‡ï¼ˆäº¤å‹ï¼‰å·¥å…·å“¦ã€‚","categories":[],"tags":[{"name":"Interview","slug":"Interview","permalink":"https://edward7zhang.github.io/tags/Interview/"},{"name":"Inspire","slug":"Inspire","permalink":"https://edward7zhang.github.io/tags/Inspire/"}]},{"title":"Androidç½‘ç»œç¼–ç¨‹é¢è¯•é¢˜é›†","slug":"Androidç½‘ç»œç¼–ç¨‹é¢è¯•é¢˜é›†","date":"2018-04-17T01:07:14.000Z","updated":"2018-04-17T01:39:28.610Z","comments":true,"path":"2018/04/17/Androidç½‘ç»œç¼–ç¨‹é¢è¯•é¢˜é›†/","link":"","permalink":"https://edward7zhang.github.io/2018/04/17/Androidç½‘ç»œç¼–ç¨‹é¢è¯•é¢˜é›†/","excerpt":"","text":"ä¸€æ¬¡æ¬¡çš„æŒ‚äºä¸€é¢è®©æˆ‘ç­‹ç–²åŠ›ç«­â€¦æ„è¯†åˆ°è‡ªå·±å­˜åœ¨çœ¼é«˜æ‰‹ä½çš„çŠ¶æ€â€¦å‡†å¤‡é‡æ–°ä¸Šè·¯å¤¯å®åŸºç¡€æœ¬ç‰‡æ–‡ç« Fork from android-interview ç½‘ç»œç¼–ç¨‹TCPä¸UDPæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ TCPé¢å‘è¿æ¥ï¼ˆå¦‚æ‰“ç”µè¯è¦å…ˆæ‹¨å·å»ºç«‹è¿æ¥ï¼‰;UDPæ˜¯æ— è¿æ¥çš„ï¼Œå³å‘é€æ•°æ®ä¹‹å‰ä¸éœ€è¦å»ºç«‹è¿æ¥ TCPæä¾›å¯é çš„æœåŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡TCPè¿æ¥ä¼ é€çš„æ•°æ®ï¼Œæ— å·®é”™ï¼Œä¸ä¸¢å¤±ï¼Œä¸é‡å¤ï¼Œä¸”æŒ‰åºåˆ°è¾¾;UDPå°½æœ€å¤§åŠªåŠ›äº¤ä»˜ï¼Œå³ä¸ä¿è¯å¯é äº¤ä»˜ TCPé¢å‘å­—èŠ‚æµï¼Œå®é™…ä¸Šæ˜¯TCPæŠŠæ•°æ®çœ‹æˆä¸€è¿ä¸²æ— ç»“æ„çš„å­—èŠ‚æµ;UDPæ˜¯é¢å‘æŠ¥æ–‡çš„UDPæ²¡æœ‰æ‹¥å¡æ§åˆ¶ï¼Œå› æ­¤ç½‘ç»œå‡ºç°æ‹¥å¡ä¸ä¼šä½¿æºä¸»æœºçš„å‘é€é€Ÿç‡é™ä½ï¼ˆå¯¹å®æ—¶åº”ç”¨å¾ˆæœ‰ç”¨ï¼Œå¦‚IPç”µè¯ï¼Œå®æ—¶è§†é¢‘ä¼šè®®ç­‰ï¼‰ æ¯ä¸€æ¡TCPè¿æ¥åªèƒ½æ˜¯ç‚¹åˆ°ç‚¹çš„;UDPæ”¯æŒä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼Œå¤šå¯¹ä¸€å’Œå¤šå¯¹å¤šçš„äº¤äº’é€šä¿¡ TCPé¦–éƒ¨å¼€é”€20å­—èŠ‚;UDPçš„é¦–éƒ¨å¼€é”€å°ï¼Œåªæœ‰8ä¸ªå­—èŠ‚ TCPçš„é€»è¾‘é€šä¿¡ä¿¡é“æ˜¯å…¨åŒå·¥çš„å¯é ä¿¡é“ï¼ŒUDPåˆ™æ˜¯ä¸å¯é ä¿¡é“ ç®€å•ä»‹ç»ä¸€ä¸‹TCPä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡åˆ†æ‰‹è¿‡ç¨‹ï¼ŸTCPç”¨ä¸‰æ¬¡æ¡æ‰‹ï¼ˆthree-way handshakeï¼‰è¿‡ç¨‹åˆ›å»ºä¸€ä¸ªè¿æ¥ï¼Œä½¿ç”¨å››æ¬¡åˆ†æ‰‹å…³é—­ä¸€ä¸ªè¿æ¥ã€‚ ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡åˆ†æ‰‹çš„æµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š ä¸‰æ¬¡æ¡æ‰‹ ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå»ºç«‹è¿æ¥ã€‚å®¢æˆ·ç«¯å‘é€è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µï¼Œå°†SYNä½ç½®ä¸º1ï¼ŒSequence Numberä¸ºxï¼›ç„¶åï¼Œå®¢æˆ·ç«¯è¿›å…¥SYN_SENDçŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨çš„ç¡®è®¤ï¼› ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ°SYNæŠ¥æ–‡æ®µã€‚æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯çš„SYNæŠ¥æ–‡æ®µï¼Œéœ€è¦å¯¹è¿™ä¸ªSYNæŠ¥æ–‡æ®µè¿›è¡Œç¡®è®¤ï¼Œè®¾ç½®Acknowledgment Numberä¸ºx+1(Sequence Number+1)ï¼›åŒæ—¶ï¼Œè‡ªå·±è‡ªå·±è¿˜è¦å‘é€SYNè¯·æ±‚ä¿¡æ¯ï¼Œå°†SYNä½ç½®ä¸º1ï¼ŒSequence Numberä¸ºyï¼›æœåŠ¡å™¨ç«¯å°†ä¸Šè¿°æ‰€æœ‰ä¿¡æ¯æ”¾åˆ°ä¸€ä¸ªæŠ¥æ–‡æ®µï¼ˆå³SYN+ACKæŠ¥æ–‡æ®µï¼‰ä¸­ï¼Œä¸€å¹¶å‘é€ç»™å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶æœåŠ¡å™¨è¿›å…¥SYN_RECVçŠ¶æ€ï¼› ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„SYN+ACKæŠ¥æ–‡æ®µã€‚ç„¶åå°†Acknowledgment Numberè®¾ç½®ä¸ºy+1ï¼Œå‘æœåŠ¡å™¨å‘é€ACKæŠ¥æ–‡æ®µï¼Œè¿™ä¸ªæŠ¥æ–‡æ®µå‘é€å®Œæ¯•ä»¥åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯éƒ½è¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œå®ŒæˆTCPä¸‰æ¬¡æ¡æ‰‹ã€‚å®Œæˆäº†ä¸‰æ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å°±å¯ä»¥å¼€å§‹ä¼ é€æ•°æ®ã€‚ä»¥ä¸Šå°±æ˜¯TCPä¸‰æ¬¡æ¡æ‰‹çš„æ€»ä½“ä»‹ç»ã€‚ å››æ¬¡åˆ†æ‰‹ ç¬¬ä¸€æ¬¡åˆ†æ‰‹ï¼šä¸»æœº1ï¼ˆå¯ä»¥ä½¿å®¢æˆ·ç«¯ï¼Œä¹Ÿå¯ä»¥æ˜¯æœåŠ¡å™¨ç«¯ï¼‰ï¼Œè®¾ç½®Sequence Numberå’ŒAcknowledgment Numberï¼Œå‘ä¸»æœº2å‘é€ä¸€ä¸ªFINæŠ¥æ–‡æ®µï¼›æ­¤æ—¶ï¼Œä¸»æœº1è¿›å…¥FIN_WAIT_1çŠ¶æ€ï¼›è¿™è¡¨ç¤ºä¸»æœº1æ²¡æœ‰æ•°æ®è¦å‘é€ç»™ä¸»æœº2äº†ï¼› ç¬¬äºŒæ¬¡åˆ†æ‰‹ï¼šä¸»æœº2æ”¶åˆ°äº†ä¸»æœº1å‘é€çš„FINæŠ¥æ–‡æ®µï¼Œå‘ä¸»æœº1å›ä¸€ä¸ªACKæŠ¥æ–‡æ®µï¼ŒAcknowledgment Numberä¸ºSequence NumberåŠ 1ï¼›ä¸»æœº1è¿›å…¥FIN_WAIT_2çŠ¶æ€ï¼›ä¸»æœº2å‘Šè¯‰ä¸»æœº1ï¼Œæˆ‘â€œåŒæ„â€ä½ çš„å…³é—­è¯·æ±‚ï¼› ç¬¬ä¸‰æ¬¡åˆ†æ‰‹ï¼šä¸»æœº2å‘ä¸»æœº1å‘é€FINæŠ¥æ–‡æ®µï¼Œè¯·æ±‚å…³é—­è¿æ¥ï¼ŒåŒæ—¶ä¸»æœº2è¿›å…¥LAST_ACKçŠ¶æ€ï¼› ç¬¬å››æ¬¡åˆ†æ‰‹ï¼šä¸»æœº1æ”¶åˆ°ä¸»æœº2å‘é€çš„FINæŠ¥æ–‡æ®µï¼Œå‘ä¸»æœº2å‘é€ACKæŠ¥æ–‡æ®µï¼Œç„¶åä¸»æœº1è¿›å…¥TIME_WAITçŠ¶æ€ï¼›ä¸»æœº2æ”¶åˆ°ä¸»æœº1çš„ACKæŠ¥æ–‡æ®µä»¥åï¼Œå°±å…³é—­è¿æ¥ï¼›æ­¤æ—¶ï¼Œä¸»æœº1ç­‰å¾…2MSLåä¾ç„¶æ²¡æœ‰æ”¶åˆ°å›å¤ï¼Œåˆ™è¯æ˜Serverç«¯å·²æ­£å¸¸å…³é—­ï¼Œé‚£å¥½ï¼Œä¸»æœº1ä¹Ÿå¯ä»¥å…³é—­è¿æ¥äº†ã€‚ ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡åˆ†æ‰‹ä¹Ÿæ˜¯ä¸ªè€ç”Ÿå¸¸è°ˆçš„æ¦‚å¿µï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­è¯´æ˜ä¸€ä¸‹ã€‚ ä¸‰æ¬¡æ¡æ‰‹ ä¾‹å¦‚ä½ å°æ—¶å€™å‡ºå»ç©ï¼Œç»å¸¸ç©å¿˜äº†å›å®¶åƒé¥­ã€‚ä½ å¦ˆå¦ˆä¹Ÿç»å¸¸è¿‡æ¥å–Šä½ ã€‚å¦‚æœä½ æ²¡æœ‰èµ°è¿œï¼Œåœ¨é—¨å£çš„å°åœŸå †ä¸Šç©æ³¥å·´ï¼Œä½ å¦ˆå¦ˆä¼šå–Šï¼šâ€å°æ–°ï¼Œå›å®¶åƒé¥­äº†â€ã€‚ä½ å¬åˆ°åä¼šå›åº”ï¼šâ€çŸ¥é“äº†ï¼Œä¸€ä¼šå°±å›å»â€ã€‚å¦ˆå¦ˆå¬åˆ°ä½ çš„å›åº”ååˆè¯´ï¼šâ€å¿«ç‚¹å›æ¥ï¼Œé¥­è¦å‡‰äº†â€ã€‚è¿™æ ·ä½ å¦ˆå¦ˆå’Œä½ å°±å®Œæˆäº†ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ã€‚ğŸ˜è¯´åˆ°è¿™é‡Œä½ ä¹Ÿå¯ä»¥ç†è§£ä¸‰æ¬¡æ¡æ‰‹çš„å¿…è¦æ€§ï¼Œå°‘äº†å…¶ä¸­ä¸€ä¸ªç¯èŠ‚ï¼Œå¦ä¸€æ–¹å°±ä¼šé™·å…¥ç­‰å¾…ä¹‹ä¸­ã€‚ ä¸‰æ¬¡æ¡æ‰‹çš„ç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢å·²å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µçªç„¶åˆä¼ é€åˆ°äº†æœåŠ¡ç«¯ï¼Œå› è€Œäº§ç”Ÿé”™è¯¯. å››æ¬¡åˆ†æ‰‹ ä¾‹å¦‚å¶åƒè¨€æƒ…å‰§å¹²å‡€åˆ©è½çš„åˆ†æ‰‹ï¼Œå¥³ä¸»å¯¹ç”·ä¸»è¯´ï¼šæˆ‘ä»¬åˆ†æ‰‹å§ğŸ™„ï¼Œç”·ä¸»è¯´ï¼šåˆ†å°±åˆ†å§ğŸ˜°ã€‚å¥³ä¸»è¯´ï¼šä½ æœç„¶æ˜¯ä¸çˆ±æˆ‘äº†ï¼Œä½ åªçŸ¥é“è®©æˆ‘å¤šå–çƒ­æ°´ğŸ™„ã€‚ç”·ä¸»è¯´ï¼šäº‹åˆ°å¦‚ä»Šä¹Ÿæ²¡ä»€ä¹ˆå¥½è¯´çš„äº†ï¼Œç¥ä½ å¹¸ç¦ğŸ™ƒã€‚å››æ¬¡åˆ†æ‰‹å®Œæˆã€‚è¯´åˆ°è¿™é‡Œä½ å¯ä»¥ç†è§£äº†å››æ¬¡åˆ†æ‰‹çš„å¿…è¦æ€§ï¼Œç¬¬ä¸€æ¬¡æ˜¯å¥³æ–¹ï¼ˆå®¢æˆ·ç«¯ï¼‰æå‡ºåˆ†æ‰‹ï¼Œç¬¬äºŒæ¬¡æ˜¯ç”·ä¸»ï¼ˆæœåŠ¡ç«¯ï¼‰åŒæ„å¥³ä¸»åˆ†æ‰‹ï¼Œç¬¬ä¸‰æ¬¡æ˜¯å¥³ä¸»ç¡®å®šç”·ä¸»ä¸å†çˆ±å¥¹ï¼Œä¹ŸåŒæ„ç”·ä¸»åˆ†æ‰‹ã€‚ç¬¬å››æ¬¡ä¸¤äººå½»åº•æ‹œæ‹œï¼ˆæ–­å¼€è¿æ¥ï¼‰ã€‚ å› ä¸ºTCPæ˜¯å…¨åŒå·¥æ¨¡å¼ï¼Œæ‰€ä»¥å››æ¬¡åˆ†æ‰‹çš„ç›®çš„å°±æ˜¯ä¸ºäº†å¯é åœ°å…³é—­è¿æ¥ã€‚ TCPå¦‚ä½•ä¿è¯æ•°æ®ä¼ è¾“çš„å¯é æ€§ï¼Ÿ ç¡®è®¤å’Œé‡ä¼ ï¼šæ¥æ”¶æ–¹æ”¶åˆ°æŠ¥æ–‡åå°±ä¼šè¿›è¡Œç¡®è®¤ï¼Œå‘é€æ–¹ä¸€æ®µæ—¶é—´æ²¡æœ‰æ”¶åˆ°ç¡®è®¤å°±ä¼šé‡ä¼ ã€‚ æ•°æ®æ ¡éªŒã€‚ æ•°æ®åˆç†åˆ†ç‰‡ä¸æ’åºï¼ŒTCPä¼šå¯¹æ•°æ®è¿›è¡Œåˆ†ç‰‡ï¼Œæ¥æ”¶æ–¹ä¼šç¼“å­˜ä¸ºæŒ‰åºåˆ°è¾¾çš„æ•°æ®ï¼Œé‡æ–°æ’åºåå†æäº¤ç»™åº”ç”¨å±‚ã€‚ æµç¨‹æ§åˆ¶ï¼šå½“æ¥æ”¶æ–¹æ¥ä¸åŠæ¥æ”¶å‘é€çš„æ•°æ®æ—¶ï¼Œåˆ™ä¼šæç¤ºå‘é€æ–¹é™ä½å‘é€çš„é€Ÿåº¦ï¼Œé˜²æ­¢åŒ…ä¸¢å¤±ã€‚ æ‹¥å¡æ§åˆ¶ï¼šå½“ç½‘ç»œå‘ç”Ÿæ‹¥å¡æ—¶ï¼Œå‡å°‘æ•°æ®çš„å‘é€ã€‚ HTTPä¸HTTPSæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ HTTPSæ˜¯ä¸€ç§é€šè¿‡è®¡ç®—æœºç½‘ç»œè¿›è¡Œå®‰å…¨é€šä¿¡çš„ä¼ è¾“åè®®ã€‚HTTPSç»ç”±HTTPè¿›è¡Œé€šä¿¡ï¼Œä½†åˆ©ç”¨SSL/TLSæ¥åŠ å¯†æ•°æ®åŒ…ã€‚HTTPSå¼€å‘çš„ä¸»è¦ç›®çš„ï¼Œæ˜¯æä¾›å¯¹ç½‘ç«™æœåŠ¡å™¨çš„èº«ä»½è®¤è¯ï¼Œä¿æŠ¤äº¤æ¢æ•°æ®çš„éšç§ä¸å®Œæ•´æ€§ã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯ä»¥å¾ˆæ˜æ˜¾çš„çœ‹å‡ºä¸¤ä¸ªçš„åŒºåˆ«ï¼š æ³¨ï¼šTLSæ˜¯SSLçš„å‡çº§æ›¿ä»£ç‰ˆï¼Œå…·ä½“å‘å±•å†å²å¯ä»¥å‚è€ƒä¼ è¾“å±‚å®‰å…¨æ€§åè®®ã€‚ HTTPä¸HTTPSåœ¨å†™æ³•ä¸Šçš„åŒºåˆ«ä¹Ÿæ˜¯å‰ç¼€çš„ä¸åŒï¼Œå®¢æˆ·ç«¯å¤„ç†çš„æ–¹å¼ä¹Ÿä¸åŒï¼Œå…·ä½“è¯´æ¥ï¼š å¦‚æœURLçš„åè®®æ˜¯HTTPï¼Œåˆ™å®¢æˆ·ç«¯ä¼šæ‰“å¼€ä¸€æ¡åˆ°æœåŠ¡ç«¯ç«¯å£80ï¼ˆé»˜è®¤ï¼‰çš„è¿æ¥ï¼Œå¹¶å‘å…¶å‘é€è€çš„HTTPè¯·æ±‚ã€‚ å¦‚æœURLçš„åè®®æ˜¯HTTPSï¼Œåˆ™å®¢æˆ·ç«¯ä¼šæ‰“å¼€ä¸€æ¡åˆ°æœåŠ¡ç«¯ç«¯å£443ï¼ˆé»˜è®¤ï¼‰çš„è¿æ¥ï¼Œç„¶åä¸æœåŠ¡å™¨æ¡æ‰‹ï¼Œä»¥äºŒè¿›åˆ¶æ ¼å¼ä¸æœåŠ¡å™¨äº¤æ¢ä¸€äº›SSLçš„å®‰å…¨å‚æ•°ï¼Œé™„ä¸ŠåŠ å¯†çš„HTTPè¯·æ±‚ã€‚ æ‰€ä»¥ä½ å¯ä»¥çœ‹åˆ°ï¼ŒHTTPSæ¯”HTTPå¤šäº†ä¸€å±‚ä¸SSLçš„è¿æ¥ï¼Œè¿™ä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯SSLæ¡æ‰‹çš„è¿‡ç¨‹ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸»è¦å®Œæˆä»¥ä¸‹å·¥ä½œï¼š äº¤æ¢åè®®ç‰ˆæœ¬å· é€‰æ‹©ä¸€ä¸ªä¸¤ç«¯éƒ½äº†è§£çš„å¯†ç  å¯¹ä¸¤ç«¯çš„èº«ä»½è¿›è¡Œè®¤è¯ ç”Ÿæˆä¸´æ—¶çš„ä¼šè¯å¯†é’¥ï¼Œä»¥ä¾¿åŠ å¯†ä¿¡é“ã€‚ SSLæ¡æ‰‹æ˜¯ä¸€ä¸ªç›¸å¯¹æ¯”è¾ƒå¤æ‚çš„è¿‡ç¨‹ï¼Œæ›´å¤šå…³äºSSLæ¡æ‰‹çš„è¿‡ç¨‹ç»†èŠ‚å¯ä»¥å‚è€ƒTLS/SSLæ¡æ‰‹è¿‡ç¨‹ SSL/TSLçš„å¸¸è§å¼€æºå®ç°æ˜¯OpenSSLï¼ŒOpenSSLæ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç çš„è½¯ä»¶åº“åŒ…ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨è¿™ä¸ªåŒ…æ¥è¿›è¡Œå®‰å…¨é€šä¿¡ï¼Œé¿å…çªƒå¬ï¼ŒåŒæ—¶ç¡®è®¤å¦ä¸€ç«¯è¿æ¥è€…çš„èº«ä»½ã€‚è¿™ä¸ªåŒ…å¹¿æ³›è¢«åº”ç”¨åœ¨äº’è”ç½‘çš„ç½‘é¡µæœåŠ¡å™¨ä¸Šã€‚æ›´å¤šæºäºOpenSSLçš„æŠ€æœ¯ç»†èŠ‚å¯ä»¥å‚è€ƒOpenSSLã€‚ è°ˆä¸€è°ˆå¯¹HTTPç¼“å­˜çš„ç†è§£ï¼ŸHTTPçš„ç¼“å­˜æœºåˆ¶ä¹Ÿæ˜¯ä¾èµ–äºè¯·æ±‚å’Œå“åº”headeré‡Œçš„å‚æ•°ç±»å®ç°çš„ï¼Œæœ€ç»ˆå“åº”å¼ä»ç¼“å­˜ä¸­å»ï¼Œè¿˜æ˜¯ä»æœåŠ¡ç«¯é‡æ–°æ‹‰å–ï¼ŒHTTPçš„ç¼“å­˜æœºåˆ¶çš„æµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š ğŸ‘‰ ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹å¤§å›¾ HTTPçš„ç¼“å­˜å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼š å¼ºåˆ¶ç¼“å­˜ï¼šéœ€è¦æœåŠ¡ç«¯å‚ä¸åˆ¤æ–­æ˜¯å¦ç»§ç»­ä½¿ç”¨ç¼“å­˜ï¼Œå½“å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡è¯·æ±‚æ•°æ®æ˜¯ï¼ŒæœåŠ¡ç«¯è¿”å›äº†ç¼“å­˜çš„è¿‡æœŸæ—¶é—´ï¼ˆExpiresä¸Cache-Controlï¼‰ï¼Œæ²¡æœ‰è¿‡æœŸå°±å¯ä»¥ç»§ç»­ä½¿ç”¨ç¼“å­˜ï¼Œå¦åˆ™åˆ™ä¸é€‚ç”¨ï¼Œæ— éœ€å†å‘æœåŠ¡ç«¯è¯¢é—®ã€‚ å¯¹æ¯”ç¼“å­˜ï¼šéœ€è¦æœåŠ¡ç«¯å‚ä¸åˆ¤æ–­æ˜¯å¦ç»§ç»­ä½¿ç”¨ç¼“å­˜ï¼Œå½“å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡è¯·æ±‚æ•°æ®æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šå°†ç¼“å­˜æ ‡è¯†ï¼ˆLast-Modified/If-Modified-Sinceä¸Etag/If-None-Matchï¼‰ä¸æ•°æ®ä¸€èµ·è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å°†ä¸¤è€…éƒ½å¤‡ä»½åˆ°ç¼“å­˜ä¸­ ï¼Œå†æ¬¡è¯·æ±‚æ•°æ®æ—¶ï¼Œå®¢æˆ·ç«¯å°†ä¸Šæ¬¡å¤‡ä»½çš„ç¼“å­˜æ ‡è¯†å‘é€ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯æ ¹æ®ç¼“å­˜æ ‡è¯†è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœè¿”å›304ï¼Œåˆ™è¡¨ç¤ºé€šçŸ¥å®¢æˆ·ç«¯å¯ä»¥ç»§ç»­ä½¿ç”¨ç¼“å­˜ã€‚ å¼ºåˆ¶ç¼“å­˜ä¼˜å…ˆäºå¯¹æ¯”ç¼“å­˜ã€‚ ä¸Šé¢æåˆ°å¼ºåˆ¶ç¼“å­˜ä½¿ç”¨çš„çš„ä¸¤ä¸ªæ ‡è¯†ï¼š Expiresï¼šExpiresçš„å€¼ä¸ºæœåŠ¡ç«¯è¿”å›çš„åˆ°æœŸæ—¶é—´ï¼Œå³ä¸‹ä¸€æ¬¡è¯·æ±‚æ—¶ï¼Œè¯·æ±‚æ—¶é—´å°äºæœåŠ¡ç«¯è¿”å›çš„åˆ°æœŸæ—¶é—´ï¼Œç›´æ¥ä½¿ç”¨ç¼“å­˜æ•°æ®ã€‚åˆ°æœŸæ—¶é—´æ˜¯æœåŠ¡ç«¯ç”Ÿæˆçš„ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„æ—¶é—´å¯èƒ½æœ‰è¯¯å·®ã€‚ Cache-Controlï¼šExpiresæœ‰ä¸ªæ—¶é—´æ ¡éªŒçš„é—®é¢˜ï¼Œæ‰€æœ‰HTTP1.1é‡‡ç”¨Cache-Controlæ›¿ä»£Expiresã€‚ Cache-Controlçš„å–å€¼æœ‰ä»¥ä¸‹å‡ ç§ï¼š private: å®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜ã€‚ public: å®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨éƒ½å¯ç¼“å­˜ã€‚ max-age=xxx: ç¼“å­˜çš„å†…å®¹å°†åœ¨ xxx ç§’åå¤±æ•ˆ no-cache: éœ€è¦ä½¿ç”¨å¯¹æ¯”ç¼“å­˜æ¥éªŒè¯ç¼“å­˜æ•°æ®ã€‚ no-store: æ‰€æœ‰å†…å®¹éƒ½ä¸ä¼šç¼“å­˜ï¼Œå¼ºåˆ¶ç¼“å­˜ï¼Œå¯¹æ¯”ç¼“å­˜éƒ½ä¸ä¼šè§¦å‘ã€‚ æˆ‘ä»¬å†æ¥çœ‹çœ‹å¯¹æ¯”ç¼“å­˜çš„ä¸¤ä¸ªæ ‡è¯†ï¼š Last-Modified/If-Modified-Since Last-Modified è¡¨ç¤ºèµ„æºä¸Šæ¬¡ä¿®æ”¹çš„æ—¶é—´ã€‚ å½“å®¢æˆ·ç«¯å‘é€ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶ï¼ŒæœåŠ¡ç«¯è¿”å›èµ„æºä¸Šæ¬¡ä¿®æ”¹çš„æ—¶é—´ï¼š 1Last-Modified: Tue, 12 Jan 2016 09:31:27 GMT å®¢æˆ·ç«¯å†æ¬¡å‘é€ï¼Œä¼šåœ¨headeré‡Œæºå¸¦If-Modified-Sinceã€‚å°†ä¸Šæ¬¡æœåŠ¡ç«¯è¿”å›çš„èµ„æºæ—¶é—´ä¸Šä¼ ç»™æœåŠ¡ç«¯ã€‚ 1If-Modified-Since: Tue, 12 Jan 2016 09:31:27 GMT æœåŠ¡ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„èµ„æºä¿®æ”¹æ—¶é—´ï¼Œä¸è‡ªå·±å½“å‰çš„èµ„æºä¿®æ”¹æ—¶é—´è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœè‡ªå·±çš„èµ„æºä¿®æ”¹æ—¶é—´å¤§äºå®¢æˆ·ç«¯å‘æ¥çš„èµ„æºä¿®æ”¹æ—¶é—´ï¼Œåˆ™è¯´æ˜èµ„æºåšè¿‡ä¿®æ”¹ï¼Œåˆ™è¿”å›200è¡¨ç¤ºéœ€è¦é‡æ–°è¯·æ±‚èµ„æºï¼Œå¦åˆ™è¿”å›304è¡¨ç¤ºèµ„æºæ²¡æœ‰è¢«ä¿®æ”¹ï¼Œå¯ä»¥ç»§ç»­ä½¿ç”¨ç¼“å­˜ã€‚ ä¸Šé¢æ˜¯ä¸€ç§æ—¶é—´æˆ³æ ‡è®°èµ„æºæ˜¯å¦ä¿®æ”¹çš„æ–¹æ³•ï¼Œè¿˜æœ‰ä¸€ç§èµ„æºæ ‡è¯†ç ETagçš„æ–¹å¼æ¥æ ‡è®°æ˜¯å¦ä¿®æ”¹ï¼Œå¦‚æœæ ‡è¯†ç å‘ç”Ÿæ”¹å˜ï¼Œåˆ™è¯´æ˜èµ„æºå·²ç»è¢«ä¿®æ”¹ï¼ŒETagä¼˜å…ˆçº§é«˜äºLast-Modifiedã€‚ Etag/If-None-Match ETagæ˜¯èµ„æºæ–‡ä»¶çš„ä¸€ç§æ ‡è¯†ç ï¼Œå½“å®¢æˆ·ç«¯å‘é€ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šè¿”å›å½“å‰èµ„æºçš„æ ‡è¯†ç ï¼š 1ETag: \"5694c7ef-24dc\" å®¢æˆ·ç«¯å†æ¬¡å‘é€ï¼Œä¼šåœ¨headeré‡Œæºå¸¦ä¸Šæ¬¡æœåŠ¡ç«¯è¿”å›çš„èµ„æºæ ‡è¯†ç ï¼š 1If-None-Match:\"5694c7ef-24dc\" æœåŠ¡ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„èµ„æºæ ‡è¯†ç ï¼Œåˆ™ä¼šä¸è‡ªå·±å½“å‰çš„èµ„æºå—è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœä¸åŒï¼Œåˆ™è¯´æ˜èµ„æºå·²ç»è¢«ä¿®æ”¹ï¼Œåˆ™è¿”å›200ï¼Œå¦‚æœç›¸åŒåˆ™è¯´æ˜èµ„æºæ²¡æœ‰è¢«ä¿®æ”¹ï¼Œè¿”å›304ï¼Œå®¢æˆ·ç«¯å¯ä»¥ç»§ç»­ä½¿ç”¨ç¼“å­˜ã€‚ HTTPSæ˜¯å¦‚ä½•ä¿è¯å®‰å…¨çš„ï¼Œè¯ä¹¦å¦‚ä½•æ ¡éªŒï¼ŸHTTPå¦‚ä½•å®ç°é•¿è¿æ¥ï¼Ÿ","categories":[],"tags":[{"name":"Android","slug":"Android","permalink":"https://edward7zhang.github.io/tags/Android/"},{"name":"Interview","slug":"Interview","permalink":"https://edward7zhang.github.io/tags/Interview/"}]},{"title":"HTTPåè®®å¤ä¹ ","slug":"HTTPåè®®","date":"2018-04-16T02:43:13.000Z","updated":"2018-04-16T13:58:56.825Z","comments":true,"path":"2018/04/16/HTTPåè®®/","link":"","permalink":"https://edward7zhang.github.io/2018/04/16/HTTPåè®®/","excerpt":"","text":"å¥‡è¿¹èˆ¬çš„è…¾è®¯ç¬”è¯•é€šè¿‡äº†ï¼Œæ˜¨å¤©ä¸‹åˆç»è¿‡äº†ä¸€é¢â€¦å‘ç°ä¹‹å‰ç€çœ¼äºAndroidä¸Javaçš„çŸ¥è¯†è€Œæ²¡æœ‰å¯¹è®¡ç®—æœºç½‘ç»œç³»ç»Ÿçš„å¤ä¹ â€¦å¯¼è‡´äº†è¿™æ¬¡é¢è¯•çš„æ»‘é“å¢â€¦æ‰€ä»¥æƒ³è¿›è¿™æ ·çš„ä¸€çº¿å¤§å‚åšä¸€ååˆæ ¼çš„ç¨‹åºå‘˜è¿˜æ˜¯è¦å…¨é¢å‘å±•â€¦ä¸èƒ½é¡¾æ­¤å¤±å½¼ Httpåè®® é»˜è®¤ç«¯å£ï¼š80 Httpåè®®çš„ä¸»è¦ç‰¹ç‚¹ æ”¯æŒå®¢æˆ·ï¼æœåŠ¡å™¨æ¨¡å¼ ç®€å•å¿«é€Ÿï¼šå®¢æˆ·å‘æœåŠ¡ç«¯è¯·æ±‚æœåŠ¡æ—¶ï¼Œåªéœ€ä¼ é€è¯·æ±‚æ–¹å¼å’Œè·¯å¾„ã€‚ çµæ´»ï¼šå…è®¸ä¼ è¾“ä»»æ„ç±»å‹çš„æ•°æ®å¯¹è±¡ã€‚ç”±Content-TypeåŠ ä»¥æ ‡è®°ã€‚ æ— è¿æ¥ï¼šæ¯æ¬¡å“åº”ä¸€ä¸ªè¯·æ±‚ï¼Œå“åº”å®Œæˆä»¥åå°±æ–­å¼€è¿æ¥ã€‚ æ— çŠ¶æ€ï¼šæœåŠ¡å™¨ä¸ä¿å­˜æµè§ˆå™¨çš„ä»»ä½•ä¿¡æ¯ã€‚æ¯æ¬¡æäº¤çš„è¯·æ±‚ä¹‹é—´æ²¡æœ‰å…³è”ã€‚ éæŒç»­æ€§å’ŒæŒç»­æ€§ HTTP1.0é»˜è®¤éæŒç»­æ€§ï¼›HTTP1.1é»˜è®¤æŒç»­æ€§ æŒç»­æ€§æµè§ˆå™¨å’ŒæœåŠ¡å™¨å»ºç«‹TCPè¿æ¥åï¼Œå¯ä»¥è¯·æ±‚å¤šä¸ªå¯¹è±¡ éæŒç»­æ€§æµè§ˆå™¨å’ŒæœåŠ¡å™¨å»ºç«‹TCPè¿æ¥åï¼Œåªèƒ½è¯·æ±‚ä¸€ä¸ªå¯¹è±¡ éæµæ°´çº¿å’Œæµæ°´çº¿ ç±»ä¼¼äºç»„æˆé‡Œé¢çš„æµæ°´æ“ä½œ æµæ°´çº¿ï¼šä¸å¿…ç­‰åˆ°æ”¶åˆ°æœåŠ¡å™¨çš„å›åº”å°±å‘é€ä¸‹ä¸€ä¸ªæŠ¥æ–‡ã€‚ éæµæ°´çº¿ï¼šå‘å‡ºä¸€ä¸ªæŠ¥æ–‡ï¼Œç­‰åˆ°å“åº”ï¼Œå†å‘ä¸‹ä¸€ä¸ªæŠ¥æ–‡ã€‚ç±»ä¼¼TCPã€‚ POSTå’ŒGETçš„åŒºåˆ« Postä¸€èˆ¬ç”¨äºæ›´æ–°æˆ–è€…æ·»åŠ èµ„æºä¿¡æ¯ Getä¸€èˆ¬ç”¨äºæŸ¥è¯¢æ“ä½œï¼Œè€Œä¸”åº”è¯¥æ˜¯å®‰å…¨å’Œå¹‚ç­‰çš„ Postæ›´åŠ å®‰å…¨ Getä¼šæŠŠè¯·æ±‚çš„ä¿¡æ¯æ”¾åˆ°URLçš„åé¢ Postä¼ è¾“é‡ä¸€èˆ¬æ— å¤§å°é™åˆ¶ Getä¸èƒ½å¤§äº2KB Postæ‰§è¡Œæ•ˆç‡ä½ Getæ‰§è¡Œæ•ˆç‡ç•¥é«˜ ä¸ºä»€ä¹ˆPOSTæ•ˆç‡ä½ï¼ŒGetæ•ˆç‡é«˜ Getå°†å‚æ•°æ‹¼æˆURL,æ”¾åˆ°headeræ¶ˆæ¯å¤´é‡Œä¼ é€’ Postç›´æ¥ä»¥é”®å€¼å¯¹çš„å½¢å¼æ”¾åˆ°æ¶ˆæ¯ä½“ä¸­ä¼ é€’ã€‚ ä½†ä¸¤è€…çš„æ•ˆç‡å·®è·å¾ˆå°å¾ˆå° Https ç«¯å£å·æ˜¯443 æ˜¯ç”±SSL+Httpåè®®æ„å»ºçš„å¯è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯çš„ç½‘ç»œåè®®ã€‚ Socket ä½¿ç”¨TCP å®¢æˆ·ç«¯ 1234567Socket socket = new Socket(&quot;ip&quot;, ç«¯å£);InputStream is = socket.getInputStream();DataInputStream dis = new DataInputStream(is);OutputStream os = socket.getOutputStream();DataInputStream dos = new DataOutputStream(os); æœåŠ¡å™¨ç«¯ 123ServerSocket serverSocket = new ServerSocket(ç«¯å£);Socket socket = serverSocket.accept();//è·å–æµçš„æ–¹å¼ä¸å®¢æˆ·ç«¯ä¸€æ · è¯»å–è¾“å…¥æµ 123456789byte[] buffer = new byte[1024]; do&#123; int count = is.read(buffer); if(count &lt;= 0)&#123; break; &#125; else&#123; // å¯¹bufferä¿å­˜æˆ–è€…åšäº›å…¶ä»–æ“ä½œ &#125; &#125;while(true); ä½¿ç”¨UDPå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¸€æ ·çš„ 123456789DatagramSocket socket = new DatagramSocket(ç«¯å£);InetAddress serverAddress = InetAddress.getbyName(&quot;ip&quot;);//å‘é€DatagramPackage packet = new DatagramPacket(buffer, length, host, port);socket.send(packet);//æ¥æ”¶byte[] buf = new byte[1024];DatagramPacket packet = new DatagramPacket(buf, 1024);Socket.receive(packet); TCPä¸UDP é¢å‘æŠ¥æ–‡çš„ä¼ è¾“æ–¹å¼æ˜¯åº”ç”¨å±‚äº¤ç»™UDPå¤šé•¿çš„æŠ¥æ–‡ï¼ŒUDPå°±ç…§æ ·å‘é€ï¼Œå³ä¸€æ¬¡å‘é€ä¸€ä¸ªæŠ¥æ–‡ã€‚å› æ­¤ï¼Œåº”ç”¨ç¨‹åºå¿…é¡»é€‰æ‹©åˆé€‚å¤§å°çš„æŠ¥æ–‡ã€‚è‹¥æŠ¥æ–‡å¤ªé•¿ï¼Œåˆ™IPå±‚éœ€è¦åˆ†ç‰‡ï¼Œé™ä½æ•ˆç‡ã€‚è‹¥å¤ªçŸ­ï¼Œä¼šæ˜¯IPå¤ªå°ã€‚UDPå¯¹åº”ç”¨å±‚äº¤ä¸‹æ¥çš„æŠ¥æ–‡ï¼Œæ—¢ä¸åˆå¹¶ï¼Œä¹Ÿä¸æ‹†åˆ†ï¼Œè€Œæ˜¯ä¿ç•™è¿™äº›æŠ¥æ–‡çš„è¾¹ç•Œã€‚è¿™ä¹Ÿå°±æ˜¯è¯´ï¼Œåº”ç”¨å±‚äº¤ç»™UDPå¤šé•¿çš„æŠ¥æ–‡ï¼ŒUDPå°±ç…§æ ·å‘é€ï¼Œå³ä¸€æ¬¡å‘é€ä¸€ä¸ªæŠ¥æ–‡ã€‚é¢å‘å­—èŠ‚æµçš„è¯ï¼Œè™½ç„¶åº”ç”¨ç¨‹åºå’ŒTCPçš„äº¤äº’æ˜¯ä¸€æ¬¡ä¸€ä¸ªæ•°æ®å—ï¼ˆå¤§å°ä¸ç­‰ï¼‰ï¼Œä½†TCPæŠŠåº”ç”¨ç¨‹åºçœ‹æˆæ˜¯ä¸€è¿ä¸²çš„æ— ç»“æ„çš„å­—èŠ‚æµã€‚TCPæœ‰ä¸€ä¸ªç¼“å†²ï¼Œå½“åº”ç”¨ç¨‹åºä¼ é€çš„æ•°æ®å—å¤ªé•¿ï¼ŒTCPå°±å¯ä»¥æŠŠå®ƒåˆ’åˆ†çŸ­ä¸€äº›å†ä¼ é€ã€‚å¦‚æœåº”ç”¨ç¨‹åºä¸€æ¬¡åªå‘é€ä¸€ä¸ªå­—èŠ‚ï¼ŒTCPä¹Ÿå¯ä»¥ç­‰å¾…ç§¯ç´¯æœ‰è¶³å¤Ÿå¤šçš„å­—èŠ‚åå†æ„æˆæŠ¥æ–‡æ®µå‘é€å‡ºå»ã€‚ TCPåè®® Transmission Control Protocolï¼Œä¼ è¾“æ§åˆ¶åè®® é¢å‘è¿æ¥çš„åè®® éœ€è¦ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ éœ€è¦å››æ¬¡æŒ¥æ‰‹æ–­å¼€è¿æ¥ TCPæŠ¥å¤´æœ€å°é•¿åº¦ï¼š20å­—èŠ‚ ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ï¼š å®¢æˆ·ç«¯å‘é€ï¼šSYN = 1, SEQ = X, ç«¯å£å· æœåŠ¡å™¨å›å¤ï¼šSYN = 1, ack = X + 1, SEQ = Yï¼ŒACK = 1 å®¢æˆ·ç«¯å‘é€ï¼šack = Y + 1, SEQ = X + 1,ACK = 1 SYN â€“ å»ºç«‹è¿æ¥ä½ ACK â€“ å“åº”ä½ SEQ â€“ é¡ºåºå·ç  ack â€“ ç¡®è®¤å· ç¡®è®¤åº”ç­”ä¿¡å·ACK = æ”¶åˆ°çš„SEQ + 1ã€‚è¿æ¥å»ºç«‹ä¸­ï¼ŒåŒæ­¥ä¿¡å·SYNå§‹ç»ˆä¸º1ã€‚è¿æ¥å»ºç«‹åï¼ŒåŒæ­¥ä¿¡å·SYN=0ã€‚ ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šä¸»æœºAå‘é€ä½ç ä¸ºSYN = 1ï¼Œéšæœºäº§ç”ŸSEQ = 1234567çš„æ•°æ®åŒ…åˆ°æœåŠ¡å™¨ï¼Œä¸»æœºBç”±SYN = 1çŸ¥é“ï¼ŒAè¦å»ºç«‹è”æœº ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šä¸»æœºBæ”¶åˆ°è¯·æ±‚åè¦ç¡®è®¤è”æœºä¿¡æ¯ï¼Œå‘Aå‘é€ACK = ï¼ˆä¸»æœºAçš„SEQ+1ï¼‰ï¼ŒSYN = 1ï¼Œack = 1ï¼Œéšæœºäº§ç”ŸSEQ = 3452671çš„åŒ…ï¼› ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šä¸»æœºAæ”¶åˆ°åæ£€æŸ¥ackæ˜¯å¦æ­£ç¡®ï¼Œå³ç¬¬ä¸€æ¬¡å‘é€çš„ï¼ˆSEQ+1ï¼‰ï¼Œä»¥åŠä½ç ACKæ˜¯å¦ä¸º1ï¼Œè‹¥æ­£ç¡®ï¼Œä¸»æœºAä¼šå†å‘é€ack = ï¼ˆä¸»æœºBçš„SEQ+1ï¼‰ï¼ŒACK = 1ï¼Œä¸»æœºBæ”¶åˆ°åç¡®è®¤SEQå€¼ä¸ACK = 1åˆ™è¿æ¥å»ºç«‹æˆåŠŸã€‚ å››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹ Aå‘Bæå‡ºåœæ­¢è¿æ¥è¯·æ±‚ï¼ŒFIN = 1 Bæ”¶åˆ°ï¼ŒACK = 1 Bå‘Aæå‡ºåœæ­¢è¿æ¥è¯·æ±‚ï¼ŒFIN = 1 Aæ”¶åˆ°ï¼ŒACK = 1 FIN â€“ å…³é—­è¿æ¥ SYN â€“ å»ºç«‹è¿æ¥ä½ ACK â€“ å“åº”ä½ SEQ â€“ é¡ºåºå·ç  ack â€“ ç¡®è®¤å·ä¼˜ç‚¹ï¼š å¯é ï¼Œç¨³å®š1ã€ä¼ é€’æ•°æ®å‰ï¼Œä¼šæœ‰ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ 2ã€ä¼ é€’æ•°æ®æ—¶ï¼Œæœ‰ç¡®è®¤ã€çª—å£ã€é‡ä¼ ã€æ‹¥å¡æ§åˆ¶ 3ã€ä¼ é€’æ•°æ®åï¼Œä¼šæ–­å¼€è¿æ¥èŠ‚çœç³»ç»Ÿèµ„æº ç¼ºç‚¹ï¼š ä¼ è¾“æ…¢ï¼Œæ•ˆç‡ä½ï¼Œå ç”¨ç³»ç»Ÿèµ„æºé«˜1ã€ä¼ é€’æ•°æ®å‰ï¼Œå»ºç«‹è¿æ¥éœ€è¦è€—æ—¶2ã€ä¼ é€’æ•°æ®æ—¶ï¼Œç¡®è®¤ã€é‡ä¼ ã€æ‹¥å¡ç­‰ä¼šæ¶ˆè€—å¤§é‡æ—¶é—´ä»¥åŠCPUå’Œå†…å­˜ç­‰ç¡¬ä»¶èµ„æº æ˜“è¢«æ”»å‡»1ã€å› ä¸ºæœ‰ç¡®è®¤æœºåˆ¶ï¼Œä¸‰æ¬¡æ¡æ‰‹ç­‰æœºåˆ¶ï¼Œå®¹æ˜“è¢«äººåˆ©ç”¨ï¼Œå®ç°DOS ã€DDOSæ”»å‡» å¦‚ä½•ä¿è¯æ¥æ”¶çš„é¡ºåºæ€§ï¼š TCPåè®®ä½¿ç”¨SEQå’ŒACKæœºåˆ¶ä¿è¯äº†é¡ºåºæ€§TCPçš„æ¯ä¸ªæŠ¥æ–‡éƒ½æ˜¯æœ‰åºå·çš„ã€‚ç¡®è®¤åº”ç­”ä¿¡å·ACK=æ”¶åˆ°çš„SEQ+1 ã€æ³¨æ„ã€‘ä¸­æ–­è¿æ¥ç«¯å¯ä»¥æ˜¯Clientç«¯ï¼Œä¹Ÿå¯ä»¥æ˜¯Serverç«¯ã€‚ å‡è®¾Clientç«¯å‘èµ·ä¸­æ–­è¿æ¥è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯å‘é€FINæŠ¥æ–‡ã€‚Serverç«¯æ¥åˆ°FINæŠ¥æ–‡åï¼Œæ„æ€æ˜¯è¯´â€æˆ‘Clientç«¯æ²¡æœ‰æ•°æ®è¦å‘ç»™ä½ äº†â€ï¼Œä½†æ˜¯å¦‚æœä½ è¿˜æœ‰æ•°æ®æ²¡æœ‰å‘é€å®Œæˆï¼Œåˆ™ä¸å¿…æ€¥ç€å…³é—­Socketï¼Œå¯ä»¥ç»§ç»­å‘é€æ•°æ®ã€‚æ‰€ä»¥ä½ å…ˆå‘é€ACKï¼Œâ€å‘Šè¯‰Clientç«¯ï¼Œä½ çš„è¯·æ±‚æˆ‘æ”¶åˆ°äº†ï¼Œä½†æ˜¯æˆ‘è¿˜æ²¡å‡†å¤‡å¥½ï¼Œè¯·ç»§ç»­ä½ ç­‰æˆ‘çš„æ¶ˆæ¯â€ã€‚è¿™ä¸ªæ—¶å€™Clientç«¯å°±è¿›å…¥FIN_WAITçŠ¶æ€ï¼Œç»§ç»­ç­‰å¾…Serverç«¯çš„FINæŠ¥æ–‡ã€‚å½“Serverç«¯ç¡®å®šæ•°æ®å·²å‘é€å®Œæˆï¼Œåˆ™å‘Clientç«¯å‘é€FINæŠ¥æ–‡ï¼Œâ€å‘Šè¯‰Clientç«¯ï¼Œå¥½äº†ï¼Œæˆ‘è¿™è¾¹æ•°æ®å‘å®Œäº†ï¼Œå‡†å¤‡å¥½å…³é—­è¿æ¥äº†â€ã€‚Clientç«¯æ”¶åˆ°FINæŠ¥æ–‡åï¼Œâ€å°±çŸ¥é“å¯ä»¥å…³é—­è¿æ¥äº†ï¼Œä½†æ˜¯ä»–è¿˜æ˜¯ä¸ç›¸ä¿¡ç½‘ç»œï¼Œæ€•Serverç«¯ä¸çŸ¥é“è¦å…³é—­ï¼Œæ‰€ä»¥å‘é€ACKåè¿›å…¥TIME_WAITçŠ¶æ€ï¼Œå¦‚æœServerç«¯æ²¡æœ‰æ”¶åˆ°ACKåˆ™å¯ä»¥é‡ä¼ ã€‚â€œï¼ŒServerç«¯æ”¶åˆ°ACKåï¼Œâ€å°±çŸ¥é“å¯ä»¥æ–­å¼€è¿æ¥äº†â€ã€‚Clientç«¯ç­‰å¾…äº†2MSLåä¾ç„¶æ²¡æœ‰æ”¶åˆ°å›å¤ï¼Œåˆ™è¯æ˜Serverç«¯å·²æ­£å¸¸å…³é—­ï¼Œé‚£å¥½ï¼Œæˆ‘Clientç«¯ä¹Ÿå¯ä»¥å…³é—­è¿æ¥äº†ã€‚Okï¼ŒTCPè¿æ¥å°±è¿™æ ·å…³é—­äº†ï¼ æ•´ä¸ªè¿‡ç¨‹Clientç«¯æ‰€ç»å†çš„çŠ¶æ€å¦‚ä¸‹ï¼š è€ŒServerç«¯æ‰€ç»å†çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š ã€æ³¨æ„ã€‘ åœ¨TIME_WAITçŠ¶æ€ä¸­ï¼Œå¦‚æœTCP clientç«¯æœ€åä¸€æ¬¡å‘é€çš„ACKä¸¢å¤±äº†ï¼Œå®ƒå°†é‡æ–°å‘é€ã€‚TIME_WAITçŠ¶æ€ä¸­æ‰€éœ€è¦çš„æ—¶é—´æ˜¯ä¾èµ–äºå®ç°æ–¹æ³•çš„ã€‚å…¸å‹çš„å€¼ä¸º30ç§’ã€1åˆ†é’Ÿå’Œ2åˆ†é’Ÿã€‚ç­‰å¾…ä¹‹åè¿æ¥æ­£å¼å…³é—­ï¼Œå¹¶ä¸”æ‰€æœ‰çš„èµ„æº(åŒ…æ‹¬ç«¯å£å·)éƒ½è¢«é‡Šæ”¾ã€‚ UDPåè®® User Data Protocolï¼Œç”¨æˆ·æ•°æ®åŒ…åè®® é¢å‘æ— è¿æ¥çš„åè®® UDPæŠ¥å¤´åªæœ‰8å­—èŠ‚ ç®€ä»‹ï¼š ä¼ è¾“æ•°æ®ä¹‹å‰æºç«¯å’Œç»ˆç«¯ä¸å»ºç«‹è¿æ¥ï¼Œå½“å®ƒæƒ³ä¼ é€æ—¶å°±ç®€å•åœ°å»æŠ“å–æ¥è‡ªåº”ç”¨ç¨‹åºçš„æ•°æ®ï¼Œå¹¶å°½å¯èƒ½å¿«çš„æŠŠå®ƒæ‰”åˆ°ç½‘ç»œä¸Š åœ¨å‘é€ç«¯ï¼ŒUDPä¼ é€æ•°æ®çš„é€Ÿåº¦ä»…ä»…æ˜¯å—åº”ç”¨ç¨‹åºç”Ÿæˆæ•°æ®çš„é€Ÿåº¦ã€è®¡ç®—æœºçš„èƒ½åŠ›å’Œä¼ è¾“å¸¦å®½çš„é™åˆ¶ åœ¨æ¥æ”¶ç«¯ï¼ŒUDPæŠŠæ¯ä¸ªæ¶ˆæ¯æ®µæ”¾åœ¨é˜Ÿåˆ—ä¸­ï¼Œåº”ç”¨ç¨‹åºæ¯æ¬¡ä»é˜Ÿåˆ—ä¸­è¯»ä¸€ä¸ªæ¶ˆæ¯æ®µ ç”±äºä¼ è¾“æ•°æ®ä¸å»ºç«‹è¿æ¥ï¼Œå› æ­¤ä¹Ÿå°±ä¸éœ€è¦ç»´æŠ¤è¿æ¥çŠ¶æ€ï¼ŒåŒ…æ‹¬æ”¶å‘çŠ¶æ€ç­‰ï¼Œå› æ­¤ä¸€å°æœåŠ¡æœºå¯åŒæ—¶å‘å¤šä¸ªå®¢æˆ·æœºä¼ è¾“ç›¸åŒçš„æ¶ˆæ¯ UDPä¿¡æ¯åŒ…çš„æ ‡é¢˜å¾ˆçŸ­ï¼Œåªæœ‰8ä¸ªå­—èŠ‚ï¼Œç›¸å¯¹äºTCPçš„20ä¸ªå­—èŠ‚ä¿¡æ¯åŒ…çš„é¢å¤–å¼€é”€å¾ˆå° ååé‡ä¸å—æ‹¥æŒ¤æ§åˆ¶ç®—æ³•çš„è°ƒèŠ‚ï¼Œåªå—åº”ç”¨è½¯ä»¶ç”Ÿæˆæ•°æ®çš„é€Ÿç‡ã€ä¼ è¾“å¸¦å®½ã€æºç«¯å’Œç»ˆç«¯ä¸»æœºæ€§èƒ½çš„é™åˆ¶ UDPä½¿ç”¨å°½æœ€å¤§åŠªåŠ›äº¤ä»˜ï¼Œå³ä¸ä¿è¯å¯é äº¤ä»˜ï¼Œå› æ­¤ä¸»æœºä¸éœ€è¦ç»´æŒå¤æ‚çš„é“¾æ¥çŠ¶æ€è¡¨ã€‚ UDPæ˜¯é¢å‘æŠ¥æ–‡çš„ã€‚å‘é€æ–¹çš„UDPå¯¹åº”ç”¨ç¨‹åºäº¤ä¸‹æ¥çš„æŠ¥æ–‡ï¼Œåœ¨æ·»åŠ é¦–éƒ¨åå°±å‘ä¸‹äº¤ä»˜ç»™IPå±‚ã€‚æ—¢ä¸æ‹†åˆ†ï¼Œä¹Ÿä¸åˆå¹¶ï¼Œè€Œæ˜¯ä¿ç•™è¿™äº›æŠ¥æ–‡çš„è¾¹ç•Œï¼Œå› æ­¤ï¼Œåº”ç”¨ç¨‹åºéœ€è¦é€‰æ‹©åˆé€‚çš„æŠ¥æ–‡å¤§å°ã€‚ ä½¿ç”¨â€œpingâ€å‘½ä»¤æ¥æµ‹è¯•ä¸¤å°ä¸»æœºä¹‹é—´TCP/IPé€šä¿¡æ˜¯å¦æ­£å¸¸ï¼Œå…¶å®â€œpingâ€å‘½ä»¤çš„åŸç†å°±æ˜¯å‘å¯¹æ–¹ä¸»æœºå‘é€UDPæ•°æ®åŒ…ï¼Œç„¶åå¯¹æ–¹ä¸»æœºç¡®è®¤æ”¶åˆ°æ•°æ®åŒ…ï¼Œå¦‚æœæ•°æ®åŒ…æ˜¯å¦åˆ°è¾¾çš„æ¶ˆæ¯åŠæ—¶åé¦ˆå›æ¥ï¼Œé‚£ä¹ˆç½‘ç»œå°±æ˜¯é€šçš„ã€‚ ä¼˜ç‚¹ï¼š ä¼ è¾“é€Ÿç‡å¿«1ã€ä¼ è¾“æ•°æ®å‰ï¼Œä¸éœ€è¦åƒTCPä¸€æ ·å»ºç«‹è¿æ¥2ã€ä¼ è¾“æ•°æ®æ—¶ï¼Œæ²¡æœ‰ç¡®è®¤ã€çª—å£ã€é‡ä¼ ã€æ‹¥å¡æ§åˆ¶ç­‰æœºåˆ¶ è¾ƒå®‰å…¨1ã€ç”±äºæ²¡æœ‰äº†TCPçš„ä¸€äº›æœºåˆ¶ï¼Œè¢«æ”»å‡»è€…åˆ©ç”¨çš„æ¼æ´å°±å°‘äº† ç¼ºç‚¹ï¼š ä¸å¯é ï¼Œä¸ç¨³å®š1ã€ç”±äºæ²¡æœ‰äº†TCPçš„æœºåˆ¶ï¼Œåœ¨æ•°æ®ä¼ è¾“æ—¶å¦‚æœç½‘ç»œä¸å¥½ï¼Œå¾ˆå¯èƒ½ä¸¢åŒ… ç”¨UDPåè®®é€šè®¯æ—¶æ€æ ·å¾—çŸ¥ç›®æ ‡æœºæ˜¯å¦è·å¾—äº†æ•°æ®åŒ… ä»¿é€ TCPçš„åšæ³•ï¼Œæ¯å‘ä¸€ä¸ªUDPåŒ…ï¼Œéƒ½åœ¨é‡Œé¢åŠ ä¸€ä¸ªSEQåºå·ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°åŒ…åï¼Œå°†SEQåºå·å›å¤ç»™å‘é€æ–¹ã€‚å¦‚æœå‘é€æ–¹åœ¨æŒ‡å®šæ—¶é—´ä»¥å†…æ²¡æœ‰æ”¶åˆ°å›åº”ï¼Œè¯´æ˜ä¸¢åŒ…äº†ã€‚ TCPä¸UDPçš„åŒºåˆ« TCPé¢å‘æœ‰é“¾æ¥çš„é€šä¿¡æœåŠ¡ UDPé¢å‘æ— è¿æ¥çš„é€šä¿¡æœåŠ¡ TCPæä¾›å¯é çš„é€šä¿¡ä¼ è¾“ UDPä¸å¯é ,ä¼šä¸¢åŒ… TCPä¿è¯æ•°æ®é¡ºåº UDPä¸ä¿è¯ TCPæ•°æ®æ— è¾¹ç•Œ UDPæœ‰è¾¹ç•Œ TCPé€Ÿåº¦å¿« UDPé€Ÿåº¦æ…¢ TCPé¢å‘å­—èŠ‚æµ UDPé¢å‘æŠ¥æ–‡ TCPä¸€å¯¹ä¸€ UDPå¯ä»¥ä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤š TCPæŠ¥å¤´è‡³å°‘20å­—èŠ‚ UDPæŠ¥å¤´8å­—èŠ‚ TCPæœ‰æµé‡æ§åˆ¶ï¼Œæ‹¥å¡æ§åˆ¶ UDPæ²¡æœ‰ é—®é¢˜ä¸ºä»€ä¹ˆUDPæ¯”TCPå¿« TCPéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ TCPæœ‰æ‹¥å¡æ§åˆ¶ï¼Œæ§åˆ¶æµé‡ç­‰æœºåˆ¶ ä¸ºä»€ä¹ˆTCPæ¯”UDPå¯é  TCPæ˜¯é¢å‘æœ‰è¿æ¥çš„ï¼Œå»ºç«‹è¿æ¥ä¹‹åæ‰å‘é€æ•°æ®ï¼›è€ŒUDPåˆ™ä¸ç®¡å¯¹æ–¹å­˜ä¸å­˜åœ¨éƒ½ä¼šå‘é€æ•°æ®ã€‚ TCPæœ‰ç¡®è®¤æœºåˆ¶ï¼Œæ¥æ”¶ç«¯æ¯æ”¶åˆ°ä¸€ä¸ªæ­£ç¡®åŒ…éƒ½ä¼šå›åº”ç»™å‘é€ç«¯ã€‚è¶…æ—¶æˆ–è€…æ•°æ®åŒ…ä¸å®Œæ•´çš„è¯å‘é€ç«¯ä¼šé‡ä¼ ã€‚UDPæ²¡æœ‰ã€‚å› æ­¤å¯èƒ½ä¸¢åŒ…ã€‚ ä»€ä¹ˆæ—¶å€™ä½¿ç”¨TCP å½“å¯¹ç½‘ç»œé€šè®¯è´¨é‡æœ‰è¦æ±‚çš„æ—¶å€™ï¼Œæ¯”å¦‚ï¼šæ•´ä¸ªæ•°æ®è¦å‡†ç¡®æ— è¯¯çš„ä¼ é€’ç»™å¯¹æ–¹ï¼Œè¿™å¾€å¾€ç”¨äºä¸€äº›è¦æ±‚å¯é çš„åº”ç”¨ï¼Œæ¯”å¦‚HTTPã€HTTPSã€FTPç­‰ä¼ è¾“æ–‡ä»¶çš„åè®®ï¼ŒPOPã€SMTPç­‰é‚®ä»¶ä¼ è¾“çš„åè®®ã€‚åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œå¸¸è§ä½¿ç”¨TCPåè®®çš„åº”ç”¨å¦‚ä¸‹ï¼šæµè§ˆå™¨ï¼Œç”¨çš„HTTPFlashFXPï¼Œç”¨çš„FTPOutlookï¼Œç”¨çš„POPã€SMTPPuttyï¼Œç”¨çš„Telnetã€SSHQQæ–‡ä»¶ä¼ è¾“ ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨UDPï¼š å½“å¯¹ç½‘ç»œé€šè®¯è´¨é‡è¦æ±‚ä¸é«˜çš„æ—¶å€™ï¼Œè¦æ±‚ç½‘ç»œé€šè®¯é€Ÿåº¦èƒ½å°½é‡çš„å¿«ï¼Œè¿™æ—¶å°±å¯ä»¥ä½¿ç”¨UDPã€‚æ¯”å¦‚ï¼Œæ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œå¸¸è§ä½¿ç”¨UDPåè®®çš„åº”ç”¨å¦‚ä¸‹ï¼šQQè¯­éŸ³QQè§†é¢‘TFTP TCPæ— è¾¹ç•Œï¼ŒUDPæœ‰è¾¹ç•Œ TCPæ— è¾¹ç•Œ å®¢æˆ·ç«¯åˆ†å¤šæ¬¡å‘é€æ•°æ®ç»™æœåŠ¡å™¨ï¼Œè‹¥æœåŠ¡å™¨çš„ç¼“å†²åŒºå¤Ÿå¤§ï¼Œé‚£ä¹ˆæœåŠ¡å™¨ç«¯ä¼šåœ¨å®¢æˆ·ç«¯å‘é€å®Œä¹‹åä¸€æ¬¡æ€§æ¥æ”¶è¿‡æ¥ï¼Œæ‰€ä»¥æ˜¯æ— è¾¹ç•Œçš„ï¼› UDPæœ‰è¾¹ç•Œ å®¢æˆ·ç«¯æ¯å‘é€ä¸€æ¬¡ï¼ŒæœåŠ¡å™¨ç«¯å°±ä¼šæ¥æ”¶ä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯è¯´å‘é€å¤šå°‘æ¬¡å°±ä¼šæ¥æ”¶å¤šå°‘æ¬¡ï¼Œå› æ­¤æ˜¯æœ‰è¾¹ç•Œçš„ã€‚ ä¸ºä»€ä¹ˆè¿æ¥çš„æ—¶å€™æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­çš„æ—¶å€™æ˜¯å››æ¬¡æ¡æ‰‹ï¼Ÿ å› ä¸ºå½“Serverç«¯æ”¶åˆ°Clientç«¯çš„SYNè¿æ¥è¯·æ±‚æŠ¥æ–‡åï¼Œå¯ä»¥ç›´æ¥å‘é€SYN+ACKæŠ¥æ–‡ã€‚å…¶ä¸­ACKæŠ¥æ–‡æ˜¯ç”¨æ¥åº”ç­”çš„ï¼ŒSYNæŠ¥æ–‡æ˜¯ç”¨æ¥åŒæ­¥çš„ã€‚ä½†æ˜¯å…³é—­è¿æ¥æ—¶ï¼Œå½“Serverç«¯æ”¶åˆ°FINæŠ¥æ–‡æ—¶ï¼Œå¾ˆå¯èƒ½å¹¶ä¸ä¼šç«‹å³å…³é—­SOCKETï¼Œæ‰€ä»¥åªèƒ½å…ˆå›å¤ä¸€ä¸ªACKæŠ¥æ–‡ï¼Œå‘Šè¯‰Clientç«¯ï¼Œâ€œä½ å‘çš„FINæŠ¥æ–‡æˆ‘æ”¶åˆ°äº†â€ã€‚åªæœ‰ç­‰åˆ°æˆ‘Serverç«¯æ‰€æœ‰çš„æŠ¥æ–‡éƒ½å‘é€å®Œäº†ï¼Œæˆ‘æ‰èƒ½å‘é€FINæŠ¥æ–‡ï¼Œå› æ­¤ä¸èƒ½ä¸€èµ·å‘é€ã€‚æ•…éœ€è¦å››æ¬¡æ¡æ‰‹ ä¸ºä»€ä¹ˆTIME_WAITçŠ¶æ€éœ€è¦ç»è¿‡2MSL(æœ€å¤§æŠ¥æ–‡æ®µç”Ÿå­˜æ—¶é—´)æ‰èƒ½è¿”å›åˆ°CLOSEçŠ¶æ€ï¼Ÿ è™½ç„¶æŒ‰é“ç†ï¼Œå››ä¸ªæŠ¥æ–‡éƒ½å‘é€å®Œæ¯•ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è¿›å…¥CLOSEçŠ¶æ€äº†ï¼Œä½†æ˜¯æˆ‘ä»¬å¿…é¡»å‡è±¡ç½‘ç»œæ˜¯ä¸å¯é çš„ï¼Œæœ‰å¯ä»¥æœ€åä¸€ä¸ªACKä¸¢å¤±ã€‚æ‰€ä»¥TIME_WAITçŠ¶æ€æ˜¯ç”¨æ¥é‡å‘å¯èƒ½ä¸¢å¤±çš„ACKæŠ¥æ–‡ã€‚","categories":[],"tags":[{"name":"Network","slug":"Network","permalink":"https://edward7zhang.github.io/tags/Network/"}]},{"title":"Androidå¼€æºåº“é¢è¯•é¢˜é›†","slug":"Androidå¼€æºåº“é¢è¯•é¢˜é›†","date":"2018-04-15T01:07:14.000Z","updated":"2018-04-17T01:45:26.151Z","comments":true,"path":"2018/04/15/Androidå¼€æºåº“é¢è¯•é¢˜é›†/","link":"","permalink":"https://edward7zhang.github.io/2018/04/15/Androidå¼€æºåº“é¢è¯•é¢˜é›†/","excerpt":"","text":"ä¸€æ¬¡æ¬¡çš„æŒ‚äºä¸€é¢è®©æˆ‘ç­‹ç–²åŠ›ç«­â€¦æ„è¯†åˆ°è‡ªå·±å­˜åœ¨çœ¼é«˜æ‰‹ä½çš„çŠ¶æ€â€¦å‡†å¤‡é‡æ–°ä¸Šè·¯å¤¯å®åŸºç¡€æœ¬ç‰‡æ–‡ç« Fork from android-interview è°ˆè°ˆå¯¹Okhttpçš„ç†è§£ï¼ŸVolleyä¸OkHttpçš„å¯¹æ¯”ï¼š Volleyï¼šæ”¯æŒHTTPSã€‚ç¼“å­˜ã€å¼‚æ­¥è¯·æ±‚ï¼Œä¸æ”¯æŒåŒæ­¥è¯·æ±‚ã€‚åè®®ç±»å‹æ˜¯Http/1.0, Http/1.1ï¼Œç½‘ç»œä¼ è¾“ä½¿ç”¨çš„æ˜¯ HttpUrlConnection/HttpClientï¼Œæ•°æ®è¯»å†™ä½¿ç”¨çš„IOã€‚ OkHttpï¼šæ”¯æŒHTTPSã€‚ç¼“å­˜ã€å¼‚æ­¥è¯·æ±‚ã€åŒæ­¥è¯·æ±‚ã€‚åè®®ç±»å‹æ˜¯Http/1.0, Http/1.1, SPDY, Http/2.0, WebSocketï¼Œç½‘ç»œä¼ è¾“ä½¿ç”¨çš„æ˜¯å°è£…çš„Socketï¼Œæ•°æ®è¯»å†™ä½¿ç”¨çš„NIOï¼ˆOkioï¼‰ã€‚ SPDYåè®®ç±»ä¼¼äºHTTPï¼Œä½†æ—¨åœ¨ç¼©çŸ­ç½‘é¡µçš„åŠ è½½æ—¶é—´å’Œæé«˜å®‰å…¨æ€§ã€‚SPDYåè®®é€šè¿‡å‹ç¼©ã€å¤šè·¯å¤ç”¨å’Œä¼˜å…ˆçº§æ¥ç¼©çŸ­åŠ è½½æ—¶é—´ã€‚ Okhttpçš„å­ç³»ç»Ÿå±‚çº§ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š ğŸ‘‰ ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹å¤§å›¾ ç½‘ç»œé…ç½®å±‚ï¼šåˆ©ç”¨Builderæ¨¡å¼é…ç½®å„ç§å‚æ•°ï¼Œä¾‹å¦‚ï¼šè¶…æ—¶æ—¶é—´ã€æ‹¦æˆªå™¨ç­‰ï¼Œè¿™äº›å‚æ•°éƒ½ä¼šç”±Okhttpåˆ†å‘ç»™å„ä¸ªéœ€è¦çš„å­ç³»ç»Ÿã€‚ é‡å®šå‘å±‚ï¼šè´Ÿè´£é‡å®šå‘ã€‚ Headeræ‹¼æ¥å±‚ï¼šè´Ÿè´£æŠŠç”¨æˆ·æ„é€ çš„è¯·æ±‚è½¬æ¢ä¸ºå‘é€ç»™æœåŠ¡å™¨çš„è¯·æ±‚ï¼ŒæŠŠæœåŠ¡å™¨è¿”å›çš„å“åº”è½¬æ¢ä¸ºå¯¹ç”¨æˆ·å‹å¥½çš„å“åº”ã€‚ HTTPç¼“å­˜å±‚ï¼šè´Ÿè´£è¯»å–ç¼“å­˜ä»¥åŠæ›´æ–°ç¼“å­˜ã€‚ è¿æ¥å±‚ï¼šè¿æ¥å±‚æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„å±‚çº§ï¼Œå®ƒå®ç°äº†ç½‘ç»œåè®®ã€å†…éƒ¨çš„æ‹¦æˆªå™¨ã€å®‰å…¨æ€§è®¤è¯ï¼Œè¿æ¥ä¸è¿æ¥æ± ç­‰åŠŸèƒ½ï¼Œä½†è¿™ä¸€å±‚è¿˜æ²¡æœ‰å‘èµ·çœŸæ­£çš„è¿æ¥ï¼Œå®ƒåªæ˜¯åšäº†è¿æ¥å™¨ä¸€äº›å‚æ•°çš„å¤„ç†ã€‚ æ•°æ®å“åº”å±‚ï¼šè´Ÿè´£ä»æœåŠ¡å™¨è¯»å–å“åº”çš„æ•°æ®ã€‚ åœ¨æ•´ä¸ªOkhttpçš„ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬è¿˜è¦ç†è§£ä»¥ä¸‹å‡ ä¸ªå…³é”®è§’è‰²ï¼š OkHttpClientï¼šé€šä¿¡çš„å®¢æˆ·ç«¯ï¼Œç”¨æ¥ç»Ÿä¸€ç®¡ç†å‘èµ·è¯·æ±‚ä¸è§£æå“åº”ã€‚ Callï¼šCallæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒæ˜¯HTTPè¯·æ±‚çš„æŠ½è±¡æè¿°ï¼Œå…·ä½“å®ç°ç±»æ˜¯RealCallï¼Œå®ƒç”±CallFactoryåˆ›å»ºã€‚ Requestï¼šè¯·æ±‚ï¼Œå°è£…è¯·æ±‚çš„å…·ä½“ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼šurlã€headerç­‰ã€‚ RequestBodyï¼šè¯·æ±‚ä½“ï¼Œç”¨æ¥æäº¤æµã€è¡¨å•ç­‰è¯·æ±‚ä¿¡æ¯ã€‚ Responseï¼šHTTPè¯·æ±‚çš„å“åº”ï¼Œè·å–å“åº”ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼šå“åº”headerç­‰ã€‚ ResponseBodyï¼šHTTPè¯·æ±‚çš„å“åº”ä½“ï¼Œè¢«è¯»å–ä¸€æ¬¡ä»¥åå°±ä¼šå…³é—­ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡å¤è°ƒç”¨responseBody.string()è·å–è¯·æ±‚ç»“æœæ˜¯ä¼šæŠ¥é”™çš„ã€‚ Interceptorï¼šInterceptoræ˜¯è¯·æ±‚æ‹¦æˆªå™¨ï¼Œè´Ÿè´£æ‹¦æˆªå¹¶å¤„ç†è¯·æ±‚ï¼Œå®ƒå°†ç½‘ç»œè¯·æ±‚ã€ç¼“å­˜ã€é€æ˜å‹ç¼©ç­‰åŠŸèƒ½éƒ½ç»Ÿä¸€èµ·æ¥ï¼Œæ¯ä¸ªåŠŸèƒ½éƒ½æ˜¯ä¸€ä¸ªInterceptorï¼Œæ‰€æœ‰çš„Interceptoræœ€ç»ˆè¿æ¥æˆä¸€ä¸ªInterceptor.Chainã€‚å…¸å‹çš„è´£ä»»é“¾æ¨¡å¼å®ç°ã€‚ StreamAllocationï¼šç”¨æ¥æ§åˆ¶Connectionsä¸Streasçš„èµ„æºåˆ†é…ä¸é‡Šæ”¾ã€‚ RouteSelectorï¼šé€‰æ‹©è·¯çº¿ä¸è‡ªåŠ¨é‡è¿ã€‚ RouteDatabaseï¼šè®°å½•è¿æ¥å¤±è´¥çš„Routeé»‘åå•ã€‚ è°ˆè°ˆå¯¹Frescoç†è§£ï¼ŸFrescoä¸Glideçš„å¯¹æ¯”ï¼š Glideï¼šç›¸å¯¹è½»é‡çº§ï¼Œç”¨æ³•ç®€å•ä¼˜é›…ï¼Œæ”¯æŒGifåŠ¨æ€å›¾ï¼Œé€‚åˆç”¨åœ¨é‚£äº›å¯¹å›¾ç‰‡ä¾èµ–ä¸å¤§çš„Appä¸­ã€‚ Frescoï¼šé‡‡ç”¨åŒ¿åå…±äº«å†…å­˜æ¥ä¿å­˜å›¾ç‰‡ï¼Œä¹Ÿå°±æ˜¯Nativeå †ï¼Œæœ‰æ•ˆçš„çš„é¿å…äº†OOMï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œä½†æ˜¯åº“ä½“ç§¯è¿‡å¤§ï¼Œé€‚åˆç”¨åœ¨å¯¹å›¾ç‰‡ä¾èµ–æ¯”è¾ƒå¤§çš„Appä¸­ã€‚ Frescoçš„æ•´ä½“æ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ğŸ‘‰ ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹å¤§å›¾ DraweeViewï¼šç»§æ‰¿äºImageViewï¼Œåªæ˜¯ç®€å•çš„è¯»å–xmlæ–‡ä»¶çš„ä¸€äº›å±æ€§å€¼å’Œåšä¸€äº›åˆå§‹åŒ–çš„å·¥ä½œï¼Œå›¾å±‚ç®¡ç†äº¤ç”±Hierarchyè´Ÿè´£ï¼Œå›¾å±‚æ•°æ®è·å–äº¤ç”±è´Ÿè´£ã€‚ DraweeHierarchyï¼šç”±å¤šå±‚Drawableç»„æˆï¼Œæ¯å±‚Drawableæä¾›æŸç§åŠŸèƒ½ï¼ˆä¾‹å¦‚ï¼šç¼©æ”¾ã€åœ†è§’ï¼‰ã€‚ DraweeControllerï¼šæ§åˆ¶æ•°æ®çš„è·å–ä¸å›¾ç‰‡åŠ è½½ï¼Œå‘pipelineå‘å‡ºè¯·æ±‚ï¼Œå¹¶æ¥æ”¶ç›¸åº”äº‹ä»¶ï¼Œå¹¶æ ¹æ®ä¸åŒäº‹ä»¶æ§åˆ¶Hierarchyï¼Œä»DraweeViewæ¥æ”¶ç”¨æˆ·çš„äº‹ä»¶ï¼Œç„¶åæ‰§è¡Œå–æ¶ˆç½‘ç»œè¯·æ±‚ã€å›æ”¶èµ„æºç­‰æ“ä½œã€‚ DraweeHolderï¼šç»Ÿç­¹ç®¡ç†Hierarchyä¸DraweeHolderã€‚ ImagePipelineï¼šFrescoçš„æ ¸å¿ƒæ¨¡å—ï¼Œç”¨æ¥ä»¥å„ç§æ–¹å¼ï¼ˆå†…å­˜ã€ç£ç›˜ã€ç½‘ç»œç­‰ï¼‰è·å–å›¾åƒã€‚ Producer/Consumerï¼šProducerä¹Ÿæœ‰å¾ˆå¤šç§ï¼Œå®ƒç”¨æ¥å®Œæˆç½‘ç»œæ•°æ®è·å–ï¼Œç¼“å­˜æ•°æ®è·å–ã€å›¾ç‰‡è§£ç ç­‰å¤šç§å·¥ä½œï¼Œå®ƒäº§ç”Ÿçš„ç»“æœç”±Consumerè¿›è¡Œæ¶ˆè´¹ã€‚ IO/Dataï¼šè¿™ä¸€å±‚ä¾¿æ˜¯æ•°æ®å±‚äº†ï¼Œè´Ÿè´£å®ç°å†…å­˜ç¼“å­˜ã€ç£ç›˜ç¼“å­˜ã€ç½‘ç»œç¼“å­˜å’Œå…¶ä»–IOç›¸å…³çš„åŠŸèƒ½ã€‚ çºµè§‚æ•´ä¸ªFrescoçš„æ¶æ„ï¼ŒDraweeViewæ˜¯é—¨é¢ï¼Œå’Œç”¨æˆ·è¿›è¡Œäº¤äº’ï¼ŒDraweeHierarchyæ˜¯è§†å›¾å±‚çº§ï¼Œç®¡ç†å›¾å±‚ï¼ŒDraweeControlleræ˜¯æ§åˆ¶å™¨ï¼Œç®¡ç†æ•°æ®ã€‚å®ƒä»¬æ„æˆäº†æ•´ä¸ªFrescoæ¡†æ¶çš„ä¸‰é©¾é©¬è½¦ã€‚å½“ç„¶è¿˜æœ‰æˆ‘ä»¬å¹•åè‹±é›„Producerï¼Œæ‰€æœ‰çš„è„æ´»ç´¯æ´»éƒ½æ˜¯å®ƒå¹²çš„ï¼Œæœ€ä½³åŠ³æ¨¡ğŸ‘ ç†è§£äº†Frescoæ•´ä½“çš„æ¶æ„ï¼Œæˆ‘ä»¬è¿˜æœ‰äº†è§£åœ¨è¿™å¥—çŸ¿å»ºé‡Œå‘æŒ¥é‡è¦ä½œç”¨çš„å‡ ä¸ªå…³é”®è§’è‰²ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š Supplierï¼šæä¾›ä¸€ç§ç‰¹å®šç±»å‹çš„å¯¹è±¡ï¼ŒFrescoé‡Œæœ‰å¾ˆå¤šä»¥Supplierç»“å°¾çš„ç±»éƒ½å®ç°äº†è¿™ä¸ªæ¥å£ã€‚ SimpleDraweeViewï¼šè¿™ä¸ªæˆ‘ä»¬å°±å¾ˆç†Ÿæ‚‰äº†ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªURLï¼Œç„¶åè°ƒç”¨Controllerå»åŠ è½½å›¾ç‰‡ã€‚è¯¥ç±»ç»§æ‰¿äºGenericDraweeViewï¼ŒGenericDraweeViewåˆç»§æ‰¿äºDraweeViewï¼ŒDraweeViewæ˜¯Frescoçš„é¡¶å±‚Viewç±»ã€‚ PipelineDraweeControllerï¼šè´Ÿè´£å›¾ç‰‡æ•°æ®çš„è·å–ä¸åŠ è½½ï¼Œå®ƒç»§æ‰¿äºAbstractDraweeControllerï¼Œç”±PipelineDraweeControllerBuilderæ„å»ºè€Œæ¥ã€‚AbstractDraweeControllerå®ç°äº†DraweeControlleræ¥å£ï¼ŒDraweeControlleræ˜¯Frescoçš„æ•°æ®å¤§ç®¡å®¶ï¼Œæ‰€ä»¥çš„å›¾ç‰‡æ•°æ®çš„å¤„ç†éƒ½æ˜¯ç”±å®ƒæ¥å®Œæˆçš„ã€‚ GenericDraweeHierarchyï¼šè´Ÿè´£SimpleDraweeViewä¸Šçš„å›¾å±‚ç®¡ç†ï¼Œç”±å¤šå±‚Drawableç»„æˆï¼Œæ¯å±‚Drawableæä¾›æŸç§åŠŸèƒ½ï¼ˆä¾‹å¦‚ï¼šç¼©æ”¾ã€åœ†è§’ï¼‰ï¼Œè¯¥ç±»ç”±GenericDraweeHierarchyBuilderè¿›è¡Œæ„å»ºï¼Œè¯¥æ„å»ºå™¨å°†placeholderImageã€retryImageã€failureImageã€progressBarImageã€backgroundã€overlaysä¸pressedStateOverlayç­‰xmlæ–‡ä»¶æˆ–è€…Javaä»£ç é‡Œè®¾ç½®çš„å±æ€§ä¿¡æ¯éƒ½ä¼ å…¥GenericDraweeHierarchyä¸­ï¼Œç”±GenericDraweeHierarchyè¿›è¡Œå¤„ç†ã€‚ DraweeHolderï¼šè¯¥ç±»æ˜¯ä¸€ä¸ªHolderç±»ï¼Œå’ŒSimpleDraweeViewå…³è”åœ¨ä¸€èµ·ï¼ŒDraweeViewæ˜¯é€šè¿‡DraweeHolderæ¥ç»Ÿä¸€ç®¡ç†çš„ã€‚è€ŒDraweeHolderåˆæ˜¯ç”¨æ¥ç»Ÿä¸€ç®¡ç†ç›¸å…³çš„Hierarchyä¸Controller DataSourceï¼šç±»ä¼¼äºJavaé‡Œçš„Futuresï¼Œä»£è¡¨æ•°æ®çš„æ¥æºï¼Œå’ŒFuturesä¸åŒï¼Œå®ƒå¯ä»¥æœ‰å¤šä¸ªresultã€‚ DataSubscriberï¼šæ¥æ”¶DataSourceè¿”å›çš„ç»“æœã€‚ ImagePipelineï¼šç”¨æ¥è°ƒå–è·å–å›¾ç‰‡çš„æ¥å£ã€‚ Producerï¼šåŠ è½½ä¸å¤„ç†å›¾ç‰‡ï¼Œå®ƒæœ‰å¤šç§å®ç°ï¼Œä¾‹å¦‚ï¼šNetworkFetcherProducerï¼ŒLocalAssetFetcherProducerï¼ŒLocalFileFetchProducerã€‚ä»è¿™äº›ç±»çš„åå­—æˆ‘ä»¬å°±å¯ä»¥çŸ¥é“å®ƒä»¬æ˜¯å¹²ä»€ä¹ˆçš„ã€‚Producerç”±ProducerFactoryè¿™ä¸ªå·¥å‚ç±»æ„å»ºçš„ï¼Œè€Œä¸”æ‰€æœ‰çš„Produceréƒ½æ˜¯åƒJavaçš„IOæµé‚£æ ·ï¼Œå¯ä»¥ä¸€å±‚åµŒå¥—ä¸€å±‚ï¼Œæœ€ç»ˆåªå¾—åˆ°ä¸€ä¸ªç»“æœï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆç²¾å·§çš„è®¾è®¡ğŸ‘ Consumerï¼šç”¨æ¥æ¥æ”¶Produceräº§ç”Ÿçš„ç»“æœï¼Œå®ƒä¸Producerç»„æˆäº†ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…æ¨¡å¼ã€‚ æ³¨ï¼šFrescoæºç é‡Œçš„ç±»çš„åå­—éƒ½æ¯”è¾ƒé•¿ï¼Œä½†æ˜¯éƒ½æ˜¯æŒ‰ç…§ä¸€å®šçš„å‘½ä»¤è§„å¾‹æ¥çš„ï¼Œä¾‹å¦‚ï¼šä»¥Supplierç»“å°¾çš„ç±»éƒ½å®ç°äº†Supplieræ¥å£ï¼Œå®ƒå¯ä»¥æä¾›æŸä¸€ä¸ªç±»å‹çš„å¯¹è±¡ï¼ˆfactory, generator, builder, closureç­‰ï¼‰ã€‚ä»¥Builderç»“å°¾çš„å½“ç„¶å°±æ˜¯ä»¥æ„é€ è€…æ¨¡å¼åˆ›å»ºå¯¹è±¡çš„ç±»ã€‚ EventBusæ˜¯å¦‚ä½•åšåˆ°å‘é€ç²˜æ€§æ¶ˆæ¯çš„ï¼ŸEventBusé‡Œæœ‰ä¸€ä¸ªHashMapç”¨æ¥å­˜å‚¨ç²˜æ€§äº‹ä»¶é˜Ÿåˆ—ï¼Œå½“æ³¨å†Œäº‹ä»¶æ—¶ï¼Œå¦‚æœè¯¥äº‹ä»¶æ˜¯ç²˜æ€§äº‹ä»¶ï¼Œåˆ™ä»è¯¥é˜Ÿåˆ—ä¸­å–å‡ºæœ€åä¸€ä¸ªè¯¥ç±»å‹çš„äº‹ä»¶å¹¶å‘é€ç»™è®¢é˜…è€…ã€‚ å¤©çŒ«ä¸ƒå·§æ¿å¸ƒå±€ã€vLayoutçš„å®ç°åŸç†ï¼Ÿ","categories":[],"tags":[{"name":"Android","slug":"Android","permalink":"https://edward7zhang.github.io/tags/Android/"},{"name":"Interview","slug":"Interview","permalink":"https://edward7zhang.github.io/tags/Interview/"}]},{"title":"æ•°æ®ç»“æ„ä¸ç®—æ³•é¢è¯•é¢˜é›†","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•é¢è¯•é¢˜é›†","date":"2018-04-13T01:07:14.000Z","updated":"2018-04-17T01:43:55.003Z","comments":true,"path":"2018/04/13/æ•°æ®ç»“æ„ä¸ç®—æ³•é¢è¯•é¢˜é›†/","link":"","permalink":"https://edward7zhang.github.io/2018/04/13/æ•°æ®ç»“æ„ä¸ç®—æ³•é¢è¯•é¢˜é›†/","excerpt":"","text":"ä¸€æ¬¡æ¬¡çš„æŒ‚äºä¸€é¢è®©æˆ‘ç­‹ç–²åŠ›ç«­â€¦æ„è¯†åˆ°è‡ªå·±å­˜åœ¨çœ¼é«˜æ‰‹ä½çš„çŠ¶æ€â€¦å‡†å¤‡é‡æ–°ä¸Šè·¯å¤¯å®åŸºç¡€æœ¬ç‰‡æ–‡ç« Fork from android-interview æ•°æ®ç»“æ„ä¸ç®—æ³•é€šå¸¸ä¹Ÿä¸Javaçš„é›†åˆç‰µæ‰¯åœ¨ä¸€èµ·è€ƒå¯Ÿï¼Œè¿™é‡Œæˆ‘ä»¬å°†ä¸¤è€…æ”¾åœ¨ä¸€èµ·æ¥è®²ã€‚ ä»€ä¹ˆæ˜¯ç®—æ³•ï¼Ÿ ç®—æ³•æ˜¯æŒ‡ä»¤çš„é›†åˆï¼Œæ˜¯ä¸ºäº†è§£å†³ç‰¹å®šé—®é¢˜è€Œè§„å®šçš„ä¸€äº›åˆ—æ“ä½œã€‚ æ—¶é—´å¤æ‚åº¦ ç®—æ³•çš„æ‰§è¡Œæ—¶é—´éšç€é—®é¢˜è§„æ¨¡çš„å¢é•¿è€Œå˜åŒ–çš„è§„å¾‹ã€‚ ç®—æ³•çš„æ‰§è¡Œæ—¶é—´å—åˆ°ä»¥ä¸‹å››ä¸ªå› ç´ çš„å½±å“ï¼š ç¡¬ä»¶å±‚é¢ï¼šè®¡ç®—æœºæ‰§è¡Œæ¯æ¡æŒ‡ä»¤çš„é€Ÿåº¦ è½¯ä»¶å±‚é¢ï¼šç¼–è¯‘äº§ç”Ÿçš„ä»£ç è´¨é‡ ç®—æ³•ç­–ç•¥ï¼šç®—æ³•çš„å¥½å é—®é¢˜è§„æ¨¡ ç©ºé—´å¤æ‚åº¦ ç©ºé—´å¤æ‚åº¦æ˜¯å¯¹ä¸€ä¸ªç®—æ³•åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¸´æ—¶å ç”¨å­˜å‚¨ç©ºé—´å¤§å°çš„é‡åº¦ã€‚ ä¾‹å¦‚ï¼šæ’å…¥æ’åºçš„ç®—æ³•å¤æ‚åº¦æ˜¯O(1)ã€‚è€Œä¸€èˆ¬é€’å½’ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯O(n)ï¼Œå› ä¸ºæ¯æ¬¡é€’å½’éƒ½è¦å­˜å‚¨ç»“æœã€‚ å¸¸ç†Ÿé˜¶O(1)ã€å¯¹æ•°é˜¶O(logn)ã€çº¿æ€§é˜¶O(n)ã€çº¿æ€§å¯¹æ•°é˜¶O(nlogn)ï¼Œå¹³æ–¹é˜¶O(n^2)ã€ç«‹æ–¹é˜¶O(n^3)ã€kæ¬¡æ–¹é˜¶O(n^k)ã€æŒ‡æ•°é˜¶O(2^n); æè¿°ä¸€ä¸‹Javaçš„é›†åˆä½“ç³»ï¼ŒListã€Setä¸Mapæœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸJavaé›†åˆé‡Œä½¿ç”¨æ¥å£æ¥å®šä¹‰åŠŸèƒ½ï¼Œæ˜¯ä¸€å¥—å®Œå–„çš„ç»§æ‰¿ä½“ç³»ã€‚Iteratoræ˜¯æ‰€æœ‰é›†åˆçš„æ€»æ¥å£ï¼Œå…¶ä»–æ‰€æœ‰æ¥å£éƒ½ç»§æ‰¿äºå®ƒï¼Œè¯¥æ¥å£å®šä¹‰äº†é›†åˆçš„éå†æ“ä½œï¼ŒCollectionæ¥å£ç»§æ‰¿äºIteratorï¼Œæ˜¯é›†åˆçš„æ¬¡çº§æ¥å£ï¼ˆMapç‹¬ç«‹å­˜åœ¨ï¼Œé™¤å¤–ï¼‰ï¼Œå®šä¹‰äº†é›†åˆçš„ä¸€äº›é€šç”¨æ“ä½œã€‚ Javaé›†åˆçš„ç±»ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š ğŸ‘‰ ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹å¤§å›¾ Listï¼šæœ‰åºã€å¯é‡å¤ï¼›ç´¢å¼•æŸ¥è¯¢é€Ÿåº¦å¿«ï¼›æ’å…¥ã€åˆ é™¤ä¼´éšæ•°æ®ç§»åŠ¨ï¼Œé€Ÿåº¦æ…¢ï¼› Setï¼šæ— åºï¼Œä¸å¯é‡å¤ï¼› Mapï¼šé”®å€¼å¯¹ï¼Œé”®å”¯ä¸€ï¼Œå€¼å¤šä¸ªï¼› å¹¶å‘é›†åˆäº†è§£å“ªäº›ï¼Ÿ ConcurrentHashMapï¼šçº¿ç¨‹ä¸å®‰å…¨çš„HashMapã€æ•ˆç‡ä½ä¸‹çš„HashTableã€çº¿ç¨‹å®‰å…¨ä¸”é«˜æ•ˆçš„ConcurrentHashMapã€‚ ConcurrentHashMapå­˜å‚¨å…ƒç´ çš„ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š ConcurrentHashMapä¸HashMapä¸€æ ·é€‚ç”¨æ•°ç»„åŠ é“¾è¡¨å­˜å‚¨å…ƒç´ ï¼Œé€‚ç”¨é“¾è¡¨å®šå€æ³•æ¥è§£å†³å“ˆå¸Œå†²çªï¼Œä¸åŒä¹‹å¤„åœ¨äºå½“é“¾è¡¨é•¿åº¦å¤§äº8çš„æ—¶å€™ä¼šå°†é“¾è¡¨è½¬æ¢ä¸ºä¸€æ£µçº¢é»‘æ ‘ï¼ŒæŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ç”±O(N)å˜æˆO(lgN)ã€‚ ConcurrentHashMapå¹¶å‘æ§åˆ¶çš„å…³é”®åœ¨äºä¸€ä¸ªå˜é‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1private transient volatile int sizeCtl; sizeCtlè¢«volatileå…³é”®å­—ä¿®é¥°æ˜¯ä¸€ä¸ªå¤šçº¿ç¨‹å…±äº«çš„å˜é‡ï¼Œå½“å®ƒçš„å€¼ä¸ºè´Ÿæ•°çš„æ—¶å€™è¯´æ˜æŸä¸ªçº¿ç¨‹æ­£åœ¨æ“ä½œè¿™ä¸ªMapï¼Œæƒ³è¦å»æ“ä½œè¿™ä¸ªMapçš„çº¿ç¨‹å°±è¦ä¸€ç›´å»ç«äº‰è¿™ä¸ªsizeCtlï¼Œæ²¡æœ‰å¾—åˆ°è¿™ä¸ªå˜é‡çš„å€¼å°±è¦ä¸€ç›´è‡ªæ—‹ç­‰å¾…è¿™ä¸ªå˜é‡ï¼Œå½“å ç”¨è¿™ä¸ªå˜é‡çš„çº¿ç¨‹æ“ä½œå®Œæˆåï¼Œè¦å°†è¿™ä¸ªå˜é‡çš„å€¼è®¾ç½®å›æ¥ï¼Œä»¥ä¾¿è®©å…¶ä»–çº¿ç¨‹èµ°å‡ºè‡ªæ—‹ï¼Œç«äº‰åˆ°è¯¥å˜é‡ã€‚ è¿™ç§åŒæ­¥è¿›åˆ¶äº‹å®ä¸Šæ˜¯ä¸€ç§CASçš„åšæ³•ã€‚ CASï¼ˆCompare and swapï¼‰æ¯”è¾ƒå’Œæ›¿æ¢æ˜¯è®¾è®¡å¹¶å‘ç®—æ³•æ—¶ç”¨åˆ°çš„ä¸€ç§æŠ€æœ¯ã€‚ç®€å•æ¥è¯´ï¼Œæ¯”è¾ƒå’Œæ›¿æ¢æ˜¯ä½¿ç”¨ä¸€ä¸ªæœŸæœ›å€¼å’Œä¸€ä¸ªå˜é‡çš„å½“å‰å€¼è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå½“å‰å˜é‡çš„å€¼ä¸æˆ‘ä»¬æœŸæœ›çš„å€¼ç›¸ç­‰ï¼Œå°±ä½¿ç”¨ä¸€ä¸ªæ–°å€¼æ›¿æ¢å½“å‰å˜é‡çš„å€¼ã€‚ Vectorï¼ŒArrayListä¸LinkedListæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ Vectorå®ç°äº†åŸºäºåŠ¨æ€Objectæ•°ç»„çš„æ•°æ®ç»“æ„ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥è®¾ç½®å¢é•¿å› å­ï¼Œæ•ˆç‡æ¯”è¾ƒä½ï¼Œä¸å»ºè®®ä½¿ç”¨ã€‚ ArrayListå®ç°äº†åŸºäºåŠ¨æ€Objectæ•°ç»„çš„æ•°æ®ç»“æ„ï¼Œéçº¿ç¨‹å®‰å…¨ï¼Œåœ°å€è¿ç»­ï¼ŒæŸ¥è¯¢æ•ˆç‡æ¯”è¾ƒé«˜ï¼Œæ’å…¥å’Œåˆ é™¤æ•ˆç‡æ¯”è¾ƒä½ã€‚é€‚åˆæŸ¥è¯¢æ“ä½œé¢‘ç¹çš„åœºæ™¯ã€‚ LinkedListå®ç°äº†åŸºäºé“¾è¡¨çš„æ•°æ®ç»“æ„ï¼Œéçº¿ç¨‹å®‰å…¨ï¼Œåœ°å€ä¸è¿ç»­ï¼ŒæŸ¥è¯¢æ•ˆç‡æ¯”è¾ƒä½ï¼Œæ’å…¥å’Œåˆ é™¤æ•ˆç‡æ¯”è¾ƒé«˜ã€‚é€‚åˆæ’å…¥å’Œåˆ é™¤æ“ä½œé¢‘ç¹çš„åœºæ™¯ã€‚ HashMapã€LinkedHashMapã€ConcurrentHashMapã€TreeMapä¸ArrayMapæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ HashMapï¼šåŸºäºHashMap.Nodeæ•°ç»„åŠ å•å‘é“¾è¡¨å®ç°ï¼Œéçº¿ç¨‹å®‰å…¨ï¼Œåœ°å€ä¸è¿ç»­ï¼ŒæŸ¥è¯¢æ•ˆç‡æ¯”è¾ƒä½ï¼Œæ’å…¥å’Œåˆ é™¤æ•ˆç‡æ¯”è¾ƒé«˜ã€‚é€‚åˆæ’å…¥å’Œåˆ é™¤æ“ä½œé¢‘ç¹çš„åœºæ™¯ã€‚ LinkedHashMapï¼šåŸºäº ConcurrentHashMapï¼šåŸºäºhashè¡¨å®ç°ï¼Œçº¿ç¨‹å®‰å…¨ä¸”é«˜æ•ˆï¼Œåˆ†æ®µé”çš„å®ç°ç›¸å¯¹äºHashTableçš„å®ç°æé«˜äº†å¾ˆå¤§çš„æ•ˆç‡ã€‚ TreeMapï¼šåŸºäºçº¢é»‘æ ‘å®ç°ï¼Œéçº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥æŒ‰ç…§è‡ªç„¶é¡ºåºæˆ–è€…è‡ªå®šä¹‰é¡ºåºè‡ªåŠ¨æ’åºï¼Œä¸å…è®¸æ’å…¥nullå€¼ï¼ŒæŸ¥æ‰¾æ•ˆç‡æ¯”è¾ƒé«˜ï¼Œé€‚åˆéœ€è¦æ’åºçš„åœºæ™¯ã€‚ ConcurrentHashMapå­˜å‚¨å…ƒç´ çš„ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š ConcurrentHashMapä¸HashMapä¸€æ ·é€‚ç”¨æ•°ç»„åŠ é“¾è¡¨å­˜å‚¨å…ƒç´ ï¼Œé€‚ç”¨é“¾è¡¨å®šå€æ³•æ¥è§£å†³å“ˆå¸Œå†²çªï¼Œä¸åŒä¹‹å¤„åœ¨äºå½“é“¾è¡¨é•¿åº¦å¤§äº8çš„æ—¶å€™ä¼šå°†é“¾è¡¨è½¬æ¢ä¸ºä¸€æ£µçº¢é»‘æ ‘ï¼ŒæŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ç”±O(N)å˜æˆO(lgN)ã€‚ ConcurrentHashMapå¹¶å‘æ§åˆ¶çš„å…³é”®åœ¨äºä¸€ä¸ªå˜é‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1private transient volatile int sizeCtl; sizeCtlè¢«volatileå…³é”®å­—ä¿®é¥°æ˜¯ä¸€ä¸ªå¤šçº¿ç¨‹å…±äº«çš„å˜é‡ï¼Œå½“å®ƒçš„å€¼ä¸ºè´Ÿæ•°çš„æ—¶å€™è¯´æ˜æŸä¸ªçº¿ç¨‹æ­£åœ¨æ“ä½œè¿™ä¸ªMapï¼Œæƒ³è¦å»æ“ä½œè¿™ä¸ªMapçš„çº¿ç¨‹å°±è¦ä¸€ç›´å»ç«äº‰è¿™ä¸ªsizeCtlï¼Œæ²¡æœ‰å¾—åˆ°è¿™ä¸ªå˜é‡çš„å€¼å°±è¦ä¸€ç›´è‡ªæ—‹ç­‰å¾…è¿™ä¸ªå˜é‡ï¼Œå½“å ç”¨è¿™ä¸ªå˜é‡çš„çº¿ç¨‹æ“ä½œå®Œæˆåï¼Œè¦å°†è¿™ä¸ªå˜é‡çš„å€¼è®¾ç½®å›æ¥ï¼Œä»¥ä¾¿è®©å…¶ä»–çº¿ç¨‹èµ°å‡ºè‡ªæ—‹ï¼Œç«äº‰åˆ°è¯¥å˜é‡ã€‚ è¿™ç§åŒæ­¥è¿›åˆ¶äº‹å®ä¸Šæ˜¯ä¸€ç§CASçš„åšæ³•ã€‚ CASï¼ˆCompare and swapï¼‰æ¯”è¾ƒå’Œæ›¿æ¢æ˜¯è®¾è®¡å¹¶å‘ç®—æ³•æ—¶ç”¨åˆ°çš„ä¸€ç§æŠ€æœ¯ã€‚ç®€å•æ¥è¯´ï¼Œæ¯”è¾ƒ HashSetã€LinkedHashSetä¸TreeSetæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ HashSetï¼šåŸºäºHashMapå®ç°ï¼Œéçº¿ç¨‹å®‰å…¨ï¼Œåœ°å€ä¸è¿ç»­ï¼ŒæŸ¥è¯¢æ•ˆç‡æ¯”è¾ƒä½ï¼Œæ’å…¥å’Œåˆ é™¤æ•ˆç‡æ¯”è¾ƒé«˜ã€‚é€‚åˆæ’å…¥å’Œåˆ é™¤æ“ä½œé¢‘ç¹çš„åœºæ™¯ã€‚ LinkedHashSetï¼š TreeSetåŸºäºçº¢é»‘æ ‘å®ç°ï¼Œéçº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥æŒ‰ç…§è‡ªç„¶é¡ºåºæˆ–è€…è‡ªå®šä¹‰é¡ºåºè‡ªåŠ¨æ’åºï¼Œä¸å…è®¸æ’å…¥nullå€¼ã€‚é€‚åˆéœ€è¦æ’åºçš„åœºæ™¯ã€‚ HashSetåŸºäºhashè¡¨å®ç°ï¼Œéçº¿ç¨‹å®‰å…¨ï¼Œå…è®¸æ’å…¥nullï¼ŒæŸ¥æ‰¾æ•ˆç‡é«˜ã€‚é€‚åˆæŸ¥æ‰¾æ“ä½œé¢‘ç¹çš„åœºæ™¯ã€‚ HashMapæ˜¯å¦‚ä½•è§£å†³hashç¢°æ’çš„ï¼Ÿ å¼€å‘å®šå€æ³• é“¾è¡¨æ³• HashMapåŸºäºæ•°ç»„å®ç°ï¼Œæ•°ç»„é‡Œçš„å…ƒç´ æ˜¯ä¸€ä¸ªå•å‘é“¾è¡¨ã€‚ HashMapå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š åŸºäºæ•°ç»„å®ç°ï¼Œæ•°ç»„é‡Œçš„å…ƒç´ æ˜¯ä¸€ä¸ªå•å‘é“¾è¡¨ã€‚ é”®ä¸å¯ä»¥é‡å¤ï¼Œå€¼å¯ä»¥é‡å¤ï¼Œé”®ã€å€¼éƒ½å¯ä»¥ä¸ºnull éçº¿ç¨‹å®‰å…¨ HashMapå®ç°äº†ä»¥ä¸‹æ¥å£ï¼š Mapï¼šä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜å–å…ƒç´  Cloneableï¼šå¯ä»¥è¢«å…‹éš† Serializableï¼šå¯ä»¥åºåˆ—åŒ– æŸ¥æ‰¾æµç¨‹ è®¡ç®—å“ˆå¸Œå€¼ï¼Œæ ¹æ®å“ˆå¸Œå€¼ä¸æ•°ç»„å®¹é‡è®¡ç®—å®ƒæ‰€åœ¨çš„ç´¢å¼•ï¼Œæ ¹æ®ç´¢å¼•æŸ¥æ‰¾å®ƒæ‰€åœ¨çš„é“¾è¡¨ã€‚ åœ¨å•å‘é“¾è¡¨ä¸­æŸ¥æ‰¾è¯¥å…ƒç´  åˆ é™¤æµç¨‹ è®¡ç®—å“ˆå¸Œå€¼ï¼Œæ ¹æ®å“ˆå¸Œå€¼ä¸æ•°ç»„å®¹é‡è®¡ç®—å®ƒæ‰€åœ¨çš„ç´¢å¼•ï¼Œæ ¹æ®ç´¢å¼•æŸ¥æ‰¾å®ƒæ‰€åœ¨çš„é“¾è¡¨ã€‚ ä»èµ·å§‹èŠ‚ç‚¹å¼€å§‹éå†ï¼ŒæŸ¥æ‰¾è¦åˆ é™¤çš„å…ƒç´ ï¼Œåˆ é™¤è¯¥èŠ‚ç‚¹ï¼Œå°†èŠ‚ç‚¹çš„åç»§æ·»åŠ ä¸ºå®ƒå‰é©±çš„åç»§ æ’å…¥æµç¨‹ æ ¹æ®keyè®¡ç®—hashå€¼ï¼Œå¹¶æ ¹æ®hashå€¼å’Œæ•°ç»„å®¹é‡ï¼Œæ‰¾åˆ°ç´¢å¼•å€¼ï¼Œè¯¥ä½ç½®å³ä¸ºå­˜å‚¨è¯¥å…ƒç´ çš„é“¾è¡¨æ‰€åœ¨å¤„ã€‚ éå†table[i]ä½ç½®çš„é“¾è¡¨ï¼ŒæŸ¥æ‰¾ç›¸åŒçš„keyï¼Œè‹¥æ‰¾åˆ°åˆ™åˆ™ç”¨æ–°çš„valueæ›¿æ¢æ‰oldValue. è‹¥æ²¡æœ‰æŸ¥æ‰¾åˆ°ç›¸åŒçš„keyï¼Œåˆ™æ·»åŠ keyåˆ°table[i]ä½ç½®ï¼Œæ–°æ·»åŠ çš„å…ƒç´ æ€»æ˜¯æ·»åŠ åœ¨å•å‘é“¾è¡¨çš„è¡¨å¤´ä½ç½®ï¼Œåé¢çš„å…ƒç´ ç§°ä¸ºå®ƒçš„åç»§ã€‚ HashSetåŸºäºHashMapå®ç°ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒä»¥HashMapçš„keyæ¥å­˜å‚¨å…ƒç´ ï¼Œå› ä¸ºHashMapé‡Œçš„keyæ˜¯ä¸ä¼šé‡å¤çš„ï¼Œæ‰€ä»¥HashSetçš„å…ƒç´ æ—¶ä¸é‡å¤ä¸”æ— åºçš„ã€‚ SpareArrayåšäº†å“ªäº›ä¼˜åŒ–ï¼Ÿä¼˜ç‚¹ keyä¿å­˜åœ¨int mKeys[]æ•°ç»„ä¸­ï¼Œç›¸å¯¹äºHashMapä¸å†å¯¹keyè¿›è¡Œè‡ªåŠ¨è£…ç®±ï¼Œé¿å…èµ„æºæ¶ˆè€—ã€‚ä½†æ˜¯vauleæ˜¯ä¿å­˜åœ¨Object[] mValuesæ•°ç»„ä¸­è¿˜æ˜¯éœ€è¦è‡ªåŠ¨è£…ç®±çš„ã€‚ ç›¸å¯¹äºHashMapï¼Œä¸å†ä½¿ç”¨é¢å¤–çš„Entryå¯¹è±¡æ¥å­˜å‚¨æ•°æ®ï¼Œå‡å°‘äº†å†…å­˜å¼€é”€ã€‚ æ•°æ®é‡å°çš„æƒ…å†µä¸‹ï¼Œéšæœºè®¿é—®æ•ˆç‡æ›´é«˜ã€‚ ç¼ºç‚¹ æ’å…¥æ“ä½œéœ€è¦å¤åˆ¶æ•°ç»„ï¼Œå¢åˆ æ•ˆç‡ä½ã€‚ æ•°æ®é‡å·¨å¤§æ—¶ï¼Œå¤åˆ¶æ•°ç»„æˆæœ¬å·¨å¤§ï¼Œgc()æˆæœ¬ä¹Ÿå·¨å¤§ã€‚ æ•°æ®é‡å·¨å¤§æ—¶ï¼ŒæŸ¥è¯¢æ•ˆç‡ä¹Ÿä¼šæ˜æ˜¾ä¸‹é™ã€‚ ç®€å•è¯´ä¸€è¯´SpareArrayçš„æ’å…¥æµç¨‹ï¼ŸSpareArrayçš„keyæ˜¯ä¸€ä¸ªintæœ‰åºæ•°ç»„ï¼ŒæŸ¥æ‰¾è¿‡ç¨‹ä½¿ç”¨çš„äºŒåˆ†æŸ¥æ‰¾ã€‚ ç”¨äºŒåˆ†æŸ¥æ‰¾æ³•æŸ¥æ‰¾å…ƒç´ çš„keyã€‚ å¦‚æœæ’å…¥çš„æ•°æ®å†²çªäº†ï¼Œåˆ™ç›´æ¥è¦†ç›–åŸåˆ™ã€‚ å¦‚æœå½“å‰æ’å…¥çš„keyä¸Šçš„æ•°æ®ä¸ºDELETEï¼Œåˆ™ç›´æ¥è¦†ç›–ã€‚ å¦‚æœå‰é¢å‡ æ­¥éƒ½å¤±è´¥äº†ï¼Œåˆ™æ£€æŸ¥æ˜¯å¦éœ€è¦gc()å¹¶ä¸”åœ¨ç´¢å¼•ä¸Šæ’å…¥æ•°æ®ã€‚ Nä¸ªæ— åºæ ‘ä¸­æŸ¥æ‰¾æœ€å¤§çš„10ä¸ªæ•°ï¼Ÿæ‰‹å†™ä»£ç éå†æ–‡ä»¶ç›®å½•ï¼Ÿç”µæ¢¯è¿è¡Œçš„ç®—æ³•åˆ†æï¼Ÿæ‰‹å†™ä¸€ä¸‹å•é“¾è¡¨çš„æŸ¥è¯¢æ“ä½œï¼Ÿæ‰‹å†™äºŒåˆ†æŸ¥æ‰¾ï¼Ÿæ‰‹å†™ä¸€ä¸ªå­—ç¬¦ä¸²ç¿»è½¬ï¼Ÿä»é•¿åº¦ä¸ºmçš„intæ•°ç»„ä¸­éšæœºå–å‡ºnä¸ªå…ƒç´ ï¼Œæ¯æ¬¡å–çš„å…ƒç´ éƒ½æ˜¯ä¹‹å‰æœªå–è¿‡çš„ï¼Œå¦‚ä½•ä¼˜åŒ–ï¼Ÿ1234567891011string: Hello length: 5 0 1 2 3 4 before: H e l l o after: o l l e H index sum 0: H---&gt;o 0--&gt;4 4 1: e---&gt;l 1--&gt;3 4 2: l---&gt;l 2--&gt;2 4 è§£æ³•ä¸€ï¼šä½¿ç”¨æ•°ç»„ å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºcharæ•°ç»„ éå†å¾ªç¯ç»™charæ•°ç»„èµ‹å€¼ 12345678910public static String strReverseWithArray2(String string)&#123; if(string==null||string.length()==0)return string; int length = string.length(); char [] array = string.toCharArray(); for(int i = 0;i&lt;length/2;i++)&#123; array[i] = string.charAt(length-1-i); array[length-1-i] = string.charAt(i); &#125; return new String(array);&#125; è§£æ³•äºŒï¼šä½¿ç”¨æ ˆ å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºcharæ•°ç»„ å°†charæ•°ç»„ä¸­çš„å­—ç¬¦ä¾æ¬¡å‹å…¥æ ˆä¸­ å°†æ ˆä¸­çš„å­—ç¬¦ä¾æ¬¡å¼¹å‡ºèµ‹å€¼ç»™charæ•°ç»„ 12345678910111213public static String strReverseWithStack(String string)&#123; if(string==null||string.length()==0)return string; Stack&lt;Character&gt; stringStack = new Stack&lt;&gt;(); char [] array = string.toCharArray(); for(Character c:array)&#123; stringStack.push(c); &#125; int length = string.length(); for(int i= 0;i&lt;length;i++)&#123; array[i] = stringStack.pop(); &#125; return new String(array);&#125; è§£æ³•ä¸‰ï¼šé€†åºéå† é€†åºéå†å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ï¼Œå¹¶å°†å®ƒä¾æ¬¡æ·»åŠ åˆ°StringBuilderä¸­ 123456789public static String strReverseWithReverseLoop(String string)&#123; if(string==null||string.length()==0)return string; StringBuilder sb = new StringBuilder(); for(int i = string.length()-1;i&gt;=0;i--)&#123; sb.append(string.charAt(i)); &#125; return sb.toString(); &#125; å•é“¾è¡¨åè½¬ï¼Œåˆå¹¶å¤šä¸ªå•é“¾è¡¨å•é“¾è¡¨çš„ç»“æ„å°±åƒä¸€ä¸ªç«è½¦çš„ç»“æ„ï¼Œç«è½¦å¤´æ‹‰ç€è®¸å¤šè½¦å¢ï¼Œå®ç°é“¾è¡¨ç¿»è½¬ï¼Œå¯ä»¥åˆ©ç”¨é€’å½’ç¿»è½¬æ³•ï¼Œåœ¨åè½¬å½“å‰èŠ‚ç‚¹ä¹‹å‰å…ˆåè½¬åç»­èŠ‚ç‚¹ã€‚è¿™æ ·ä»å¤´ç»“ç‚¹å¼€å§‹ï¼Œå±‚å±‚æ·±å…¥ç›´åˆ°å°¾ç»“ç‚¹æ‰å¼€å§‹åè½¬æŒ‡é’ˆåŸŸçš„æŒ‡å‘ã€‚ç®€å•çš„è¯´å°±æ˜¯ä»å°¾ç»“ç‚¹å¼€å§‹ï¼Œé€†å‘åè½¬å„ä¸ªç»“ç‚¹çš„æŒ‡é’ˆåŸŸæŒ‡å‘ï¼Œ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768public class LinkedListReverse &#123; public static void main(String[] args) &#123; Node head = new Node(0); Node node1 = new Node(1); Node node2 = new Node(2); Node node3 = new Node(3); head.setNext(node1); node1.setNext(node2); node2.setNext(node3); // æ‰“å°åè½¬å‰çš„é“¾è¡¨ Node h = head; while (null != h) &#123; System.out.print(h.getData() + \" \"); h = h.getNext(); &#125; // è°ƒç”¨åè½¬æ–¹æ³• head = Reverse1(head); System.out.println(\"\\n**************************\"); // æ‰“å°åè½¬åçš„ç»“æœ while (null != head) &#123; System.out.print(head.getData() + \" \"); head = head.getNext(); &#125; &#125; /** * é€’å½’ï¼Œåœ¨åè½¬å½“å‰èŠ‚ç‚¹ä¹‹å‰å…ˆåè½¬åç»­èŠ‚ç‚¹ */ public static Node Reverse1(Node head) &#123; // headçœ‹ä½œæ˜¯å‰ä¸€ç»“ç‚¹ï¼Œhead.getNext()æ˜¯å½“å‰ç»“ç‚¹ï¼ŒreHeadæ˜¯åè½¬åæ–°é“¾è¡¨çš„å¤´ç»“ç‚¹ if (head == null || head.getNext() == null) &#123; return head;// è‹¥ä¸ºç©ºé“¾æˆ–è€…å½“å‰ç»“ç‚¹åœ¨å°¾ç»“ç‚¹ï¼Œåˆ™ç›´æ¥è¿˜å› &#125; Node reHead = Reverse1(head.getNext());// å…ˆåè½¬åç»­èŠ‚ç‚¹head.getNext() head.getNext().setNext(head);// å°†å½“å‰ç»“ç‚¹çš„æŒ‡é’ˆåŸŸæŒ‡å‘å‰ä¸€ç»“ç‚¹ head.setNext(null);// å‰ä¸€ç»“ç‚¹çš„æŒ‡é’ˆåŸŸä»¤ä¸ºnull; return reHead;// åè½¬åæ–°é“¾è¡¨çš„å¤´ç»“ç‚¹ &#125; &#125; class Node &#123; private int Data;// æ•°æ®åŸŸ private Node Next;// æŒ‡é’ˆåŸŸ public Node(int Data) &#123; // super(); this.Data = Data; &#125; public int getData() &#123; return Data; &#125; public void setData(int Data) &#123; this.Data = Data; &#125; public Node getNext() &#123; return Next; &#125; public void setNext(Node Next) &#123; this.Next = Next; &#125; &#125; æ’åºç®—æ³•ä»¥ä¸‹æ’åºç®—æ³•å†…å®¹æ¥è‡ªï¼šé¢è¯•ä¸­çš„ 10 å¤§æ’åºç®—æ³•æ€»ç»“.md","categories":[],"tags":[{"name":"Interview","slug":"Interview","permalink":"https://edward7zhang.github.io/tags/Interview/"},{"name":"Algorithm","slug":"Algorithm","permalink":"https://edward7zhang.github.io/tags/Algorithm/"},{"name":"DataStructure","slug":"DataStructure","permalink":"https://edward7zhang.github.io/tags/DataStructure/"}]},{"title":"Javaé¢è¯•é¢˜é›†","slug":"Javaé¢è¯•é¢˜é›†","date":"2018-04-10T01:07:14.000Z","updated":"2018-04-18T16:33:16.250Z","comments":true,"path":"2018/04/10/Javaé¢è¯•é¢˜é›†/","link":"","permalink":"https://edward7zhang.github.io/2018/04/10/Javaé¢è¯•é¢˜é›†/","excerpt":"","text":"ä¸€æ¬¡æ¬¡çš„æŒ‚äºä¸€é¢è®©æˆ‘ç­‹ç–²åŠ›ç«­â€¦æ„è¯†åˆ°è‡ªå·±å­˜åœ¨çœ¼é«˜æ‰‹ä½çš„çŠ¶æ€â€¦å‡†å¤‡é‡æ–°ä¸Šè·¯å¤¯å®åŸºç¡€æœ¬ç‰‡æ–‡ç« Fork from android-interview Javaè°ˆè°ˆå¯¹Javaå¤šæ€çš„ç†è§£ï¼Ÿ å¤šæ€æ˜¯æŒ‡çˆ¶ç±»çš„æŸä¸ªæ–¹æ³•è¢«å­ç±»é‡å†™æ—¶ï¼Œå¯ä»¥äº§ç”Ÿè‡ªå·±çš„åŠŸèƒ½è¡Œä¸ºï¼ŒåŒä¸€ä¸ªæ“ä½œä½œç”¨äºä¸åŒå¯¹è±¡ï¼Œå¯ä»¥æœ‰ä¸åŒçš„è§£é‡Šï¼Œäº§ç”Ÿä¸åŒçš„æ‰§è¡Œç»“æœã€‚ å¤šæ€çš„ä¸‰ä¸ªå¿…è¦æ¡ä»¶ï¼š ç»§æ‰¿çˆ¶ç±»ã€‚ é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚ çˆ¶ç±»çš„å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡ã€‚ é™æ€æ–¹æ³•ä¸é™æ€æˆå‘˜å˜é‡å¯ä»¥è¢«ç»§æ‰¿å—ï¼Œä¸ºä»€ä¹ˆï¼Ÿé™æ€æ–¹æ³•ä¸é™æ€æˆå‘˜å˜é‡å¯ä»¥è¢«ç»§æ‰¿ï¼Œä½†æ˜¯ä¸èƒ½è¢«é‡å†™ã€‚å®ƒå¯¹å­ç±»éšè—ï¼Œå› æ­¤é™æ€æ–¹æ³•ä¹Ÿä¸èƒ½å®ç°å¤šæ€ã€‚ ä¸ºä»€ä¹ˆJavaé‡Œçš„åŒ¿åå†…éƒ¨ç±»åªèƒ½è®¿é—®finalä¿®é¥°çš„å¤–éƒ¨å˜é‡ï¼ŸåŒ¿åå†…éƒ¨ç±»ç”¨æ³• 12345678910111213141516public class TryUsingAnonymousClass &#123; public void useMyInterface() &#123; final Integer number = 123; System.out.println(number); MyInterface myInterface = new MyInterface() &#123; @Override public void doSomething() &#123; System.out.println(number); &#125; &#125;; myInterface.doSomething(); System.out.println(number); &#125;&#125; ç¼–è¯‘åçš„ç»“æœ 1234567891011121314class TryUsingAnonymousClass$1 implements MyInterface &#123; private final TryUsingAnonymousClass this$0; private final Integer paramInteger; TryUsingAnonymousClass$1(TryUsingAnonymousClass this$0, Integer paramInteger) &#123; this.this$0 = this$0; this.paramInteger = paramInteger; &#125; public void doSomething() &#123; System.out.println(this.paramInteger); &#125;&#125; å› ä¸ºåŒ¿åå†…éƒ¨ç±»æœ€ç»ˆç”¨ä¼šç¼–è¯‘æˆä¸€ä¸ªå•ç‹¬çš„ç±»ï¼Œè€Œè¢«è¯¥ç±»ä½¿ç”¨çš„å˜é‡ä¼šä»¥æ„é€ å‡½æ•°å‚æ•°çš„å½¢å¼ä¼ é€’ç»™è¯¥ç±»ï¼Œä¾‹å¦‚ï¼šInteger paramIntegerï¼Œå¦‚æœå˜é‡ä¸å®šä¹‰æˆfinalçš„ï¼ŒparamIntegeråœ¨åŒ¿åå†…éƒ¨ç±»è¢«å¯ä»¥è¢«ä¿®æ”¹ï¼Œè¿›è€Œé€ æˆå’Œå¤–éƒ¨çš„paramIntegerä¸ä¸€è‡´çš„é—®é¢˜ï¼Œä¸ºäº†é¿å…è¿™ç§ä¸ä¸€è‡´çš„æƒ…å†µï¼Œå› ä¸ºJavaè§„å®šåŒ¿åå†…éƒ¨ç±»åªèƒ½è®¿é—®finalä¿®é¥°çš„å¤–éƒ¨å˜é‡ã€‚ è®²ä¸€ä¸‹Javaçš„ç¼–ç æ–¹å¼ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦ç¼–ç  è®¡ç®—æœºå­˜å‚¨ä¿¡æ¯çš„æœ€å°å•å…ƒæ˜¯ä¸€ä¸ªå­—èŠ‚å³8bitï¼Œæ‰€ä»¥èƒ½è¡¨ç¤ºçš„èŒƒå›´æ˜¯0~255ï¼Œè¿™ä¸ªèŒƒå›´æ— æ³•ä¿å­˜æ‰€æœ‰çš„å­—ç¬¦ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªæ–°çš„æ•°æ®ç»“æ„charæ¥è¡¨ç¤ºè¿™äº›å­—ç¬¦ï¼Œä»charåˆ°byteéœ€è¦ç¼–ç ã€‚ å¸¸è§çš„ç¼–ç æ–¹å¼æœ‰ä»¥ä¸‹å‡ ç§ï¼š ASCIIï¼šæ€»å…±æœ‰ 128 ä¸ªï¼Œç”¨ä¸€ä¸ªå­—èŠ‚çš„ä½ 7 ä½è¡¨ç¤ºï¼Œ0~31 æ˜¯æ§åˆ¶å­—ç¬¦å¦‚æ¢è¡Œå›è½¦åˆ é™¤ç­‰ï¼›32~126 æ˜¯æ‰“å°å­—ç¬¦ï¼Œå¯ä»¥é€šè¿‡é”®ç›˜è¾“å…¥å¹¶ä¸”èƒ½å¤Ÿæ˜¾ç¤ºå‡ºæ¥ã€‚ GBKï¼šç èŒƒå›´æ˜¯ 8140~FEFEï¼ˆå»æ‰ XX7Fï¼‰æ€»å…±æœ‰ 23940 ä¸ªç ä½ï¼Œå®ƒèƒ½è¡¨ç¤º 21003 ä¸ªæ±‰å­—ï¼Œå®ƒçš„ç¼–ç æ˜¯å’Œ GB2312 å…¼å®¹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ç”¨ GB2312 ç¼–ç çš„æ±‰å­—å¯ä»¥ç”¨ GBK æ¥è§£ç ï¼Œå¹¶ä¸”ä¸ä¼šæœ‰ä¹±ç ã€‚ UTF-16ï¼šUTF-16 å…·ä½“å®šä¹‰äº† Unicode å­—ç¬¦åœ¨è®¡ç®—æœºä¸­å­˜å–æ–¹æ³•ã€‚UTF-16 ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥è¡¨ç¤º Unicode è½¬åŒ–æ ¼å¼ï¼Œè¿™ä¸ªæ˜¯å®šé•¿çš„è¡¨ç¤ºæ–¹æ³•ï¼Œä¸è®ºä»€ä¹ˆå­—ç¬¦éƒ½å¯ä»¥ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œä¸¤ä¸ªå­—èŠ‚æ˜¯ 16 ä¸ª bitï¼Œæ‰€ä»¥å« UTF-16ã€‚UTF-16 è¡¨ç¤ºå­—ç¬¦éå¸¸æ–¹ä¾¿ï¼Œæ¯ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œè¿™ä¸ªåœ¨å­—ç¬¦ä¸²æ“ä½œæ—¶å°±å¤§å¤§ç®€åŒ–äº†æ“ä½œï¼Œè¿™ä¹Ÿæ˜¯ Java ä»¥ UTF-16 ä½œä¸ºå†…å­˜çš„å­—ç¬¦å­˜å‚¨æ ¼å¼çš„ä¸€ä¸ªå¾ˆé‡è¦çš„åŸå› ã€‚ UTF-8ï¼šç»Ÿä¸€é‡‡ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œè™½ç„¶åœ¨è¡¨ç¤ºä¸Šéå¸¸ç®€å•æ–¹ä¾¿ï¼Œä½†æ˜¯ä¹Ÿæœ‰å…¶ç¼ºç‚¹ï¼Œæœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†å­—ç¬¦ç”¨ä¸€ä¸ªå­—èŠ‚å°±å¯ä»¥è¡¨ç¤ºçš„ç°åœ¨è¦ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œå­˜å‚¨ç©ºé—´æ”¾å¤§äº†ä¸€å€ï¼Œåœ¨ç°åœ¨çš„ç½‘ç»œå¸¦å®½è¿˜éå¸¸æœ‰é™çš„ä»Šå¤©ï¼Œè¿™æ ·ä¼šå¢å¤§ç½‘ç»œä¼ è¾“çš„æµé‡ï¼Œè€Œä¸”ä¹Ÿæ²¡å¿…è¦ã€‚è€Œ UTF-8 é‡‡ç”¨äº†ä¸€ç§å˜é•¿æŠ€æœ¯ï¼Œæ¯ä¸ªç¼–ç åŒºåŸŸæœ‰ä¸åŒçš„å­—ç é•¿åº¦ã€‚ä¸åŒç±»å‹çš„å­—ç¬¦å¯ä»¥æ˜¯ç”± 1~6 ä¸ªå­—èŠ‚ç»„æˆã€‚ Javaä¸­éœ€è¦ç¼–ç çš„åœ°æ–¹ä¸€èˆ¬éƒ½åœ¨å­—ç¬¦åˆ°å­—èŠ‚çš„è½¬æ¢ä¸Šï¼Œè¿™ä¸ªä¸€èˆ¬åŒ…æ‹¬ç£ç›˜IOå’Œç½‘ç»œIOã€‚ Reader ç±»æ˜¯ Java çš„ I/O ä¸­è¯»å­—ç¬¦çš„çˆ¶ç±»ï¼Œè€Œ InputStream ç±»æ˜¯è¯»å­—èŠ‚çš„çˆ¶ç±»ï¼ŒInputStreamReader ç±»å°±æ˜¯å…³è”å­—èŠ‚åˆ°å­—ç¬¦çš„æ¡¥æ¢ï¼Œå®ƒè´Ÿè´£åœ¨ I/O è¿‡ç¨‹ä¸­å¤„ç†è¯»å–å­—èŠ‚åˆ°å­—ç¬¦çš„è½¬æ¢ï¼Œè€Œå…·ä½“å­—èŠ‚åˆ°å­—ç¬¦çš„è§£ç å®ç°å®ƒç”± StreamDecoder å»å®ç°ï¼Œåœ¨ StreamDecoder è§£ç è¿‡ç¨‹ä¸­å¿…é¡»ç”±ç”¨æˆ·æŒ‡å®š Charset ç¼–ç æ ¼å¼ã€‚ é™æ€ä»£ç†ä¸åŠ¨æ€ä»£ç†åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œåˆ†åˆ«ç”¨åœ¨ä»€ä¹ˆæ ·çš„åœºæ™¯é‡Œï¼Ÿé™æ€ä»£ç†ä¸åŠ¨æ€ä»£ç†çš„åŒºåˆ«åœ¨äºä»£ç†ç±»ç”Ÿæˆçš„æ—¶é—´ä¸åŒï¼Œå¦‚æœéœ€è¦å¯¹å¤šä¸ªç±»è¿›è¡Œä»£ç†ï¼Œå¹¶ä¸”ä»£ç†çš„åŠŸèƒ½éƒ½æ˜¯ä¸€æ ·çš„ï¼Œç”¨é™æ€ä»£ç†é‡å¤ç¼–å†™ä»£ç†ç±»å°±éå¸¸çš„éº»çƒ¦ï¼Œå¯ä»¥ç”¨åŠ¨æ€ä»£ç†åŠ¨æ€çš„ç”Ÿæˆä»£ç†ç±»ã€‚ 1234567891011121314151617 // ä¸ºç›®æ ‡å¯¹è±¡ç”Ÿæˆä»£ç†å¯¹è±¡public Object getProxyInstance() &#123; return Proxy.newProxyInstance(target.getClass().getClassLoader(), target.getClass().getInterfaces(), new InvocationHandler() &#123; @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; System.out.println(\"å¼€å¯äº‹åŠ¡\"); // æ‰§è¡Œç›®æ ‡å¯¹è±¡æ–¹æ³• Object returnValue = method.invoke(target, args); System.out.println(\"æäº¤äº‹åŠ¡\"); return null; &#125; &#125;);&#125; æè¿°ä¸€ä¸‹Javaçš„å¼‚å¸¸ä½“ç³»ï¼Ÿ Erroræ˜¯ç¨‹åºæ— æ³•å¤„ç†çš„é”™è¯¯ï¼Œæ¯”å¦‚OutOfMemoryErrorã€ThreadDeathç­‰ã€‚è¿™äº›å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œ Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¸€èˆ¬ä¼šé€‰æ‹©çº¿ç¨‹ç»ˆæ­¢ã€‚ Exceptionæ˜¯ç¨‹åºæœ¬èº«å¯ä»¥å¤„ç†çš„å¼‚å¸¸ï¼Œè¿™ç§å¼‚å¸¸åˆ†ä¸¤å¤§ç±»è¿è¡Œæ—¶å¼‚å¸¸å’Œéè¿è¡Œæ—¶å¼‚å¸¸ï¼Œç¨‹åºä¸­åº”å½“å°½å¯èƒ½å»å¤„ç†è¿™äº›å¼‚å¸¸ã€‚è¿è¡Œæ—¶å¼‚å¸¸éƒ½æ˜¯RuntimeExceptionç±»åŠå…¶å­ç±»å¼‚å¸¸ï¼Œå¦‚NullPointerExceptionã€IndexOutOfBoundsExceptionç­‰ï¼Œè¿™äº›å¼‚å¸¸æ˜¯ä¸æ£€æŸ¥å¼‚å¸¸ï¼Œç¨‹åºä¸­å¯ä»¥é€‰æ‹©æ•è·å¤„ç†ï¼Œä¹Ÿå¯ä»¥ä¸å¤„ç†ã€‚è¿™äº›å¼‚å¸¸ä¸€èˆ¬æ˜¯ç”±ç¨‹åºé€»è¾‘é”™è¯¯å¼•èµ·çš„ï¼Œ ç¨‹åºåº”è¯¥ä»é€»è¾‘è§’åº¦å°½å¯èƒ½é¿å…è¿™ç±»å¼‚å¸¸çš„å‘ç”Ÿã€‚ æè¿°ä¸€ä¸ªç±»çš„åŠ è½½è¿‡ç¨‹ï¼ŸPerson person = new Person() æŸ¥æ‰¾Person.classï¼Œå¹¶åŠ è½½åˆ°å†…å­˜ä¸­ã€‚ æ‰§è¡Œç±»é‡Œçš„é™æ€ä»£ç å—ã€‚ åœ¨å †å†…å­˜é‡Œå¼€è¾Ÿå†…å­˜ç©ºé—´ï¼Œå¹¶åˆ†é…å†…å­˜åœ°å€ã€‚ åœ¨å †å†…å­˜é‡Œå»ºç«‹å¯¹è±¡çš„å±æ€§ï¼Œå¹¶è¿›è¡Œé»˜è®¤çš„åˆå§‹åŒ–ã€‚ å¯¹å±æ€§è¿›è¡Œæ˜¾ç¤ºåˆå§‹åŒ–ã€‚ å¯¹å¯¹è±¡è¿›è¡Œæ„é€ ä»£ç å—åˆå§‹åŒ–ã€‚ è°ƒç”¨å¯¹è±¡çš„æ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ã€‚ å°†å¯¹è±¡çš„åœ°å€èµ‹å€¼ç»™personå˜é‡ã€‚ Javaå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆï¼Ÿ åŠ è½½ï¼šå°†ç±»çš„ä¿¡æ¯åŠ è½½åˆ°JVMçš„æ–¹æ³•åŒºï¼Œç„¶ååœ¨å †åŒºä¸­å®ä¾‹åŒ–ä¸€ä¸ªjava.lang.Classå¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•å»ä¸­è¿™ä¸ªç±»çš„ä¿¡æ¯å…¥å£ã€‚ è¿æ¥ï¼šéªŒè¯ï¼šéªŒè¯ç±»æ˜¯å¦åˆæ³•ã€‚å‡†å¤‡ï¼šä¸ºé™æ€å˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®JVMé»˜è®¤å€¼ï¼Œéé™æ€å˜é‡ä¸ä¼šåˆ†é…å†…å­˜ã€‚è§£æï¼šå°†å¸¸é‡æ± é‡Œçš„ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨ã€‚ åˆå§‹åŒ–ï¼šåˆå§‹åŒ–ç±»çš„é™æ€èµ‹å€¼è¯­å¥å’Œé™æ€ä»£ç å—ï¼Œä¸»åŠ¨å¼•ç”¨ä¼šè¢«è§¦å‘ç±»çš„åˆå§‹åŒ–ï¼Œè¢«åŠ¨å¼•ç”¨ä¸ä¼šè§¦å‘ç±»çš„åˆå§‹åŒ–ã€‚ ä½¿ç”¨ï¼šæ‰§è¡Œç±»çš„åˆå§‹åŒ–ï¼Œä¸»åŠ¨å¼•ç”¨ä¼šè¢«è§¦å‘ç±»çš„åˆå§‹åŒ–ï¼Œè¢«åŠ¨å¼•ç”¨ä¸ä¼šè§¦å‘ç±»çš„åˆå§‹åŒ–ã€‚ å¸è½½ï¼šå¸è½½è¿‡ç¨‹å°±æ˜¯æ¸…æ¥šå †é‡Œç±»çš„ä¿¡æ¯ï¼Œä»¥ä¸‹æƒ…å†µä¼šè¢«å¸è½½ï¼šâ‘  ç±»çš„æ‰€æœ‰å®ä¾‹éƒ½å·²ç»è¢«å›æ”¶ã€‚â‘¡ ç±»çš„ClassLoaderè¢«å›æ”¶ã€‚â‘¢ ç±»çš„CLasså¯¹è±¡æ²¡æœ‰è¢«ä»»ä½•åœ°æ–¹å¼•ç”¨ï¼Œæ— æ³•åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡åå°„è®¿é—®è¯¥ç±»ã€‚ æè¿°ä¸€ä¸‹ç±»çš„åŠ è½½æœºåˆ¶ï¼Ÿ ç±»çš„åŠ è½½å°±æ˜¯è™šæ‹Ÿæœºé€šè¿‡ä¸€ä¸ªç±»çš„å…¨é™å®šåæ¥è·å–æè¿°æ­¤ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµï¼Œè€Œå®Œæˆè¿™ä¸ªåŠ è½½åŠ¨ä½œçš„å°±æ˜¯ç±»åŠ è½½å™¨ã€‚ ç±»å’Œç±»åŠ è½½å™¨æ¯æ¯ç›¸å…³ï¼Œåˆ¤å®šä¸¤ä¸ªç±»æ˜¯å¦ç›¸ç­‰ï¼Œåªæœ‰åœ¨è¿™ä¸¤ä¸ªç±»è¢«åŒä¸€ä¸ªç±»åŠ è½½å™¨åŠ è½½çš„æƒ…å†µä¸‹æ‰æœ‰æ„ä¹‰ï¼Œå¦åˆ™å³ä¾¿æ˜¯ä¸¤ä¸ªç±»æ¥è‡ªåŒä¸€ä¸ªClassæ–‡ä»¶ï¼Œè¢«ä¸åŒç±»åŠ è½½å™¨åŠ è½½ï¼Œå®ƒä»¬ä¹Ÿæ˜¯ä¸ç›¸ç­‰çš„ã€‚ æ³¨ï¼šè¿™é‡Œçš„ç›¸ç­‰æ€§åŒ…å«Classå¯¹è±¡çš„equals()æ–¹æ³•ã€isAssignableFrom()æ–¹æ³•ã€isInstance()æ–¹æ³•çš„è¿”å›ç»“æœä»¥åŠInstanceå…³é”®å­—å¯¹å¯¹è±¡æ‰€å±å…³ç³»çš„åˆ¤å®šç»“æœç­‰ã€‚ ç±»åŠ è½½å™¨å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼š å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆBootstrap ClassLoaderï¼‰ï¼šè´Ÿè´£åŠ è½½\\libç›®å½•ä¸‹æˆ–è€…è¢«-Xbootclasspathå‚æ•°æ‰€æŒ‡å®šçš„è·¯å¾„çš„ï¼Œå¹¶ä¸”æ˜¯è¢«è™šæ‹Ÿæœºæ‰€è¯†åˆ«çš„åº“åˆ°å†…å­˜ä¸­ã€‚ æ‰©å±•ç±»åŠ è½½å™¨ï¼ˆExtension ClassLoaderï¼‰ï¼šè´Ÿè´£åŠ è½½\\lib\\extç›®å½•ä¸‹æˆ–è€…è¢«java.ext.dirsç³»ç»Ÿå˜é‡æ‰€æŒ‡å®šçš„è·¯å¾„çš„æ‰€æœ‰ç±»åº“åˆ°å†…å­˜ä¸­ã€‚ åº”ç”¨ç±»åŠ è½½å™¨ï¼ˆApplication ClassLoaderï¼‰ï¼šè´Ÿè´£åŠ è½½ç”¨æˆ·ç±»è·¯å¾„ä¸Šçš„æŒ‡å®šç±»åº“ï¼Œå¦‚æœåº”ç”¨ç¨‹åºä¸­æ²¡æœ‰å®ç°è‡ªå·±çš„ç±»åŠ è½½å™¨ï¼Œä¸€èˆ¬å°±æ˜¯è¿™ä¸ªç±»åŠ è½½å™¨å»åŠ è½½åº”ç”¨ç¨‹åºä¸­çš„ç±»åº“ã€‚ è¿™ä¹ˆå¤šç±»åŠ è½½å™¨ï¼Œé‚£ä¹ˆå½“ç±»åœ¨åŠ è½½çš„æ—¶å€™ä¼šä½¿ç”¨å“ªä¸ªåŠ è½½å™¨å‘¢ï¼ŸğŸ¤” è¿™ä¸ªæ—¶å€™å°±è¦æåˆ°ç±»åŠ è½½å™¨çš„åŒäº²å§”æ´¾æ¨¡å‹ï¼Œæµç¨‹å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š åŒäº²å§”æ´¾æ¨¡å‹çš„æ•´ä¸ªå·¥ä½œæµç¨‹éå¸¸çš„ç®€å•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š å¦‚æœä¸€ä¸ªç±»åŠ è½½å™¨æ”¶åˆ°äº†åŠ è½½ç±»çš„è¯·æ±‚ï¼Œå®ƒä¸ä¼šè‡ªå·±ç«‹å³å»åŠ è½½ç±»ï¼Œå®ƒä¼šå…ˆå»è¯·æ±‚çˆ¶ç±»åŠ è½½å™¨ï¼Œæ¯ä¸ªå±‚æ¬¡çš„ç±»åŠ è½½å™¨éƒ½æ˜¯å¦‚æ­¤ã€‚å±‚å±‚ä¼ é€’ï¼Œç›´åˆ°ä¼ é€’åˆ°æœ€é«˜å±‚çš„ç±»åŠ è½½å™¨ï¼Œåªæœ‰å½“çˆ¶ç±»åŠ è½½å™¨åé¦ˆè‡ªå·±æ— æ³•åŠ è½½è¿™ä¸ªç±»ï¼Œæ‰ä¼šæœ‰å½“å‰å­ç±»åŠ è½½å™¨å»åŠ è½½è¯¥ç±»ã€‚ å…³äºåŒäº²å§”æ´¾æœºåˆ¶ï¼Œåœ¨ClassLoaderæºç é‡Œä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314151617181920212223242526272829303132public abstract class ClassLoader &#123; protected Class&lt;?&gt; loadClass(String name, boolean resolve) throws ClassNotFoundException &#123; //é¦–å…ˆï¼Œæ£€æŸ¥è¯¥ç±»æ˜¯å¦å·²ç»è¢«åŠ è½½ Class c = findLoadedClass(name); if (c == null) &#123; long t0 = System.nanoTime(); try &#123; //å…ˆè°ƒç”¨çˆ¶ç±»åŠ è½½å™¨å»åŠ è½½ if (parent != null) &#123; c = parent.loadClass(name, false); &#125; else &#123; c = findBootstrapClassOrNull(name); &#125; &#125; catch (ClassNotFoundException e) &#123; // ClassNotFoundException thrown if class not found // from the non-null parent class loader &#125; if (c == null) &#123; //å¦‚æœçˆ¶ç±»åŠ è½½å™¨æ²¡æœ‰åŠ è½½åˆ°è¯¥ç±»ï¼Œåˆ™è‡ªå·±å»æ‰§è¡ŒåŠ è½½ long t1 = System.nanoTime(); c = findClass(name); // this is the defining class loader; record the stats &#125; &#125; return c; &#125;&#125; ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšå‘¢ï¼ŸğŸ¤” è¿™æ˜¯ä¸ºäº†è¦è®©è¶ŠåŸºç¡€çš„ç±»ç”±è¶Šé«˜å±‚çš„ç±»åŠ è½½å™¨åŠ è½½ï¼Œä¾‹å¦‚Objectç±»ï¼Œæ— è®ºå“ªä¸ªç±»åŠ è½½å™¨å»å°è¯•åŠ è½½è¿™ä¸ªç±»ï¼Œæœ€ç»ˆéƒ½ä¼šä¼ é€’ç»™æœ€é«˜å±‚çš„ç±»åŠ è½½å™¨å»åŠ è½½ï¼Œå‰é¢æˆ‘ä»¬ä¹Ÿè¯´è¿‡ï¼Œç±»çš„ç›¸ç­‰æ€§æ˜¯ç”±ç±»ä¸å…¶ç±»åŠ è½½å™¨å…±åŒåˆ¤å®šçš„ï¼Œè¿™æ ·Objectç±»æ— è®ºåœ¨ä½•ç§ç±»åŠ è½½å™¨ç¯å¢ƒä¸‹éƒ½æ˜¯åŒä¸€ä¸ªç±»ã€‚ ç›¸åå¦‚æœæ²¡æœ‰åŒäº²å§”æ´¾æ¨¡å‹ï¼Œé‚£ä¹ˆæ¯ä¸ªç±»åŠ è½½å™¨éƒ½ä¼šå»åŠ è½½Objectï¼Œé‚£ä¹ˆç³»ç»Ÿä¸­å°±ä¼šå‡ºç°å¤šä¸ªä¸åŒçš„Objectç±»äº†ï¼Œå¦‚æ­¤ä¸€æ¥ç³»ç»Ÿçš„æœ€åŸºç¡€çš„è¡Œä¸ºä¹Ÿå°±æ— æ³•ä¿è¯äº†ã€‚ æè¿°ä¸€ä¸‹GCçš„åŸç†å’Œå›æ”¶ç­–ç•¥ï¼Ÿæåˆ°åƒåœ¾å›æ”¶ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ€è€ƒä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬å»åšåƒåœ¾å›æ”¶éœ€è¦è§£å†³å“ªäº›é—®é¢˜ï¼Ÿ ğŸ¤” ä¸€èˆ¬è¯´æ¥ï¼Œæˆ‘ä»¬è¦è§£å†³ä»¥ä¸‹ä¸‰ä¸ªé—®é¢˜ï¼š å“ªäº›å†…å­˜å›æ”¶ï¼Ÿ ä»€ä¹ˆæ—¶å€™å›æ”¶ï¼Ÿ å¦‚ä½•å›æ”¶ï¼Ÿ è¿™äº›é—®é¢˜åˆ†åˆ«å¯¹åº”ç€å¼•ç”¨ç®¡ç†å’Œå›æ”¶ç­–ç•¥ç­‰æ–¹æ¡ˆã€‚ æåˆ°å¼•ç”¨ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“Javaä¸­æœ‰å››ç§å¼•ç”¨ç±»å‹ï¼š å¼ºå¼•ç”¨ï¼šä»£ç ä¸­æ™®éå­˜åœ¨çš„ï¼Œåªè¦å¼ºå¼•ç”¨è¿˜å­˜åœ¨ï¼Œåƒåœ¾æ”¶é›†å™¨å°±ä¸ä¼šå›æ”¶æ‰è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚ è½¯å¼•ç”¨ï¼šSoftReferenceï¼Œç”¨æ¥æè¿°è¿˜æœ‰ç”¨ä½†æ˜¯éå¿…é¡»çš„å¯¹è±¡ï¼Œå½“å†…å­˜ä¸è¶³çš„æ—¶å€™å›å›æ”¶è¿™ç±»å¯¹è±¡ã€‚ å¼±å¼•ç”¨ï¼šWeakReferenceï¼Œç”¨æ¥æè¿°éå¿…é¡»å¯¹è±¡ï¼Œå¼±å¼•ç”¨çš„å¯¹è±¡åªèƒ½ç”Ÿå­˜åˆ°ä¸‹ä¸€æ¬¡GCå‘ç”Ÿæ—¶ï¼Œå½“GCå‘ç”Ÿæ—¶ï¼Œæ— è®ºå†…å­˜æ˜¯å¦è¶³å¤Ÿï¼Œéƒ½ä¼šå›æ”¶è¯¥å¯¹è±¡ã€‚ è™šå¼•ç”¨ï¼šPhantomReferenceï¼Œä¸€ä¸ªå¯¹è±¡æ˜¯å¦æœ‰è™šå¼•ç”¨çš„å­˜åœ¨ï¼Œå®Œå…¨ä¸ä¼šå¯¹å…¶ç”Ÿå­˜æ—¶é—´äº§ç”Ÿå½±å“ï¼Œä¹Ÿæ— æ³•é€šè¿‡è™šå¼•ç”¨å–å¾—ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œå®ƒå­˜åœ¨çš„å”¯ä¸€ç›®çš„æ˜¯åœ¨è¿™ä¸ªå¯¹è±¡è¢«å›æ”¶æ—¶å¯ä»¥æ”¶åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥ã€‚ ä¸åŒçš„å¼•ç”¨ç±»å‹ï¼Œåœ¨åšGCæ—¶ä¼šåŒºåˆ«å¯¹å¾…ï¼Œæˆ‘ä»¬å¹³æ—¶ç”Ÿæˆçš„Javaå¯¹è±¡ï¼Œé»˜è®¤éƒ½æ˜¯å¼ºå¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦å¼ºå¼•ç”¨è¿˜åœ¨ï¼ŒGCå°±ä¸ä¼šå›æ”¶ï¼Œé‚£ä¹ˆå¦‚ä½•åˆ¤æ–­å¼ºå¼•ç”¨æ˜¯å¦å­˜åœ¨å‘¢ï¼ŸğŸ¤” ä¸€ä¸ªç®€å•çš„æ€è·¯å°±æ˜¯ï¼šå¼•ç”¨è®¡æ•°æ³•ï¼Œæœ‰å¯¹è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨å°±+1ï¼Œä¸å†å¼•ç”¨å°±-1ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼çœ‹èµ·æ¥ç®€å•ç¾å¥½ï¼Œä½†å®ƒå´ä¸å«©è§£å†³å¾ªç¯å¼•ç”¨è®¡æ•°çš„é—®é¢˜ã€‚ å› æ­¤å¯è¾¾æ€§åˆ†æç®—æ³•ç™»ä¸Šå†å²èˆå°ğŸ˜ï¼Œç”¨å®ƒæ¥åˆ¤æ–­å¯¹è±¡çš„å¼•ç”¨æ˜¯å¦å­˜åœ¨ã€‚ å¯è¾¾æ€§åˆ†æç®—æ³•é€šè¿‡ä¸€ç³»åˆ—ç§°ä¸ºGC Rootsçš„å¯¹è±¡ä½œä¸ºèµ·å§‹ç‚¹ï¼Œä»è¿™äº›èŠ‚ç‚¹ä»ä¸Šå‘ä¸‹æœç´¢ï¼Œæœç´¢èµ°è¿‡çš„è·¯å¾„ç§°ä¸ºå¼•ç”¨é“¾ï¼Œå½“ä¸€ä¸ªå¯¹è±¡æ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ä¸GC Rootsè¿æ¥æ—¶å°±è¯´æ˜æ­¤å¯¹è±¡ä¸å¯ç”¨ï¼Œä¹Ÿå°±æ˜¯å¯¹è±¡ä¸å¯è¾¾ã€‚ GC Rootså¯¹è±¡é€šå¸¸åŒ…æ‹¬ï¼š è™šæ‹Ÿæœºæ ˆä¸­å¼•ç”¨çš„å¯¹è±¡ï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰ æ–¹æ³•å»ä¸­ç±»çš„é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡ æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡ Nativeæ–¹æ³•å¼•ç”¨çš„å¯¹è±¡ å¯è¾¾æ€§åˆ†æç®—æ³•æ•´ä¸ªæµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š ç¬¬ä¸€æ¬¡æ ‡è®°ï¼šå¯¹è±¡åœ¨ç»è¿‡å¯è¾¾æ€§åˆ†æåå‘ç°æ²¡æœ‰ä¸GC Rootsæœ‰å¼•ç”¨é“¾ï¼Œåˆ™è¿›è¡Œç¬¬ä¸€æ¬¡æ ‡è®°å¹¶è¿›è¡Œä¸€æ¬¡ç­›é€‰ï¼Œç­›é€‰æ¡ä»¶æ˜¯ï¼šè¯¥å¯¹è±¡æ˜¯å¦æœ‰å¿…è¦æ‰§è¡Œfinalize()æ–¹æ³•ã€‚æ²¡æœ‰è¦†ç›–finalize()æ–¹æ³•æˆ–è€…finalize()æ–¹æ³•å·²ç»è¢«æ‰§è¡Œè¿‡éƒ½ä¼šè¢«è®¤ä¸ºæ²¡æœ‰å¿…è¦æ‰§è¡Œã€‚ å¦‚æœæœ‰å¿…è¦æ‰§è¡Œï¼šåˆ™è¯¥å¯¹è±¡ä¼šè¢«æ”¾åœ¨ä¸€ä¸ªF-Queueé˜Ÿåˆ—ï¼Œå¹¶ç¨ååœ¨ç”±è™šæ‹Ÿæœºå»ºç«‹çš„ä½ä¼˜å…ˆçº§Finalizerçº¿ç¨‹ä¸­è§¦å‘è¯¥å¯¹è±¡çš„finalize()æ–¹æ³•ï¼Œä½†ä¸ä¿è¯ä¸€å®šç­‰å¾…å®ƒæ‰§è¡Œç»“æŸï¼Œå› ä¸ºå¦‚æœè¿™ä¸ªå¯¹è±¡çš„finalize()æ–¹æ³•å‘ç”Ÿäº†æ­»å¾ªç¯æˆ–è€…æ‰§è¡Œæ—¶é—´è¾ƒé•¿çš„æƒ…å†µï¼Œä¼šé˜»å¡F-Queueé˜Ÿåˆ—é‡Œçš„å…¶ä»–å¯¹è±¡ï¼Œå½±å“GCã€‚ ç¬¬äºŒæ¬¡æ ‡è®°ï¼šGCå¯¹F-Queueé˜Ÿåˆ—é‡Œçš„å¯¹è±¡è¿›è¡Œç¬¬äºŒæ¬¡æ ‡è®°ï¼Œå¦‚æœåœ¨ç¬¬äºŒæ¬¡æ ‡è®°æ—¶è¯¥å¯¹è±¡åˆæˆåŠŸè¢«å¼•ç”¨ï¼Œåˆ™ä¼šè¢«ç§»é™¤å³å°†å›æ”¶çš„é›†åˆï¼Œå¦åˆ™ä¼šè¢«å›æ”¶ã€‚ æ¥å£å’ŒæŠ½è±¡ç±»æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå…±åŒç‚¹ æ˜¯ä¸Šå±‚çš„æŠ½è±¡å±‚ã€‚ éƒ½ä¸èƒ½è¢«å®ä¾‹åŒ– éƒ½èƒ½åŒ…å«æŠ½è±¡çš„æ–¹æ³•ï¼Œè¿™äº›æŠ½è±¡çš„æ–¹æ³•ç”¨äºæè¿°ç±»å…·å¤‡çš„åŠŸèƒ½ï¼Œä½†æ˜¯ä¸ä¼šæä¾›å…·ä½“çš„å®ç°ã€‚ åŒºåˆ« åœ¨æŠ½è±¡ç±»ä¸­å¯ä»¥å†™éæŠ½è±¡çš„æ–¹æ³•ï¼Œä»è€Œé¿å…åœ¨å­ç±»ä¸­é‡å¤ä¹¦å†™ä»–ä»¬ï¼Œè¿™æ ·å¯ä»¥æé«˜ä»£ç çš„å¤ç”¨æ€§ï¼Œè¿™æ˜¯æŠ½è±¡ç±»çš„ä¼˜åŠ¿ï¼›æ¥å£ä¸­åªèƒ½æœ‰æŠ½è±¡çš„æ–¹æ³•ã€‚ ä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªç›´æ¥çˆ¶ç±»ï¼Œè¿™ä¸ªçˆ¶ç±»å¯ä»¥æ˜¯å…·ä½“çš„ç±»ä¹Ÿå¯æ˜¯æŠ½è±¡ç±»ï¼›ä½†æ˜¯ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ã€‚ é—®ï¼šæŠ½è±¡ç±»æ˜¯å¦å¯ç»§æ‰¿å®ä½“ç±» (concrete class)ç­”ï¼š æŠ½è±¡ç±»æ˜¯å¯ä»¥ç»§æ‰¿å®ä½“ç±»ï¼Œä½†å‰ææ˜¯å®ä½“ç±»å¿…é¡»æœ‰æ˜ç¡®çš„æ„é€ å‡½æ•° ç­”æ¡ˆå¾ˆæ˜ç¡®ï¼Œå¯ä»¥ç»§æ‰¿ã€‚å…¶å®ä»Objectå°±æ˜¯ä¸ªå®ä½“ç±»ï¼Œjavaçš„APIæ–‡æ¡£é‡Œï¼Œæ¯ä¸ªæŠ½è±¡ç±»çš„æ¡ç›®é‡Œéƒ½æ˜ç¡®å†™ç€ç›´æ¥æˆ–é—´æ¥ç»§æ‰¿è‡ªObjectï¼Œæ‰€ä»¥è¿™ç‚¹æ˜¯æ²¡æœ‰ç–‘é—®çš„ã€‚å…³é”®åœ¨äºè¿™ç­”æ¡ˆé‡Œæ‰€è¯´çš„â€œå‰ææ˜¯å®ä½“ç±»å¿…é¡»æœ‰æ˜ç¡®çš„æ„é€ å‡½æ•°â€ä¸€å¥ï¼Œæ˜¯ä»€ä¹ˆæ„æ€ã€‚ä¸€èˆ¬å­¦ä¹ è€…ä¼šå†™çš„ç®€å•è¯•éªŒä»£ç ï¼š123class A&#123;&#125;abstract class B extends A&#123;&#125; ç»“æœå®Œå…¨æ­£å¸¸ï¼Œç¼–è¯‘é€šè¿‡ã€‚ä¼¼ä¹å’Œâ€œå®ä½“ç±»å¿…é¡»æœ‰æ˜ç¡®çš„æ„é€ å‡½æ•°â€å®Œå…¨æ²¡æœ‰å…³ç³»ã€‚ è¿™ä¸ªé—®é¢˜æ¶‰åŠåˆ°ä¸¤ä¸ªä¸ªåŸºç¡€çŸ¥è¯†ï¼š æ‰€æœ‰çš„classéƒ½å¿…é¡»æœ‰ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œå¦‚æœä½ æ²¡æœ‰åœ¨ä»£ç é‡Œå£°æ˜æ„é€ æ–¹æ³•ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç»™ä½ ç”Ÿæˆä¸€ä¸ªå…¬æœ‰æ— å‚çš„æ„é€ æ–¹æ³•ã€‚è€Œåªè¦ä½ è‡ªå·±å£°æ˜äº†ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œæ— è®ºæœ‰å‚æ— å‚ï¼Œç§æœ‰å…¬æœ‰ï¼Œç³»ç»Ÿå°±ä¸å†å¸®ä½ ç”Ÿæˆé»˜è®¤æ— å‚æ„é€ å™¨äº†ã€‚ æ‰€æœ‰çš„å­ç±»æ„é€ å™¨éƒ½è¦æ±‚åœ¨ç¬¬ä¸€è¡Œä»£ç ä¸­è°ƒç”¨çˆ¶ç±»æ„é€ å™¨ï¼Œå¦‚æœä¸å†™ï¼Œç³»ç»Ÿé»˜è®¤å»è°ƒç”¨çˆ¶ç±»çš„æ— å‚æ„é€ å™¨ã€‚ æ‰€ä»¥ï¼Œå¦‚æœæŠŠç³»ç»Ÿé»˜è®¤é…ç»™çš„æ–¹æ³•ä¹Ÿç®—è¿›å»ï¼Œclass A{}çš„ä»£ç å®é™…ä¸Šæ˜¯12345class A&#123; public A()&#123;&#125;&#125; Bç»§æ‰¿ A çš„æ—¶å€™ï¼Œåˆ™æ˜¯123456789abstract class B extends A&#123; public B()&#123; super(); &#125;&#125; è¦è¯•éªŒå‡ºè¿™ç»§æ‰¿è§„åˆ™çš„å†…éƒ¨æƒ…å†µï¼Œä¹Ÿå¾ˆç®€å•ï¼Œåœ¨æœ€ä¸Šé¢é‚£ä¸ªç®€å•è¯•éªŒä»£ç é‡Œï¼ŒåŠ ä¸Šä¸ªç§æœ‰æ„é€ å™¨ï¼Œæœ‰å‚æ— å‚éƒ½è¡Œã€‚12345class A&#123; private A()&#123;&#125; &#125; è¿™ä¸ªæ—¶å€™ï¼Œå¦‚åŸºç¡€çŸ¥è¯†(1) ä¸­æ‰€è¯´ï¼Œç³»ç»Ÿä¸å†ç»™ä½ é»˜è®¤æ— å‚æ„é€ å™¨ï¼Œ Bçš„æ„é€ å™¨æ ¹æ®ï¼ˆ2ï¼‰ä¸­çš„è§„åˆ™å»è°ƒç”¨super()ï¼Œå´æ‰¾ä¸åˆ°Açš„æ— å‚æ„é€ å™¨ï¼Œæ‰€ä»¥å¯¼è‡´abstract class B extends A{} ç¼–è¯‘ä¸èƒ½é€šè¿‡ã€‚ï¼ˆå› ä¸ºAä¸­æ²¡æœ‰ä»»ä½•æ„é€ å™¨å¯ä¾›å­ç±»è°ƒç”¨ï¼Œå…¶å®è¿™ä¸ªæ—¶å€™Aåªèƒ½å¤Ÿä¾›å†…éƒ¨ç±»ç»§æ‰¿ï¼Œæˆ‘ç”¨çš„Eclipseçš„3.4ç‰ˆæœ¬ä¼šå»ºè®®ç»™Bæ”¹åï¼Œä½†æ˜¯è¿™è§£å†³ä¸äº†è¿™ä¸ªé—®é¢˜ã€‚ï¼‰ ç°åœ¨ï¼Œä½ åº”è¯¥äº†è§£äº†èµ„æ–™ç»™çš„é‚£å¥è¯­ç„‰ä¸è¯¦çš„â€œå®ä½“ç±»å¿…é¡»æœ‰æ˜ç¡®çš„æ„é€ å‡½æ•°â€çš„å«ä¹‰ï¼š æ²¡å†™æ„é€ å™¨çš„ï¼Œé‚£æ˜¯æ‹¥æœ‰é»˜è®¤æ— å‚å…¬æœ‰æ„é€ å‡½æ•°çš„ï¼Œå­ç±»å¯ä»¥ä»€ä¹ˆéƒ½ä¸å†™ï¼Œè®©é»˜è®¤æ„é€ å™¨å»è°ƒç”¨å®ƒã€‚è¿™æ˜¯æœ€åˆé‚£ä¸¤è¡Œä»£ç çš„æƒ…å†µã€‚ å†™äº†å­ç±»å¯è®¿é—®çš„æ— å‚æ„é€ å™¨çš„ï¼Œä¹Ÿæ˜¯ä¸€æ ·ï¼Œå­ç±»é‡Œå¯ä»¥ä»€ä¹ˆéƒ½ä¸å†™ï¼Œç”¨é»˜è®¤æœºåˆ¶è°ƒç”¨ã€‚ å†™äº† æœ‰å‚æ„é€ å™¨å´æ²¡å†™æ— å‚æ„é€ å™¨çš„ï¼Œçˆ¶ç±»é‡Œæ²¡æœ‰å­ç±»å¯è®¿é—®çš„æ— å‚æ„é€ å™¨ï¼Œå­ç±»å¿…é¡»åœ¨å­ç±»æ„é€ å™¨é‡Œçš„ç¬¬ä¸€å¥å†™æ˜ï¼Œè°ƒç”¨çˆ¶ç±»æœ‰å‚æ„é€ å™¨ï¼Œå¹¶æŠŠå‚æ•°ä¼ è¿›å»ã€‚ å£°æ˜ä¸ºfinalçš„ä»¥åŠæ‰€æœ‰æ„é€ å™¨éƒ½ä¸åœ¨å­ç±»è®¿é—®æƒé™ä¹‹å†…çš„ç±»æ— æ³•ç»§æ‰¿ å…¶å®åªè¦æ˜¯åœ¨ç±»çš„ç»§æ‰¿ä¸­ï¼Œæ— è®ºæŠ½è±¡è¿˜æ˜¯å®ä½“ï¼Œéƒ½éœ€è¦ç¬¦åˆè¿™ä¸ªè§„åˆ™çš„ã€‚åœ¨è¿™ä¸ªç»§æ‰¿è¯•éªŒä¸­éšæ—¶åˆ æ‰æˆ–æ˜¯åŠ ä¸Šabstractçš„å‰ç¼€ï¼Œç»“æœéƒ½æ²¡æœ‰å˜åŒ–ã€‚ä¸ªäººè§‰å¾—â€œå®ä½“ç±»å¿…é¡»æœ‰æ˜ç¡®çš„æ„é€ å‡½æ•°â€ä¸€å¥å®åœ¨æ˜¯æ— æ³•æŠŠè¿™ä¸ªæƒ…å†µè¡¨è¾¾æ¸…æ¥šï¼Œæ‰€ä»¥å¹¿å¤§æ±‚èŒè€…è¿˜æ˜¯å†™å¾—æ¸…æ¥šäº›å¥½ã€‚ æˆ‘å–œæ¬¢çš„å†™æ³•æ˜¯â€œå¯ä»¥ç»§æ‰¿ï¼Œä½†æ˜¯å’Œå®ä½“ç±»çš„ç»§æ‰¿ä¸€æ ·ï¼Œä¹Ÿè¦æ±‚çˆ¶ç±»å¯ç»§æ‰¿ï¼Œå¹¶ä¸”æ‹¥æœ‰å­ç±»å¯è®¿é—®åˆ°çš„æ„é€ å™¨ã€‚â€ å†…éƒ¨ç±»ã€é™æ€å†…éƒ¨ç±»åœ¨ä¸šåŠ¡ä¸­çš„åº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ12345678static class Outer &#123; class Inner &#123;&#125; static class StaticInner &#123;&#125;&#125;Outer outer = new Outer();Outer.Inner inner = outer.new Inner();Outer.StaticInner inner0 = new Outer.StaticInner(); é™æ€å†…éƒ¨ç±»ï¼šåªæ˜¯ä¸ºäº†é™ä½åŒ…çš„æ·±åº¦ï¼Œæ–¹ä¾¿ç±»çš„ä½¿ç”¨ï¼Œé™æ€å†…éƒ¨ç±»é€‚ç”¨äºåŒ…å«ç±»å½“ä¸­ï¼Œä½†åˆä¸ä¾èµ–ä¸å¤–åœ¨çš„ç±»ï¼Œä¸ç”¨ä½¿ç”¨å¤–åœ¨ç±»çš„éé™æ€å±æ€§å’Œæ–¹æ³•ï¼Œåªæ˜¯ä¸ºäº†æ–¹ä¾¿ç®¡ç†ç±»ç»“æ„è€Œå®šä¹‰ã€‚åœ¨åˆ›å»ºé™æ€å†…éƒ¨ç±»çš„æ—¶å€™ï¼Œä¸éœ€è¦å¤–éƒ¨ç±»å¯¹è±¡çš„å¼•ç”¨ã€‚ éé™æ€å†…éƒ¨ç±»ï¼šæŒæœ‰å¤–éƒ¨ç±»çš„å¼•ç”¨ï¼Œå¯ä»¥è‡ªç”±ä½¿ç”¨å¤–éƒ¨ç±»çš„æ‰€æœ‰å˜é‡å’Œæ–¹æ³• synchronizedä¸ReentrantLockæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿsynchronizedæ˜¯äº’æ–¥åŒæ­¥çš„ä¸€ç§å®ç°ã€‚ synchronizedï¼šå½“æŸä¸ªçº¿ç¨‹è®¿é—®è¢«synchronizedæ ‡è®°çš„æ–¹æ³•æˆ–ä»£ç å—æ—¶ï¼Œè¿™ä¸ªçº¿ç¨‹ä¾¿è·å¾—äº†è¯¥å¯¹è±¡çš„é”ï¼Œå…¶ä»–çº¿ç¨‹æš‚æ—¶æ— æ³•è®¿é—®è¿™ä¸ªæ–¹æ³•ï¼Œåªæœ‰ç­‰å¾…è¿™ä¸ªæ–¹æ³•æ‰§è¡Œå®Œæ¯•æˆ–è€…ä»£ç å—æ‰§è¡Œå®Œæ¯•ï¼Œè¿™ä¸ªçº¿ç¨‹æ‰ä¼šé‡Šæ”¾è¯¥å¯¹è±¡çš„é”ï¼Œå…¶ä»–çº¿ç¨‹æ‰èƒ½æ‰§è¡Œè¿™ä¸ªæ–¹æ³•æˆ–ä»£ç å—ã€‚ å‰é¢æˆ‘ä»¬å·²ç»è¯´äº†volatileå…³é”®å­—ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸¾ä¸ªä¾‹å­æ¥ç»¼åˆåˆ†ævolatileä¸synchronizedå…³é”®å­—çš„ä½¿ç”¨ã€‚ :point_up: ä¸¾ä¸ªæ —å­ 1234567891011121314151617181920public class Singleton &#123; //volatileä¿è¯äº†ï¼š1 instanceåœ¨å¤šçº¿ç¨‹å¹¶å‘çš„å¯è§æ€§ //2 ç¦æ­¢instanceåœ¨æ“ä½œæ—¶çš„æŒ‡ä»¤é‡æ’åº private volatile static Singleton instance; public static Singleton getInstance() &#123; //ç¬¬ä¸€æ¬¡åˆ¤ç©ºï¼Œä¿è¯ä¸å¿…è¦çš„åŒæ­¥ if (instance == null) &#123; //synchronizedå¯¹SingletonåŠ å…¨å±€é”ï¼Œä¿è¯æ¯æ¬¡åªè¦ä¸€ä¸ªçº¿ç¨‹åˆ›å»ºå®ä¾‹ synchronized (Singleton.class) &#123; //ç¬¬äºŒæ¬¡åˆ¤ç©ºæ—¶ä¸ºäº†åœ¨nullçš„æƒ…å†µä¸‹åˆ›å»ºå®ä¾‹ if (instance == null) &#123; instance = new Singleton(); &#125; &#125; &#125; return instance; &#125;&#125; è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„DCLå•ä¾‹ã€‚ å®ƒçš„å­—èŠ‚ç å¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°è¢«synchronizedåŒæ­¥çš„ä»£ç å—ï¼Œä¼šåœ¨å‰ååˆ†åˆ«åŠ ä¸Šmonitorenterå’Œmonitorexitï¼Œè¿™ä¸¤ä¸ªå­—èŠ‚ç éƒ½éœ€è¦æŒ‡å®šåŠ é”å’Œè§£é”çš„å¯¹è±¡ã€‚ å…³äºåŠ é”å’Œè§£é”çš„å¯¹è±¡ï¼š synchronizedä»£ç å— ï¼šåŒæ­¥ä»£ç å—ï¼Œä½œç”¨èŒƒå›´æ˜¯æ•´ä¸ªä»£ç å—ï¼Œä½œç”¨å¯¹è±¡æ˜¯è°ƒç”¨è¿™ä¸ªä»£ç å—çš„å¯¹è±¡ã€‚ synchronizedæ–¹æ³• ï¼šåŒæ­¥æ–¹æ³•ï¼Œä½œç”¨èŒƒå›´æ˜¯æ•´ä¸ªæ–¹æ³•ï¼Œä½œç”¨å¯¹è±¡æ˜¯è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„å¯¹è±¡ã€‚ synchronizedé™æ€æ–¹æ³• ï¼šåŒæ­¥é™æ€æ–¹æ³•ï¼Œä½œç”¨èŒƒå›´æ˜¯æ•´ä¸ªé™æ€æ–¹æ³•ï¼Œä½œç”¨å¯¹è±¡æ˜¯è°ƒç”¨è¿™ä¸ªç±»çš„æ‰€æœ‰å¯¹è±¡ã€‚ synchronized(this)ï¼šä½œç”¨èŒƒå›´æ˜¯è¯¥å¯¹è±¡ä¸­æ‰€æœ‰è¢«synchronizedæ ‡è®°çš„å˜é‡ã€æ–¹æ³•æˆ–ä»£ç å—ï¼Œä½œç”¨å¯¹è±¡æ˜¯å¯¹è±¡æœ¬èº«ã€‚ synchronized(ClassName.class) ï¼šä½œç”¨èŒƒå›´æ˜¯é™æ€çš„æ–¹æ³•æˆ–è€…é™æ€å˜é‡ï¼Œä½œç”¨å¯¹è±¡æ˜¯Classå¯¹è±¡ã€‚ synchronized(this)æ·»åŠ çš„æ˜¯å¯¹è±¡é”ï¼Œsynchronized(ClassName.class)æ·»åŠ çš„æ˜¯ç±»é”ï¼Œå®ƒä»¬çš„åŒºåˆ«å¦‚ä¸‹ï¼š å¯¹è±¡é”ï¼šJavaçš„æ‰€æœ‰å¯¹è±¡éƒ½å«æœ‰1ä¸ªäº’æ–¥é”ï¼Œè¿™ä¸ªé”ç”±JVMè‡ªåŠ¨è·å–å’Œé‡Šæ”¾ã€‚çº¿ç¨‹è¿›å…¥synchronizedæ–¹æ³•çš„æ—¶å€™è·å–è¯¥å¯¹è±¡çš„é”ï¼Œå½“ç„¶å¦‚æœå·²ç»æœ‰çº¿ç¨‹è·å–äº†è¿™ä¸ªå¯¹è±¡çš„é”ï¼Œé‚£ä¹ˆå½“å‰çº¿ç¨‹ä¼šç­‰å¾…ï¼›synchronizedæ–¹æ³•æ­£å¸¸è¿”å›æˆ–è€…æŠ›å¼‚å¸¸è€Œç»ˆæ­¢ï¼ŒJVMä¼šè‡ªåŠ¨é‡Šæ”¾å¯¹è±¡é”ã€‚è¿™é‡Œä¹Ÿä½“ç°äº†ç”¨synchronizedæ¥åŠ é”çš„å¥½å¤„ï¼Œæ–¹æ³•æŠ›å¼‚å¸¸çš„æ—¶å€™ï¼Œé”ä»ç„¶å¯ä»¥ç”±JVMæ¥è‡ªåŠ¨é‡Šæ”¾ã€‚ ç±»é”ï¼šå¯¹è±¡é”æ˜¯ç”¨æ¥æ§åˆ¶å®ä¾‹æ–¹æ³•ä¹‹é—´çš„åŒæ­¥ï¼Œç±»é”æ˜¯ç”¨æ¥æ§åˆ¶é™æ€æ–¹æ³•ï¼ˆæˆ–é™æ€å˜é‡äº’æ–¥ä½“ï¼‰ä¹‹é—´çš„åŒæ­¥ã€‚å…¶å®ç±»é”åªæ˜¯ä¸€ä¸ªæ¦‚å¿µä¸Šçš„ä¸œè¥¿ï¼Œå¹¶ä¸æ˜¯çœŸå®å­˜åœ¨çš„ï¼Œå®ƒåªæ˜¯ç”¨æ¥å¸®åŠ©æˆ‘ä»¬ç†è§£é”å®šå®ä¾‹æ–¹æ³•å’Œé™æ€æ–¹æ³•çš„åŒºåˆ«çš„ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œjavaç±»å¯èƒ½ä¼šæœ‰å¾ˆå¤šä¸ªå¯¹è±¡ï¼Œä½†æ˜¯åªæœ‰1ä¸ªClasså¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ç±»çš„ä¸åŒå®ä¾‹ä¹‹é—´å…±äº«è¯¥ç±»çš„Classå¯¹è±¡ã€‚Classå¯¹è±¡å…¶å®ä¹Ÿä»…ä»…æ˜¯1ä¸ªjavaå¯¹è±¡ï¼Œåªä¸è¿‡æœ‰ç‚¹ç‰¹æ®Šè€Œå·²ã€‚ç”±äºæ¯ä¸ªjavaå¯¹è±¡éƒ½æœ‰1ä¸ªäº’æ–¥é”ï¼Œè€Œç±»çš„é™æ€æ–¹æ³•æ˜¯éœ€è¦Classå¯¹è±¡ã€‚æ‰€ä»¥æ‰€è°“çš„ç±»é”ï¼Œä¸è¿‡æ˜¯Classå¯¹è±¡çš„é”è€Œå·²ã€‚è·å–ç±»çš„Classå¯¹è±¡æœ‰å¥½å‡ ç§ï¼Œæœ€ç®€å•çš„å°±æ˜¯MyClass.classçš„æ–¹å¼ã€‚ ç±»é”å’Œå¯¹è±¡é”ä¸æ˜¯åŒä¸€ä¸ªä¸œè¥¿ï¼Œä¸€ä¸ªæ˜¯ç±»çš„Classå¯¹è±¡çš„é”ï¼Œä¸€ä¸ªæ˜¯ç±»çš„å®ä¾‹çš„é”ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šä¸€ä¸ªçº¿ç¨‹è®¿é—®é™æ€synchronizedçš„æ—¶å€™ï¼Œå…è®¸å¦ä¸€ä¸ªçº¿ç¨‹è®¿é—®å¯¹è±¡çš„å®ä¾‹synchronizedæ–¹æ³•ã€‚åè¿‡æ¥ä¹Ÿæ˜¯æˆç«‹çš„ï¼Œå› ä¸ºä»–ä»¬éœ€è¦çš„é”æ˜¯ä¸åŒçš„ã€‚ volatileçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿvolatileä¹Ÿæ˜¯äº’æ–¥åŒæ­¥çš„ä¸€ç§å®ç°ï¼Œä¸è¿‡å®ƒéå¸¸çš„è½»é‡çº§ã€‚ volatileæœ‰ä¸¤æ¡å…³é”®çš„è¯­ä¹‰ï¼š ä¿è¯è¢«volatileä¿®é¥°çš„å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹éƒ½æ˜¯å¯è§çš„ ç¦æ­¢è¿›è¡ŒæŒ‡ä»¤é‡æ’åº è¦ç†è§£volatileå…³é”®å­—ï¼Œæˆ‘ä»¬å¾—å…ˆä»Javaçš„çº¿ç¨‹æ¨¡å‹å¼€å§‹è¯´èµ·ã€‚å¦‚å›¾æ‰€ç¤ºï¼š Javaå†…å­˜æ¨¡å‹è§„å®šäº†æ‰€æœ‰å­—æ®µï¼ˆè¿™äº›å­—æ®µåŒ…æ‹¬å®ä¾‹å­—æ®µã€é™æ€å­—æ®µç­‰ï¼Œä¸åŒ…æ‹¬å±€éƒ¨å˜é‡ã€æ–¹æ³•å‚æ•°ç­‰ï¼Œå› ä¸ºè¿™äº›æ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œå¹¶ä¸å­˜åœ¨ç«äº‰ï¼‰éƒ½å­˜åœ¨ä¸»å†…å­˜ä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹ä¼šæœ‰è‡ªå·±çš„å·¥ä½œå†…å­˜ï¼Œå·¥ä½œå†…å­˜é‡Œä¿å­˜äº†çº¿ç¨‹æ‰€ä½¿ç”¨åˆ°çš„å˜é‡åœ¨ä¸»å†…å­˜é‡Œçš„å‰¯æœ¬æ‹·è´ï¼Œçº¿ç¨‹å¯¹å˜é‡çš„æ“ä½œåªèƒ½åœ¨å·¥ä½œå†…å­˜é‡Œè¿›è¡Œï¼Œè€Œä¸èƒ½ç›´æ¥è¯»å†™ä¸»å†…å­˜ï¼Œå½“ç„¶ä¸åŒå†…å­˜ä¹‹é—´ä¹Ÿæ— æ³•ç›´æ¥è®¿é—®å¯¹æ–¹çš„å·¥ä½œå†…å­˜ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸»å†…å­˜æ˜¯çº¿ç¨‹ä¼ å€¼çš„åª’ä»‹ã€‚ æˆ‘ä»¬æ¥ç†è§£ç¬¬ä¸€å¥è¯ï¼š ä¿è¯è¢«volatileä¿®é¥°çš„å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹éƒ½æ˜¯å¯è§çš„ å¦‚ä½•ä¿è¯å¯è§æ€§ï¼ŸğŸ¤” è¢«volatileä¿®é¥°çš„å˜é‡åœ¨å·¥ä½œå†…å­˜ä¿®æ”¹åä¼šè¢«å¼ºåˆ¶å†™å›ä¸»å†…å­˜ï¼Œå…¶ä»–çº¿ç¨‹åœ¨ä½¿ç”¨æ—¶ä¹Ÿä¼šå¼ºåˆ¶ä»ä¸»å†…å­˜åˆ·æ–°ï¼Œè¿™æ ·å°±ä¿è¯äº†ä¸€è‡´æ€§ã€‚ å…³äºâ€œä¿è¯è¢«volatileä¿®é¥°çš„å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹éƒ½æ˜¯å¯è§çš„â€ï¼Œæœ‰ç§å¸¸è§çš„é”™è¯¯ç†è§£ï¼š é”™è¯¯ç†è§£ï¼šç”±äºvolatileä¿®é¥°çš„å˜é‡åœ¨å„ä¸ªçº¿ç¨‹é‡Œéƒ½æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥åŸºäºvolatileå˜é‡çš„è¿ç®—åœ¨å¤šçº¿ç¨‹å¹¶å‘çš„æƒ…å†µä¸‹æ˜¯å®‰å…¨çš„ã€‚ è¿™å¥è¯çš„å‰åŠéƒ¨åˆ†æ˜¯å¯¹çš„ï¼ŒååŠéƒ¨åˆ†å´é”™äº†ï¼Œå› æ­¤å®ƒå¿˜è®°è€ƒè™‘å˜é‡çš„æ“ä½œæ˜¯å¦å…·æœ‰åŸå­æ€§è¿™ä¸€é—®é¢˜ã€‚ ä¸¾ä¸ªæ —å­ 1234567891011121314151617181920private volatile int start = 0;private void volatileKeyword() &#123; Runnable runnable = new Runnable() &#123; @Override public void run() &#123; for (int i = 0; i &lt; 10; i++) &#123; start++; &#125; &#125; &#125;; for (int i = 0; i &lt; 10; i++) &#123; Thread thread = new Thread(runnable); thread.start(); &#125; Log.d(TAG, \"start = \" + start);&#125; è¿™æ®µä»£ç å¯åŠ¨äº†10ä¸ªçº¿ç¨‹ï¼Œæ¯æ¬¡10æ¬¡è‡ªå¢ï¼ŒæŒ‰é“ç†æœ€ç»ˆç»“æœåº”è¯¥æ˜¯100ï¼Œä½†æ˜¯ç»“æœå¹¶éå¦‚æ­¤ã€‚ ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼ŸğŸ¤” ä»”ç»†çœ‹ä¸€ä¸‹start++ï¼Œå®ƒå…¶å®å¹¶éä¸€ä¸ªåŸå­æ“ä½œï¼Œç®€å•æ¥çœ‹ï¼Œå®ƒæœ‰ä¸¤æ­¥ï¼š å–å‡ºstartçš„å€¼ï¼Œå› ä¸ºæœ‰volatileçš„ä¿®é¥°ï¼Œè¿™æ—¶å€™çš„å€¼æ˜¯æ­£ç¡®çš„ã€‚ è‡ªå¢ï¼Œä½†æ˜¯è‡ªå¢çš„æ—¶å€™ï¼Œåˆ«çš„çº¿ç¨‹å¯èƒ½å·²ç»æŠŠstartåŠ å¤§äº†ï¼Œè¿™ç§æƒ…å†µä¸‹å°±æœ‰å¯èƒ½æŠŠè¾ƒå°çš„startå†™å›ä¸»å†…å­˜ä¸­ã€‚ æ‰€ä»¥volatileåªèƒ½ä¿è¯å¯è§æ€§ï¼Œåœ¨ä¸ç¬¦åˆä»¥ä¸‹åœºæ™¯ä¸‹æˆ‘ä»¬ä¾ç„¶éœ€è¦é€šè¿‡åŠ é”æ¥ä¿è¯åŸå­æ€§ï¼š è¿ç®—ç»“æœå¹¶ä¸ä¾èµ–å˜é‡å½“å‰çš„å€¼ï¼Œæˆ–è€…åªæœ‰å•ä¸€çº¿ç¨‹ä¿®æ”¹å˜é‡çš„å€¼ã€‚ï¼ˆè¦ä¹ˆç»“æœä¸ä¾èµ–å½“å‰å€¼ï¼Œè¦ä¹ˆæ“ä½œæ˜¯åŸå­æ€§çš„ï¼Œè¦ä¹ˆåªè¦ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹å˜é‡çš„å€¼ï¼‰ å˜é‡ä¸éœ€è¦ä¸å…¶ä»–çŠ¶æ€å˜é‡å…±åŒå‚ä¸ä¸å˜çº¦æŸ æ¯”æ–¹è¯´æˆ‘ä»¬ä¼šåœ¨çº¿ç¨‹é‡ŒåŠ ä¸ªbooleanå˜é‡ï¼Œæ¥åˆ¤æ–­çº¿ç¨‹æ˜¯å¦åœæ­¢ï¼Œè¿™ç§æƒ…å†µå°±éå¸¸é€‚åˆä½¿ç”¨volatileã€‚ æˆ‘ä»¬å†æ¥ç†è§£ç¬¬äºŒå¥è¯ã€‚ ç¦æ­¢è¿›è¡ŒæŒ‡ä»¤é‡æ’åº ä»€ä¹ˆæ˜¯æŒ‡ä»¤é‡æ’åºï¼ŸğŸ¤” æŒ‡ä»¤é‡æ’åºæ˜¯å€¼æŒ‡ä»¤ä¹±åºæ‰§è¡Œï¼Œå³åœ¨æ¡ä»¶å…è®¸çš„æƒ…å†µä¸‹ï¼Œç›´æ¥è¿è¡Œå½“å‰æœ‰èƒ½åŠ›ç«‹å³æ‰§è¡Œçš„åç»­æŒ‡ä»¤ï¼Œé¿å¼€ä¸ºè·å–ä¸‹ä¸€æ¡æŒ‡ä»¤æ‰€éœ€æ•°æ®è€Œé€ æˆçš„ç­‰å¾…ï¼Œé€šè¿‡ä¹±åºæ‰§è¡Œçš„æŠ€æœ¯ï¼Œæä¾›æ‰§è¡Œæ•ˆç‡ã€‚ æŒ‡ä»¤é‡æ’åºç»˜åˆ¶è¢«volatileä¿®é¥°çš„å˜é‡çš„èµ‹å€¼æ“ä½œå‰ï¼Œæ·»åŠ ä¸€ä¸ªå†…å­˜å±éšœï¼ŒæŒ‡ä»¤é‡æ’åºæ—¶ä¸èƒ½æŠŠåé¢çš„æŒ‡ä»¤é‡æ’åºåˆ°å†…å­˜å±éšœä¹‹å‰çš„ä½ç½®ã€‚ å…³äºæŒ‡ä»¤é‡æ’åºä¸æ˜¯æœ¬ç¯‡æ–‡ç« é‡ç‚¹è®¨è®ºçš„å†…å®¹ï¼Œæ›´å¤šç»†èŠ‚å¯ä»¥å‚è€ƒæŒ‡ä»¤é‡æ’åºã€‚ å¦‚ä½•é˜²æ­¢åå°„ã€åºåˆ—åŒ–æ”»å‡»å•ä¾‹ï¼Ÿæšä¸¾å•ä¾‹ 1234567891011121314151617public enum Singleton &#123; INSTANCE &#123; @Override protected void read() &#123; System.out.println(\"read\"); &#125; @Override protected void write() &#123; System.out.println(\"write\"); &#125; &#125;; protected abstract void read(); protected abstract void write();&#125; classæ–‡ä»¶ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354public abstract class Singleton extends Enum&#123; private Singleton(String s, int i) &#123; super(s, i); &#125; protected abstract void read(); protected abstract void write(); public static Singleton[] values() &#123; Singleton asingleton[]; int i; Singleton asingleton1[]; System.arraycopy(asingleton = ENUM$VALUES, 0, asingleton1 = new Singleton[i = asingleton.length], 0, i); return asingleton1; &#125; public static Singleton valueOf(String s) &#123; return (Singleton)Enum.valueOf(singleton/Singleton, s); &#125; Singleton(String s, int i, Singleton singleton) &#123; this(s, i); &#125; public static final Singleton INSTANCE; private static final Singleton ENUM$VALUES[]; static &#123; INSTANCE = new Singleton(\"INSTANCE\", 0) &#123; protected void read() &#123; System.out.println(\"read\"); &#125; protected void write() &#123; System.out.println(\"write\"); &#125; &#125;; ENUM$VALUES = (new Singleton[] &#123; INSTANCE &#125;); &#125;&#125; ç±»çš„ä¿®é¥°abstractï¼Œæ‰€ä»¥æ²¡æ³•å®ä¾‹åŒ–ï¼Œåå°„ä¹Ÿæ— èƒ½ä¸ºåŠ›ã€‚ å…³äºçº¿ç¨‹å®‰å…¨çš„ä¿è¯ï¼Œå…¶å®æ˜¯é€šè¿‡ç±»åŠ è½½æœºåˆ¶æ¥ä¿è¯çš„ï¼Œæˆ‘ä»¬çœ‹çœ‹INSTANCEçš„å®ä¾‹åŒ–æ—¶æœºï¼Œæ˜¯åœ¨staticå—ä¸­ï¼ŒJVMåŠ è½½ç±»çš„è¿‡ç¨‹æ˜¾ç„¶æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ å¯¹äºé˜²æ­¢ååºåˆ—åŒ–ç”Ÿæˆæ–°å®ä¾‹çš„é—®é¢˜è¿˜ä¸æ˜¯å¾ˆæ˜ç™½ï¼Œä¸€èˆ¬çš„æ–¹æ³•æˆ‘ä»¬ä¼šåœ¨è¯¥ç±»ä¸­æ·»åŠ ä¸Šå¦‚ä¸‹æ–¹æ³•ï¼Œä¸è¿‡æšä¸¾ä¸­ä¹Ÿæ²¡æœ‰æ˜¾ç¤ºçš„å†™æ˜è¯¥æ–¹æ³•ã€‚ 1234//readResolve to prevent another instance of Singletonprivate Object readResolve()&#123; return INSTANCE;&#125; çº¿ç¨‹ä¸ºä»€ä¹ˆé˜»å¡ï¼Œä¸ºå’Œè¦ä½¿ç”¨å¤šçº¿ç¨‹ï¼Ÿä½¿ç”¨å¤šçº¿ç¨‹æ›´å¤šçš„æ˜¯ä¸ºäº†æé«˜CPUçš„å¹¶å‘ï¼Œå¯ä»¥è®©CPUåŒäº‹å¤„ç†å¤šä¸ªäº‹æƒ…ï¼Œå¤šçº¿ç¨‹åœºæ™¯çš„ä½¿ç”¨åœºæ™¯ï¼š ä¸ºäº†ä¸è®©è€—æ—¶æ“ä½œé˜»å¡ä¸»çº¿ç¨‹ï¼Œå¼€å¯æ–°çº¿ç¨‹æ‰§è¡Œè€—æ—¶æ“ä½œã€‚ æŸç§ä»»åŠ¡è™½ç„¶è€—æ—¶ä½†æ˜¯ä¸æ¶ˆè€—CPUï¼Œä¾‹å¦‚ï¼šç£ç›˜IOï¼Œå¯ä»¥å¼€å¯æ–°çº¿ç¨‹æ¥åšï¼Œå¯ä»¥æ˜¾è‘—çš„æé«˜æ•ˆç‡ã€‚ ä¼˜å…ˆçº§æ¯”è¾ƒä½çš„ä»»åŠ¡ï¼Œä½†æ˜¯éœ€è¦ç»å¸¸å»åšï¼Œä¾‹å¦‚ï¼šGCï¼Œå¯ä»¥å¼€å¯æ–°çº¿ç¨‹æ¥åšã€‚ äº†è§£çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå—ï¼Œæè¿°ä¸€ä¸‹ï¼Ÿçº¿ç¨‹çŠ¶æ€æµç¨‹å›¾å›¾ NEWï¼šåˆ›å»ºçŠ¶æ€ï¼Œçº¿ç¨‹åˆ›å»ºä¹‹åï¼Œä½†æ˜¯è¿˜æœªå¯åŠ¨ã€‚ RUNNABLEï¼šè¿è¡ŒçŠ¶æ€ï¼Œå¤„äºè¿è¡ŒçŠ¶æ€çš„çº¿ç¨‹ï¼Œä½†æœ‰å¯èƒ½å¤„äºç­‰å¾…çŠ¶æ€ï¼Œä¾‹å¦‚ç­‰å¾…CPUã€IOç­‰ã€‚ WAITINGï¼šç­‰å¾…çŠ¶æ€ï¼Œä¸€èˆ¬æ˜¯è°ƒç”¨äº†wait()ã€join()ã€LockSupport.spark()ç­‰æ–¹æ³•ã€‚ TIMED_WAITINGï¼šè¶…æ—¶ç­‰å¾…çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯å¸¦æ—¶é—´çš„ç­‰å¾…çŠ¶æ€ã€‚ä¸€èˆ¬æ˜¯è°ƒç”¨äº†wait(time)ã€join(time)ã€LockSupport.sparkNanos()ã€LockSupport.sparkUnit()ç­‰æ–¹æ³•ã€‚ BLOCKEDï¼šé˜»å¡çŠ¶æ€ï¼Œç­‰å¾…é”çš„é‡Šæ”¾ï¼Œä¾‹å¦‚è°ƒç”¨äº†synchronizedå¢åŠ äº†é”ã€‚ TERMINATEDï¼šç»ˆæ­¢çŠ¶æ€ï¼Œä¸€èˆ¬æ˜¯çº¿ç¨‹å®Œæˆä»»åŠ¡åé€€å‡ºæˆ–è€…å¼‚å¸¸ç»ˆæ­¢ã€‚ NEWã€WAITINGã€TIMED_WAITINGéƒ½æ¯”è¾ƒå¥½ç†è§£ï¼Œæˆ‘ä»¬é‡ç‚¹è¯´ä¸€è¯´RUNNABLEè¿è¡Œæ€å’ŒBLOCKEDé˜»å¡æ€ã€‚ çº¿ç¨‹è¿›å…¥RUNNABLEè¿è¡Œæ€ä¸€èˆ¬åˆ†ä¸ºäº”ç§æƒ…å†µï¼š çº¿ç¨‹è°ƒç”¨sleep(time)åæŸ¥å‡ºäº†ä¼‘çœ æ—¶é—´ çº¿ç¨‹è°ƒç”¨çš„é˜»å¡IOå·²ç»è¿”å›ï¼Œé˜»å¡æ–¹æ³•æ‰§è¡Œå®Œæ¯• çº¿ç¨‹æˆåŠŸçš„è·å–äº†èµ„æºé” çº¿ç¨‹æ­£åœ¨ç­‰å¾…æŸä¸ªé€šçŸ¥ï¼ŒæˆåŠŸçš„è·å¾—äº†å…¶ä»–çº¿ç¨‹å‘å‡ºçš„é€šçŸ¥ çº¿ç¨‹å¤„äºæŒ‚èµ·çŠ¶æ€ï¼Œç„¶åè°ƒç”¨äº†resume()æ¢å¤æ–¹æ³•ï¼Œè§£é™¤äº†æŒ‚èµ·ã€‚ çº¿ç¨‹è¿›å…¥BLOCKEDé˜»å¡æ€ä¸€èˆ¬ä¹Ÿåˆ†ä¸ºäº”ç§æƒ…å†µï¼š çº¿ç¨‹è°ƒç”¨sleep()æ–¹æ³•ä¸»åŠ¨æ”¾å¼ƒå æœ‰çš„èµ„æº çº¿ç¨‹è°ƒç”¨äº†é˜»å¡å¼IOçš„æ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•è¿”å›å‰ï¼Œè¯¥çº¿ç¨‹è¢«é˜»å¡ã€‚ çº¿ç¨‹è§†å›¾è·å¾—ä¸€ä¸ªèµ„æºé”ï¼Œä½†æ˜¯è¯¥èµ„æºé”æ­£è¢«å…¶ä»–çº¿ç¨‹é”æŒæœ‰ã€‚ çº¿ç¨‹æ­£åœ¨ç­‰å¾…æŸä¸ªé€šçŸ¥ çº¿ç¨‹è°ƒåº¦å™¨è°ƒç”¨suspend()æ–¹æ³•å°†è¯¥çº¿ç¨‹æŒ‚èµ· æˆ‘ä»¬å†æ¥çœ‹çœ‹å’Œçº¿ç¨‹çŠ¶æ€ç›¸å…³çš„ä¸€äº›æ–¹æ³•ã€‚ sleep()æ–¹æ³•è®©å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹åœ¨æŒ‡å®šæ—¶é—´å†…æš‚åœæ‰§è¡Œï¼Œæ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯ä»¥é€šè¿‡Thread.currentThread()æ–¹æ³•è·å–ã€‚ yield()æ–¹æ³•æ”¾å¼ƒçº¿ç¨‹æŒæœ‰çš„CPUèµ„æºï¼Œå°†å…¶è®©ç»™å…¶ä»–ä»»åŠ¡å»å ç”¨CPUæ‰§è¡Œæ—¶é—´ã€‚ä½†æ”¾å¼ƒçš„æ—¶é—´ä¸ç¡®å®šï¼Œæœ‰å¯èƒ½åˆšåˆšæ”¾å¼ƒï¼Œé©¬ä¸Šåˆè·å¾—CPUæ—¶é—´ç‰‡ã€‚ wait()æ–¹æ³•æ˜¯å½“å‰æ‰§è¡Œä»£ç çš„çº¿ç¨‹è¿›è¡Œç­‰å¾…ï¼Œå°†å½“å‰çº¿ç¨‹æ”¾å…¥é¢„æ‰§è¡Œé˜Ÿåˆ—ï¼Œå¹¶åœ¨wait()æ‰€åœ¨çš„ä»£ç å¤„åœæ­¢æ‰§è¡Œï¼ŒçŸ¥é“æ¥åˆ°é€šçŸ¥æˆ–è€…è¢«ä¸­æ–­ä¸ºæ­¢ã€‚è¯¥æ–¹æ³•å¯ä»¥ä½¿å¾—è°ƒç”¨è¯¥æ–¹æ³•çš„çº¿ç¨‹é‡Šæ”¾å…±äº«èµ„æºçš„é”ï¼Œç„¶åä»è¿è¡ŒçŠ¶æ€é€€å‡ºï¼Œè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œç›´åˆ°å†æ¬¡è¢«å”¤é†’ã€‚è¯¥æ–¹æ³•åªèƒ½åœ¨åŒæ­¥ä»£ç å—é‡Œè°ƒç”¨ï¼Œå¦åˆ™ä¼šæŠ›å‡ºIllegalMonitorStateExceptionå¼‚å¸¸ã€‚ wait(long millis)æ–¹æ³•ç­‰å¾…æŸä¸€æ®µæ—¶é—´å†…æ˜¯å¦æœ‰çº¿ç¨‹å¯¹é”è¿›è¡Œå”¤é†’ï¼Œå¦‚æœè¶…è¿‡äº†è¿™ä¸ªæ—¶é—´åˆ™è‡ªåŠ¨å”¤é†’ã€‚ notify()æ–¹æ³•ç”¨æ¥é€šçŸ¥é‚£äº›å¯èƒ½ç­‰å¾…è¯¥å¯¹è±¡çš„å¯¹è±¡é”çš„å…¶ä»–çº¿ç¨‹ï¼Œè¯¥æ–¹æ³•å¯ä»¥éšæœºå”¤é†’ç­‰å¾…é˜Ÿåˆ—ä¸­ç­‰åŒä¸€å…±äº«èµ„æºçš„ä¸€ä¸ªçº¿ç¨‹ï¼Œå¹¶ä½¿è¯¥çº¿ç¨‹é€€å‡ºç­‰å¾…é˜Ÿåˆ—ï¼Œè¿›å…¥å¯è¿è¡ŒçŠ¶æ€ã€‚ notifyAll()æ–¹æ³•å¯ä»¥æ˜¯æ‰€æœ‰æ­£åœ¨ç­‰å¾…é˜Ÿåˆ—ä¸­ç­‰å¾…åŒä¸€å…±äº«èµ„æºçš„å…¨éƒ¨çº¿ç¨‹ä»ç­‰å¾…çŠ¶æ€é€€å‡ºï¼Œè¿›å…¥å¯è¿è¡ŒçŠ¶æ€ï¼Œä¸€èˆ¬ä¼šæ˜¯ä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹å…ˆæ‰§è¡Œï¼Œä½†æ˜¯æ ¹æ®è™šæ‹Ÿæœºçš„å®ç°ä¸åŒï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯éšæœºæ‰§è¡Œã€‚ join()æ–¹æ³•å¯ä»¥è®©è°ƒç”¨å®ƒçš„çº¿ç¨‹æ­£å¸¸æ‰§è¡Œå®Œæˆåï¼Œå†å»æ‰§è¡Œè¯¥çº¿ç¨‹åé¢çš„ä»£ç ï¼Œå®ƒå…·æœ‰è®©çº¿ç¨‹æ’é˜Ÿçš„ä½œç”¨ã€‚ çº¿ç¨‹æ± äº†è§£å—ï¼Œæœ‰å‡ ç§çº¿ç¨‹æ± ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼ŸExecutorsç±»æä¾›äº†ä¸€ç³»åˆ—å·¥å‚æ–¹æ³•ç”¨æ¥åˆ›å»ºçº¿ç¨‹æ± ã€‚è¿™äº›çº¿ç¨‹æ˜¯é€‚ç”¨äºä¸åŒçš„åœºæ™¯ã€‚ newCachedThreadPool()ï¼šæ— ç•Œå¯è‡ªåŠ¨å›æ”¶çº¿ç¨‹æ± ï¼ŒæŸ¥çœ‹çº¿ç¨‹æ± ä¸­æœ‰æ²¡æœ‰ä»¥å‰å»ºç«‹çš„çº¿ç¨‹ï¼Œå¦‚æœæœ‰åˆ™å¤ç”¨ï¼Œå¦‚æœæ²¡æœ‰åˆ™å»ºç«‹ä¸€ä¸ªæ–°çš„çº¿ç¨‹åŠ å…¥æ± ä¸­ï¼Œæ± ä¸­çš„çº¿ç¨‹è¶…è¿‡60sä¸æ´»åŠ¨åˆ™è‡ªåŠ¨ç»ˆæ­¢ã€‚é€‚ç”¨äºç”Ÿå‘½å‘¨æœŸæ¯”è¾ƒçŸ­çš„å¼‚æ­¥ä»»åŠ¡ã€‚ newFixedThreadPool(int nThreads)ï¼šå›ºå®šå¤§å°çº¿ç¨‹æ± ï¼Œä¸newCachedThreadPool()ç±»ä¼¼ï¼Œä½†æ˜¯æ± ä¸­æŒæœ‰å›ºå®šæ•°ç›®çš„çº¿ç¨‹ï¼Œä¸èƒ½éšæ—¶åˆ›å»ºçº¿ç¨‹ï¼Œå¦‚æœåˆ›å»ºæ–°çº¿ç¨‹æ—¶ï¼Œè¶…è¿‡äº†å›ºå®šçº¿ç¨‹æ•°ï¼Œåˆ™æ”¾åœ¨é˜Ÿåˆ—é‡Œç­‰å¾…ï¼Œç›´åˆ°æ± ä¸­çš„æŸä¸ªçº¿ç¨‹è¢«ç§»é™¤æ—¶ï¼Œæ‰åŠ å…¥æ± ä¸­ã€‚é€‚ç”¨äºå¾ˆç¨³å®šã€å¾ˆæ­£è§„çš„å¹¶å‘çº¿ç¨‹ï¼Œå¤šç”¨äºæœåŠ¡å™¨ã€‚ newScheduledThreadPool(int corePoolSize)ï¼šå‘¨æœŸä»»åŠ¡çº¿ç¨‹æ± ï¼Œè¯¥çº¿ç¨‹æ± çš„çº¿ç¨‹å¯ä»¥æŒ‰ç…§delayä¾æ¬¡æ‰§è¡Œçº¿ç¨‹ï¼Œä¹Ÿå¯ä»¥å‘¨æœŸæ‰§è¡Œã€‚ newSingleThreadExecutor()ï¼šå•ä¾‹çº¿ç¨‹æ± ï¼Œä»»æ„æ—¶é—´å†…æ± ä¸­åªæœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚ ThreadLocalçš„åŸç†äº†è§£å—ï¼ŸThreadLocalæ˜¯ä¸€ä¸ªå…³äºåˆ›å»ºçº¿ç¨‹å±€éƒ¨å˜é‡çš„ç±»ã€‚ä½¿ç”¨åœºæ™¯å¦‚ä¸‹æ‰€ç¤ºï¼š å®ç°å•ä¸ªçº¿ç¨‹å•ä¾‹ä»¥åŠå•ä¸ªçº¿ç¨‹ä¸Šä¸‹æ–‡ä¿¡æ¯å­˜å‚¨ï¼Œæ¯”å¦‚äº¤æ˜“idç­‰ã€‚ å®ç°çº¿ç¨‹å®‰å…¨ï¼Œéçº¿ç¨‹å®‰å…¨çš„å¯¹è±¡ä½¿ç”¨ThreadLocalä¹‹åå°±ä¼šå˜å¾—çº¿ç¨‹å®‰å…¨ï¼Œå› ä¸ºæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šæœ‰ä¸€ä¸ªå¯¹åº”çš„å®ä¾‹ã€‚ æ‰¿è½½ä¸€äº›çº¿ç¨‹ç›¸å…³çš„æ•°æ®ï¼Œé¿å…åœ¨æ–¹æ³•ä¸­æ¥å›ä¼ é€’å‚æ•°ã€‚ waitå’Œnotifyæœºåˆ¶ï¼Œæ‰‹å†™ä¸€ä¸‹ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å‹ï¼Ÿç”Ÿæˆè€…æ¶ˆè´¹è€…æ¨¡å‹ ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…åœ¨åŒä¸€æ—¶é—´æ®µå†…å…±ç”¨åŒä¸€ä¸ªå­˜å‚¨ç©ºé—´ï¼Œç”Ÿäº§è€…å¾€å­˜å‚¨ç©ºé—´ä¸­æ·»åŠ äº§å“ï¼Œæ¶ˆè´¹è€…ä»å­˜å‚¨ç©ºé—´ä¸­å–èµ°äº§å“ï¼Œå½“å­˜å‚¨ç©ºé—´ä¸ºç©ºæ—¶ï¼Œæ¶ˆè´¹è€…é˜»å¡ï¼Œå½“å­˜å‚¨ç©ºé—´æ»¡æ—¶ï¼Œç”Ÿäº§è€…é˜»å¡ã€‚ wait()å’Œnotify()æ–¹æ³•çš„å®ç°ç”Ÿæˆè€…æ¶ˆè´¹è€…æ¨¡å‹ï¼Œç¼“å†²åŒºæ»¡å’Œä¸ºç©ºæ—¶éƒ½è°ƒç”¨wait()æ–¹æ³•ç­‰å¾…ï¼Œå½“ç”Ÿäº§è€…ç”Ÿäº§äº†ä¸€ä¸ªäº§å“æˆ–è€…æ¶ˆè´¹è€…æ¶ˆè´¹äº†ä¸€ä¸ªäº§å“ä¹‹åä¼šå”¤é†’æ‰€æœ‰çº¿ç¨‹ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465public class ProducerAndCustomerModel &#123; private static Integer count = 0; private static final Integer FULL = 10; private static String LOCK = \"lock\"; public static void main(String[] args) &#123; ProducerAndCustomerModel PACM = new ProducerAndCustomerModel(); new Thread(PACM.new Producer()).start(); new Thread(PACM.new Consumer()).start(); new Thread(PACM.new Producer()).start(); new Thread(PACM.new Consumer()).start(); new Thread(PACM.new Producer()).start(); new Thread(PACM.new Consumer()).start(); new Thread(PACM.new Producer()).start(); new Thread(PACM.new Consumer()).start(); &#125; class Producer implements Runnable &#123; @Override public void run() &#123; for (int i = 0; i &lt; 10; i++) &#123; try &#123; Thread.sleep(3000); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; synchronized (LOCK) &#123; while (count == FULL) &#123; try &#123; LOCK.wait(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; count++; System.out.println(Thread.currentThread().getName() + \"ç”Ÿäº§è€…ç”Ÿäº§ï¼Œç›®å‰æ€»å…±æœ‰\" + count); LOCK.notifyAll(); &#125; &#125; &#125; &#125; class Consumer implements Runnable &#123; @Override public void run() &#123; for (int i = 0; i &lt; 10; i++) &#123; try &#123; Thread.sleep(3000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; synchronized (LOCK) &#123; while (count == 0) &#123; try &#123; LOCK.wait(); &#125; catch (Exception e) &#123; &#125; &#125; count--; System.out.println(Thread.currentThread().getName() + \"æ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œç›®å‰æ€»å…±æœ‰\" + count); LOCK.notifyAll(); &#125; &#125; &#125; &#125;&#125; æ­»é”æ˜¯å¦‚ä½•å‘ç”Ÿçš„ï¼Œå¦‚ä½•é¿å…æ­»é”ï¼Ÿå½“çº¿ç¨‹AæŒæœ‰ç‹¬å é”aï¼Œå¹¶å°è¯•å»è·å–ç‹¬å é”bçš„åŒæ—¶ï¼Œçº¿ç¨‹BæŒæœ‰ç‹¬å é”bï¼Œå¹¶å°è¯•è·å–ç‹¬å é”açš„æƒ…å†µä¸‹ï¼Œå°±ä¼šå‘ç”ŸABä¸¤ä¸ªçº¿ç¨‹ç”±äºäº’ç›¸æŒæœ‰å¯¹æ–¹éœ€è¦çš„é”ï¼Œè€Œå‘ç”Ÿçš„é˜»å¡ç°è±¡ï¼Œæˆ‘ä»¬ç§°ä¸ºæ­»é”ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849public class DeadLockDemo &#123; public static void main(String[] args) &#123; // çº¿ç¨‹a Thread td1 = new Thread(new Runnable() &#123; public void run() &#123; DeadLockDemo.method1(); &#125; &#125;); // çº¿ç¨‹b Thread td2 = new Thread(new Runnable() &#123; public void run() &#123; DeadLockDemo.method2(); &#125; &#125;); td1.start(); td2.start(); &#125; public static void method1() &#123; synchronized (String.class) &#123; try &#123; Thread.sleep(2000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(\"çº¿ç¨‹aå°è¯•è·å–integer.class\"); synchronized (Integer.class) &#123; &#125; &#125; &#125; public static void method2() &#123; synchronized (Integer.class) &#123; try &#123; Thread.sleep(2000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(\"çº¿ç¨‹bå°è¯•è·å–String.class\"); synchronized (String.class) &#123; &#125; &#125; &#125;&#125; é€ æˆæ­»é”çš„å››ä¸ªæ¡ä»¶ï¼š äº’æ–¥æ¡ä»¶ï¼šä¸€ä¸ªèµ„æºæ¯æ¬¡åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ã€‚ è¯·æ±‚ä¸ä¿æŒæ¡ä»¶ï¼šä¸€ä¸ªçº¿ç¨‹å› è¯·æ±‚èµ„æºè€Œé˜»å¡æ—¶ï¼Œå¯¹å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾ã€‚ ä¸å‰¥å¤ºæ¡ä»¶ï¼šçº¿ç¨‹å·²è·å¾—çš„èµ„æºï¼Œåœ¨æœªä½¿ç”¨å®Œä¹‹å‰ï¼Œä¸èƒ½å¼ºè¡Œå‰¥å¤ºã€‚ å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šè‹¥å¹²çº¿ç¨‹ä¹‹é—´å½¢æˆä¸€ç§å¤´å°¾ç›¸æ¥çš„å¾ªç¯ç­‰å¾…èµ„æºå…³ç³»ã€‚ åœ¨å¹¶å‘ç¨‹åºä¸­ï¼Œé¿å…äº†é€»è¾‘ä¸­å‡ºç°å¤æ•°ä¸ªçº¿ç¨‹äº’ç›¸æŒæœ‰å¯¹æ–¹çº¿ç¨‹æ‰€éœ€è¦çš„ç‹¬å é”çš„çš„æƒ…å†µï¼Œå°±å¯ä»¥é¿å…æ­»é”ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051public class BreakDeadLockDemo &#123; public static void main(String[] args) &#123; // çº¿ç¨‹a Thread td1 = new Thread(new Runnable() &#123; public void run() &#123; BreakDeadLockDemo.method1(); &#125; &#125;); // çº¿ç¨‹b Thread td2 = new Thread(new Runnable() &#123; public void run() &#123; BreakDeadLockDemo.method2(); &#125; &#125;); td1.start(); td2.start(); &#125; public static void method1() &#123; synchronized (String.class) &#123; try &#123; Thread.sleep(2000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(\"çº¿ç¨‹aå°è¯•è·å–integer.class\"); synchronized (Integer.class) &#123; System.out.println(\"çº¿ç¨‹aè·å–åˆ°integer.class\"); &#125; &#125; &#125; public static void method2() &#123; // ä¸å†è·å–çº¿ç¨‹aéœ€è¦çš„Integer.classé”ã€‚ synchronized (String.class) &#123; try &#123; Thread.sleep(2000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(\"çº¿ç¨‹bå°è¯•è·å–Integer.class\"); synchronized (Integer.class) &#123; System.out.println(\"çº¿ç¨‹bè·å–åˆ°Integer.class\"); &#125; &#125; &#125;&#125; äº†è§£Javaæ³¨è§£çš„åŸç†å—ï¼Œæ³¨è§£å¦‚ä½•è·å–ï¼Ÿæ³¨è§£ç›¸å½“äºä¸€ç§æ ‡è®°ï¼Œåœ¨ç¨‹åºä¸­åŠ äº†æ³¨è§£å°±ç­‰äºä¸ºç¨‹åºæ‰“ä¸Šäº†æŸç§æ ‡è®°ã€‚ç¨‹åºå¯ä»¥åˆ©ç”¨Javaçš„åå°„æœºåˆ¶æ¥äº†è§£ä½ çš„ç±»åŠå„ç§å…ƒç´ ä¸Šæœ‰æ— ä½•ç§æ ‡è®°ï¼Œé’ˆå¯¹ä¸åŒçš„æ ‡è®°ï¼Œå°±å»åšç›¸åº”çš„äº‹ä»¶ã€‚æ ‡è®°å¯ä»¥åŠ åœ¨åŒ…ï¼Œç±»ï¼Œå­—æ®µï¼Œæ–¹æ³•ï¼Œæ–¹æ³•çš„å‚æ•°ä»¥åŠå±€éƒ¨å˜é‡ä¸Šã€‚ Stringä¸ºä»€ä¹ˆè¦è®¾è®¡æˆä¸å¯å˜ï¼ŒStringBufferä¸StringBuilderæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ Stringæ˜¯ä¸å¯å˜çš„ï¼ˆä¿®æ”¹Stringæ—¶ï¼Œä¸ä¼šåœ¨åŸæœ‰çš„å†…å­˜åœ°å€ä¿®æ”¹ï¼Œè€Œæ˜¯é‡æ–°æŒ‡å‘ä¸€ä¸ªæ–°å¯¹è±¡ï¼‰ï¼ŒStringç”¨finalä¿®é¥°ï¼Œä¸å¯ç»§æ‰¿ï¼ŒStringæœ¬è´¨ä¸Šæ˜¯ä¸ªfinalçš„char[]æ•°ç»„ï¼Œæ‰€ä»¥char[]æ•°ç»„çš„å†…å­˜åœ°å€ä¸ä¼šè¢«ä¿®æ”¹ï¼Œè€Œä¸”Stringä¹Ÿæ²¡æœ‰å¯¹å¤–æš´éœ²ä¿®æ”¹char[]æ•°ç»„çš„æ–¹æ³•ã€‚ä¸å¯å˜æ€§å¯ä»¥ä¿è¯çº¿ç¨‹å®‰å…¨ä»¥åŠå­—ç¬¦ä¸²ä¸²å¸¸é‡æ± çš„å®ç°ã€‚ StringBufferæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ StringBuilderæ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚ Javaé‡Œçš„å¹‚ç­‰æ€§äº†è§£å—ï¼Ÿ å¹‚ç­‰æ€§åŸæœ¬æ˜¯æ•°å­¦ä¸Šçš„ä¸€ä¸ªæ¦‚å¿µï¼Œå³ï¼šf(x) = f(f(x))ï¼Œå¯¹åŒä¸€ä¸ªç³»ç»Ÿï¼Œä½¿ç”¨åŒæ ·çš„æ¡ä»¶ï¼Œä¸€æ¬¡è¯·æ±‚å’Œé‡å¤çš„å¤šæ¬¡è¯·æ±‚å¯¹ç³»ç»Ÿèµ„æºçš„å½±å“æ˜¯ä¸€è‡´çš„ã€‚ å¹‚ç­‰æ€§æœ€ä¸ºå¸¸è§çš„åº”ç”¨å°±æ˜¯ç”µå•†çš„å®¢æˆ·ä»˜æ¬¾ï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœä½ åœ¨ä»˜æ¬¾çš„æ—¶å€™å› ä¸ºç½‘ç»œç­‰å„ç§é—®é¢˜å¤±è´¥äº†ï¼Œç„¶ååˆå»é‡å¤çš„ä»˜äº†ä¸€æ¬¡ï¼Œæ˜¯ä¸€ç§å¤šä¹ˆç³Ÿç³•çš„ä½“éªŒã€‚å¹‚ç­‰æ€§å°±æ˜¯ä¸ºäº†è§£å†³è¿™æ ·çš„é—®é¢˜ã€‚ å®ç°å¹‚ç­‰æ€§å¯å¯ä»¥ä½¿ç”¨Tokenæœºåˆ¶ã€‚ æ ¸å¿ƒæ€æƒ³æ˜¯ä¸ºæ¯ä¸€æ¬¡æ“ä½œç”Ÿæˆä¸€ä¸ªå”¯ä¸€æ€§çš„å‡­è¯ï¼Œä¹Ÿå°±æ˜¯tokenã€‚ä¸€ä¸ªtokenåœ¨æ“ä½œçš„æ¯ä¸€ä¸ªé˜¶æ®µåªæœ‰ä¸€æ¬¡æ‰§è¡Œæƒï¼Œä¸€æ—¦æ‰§è¡ŒæˆåŠŸåˆ™ä¿å­˜æ‰§è¡Œç»“æœã€‚å¯¹é‡å¤çš„è¯·æ±‚ï¼Œè¿”å›åŒä¸€ä¸ªç»“æœã€‚ ä¾‹å¦‚ï¼šç”µå•†å¹³å°ä¸Šçš„è®¢å•idå°±æ˜¯æœ€é€‚åˆçš„tokenã€‚å½“ç”¨æˆ·ä¸‹å•æ—¶ï¼Œä¼šç»å†å¤šä¸ªç¯èŠ‚ï¼Œæ¯”å¦‚ç”Ÿæˆè®¢å•ï¼Œå‡åº“å­˜ï¼Œå‡ä¼˜æƒ åˆ¸ç­‰ç­‰ã€‚æ¯ä¸€ä¸ªç¯èŠ‚æ‰§è¡Œæ—¶éƒ½å…ˆæ£€æµ‹ä¸€ä¸‹è¯¥è®¢å•idæ˜¯å¦å·²ç»æ‰§è¡Œè¿‡è¿™ä¸€æ­¥éª¤ï¼Œå¯¹æœªæ‰§è¡Œçš„è¯·æ±‚ï¼Œæ‰§è¡Œæ“ä½œå¹¶ç¼“å­˜ç»“æœï¼Œè€Œå¯¹å·²ç»æ‰§è¡Œè¿‡çš„idï¼Œåˆ™ç›´æ¥è¿”å›ä¹‹å‰çš„æ‰§è¡Œç»“æœï¼Œä¸åšä»»ä½•æ“ä½œã€‚è¿™æ ·å¯ä»¥åœ¨æœ€å¤§ç¨‹åº¦ä¸Šé¿å…æ“ä½œçš„é‡å¤æ‰§è¡Œé—®é¢˜ï¼Œç¼“å­˜èµ·æ¥çš„æ‰§è¡Œç»“æœä¹Ÿèƒ½ç”¨äºäº‹åŠ¡çš„æ§åˆ¶ç­‰ã€‚ Javaæ³›å‹äº†è§£å—ï¼ŒçŸ¥é“å®ƒçš„è¿è¡Œæœºåˆ¶å—ï¼Ÿ æ³›å‹æ˜¯ä¸ºäº†å‚æ•°åŒ–ç±»å‹ã€‚ ä¸ºä»€ä¹ˆä½¿ç”¨æ³›å‹ï¼Ÿ ç›¸å¯¹äºä½¿ç”¨Objectè¿™ç§ç®€å•ç²—æš´çš„æ–¹å¼ï¼Œæ³›å‹æä¾›äº†ä¸€ç§å‚æ•°åŒ–çš„èƒ½åŠ›ï¼Œä½¿å¾—æ•°æ®çš„ç±»å‹å¯ä»¥åƒå‚æ•°ä¸€æ ·è¢«ä¼ é€’è¿›æ¥ï¼Œè¿™æä¾›äº†ä¸€ç§æ‰©å±•èƒ½åŠ›ã€‚ å½“æ•°æ®ç±»å‹ç¡®å®šä»¥åï¼Œæä¾›äº†ä¸€ç§ç±»å‹æ£€æµ‹æœºåˆ¶ï¼Œåªæœ‰ç›¸åŒ¹é…çš„æ•°æ®æ‰å¯ä»¥æ­£å¸¸èµ‹å€¼ï¼Œå¦åˆ™ç¼–è¯‘é”™è¯¯ï¼Œå¢å¼ºäº†å®‰å…¨æ€§ã€‚ æ³›å‹æé«˜äº†ä»£ç çš„å¯è¯»æ€§ï¼Œä¸å¿…ç­‰åˆ°è¿è¡Œæ—¶é‡‡å–æ‰§è¡Œç±»å‹è½¬æ¢ï¼Œåœ¨ç¼–å†™ä»£ç é˜¶æ®µï¼Œç¨‹åºå‘˜å°±å¯ä»¥é€šè¿‡å‚æ•°ä¹¦å†™æ­£ç¡®çš„æ•°æ®ç±»å‹ã€‚ é™¤äº†ç”¨ è¡¨ç¤ºæ³›å‹å¤–ï¼Œè¿˜æœ‰ &lt;?&gt; è¿™ç§å½¢å¼ã€‚? è¢«ç§°ä¸ºé€šé…ç¬¦ã€‚ &lt;?&gt; è¢«ç§°ä½œæ— é™å®šçš„é€šé…ç¬¦ã€‚ &lt;? extends T&gt; è¢«ç§°ä½œæœ‰ä¸Šé™çš„é€šé…ç¬¦ã€‚ &lt;? super T&gt; è¢«ç§°ä½œæœ‰ä¸‹é™çš„é€šé…ç¬¦ã€‚ Javaé‡Œçš„åå°„ä¸ºä½•ä¼šæ¶ˆè€—æ€§èƒ½ï¼Ÿåå°„æ…¢ä¸»è¦å› ä¸ºåå°„æ˜¯åŠ¨æ€ç±»å‹ï¼Œè¿™æ ·å¯¼è‡´æŠŠåœ¨zhuang Javaçš„ç±»å‹æ“¦é™¤ï¼ŒçŸ¥é“å®ƒçš„åŸç†å—ï¼Ÿ æ³›å‹ä¿¡æ¯åªå­˜åœ¨ä»£ç ç¼–è¯‘é˜¶æ®µï¼Œåœ¨è¿›å…¥JVMä¹‹å‰ï¼Œä¸æ³›å‹ç›¸å…³çš„ä¿¡æ¯éƒ½ä¼šè¢«æ“¦é™¤æ‰ã€‚ åœ¨ç±»å‹æ“¦é™¤çš„æ—¶å€™ï¼Œå¦‚æœæ³›å‹ç±»é‡Œçš„ç±»å‹å‚æ•°æ²¡æœ‰æŒ‡å®šä¸Šé™ï¼Œä¾‹å¦‚ï¼šï¼Œåˆ™ä¼šè¢«è½¬æˆObjectç±»å‹ï¼Œå¦‚æœæŒ‡å®šäº†ä¸Šé™ï¼Œä¾‹å¦‚ï¼šï¼Œåˆ™ä¼šè¢«ä¼ æ¢æˆå¯¹åº”çš„ç±»å‹ä¸Šé™ã€‚ é—­åŒ…äº†è§£å—ï¼ŒJavaé‡Œæœ‰é—­åŒ…å—ï¼Ÿ ã€Œå‡½æ•°ã€å’Œã€Œå‡½æ•°å†…éƒ¨èƒ½è®¿é—®åˆ°çš„å˜é‡ã€ï¼ˆä¹Ÿå«ç¯å¢ƒï¼‰çš„æ€»å’Œï¼Œå°±æ˜¯ä¸€ä¸ªé—­åŒ…ã€‚ 12345678fun main(args: Array&lt;String&gt;) &#123; test&#125;val test = if (5 &gt; 3) &#123; print(\"yes\")&#125; else &#123; print(\"no\")&#125; Lambdaè¡¨è¾¾å¼äº†è§£å—ï¼Ÿ Lambda è¡¨è¾¾å¼ä¿—ç§°åŒ¿åå‡½æ•°ã€‚Kotlin çš„ Lambdaè¡¨è¾¾å¼æ›´â€œçº¯ç²¹â€ä¸€ç‚¹ï¼Œ å› ä¸ºå®ƒæ˜¯çœŸæ­£æŠŠLambdaæŠ½è±¡ä¸ºäº†ä¸€ç§ç±»å‹ï¼Œè€Œ Java 8 çš„ Lambda åªæ˜¯å•æ–¹æ³•åŒ¿åæ¥å£å®ç°çš„è¯­æ³•ç³–ç½¢äº†ã€‚ 1234567val printMsg = &#123; msg: String -&gt; println(msg) &#125;fun main(args: Array&lt;String&gt;) &#123; printMsg(\"hello\")&#125; é«˜é˜¶å‡½æ•°äº†è§£å—ï¼Ÿ å½“å®šä¹‰ä¸€ä¸ªé—­åŒ…ä½œä¸ºå‚æ•°çš„å‡½æ•°ï¼Œç§°è¿™ä¸ªå‡½æ•°ä¸ºé«˜é˜¶å‡½æ•°ã€‚ 1234567891011fun main(args: Array&lt;String&gt;) &#123; log(\"world\", printMsg)&#125;val printMsg = &#123; str: String -&gt; println(str)&#125;val log = &#123; str: String, printLog: (String) -&gt; Unit -&gt; printLog(str)&#125;","categories":[],"tags":[{"name":"Interview","slug":"Interview","permalink":"https://edward7zhang.github.io/tags/Interview/"},{"name":"Java","slug":"Java","permalink":"https://edward7zhang.github.io/tags/Java/"}]},{"title":"Androidé¢è¯•é¢˜é›†","slug":"Androidé¢è¯•é¢˜é›†","date":"2018-04-08T01:07:14.000Z","updated":"2019-03-07T12:03:11.688Z","comments":true,"path":"2018/04/08/Androidé¢è¯•é¢˜é›†/","link":"","permalink":"https://edward7zhang.github.io/2018/04/08/Androidé¢è¯•é¢˜é›†/","excerpt":"","text":"ä¸€æ¬¡æ¬¡çš„æŒ‚äºä¸€é¢è®©æˆ‘ç­‹ç–²åŠ›ç«­â€¦æ„è¯†åˆ°è‡ªå·±å­˜åœ¨çœ¼é«˜æ‰‹ä½çš„çŠ¶æ€â€¦å‡†å¤‡é‡æ–°ä¸Šè·¯å¤¯å®åŸºç¡€æœ¬ç‰‡æ–‡ç« éƒ¨åˆ† Fork from android-interviewå¹¶ä¸”åœ¨æ­¤åŸºç¡€ä¸Šå¯¹ä¸€äº›é—®é¢˜è¿›è¡Œäº†è¡¥å……ã€æ·±å…¥å‰–æ æ‰‹ç”»ä¸€ä¸‹Androidç³»ç»Ÿæ¶æ„å›¾ï¼Œæè¿°ä¸€ä¸‹å„ä¸ªå±‚æ¬¡çš„ä½œç”¨ï¼ŸAndroidç³»ç»Ÿæ¶æ„å›¾ ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡åˆ†ä¸ºå…­å±‚ï¼š åº”ç”¨æ¡†æ¶å±‚ è¿›ç¨‹é€šä¿¡å±‚ ç³»ç»ŸæœåŠ¡å±‚ Androidè¿è¡Œæ—¶å±‚ ç¡¬ä»¶æŠ½è±¡å±‚ Linuxå†…æ ¸å±‚ Activityã€Viewã€Window ä¸‰è€…å…³ç³»è¿™ä¸ªé—®é¢˜çœŸçš„å¾ˆä¸å¥½å›ç­”ï¼Œæ‰€ä»¥è¿™é‡Œå…ˆæ¥ä¸ªç®—æ˜¯æ¯”è¾ƒæ°å½“çš„æ¯”å–»æ¥å½¢å®¹ä¸‹å®ƒä»¬çš„å…³ç³»ã€‚Activity åƒä¸€ä¸ªå·¥åŒ (Control Unit)ï¼ŒWindow åƒçª—æˆ·(æ‰¿è½½æ¨¡å‹)ï¼ŒView åƒçª—èŠ±(æ˜¾ç¤ºè§†å›¾)ï¼ŒLayoutInflater åƒå‰ªåˆ€ï¼ŒXml é…ç½®åƒçª—èŠ±å›¾çº¸ã€‚ Activity æ„é€ çš„æ—¶å€™ä¼šåˆå§‹åŒ–ä¸€ä¸ª Windowï¼Œå‡†ç¡®çš„è¯´æ˜¯ PhoneWindowã€‚ è¿™ä¸ª PhoneWindow æœ‰ä¸€ä¸ªâ€œViewRootâ€ï¼Œè¿™ä¸ªâ€œViewRootâ€æ˜¯ä¸€ä¸ª View æˆ–è€…è¯´ ViewGroupï¼Œæ˜¯æœ€åˆè¯•çš„æ ¹è§†å›¾ â€œViewRootâ€é€šè¿‡ addView æ–¹æ³•æ¥ä¸€ä¸ªä¸ªçš„æ·»åŠ  Viewã€‚æ¯”å¦‚ TextViewï¼ŒButton ç­‰ è¿™äº› View çš„äº‹ä»¶ç›‘å¬ï¼Œæ˜¯ç”± WindowManagerService æ¥æ¥å—æ¶ˆæ¯ï¼Œå¹¶ä¸”å›è°ƒ Activity å‡½æ•°ã€‚æ¯”å¦‚ onClickListenerï¼ŒonKeyDown ç­‰ã€‚å››ç§ LaunchMode åŠå…¶ä½¿ç”¨åœºæ™¯standard æ¨¡å¼è¿™æ˜¯é»˜è®¤æ¨¡å¼ï¼Œæ¯æ¬¡æ¿€æ´» Activity æ—¶éƒ½ä¼šåˆ›å»º Activity å®ä¾‹ï¼Œå¹¶æ”¾å…¥ä»»åŠ¡æ ˆä¸­ã€‚ä½¿ç”¨åœºæ™¯ï¼šå¤§å¤šæ•° ActivitysingleTop æ¨¡å¼å¦‚æœåœ¨ä»»åŠ¡çš„æ ˆé¡¶æ­£å¥½å­˜åœ¨è¯¥ Activity çš„å®ä¾‹ï¼Œå°±é‡ç”¨è¯¥å®ä¾‹(ä¼šè°ƒç”¨å®ä¾‹çš„ onNewIntent())ï¼Œå¦åˆ™å°±ä¼šåˆ›å»ºæ–°çš„å®ä¾‹å¹¶æ”¾å…¥æ ˆé¡¶ï¼Œå³ä½¿æ ˆä¸­å·²ç»å­˜åœ¨è¯¥ Activity çš„å®ä¾‹ï¼Œåªè¦ä¸åœ¨æ ˆé¡¶ï¼Œå°±ä¼šåˆ›å»ºæ–°çš„å®ä¾‹ã€‚ä½¿ç”¨åœºæ™¯å¦‚æ–°é—»ç±»æˆ–è€…é˜…è¯»ç±» App çš„å†…å®¹é¡µé¢ã€‚singleInstance æ¨¡å¼åœ¨ä¸€ä¸ªæ–°æ ˆä¸­åˆ›å»ºè¯¥ Activity çš„å®ä¾‹ï¼Œå¹¶è®©å¤šä¸ªåº”ç”¨å…±äº«è¯¥æ ˆä¸­çš„è¯¥ Activity å®ä¾‹ã€‚ä¸€æ—¦è¯¥æ¨¡å¼çš„ Activity å®ä¾‹å·²ç»å­˜åœ¨äºæŸä¸ªæ ˆä¸­ï¼Œä»»ä½•åº”ç”¨å†æ¿€æ´»è¯¥ Activity æ—¶éƒ½ä¼šé‡ç”¨è¯¥æ ˆä¸­çš„å®ä¾‹(ä¼šè°ƒç”¨å®ä¾‹çš„ onNewIntent())ã€‚å…¶æ•ˆæœç›¸å½“äºå¤šä¸ªåº”ç”¨å…±äº«ä¸€ä¸ªåº”ç”¨ï¼Œä¸ç®¡è°æ¿€æ´»è¯¥ Activity éƒ½ä¼šè¿›å…¥åŒä¸€ä¸ªåº”ç”¨ä¸­ã€‚ä½¿ç”¨åœºæ™¯ï¼šå¦‚é—¹é“ƒæé†’ï¼Œå°†é—¹é“ƒæé†’ä¸é—¹é“ƒè®¾ç½®åˆ†ç¦»ã€‚singleInstance ä¸è¦ç”¨äºä¸­é—´é¡µé¢ï¼Œå¦‚æœç”¨äºä¸­é—´é¡µé¢ï¼Œè·³è½¬ä¼šæœ‰é—®é¢˜ï¼Œæ¯”å¦‚ï¼šA -&gt; B(singleInstance) -&gt; Cï¼Œå®Œå…¨é€€å‡ºåï¼Œå†æ¬¡å¯åŠ¨ï¼Œé¦–å…ˆæ‰“å¼€çš„æ˜¯ Bã€‚ Activityå¦‚ä¸Serviceé€šä¿¡ï¼Ÿå¯ä»¥é€šè¿‡bindServiceçš„æ–¹å¼ï¼Œå…ˆåœ¨Activityé‡Œå®ç°ä¸€ä¸ªServiceConnectionæ¥å£ï¼Œå¹¶å°†è¯¥æ¥å£ä¼ é€’ç»™bindService()æ–¹æ³•ï¼Œåœ¨ServiceConnectionæ¥å£çš„onServiceConnected()æ–¹æ³•é‡Œæ‰§è¡Œç›¸å…³æ“ä½œã€‚æ³¨ï¼šåªæœ‰activities,services,å’Œcontentproviderså¯ä»¥ç»‘å®šåˆ°ä¸€ä¸ªserviceâ€”ä½ ä¸èƒ½ä»ä¸€ä¸ªbroadcastreceiverç»‘å®šåˆ°serviceï¼ Serviceçš„ç”Ÿå‘½å‘¨æœŸä¸å¯åŠ¨æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ startService()ï¼šå¼€å¯Serviceï¼Œè°ƒç”¨è€…é€€å‡ºåServiceä»ç„¶å­˜åœ¨ã€‚ bindService()ï¼šå¼€å¯Serviceï¼Œè°ƒç”¨è€…é€€å‡ºåServiceä¹Ÿéšå³é€€å‡ºã€‚ Serviceç”Ÿå‘½å‘¨æœŸï¼š åªæ˜¯ç”¨startService()å¯åŠ¨æœåŠ¡ï¼šonCreate() -&gt; onStartCommand() -&gt; onDestory åªæ˜¯ç”¨bindService()ç»‘å®šæœåŠ¡ï¼šonCreate() -&gt; onBind() -&gt; onUnBind() -&gt; onDestory åŒæ—¶ä½¿ç”¨startService()å¯åŠ¨æœåŠ¡ä¸bindService()ç»‘å®šæœåŠ¡ï¼šonCreate() -&gt; onStartCommnad() -&gt; onBind() -&gt; onUnBind() -&gt; onDestory Serviceå…ˆstartå†bindå¦‚ä½•å…³é—­serviceï¼Œä¸ºä»€ä¹ˆbindServiceå¯ä»¥è·ŸActivityç”Ÿå‘½å‘¨æœŸè”åŠ¨ï¼Ÿ bindServiceç”Ÿå‘½å‘¨æœŸ é€šè¿‡IBinderä»ä½ çš„å®¢æˆ·ç«¯ç»‘å®šåˆ°ä¸€ä¸ªserviceï¼Œä½ å¿…é¡»ï¼š ï¼‘å®ç°ServiceConnection. ä½ çš„å®ç°å¿…é¡»é‡å†™ä¸¤ä¸ªå›è°ƒæ–¹æ³•ï¼š onServiceConnected() ç³»ç»Ÿè°ƒç”¨è¿™ä¸ªæ¥ä¼ é€åœ¨serviceçš„onBind()ä¸­è¿”å›çš„IBinderï¼ OnServiceDisconnected() Androidç³»ç»Ÿåœ¨åŒserviceçš„è¿æ¥æ„å¤–ä¸¢å¤±æ—¶è°ƒç”¨è¿™ä¸ªï¼æ¯”å¦‚å½“serviceå´©æºƒäº†æˆ–è¢«å¼ºæ€äº†ï¼å½“å®¢æˆ·ç«¯è§£é™¤ç»‘å®šæ—¶ï¼Œè¿™ä¸ªæ–¹æ³•ä¸ä¼šè¢«è°ƒç”¨ï¼ ï¼’è°ƒç”¨bindService()ï¼Œä¼ ç»™å®ƒServiceConnectionçš„å®ç°ï¼ ï¼“å½“ç³»ç»Ÿè°ƒç”¨ä½ çš„onServiceConnected()æ–¹æ³•æ—¶ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨æ¥å£å®šä¹‰çš„æ–¹æ³•ä»¬å¼€å§‹è°ƒç”¨serviceäº†ï¼ ï¼”è¦ä¸serviceæ–­å¼€è¿æ¥ï¼Œè°ƒç”¨unbindService()ï¼ å½“ä½ çš„å®¢æˆ·ç«¯è¢«é”€æ¯ï¼Œå®ƒå°†ä»serviceè§£é™¤ç»‘å®šï¼Œä½†æ˜¯ä½ å¿…é¡»æ€»æ˜¯åœ¨ä½ å®Œæˆä¸serviceçš„äº¤äº’æ—¶æˆ–å½“ä½ çš„activityæš‚åœäºæ˜¯serviceåœ¨ä¸è¢«ä½¿ç”¨æ—¶å¯ä»¥å…³é—­æ­¤ä¸¤ç§æƒ…å†µä¸‹è§£ é™¤ç»‘å®šï¼(ä¸‹é¢ä¼šè®¨è®ºæ›´å¤šåœ¨é€‚å½“çš„æ—¶å€™ç»‘å®šå’Œè§£é™¤ç»‘å®šçš„é—®é¢˜ï¼ ä½¿ç”¨è¿™ä¸ªServiceConnectionï¼Œå®¢æˆ·ç«¯å¯ä»¥ç»‘å®šåˆ°ä¸€ä¸ªserviceï¼Œé€šè¿‡æŠŠå®ƒä¼ ç»™bindService()ï¼ä¾‹å¦‚ï¼š 12Intentintent = new Intent(this, LocalService.class);bindService(intent,mConnection, Context.BIND_AUTO_CREATE); ç¬¬ä¸€ä¸ªbindService()çš„å‚æ•°æ˜¯ä¸€ä¸ªæ˜ç¡®æŒ‡å®šäº†è¦ç»‘å®šçš„serviceçš„Intentï¼ ç¬¬äºŒä¸ªå‚æ•°æ˜¯ServiceConnectionå¯¹è±¡ï¼ ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ ‡å¿—ï¼Œå®ƒè¡¨æ˜ç»‘å®šä¸­çš„æ“ä½œï¼å®ƒä¸€èˆ¬åº”æ˜¯BIND_AUTO_CREATEï¼Œè¿™æ ·å°±ä¼šåœ¨serviceä¸å­˜åœ¨æ—¶åˆ›å»ºä¸€ä¸ªï¼å…¶å®ƒå¯é€‰çš„å€¼æ˜¯BIND_DEBUG_UNBINDå’ŒBIND_NOT_FOREGROUND,ä¸æƒ³æŒ‡å®šæ—¶è®¾ä¸º0å³å¯ã€‚ è¡¥å……äº‹é¡¹ä¸‹é¢æ˜¯ä¸€äº›å…³äºç»‘å®šåˆ°serviceçš„é‡è¦äº‹é¡¹ï¼š ä½ æ€»æ˜¯éœ€è¦æ•è·DeadObjectExceptionå¼‚å¸¸ï¼å®ƒä¼šåœ¨è¿æ¥è¢«æ‰“æ–­æ—¶æŠ›å‡ºï¼è¿™æ˜¯è¢«è¿œç¨‹æ–¹æ³•æŠ›å‡ºçš„å”¯ä¸€å¼‚å¸¸ï¼ å¯¹è±¡å¼•ç”¨è®¡æ•°æ˜¯è·¨è¿›ç¨‹çš„ä½œç”¨çš„ï¼ ä½ åº”è¯¥åœ¨å®¢æˆ·ç«¯çš„ç”Ÿå‘½æœŸå†…ä½¿ç»‘å®šå’Œè§£é™¤ç»‘å®šé…å¯¹è¿›è¡Œï¼Œä¾‹å¦‚ï¼š å¦‚æœä½ éœ€è¦åœ¨ä½ çš„activityå¯è§æ—¶ä¸serviceäº¤äº’ï¼Œä½ åº”è¯¥åœ¨onStart()ç»‘å®šå¹¶åœ¨onStop()ä¸­è§£é™¤ç»‘å®šï¼ å¦‚æœä½ æƒ³è®©ä½ çš„activityå³ä½¿åœ¨å®ƒåœæ­¢æ—¶ä¹Ÿèƒ½æ¥æ”¶å›åº”ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨onCreate()ä¸­ç»‘å®šå¹¶åœ¨onDestroy()ä¸­è§£é™¤ç»‘å®šï¼æ³¨æ„è¿™æ„å‘³ç€ä½ çš„activityéœ€è¦ä½¿ç”¨åœ¨è‡ªå·±æ•´ ä¸ªè¿è¡ŒæœŸé—´ä½¿ç”¨service(å³ä½¿ä½äºåå°)ï¼Œæ‰€ä»¥å¦‚æœserviceåœ¨å¦ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œé‚£ä¹ˆä½ å¢åŠ äº†è¿™ä¸ªè¿›ç¨‹çš„è´Ÿæ‹…è€Œä½¿å®ƒå˜å¾—æ›´å®¹æ˜“è¢«ç³»ç»Ÿæ€æ‰ï¼ æ³¨ï¼šä½ ä¸€èˆ¬ä¸åº”è¯¥åœ¨ä½ çš„activityçš„onResume()å’ŒonPause()ä¸­ç»‘å®šå’Œè§£é™¤ç»‘å®šåˆ°serviceï¼Œå› ä¸ºè¿™äº›å›è°ƒæ–¹æ³•,å‡ºç°åœ¨æ¯ä¸ªç”Ÿå‘½æœŸå˜åŒ–ä¸­ï¼Œå¹¶ä¸”ä½ éœ€è¦ä½¿å‘ç”Ÿåœ¨è¿™ äº›å˜åŒ–ä¸­çš„å¤„ç†æœ€å°åŒ–ï¼è¿˜æœ‰ï¼Œå¦‚æœä½ åº”ç”¨ä¸­çš„å¤šä¸ªactivityç»‘å®šåˆ°åŒä¸€ä¸ªserviceï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªå˜åŒ–å‘ç”Ÿåœ¨å…¶ä¸­ä¸¤ä¸ªactivityä¹‹é—´ï¼Œserviceå¯èƒ½åœ¨å½“å‰activityè§£é™¤ç»‘ å®š(pauseä¸­)å’Œä¸‹ä¸€ä¸ªç»‘å®šå‰(rusumeä¸­)è¢«é”€æ¯åˆé‡å»ºï¼ bindServiceå’ŒstartServiceæ··åˆä½¿ç”¨æ—¶ å¦‚æœå…ˆbindService,å†startService:åœ¨bindçš„Activityé€€å‡ºçš„æ—¶å€™,Serviceä¼šæ‰§è¡ŒunBindæ–¹æ³•è€Œä¸æ‰§è¡ŒonDestoryæ–¹æ³•,å› ä¸ºæœ‰startServiceæ–¹æ³•è°ƒç”¨è¿‡,æ‰€ä»¥Activityä¸Serviceè§£é™¤ç»‘å®šåä¼šæœ‰ä¸€ä¸ªä¸è°ƒç”¨è€…æ²¡æœ‰å…³è¿çš„Serviceå­˜åœ¨ å¦‚æœå…ˆbindService,å†startService,å†è°ƒç”¨Context.stopServiceServiceçš„onDestoryæ–¹æ³•ä¸ä¼šç«‹åˆ»æ‰§è¡Œ,å› ä¸ºæœ‰ä¸€ä¸ªä¸Serviceç»‘å®šçš„Activity,ä½†æ˜¯åœ¨Activityé€€å‡ºçš„æ—¶å€™,ä¼šæ‰§è¡ŒonDestory,å¦‚æœè¦ç«‹åˆ»æ‰§è¡ŒstopService,å°±å¾—å…ˆè§£é™¤ç»‘å®š æŠŠä¸Šé¢çš„â€å¦‚æœå…ˆbindService,å†startServiceâ€æ¢æˆâ€å¦‚æœå…ˆstartService,å†bindServiceâ€,ç»“æœæ˜¯ä¸€æ ·çš„ é—®é¢˜:å¦‚æœåœ¨ä¸€ä¸ªActivityçš„onCreateæ–¹æ³•ä¸­,å…ˆbindService(serviceIntent,conn,Context.BIND_AUTO_CREATE);å†startService(serviceIntent);é€€å‡ºè¿™ä¸ªActivityæ—¶,ä¼šæ‰§è¡ŒonUnBindä½†æ˜¯å†æ¬¡è¿›å…¥è¿™ä¸ªActivityçš„æ—¶å€™,ä¸ºä»€ä¹ˆä¸æ‰§è¡ŒonBindæ–¹æ³•äº†?åªæœ‰åœ¨è¿™ä¸ªServiceé”€æ¯å(æ‰§è¡ŒonDestory),å†è¿›è¿™ä¸ªActivityæ‰ä¼šæ‰§è¡ŒonBindï¼Œè¿˜æœ‰å°±æ˜¯å½“æœ‰ä¸¤ä¸ªå®¢æˆ·ç«¯æ—¶ï¼Œåœ¨ç¬¬ä¸€ä¸ªå®¢æˆ·ç«¯startServieå¯åŠ¨æœåŠ¡å†bindServiceç»‘å®šæœåŠ¡,è¿™æ—¶è·³åˆ°ç¬¬äºŒä¸ªå®¢æˆ·ç«¯é‡Œï¼ˆå¯åŠ¨æ—¶ä¼šè°ƒç”¨onBind())ï¼Œå†å®¢æˆ·ç«¯startServieå¯åŠ¨æœåŠ¡å†bindServiceç»‘å®šæœåŠ¡ï¼Œå¯åŠ¨æ—¶ä¸ä¼šè°ƒç”¨ç”¨onBind()äº†(å› ä¸ºä¹‹å‰å®¢æˆ·ç«¯å·²ç»å¯åŠ¨åæ²¡æœ‰onDestory()é”€æ¯Serviceï¼Œæ‰€ä»¥å†å®¢æˆ·ç«¯ç¬¬äºŒæ¬¡ç»‘å®šæœåŠ¡æ—¶ï¼Œåªä¼šè¿”å›IBinderå¯¹è±¡ç»™onServiceConnected())ï¼Œè€Œä¸”è¦æ³¨æ„çš„æ˜¯å½“ï¼Œå½“ç¬¬ä¸€ä¸ªæœåŠ¡å¯åŠ¨å¹¶ç»‘å®šä¸€ä¸ªæœåŠ¡æ—¶ï¼Œå†è·³å»ç¬¬äºŒä¸ªæœåŠ¡ç«¯å¯åŠ¨å¹¶ç»‘å®šè¿™ä¸ªæœåŠ¡æ—¶ï¼Œç¬¬äºŒä¸ªæœåŠ¡ç«¯å†è§£ç»‘æ—¶ï¼Œä¸ä¼šè°ƒç”¨onUnbind()ï¼Œåªæœ‰å›åˆ°ç¬¬ä¸€ä¸ªå®¢æˆ·ç«¯æ—¶ï¼Œè§£ç»‘è¿™æ˜¯æ‰ä¼šè°ƒç”¨onUnbind(),é¡ºåºåè¿‡æ¥ç»“æœæ˜¯ä¸€æ ·çš„ã€‚å¾—å‡ºä¸€ä¸ªç»“è®ºæ˜¯ï¼šå½“ä¸€ä¸ªæœåŠ¡æ²¡è¢«onDestory()é”€æ¯ä¹‹å‰ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªå¯åŠ¨å®ƒçš„å®¢æˆ·ç«¯èƒ½è°ƒç”¨å®ƒçš„onBind()å’ŒonUnbind()ã€‚ å¹¿æ’­åˆ†ä¸ºå“ªå‡ ç§ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ æ™®é€šå¹¿æ’­ï¼šè°ƒç”¨sendBroadcast()å‘é€ï¼Œæœ€å¸¸ç”¨çš„å¹¿æ’­ã€‚ æœ‰åºå¹¿æ’­ï¼šè°ƒç”¨sendOrderedBroadcast()ï¼Œå‘å‡ºå»çš„å¹¿æ’­ä¼šè¢«å¹¿æ’­æ¥å—è€…æŒ‰ç…§é¡ºåºæ¥æ”¶ï¼Œå¹¿æ’­æ¥æ”¶è€…æŒ‰ç…§Priorityå±æ€§å€¼ä»å¤§-å°æ’åºï¼ŒPriorityå±æ€§ç›¸åŒè€…ï¼ŒåŠ¨æ€æ³¨å†Œçš„å¹¿æ’­ä¼˜å…ˆï¼Œå¹¿æ’­æ¥æ”¶è€…è¿˜å¯ä»¥é€‰æ‹©å¯¹å¹¿æ’­è¿›è¡Œæˆªæ–­å’Œä¿®æ”¹ã€‚ å¹¿æ’­çš„ä¸¤ç§æ³¨å†Œæ–¹å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ é™æ€æ³¨å†Œï¼šå¸¸é©»ç³»ç»Ÿï¼Œä¸å—ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå½±å“ï¼Œå³ä¾¿åº”ç”¨é€€å‡ºï¼Œå¹¿æ’­è¿˜æ˜¯å¯ä»¥è¢«æ¥æ”¶ï¼Œè€—ç”µã€å å†…å­˜ã€‚ åŠ¨æ€æ³¨å†Œï¼šéå¸¸é©»ï¼Œè·Ÿéšç»„ä»¶çš„ç”Ÿå‘½å˜åŒ–ï¼Œç»„ä»¶ç»“æŸï¼Œå¹¿æ’­ç»“æŸã€‚åœ¨ç»„ä»¶ç»“æŸå‰ï¼Œéœ€è¦å…ˆç§»é™¤å¹¿æ’­ï¼Œå¦åˆ™å®¹æ˜“é€ æˆå†…å­˜æ³„æ¼ã€‚ å¹¿æ’­å‘é€å’Œæ¥æ”¶çš„åŸç†äº†è§£å—ï¼Ÿ ç»§æ‰¿BroadcastReceiverï¼Œé‡å†™onReceive()æ–¹æ³•ã€‚ é€šè¿‡Binderæœºåˆ¶å‘ActivityManagerServiceæ³¨å†Œå¹¿æ’­ã€‚ é€šè¿‡Binderæœºåˆ¶å‘ActivityMangerServiceå‘é€å¹¿æ’­ã€‚ ActivityManagerServiceæŸ¥æ‰¾ç¬¦åˆç›¸åº”æ¡ä»¶çš„å¹¿æ’­ï¼ˆIntentFilter/Permissionï¼‰çš„BroadcastReceiverï¼Œå°†å¹¿æ’­å‘é€åˆ°BroadcastReceiveræ‰€åœ¨çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­ã€‚ BroadcastReceiveræ‰€åœ¨æ¶ˆæ¯é˜Ÿåˆ—æ‹¿åˆ°æ­¤å¹¿æ’­åï¼Œå›è°ƒå®ƒçš„onReceive()æ–¹æ³•ã€‚ å¹¿æ’­ä¼ è¾“çš„æ•°æ®æ˜¯å¦æœ‰é™åˆ¶ï¼Œæ˜¯å¤šå°‘ï¼Œä¸ºä»€ä¹ˆè¦é™åˆ¶ï¼ŸContentProviderã€ContentResolverä¸ContentObserverä¹‹é—´çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ ContentProviderï¼šç®¡ç†æ•°æ®ï¼Œæä¾›æ•°æ®çš„å¢åˆ æ”¹æŸ¥æ“ä½œï¼Œæ•°æ®æºå¯ä»¥æ˜¯æ•°æ®åº“ã€æ–‡ä»¶ã€XMLã€ç½‘ç»œç­‰ï¼ŒContentProviderä¸ºè¿™äº›æ•°æ®çš„è®¿é—®æä¾›äº†ç»Ÿä¸€çš„æ¥å£ï¼Œå¯ä»¥ç”¨æ¥åšè¿›ç¨‹é—´æ•°æ®å…±äº«ã€‚ ContentResolverï¼šContentResolverå¯ä»¥ä¸åŒURIæ“ä½œä¸åŒçš„ContentProviderä¸­çš„æ•°æ®ï¼Œå¤–éƒ¨è¿›ç¨‹å¯ä»¥é€šè¿‡ContentResolverä¸ContentProviderè¿›è¡Œäº¤äº’ã€‚ ContentObserverï¼šè§‚å¯ŸContentProviderä¸­çš„æ•°æ®å˜åŒ–ï¼Œå¹¶å°†å˜åŒ–é€šçŸ¥ç»™å¤–ç•Œã€‚ é‡åˆ°è¿‡å“ªäº›å…³äºFragmentçš„é—®é¢˜ï¼Œå¦‚ä½•å¤„ç†çš„ï¼Ÿ getActivity()ç©ºæŒ‡é’ˆï¼šè¿™ç§æƒ…å†µä¸€èˆ¬å‘ç”Ÿåœ¨åœ¨å¼‚æ­¥ä»»åŠ¡é‡Œè°ƒç”¨getActivity()ï¼Œè€ŒFragmentå·²ç»onDetach()ï¼Œæ­¤æ—¶å°±ä¼šæœ‰ç©ºæŒ‡é’ˆï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åœ¨Fragmenté‡Œä½¿ç”¨ä¸€ä¸ªå…¨å±€å˜é‡mActivityï¼Œåœ¨onAttach()æ–¹æ³•é‡Œèµ‹å€¼ï¼Œè¿™æ ·å¯èƒ½ä¼šå¼•èµ·å†…å­˜æ³„æ¼ï¼Œä½†æ˜¯å¼‚æ­¥ä»»åŠ¡æ²¡æœ‰åœæ­¢çš„æƒ…å†µä¸‹æœ¬èº«å°±å·²ç»å¯èƒ½å†…å­˜æ³„æ¼ï¼Œç›¸æ¯”ç›´æ¥crashï¼Œè¿™ç§æ–¹å¼æ˜¾å¾—æ›´å¦¥å½“ä¸€äº›ã€‚ Fragmentè§†å›¾é‡å ï¼šåœ¨ç±»onCreate()çš„æ–¹æ³•åŠ è½½Fragmentï¼Œå¹¶ä¸”æ²¡æœ‰åˆ¤æ–­saveInstanceState==nullæˆ–if(findFragmentByTag(mFragmentTag) == null)ï¼Œå¯¼è‡´é‡å¤åŠ è½½äº†åŒä¸€ä¸ªFragmentå¯¼è‡´é‡å ã€‚ï¼ˆPSï¼šreplaceæƒ…å†µä¸‹ï¼Œå¦‚æœæ²¡æœ‰åŠ å…¥å›é€€æ ˆï¼Œåˆ™ä¸åˆ¤æ–­ä¹Ÿä¸ä¼šé€ æˆé‡å ï¼Œä½†å»ºè®®è¿˜æ˜¯ç»Ÿä¸€åˆ¤æ–­ä¸‹ï¼‰ 12345678@Override protected void onCreate(@Nullable Bundle savedInstanceState) &#123;// åœ¨é¡µé¢é‡å¯æ—¶ï¼ŒFragmentä¼šè¢«ä¿å­˜æ¢å¤ï¼Œè€Œæ­¤æ—¶å†åŠ è½½Fragmentä¼šé‡å¤åŠ è½½ï¼Œå¯¼è‡´é‡å  ; if(saveInstanceState == null)&#123; // æˆ–è€… if(findFragmentByTag(mFragmentTag) == null) // æ­£å¸¸æƒ…å†µä¸‹å» åŠ è½½æ ¹Fragment &#125; &#125; Androidé‡Œçš„Intentä¼ é€’çš„æ•°æ®æœ‰å¤§å°é™åˆ¶å—ï¼Œå¦‚ä½•è§£å†³ï¼ŸIntentä¼ é€’æ•°æ®å¤§å°çš„é™åˆ¶å¤§æ¦‚åœ¨1Må·¦å³ï¼Œè¶…è¿‡è¿™ä¸ªé™åˆ¶å°±ä¼šé™é»˜å´©æºƒã€‚å¤„ç†æ–¹å¼å¦‚ä¸‹ï¼š è¿›ç¨‹å†…ï¼šEventBusï¼Œæ–‡ä»¶ç¼“å­˜ã€ç£ç›˜ç¼“å­˜ã€‚ è¿›ç¨‹é—´ï¼šé€šè¿‡ContentProviderè¿›è¡Œæ¬¾è¿›ç¨‹æ•°æ®å…±äº«å’Œä¼ é€’ã€‚ æè¿°ä¸€ä¸‹Androidçš„äº‹ä»¶åˆ†å‘æœºåˆ¶ï¼ŸAndroidäº‹ä»¶åˆ†å‘æœºåˆ¶çš„æœ¬è´¨ï¼šäº‹ä»¶ä»å“ªä¸ªå¯¹è±¡å‘å‡ºï¼Œç»è¿‡å“ªäº›å¯¹è±¡ï¼Œæœ€ç»ˆç”±å“ªä¸ªå¯¹è±¡å¤„ç†äº†è¯¥äº‹ä»¶ã€‚æ­¤å¤„å¯¹è±¡æŒ‡çš„æ˜¯Activityã€Windowä¸Viewã€‚ Androidäº‹ä»¶çš„åˆ†å‘é¡ºåºï¼šActivityï¼ˆWindowï¼‰ -&gt; ViewGroup -&gt; View Androidäº‹ä»¶çš„åˆ†å‘ä¸»è¦ç”±ä¸‰ä¸ªæ–¹æ³•æ¥å®Œæˆï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123456789101112131415// çˆ¶Viewè°ƒç”¨dispatchTouchEvent()å¼€å§‹åˆ†å‘äº‹ä»¶public boolean dispatchTouchEvent(MotionEvent event)&#123; boolean consume = false; // çˆ¶Viewå†³å®šæ˜¯å¦æ‹¦æˆªäº‹ä»¶ if(onInterceptTouchEvent(event))&#123; // çˆ¶Viewè°ƒç”¨onTouchEvent(event)æ¶ˆè´¹äº‹ä»¶ï¼Œå¦‚æœè¯¥æ–¹æ³•è¿”å›trueï¼Œè¡¨ç¤º // è¯¥Viewæ¶ˆè´¹äº†è¯¥äº‹ä»¶ï¼Œåç»­è¯¥äº‹ä»¶åºåˆ—çš„äº‹ä»¶ï¼ˆDownã€Moveã€Upï¼‰å°†ä¸ä¼šåœ¨ä¼ é€’ // è¯¥å…¶ä»–Viewã€‚ consume = onTouchEvent(event); &#125;else&#123; // è°ƒç”¨å­Viewçš„dispatchTouchEvent(event)æ–¹æ³•ç»§ç»­åˆ†å‘äº‹ä»¶ consume = child.dispatchTouchEvent(event); &#125; return consume;&#125; Touch äº‹ä»¶åˆ†å‘ä¸­åªæœ‰ä¸¤ä¸ªä¸»è§’ï¼šViewGroup å’Œ Viewã€‚ViewGroup åŒ…å« onInterceptTouchEventã€dispatchTouchEventã€onTouchEvent ä¸‰ä¸ªç›¸å…³äº‹ä»¶ã€‚View åŒ…å« dispatchTouchEventã€onTouchEvent ä¸¤ä¸ªç›¸å…³äº‹ä»¶ã€‚å…¶ä¸­ ViewGroup åˆç»§æ‰¿äº Viewã€‚ ViewGroup å’Œ View ç»„æˆäº†ä¸€ä¸ªæ ‘çŠ¶ç»“æ„ï¼Œæ ¹èŠ‚ç‚¹ä¸º Activity å†…éƒ¨åŒ…å«çš„ä¸€ä¸ª ViewGroupã€‚ è§¦æ‘¸äº‹ä»¶ç”± Action Downã€Action Moveã€Action Up ç»„æˆï¼Œå…¶ä¸­ä¸€æ¬¡å®Œæ•´çš„è§¦æ‘¸äº‹ä»¶ä¸­ï¼ŒDown å’Œ Up éƒ½åªæœ‰ä¸€ä¸ªï¼ŒMove æœ‰è‹¥å¹²ä¸ªï¼Œå¯ä»¥ä¸º 0 ä¸ªã€‚ å½“ Activity æ¥æ”¶åˆ° Touch äº‹ä»¶æ—¶ï¼Œå°†éå†å­ View è¿›è¡Œ Down äº‹ä»¶çš„åˆ†å‘ã€‚ViewGroup çš„éå†å¯ä»¥çœ‹æˆæ˜¯é€’å½’çš„ã€‚åˆ†å‘çš„ç›®çš„æ˜¯ä¸ºäº†æ‰¾åˆ°çœŸæ­£è¦å¤„ç†æœ¬æ¬¡å®Œæ•´è§¦æ‘¸äº‹ä»¶çš„ Viewï¼Œè¿™ä¸ª View ä¼šåœ¨ onTouchEvent ç»“æœè¿”å› trueã€‚ å½“æŸä¸ªå­ View è¿”å› true æ—¶ï¼Œä¼šç»ˆæ­¢ Down äº‹ä»¶çš„åˆ†å‘ï¼ŒåŒæ—¶åœ¨ ViewGroup ä¸­è®°å½•è¯¥å­ Viewã€‚æ¥ä¸‹å»çš„ Move å’Œ Up äº‹ä»¶å°†ç”±è¯¥å­ View ç›´æ¥è¿›è¡Œå¤„ç†ã€‚ç”±äºå­ View æ˜¯ä¿å­˜åœ¨ ViewGroup ä¸­çš„ï¼Œå¤šå±‚ ViewGroup çš„èŠ‚ç‚¹ç»“æ„æ—¶ï¼Œä¸Šçº§ ViewGroup ä¿å­˜çš„ä¼šæ˜¯çœŸå®å¤„ç†äº‹ä»¶çš„ View æ‰€åœ¨çš„ ViewGroup å¯¹è±¡ï¼šå¦‚ ViewGroup0-ViewGroup1-TextView çš„ç»“æ„ä¸­ï¼ŒTextView è¿”å›äº† trueï¼Œå®ƒå°†è¢«ä¿å­˜åœ¨ ViewGroup1 ä¸­ï¼Œè€Œ ViewGroup1 ä¹Ÿä¼šè¿”å› trueï¼Œè¢«ä¿å­˜åœ¨ ViewGroup0 ä¸­ã€‚å½“ Move å’Œ Up äº‹ä»¶æ¥æ—¶ï¼Œä¼šå…ˆä» ViewGroup0 ä¼ é€’è‡³ ViewGroup1ï¼Œå†ç”± ViewGroup1 ä¼ é€’è‡³ TextViewã€‚ å½“ ViewGroup ä¸­æ‰€æœ‰å­ View éƒ½ä¸æ•è· Down äº‹ä»¶æ—¶ï¼Œå°†è§¦å‘ ViewGroup è‡ªèº«çš„ onTouch äº‹ä»¶ã€‚è§¦å‘çš„æ–¹å¼æ˜¯è°ƒç”¨ super.dispatchTouchEvent å‡½æ•°ï¼Œå³çˆ¶ç±» View çš„ dispatchTouchEvent æ–¹æ³•ã€‚åœ¨æ‰€æœ‰å­ View éƒ½ä¸å¤„ç†çš„æƒ…å†µä¸‹ï¼Œè§¦å‘ Activity çš„ onTouchEvent æ–¹æ³•ã€‚ onInterceptTouchEvent æœ‰ä¸¤ä¸ªä½œç”¨ï¼š1.æ‹¦æˆª Down äº‹ä»¶çš„åˆ†å‘ã€‚2.ç»ˆæ­¢ Up å’Œ Move äº‹ä»¶å‘ç›®æ ‡ View ä¼ é€’ï¼Œä½¿å¾—ç›®æ ‡ View æ‰€åœ¨çš„ ViewGroup æ•è· Up å’Œ Move äº‹ä»¶ã€‚ æè¿°ä¸€ä¸‹Viewçš„ç»˜åˆ¶åŸç†ï¼Ÿ Viewçš„ç»˜åˆ¶æµç¨‹ä¸»è¦åˆ†ä¸ºä¸‰æ­¥ï¼š onMeasureï¼šæµ‹é‡è§†å›¾çš„å¤§å°ï¼Œä»é¡¶å±‚çˆ¶Viewåˆ°å­Viewé€’å½’è°ƒç”¨measure()æ–¹æ³•ï¼Œmeasure()è°ƒç”¨onMeasure()æ–¹æ³•ï¼ŒonMeasure()æ–¹æ³•å®Œæˆç»˜åˆ¶å·¥ä½œã€‚ onLayoutï¼šç¡®å®šè§†å›¾çš„ä½ç½®ï¼Œä»é¡¶å±‚çˆ¶Viewåˆ°å­Viewé€’å½’è°ƒç”¨layout()æ–¹æ³•ï¼Œçˆ¶Viewå°†ä¸Šä¸€æ­¥measure()æ–¹æ³•å¾—åˆ°çš„å­Viewçš„å¸ƒå±€å¤§å°å’Œå¸ƒå±€å‚æ•°ï¼Œå°†å­Viewæ”¾åœ¨åˆé€‚çš„ä½ç½®ä¸Šã€‚ onDrawï¼šç»˜åˆ¶æœ€ç»ˆçš„è§†å›¾ï¼Œé¦–å…ˆViewRootåˆ›å»ºä¸€ä¸ªCanvaså¯¹è±¡ï¼Œç„¶åè°ƒç”¨onDraw()æ–¹æ³•è¿›è¡Œç»˜åˆ¶ã€‚onDraw()æ–¹æ³•çš„ç»˜åˆ¶æµç¨‹ä¸ºï¼šâ‘  ç»˜åˆ¶è§†å›¾èƒŒæ™¯ã€‚â‘¡ ç»˜åˆ¶ç”»å¸ƒçš„å›¾å±‚ã€‚ â‘¢ ç»˜åˆ¶Viewå†…å®¹ã€‚â‘£ ç»˜åˆ¶å­è§†å›¾ï¼Œå¦‚æœæœ‰çš„è¯ã€‚â‘¤ è¿˜åŸå›¾å±‚ã€‚â‘¥ ç»˜åˆ¶æ»šåŠ¨æ¡ã€‚ requestLayout()ã€invalidate()ä¸postInvalidate()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ requestLayout()ï¼šè¯¥æ–¹æ³•ä¼šé€’å½’è°ƒç”¨çˆ¶çª—å£çš„requestLayout()æ–¹æ³•ï¼Œç›´åˆ°è§¦å‘ViewRootImplçš„performTraversals()æ–¹æ³•ï¼Œæ­¤æ—¶mLayoutRequestedeä¸ºtrueï¼Œä¼šè§¦å‘onMesaure()ä¸onLayout()æ–¹æ³•ï¼Œä¸ä¸€å®šä¼šè§¦å‘onDraw()æ–¹æ³•ã€‚ invalidate()ï¼šè¯¥æ–¹æ³•é€’å½’è°ƒç”¨çˆ¶Viewçš„invalidateChildInParent()æ–¹æ³•ï¼Œç›´åˆ°è°ƒç”¨ViewRootImplçš„invalidateChildInParent()æ–¹æ³•ï¼Œæœ€ç»ˆè§¦å‘ViewRootImplçš„performTraversals()æ–¹æ³•ï¼Œæ­¤æ—¶mLayoutRequestedeä¸ºfalseï¼Œä¸ä¼šè§¦å‘onMesaure()ä¸onLayout()æ–¹æ³•ï¼Œå½“æ—¶ä¼šè§¦å‘onDraw()æ–¹æ³•ã€‚ postInvalidate()ï¼šè¯¥æ–¹æ³•åŠŸèƒ½å’Œinvalidate()ä¸€æ ·ï¼Œåªæ˜¯å®ƒå¯ä»¥åœ¨éUIçº¿ç¨‹ä¸­è°ƒç”¨ã€‚ ä¸€èˆ¬è¯´æ¥éœ€è¦é‡æ–°å¸ƒå±€å°±è°ƒç”¨requestLayout()æ–¹æ³•ï¼Œéœ€è¦é‡æ–°ç»˜åˆ¶å°±è°ƒç”¨invalidate()æ–¹æ³•ã€‚ Scrollerç”¨è¿‡å—ï¼Œäº†è§£å®ƒçš„åŸç†å—ï¼Ÿ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356//å®ä¾‹åŒ–Scrollerå¯¹è±¡ï¼Œåœ¨è‡ªå®šä¹‰Viewä¸­ï¼ŒmContextå¯ä»¥åœ¨è‡ªå®šä¹‰Viewçš„æ„é€ æ–¹æ³•ä¸­è·å–Scroller mScroller = new Scroller(mContext);//åœ¨ä¸€ä¸ªè‡ªå®šä¹‰Viewä¸­å®ç°è¯¥æ–¹æ³•ï¼Œæ–¹æ³•åå¯ä»¥è‡ªå®šä¹‰public void smoothScrollTo(int destX,int destY)&#123; int scrollX = getScrollX(); int scrollY = getScrollY(); int dx = destX - scrollX; int dy = destY - scrollY; //å‰ä¸¤ä¸ªå‚æ•°è¡¨ç¤ºèµ·å§‹ä½ç½®ï¼Œç¬¬ä¸‰ç¬¬å››ä¸ªå‚æ•°è¡¨ç¤ºä½ç§»é‡ï¼Œæœ€åä¸€ä¸ªå‚æ•°è¡¨ç¤ºæ—¶é—´ mScroller.startScroll(scrollX,scrollY,dx,dy,1000); invalidate();&#125;//è‡ªå®šä¹‰Viewä¸­é‡å†™è¯¥æ–¹æ³•@Overridepublic void computeScroll()&#123; if(mScroller.computeScrollOffset())&#123; scrollTo(mScroller.getCurrX(),mScroller.getCurrY()); postInvalidate(); &#125;&#125;``` Scrolleræ»‘åŠ¨çš„æ•´ä¸ªè¿‡ç¨‹(å›¾ç‰‡Fromï¼šhttps://img-blog.csdn.net/20160919174056964)&lt;img src=\"https://img-blog.csdn.net/20160919174056964\"/&gt;### äº†è§£APKçš„æ‰“åŒ…æµç¨‹å—ï¼Œæè¿°ä¸€ä¸‹ï¼ŸAndroidçš„åŒ…æ–‡ä»¶APKåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šä»£ç å’Œèµ„æºï¼Œæ‰€ä»¥æ‰“åŒ…æ–¹é¢ä¹Ÿåˆ†ä¸ºèµ„æºæ‰“åŒ…å’Œä»£ç æ‰“åŒ…ä¸¤ä¸ªæ–¹é¢ï¼Œè¿™ç¯‡æ–‡ç« å°±æ¥åˆ†æèµ„æºå’Œä»£ç çš„ç¼–è¯‘æ‰“åŒ…åŸç†ã€‚APKæ•´ä½“çš„çš„æ‰“åŒ…æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;img src=\"https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/native/vm/apk_package_flow.png\"/&gt;å…·ä½“è¯´æ¥ï¼š1. é€šè¿‡AAPTå·¥å…·è¿›è¡Œèµ„æºæ–‡ä»¶ï¼ˆåŒ…æ‹¬AndroidManifest.xmlã€å¸ƒå±€æ–‡ä»¶ã€å„ç§xmlèµ„æºç­‰ï¼‰çš„æ‰“åŒ…ï¼Œç”ŸæˆR.javaæ–‡ä»¶ã€‚2. é€šè¿‡AIDLå·¥å…·å¤„ç†AIDLæ–‡ä»¶ï¼Œç”Ÿæˆç›¸åº”çš„Javaæ–‡ä»¶ã€‚3. é€šè¿‡Javacå·¥å…·ç¼–è¯‘é¡¹ç›®æºç ï¼Œç”ŸæˆClassæ–‡ä»¶ã€‚4. é€šè¿‡DXå·¥å…·å°†æ‰€æœ‰çš„Classæ–‡ä»¶è½¬æ¢æˆDEXæ–‡ä»¶ï¼Œè¯¥è¿‡ç¨‹ä¸»è¦å®ŒæˆJavaå­—èŠ‚ç è½¬æ¢æˆDalvikå­—èŠ‚ç ï¼Œå‹ç¼©å¸¸é‡æ± ä»¥åŠæ¸…é™¤å†—ä½™ä¿¡æ¯ç­‰å·¥ä½œã€‚5. é€šè¿‡ApkBuilderå·¥å…·å°†èµ„æºæ–‡ä»¶ã€DEXæ–‡ä»¶æ‰“åŒ…ç”ŸæˆAPKæ–‡ä»¶ã€‚6. åˆ©ç”¨KeyStoreå¯¹ç”Ÿæˆçš„APKæ–‡ä»¶è¿›è¡Œç­¾åã€‚7. å¦‚æœæ˜¯æ­£å¼ç‰ˆçš„APKï¼Œè¿˜ä¼šåˆ©ç”¨ZipAlignå·¥å…·è¿›è¡Œå¯¹é½å¤„ç†ï¼Œå¯¹é½çš„è¿‡ç¨‹å°±æ˜¯å°†APKæ–‡ä»¶ä¸­æ‰€æœ‰çš„èµ„æºæ–‡ä»¶ä¸¾ä¾‹æ–‡ä»¶çš„èµ·å§‹è·ç¦»éƒ½åç§»4å­—èŠ‚çš„æ•´æ•°å€ï¼Œè¿™æ ·é€šè¿‡å†…å­˜æ˜ å°„è®¿é—®APKæ–‡ä»¶çš„é€Ÿåº¦ä¼šæ›´å¿«ã€‚### äº†è§£APKçš„å®‰è£…æµç¨‹å—ï¼Œæè¿°ä¸€ä¸‹ï¼ŸAPKçš„å®‰è£…æµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;img src=\"https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/app/package/apk_install_structure.png\" width=\"600\"/&gt;1. å¤åˆ¶APKåˆ°/data/appç›®å½•ä¸‹ï¼Œè§£å‹å¹¶æ‰«æå®‰è£…åŒ…ã€‚2. èµ„æºç®¡ç†å™¨è§£æAPKé‡Œçš„èµ„æºæ–‡ä»¶ã€‚3. è§£æAndroidManifestæ–‡ä»¶ï¼Œå¹¶åœ¨/data/data/ç›®å½•ä¸‹åˆ›å»ºå¯¹åº”çš„åº”ç”¨æ•°æ®ç›®å½•ã€‚4. ç„¶åå¯¹dexæ–‡ä»¶è¿›è¡Œä¼˜åŒ–ï¼Œå¹¶ä¿å­˜åœ¨dalvik-cacheç›®å½•ä¸‹ã€‚5. å°†AndroidManifestæ–‡ä»¶è§£æå‡ºçš„å››å¤§ç»„ä»¶ä¿¡æ¯æ³¨å†Œåˆ°PackageManagerServiceä¸­ã€‚5. å®‰è£…å®Œæˆåï¼Œå‘é€å¹¿æ’­ã€‚### å½“ç‚¹å‡»ä¸€ä¸ªåº”ç”¨å›¾æ ‡ä»¥åï¼Œéƒ½å‘ç”Ÿäº†ä»€ä¹ˆï¼Œæè¿°ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ï¼Ÿç‚¹å‡»åº”ç”¨å›¾æ ‡åä¼šå»å¯åŠ¨åº”ç”¨çš„LauncherActivityï¼Œå¦‚æœLancerActivityæ‰€åœ¨çš„è¿›ç¨‹æ²¡æœ‰åˆ›å»ºï¼Œè¿˜ä¼šåˆ›å»ºæ–°è¿›ç¨‹ï¼Œæ•´ä½“çš„æµç¨‹å°±æ˜¯ä¸€ä¸ªActivityçš„å¯åŠ¨æµç¨‹ã€‚Activityçš„å¯åŠ¨æµç¨‹å›¾ï¼ˆæ”¾å¤§å¯æŸ¥çœ‹ï¼‰å¦‚ä¸‹æ‰€ç¤ºï¼š![Activityçš„å¯åŠ¨æµç¨‹å›¾](https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/app/component/activity_start_flow.png)æ•´ä¸ªæµç¨‹æ¶‰åŠçš„ä¸»è¦è§’è‰²æœ‰ï¼š- Instrumentation: ç›‘æ§åº”ç”¨ä¸ç³»ç»Ÿç›¸å…³çš„äº¤äº’è¡Œä¸ºã€‚- AMSï¼šç»„ä»¶ç®¡ç†è°ƒåº¦ä¸­å¿ƒï¼Œä»€ä¹ˆéƒ½ä¸å¹²ï¼Œä½†æ˜¯ä»€ä¹ˆéƒ½ç®¡ã€‚- ActivityStarterï¼šActivityå¯åŠ¨çš„æ§åˆ¶å™¨ï¼Œå¤„ç†Intentä¸Flagå¯¹Activityå¯åŠ¨çš„å½±å“ï¼Œå…·ä½“è¯´æ¥æœ‰ï¼š1 å¯»æ‰¾ç¬¦åˆå¯åŠ¨æ¡ä»¶çš„Activityï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œè®©ç”¨æˆ·é€‰æ‹©ï¼›2 æ ¡éªŒå¯åŠ¨å‚æ•°çš„åˆæ³•æ€§ï¼›3 è¿”å›intå‚æ•°ï¼Œä»£è¡¨Activityæ˜¯å¦å¯åŠ¨æˆåŠŸã€‚- ActivityStackSupervisiorï¼šè¿™ä¸ªç±»çš„ä½œç”¨ä½ ä»å®ƒçš„åå­—å°±å¯ä»¥çœ‹å‡ºæ¥ï¼Œå®ƒç”¨æ¥ç®¡ç†ä»»åŠ¡æ ˆã€‚- ActivityStackï¼šç”¨æ¥ç®¡ç†ä»»åŠ¡æ ˆé‡Œçš„Activityã€‚- ActivityThreadï¼šæœ€ç»ˆå¹²æ´»çš„äººï¼Œæ˜¯ActivityThreadçš„å†…éƒ¨ç±»ï¼ŒActivityã€Serviceã€BroadcastReceiverçš„å¯åŠ¨ã€åˆ‡æ¢ã€è°ƒåº¦ç­‰å„ç§æ“ä½œéƒ½åœ¨è¿™ä¸ªç±»é‡Œå®Œæˆã€‚æ³¨ï¼šè¿™é‡Œå•ç‹¬æä¸€ä¸‹ActivityStackSupervisiorï¼Œè¿™æ˜¯é«˜ç‰ˆæœ¬æ‰æœ‰çš„ç±»ï¼Œå®ƒç”¨æ¥ç®¡ç†å¤šä¸ªActivityStackï¼Œæ—©æœŸçš„ç‰ˆæœ¬åªæœ‰ä¸€ä¸ªActivityStackå¯¹åº”ç€æ‰‹æœºå±å¹•ï¼Œåæ¥é«˜ç‰ˆæœ¬æ”¯æŒå¤šå±ä»¥åï¼Œå°±æœ‰äº†å¤šä¸ªActivityStackï¼Œäºæ˜¯å°±å¼•å…¥äº†ActivityStackSupervisiorç”¨æ¥ç®¡ç†å¤šä¸ªActivityStackã€‚æ•´ä¸ªæµç¨‹ä¸»è¦æ¶‰åŠå››ä¸ªè¿›ç¨‹ï¼š- è°ƒç”¨è€…è¿›ç¨‹ï¼Œå¦‚æœæ˜¯åœ¨æ¡Œé¢å¯åŠ¨åº”ç”¨å°±æ˜¯Launcheråº”ç”¨è¿›ç¨‹ã€‚- ActivityManagerServiceç­‰æ‰€åœ¨çš„System Serverè¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹ä¸»è¦è¿è¡Œç€ç³»ç»ŸæœåŠ¡ç»„ä»¶ã€‚- Zygoteè¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹ä¸»è¦ç”¨æ¥forkæ–°è¿›ç¨‹ã€‚- æ–°å¯åŠ¨çš„åº”ç”¨è¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹å°±æ˜¯ç”¨æ¥æ‰¿è½½åº”ç”¨è¿è¡Œçš„è¿›ç¨‹äº†ï¼Œå®ƒä¹Ÿæ˜¯åº”ç”¨çš„ä¸»çº¿ç¨‹ï¼ˆæ–°åˆ›å»ºçš„è¿›ç¨‹å°±æ˜¯ä¸»çº¿ç¨‹ï¼‰ï¼Œå¤„ç†ç»„ä»¶ç”Ÿå‘½å‘¨æœŸã€ç•Œé¢ç»˜åˆ¶ç­‰ç›¸å…³äº‹æƒ…ã€‚![img](http://upload-images.jianshu.io/upload_images/3985563-b7edc7b70c9c332f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)æœ‰äº†ä»¥ä¸Šçš„ç†è§£ï¼Œæ•´ä¸ªæµç¨‹å¯ä»¥æ¦‚æ‹¬å¦‚ä¸‹ï¼š1. ç‚¹å‡»æ¡Œé¢åº”ç”¨å›¾æ ‡ï¼ŒLauncherè¿›ç¨‹å°†å¯åŠ¨Activityï¼ˆMainActivityï¼‰çš„è¯·æ±‚ä»¥Binderçš„æ–¹å¼å‘é€ç»™äº†AMSã€‚2. AMSæ¥æ”¶åˆ°å¯åŠ¨è¯·æ±‚åï¼Œäº¤ä»˜ActivityStarterå¤„ç†Intentå’ŒFlagç­‰ä¿¡æ¯ï¼Œç„¶åå†äº¤ç»™ActivityStackSupervisior/ActivityStackå¤„ç†Activityè¿›æ ˆç›¸å…³æµç¨‹ã€‚åŒæ—¶ä»¥Socketæ–¹å¼è¯·æ±‚Zygoteè¿›ç¨‹forkæ–°è¿›ç¨‹ã€‚3. Zygoteæ¥æ”¶åˆ°æ–°è¿›ç¨‹åˆ›å»ºè¯·æ±‚åforkå‡ºæ–°è¿›ç¨‹ã€‚4. åœ¨æ–°è¿›ç¨‹é‡Œåˆ›å»ºActivityThreadå¯¹è±¡ï¼Œæ–°åˆ›å»ºçš„è¿›ç¨‹å°±æ˜¯åº”ç”¨çš„ä¸»çº¿ç¨‹ï¼Œåœ¨ä¸»çº¿ç¨‹é‡Œå¼€å¯Looperæ¶ˆæ¯å¾ªç¯ï¼Œå¼€å§‹å¤„ç†åˆ›å»ºActivityã€‚5. ActivityThreadåˆ©ç”¨ClassLoaderå»åŠ è½½Activityã€åˆ›å»ºActivityå®ä¾‹ï¼Œå¹¶å›è°ƒActivityçš„onCreate()æ–¹æ³•ã€‚è¿™æ ·ä¾¿å®Œæˆäº†Activityçš„å¯åŠ¨ã€‚### BroadcastReceiverä¸LocalBroadcastReceiveræœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ- BroadcastReceiver æ˜¯è·¨åº”ç”¨å¹¿æ’­ï¼Œåˆ©ç”¨Binderæœºåˆ¶å®ç°ã€‚- LocalBroadcastReceiver æ˜¯åº”ç”¨å†…å¹¿æ’­ï¼Œåˆ©ç”¨Handlerå®ç°ï¼Œåˆ©ç”¨äº†IntentFilterçš„matchåŠŸèƒ½ï¼Œæä¾›æ¶ˆæ¯çš„å‘å¸ƒä¸æ¥æ”¶åŠŸèƒ½ï¼Œå®ç°åº”ç”¨å†…é€šä¿¡ï¼Œæ•ˆç‡æ¯”è¾ƒé«˜ã€‚### Android Handleræœºåˆ¶æ˜¯åšä»€ä¹ˆçš„ï¼ŒåŸç†äº†è§£å—ï¼ŸAndroidæ¶ˆæ¯å¾ªç¯æµç¨‹å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;img src=\"https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/native/process/android_handler_structure.png\"/&gt;ä¸»è¦æ¶‰åŠçš„è§’è‰²å¦‚ä¸‹æ‰€ç¤ºï¼š- Messageï¼šæ¶ˆæ¯ï¼Œåˆ†ä¸ºç¡¬ä»¶äº§ç”Ÿçš„æ¶ˆæ¯ï¼ˆä¾‹å¦‚ï¼šæŒ‰é’®ã€è§¦æ‘¸ï¼‰å’Œè½¯ä»¶äº§ç”Ÿçš„æ¶ˆæ¯ã€‚- MessageQueueï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¸»è¦ç”¨æ¥å‘æ¶ˆæ¯æ± æ·»åŠ æ¶ˆæ¯å’Œå–èµ°æ¶ˆæ¯ã€‚- Looperï¼šæ¶ˆæ¯å¾ªç¯å™¨ï¼Œä¸»è¦ç”¨æ¥æŠŠæ¶ˆæ¯åˆ†å‘ç»™ç›¸åº”çš„å¤„ç†è€…ã€‚- Handlerï¼šæ¶ˆæ¯å¤„ç†å™¨ï¼Œä¸»è¦å‘æ¶ˆæ¯é˜Ÿåˆ—å‘é€å„ç§æ¶ˆæ¯ä»¥åŠå¤„ç†å„ç§æ¶ˆæ¯ã€‚æ•´ä¸ªæ¶ˆæ¯çš„å¾ªç¯æµç¨‹è¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°çš„ï¼Œå…·ä½“è¯´æ¥ï¼š1. Handleré€šè¿‡sendMessage()å‘é€æ¶ˆæ¯Messageåˆ°æ¶ˆæ¯é˜Ÿåˆ—MessageQueueã€‚2. Looperé€šè¿‡loop()ä¸æ–­æå–è§¦å‘æ¡ä»¶çš„Messageï¼Œå¹¶å°†Messageäº¤ç»™å¯¹åº”çš„target handleræ¥å¤„ç†ã€‚3. target handlerè°ƒç”¨è‡ªèº«çš„handleMessage()æ–¹æ³•æ¥å¤„ç†Messageã€‚äº‹å®ä¸Šï¼Œåœ¨æ•´ä¸ªæ¶ˆæ¯å¾ªç¯çš„æµç¨‹ä¸­ï¼Œå¹¶ä¸åªæœ‰Javaå±‚å‚ä¸ï¼Œå¾ˆå¤šé‡è¦çš„å·¥ä½œéƒ½æ˜¯åœ¨C++å±‚æ¥å®Œæˆçš„ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹è¿™äº›ç±»çš„è°ƒç”¨å…³ç³»ã€‚&lt;img src=\"https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/native/process/android_handler_class.png\"/&gt;æ³¨ï¼šè™šçº¿è¡¨ç¤ºå…³è”å…³ç³»ï¼Œå®çº¿è¡¨ç¤ºè°ƒç”¨å…³ç³»ã€‚åœ¨è¿™äº›ç±»ä¸­MessageQueueæ˜¯Javaå±‚ä¸C++å±‚ç»´ç³»çš„æ¡¥æ¢ï¼ŒMessageQueueä¸Looperç›¸å…³åŠŸèƒ½éƒ½é€šè¿‡MessageQueueçš„Nativeæ–¹æ³•æ¥å®Œæˆï¼Œè€Œå…¶ä»–è™šçº¿è¿æ¥çš„ç±»åªæœ‰å…³è”å…³ç³»ï¼Œå¹¶æ²¡æœ‰ç›´æ¥è°ƒç”¨çš„å…³ç³»ï¼Œå®ƒä»¬å‘ç”Ÿå…³è”çš„æ¡¥æ¢æ˜¯MessageQueueã€‚### Android Binderæœºåˆ¶æ˜¯åšä»€ä¹ˆçš„ï¼Œä¸ºä»€ä¹ˆé€‰ç”¨Binderï¼ŒåŸç†äº†è§£å—ï¼ŸAndroid Binderæ˜¯ç”¨æ¥åšè¿›ç¨‹é€šä¿¡çš„ï¼ŒAndroidçš„å„ä¸ªåº”ç”¨ä»¥åŠç³»ç»ŸæœåŠ¡éƒ½è¿è¡Œåœ¨ç‹¬ç«‹çš„è¿›ç¨‹ä¸­ï¼Œå®ƒä»¬çš„é€šä¿¡éƒ½ä¾èµ–äºBinderã€‚ä¸ºä»€ä¹ˆé€‰ç”¨Binderï¼Œåœ¨è®¨è®ºè¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬çŸ¥é“Androidä¹Ÿæ˜¯åŸºäºLinuxå†…æ ¸ï¼ŒLinuxç°æœ‰çš„è¿›ç¨‹é€šä¿¡æ‰‹æ®µæœ‰ä»¥ä¸‹å‡ ç§ï¼š1. ç®¡é“ï¼šåœ¨åˆ›å»ºæ—¶åˆ†é…ä¸€ä¸ªpageå¤§å°çš„å†…å­˜ï¼Œç¼“å­˜åŒºå¤§å°æ¯”è¾ƒæœ‰é™ï¼›2. æ¶ˆæ¯é˜Ÿåˆ—ï¼šä¿¡æ¯å¤åˆ¶ä¸¤æ¬¡ï¼Œé¢å¤–çš„CPUæ¶ˆè€—ï¼›ä¸åˆé€‚é¢‘ç¹æˆ–ä¿¡æ¯é‡å¤§çš„é€šä¿¡ï¼›3. å…±äº«å†…å­˜ï¼šæ— é¡»å¤åˆ¶ï¼Œå…±äº«ç¼“å†²åŒºç›´æ¥ä»˜é™„åŠ åˆ°è¿›ç¨‹è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œé€Ÿåº¦å¿«ï¼›ä½†è¿›ç¨‹é—´çš„åŒæ­¥é—®é¢˜æ“ä½œç³»ç»Ÿæ— æ³•å®ç°ï¼Œå¿…é¡»å„è¿›ç¨‹åˆ©ç”¨åŒæ­¥å·¥å…·è§£å†³ï¼›4. å¥—æ¥å­—ï¼šä½œä¸ºæ›´é€šç”¨çš„æ¥å£ï¼Œä¼ è¾“æ•ˆç‡ä½ï¼Œä¸»è¦ç”¨äºä¸é€šæœºå™¨æˆ–è·¨ç½‘ç»œçš„é€šä¿¡ï¼›5. ä¿¡å·é‡ï¼šå¸¸ä½œä¸ºä¸€ç§é”æœºåˆ¶ï¼Œé˜²æ­¢æŸè¿›ç¨‹æ­£åœ¨è®¿é—®å…±äº«èµ„æºæ—¶ï¼Œå…¶ä»–è¿›ç¨‹ä¹Ÿè®¿é—®è¯¥èµ„æºã€‚å› æ­¤ï¼Œä¸»è¦ä½œä¸ºè¿›ç¨‹é—´ä»¥åŠåŒä¸€è¿›ç¨‹å†…ä¸åŒçº¿ç¨‹ä¹‹é—´çš„åŒæ­¥æ‰‹æ®µã€‚6. ä¿¡å·: ä¸é€‚ç”¨äºä¿¡æ¯äº¤æ¢ï¼Œæ›´é€‚ç”¨äºè¿›ç¨‹ä¸­æ–­æ§åˆ¶ï¼Œæ¯”å¦‚éæ³•å†…å­˜è®¿é—®ï¼Œæ€æ­»æŸä¸ªè¿›ç¨‹ç­‰ï¼›æ—¢ç„¶æœ‰ç°æœ‰çš„IPCæ–¹å¼ï¼Œä¸ºä»€ä¹ˆé‡æ–°è®¾è®¡ä¸€å¥—Binderæœºåˆ¶å‘¢ã€‚ä¸»è¦æ˜¯å‡ºäºä»¥ä¸Šä¸‰ä¸ªæ–¹é¢çš„è€ƒé‡ï¼š- é«˜æ€§èƒ½ï¼šä»æ•°æ®æ‹·è´æ¬¡æ•°æ¥çœ‹Binderåªéœ€è¦è¿›è¡Œä¸€æ¬¡å†…å­˜æ‹·è´ï¼Œè€Œç®¡é“ã€æ¶ˆæ¯é˜Ÿåˆ—ã€Socketéƒ½éœ€è¦ä¸¤æ¬¡ï¼Œå…±äº«å†…å­˜ä¸éœ€è¦æ‹·è´ï¼ŒBinderçš„æ€§èƒ½ä»…æ¬¡äºå…±äº«å†…å­˜ã€‚- ç¨³å®šæ€§ï¼šä¸Šé¢è¯´åˆ°å…±äº«å†…å­˜çš„æ€§èƒ½ä¼˜äºBinderï¼Œé‚£ä¸ºä»€ä¹ˆä¸é€‚ç”¨å…±äº«å†…å­˜å‘¢ï¼Œå› ä¸ºå…±äº«å†…å­˜éœ€è¦å¤„ç†å¹¶å‘åŒæ­¥é—®é¢˜ï¼Œæ§åˆ¶è´Ÿè´£ï¼Œå®¹æ˜“å‡ºç°æ­»é”å’Œèµ„æºç«äº‰ï¼Œç¨³å®šæ€§è¾ƒå·®ã€‚è€ŒBinderåŸºäºC/Sæ¶æ„ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯å½¼æ­¤ç‹¬ç«‹ï¼Œç¨³å®šæ€§è¾ƒå¥½ã€‚- å®‰å…¨æ€§ï¼šæˆ‘ä»¬çŸ¥é“Androidä¸ºæ¯ä¸ªåº”ç”¨åˆ†é…äº†UIDï¼Œç”¨æ¥ä½œä¸ºé‰´åˆ«è¿›ç¨‹çš„é‡è¦æ ‡å¿—ï¼ŒAndroidå†…éƒ¨ä¹Ÿä¾èµ–è¿™ä¸ªUIDè¿›è¡Œæƒé™ç®¡ç†ï¼ŒåŒ…æ‹¬6.0ä»¥å‰çš„å›ºå®šæƒé™å’Œ6.0ä»¥åçš„åŠ¨æ€æƒé™ï¼Œä¼ é€IPCåªèƒ½ç”±ç”¨æˆ·åœ¨æ•°æ®åŒ…é‡Œå¡«å…¥UID/PIDï¼Œè¿™ä¸ªæ ‡è®°å®Œå…¨æ˜¯åœ¨ç”¨æˆ·ç©ºé—´æ§åˆ¶çš„ï¼Œæ²¡æœ‰æ”¾åœ¨å†…æ ¸ç©ºé—´ï¼Œå› æ­¤æœ‰è¢«æ¶æ„ç¯¡æ”¹çš„å¯èƒ½ï¼Œå› æ­¤Binderçš„å®‰å…¨æ€§æ›´é«˜ã€‚### æè¿°ä¸€ä¸‹Activityçš„ç”Ÿå‘½å‘¨æœŸï¼Œè¿™äº›ç”Ÿå‘½å‘¨æœŸæ˜¯å¦‚ä½•ç®¡ç†çš„ï¼ŸActivityä¸Fragmentç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;img src=\"https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/app/component/complete_android_fragment_lifecycle.png\"/&gt;è¯»è€…å¯ä»¥ä»ä¸Šå›¾çœ‹å‡ºï¼ŒActivityæœ‰å¾ˆå¤šç§çŠ¶æ€ï¼ŒçŠ¶æ€ä¹‹é—´çš„å˜åŒ–ä¹Ÿæ¯”è¾ƒå¤æ‚ï¼Œåœ¨ä¼—å¤šçŠ¶æ€ä¸­ï¼Œåªæœ‰ä¸‰ç§æ˜¯å¸¸é©»çŠ¶æ€ï¼š- Resumedï¼ˆè¿è¡ŒçŠ¶æ€ï¼‰ï¼šActivityå¤„äºå‰å°ï¼Œç”¨æˆ·å¯ä»¥ä¸å…¶äº¤äº’ã€‚- Pausedï¼ˆæš‚åœçŠ¶æ€ï¼‰ï¼šActivityè¢«å…¶ä»–Activityéƒ¨åˆ†é®æŒ¡ï¼Œæ— æ³•æ¥å—ç”¨æˆ·çš„è¾“å…¥ã€‚- Stoppedï¼ˆåœæ­¢çŠ¶æ€ï¼‰ï¼šActivityè¢«å®Œå…¨éšè—ï¼Œå¯¹ç”¨æˆ·ä¸å¯è§ï¼Œè¿›å…¥åå°ã€‚å…¶ä»–çš„çŠ¶æ€éƒ½æ˜¯ä¸­é—´çŠ¶æ€ã€‚æˆ‘ä»¬å†æ¥çœ‹çœ‹ç”Ÿå‘½å‘¨æœŸå˜åŒ–æ—¶çš„æ•´ä¸ªè°ƒåº¦æµç¨‹ï¼Œç”Ÿå‘½å‘¨æœŸè°ƒåº¦æµç¨‹å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;img src=\"https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/app/component/activity_lifecycle_structure.png\" /&gt;æ‰€ä»¥ä½ å¯ä»¥çœ‹åˆ°ï¼Œæ•´ä¸ªæµç¨‹æ˜¯è¿™æ ·çš„ï¼š1. æ¯”æ–¹è¯´æˆ‘ä»¬ç‚¹å‡»è·³è½¬ä¸€ä¸ªæ–°Activityï¼Œè¿™ä¸ªæ—¶å€™Activityä¼šå…¥æ ˆï¼ŒåŒæ—¶å®ƒçš„ç”Ÿå‘½å‘¨æœŸä¹Ÿä¼šä»onCreate()åˆ°onResume()å¼€å§‹å˜æ¢ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯åœ¨ActivityStacké‡Œå®Œæˆçš„ï¼ŒActivityStackæ˜¯è¿è¡Œåœ¨Serverè¿›ç¨‹é‡Œçš„ï¼Œè¿™ä¸ªæ—¶å€™Serverè¿›ç¨‹å°±é€šè¿‡ApplicationThreadçš„ä»£ç†å¯¹è±¡ApplicationThreadProxyå‘è¿è¡Œåœ¨appè¿›ç¨‹ApplicationThreadå‘èµ·æ“ä½œè¯·æ±‚ã€‚2. ApplicationThreadæ¥æ”¶åˆ°æ“ä½œè¯·æ±‚åï¼Œå› ä¸ºå®ƒæ˜¯è¿è¡Œåœ¨appè¿›ç¨‹é‡Œçš„å…¶ä»–çº¿ç¨‹é‡Œï¼Œæ‰€ä»¥ApplicationThreadéœ€è¦é€šè¿‡Handlerå‘ä¸»çº¿ç¨‹ActivityThreadå‘é€æ“ä½œæ¶ˆæ¯ã€‚3. ä¸»çº¿ç¨‹æ¥æ”¶åˆ°ApplicationThreadå‘å‡ºçš„æ¶ˆæ¯åï¼Œè°ƒç”¨ä¸»çº¿ç¨‹ActivityThreadæ‰§è¡Œå“åº”çš„æ“ä½œï¼Œå¹¶å›è°ƒActivityç›¸åº”çš„å‘¨æœŸæ–¹æ³•ã€‚æ³¨ï¼šè¿™é‡Œæåˆ°äº†ä¸»çº¿ç¨‹ActivityThreadï¼Œæ›´å‡†ç¡®æ¥è¯´ActivityThreadä¸æ˜¯çº¿ç¨‹ï¼Œå› ä¸ºå®ƒæ²¡æœ‰ç»§æ‰¿Threadç±»æˆ–è€…å®ç°Runnableæ¥å£ï¼Œå®ƒæ˜¯è¿è¡Œåœ¨åº”ç”¨ä¸»çº¿ç¨‹é‡Œçš„å¯¹è±¡ï¼Œé‚£ä¹ˆåº”ç”¨çš„ä¸»çº¿ç¨‹åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä»æœ¬è´¨ä¸Šæ¥è®²å¯åŠ¨å¯åŠ¨æ—¶åˆ›å»ºçš„è¿›ç¨‹å°±æ˜¯ä¸»çº¿ç¨‹ï¼Œçº¿ç¨‹å’Œè¿›ç¨‹å¤„ç†æ˜¯å¦å…±äº«èµ„æºå¤–ï¼Œæ²¡æœ‰å…¶ä»–çš„åŒºåˆ«ï¼Œå¯¹äºLinuxæ¥è¯´ï¼Œå®ƒä»¬éƒ½åªæ˜¯ä¸€ä¸ªstructç»“æ„ä½“ã€‚### Activityçš„é€šä¿¡æ–¹å¼æœ‰å“ªäº›ï¼Ÿ- startActivityForResult- EventBus- LocalBroadcastReceiver### Androidåº”ç”¨é‡Œæœ‰å‡ ç§Contextå¯¹è±¡ï¼ŒContextç±»å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;img src=\"https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/app/component/context_uml.png\" width=\"600\" /&gt;å¯ä»¥å‘ç°Contextæ˜¯ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒçš„å…·ä½“å®ç°ç±»æ˜¯ContextImplï¼ŒContextWrapperæ˜¯ä¸ªåŒ…è£…ç±»ï¼Œå†…éƒ¨çš„æˆå‘˜å˜é‡mBaseæŒ‡å‘çš„ä¹Ÿæ˜¯ä¸ªContextImplå¯¹è±¡ï¼ŒContextImplå®Œæˆäº†å®é™…çš„åŠŸèƒ½ï¼ŒActivityã€Serviceä¸Applicationéƒ½ç›´æ¥æˆ–è€…é—´æ¥çš„ç»§æ‰¿ContextWrapperã€‚### æè¿°ä¸€ä¸‹è¿›ç¨‹å’ŒApplicationçš„ç”Ÿå‘½å‘¨æœŸï¼Ÿä¸€ä¸ªå®‰è£…çš„åº”ç”¨å¯¹åº”ä¸€ä¸ªLoadedApkå¯¹è±¡ï¼Œå¯¹åº”ä¸€ä¸ªApplicationå¯¹è±¡ï¼Œå¯¹äºå››å¤§ç»„ä»¶ï¼ŒApplicationçš„åˆ›å»ºå’Œè·å–æ–¹å¼ä¹Ÿæ˜¯ä¸å°½ç›¸åŒçš„ï¼Œå…·ä½“è¯´æ¥ï¼š- Activityï¼šé€šè¿‡LoadedApkçš„makeApplication()æ–¹æ³•åˆ›å»ºã€‚- Serviceï¼šé€šè¿‡LoadedApkçš„makeApplication()æ–¹æ³•åˆ›å»ºã€‚- é™æ€å¹¿æ’­ï¼šé€šè¿‡å…¶å›è°ƒæ–¹æ³•onReceive()æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å‘Applicationã€‚- ContentProviderï¼šæ— æ³•è·å–Applicationï¼Œå› æ­¤æ­¤æ—¶Applicationä¸ä¸€å®šå·²ç»åˆå§‹åŒ–ã€‚### Androidå“ªäº›æƒ…å†µä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œå¦‚ä½•åˆ†æå†…å­˜æ³„æ¼ï¼Ÿ* å†…å­˜æº¢å‡ºOOMå’Œå†…å­˜æ³„éœ²(å¯¹è±¡æ— æ³•è¢«å›æ”¶)çš„åŒºåˆ« å†…å­˜æº¢å‡º out of memoryï¼šæ˜¯æŒ‡ç¨‹åºåœ¨ç”³è¯·å†…å­˜æ—¶ï¼Œæ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ç©ºé—´ä¾›å…¶ä½¿ç”¨ï¼Œå‡ºç°out of memoryï¼›æ¯”å¦‚ç”³è¯·äº†ä¸€ä¸ªintegerï¼Œä½†ç»™å®ƒå­˜äº†longæ‰èƒ½å­˜ä¸‹çš„æ•°ï¼Œé‚£å°±æ˜¯å†…å­˜æº¢å‡ºã€‚å†…å­˜æº¢å‡ºé€šä¿—çš„è®²å°±æ˜¯å†…å­˜ä¸å¤Ÿç”¨ã€‚ å†…å­˜æ³„æ¼ memory leakï¼šæ˜¯æŒ‡ç¨‹åºåœ¨ç”³è¯·å†…å­˜åï¼Œæ— æ³•é‡Šæ”¾è‡ªå·±ç”³è¯·çš„å†…å­˜ç©ºé—´ï¼Œä¸€æ¬¡å†…å­˜æ³„éœ²å±å®³å¯ä»¥å¿½ç•¥ï¼Œä½†å†…å­˜æ³„éœ²å †ç§¯åæœå¾ˆä¸¥é‡ï¼Œæ— è®ºå¤šå°‘å†…å­˜ï¼Œè¿Ÿæ—©ä¼šè¢«å å…‰ã€‚ å¸¸è§çš„äº§ç”Ÿå†…å­˜æ³„æ¼çš„æƒ…å†µå¦‚ä¸‹æ‰€ç¤ºï¼š- æŒæœ‰é™æ€çš„Contextï¼ˆActivityï¼‰å¼•ç”¨ã€‚- æŒæœ‰é™æ€çš„Viewå¼•ç”¨ï¼Œ- å†…éƒ¨ç±»&amp;åŒ¿åå†…éƒ¨ç±»å®ä¾‹æ— æ³•é‡Šæ”¾ï¼ˆæœ‰å»¶è¿Ÿæ—¶é—´ç­‰ç­‰ï¼‰ï¼Œè€Œå†…éƒ¨ç±»åˆæŒæœ‰å¤–éƒ¨ç±»çš„å¼ºå¼•ç”¨ï¼Œå¯¼è‡´å¤–éƒ¨ç±»æ— æ³•é‡Šæ”¾ï¼Œè¿™ç§åŒ¿åå†…éƒ¨ç±»å¸¸è§äºç›‘å¬å™¨ã€Handlerã€Threadã€TimerTask- èµ„æºä½¿ç”¨å®Œæˆåæ²¡æœ‰å…³é—­ï¼Œä¾‹å¦‚ï¼šBraodcastReceiverï¼ŒContentObserverï¼ŒFileï¼ŒCursorï¼ŒStreamï¼ŒBitmapã€‚- ä¸æ­£ç¡®çš„å•ä¾‹æ¨¡å¼ï¼Œæ¯”å¦‚å•ä¾‹æŒæœ‰Activityã€‚- é›†åˆç±»å†…å­˜æ³„æ¼ï¼Œå¦‚æœä¸€ä¸ªé›†åˆç±»æ˜¯é™æ€çš„ï¼ˆç¼“å­˜HashMapï¼‰ï¼Œåªæœ‰æ·»åŠ æ–¹æ³•ï¼Œæ²¡æœ‰å¯¹åº”çš„åˆ é™¤æ–¹æ³•ï¼Œä¼šå¯¼è‡´å¼•ç”¨æ— æ³•è¢«é‡Šæ”¾ï¼Œå¼•å‘å†…å­˜æ³„æ¼ã€‚- é”™è¯¯çš„è¦†å†™äº†finalize()æ–¹æ³•ï¼Œfinalize()æ–¹æ³•æ‰§è¡Œæ‰§è¡Œä¸ç¡®å®šï¼Œå¯èƒ½ä¼šå¯¼è‡´å¼•ç”¨æ— æ³•è¢«é‡Šæ”¾ã€‚æŸ¥æ‰¾å†…å­˜æ³„æ¼å¯ä»¥ä½¿ç”¨Android Profilerå·¥å…·æˆ–è€…åˆ©ç”¨LeakCanaryå·¥å…·ã€‚### Androidæœ‰å“ªå‡ ç§è¿›ç¨‹ï¼Œæ˜¯å¦‚ä½•ç®¡ç†çš„ï¼ŸAndroidçš„è¿›ç¨‹ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š**å‰å°è¿›ç¨‹**ç”¨æˆ·å½“å‰æ“ä½œæ‰€å¿…éœ€çš„è¿›ç¨‹ã€‚å¦‚æœä¸€ä¸ªè¿›ç¨‹æ»¡è¶³ä»¥ä¸‹ä»»ä¸€æ¡ä»¶ï¼Œå³è§†ä¸ºå‰å°è¿›ç¨‹ï¼š- æ‰˜ç®¡ç”¨æˆ·æ­£åœ¨äº¤äº’çš„ Activityï¼ˆå·²è°ƒç”¨ Activity çš„ onResume() æ–¹æ³•ï¼‰- æ‰˜ç®¡æŸä¸ª Serviceï¼Œåè€…ç»‘å®šåˆ°ç”¨æˆ·æ­£åœ¨äº¤äº’çš„ Activity- æ‰˜ç®¡æ­£åœ¨â€œå‰å°â€è¿è¡Œçš„ Serviceï¼ˆæœåŠ¡å·²è°ƒç”¨ startForeground()ï¼‰- æ‰˜ç®¡æ­£æ‰§è¡Œä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå›è°ƒçš„ Serviceï¼ˆonCreate()ã€onStart() æˆ– onDestroy()ï¼‰- æ‰˜ç®¡æ­£æ‰§è¡Œå…¶ onReceive() æ–¹æ³•çš„ BroadcastReceiveré€šå¸¸ï¼Œåœ¨ä»»æ„ç»™å®šæ—¶é—´å‰å°è¿›ç¨‹éƒ½ä¸ºæ•°ä¸å¤šã€‚åªæœ‰åœ¨å†…å­˜ä¸è¶³ä»¥æ”¯æŒå®ƒä»¬åŒæ—¶ç»§ç»­è¿è¡Œè¿™ä¸€ä¸‡ä¸å¾—å·²çš„æƒ…å†µä¸‹ï¼Œç³»ç»Ÿæ‰ä¼šç»ˆæ­¢å®ƒä»¬ã€‚ æ­¤æ—¶ï¼Œè®¾å¤‡å¾€å¾€å·²è¾¾åˆ°å†…å­˜åˆ†é¡µçŠ¶æ€ï¼Œå› æ­¤éœ€è¦ç»ˆæ­¢ä¸€äº›å‰å°è¿›ç¨‹æ¥ç¡®ä¿ç”¨æˆ·ç•Œé¢æ­£å¸¸å“åº”ã€‚**å¯è§è¿›ç¨‹**æ²¡æœ‰ä»»ä½•å‰å°ç»„ä»¶ã€ä½†ä»ä¼šå½±å“ç”¨æˆ·åœ¨å±å¹•ä¸Šæ‰€è§å†…å®¹çš„è¿›ç¨‹ã€‚ å¦‚æœä¸€ä¸ªè¿›ç¨‹æ»¡è¶³ä»¥ä¸‹ä»»ä¸€æ¡ä»¶ï¼Œå³è§†ä¸ºå¯è§è¿›ç¨‹ï¼š- æ‰˜ç®¡ä¸åœ¨å‰å°ã€ä½†ä»å¯¹ç”¨æˆ·å¯è§çš„ Activityï¼ˆå·²è°ƒç”¨å…¶ onPause() æ–¹æ³•ï¼‰ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå‰å° Activity å¯åŠ¨äº†ä¸€ä¸ªå¯¹è¯æ¡†ï¼Œå…è®¸åœ¨å…¶åæ˜¾ç¤ºä¸Šä¸€ Activityï¼Œåˆ™æœ‰å¯èƒ½ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚- æ‰˜ç®¡ç»‘å®šåˆ°å¯è§ï¼ˆæˆ–å‰å°ï¼‰Activity çš„ Serviceã€‚å¯è§è¿›ç¨‹è¢«è§†ä¸ºæ˜¯æå…¶é‡è¦çš„è¿›ç¨‹ï¼Œé™¤éä¸ºäº†ç»´æŒæ‰€æœ‰å‰å°è¿›ç¨‹åŒæ—¶è¿è¡Œè€Œå¿…é¡»ç»ˆæ­¢ï¼Œå¦åˆ™ç³»ç»Ÿä¸ä¼šç»ˆæ­¢è¿™äº›è¿›ç¨‹ã€‚**æœåŠ¡è¿›ç¨‹**æ­£åœ¨è¿è¡Œå·²ä½¿ç”¨ startService() æ–¹æ³•å¯åŠ¨çš„æœåŠ¡ä¸”ä¸å±äºä¸Šè¿°ä¸¤ä¸ªæ›´é«˜ç±»åˆ«è¿›ç¨‹çš„è¿›ç¨‹ã€‚å°½ç®¡æœåŠ¡è¿›ç¨‹ä¸ç”¨æˆ·æ‰€è§å†…å®¹æ²¡æœ‰ç›´æ¥å…³è”ï¼Œä½†æ˜¯å®ƒä»¬é€šå¸¸åœ¨æ‰§è¡Œä¸€äº›ç”¨æˆ·å…³å¿ƒçš„æ“ä½œï¼ˆä¾‹å¦‚ï¼Œåœ¨åå°æ’­æ”¾éŸ³ä¹æˆ–ä»ç½‘ç»œä¸‹è½½æ•°æ®ï¼‰ã€‚å› æ­¤ï¼Œé™¤éå†…å­˜ä¸è¶³ä»¥ç»´æŒæ‰€æœ‰å‰å°è¿›ç¨‹å’Œå¯è§è¿›ç¨‹åŒæ—¶è¿è¡Œï¼Œå¦åˆ™ç³»ç»Ÿä¼šè®©æœåŠ¡è¿›ç¨‹ä¿æŒè¿è¡ŒçŠ¶æ€ã€‚**åå°è¿›ç¨‹**åŒ…å«ç›®å‰å¯¹ç”¨æˆ·ä¸å¯è§çš„ Activity çš„è¿›ç¨‹ï¼ˆå·²è°ƒç”¨ Activity çš„ onStop() æ–¹æ³•ï¼‰ã€‚è¿™äº›è¿›ç¨‹å¯¹ç”¨æˆ·ä½“éªŒæ²¡æœ‰ç›´æ¥å½±å“ï¼Œç³»ç»Ÿå¯èƒ½éšæ—¶ç»ˆæ­¢å®ƒä»¬ï¼Œä»¥å›æ”¶å†…å­˜ä¾›å‰å°è¿›ç¨‹ã€å¯è§è¿›ç¨‹æˆ–æœåŠ¡è¿›ç¨‹ä½¿ç”¨ã€‚ é€šå¸¸ä¼šæœ‰å¾ˆå¤šåå°è¿›ç¨‹åœ¨è¿è¡Œï¼Œå› æ­¤å®ƒä»¬ä¼šä¿å­˜åœ¨ LRU ï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰åˆ—è¡¨ä¸­ï¼Œä»¥ç¡®ä¿åŒ…å«ç”¨æˆ·æœ€è¿‘æŸ¥çœ‹çš„ Activity çš„è¿›ç¨‹æœ€åä¸€ä¸ªè¢«ç»ˆæ­¢ã€‚å¦‚æœæŸä¸ª Activity æ­£ç¡®å®ç°äº†ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå¹¶ä¿å­˜äº†å…¶å½“å‰çŠ¶æ€ï¼Œåˆ™ç»ˆæ­¢å…¶è¿›ç¨‹ä¸ä¼šå¯¹ç”¨æˆ·ä½“éªŒäº§ç”Ÿæ˜æ˜¾å½±å“ï¼Œå› ä¸ºå½“ç”¨æˆ·å¯¼èˆªå›è¯¥ Activity æ—¶ï¼ŒActivity ä¼šæ¢å¤å…¶æ‰€æœ‰å¯è§çŠ¶æ€ã€‚**ç©ºè¿›ç¨‹**ä¸å«ä»»ä½•æ´»åŠ¨åº”ç”¨ç»„ä»¶çš„è¿›ç¨‹ã€‚ä¿ç•™è¿™ç§è¿›ç¨‹çš„çš„å”¯ä¸€ç›®çš„æ˜¯ç”¨ä½œç¼“å­˜ï¼Œä»¥ç¼©çŸ­ä¸‹æ¬¡åœ¨å…¶ä¸­è¿è¡Œç»„ä»¶æ‰€éœ€çš„å¯åŠ¨æ—¶é—´ã€‚ ä¸ºä½¿æ€»ä½“ç³»ç»Ÿèµ„æºåœ¨è¿›ç¨‹ç¼“å­˜å’Œåº•å±‚å†…æ ¸ç¼“å­˜ä¹‹é—´ä¿æŒå¹³è¡¡ï¼Œç³»ç»Ÿå¾€å¾€ä¼šç»ˆæ­¢è¿™äº›è¿›ç¨‹ã€‚ActivityManagerServiceè´Ÿè´£æ ¹æ®å„ç§ç­–ç•¥ç®—æ³•è®¡ç®—è¿›ç¨‹çš„adjå€¼ï¼Œç„¶åäº¤ç”±ç³»ç»Ÿå†…æ ¸è¿›è¡Œè¿›ç¨‹çš„ç®¡ç†ã€‚### SharePreferenceæ€§èƒ½ä¼˜åŒ–ï¼Œå¯ä»¥åšè¿›ç¨‹åŒæ­¥å—ï¼Ÿåœ¨Androidä¸­, SharePreferencesæ˜¯ä¸€ä¸ªè½»é‡çº§çš„å­˜å‚¨ç±»ï¼Œç‰¹åˆ«é€‚åˆç”¨äºä¿å­˜è½¯ä»¶é…ç½®å‚æ•°ã€‚ä½¿ç”¨SharedPreferencesä¿å­˜æ•°æ®ï¼Œå…¶èƒŒåæ˜¯ç”¨xmlæ–‡ä»¶å­˜æ”¾æ•°æ®ï¼Œæ–‡ä»¶å­˜æ”¾åœ¨/data/data/ &lt; package name &gt; /shared_prefsç›®å½•ä¸‹.ä¹‹æ‰€ä»¥è¯´SharedPreferenceæ˜¯ä¸€ç§è½»é‡çº§çš„å­˜å‚¨æ–¹å¼ï¼Œæ˜¯å› ä¸ºå®ƒåœ¨åˆ›å»ºçš„æ—¶å€™ä¼šæŠŠæ•´ä¸ªæ–‡ä»¶å…¨éƒ¨åŠ è½½è¿›å†…å­˜ï¼Œå¦‚æœSharedPreferenceæ–‡ä»¶æ¯”è¾ƒå¤§ï¼Œä¼šå¸¦æ¥ä»¥ä¸‹é—®é¢˜ï¼š1. ç¬¬ä¸€æ¬¡ä»spä¸­è·å–å€¼çš„æ—¶å€™ï¼Œæœ‰å¯èƒ½é˜»å¡ä¸»çº¿ç¨‹ï¼Œä½¿ç•Œé¢å¡é¡¿ã€æ‰å¸§ã€‚2. è§£æspçš„æ—¶å€™ä¼šäº§ç”Ÿå¤§é‡çš„ä¸´æ—¶å¯¹è±¡ï¼Œå¯¼è‡´é¢‘ç¹GCï¼Œå¼•èµ·ç•Œé¢å¡é¡¿ã€‚3. è¿™äº›keyå’Œvalueä¼šæ°¸è¿œå­˜åœ¨äºå†…å­˜ä¹‹ä¸­ï¼Œå ç”¨å¤§é‡å†…å­˜ã€‚ä¼˜åŒ–å»ºè®®1. ä¸è¦å­˜æ”¾å¤§çš„keyå’Œvalueï¼Œä¼šå¼•èµ·ç•Œé¢å¡ã€é¢‘ç¹GCã€å ç”¨å†…å­˜ç­‰ç­‰ã€‚2. æ¯«ä¸ç›¸å…³çš„é…ç½®é¡¹å°±ä¸è¦æ”¾åœ¨åœ¨ä¸€èµ·ï¼Œæ–‡ä»¶è¶Šå¤§è¯»å–è¶Šæ…¢ã€‚3. è¯»å–é¢‘ç¹çš„keyå’Œä¸æ˜“å˜åŠ¨çš„keyå°½é‡ä¸è¦æ”¾åœ¨ä¸€èµ·ï¼Œå½±å“é€Ÿåº¦ï¼Œå¦‚æœæ•´ä¸ªæ–‡ä»¶å¾ˆå°ï¼Œé‚£ä¹ˆå¿½ç•¥å§ï¼Œä¸ºäº†è¿™ç‚¹æ€§èƒ½æ·»åŠ ç»´æŠ¤æˆæœ¬å¾—ä¸å¿å¤±ã€‚4. ä¸è¦ä¹±editå’Œapplyï¼Œå°½é‡æ‰¹é‡ä¿®æ”¹ä¸€æ¬¡æäº¤ï¼Œå¤šæ¬¡applyä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚5. å°½é‡ä¸è¦å­˜æ”¾JSONå’ŒHTMLï¼Œè¿™ç§åœºæ™¯è¯·ç›´æ¥ä½¿ç”¨JSONã€‚6. SharedPreferenceæ— æ³•è¿›è¡Œè·¨è¿›ç¨‹é€šä¿¡ï¼ŒMODE_MULTI_PROCESSåªæ˜¯ä¿è¯äº†åœ¨API 11ä»¥å‰çš„ç³»ç»Ÿä¸Šï¼Œå¦‚æœspå·²ç»è¢«è¯»å–è¿›å†…å­˜ï¼Œå†æ¬¡è·å–è¿™ä¸ªSharedPreferenceçš„æ—¶å€™ï¼Œå¦‚æœæœ‰è¿™ä¸ªflagï¼Œä¼šé‡æ–°è¯»ä¸€éæ–‡ä»¶ï¼Œä»…æ­¤è€Œå·²ã€‚### å¦‚ä½•åšSQLiteå‡çº§ï¼Ÿæ•°æ®åº“å‡çº§å¢åŠ è¡¨å’Œåˆ é™¤è¡¨éƒ½ä¸æ¶‰åŠæ•°æ®è¿ç§»ï¼Œä½†æ˜¯ä¿®æ”¹è¡¨æ¶‰åŠåˆ°å¯¹åŸæœ‰æ•°æ®è¿›è¡Œè¿ç§»ã€‚å‡çº§çš„æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š1. å°†ç°æœ‰è¡¨å‘½åä¸ºä¸´æ—¶è¡¨ã€‚2. åˆ›å»ºæ–°è¡¨ã€‚3. å°†ä¸´æ—¶è¡¨çš„æ•°æ®å¯¼å…¥æ–°è¡¨ã€‚4. åˆ é™¤ä¸´æ—¶è¡¨ã€‚é‡å†™å¦‚æœæ˜¯è·¨ç‰ˆæœ¬æ•°æ®åº“å‡çº§ï¼Œå¯ä»¥ç”±ä¸¤ç§æ–¹å¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š1. é€çº§å‡çº§ï¼Œç¡®å®šç›¸é‚»ç‰ˆæœ¬ä¸ç°åœ¨ç‰ˆæœ¬çš„å·®åˆ«ï¼ŒV1å‡çº§åˆ°V2,V2å‡çº§åˆ°V3ï¼Œä¾æ¬¡ç±»æ¨ã€‚2. è·¨çº§å‡çº§ï¼Œç¡®å®šæ¯ä¸ªç‰ˆæœ¬ä¸ç°åœ¨æ•°æ®åº“çš„å·®åˆ«ï¼Œä¸ºæ¯ä¸ªcaseç¼–å†™ä¸“é—¨å‡çº§å¤§ä»£ç ã€‚### è¿›ç¨‹ä¿æŠ¤å¦‚ä½•åšï¼Œå¦‚ä½•å”¤é†’å…¶ä»–è¿›ç¨‹ï¼Ÿè¿›ç¨‹ä¿æ´»ä¸»è¦æœ‰ä¸¤ä¸ªæ€è·¯ï¼š1. æå‡è¿›ç¨‹çš„ä¼˜å…ˆçº§ï¼Œé™ä½è¿›ç¨‹è¢«æ€æ­»çš„æ¦‚ç‡ã€‚2. æ‹‰æ´»å·²ç»è¢«æ€æ­»çš„è¿›ç¨‹ã€‚å¦‚ä½•æå‡ä¼˜å…ˆçº§ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼šç›‘æ§æ‰‹æœºé”å±äº‹ä»¶ï¼Œåœ¨å±å¹•é”å±æ—¶å¯åŠ¨ä¸€ä¸ªåƒç´ çš„Activityï¼Œåœ¨ç”¨æˆ·è§£é”æ—¶å°†Activityé”€æ¯æ‰ï¼Œå‰å°Activityå¯ä»¥å°†è¿›ç¨‹å˜æˆå‰å°è¿›ç¨‹ï¼Œä¼˜å…ˆçº§å‡çº§åˆ°æœ€é«˜ã€‚å¦‚æœæ‹‰æ´»åˆ©ç”¨å¹¿æ’­æ‹‰æ´»Activityã€‚### ç†è§£åºåˆ—åŒ–å—ï¼ŒAndroidä¸ºä»€ä¹ˆå¼•å…¥Parcelableï¼Ÿæ‰€è°“åºåˆ—åŒ–å°±æ˜¯å°†å¯¹è±¡å˜æˆäºŒè¿›åˆ¶æµï¼Œä¾¿äºå­˜å‚¨å’Œä¼ è¾“ã€‚- Serializableæ˜¯javaå®ç°çš„ä¸€å¥—åºåˆ—åŒ–æ–¹å¼ï¼Œå¯èƒ½ä¼šè§¦å‘é¢‘ç¹çš„IOæ“ä½œï¼Œæ•ˆç‡æ¯”è¾ƒä½ï¼Œé€‚åˆå°†å¯¹è±¡å­˜å‚¨åˆ°ç£ç›˜ä¸Šçš„æƒ…å†µã€‚- Parcelableæ˜¯Androidæä¾›ä¸€å¥—åºåˆ—åŒ–æœºåˆ¶ï¼Œå®ƒå°†åºåˆ—åŒ–åçš„å­—èŠ‚æµå†™å…¥åˆ°ä¸€ä¸ªå…±æ€§å†…å­˜ä¸­ï¼Œå…¶ä»–å¯¹è±¡å¯ä»¥ä»è¿™å—å…±äº«å†…å­˜ä¸­è¯»å‡ºå­—èŠ‚æµï¼Œå¹¶ååºåˆ—åŒ–æˆå¯¹è±¡ã€‚å› æ­¤æ•ˆç‡æ¯”è¾ƒé«˜ï¼Œé€‚åˆåœ¨å¯¹è±¡é—´æˆ–è€…è¿›ç¨‹é—´ä¼ é€’ä¿¡æ¯ã€‚### å¦‚ä½•è®¡ç®—ä¸€ä¸ªBitmapå ç”¨å†…å­˜çš„å¤§å°ï¼Œæ€ä¹ˆä¿è¯åŠ è½½Bitmapä¸äº§ç”Ÿå†…å­˜æº¢å‡ºï¼ŸBitamp å ç”¨å†…å­˜å¤§å° = å®½åº¦åƒç´  x ï¼ˆinTargetDensity / inDensityï¼‰ x é«˜åº¦åƒç´  x ï¼ˆinTargetDensity / inDensityï¼‰x ä¸€ä¸ªåƒç´ æ‰€å çš„å†…å­˜æ³¨ï¼šè¿™é‡ŒinDensityè¡¨ç¤ºç›®æ ‡å›¾ç‰‡çš„dpiï¼ˆæ”¾åœ¨å“ªä¸ªèµ„æºæ–‡ä»¶å¤¹ä¸‹ï¼‰ï¼ŒinTargetDensityè¡¨ç¤ºç›®æ ‡å±å¹•çš„dpiï¼Œæ‰€ä»¥ä½ å¯ä»¥å‘ç°inDensityå’ŒinTargetDensityä¼šå¯¹Bitmapçš„å®½é«˜è¿›è¡Œæ‹‰ä¼¸ï¼Œè¿›è€Œæ”¹å˜Bitmapå ç”¨å†…å­˜çš„å¤§å°ã€‚åœ¨Bitmapé‡Œæœ‰ä¸¤ä¸ªè·å–å†…å­˜å ç”¨å¤§å°çš„æ–¹æ³•ã€‚- getByteCount()ï¼šAPI12 åŠ å…¥ï¼Œä»£è¡¨å­˜å‚¨ Bitmap çš„åƒç´ éœ€è¦çš„æœ€å°‘å†…å­˜ã€‚- getAllocationByteCount()ï¼šAPI19 åŠ å…¥ï¼Œä»£è¡¨åœ¨å†…å­˜ä¸­ä¸º Bitmap åˆ†é…çš„å†…å­˜å¤§å°ï¼Œä»£æ›¿äº† getByteCount() æ–¹æ³•ã€‚åœ¨ä¸å¤ç”¨ Bitmap æ—¶ï¼ŒgetByteCount() å’Œ getAllocationByteCount è¿”å›çš„ç»“æœæ˜¯ä¸€æ ·çš„ã€‚åœ¨é€šè¿‡å¤ç”¨ Bitmap æ¥è§£ç å›¾ç‰‡æ—¶ï¼Œé‚£ä¹ˆ getByteCount() è¡¨ç¤ºæ–°è§£ç å›¾ç‰‡å ç”¨å†…å­˜çš„å¤§å°ï¼ŒgetAllocationByteCount() è¡¨ç¤ºè¢«å¤ç”¨ BitmapçœŸå®å ç”¨çš„å†…å­˜å¤§å°ï¼ˆå³ mBuffer çš„é•¿åº¦ï¼‰ã€‚ä¸ºäº†ä¿è¯åœ¨åŠ è½½Bitmapçš„æ—¶å€™ä¸äº§ç”Ÿå†…å­˜æº¢å‡ºï¼Œå¯ä»¥å—ç”¨BitmapFactoryè¿›è¡Œå›¾ç‰‡å‹ç¼©ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªå‚æ•°ï¼š- BitmapFactory.Options.inPreferredConfigï¼šå°†ARGB_8888æ”¹ä¸ºRGB_565ï¼Œæ”¹å˜ç¼–ç æ–¹å¼ï¼ŒèŠ‚çº¦å†…å­˜ã€‚- BitmapFactory.Options.inSampleSizeï¼šç¼©æ”¾æ¯”ä¾‹ï¼Œå¯ä»¥å‚è€ƒLubané‚£ä¸ªåº“ï¼Œæ ¹æ®å›¾ç‰‡å®½é«˜è®¡ç®—å‡ºåˆé€‚çš„ç¼©æ”¾æ¯”ä¾‹ã€‚- BitmapFactory.Options.inPurgeableï¼šè®©ç³»ç»Ÿå¯ä»¥å†…å­˜ä¸è¶³æ—¶å›æ”¶å†…å­˜ã€‚### Androidå¦‚ä½•åœ¨ä¸å‹ç¼©çš„æƒ…å†µä¸‹åŠ è½½é«˜æ¸…å¤§å›¾ï¼Ÿä½¿ç”¨BitmapRegionDecoderè¿›è¡Œå¸ƒå±€åŠ è½½ã€‚### Androidé‡Œçš„å†…å­˜ç¼“å­˜å’Œç£ç›˜ç¼“å­˜æ˜¯æ€ä¹ˆå®ç°çš„ã€‚å†…å­˜ç¼“å­˜åŸºäºLruCacheå®ç°ï¼Œç£ç›˜ç¼“å­˜åŸºäºDiskLruCacheå®ç°ã€‚è¿™ä¸¤ä¸ªç±»éƒ½åŸºäºLruç®—æ³•å’ŒLinkedHashMapæ¥å®ç°ã€‚LRUç®—æ³•å¯ä»¥ç”¨ä¸€å¥è¯æ¥æè¿°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&gt;LRUæ˜¯Least Recently Usedçš„ç¼©å†™ï¼Œæœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ç®—æ³•ï¼Œä»å®ƒçš„åå­—å°±å¯ä»¥çœ‹å‡ºï¼Œå®ƒçš„æ ¸å¿ƒåŸåˆ™æ˜¯å¦‚æœä¸€ä¸ªæ•°æ®åœ¨æœ€è¿‘ä¸€æ®µæ—¶é—´æ²¡æœ‰ä½¿ç”¨åˆ°ï¼Œé‚£ä¹ˆå®ƒåœ¨å°†æ¥è¢«è®¿é—®åˆ°çš„å¯èƒ½æ€§ä¹Ÿå¾ˆå°ï¼Œåˆ™è¿™ç±»æ•°æ®é¡¹ä¼šè¢«ä¼˜å…ˆæ·˜æ±°æ‰ã€‚LruCacheçš„åŸç†æ˜¯åˆ©ç”¨LinkedHashMapæŒæœ‰å¯¹è±¡çš„å¼ºå¼•ç”¨ï¼ŒæŒ‰ç…§Lruç®—æ³•è¿›è¡Œå¯¹è±¡æ·˜æ±°ã€‚å…·ä½“è¯´æ¥å‡è®¾æˆ‘ä»¬ä»è¡¨å°¾è®¿é—®æ•°æ®ï¼Œåœ¨è¡¨å¤´åˆ é™¤æ•°æ®ï¼Œå½“è®¿é—®çš„æ•°æ®é¡¹åœ¨é“¾è¡¨ä¸­å­˜åœ¨æ—¶ï¼Œåˆ™å°†è¯¥æ•°æ®é¡¹ç§»åŠ¨åˆ°è¡¨å°¾ï¼Œå¦åˆ™åœ¨è¡¨å°¾æ–°å»ºä¸€ä¸ªæ•°æ®é¡¹ã€‚å½“é“¾è¡¨å®¹é‡è¶…è¿‡ä¸€å®šé˜ˆå€¼ï¼Œåˆ™ç§»é™¤è¡¨å¤´çš„æ•°æ®ã€‚ ä¸ºä»€ä¹ˆä¼šé€‰æ‹©LinkedHashMapå‘¢ï¼Ÿè¿™è·ŸLinkedHashMapçš„ç‰¹æ€§æœ‰å…³ï¼ŒLinkedHashMapçš„æ„é€ å‡½æ•°é‡Œæœ‰ä¸ªå¸ƒå°”å‚æ•°accessOrderï¼Œå½“å®ƒä¸ºtrueæ—¶ï¼ŒLinkedHashMapä¼šä»¥è®¿é—®é¡ºåºä¸ºåºæ’åˆ—å…ƒç´ ï¼Œå¦åˆ™ä»¥æ’å…¥é¡ºåºä¸ºåºæ’åºå…ƒç´ ã€‚DiskLruCacheä¸LruCacheåŸç†ç›¸ä¼¼ï¼Œåªæ˜¯å¤šäº†ä¸€ä¸ªjournalæ–‡ä»¶æ¥åšç£ç›˜æ–‡ä»¶çš„ç®¡ç†å’Œè¿ç¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š libcore.io.DiskLruCache111 DIRTY 1517126350519CLEAN 1517126350519 5325928REMOVE 1517126350519123456789101112æ³¨ï¼šè¿™é‡Œçš„ç¼“å­˜ç›®å½•æ˜¯åº”ç”¨çš„ç¼“å­˜ç›®å½•/data/data/pckagename/cacheï¼Œæœªrootçš„æ‰‹æœºå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›å…¥åˆ°è¯¥ç›®å½•ä¸­æˆ–è€…å°†è¯¥ç›®å½•æ•´ä½“æ‹·è´å‡ºæ¥ï¼š```java//è¿›å…¥/data/data/pckagename/cacheç›®å½•adb shellrun-as com.your.packagename cp /data/data/com.your.packagename///å°†/data/data/pckagenameç›®å½•æ‹·è´å‡ºæ¥adb backup -noapk com.your.packagename æˆ‘ä»¬æ¥åˆ†æä¸‹è¿™ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼š ç¬¬ä¸€è¡Œï¼šlibcore.io.DiskLruCacheï¼Œå›ºå®šå­—ç¬¦ä¸²ã€‚ ç¬¬äºŒè¡Œï¼š1ï¼ŒDiskLruCacheæºç ç‰ˆæœ¬å·ã€‚ ç¬¬ä¸‰è¡Œï¼š1ï¼ŒAppçš„ç‰ˆæœ¬å·ï¼Œé€šè¿‡open()æ–¹æ³•ä¼ å…¥è¿›å»çš„ã€‚ ç¬¬å››è¡Œï¼š1ï¼Œæ¯ä¸ªkeyå¯¹åº”å‡ ä¸ªæ–‡ä»¶ï¼Œä¸€èˆ¬ä¸º1. ç¬¬äº”è¡Œï¼šç©ºè¡Œ ç¬¬å…­è¡ŒåŠåç»­è¡Œï¼šç¼“å­˜æ“ä½œè®°å½•ã€‚ ç¬¬å…­è¡ŒåŠåç»­è¡Œè¡¨ç¤ºç¼“å­˜æ“ä½œè®°å½•ï¼Œå…³äºæ“ä½œè®°å½•ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ä»¥ä¸‹ä¸‰ç‚¹ï¼š DIRTY è¡¨ç¤ºä¸€ä¸ªentryæ­£åœ¨è¢«å†™å…¥ã€‚å†™å…¥åˆ†ä¸¤ç§æƒ…å†µï¼Œå¦‚æœæˆåŠŸä¼šç´§æ¥ç€å†™å…¥ä¸€è¡ŒCLEANçš„è®°å½•ï¼›å¦‚æœå¤±è´¥ï¼Œä¼šå¢åŠ ä¸€è¡ŒREMOVEè®°å½•ã€‚æ³¨æ„å•ç‹¬åªæœ‰DIRTYçŠ¶æ€çš„è®°å½•æ˜¯éæ³•çš„ã€‚ å½“æ‰‹åŠ¨è°ƒç”¨remove(key)æ–¹æ³•çš„æ—¶å€™ä¹Ÿä¼šå†™å…¥ä¸€æ¡REMOVEè®°å½•ã€‚ READå°±æ˜¯è¯´æ˜æœ‰ä¸€æ¬¡è¯»å–çš„è®°å½•ã€‚ CLEANçš„åé¢è¿˜è®°å½•äº†æ–‡ä»¶çš„é•¿åº¦ï¼Œæ³¨æ„å¯èƒ½ä¼šä¸€ä¸ªkeyå¯¹åº”å¤šä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆå°±ä¼šæœ‰å¤šä¸ªæ•°å­—ã€‚ Android ä¸­è·¨è¿›ç¨‹é€šè®¯çš„å‡ ç§æ–¹å¼ Android è·¨è¿›ç¨‹é€šä¿¡ï¼Œåƒ Intentï¼ŒcontentProviderï¼Œbroadcastï¼Œservice éƒ½å¯ä»¥è·¨è¿›ç¨‹é€šä¿¡ã€‚ Intentï¼šè¿™ç§è·¨è¿›ç¨‹æ–¹å¼å¹¶ä¸æ˜¯è®¿é—®å†…å­˜çš„å½¢å¼ï¼Œå®ƒéœ€è¦ä¼ é€’ä¸€ä¸ª uriï¼Œæ¯”å¦‚æ‰“ç”µè¯ contentProviderï¼šè¿™ç§å½¢å¼æ˜¯ä½¿ç”¨æ•°æ®å…±äº«çš„æ–¹å¼è¿›è¡Œæ•°æ®å…±äº« serviceï¼šè¿œç¨‹æœåŠ¡ï¼Œaidl å¹¿æ’­ï¼š ä¿å­˜ Activity çŠ¶æ€onSaveInstanceState(Bundle)ä¼šåœ¨ activity è½¬å…¥åå°çŠ¶æ€ä¹‹å‰è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯ onStop()æ–¹æ³•ä¹‹å‰ï¼ŒonPause æ–¹æ³•ä¹‹åè¢«è°ƒç”¨ï¼› Android ä¸­çš„å‡ ç§åŠ¨ç”» å¸§åŠ¨ç”»ï¼šæŒ‡é€šè¿‡æŒ‡å®šæ¯ä¸€å¸§çš„å›¾ç‰‡å’Œæ’­æ”¾æ—¶é—´ï¼Œæœ‰åºçš„è¿›è¡Œæ’­æ”¾è€Œå½¢æˆåŠ¨ç”»æ•ˆæœï¼Œæ¯”å¦‚éŸ³ä¹çš„å¾‹åŠ¨æ¡ è¡¥é—´åŠ¨ç”»ï¼šæŒ‡é€šè¿‡æŒ‡å®š View çš„åˆå§‹çŠ¶æ€ã€å˜åŒ–æ—¶é—´ã€æ–¹å¼ï¼Œé€šè¿‡ä¸€ç³»åˆ—çš„ç®—æ³•å»è¿›è¡Œå›¾å½¢å˜æ¢ï¼Œä»è€Œå½¢æˆåŠ¨ç”»æ•ˆæœï¼Œä¸»è¦æœ‰ Alphaã€Scaleã€Translateã€Rotate å››ç§æ•ˆæœã€‚æ³¨æ„ï¼šåªæ˜¯åœ¨è§†å›¾å±‚å®ç°äº†åŠ¨ç”»æ•ˆæœï¼Œå¹¶æ²¡æœ‰çœŸæ­£æ”¹å˜ View çš„å±æ€§ï¼Œæ¯”å¦‚æ»‘åŠ¨åˆ—è¡¨ï¼Œæ”¹å˜æ ‡é¢˜æ çš„é€æ˜åº¦ã€‚ å±æ€§åŠ¨ç”»ï¼šåœ¨ Android3.0 çš„æ—¶å€™æ‰æ”¯æŒï¼Œé€šè¿‡ä¸æ–­çš„æ”¹å˜ View çš„å±æ€§ï¼Œä¸æ–­çš„é‡ç»˜è€Œå½¢æˆåŠ¨ç”»æ•ˆæœã€‚ç›¸æ¯”äºè§†å›¾åŠ¨ç”»ï¼ŒView çš„å±æ€§æ˜¯çœŸæ­£æ”¹å˜äº†ã€‚æ¯”å¦‚ View çš„æ—‹è½¬ï¼Œæ”¾å¤§ï¼Œç¼©å°ã€‚ PathClassLoaderä¸DexClassLoaderæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ PathClassLoaderï¼šåªèƒ½åŠ è½½å·²ç»å®‰è£…åˆ°Androidç³»ç»Ÿçš„APKæ–‡ä»¶ï¼Œå³/data/appç›®å½•ï¼ŒAndroidé»˜è®¤çš„ç±»åŠ è½½å™¨ã€‚ DexClassLoaderï¼šå¯ä»¥åŠ è½½ä»»æ„ç›®å½•ä¸‹çš„dexã€jarã€apkã€zipæ–‡ä»¶ã€‚ WebViewä¼˜åŒ–äº†è§£å—ï¼Œå¦‚ä½•æé«˜WebViewçš„åŠ è½½é€Ÿåº¦ï¼Ÿä¸ºä»€ä¹ˆWebViewåŠ è½½ä¼šæ…¢å‘¢ï¼Ÿ è¿™æ˜¯å› ä¸ºåœ¨å®¢æˆ·ç«¯ä¸­ï¼ŒåŠ è½½H5é¡µé¢ä¹‹å‰ï¼Œéœ€è¦å…ˆåˆå§‹åŒ–WebViewï¼Œåœ¨WebViewå®Œå…¨åˆå§‹åŒ–å®Œæˆä¹‹å‰ï¼Œåç»­çš„ç•Œé¢åŠ è½½è¿‡ç¨‹éƒ½æ˜¯è¢«é˜»å¡çš„ã€‚ ä¼˜åŒ–æ‰‹æ®µå›´ç»•ç€ä»¥ä¸‹ä¸¤ä¸ªç‚¹è¿›è¡Œï¼š é¢„åŠ è½½WebViewã€‚ åŠ è½½WebViewçš„åŒæ—¶ï¼Œè¯·æ±‚H5é¡µé¢æ•°æ®ã€‚ å› æ­¤å¸¸è§çš„æ–¹æ³•æ˜¯ï¼š å…¨å±€WebViewã€‚ å®¢æˆ·ç«¯ä»£ç†é¡µé¢è¯·æ±‚ã€‚WebViewåˆå§‹åŒ–å®Œæˆåå‘å®¢æˆ·ç«¯è¯·æ±‚æ•°æ®ã€‚ assetå­˜æ”¾ç¦»çº¿åŒ…ã€‚ é™¤æ­¤ä¹‹å¤–è¿˜æœ‰ä¸€äº›å…¶ä»–çš„ä¼˜åŒ–æ‰‹æ®µï¼š è„šæœ¬æ‰§è¡Œæ…¢ï¼Œå¯ä»¥è®©è„šæœ¬æœ€åè¿è¡Œï¼Œä¸é˜»å¡é¡µé¢è§£æã€‚ DNSä¸é“¾æ¥æ…¢ï¼Œå¯ä»¥è®©å®¢æˆ·ç«¯å¤ç”¨ä½¿ç”¨çš„åŸŸåä¸é“¾æ¥ã€‚ Reactæ¡†æ¶ä»£ç æ‰§è¡Œæ…¢ï¼Œå¯ä»¥å°†è¿™éƒ¨åˆ†ä»£ç æ‹†åˆ†å‡ºæ¥ï¼Œæå‰è¿›è¡Œè§£æã€‚ ä¿å­˜ Activity çŠ¶æ€Javaå’ŒJSçš„ç›¸äº’è°ƒç”¨æ€ä¹ˆå®ç°ï¼Œæœ‰åšè¿‡ä»€ä¹ˆä¼˜åŒ–å—ï¼Ÿjockeyjsï¼šhttps://github.com/tcoulter/jockeyjs å¯¹åè®®è¿›è¡Œç»Ÿä¸€çš„å°è£…å’Œå¤„ç†ã€‚ JNIäº†è§£å—ï¼ŒJavaä¸C++å¦‚ä½•ç›¸äº’è°ƒç”¨ï¼ŸJavaè°ƒç”¨C++ åœ¨Javaä¸­å£°æ˜Nativeæ–¹æ³•ï¼ˆå³éœ€è¦è°ƒç”¨çš„æœ¬åœ°æ–¹æ³•ï¼‰ ç¼–è¯‘ä¸Šè¿° Javaæºæ–‡ä»¶javacï¼ˆå¾—åˆ° .classæ–‡ä»¶ï¼‰ é€šè¿‡ javah å‘½ä»¤å¯¼å‡ºJNIçš„å¤´æ–‡ä»¶ï¼ˆ.hæ–‡ä»¶ï¼‰ ä½¿ç”¨ Javaéœ€è¦äº¤äº’çš„æœ¬åœ°ä»£ç  å®ç°åœ¨ Javaä¸­å£°æ˜çš„Nativeæ–¹æ³• ç¼–è¯‘.soåº“æ–‡ä»¶ é€šè¿‡Javaå‘½ä»¤æ‰§è¡Œ Javaç¨‹åºï¼Œæœ€ç»ˆå®ç°Javaè°ƒç”¨æœ¬åœ°ä»£ç  C++è°ƒç”¨Java ä»classpathè·¯å¾„ä¸‹æœç´¢ClassMethodè¿™ä¸ªç±»ï¼Œå¹¶è¿”å›è¯¥ç±»çš„Classå¯¹è±¡ã€‚ è·å–ç±»çš„é»˜è®¤æ„é€ æ–¹æ³•IDã€‚ æŸ¥æ‰¾å®ä¾‹æ–¹æ³•çš„IDã€‚ åˆ›å»ºè¯¥ç±»çš„å®ä¾‹ã€‚ è°ƒç”¨å¯¹è±¡çš„å®ä¾‹æ–¹æ³•ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445JNIEXPORT void JNICALL Java_com_study_jnilearn_AccessMethod_callJavaInstaceMethod (JNIEnv *env, jclass cls) &#123; jclass clazz = NULL; jobject jobj = NULL; jmethodID mid_construct = NULL; jmethodID mid_instance = NULL; jstring str_arg = NULL; // 1ã€ä»classpathè·¯å¾„ä¸‹æœç´¢ClassMethodè¿™ä¸ªç±»ï¼Œå¹¶è¿”å›è¯¥ç±»çš„Classå¯¹è±¡ clazz = (*env)-&gt;FindClass(env, \"com/study/jnilearn/ClassMethod\"); if (clazz == NULL) &#123; printf(\"æ‰¾ä¸åˆ°'com.study.jnilearn.ClassMethod'è¿™ä¸ªç±»\"); return; &#125; // 2ã€è·å–ç±»çš„é»˜è®¤æ„é€ æ–¹æ³•ID mid_construct = (*env)-&gt;GetMethodID(env,clazz, \"&lt;init&gt;\",\"()V\"); if (mid_construct == NULL) &#123; printf(\"æ‰¾ä¸åˆ°é»˜è®¤çš„æ„é€ æ–¹æ³•\"); return; &#125; // 3ã€æŸ¥æ‰¾å®ä¾‹æ–¹æ³•çš„ID mid_instance = (*env)-&gt;GetMethodID(env, clazz, \"callInstanceMethod\", \"(Ljava/lang/String;I)V\"); if (mid_instance == NULL) &#123; return; &#125; // 4ã€åˆ›å»ºè¯¥ç±»çš„å®ä¾‹ jobj = (*env)-&gt;NewObject(env,clazz,mid_construct); if (jobj == NULL) &#123; printf(\"åœ¨com.study.jnilearn.ClassMethodç±»ä¸­æ‰¾ä¸åˆ°callInstanceMethodæ–¹æ³•\"); return; &#125; // 5ã€è°ƒç”¨å¯¹è±¡çš„å®ä¾‹æ–¹æ³• str_arg = (*env)-&gt;NewStringUTF(env,\"æˆ‘æ˜¯å®ä¾‹æ–¹æ³•\"); (*env)-&gt;CallVoidMethod(env,jobj,mid_instance,str_arg,200); // åˆ é™¤å±€éƒ¨å¼•ç”¨ (*env)-&gt;DeleteLocalRef(env,clazz); (*env)-&gt;DeleteLocalRef(env,jobj); (*env)-&gt;DeleteLocalRef(env,str_arg); &#125; äº†è§£æ’ä»¶åŒ–å’Œçƒ­ä¿®å¤å—ï¼Œå®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œç†è§£å®ƒä»¬çš„åŸç†å—ï¼Ÿ æ’ä»¶åŒ–ï¼šæ’ä»¶åŒ–æ˜¯ä½“ç°åœ¨åŠŸèƒ½æ‹†åˆ†æ–¹é¢çš„ï¼Œå®ƒå°†æŸä¸ªåŠŸèƒ½ç‹¬ç«‹æå–å‡ºæ¥ï¼Œç‹¬ç«‹å¼€å‘ï¼Œç‹¬ç«‹æµ‹è¯•ï¼Œå†æ’å…¥åˆ°ä¸»åº”ç”¨ä¸­ã€‚ä¾æ¬¡æ¥è¾ƒå°‘ä¸»åº”ç”¨çš„è§„æ¨¡ã€‚ çƒ­ä¿®å¤ï¼šçƒ­ä¿®å¤æ˜¯ä½“ç°åœ¨bugä¿®å¤æ–¹é¢çš„ï¼Œå®ƒå®ç°çš„æ˜¯ä¸éœ€è¦é‡æ–°å‘ç‰ˆå’Œé‡æ–°å®‰è£…ï¼Œå°±å¯ä»¥å»ä¿®å¤å·²çŸ¥çš„bugã€‚ åˆ©ç”¨PathClassLoaderå’ŒDexClassLoaderå»åŠ è½½ä¸bugç±»åŒåçš„ç±»ï¼Œæ›¿æ¢æ‰bugç±»ï¼Œè¿›è€Œè¾¾åˆ°ä¿®å¤bugçš„ç›®çš„ï¼ŒåŸç†æ˜¯åœ¨appæ‰“åŒ…çš„æ—¶å€™é˜»æ­¢ç±»æ‰“ä¸ŠCLASS_ISPREVERIFIEDæ ‡å¿—ï¼Œç„¶ååœ¨çƒ­ä¿®å¤çš„æ—¶å€™åŠ¨æ€æ”¹å˜BaseDexClassLoaderå¯¹è±¡é—´æ¥å¼•ç”¨çš„dexElementsï¼Œæ›¿æ¢æ‰æ—§çš„ç±»ã€‚ ç›®å‰çƒ­ä¿®å¤æ¡†æ¶ä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼š Sophixï¼šä¿®æ”¹æ–¹æ³•æŒ‡é’ˆã€‚ Tinkerï¼šä¿®æ”¹dexæ•°ç»„å…ƒç´ ã€‚ å¦‚ä½•åšæ€§èƒ½ä¼˜åŒ–ï¼Ÿ èŠ‚åˆ¶çš„ä½¿ç”¨Serviceï¼Œå½“å¯åŠ¨ä¸€ä¸ªServiceæ—¶ï¼Œç³»ç»Ÿæ€»æ˜¯å€¾å‘äºä¿ç•™è¿™ä¸ªServiceä¾èµ–çš„è¿›ç¨‹ï¼Œè¿™æ ·ä¼šé€ æˆç³»ç»Ÿèµ„æºçš„æµªè´¹ï¼Œå¯ä»¥ä½¿ç”¨IntentServiceï¼Œæ‰§è¡Œå®Œæˆä»»åŠ¡åä¼šè‡ªåŠ¨åœæ­¢ã€‚ å½“ç•Œé¢ä¸å¯è§æ—¶é‡Šæ”¾å†…å­˜ï¼Œå¯ä»¥é‡å†™Activityçš„onTrimMemory()æ–¹æ³•ï¼Œç„¶åç›‘å¬TRIM_MEMORY_UI_HIDDENè¿™ä¸ªçº§åˆ«ï¼Œè¿™ä¸ªçº§åˆ«è¯´æ˜ç”¨æˆ·ç¦»å¼€äº†é¡µé¢ï¼Œå¯ä»¥è€ƒè™‘é‡Šæ”¾å†…å­˜å’Œèµ„æºã€‚ å¯¹å›¾ç‰‡æœ¬èº«è¿›è¡Œæ“ä½œã€‚å°½é‡ä¸è¦ä½¿ç”¨ setImageBitmapã€setImageResourceã€BitmapFactory.decodeResource æ¥è®¾ç½®ä¸€å¼ å¤§å›¾ï¼Œå› ä¸ºè¿™äº›æ–¹æ³•åœ¨å®Œæˆ decode åï¼Œæœ€ç»ˆéƒ½æ˜¯é€šè¿‡ java å±‚çš„ createBitmap æ¥å®Œæˆçš„ï¼Œéœ€è¦æ¶ˆè€—æ›´å¤šå†…å­˜ã€‚ é¿å…åœ¨Bitmapæµªè´¹è¿‡å¤šçš„å†…å­˜ï¼Œä½¿ç”¨å‹ç¼©è¿‡çš„å›¾ç‰‡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Frescoç­‰åº“æ¥ä¼˜åŒ–å¯¹Bitmapæ˜¾ç¤ºçš„ç®¡ç†ã€‚ä¸ç”¨çš„å›¾ç‰‡è®°å¾—è°ƒç”¨å›¾ç‰‡çš„ recycle()æ–¹æ³•å›æ”¶ã€‚ ä½¿ç”¨ä¼˜åŒ–è¿‡çš„æ•°æ®é›†åˆSparseArrayä»£æ›¿HashMapï¼ŒHashMapä¸ºæ¯ä¸ªé”®å€¼éƒ½æä¾›ä¸€ä¸ªå¯¹è±¡å…¥å£ï¼Œä½¿ç”¨SparseArrayå¯ä»¥å…å»åŸºæœ¬å¯¹è±¡ç±»å‹è½¬æ¢ä¸ºå¼•ç”¨æ•°æ®ç±»æƒ³çš„æ—¶é—´ã€‚ ANRANR å…¨å Application Not Respondingï¼Œä¹Ÿå°±æ˜¯â€œåº”ç”¨æ— å“åº”â€ã€‚å½“æ“ä½œåœ¨ä¸€æ®µæ—¶é—´å†…ç³»ç»Ÿæ— æ³•å¤„ç†æ—¶ï¼Œç³»ç»Ÿå±‚é¢ä¼šå¼¹å‡º ANR å¯¹è¯æ¡†äº§ç”ŸåŸå› &amp;è§£å†³æ–¹æ³•ï¼š 5s å†…æ— å“åº”ç”¨æˆ·è¾“å…¥äº‹ä»¶(ä¾‹å¦‚é”®ç›˜è¾“å…¥ï¼Œè§¦æ‘¸å±å¹•ç­‰)ã€‚ ä¸è¦åœ¨ä¸»çº¿ç¨‹ä¸­åšè€—æ—¶æ“ä½œï¼Œè€Œåº”åœ¨å­çº¿ç¨‹ä¸­æ¥å®ç°ã€‚å¦‚ onCreate()å’Œ onResume()é‡Œå°½å¯èƒ½å°‘çš„å»åšåˆ›å»ºæ“ä½œã€‚ BroadcastReceiver åœ¨ 10s å†…æ— æ³•ç»“æŸ åº”ç”¨ç¨‹åºåº”è¯¥é¿å…åœ¨ BroadcastReceiver é‡Œåšè€—æ—¶æ“ä½œæˆ–è®¡ç®—ã€‚ é¿å…åœ¨ IntentReceiver é‡Œå¯åŠ¨ä¸€ä¸ª Activityï¼Œå› ä¸ºå®ƒä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç”»é¢ï¼Œå¹¶ä»å½“å‰ç”¨æˆ·æ­£åœ¨è¿è¡Œçš„ç¨‹åºä¸ŠæŠ¢å¤ºç„¦ç‚¹ Service 20s å†…æ— æ³•ç»“æŸ service æ˜¯è¿è¡Œåœ¨ä¸»çº¿ç¨‹çš„ï¼Œæ‰€ä»¥å† service ä¸­åšè€—æ—¶æ“ä½œï¼Œå¿…é¡»è¦æ”¾åœ¨å­çº¿ç¨‹ä¸­ã€‚ å¦‚æœé˜²æ­¢è¿‡åº¦ç»˜åˆ¶ï¼Œå¦‚ä½•åšå¸ƒå±€ä¼˜åŒ–ï¼Ÿ ä½¿ç”¨includeå¤ç”¨å¸ƒå±€æ–‡ä»¶ã€‚ ä½¿ç”¨mergeæ ‡ç­¾é¿å…åµŒå¥—å¸ƒå±€ã€‚ ä½¿ç”¨stubæ ‡ç­¾ä»…åœ¨éœ€è¦çš„æ—¶å€™åœ¨å±•ç¤ºå‡ºæ¥ã€‚ å¦‚ä½•æäº¤ä»£ç è´¨é‡ï¼Ÿ é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡ï¼Œå°½å¯èƒ½é¿å…é¢‘ç¹çš„åˆ›å»ºä¸´æ—¶å¯¹è±¡ï¼Œä¾‹å¦‚åœ¨forå¾ªç¯å†…ï¼Œå‡å°‘GCçš„æ¬¡æ•°ã€‚ å°½é‡ä½¿ç”¨åŸºæœ¬æ•°æ®ç±»å‹ä»£æ›¿å¼•ç”¨æ•°æ®ç±»å‹ã€‚ é™æ€æ–¹æ³•è°ƒç”¨æ•ˆç‡é«˜äºåŠ¨æ€æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥é¿å…åˆ›å»ºé¢å¤–å¯¹è±¡ã€‚ å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹å’ŒStringç±»å‹çš„å¸¸é‡è¦ä½¿ç”¨static finalä¿®é¥°ï¼Œè¿™æ ·å¸¸é‡ä¼šåœ¨dexæ–‡ä»¶çš„åˆå§‹åŒ–å™¨ä¸­è¿›è¡Œåˆå§‹åŒ–ï¼Œä½¿ç”¨çš„æ—¶å€™å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ å¤šä½¿ç”¨ç³»ç»ŸAPIï¼Œä¾‹å¦‚æ•°ç»„æ‹·è´System.arrayCopy()æ–¹æ³•ï¼Œè¦æ¯”æˆ‘ä»¬ç”¨forå¾ªç¯æ•ˆç‡å¿«9å€ä»¥ä¸Šï¼Œå› ä¸ºç³»ç»ŸAPIå¾ˆå¤šéƒ½æ˜¯é€šè¿‡åº•å±‚çš„æ±‡ç¼–æ¨¡å¼æ‰§è¡Œçš„ï¼Œæ•ˆç‡æ¯”è¾ƒé«˜ã€‚ æœ‰æ²¡æœ‰é‡åˆ°64ké—®é¢˜ï¼Œä¸ºä»€ä¹ˆï¼Œå¦‚ä½•è§£å†³ï¼Ÿ åœ¨DEXæ–‡ä»¶ä¸­ï¼Œmethodã€fieldã€classç­‰çš„ä¸ªæ•°ä½¿ç”¨shortç±»å‹æ¥åšç´¢å¼•ï¼Œå³ä¸¤ä¸ªå­—èŠ‚ï¼ˆ65535ï¼‰ï¼Œmethodã€fieldã€classç­‰å‡æœ‰æ­¤é™åˆ¶ã€‚ APKåœ¨å®‰è£…è¿‡ç¨‹ä¸­ä¼šè°ƒç”¨dexoptå°†DEXæ–‡ä»¶ä¼˜åŒ–æˆODEXæ–‡ä»¶ï¼Œdexoptä½¿ç”¨LinearAllocæ¥å­˜å‚¨åº”ç”¨ä¿¡æ¯ï¼Œå…³äºLinearAllocç¼“å†²åŒºå¤§å°ï¼Œä¸åŒçš„ç‰ˆæœ¬ç»å†äº†4M/8M/16Mçš„é™åˆ¶ï¼Œè¶…å‡ºç¼“å†²åŒºæ—¶å°±ä¼šæŠ›å‡ºINSTALL_FAILED_DEXOPTé”™è¯¯ã€‚ è§£å†³æ–¹æ¡ˆæ˜¯Googleçš„MultiDexæ–¹æ¡ˆï¼Œå…·ä½“å‚è§ï¼šé…ç½®æ–¹æ³•æ•°è¶…è¿‡ 64K çš„åº”ç”¨ã€‚ MVCã€MVPä¸MVVMä¹‹é—´çš„å¯¹æ¯”åˆ†æï¼Ÿ MVCï¼šPCæ—¶ä»£å°±æœ‰çš„æ¶æ„æ–¹æ¡ˆï¼Œåœ¨Androidä¸Šä¹Ÿæ˜¯æœ€æ—©çš„æ–¹æ¡ˆï¼ŒActivity/Fragmentè¿™äº›ä¸Šå¸è§’è‰²æ—¢æ‰¿æ‹…äº†Vçš„è§’è‰²ï¼Œä¹Ÿæ‰¿æ‹…äº†Cçš„è§’è‰²ï¼Œå°é¡¹ç›®å¼€å‘èµ·æ¥ååˆ†é¡ºæ‰‹ï¼Œå¤§é¡¹ç›®å°±ä¼šé‡åˆ°è€¦åˆè¿‡é‡ï¼ŒActivity/Fragmentç±»è¿‡å¤§ç­‰é—®é¢˜ã€‚ MVPï¼šä¸ºäº†è§£å†³MVCè€¦åˆè¿‡é‡çš„é—®é¢˜ï¼ŒMVPçš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯æä¾›ä¸€ä¸ªPresenterå°†è§†å›¾é€»è¾‘Iå’Œä¸šåŠ¡é€»è¾‘ç›¸åˆ†ç¦»ï¼Œè¾¾åˆ°è§£è€¦çš„ç›®çš„ã€‚ MVVMï¼šä½¿ç”¨ViewModelä»£æ›¿Presenterï¼Œå®ç°æ•°æ®ä¸Viewçš„åŒå‘ç»‘å®šï¼Œè¿™å¥—æ¡†æ¶æœ€æ—©ä½¿ç”¨çš„data-bindingå°†æ•°æ®ç»‘å®šåˆ°xmlé‡Œï¼Œè¿™ä¹ˆåšåœ¨å¤§è§„æ¨¡åº”ç”¨çš„æ—¶å€™æ˜¯ä¸è¡Œçš„ï¼Œä¸è¿‡æ•°æ®ç»‘å®šæ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„æ¦‚å¿µï¼Œåç»­Googleåˆæ¨å‡ºäº†ViewModelç»„ä»¶ä¸LiveDataç»„ä»¶ã€‚ViewModelç»„ä»¶è§„èŒƒäº†ViewModelæ‰€å¤„çš„åœ°ä½ã€ç”Ÿå‘½å‘¨æœŸã€ç”Ÿäº§æ–¹å¼ä»¥åŠä¸€ä¸ªActivityä¸‹å¤šä¸ªFragmentå…±äº«ViewModelæ•°æ®çš„é—®é¢˜ã€‚LiveDataç»„ä»¶åˆ™æä¾›äº†åœ¨Javaå±‚é¢Viewè®¢é˜…ViewModelæ•°æ®æºçš„å®ç°æ–¹æ¡ˆã€‚","categories":[],"tags":[{"name":"Android","slug":"Android","permalink":"https://edward7zhang.github.io/tags/Android/"},{"name":"Interview","slug":"Interview","permalink":"https://edward7zhang.github.io/tags/Interview/"}]},{"title":"è®¡ç®—æœºç½‘ç»œåŸºç¡€æ±‡æ€»","slug":"è®¡ç®—æœºç½‘ç»œåŸºç¡€æ±‡æ€»","date":"2018-03-30T02:43:13.000Z","updated":"2018-04-16T06:43:14.976Z","comments":true,"path":"2018/03/30/è®¡ç®—æœºç½‘ç»œåŸºç¡€æ±‡æ€»/","link":"","permalink":"https://edward7zhang.github.io/2018/03/30/è®¡ç®—æœºç½‘ç»œåŸºç¡€æ±‡æ€»/","excerpt":"","text":"è®¡ç®—æœºç½‘ç»œä½“ç³»åˆ†ç±»ï¼šè®¡ç®—æœºç½‘ç»œæ•´ä¸ªä½“ç³»æœ‰ä¸¤ä¸ªå¤§çš„åˆ†ç±»ï¼šä¸€ä¸ªæ˜¯å›½é™…ç»„ç»‡åˆ¶å®šçš„OSIä¸ƒå±‚æ¨¡å‹ï¼Œä¸€ç§æ˜¯å®é™…ä½¿ç”¨ä¸­çš„TCP/IPå››å±‚æ¨¡å‹ã€‚ OSIä¸ƒå±‚æ¨¡å‹ TCP/IPå››å±‚æ¨¡å‹ åº”ç”¨å±‚ â€”- è¡¨ç¤ºå±‚ åº”ç”¨å±‚ ä¼šè¯å±‚ â€”- ä¼ è¾“å±‚ ä¼ è¾“å±‚ ç½‘ç»œå±‚ ç½‘ç»œå±‚ æ•°æ®é“¾è·¯å±‚ ç‰©ç†æ¥å…¥å±‚ ç‰©ç†å±‚ â€”- ç‰©ç†å±‚ï¼šç‰©ç†å±‚ä¸»è¦æ˜¯å®ç°ä¸»æœºå’Œç½‘ç»œä¹‹é—´çš„ç‰©ç†è¿æ¥ï¼Œè§„å®šä¸€äº›ä¸ä¼ è¾“åª’ä½“æ¥å£æœ‰å…³çš„ä¸€äº›ç‰¹æ€§ã€‚ é€šä¿¡æ–¹å¼ï¼š å•å·¥é€šä¿¡ï¼šåªèƒ½ç”±Aä¸»æœºå‘Bä¸»æœºå‘é€æ¶ˆæ¯ï¼Œé€šä¿¡æ˜¯å•å‘çš„ã€‚ åŠåŒå·¥é€šä¿¡ï¼šåŒä¸€æ—¶é—´åªèƒ½æ˜¯ç”±Aä¸»æœºå‘Bä¸»æœºæˆ–è€…æ˜¯Bä¸»æœºå‘Aä¸»æœºå‘é€ä¿¡æ¯ï¼Œä¸èƒ½åŒæ—¶å‘é€æ¶ˆæ¯ã€‚ å…¨åŒå·¥é€šä¿¡ï¼š Aä¸»æœºå’ŒBä¸»æœºå¯ä»¥å®ç°åœ¨åŒä¸€æ—¶é—´å†…æ—¢æ¥æ”¶æ¶ˆæ¯ï¼Œåˆå‘é€æ¶ˆæ¯ï¼Œæå¤§çš„æå‡äº†é€šä¿¡æ•ˆç‡ã€‚ å¸¸è§å¼•å¯¼å‹ä¼ è¾“åª’ä½“ï¼šåŒç»çº¿ï¼šåˆ†ä¸ºå±è”½åŒç»çº¿ï¼ˆSTPï¼‰å’Œéå±è”½åŒç»çº¿ï¼ˆUTPï¼‰ï¼Œå±è”½åŒç»çº¿å°±æ˜¯åœ¨éå±è”½åŒç»çº¿å¤–è¾¹åˆåŠ äº†ä¸€å±‚å±è”½å±‚ tipsï¼šä¸ºä»€ä¹ˆåŒç»çº¿è¦ä¸¤æ ¹çº¿ç»èµ·æ¥ï¼Œä¸¤ä¸ªçº¿ç»èµ·æ¥å¯ä»¥æœ‰æ•ˆçš„å‡å°‘ç›¸äº’ä¹‹é—´çš„ç”µç£å¹²æ‰°ã€‚ åŒè½´ç”µç¼†ï¼šç”±å†…å¯¼ä½“é“œåˆ¶èŠ¯çº¿ï¼Œç»ç¼˜å±‚ï¼Œç½‘çŠ¶ç¼–ç»‡çš„å¤–å¯¼ä½“å±è”½å±‚ï¼Œä»¥åŠå¡‘æ–™ä¿æŠ¤å¤–å±‚ç»„æˆã€‚æœ‰è‰¯å¥½çš„æŠ—å¹²æ‰°æ€§ï¼Œè¢«å¹¿æ³›ç”¨äºè¾ƒé«˜é€Ÿç‡çš„ä¼ è¾“ã€‚ å…‰ç¼†ï¼šç”±éå¸¸é€æ˜çš„çŸ³è‹±ç»ç’ƒæ‹‰æˆç»†ä¸ï¼Œä¸»è¦ç”±çº¤èŠ¯å’ŒåŒ…å±‚æ„æˆåŒå±‚é€šè®¯æŸ±ã€‚å¯ä»¥åˆ†ä¸ºå•æ¨¡å…‰çº¤å’Œå¤šæ¨¡å…‰çº¤ã€‚ ä¿¡é“å¤ç”¨æŠ€æœ¯ï¼š é¢‘åˆ†å¤ç”¨ï¼šæ ¹æ®ä¼ è¾“çš„æ³¢çš„é¢‘ç‡çš„ä¸åŒï¼Œå°†ä¸åŒé¢‘æ®µçš„æ³¢ç”¨äºä¸åŒçš„é€šä¿¡ã€‚ æ—¶åˆ†å¤ç”¨ï¼šå°†æ—¶é—´åˆ†å‰²ä¸ºæ—¶é—´æ®µï¼Œè§„å®šåœ¨æŸä¸ªæ—¶é—´æ®µå†…å‘é€ä»€ä¹ˆæ ·çš„ä¿¡æ¯ï¼Œæ ¹æ®æ—¶é—´æ®µæ¥è¿›è¡Œä¿¡æ¯ç±»åˆ«çš„åŒºåˆ†ã€‚ä¹Ÿç§°ä¸ºåŒæ­¥æ—¶åˆ†å¤ç”¨ ç»Ÿè®¡æ—¶åˆ†å¤ç”¨ï¼šåŸºäºæ—¶åˆ†å¤ç”¨çš„ä¸€ç§æ”¹è¿›ï¼Œç”±äºåŸºæœ¬çš„æ—¶åˆ†å¤ç”¨å¹¶æ²¡æœ‰è€ƒè™‘åˆ°æ¯ä¸ªæ—¶é—´æ®µå†…æ˜¯å¦æœ‰ä¿¡æ¯å‘å‡ºï¼Œä¾‹å¦‚è¯´æ¯ä¸ªæ—¶é—´æ®µæ˜¯20ï¼Œä½†æ˜¯å‘é€æ¶ˆæ¯åªå ç”¨å…¶ä¸­çš„2ï¼Œé‚£ä¹ˆå‰©ä¸‹çš„18å°±å¤„äºç©ºé—²æ—¶é—´ã€‚ç»Ÿè®¡æ—¶åˆ†å¤ç”¨å°±æ˜¯åŸºäºè¿™ç§è€ƒè™‘è€Œè®¾è®¡çš„ï¼Œä»–å…è®¸ç”¨æˆ·æœ‰æ•°æ®æ—¶å°±å°†æ•°æ®å‘é€åˆ°ç¼“å­˜ä¸­ï¼Œç„¶åä¼šä¾æ¬¡æ‰«æè¾“å…¥ç¼“å­˜ï¼ŒæŠŠç¼“å­˜ä¸­çš„æ•°æ®æ”¾å…¥åˆ°STMDå¸§ä¸­ï¼Œè‹¥æ²¡æœ‰å°±è·³è¿‡ï¼Œæ¯å½“ä¸€ä¸ªå¸§æ»¡äº†å°±æŠŠè¿™ä¸ªå¸§å‘å‡ºå»ã€‚STMDå¸§ä¸æ˜¯åˆ†é…çš„å›ºå®šæ—¶åºï¼Œè€Œæ˜¯æ ¹æ®éœ€è¦åŠ¨æ€çš„åˆ†é…æ—¶éš™ï¼Œä¹Ÿç§°ä¹‹ä¸ºå¼‚æ­¥æ—¶åˆ†å¤ç”¨ å…‰åˆ†å¤ç”¨ï¼šå°±æ˜¯å…‰çš„é¢‘åˆ†å¤ç”¨ï¼Œæ ¹æ®å…‰è°±ä¸­é¢‘ç‡çš„ä¸åŒï¼Œç”¨ä¸åŒé¢‘ç‡çš„å…‰æ¥æºå¸¦ä¸åŒçš„ä¿¡æ¯ã€‚ æ•°æ®é“¾è·¯å±‚ï¼šæ•°æ®é“¾è·¯å±‚ä¸»è¦æ˜¯å°†ä¸Šå±‚çš„æ•°æ®è½¬åŒ–ä¸ºæ•°æ®å¸§å‘é€åˆ°é“¾è·¯ä¸Šï¼Œä»¥åŠæŠŠæ¥å—åˆ°çš„å¸§ä¸­çš„æ•°æ®å–å‡ºå¹¶äº¤ç»™ç½‘ç»œå±‚ã€‚ é€šä¿¡æ–¹å¼ï¼š ç‚¹å¯¹ç‚¹é€šä¿¡ï¼šé€šä¿¡æ–¹å¼æ˜¯ç‚¹åˆ°ç‚¹çš„ï¼Œä¹Ÿå°±æ˜¯åªèƒ½æ˜¯ä¸¤ä¸ªç‚¹ä¹‹é—´çš„é€šä¿¡ã€‚å¸¸è§çš„å°±æ˜¯PPPåè®® å¹¿æ’­é€šä¿¡ï¼šå¹¿æ’­é€šè®¯ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥åŒæ—¶å®ç°ä¸€å¯¹å¤šçš„é€šä¿¡ã€‚å¸¸è§çš„å°±æ˜¯CSMA/CDï¼ˆè½½æ³¢ç›‘å¬å¤šç‚¹è®¿é—®/å†²çªæ£€æµ‹ï¼‰ æ ¸å¿ƒè¦è§£å†³çš„é—®é¢˜ï¼š å°è£…æˆå¸§ï¼šåœ¨ä¸€æ®µæ•°æ®çš„å‰ååˆ†åˆ«æ·»åŠ é¦–éƒ¨å’Œå°¾éƒ¨ï¼Œè¿™æ ·å°±æ„æˆäº†ä¸€ä¸ªå¸§ã€‚æ¥æ”¶ç«¯åœ¨æ¥å—åˆ°åå°±å¯ä»¥æ–¹ä¾¿å‡†ç¡®çš„ç¡®å®šå¸§çš„é¦–å°¾ï¼Œä¹Ÿç§°ä¸ºå¸§å®šç•Œç¬¦ã€‚åŒæ—¶å®šä¹‰å‡ºäº†æœ€å¤§ä¼ è¾“å•å…ƒï¼ˆMTUï¼‰â€“è¡¨ç¤ºä¸€æ¬¡å¯ä»¥ä¼ è¾“çš„æœ€å¤§é•¿åº¦ä¸Šé™ã€‚ é€æ˜ä¼ è¾“ï¼š ç”±äºä½¿ç”¨ç‰¹å®šçš„å­—ç¬¦æ¥è¡¨ç¤ºå¸§çš„å¼€å§‹å’Œç»“æŸï¼Œæ‰€ä»¥ä¼ è¾“çš„å†…å®¹ä¸­ä¸èƒ½å‡ºç°å’Œå¸§å®šç•Œç¬¦ç›¸åŒçš„å­—ç¬¦ï¼Œä½†è¿™æ˜¾ç„¶æ˜¯ä¸å¯èƒ½çš„ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªåŠæ³•ï¼Œå°±å¯ä»¥åœ¨å†…å®¹ä¸­å’Œå¸§å®šç•Œç¬¦ä¸€æ ·çš„å­—ç¬¦å‰è¾¹åŠ ä¸Šè§„å®šå¥½çš„è½¬ä¹‰å­—ç¬¦ï¼Œè¿™ç§æ–¹æ³•ç§°ä¸ºå­—ç¬¦å¡«å……æˆ–è€…æ˜¯å­—èŠ‚å¡«å……ã€‚ å·®é”™æ£€æµ‹ï¼š æ¯”ç‰¹åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å¯èƒ½äº§ç”Ÿå·®é”™ï¼Œå·®é”™æ£€æµ‹å°±æ˜¯ç”¨äºæ£€æµ‹å‡ºç°çš„å·®é”™ï¼Œä»¥ä¾¿åŠæ—¶çš„é‡ä¼ ï¼Œæœ€å¸¸ç”¨çš„å·®é”™æ£€æµ‹ç®—æ³•å°±æ˜¯CRCï¼ˆå¾ªç¯å†—ä½™æ£€éªŒï¼‰ ç½‘ç»œå±‚ç½‘ç»œå±‚ä¸»è¦æ˜¯å‘ä¸Šåªæä¾›ç®€å•çµæ´»çš„ï¼Œæ— è¿æ¥çš„ï¼Œå°½æœ€å¤§åŠªåŠ›äº¤ä»˜çš„æ•°æ®æŠ¥æœåŠ¡ã€‚ IPåè®®ï¼ˆç½‘é™…åè®®ï¼‰ï¼šIPåè®®æ˜¯TCP/IPä½“ç³»ä¸­æœ€ä¸»è¦çš„åè®®ä¹‹ä¸€ï¼Œä¸€åˆ‡åœ¨IPä¹‹ä¸‹ï¼Œä¸€åˆ‡åˆåœ¨IPä¹‹ä¸Šã€‚æˆ‘ä»¬å¸¸è¯´çš„åº”è¯¥æ˜¯IPåè®®æ—ï¼Œè¿˜åŒ…å«é…å¥—çš„åè®®ï¼š ARPï¼ˆåœ°å€è§£æåè®®ï¼‰ï¼šå°†ç½‘ç»œçš„IPåœ°å€è½¬åŒ–ä¸ºå®é™…çš„ç‰©ç†åœ°å€ï¼ˆMACåœ°å€ï¼‰ï¼Œå¹¶å­˜å‚¨åœ¨MACåœ°å€è¡¨ä¸­ã€‚ ICMPï¼ˆç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®®ï¼‰ï¼šç”¨äºè¿›è¡Œå·®é”™æƒ…å†µå’Œå¼‚å¸¸æƒ…å†µçš„åé¦ˆï¼Œåˆ†ä¸ºè¯¢é—®æŠ¥æ–‡å’Œå·®é”™æŠ¥å‘ŠæŠ¥æ–‡ã€‚ IGMPï¼ˆç½‘é™…ç»„ç®¡ç†åè®®ï¼‰ï¼šç”¨äºæ§åˆ¶å’Œç®¡ç†å¤šæ’­å’Œç»„æ’­çš„åè®®ã€‚ ç½‘ç»œåœ°å€ï¼ˆIPåœ°å€ï¼‰ä¸»è¦åˆ†ä¸ºäº”ç±»ï¼š Aç±»ï¼šå‰8ä½ä¸ºç½‘ç»œä½ï¼Œå24ä½ä¸ºä¸»æœºä½ï¼Œé¦–ä½ä¸º0 Bç±»ï¼šå‰16ä½ä¸ºç½‘ç»œä½ï¼Œå16ä½ä¸ºä¸»æœºä½ï¼Œå‰ä¸¤ä½ä¸º10 Cç±»ï¼šå‰24ä½ä¸ºç½‘ç»œä½ï¼Œå8ä½ä½ä¸»æœºä½ï¼Œå‰ä¸‰ä½ä¸º110 Dç±»ï¼šå‰å››ä½ä¸º1110ï¼Œç”¨äºå¤šæ’­åœ°å€ Eç±»ï¼šå‰å››ä½ä¸º1111ï¼Œä¿ç•™ä¸ºä»¥åä½¿ç”¨ è·¯ç”±é€‰æ‹©åè®®ï¼šè·¯ç”±é€‰æ‹©åè®®åˆ†ä¸ºå†…éƒ¨ç½‘å…³åè®®ï¼ˆIGPï¼‰å’Œå¤–éƒ¨ç½‘å…³åè®®ï¼ˆEGPï¼‰ å†…éƒ¨ç½‘å…³åè®®ï¼šä¸»è¦æ˜¯æœ‰RIPåè®®å’ŒOSPFåè®® RIPåè®®ï¼ˆè·¯ç”±ä¿¡æ¯åè®®ï¼‰ï¼šåŸºäºè·ç¦»çŸ¢é‡çš„åè®® OSPFï¼ˆå¼€æ”¾æœ€çŸ­è·¯å¾„ä¼˜å…ˆåè®®ï¼‰ï¼šåŸºäºé“¾è·¯çŠ¶æ€çš„åè®® å¤–éƒ¨ç½‘å…³åè®®ï¼šä¸»è¦æ˜¯è¾¹ç•Œç½‘å…³åè®®ï¼ˆBGPï¼‰ï¼Œå°†ä¸€ä¸ªå¤§çš„ç½‘ç»œåˆ†ä¸ºå¤šä¸ªå°çš„è‡ªæ²»åŸŸï¼Œæ¯ä¸ªè‡ªæ²»åŸŸå†…æœ‰ä¸€ä¸ªç½‘å…³è·¯ç”±è´Ÿè´£å’Œå…¶ä»–çš„è‡ªæ²»åŸŸçš„ç½‘å…³è¿›è¡Œé€šè®¯ã€‚ ä¼ è¾“å±‚ç½‘ç»œå±‚ä¸»è¦æ˜¯ä¸ºä¸»æœºä¹‹é—´æä¾›é€»è¾‘é€šè®¯ï¼Œè€Œä¼ è¾“å±‚ä¸ºåº”ç”¨ç¨‹åºä¹‹é—´æä¾›ç«¯åˆ°ç«¯çš„é€»è¾‘é€šè®¯ã€‚ä¸»è¦æ˜¯ä¸¤ç§ç±»å‹çš„é€šè®¯æ–¹å¼ï¼Œé¢å‘è¿æ¥çš„TCPåè®®å’Œé¢å‘æ— è¿æ¥çš„UDPã€‚ ç«¯å£å·ï¼šç«¯å£å·æŒ‰ç…§ä½¿ç”¨åœ°æ–¹çš„ä¸åŒåˆ†ä¸ºä¸¤å¤§ç±»ï¼šæœåŠ¡ç«¯ç«¯å£å·ï¼Œå®¢æˆ·ç«¯ç«¯å£å·ã€‚æŒ‰ç…§å ç”¨æ—¶é•¿åˆå¯ä»¥åˆ†ä¸ºç†ŸçŸ¥ç«¯å£å·ï¼ˆ0~1023ï¼‰ï¼Œç™»è®°ç«¯å£å·ï¼ˆ1024~49151ï¼‰ï¼ŒçŸ­æš‚ç«¯å£å·ï¼ˆ49152~65535ï¼‰ å¸¸è§ç«¯å£ï¼š FTPï¼ˆæ–‡ä»¶ä¼ è¾“åè®®ï¼‰ï¼š20ï¼Œ21â€”â€”å…¶ä¸­20ç«¯å£ç”¨äºä¼ è¾“æ•°æ®ï¼Œ21ç«¯å£ç”¨äºå‘½ä»¤æ§åˆ¶ Telnetï¼ˆè¿œç¨‹ç™»å½•åè®®ï¼‰ï¼š23 DNSï¼ˆåŸŸåè§£ææœåŠ¡ï¼‰ï¼š53 TFTPï¼ˆç®€å•æ–‡ä»¶ä¼ è¾“åè®®ï¼‰ï¼š69 HTTPï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰ï¼š80 ä¸¤ç§åè®®ï¼š UDPï¼ˆç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰ï¼š UDPæ˜¯æ— è¿æ¥çš„ UDPä½¿ç”¨å°½æœ€å¤§åŠªåŠ›äº¤ä»˜ï¼Œä½†æ˜¯ä¸ä¿è¯å¯é äº¤ä»˜ UDPæ˜¯é¢å‘æŠ¥æ–‡çš„ UDPæ²¡æœ‰æ‹¥å¡æ§åˆ¶ UDPæ”¯æŒä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼Œå¤šå¯¹ä¸€ï¼Œå¤šå¯¹ä¸€çš„äº¤äº’é€šè®¯ UDPé¦–éƒ¨çš„å¼€é”€å° TCPï¼ˆä¼ è¾“æ§åˆ¶åè®®ï¼‰ï¼š TCPæ˜¯é¢å‘è¿æ¥çš„ æ¯ä¸€æ¡TCPè¿æ¥åªèƒ½ç”±ä¸¤ä¸ªç«¯ç‚¹ï¼Œæ¯ä¸€æ¡TCPè¿æ¥åªèƒ½æ˜¯ç‚¹å¯¹ç‚¹çš„$TCPè¿æ¥ï¼šï¼š= { socket_1,socket_2 } ={ (IP_1:port_1),(IP_2:port_2)}$ TCPæä¾›å¯é äº¤ä»˜çš„æœåŠ¡ TCPæä¾›å…¨åŒå·¥é€šä¿¡ é¢å‘å­—èŠ‚æµ å¯é ä¼ è¾“çš„å®ç°æœºåˆ¶ï¼š åœæ­¢ç­‰å¾…åè®®ï¼š æ¯å‘å®Œä¸€ä¸ªåˆ†ç»„å°±åœæ­¢å‘é€ï¼Œç›´åˆ°æ”¶åˆ°ä¸Šä¸€ä¸ªåˆ†ç»„çš„ç¡®è®¤ä¿¡æ¯ã€‚è‹¥è¶…è¿‡è§„å®šæ—¶é—´æ²¡æœ‰æ¥æ”¶åˆ°ç¡®è®¤ä¿¡æ¯ï¼Œè¾¹è®¤ä¸ºæ˜¯åˆ†ç»„ä¸¢å¤±ï¼Œå¼€å§‹é‡ä¼ ã€‚ è¿ç»­ARQåè®®ï¼š å‘é€æ–¹é‡‡ç”¨æ»‘åŠ¨çª—å£çš„å½¢å¼ï¼Œå¤„äºæ»‘åŠ¨çª—å£çš„åˆ†ç»„å¯ä»¥ç›´æ¥å‘é€å‡ºå»ï¼›æ¥æ”¶æ–¹ä¸€èˆ¬é‡‡ç”¨ç´¯ç§¯ç¡®è®¤çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯è¯´æ¥å—æ–¹ä¸å¿…å¯¹æ¥æ”¶åˆ°çš„æ¯ä¸€ä¸ªåˆ†ç»„éƒ½è¿›è¡Œç¡®è®¤ï¼Œè€Œæ˜¯å¯¹æŒ‰åºåˆ°è¾¾çš„æœ€åä¸€ä¸ªåˆ†ç»„è¿›è¡Œç¡®è®¤ï¼Œè€Œå‘é€æ–¹æ¯æ¥æ”¶åˆ°ä¸€ä¸ªç¡®è®¤ï¼Œçª—å£å°±å‘å‰æ»‘åŠ¨ä¸€å®šè·ç¦»ã€‚ æµé‡æ§åˆ¶ï¼šåè°ƒå‘é€æ–¹å’Œæ¥æ”¶æ–¹çš„æ”¶å‘é€Ÿç‡ï¼Œåˆ©ç”¨æ»‘åŠ¨çª—å£æ¥åè°ƒï¼Œä½¿ç”¨æ¢æµ‹æŠ¥æ–‡æ¥æ¢æµ‹å½“å‰åº”è¯¥å‘é€çš„é€Ÿç‡ï¼Œé‡‡ç”¨Nagleç®—æ³• æ‹¥å¡æ§åˆ¶ï¼šå½“ç½‘ç»œä¸­æŸä¸€èµ„æºçš„éœ€æ±‚è¶…å‡ºäº†è¯¥èµ„æºæ‰€èƒ½æä¾›çš„å¯ç”¨éƒ¨åˆ†ï¼Œè¿™æ—¶ç½‘ç»œçš„æ€§èƒ½å°±è¦å¼€å§‹å˜åï¼Œè¿™ç§æƒ…å†µå°±å«åšæ‹¥å¡ã€‚è€Œæ‹¥å¡æ§åˆ¶å°±æ˜¯ä¸ºäº†å‡å°‘æˆ–è€…é¿å…æ‹¥å¡å¯¹ç½‘ç»œæ€§èƒ½çš„å½±å“è€Œåšå‡ºçš„ä¸€ç§æ§åˆ¶æ‰‹æ®µã€‚ æ‹¥å¡æ§åˆ¶æ€è·¯ï¼šå‘é€æ–¹ç»´æŒä¸€ä¸ªå«åšæ‹¥å¡çª—å£çš„çŠ¶æ€å˜é‡ï¼Œæ‹¥å¡çª—å£çš„å¤§å°å–å†³äºç½‘ç»œçš„æ‹¥å¡ç¨‹åº¦ï¼Œå¹¶ä¸”åœ¨åŠ¨æ€çš„å˜åŒ–ã€‚å‘é€æ–¹è®©è‡ªå·±çš„å‘é€çª—å£ç­‰äºæ‹¥å¡çª—å£ï¼Œå¦‚æœåœ¨è€ƒè™‘æ¥æ”¶æ–¹çš„æ¥æ”¶èƒ½åŠ›ï¼Œä¸€èˆ¬å‘é€çª—å£è¿˜è¦å°äºæ‹¥å¡çª—å£ã€‚ æ…¢å¼€å§‹ï¼šå½“ä¸»æœºå¼€å§‹å‘é€æ•°æ®çš„æ—¶å€™ï¼Œç”±å°åˆ°å¤§çš„å¢å¤§å‘é€çª—å£ï¼Œä¹Ÿå°±æ˜¯ç”±å°åˆ°å¤§çš„å¢å¤§æ‹¥å¡çª—å£ã€‚æ¥æ”¶æ–¹æ¥æ”¶åˆ°ä¸€ä¸ªæŠ¥æ–‡ä¹‹åå°±å›ä¼ ä¸€ä¸ªç¡®è®¤æŠ¥æ–‡ï¼Œå‘é€æ–¹æ¯æ¥æ”¶åˆ°ä¸€ä¸ªç¡®è®¤æŠ¥æ–‡ï¼Œå°±å°†æ‹¥å¡çª—å£åŠ 1ï¼Œè¿™æ ·æ¯ç»è¿‡ä¸€ä¸ªä¼ è¾“è½®æ¬¡ä¹‹åï¼Œæ‹¥å¡çª—å£å°±å¢å¤§ä¸€å€ã€‚ æ‹¥å¡é¿å…ï¼šæ€è·¯æ˜¯è®©æ‹¥å¡çª—å£ç¼“æ…¢çš„å¢å¤§ï¼Œå³æ¯ç»è¿‡ä¸€ä¸ªå¾€è¿”æ—¶é—´RTTå°±æŠŠå‘é€æ–¹çš„æ‹¥å¡çª—å£åŠ 1ï¼Œè€Œä¸æ˜¯åŠ å€ï¼Œè¿™æ ·æ‹¥å¡çª—å£å°±æ˜¯çº¿æ€§ç¼“æ…¢å¢åŠ ï¼Œæ¯”æ…¢å¼€å§‹çš„å¢é•¿é€Ÿç‡ç¼“æ…¢çš„å¤šã€‚ æ…¢å¼€å§‹é—¨é™ï¼šä¸ºäº†é˜²æ­¢æ‹¥å¡çª—å£å¢é•¿è¿‡å¤§å¼•èµ·ç½‘ç»œæ‹¥å¡ï¼Œè¿˜éœ€è¦è®¾ç½®ä¸€ä¸ªæ…¢å¼€å§‹é—¨é™ æ‹¥å¡çª—å£&lt;æ…¢å¼€å§‹é—¨é™æ—¶ï¼Œä½¿ç”¨æ…¢å¼€å§‹ç®—æ³• æ‹¥å¡çª—å£&gt;æ…¢å¼€å§‹é—¨é™æ—¶ï¼Œä½¿ç”¨æ‹¥å¡é¿å…ç®—æ³• æ‹¥å¡çª—å£=æ…¢å¼€å§‹é—¨é™æ—¶ï¼Œä¸¤ç§ç®—æ³•éƒ½å¯ä»¥ å¿«é‡ä¼ ï¼šè¦æ±‚æ”¶åˆ°æ–¹æ¯æ”¶åˆ°ä¸€ä¸ªæ—¶åºçš„æŠ¥æ–‡æ®µä¹‹åå°±ç«‹å³å‘å‡ºé‡å¤ç¡®è®¤ï¼Œè€Œä¸è¦ç­‰åˆ°è‡ªå·±å‘é€æ•°æ®æ—¶æ‰è¿›è¡Œæå¸¦ç¡®è®¤ã€‚è€Œå‘é€æ–¹åªè¦ä¸€è¿æ”¶åˆ°ä¸‰ä¸ªé‡å¤ç¡®è®¤å°±åº”å½“ç«‹å³é‡ä¼ å¯¹æ–¹å°šæœªæ¥å—åˆ°çš„æŠ¥æ–‡ï¼Œè€Œä¸å¿…ç­‰å¾…ä¸ºæŠ¥æ–‡è®¾ç½®çš„é‡ä¼ è®¡æ—¶å™¨åˆ°æœŸã€‚ å¿«å›å¤ï¼šä¸å¿«é‡ä¼ é…åˆä½¿ç”¨ï¼Œå½“å‘é€æ–¹è¿ç»­æ”¶åˆ°ä¸‰ä¸ªé‡å¤ç¡®è®¤çš„æ—¶å€™ï¼Œå°±æ‰§è¡Œâ€œä¹˜æ³•å‡å°â€ç®—æ³•ï¼Œå°†æ…¢å¼€å§‹é—¨é™å‡åŠã€‚å°†æ‹¥å¡çª—å£è®¾ç½®ä¸ºæ…¢å¼€å§‹é—¨é™å‡åŠä¹‹åçš„å€¼ï¼Œå¹¶å¼€å§‹æŒ‡å‘æ‹¥å¡é¿å…ç®—æ³•ã€‚ TCPçš„è¿æ¥ç®¡ç†ï¼šè¿æ¥ä¸‰æ¬¡æ¡æ‰‹ï¼š å®¢æˆ·ç«¯è¯·æ±‚å»ºç«‹è¿æ¥ï¼šSYN=1ï¼Œseq=xï¼› æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯çš„è¯·æ±‚è¿›è¡Œå“åº”ï¼šSYN=1ï¼ŒACK=1ï¼Œseq=yï¼Œack=x+1 å®¢æˆ·ç«¯å¯¹æœåŠ¡å™¨ç«¯çš„å“åº”ä¿¡æ¯è¿›è¡Œå›åº”ï¼šACK=1ï¼Œseq=x+1ï¼Œack=y+1 æ³¨ï¼š SYNä¸ºåŒæ­¥ä¿¡æ¯ï¼Œåœ¨å»ºç«‹è¿æ¥è¿‡ç¨‹ä¸­å§‹ç»ˆä¸º1 æ–­å¼€è¿æ¥å››æ¬¡æ¡æ‰‹ï¼š å®¢æˆ·ç«¯è¯·æ±‚æ–­å¼€è¿æ¥ï¼š FIN=1ï¼Œseq = uï¼› æœåŠ¡ç«¯å¯¹å®¢æˆ·ç«¯çš„è¯·æ±‚åº”ç­”ï¼šACK=1ï¼Œseq=vï¼Œack=u+1ï¼› æœåŠ¡ç«¯è¯·æ±‚æ–­å¼€è¿æ¥ï¼šFIN=1ï¼ŒACK=1ï¼Œseq=wï¼Œack=u+1ï¼› å®¢æˆ·ç«¯å¯¹æœåŠ¡ç«¯çš„è¯·æ±‚åº”ç­”ï¼šACK=1ï¼Œseq=u+1ï¼Œack=w+1ï¼› åº”ç”¨å±‚åº”ç”¨å±‚æœ‰å¤šç§åè®®ï¼Œå¸¸ç”¨åˆ°çš„å°±æ˜¯HTTPä»¥åŠHTTPSã€‚ HTTPåè®®æŠ¥æ–‡æ ¼å¼ è¯·æ±‚æŠ¥æ–‡ ç›¸åº”æŠ¥æ–‡ è¯·æ±‚è¡Œï¼ˆç”¨äºåŒºåˆ†æ˜¯è¯·æ±‚æŠ¥æ–‡è¿˜æ˜¯å“åº”æŠ¥æ–‡ï¼Œåœ¨å“åº”æŠ¥æ–‡ä¸­ä¸ºçŠ¶æ€è¡Œï¼‰ çŠ¶æ€è¡Œ é¦–éƒ¨è¡Œï¼ˆç”¨æ¥è¯´æ˜æµè§ˆå™¨ï¼ŒæœåŠ¡å™¨æˆ–è€…æ˜¯æŠ¥æ–‡ä¸»ä½“çš„ä¸€äº›ä¿¡æ¯ï¼‰ é¦–éƒ¨è¡Œ ç©ºè¡Œï¼ˆç”¨äºéš”å¼€è¯·æ±‚å®ä½“å’Œé¦–éƒ¨è¡Œï¼‰ ç©ºè¡Œ å®ä½“ä¸»ä½“ï¼ˆç”¨äºä¸€äº›è¯·æ±‚æˆ–è€…æ˜¯å“åº”çš„çš„å‚æ•°å†…å®¹ç­‰ï¼‰ å®ä½“ä¸»ä½“ å¸¸è§çŠ¶æ€ç  1xxï¼šè¡¨ç¤ºé€šçŸ¥ä¿¡æ¯ï¼Œä¾‹å¦‚è¡¨ç¤ºæ”¶åˆ°æˆ–è€…æ˜¯æ­£åœ¨å¤„ç†2xxï¼šè¡¨ç¤ºæˆåŠŸï¼Œä¾‹å¦‚è¡¨ç¤ºæ¥å—æˆ–çŸ¥é“äº†3xxï¼šè¡¨ç¤ºé‡å®šå‘ï¼Œä¾‹å¦‚è¡¨ç¤ºå®Œæˆè¯·æ±‚è¿˜éœ€è¦é‡‡å–è¿›ä¸€æ­¥çš„è¡ŒåŠ¨4xxï¼šè¡¨ç¤ºå®¢æˆ·ç«¯çš„å·®é”™ï¼Œä¾‹å¦‚è¡¨ç¤ºè¯·æ±‚ä¸­æœ‰è¯­æ³•é”™è¯¯æˆ–ä¸èƒ½å®Œæˆ5xxï¼šè¡¨ç¤ºæœåŠ¡å™¨ç«¯çš„å·®é”™ï¼šä¾‹å¦‚è¡¨ç¤ºæœåŠ¡å™¨å¤±æ•ˆæ— æ³•å®Œæˆè¯·æ±‚ HTTPSåè®®å°±æ˜¯å¯¹HTTPåè®®çš„åŠ å¯†ï¼Œæ›´åŠ å®‰å…¨å¯é ï¼Œé‡‡ç”¨HTTP+SSLï¼ˆå®‰å…¨å¥—æ¥å­—å±‚ï¼‰æ¥ä¿è¯æ•°æ®çš„å®‰å…¨æ€§ã€‚","categories":[],"tags":[{"name":"Network","slug":"Network","permalink":"https://edward7zhang.github.io/tags/Network/"}]},{"title":"ä¸€ä¸ªå›¾ç‰‡ä»è¯»å–åˆ°æ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„æ•´ä¸ªæ¸²æŸ“è¿‡ç¨‹","slug":"ä¸€ä¸ªå›¾ç‰‡ä»è¯»å–åˆ°æ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„æ•´ä¸ªæ¸²æŸ“è¿‡ç¨‹","date":"2018-03-29T01:07:14.000Z","updated":"2018-04-06T08:55:30.164Z","comments":true,"path":"2018/03/29/ä¸€ä¸ªå›¾ç‰‡ä»è¯»å–åˆ°æ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„æ•´ä¸ªæ¸²æŸ“è¿‡ç¨‹/","link":"","permalink":"https://edward7zhang.github.io/2018/03/29/ä¸€ä¸ªå›¾ç‰‡ä»è¯»å–åˆ°æ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„æ•´ä¸ªæ¸²æŸ“è¿‡ç¨‹/","excerpt":"æ˜¾ç¤ºæµç¨‹æ•´ä¸ªè¿‡ç¨‹å¯åˆ†ä¸ºä¸‰æ­¥ å¾—åˆ°ä½å›¾ï¼ˆBitmapï¼‰çš„å†…å­˜æ•°æ®ï¼Œå³ä»ç›¸åº”çš„å›¾ç‰‡æ–‡ä»¶è§£ç ï¼Œå¾—åˆ°æ•°æ®æ”¾å¹¶æ”¾åˆ°å†…å­˜ã€‚ ä½¿ç”¨æŸç§2Då¼•æ“ï¼Œå°†ä½å›¾å†…å­˜æŒ‰ä¸€å®šæ–¹å¼ï¼Œæ¸²æŸ“åˆ°å¯ç”¨äºæ˜¾ç¤ºçš„å›¾å½¢å†…å­˜ï¼ˆGraphicBufferï¼‰ä¸Šã€‚ ç”±ä¸€ä¸ªä¸­å¿ƒæ˜¾ç¤ºæ§åˆ¶å™¨ï¼ˆSurfaceflingerï¼‰ï¼Œå°†ç›¸åº”çš„å›¾å½¢å†…å­˜æŠ•æ”¾åˆ°æ˜¾ç¤ºå±ï¼ˆLCDï¼‰ã€‚","text":"æ˜¾ç¤ºæµç¨‹æ•´ä¸ªè¿‡ç¨‹å¯åˆ†ä¸ºä¸‰æ­¥ å¾—åˆ°ä½å›¾ï¼ˆBitmapï¼‰çš„å†…å­˜æ•°æ®ï¼Œå³ä»ç›¸åº”çš„å›¾ç‰‡æ–‡ä»¶è§£ç ï¼Œå¾—åˆ°æ•°æ®æ”¾å¹¶æ”¾åˆ°å†…å­˜ã€‚ ä½¿ç”¨æŸç§2Då¼•æ“ï¼Œå°†ä½å›¾å†…å­˜æŒ‰ä¸€å®šæ–¹å¼ï¼Œæ¸²æŸ“åˆ°å¯ç”¨äºæ˜¾ç¤ºçš„å›¾å½¢å†…å­˜ï¼ˆGraphicBufferï¼‰ä¸Šã€‚ ç”±ä¸€ä¸ªä¸­å¿ƒæ˜¾ç¤ºæ§åˆ¶å™¨ï¼ˆSurfaceflingerï¼‰ï¼Œå°†ç›¸åº”çš„å›¾å½¢å†…å­˜æŠ•æ”¾åˆ°æ˜¾ç¤ºå±ï¼ˆLCDï¼‰ã€‚ æ˜¾ç¤ºæµç¨‹ ä»å›¾ç‰‡æ–‡ä»¶åˆ°ä½å›¾ æ‰¾åˆ°åˆé€‚çš„å›¾ç‰‡æ–‡ä»¶å½“æŠŠé£æ™¯å›¾ç‰‡æ”¾åœ¨drawableç›®å½•æ—¶ï¼ŒAndroidç³»ç»Ÿä¸­ä¼šæ ¹æ®è®¾å¤‡çš„åˆ†è¾¨ç‡ï¼Œå»ç›¸åº”åˆ†è¾¨ç‡çš„ç›®å½•é€‰æ‹©å›¾ç‰‡æ–‡ä»¶ã€‚\bç„¶è€Œï¼Œæˆ‘ä»¬æŠŠå›¾ç‰‡æ”¾åœ¨assetç›®å½•ä¸‹ï¼Œç”¨ asset manager å»æ‰“å¼€æ—¶ï¼Œæˆ–è€…æ”¾åœ¨sdcardä¸‹ï¼Œå°±ä¸å­˜åœ¨è¿™ä¸ªä¸€ä¸ªé€‚é…è¿‡ç¨‹ï¼Œç³»ç»Ÿä¼šå¿ å®åœ°è¯»å–æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶ã€‚ å°†å›¾ç‰‡æ–‡ä»¶è§£ç åˆ°å†…å­˜ï¼Œå½¢æˆä½å›¾ï¼ˆBitmapï¼‰è§£ç å™¨ä¸€èˆ¬ä½¿ç”¨ç³»ç»Ÿçš„ï¼ŒAndroidä¸­æ˜¯ä»¥Skiaä¸»å¯¼è§£ç çš„è¿‡ç¨‹ã€‚å…·ä½“å¾€ä¸‹ç”¨ç¡¬ä»¶è§£ç è¿˜æ˜¯è½¯ä»¶è§£ç ï¼Œå°±ç”±èŠ¯ç‰‡å‚å•†å†³å®šäº†ã€‚ä¸è¿‡ï¼Œç»å¤§éƒ¨åˆ†Androidè®¾å¤‡çš„ç¡¬è§£ç å’Œç¡¬ç¼–ç éƒ½ç”¨äºè‡ªå®¶çš„åº”ç”¨ï¼ˆæ¯”å¦‚æ‹ç…§ï¼‰ï¼Œå¯¹ç¬¬ä¸‰æ–¹åº”ç”¨å¼€æ”¾çš„åªæœ‰è½¯ä»¶ç¼–è§£ç ã€‚ å›¾åƒç¼–è§£ç éƒ½æ˜¯å¾ˆå¤æ‚çš„ç®—æ³•ï¼Œgoogleæä¾›çš„Androidç‰ˆæœ¬é‡Œå¯¹æ­¤ä¹Ÿæ˜¯ä¸æ–­è¿›è¡Œç€ä¼˜åŒ–ï¼Œå¯¼è‡´ç³»ç»Ÿçš„ç¼–è§£ç åº“æ€§èƒ½ä¸€èˆ¬æ¥è¯´æ˜¯å¾ˆä¼˜ç§€çš„ã€‚å¦‚æœæ²¡æœ‰ä¸“ä¸šçš„ç®—æ³•ä¼˜åŒ–äººå‘˜ï¼Œå°±ä¸è¦æŒ‡æœ›é ç§»æ¤ç¬¬ä¸‰æ–¹åº“æ‰“è´¥ç³»ç»Ÿçš„è§£ç å™¨äº†ã€‚ load å°±æ›´ä¸€èˆ¬çš„åœºæ™¯è€Œè¨€ï¼Œå›¾ç‰‡åŸå§‹æ¥æºäºç£ç›˜ã€ç½‘ç»œæˆ–å›¾å½¢å†…å­˜ï¼ˆAndroidéƒ¨åˆ†ç³»ç»Ÿå›¾ç‰‡é¢„åŠ è½½ï¼‰ã€‚å¦‚ä½•åœ¨å¯¼å…¥å¤§é‡å›¾ç‰‡æ—¶ä¸è‡´å‡ºç°å†…å­˜æº¢å‡ºï¼Œå¦‚ä½•å¿«é€Ÿå¯¼å…¥ä¸€ä¸ªé¡µé¢çš„å›¾ç‰‡ä»¥å…ç”¨æˆ·äº§ç”Ÿç­‰å¾…æ„Ÿï¼Œæ˜¯ä¸ªå¤æ‚çš„äº‹æƒ…ã€‚è®¸å¤šå¼€æºå›¾ç‰‡ç¼“å­˜æ¡†æ¶ï¼ˆå¦‚imageloaderï¼‰å°±åœ¨è¿™ä¸€\bè¿‡ç¨‹åšæ–‡ç« ï¼Œä¸å¤šè¿°ã€‚ ä»ä½å›¾åˆ°å›¾å½¢å†…å­˜Androidå‘åº”ç”¨å¼€å‘è€…å¼€æ”¾çš„æƒŸä¸€ä¸€æ¡æ˜¾ç¤ºçš„è·¯å¾„æ˜¯Viewã€‚ä¸ç®¡æƒ³æ˜¾ç¤ºä»€ä¹ˆï¼Œéƒ½å¿…é¡»å…ˆå¼„ä¸ªå¸ƒå±€ï¼Œç„¶åæŠŠè¦æ˜¾ç¤ºçš„å†…å®¹å’Œå¸ƒå±€ä¸­çš„Viewå…³è”èµ·æ¥ã€‚ å¸ƒå±€ï¼Œç¡®å®šViewæœ¬èº«ä½ç½®åœ¨ä¸Šé¢çš„UIæ˜¾ç¤ºå›¾ä¸­ï¼Œæˆ‘ä»¬å‘ç°ï¼Œå›¾å¹¶æ²¡æœ‰æ¨ªå‘å¡«æ»¡æ‰‹æœºå±å¹•ï¼Œè¿™æ˜¯ç”±äºå¸ƒå±€ä¸­è®¾ç½®äº†ç•™ç™½é€ æˆçš„ï¼š 1234android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;android:paddingTop=&quot;@dimen/activity_vertical_margin&quot; å¸ƒå±€å°±æ˜¯æ¯ä¸ªViewçš„measureå’Œlayoutè¿‡ç¨‹ï¼ŒAndroidå›¾å½¢ç³»ç»Ÿçš„frameworkå±‚\bè§£æå¸ƒå±€æ–‡ä»¶ï¼Œå»è®¡ç®—æ¯ä¸ªViewçš„ä½ç½®ã€‚æœ¬æ–‡çš„ä¾‹å­ä¸­ï¼Œæ˜¯ RelativeLayout â€”â€” ImageView çš„è§£æè¿‡ç¨‹ã€‚ å¸ƒå±€è§£æçš„ä¸€èˆ¬æµç¨‹å‚è€ƒä»¥ä¸‹æ–‡ç« ï¼šhttp://blog.csdn.net/qinjuning/article/details/8074262 æ¸²æŸ“ï¼ŒæŠŠä½å›¾ç”»ä¸Šå›¾å½¢å†…å­˜ä¸è€ƒè™‘SurfaceViewçš„éä¸»çº¿æ¸²æŸ“ï¼Œåªè€ƒè™‘ä¸»çº¿æ¸²æŸ“çš„ä¸¤ä¸ªåˆ†æ”¯ï¼šè½¯ä»¶ç»˜åˆ¶ï¼ˆskiaï¼‰ä¸ç¡¬ä»¶åŠ é€Ÿç»˜åˆ¶ï¼ˆhwuiï¼‰ã€‚è½¯ä»¶ç»˜åˆ¶ä¸‹ï¼Œç”±ä½å›¾ç›´æ¥ç”»ä¸Šå»ã€‚ç¡¬ä»¶åŠ é€Ÿç»˜åˆ¶ï¼Œå®é™…ä¸Šæ˜¯GPUç»˜åˆ¶çš„æƒ…å†µä¸‹ï¼Œéœ€è¦å…ˆæŠŠä½å›¾ä¸Šä¼ åˆ°GPUå½¢æˆçº¹ç†ï¼Œå†åŸºäºçº¹ç†é‡‡æ ·ï¼Œæ¸²æŸ“åˆ°å›¾å½¢å†…å­˜ä¸Šã€‚ draw çœ‹ä¸Šå»ï¼ŒGPUç»˜å›¾éœ€è¦å…ˆä¸Šä¼ ä¸ºTextureï¼Œæ˜æ˜¾å¤šäº†ä¸€æ­¥ï¼Œä½†è¯·è€ƒè™‘å¦‚ä¸‹çš„é—®é¢˜ï¼š å¤§éƒ¨åˆ†æƒ…å†µï¼ŒæŠŠä½å›¾ç”»ä¸Šå›¾å½¢å†…å­˜ï¼Œä¸æ˜¯ç®€å•çš„memcpyã€‚å¦‚æœ¬å¤„çš„\bé£æ™¯ç…§ï¼Œå¾ˆæ˜æ˜¾å°±éœ€è¦ç¼©å°ã€‚è¿™ç§æƒ…å†µä¸‹ï¼ŒCPUç»˜åˆ¶éœ€è¦å…ˆé‡‡æ ·ï¼Œè¿™æ˜¯å¾ˆæ…¢çš„ã€‚ ç»˜åˆ¶ä¸æ˜¯ä¸€æ¬¡æ€§çš„å·¥ä½œï¼Œå®ƒæ˜¯è¦åˆ·å¸§çš„ã€‚ä½¿ç”¨GPUç»˜åˆ¶æ—¶ï¼Œçº¹ç†ä¸Šä¼ å›ºç„¶åœ¨ç¬¬ä¸€æ¬¡æ—¶å¢åŠ äº†å¯åŠ¨æ—¶é—´ï¼Œä½†åç»­å¹¶ä¸éœ€è¦é‡åšï¼Œå¯ä»¥ç»§ç»­ä½¿ç”¨GPUå¼ºå¤§çš„æ¸²æŸ“èƒ½åŠ›ã€‚ ä»å›¾å½¢å†…å­˜åˆ°æ˜¾ç¤ºå±è¿™ä¸€å¥—æµç¨‹ä¾¿æ˜¯Androidçš„ä¸‹å±‚æ˜¾ç¤ºå†…å®¹ã€‚SurfaceFlingeræ±‡é›†æ‰€æœ‰å›¾å±‚çš„ä¿¡æ¯ï¼Œé‡‡ç”¨ç¦»çº¿åˆæˆæˆ–åœ¨çº¿åˆæˆçš„æ–¹å¼ï¼Œå°†å›¾å½¢å†…å­˜çš„å†…å®¹é€è¾¾æ˜¾ç¤ºå±LCDã€‚ å‚è§ http://blog.csdn.net/jxt1234and2010/article/details/46057267 æ›´å¥½çš„æ–¹æ¡ˆï¼Ÿ1. æ—¢ç„¶åˆ°å›¾å½¢å†…å­˜æ‰èƒ½æ˜¾ç¤ºï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥è§£ç åˆ°å›¾å½¢å†…å­˜ï¼Ÿå½“ç„¶å¯ä»¥ï¼Œå¼€æœºåŠ¨ç”»å°±æ˜¯è¿™ä¹ˆæçš„ï¼Œè§£åˆ°å›¾å½¢å†…å­˜ç›´æ¥æ˜¾ç¤ºã€‚ä¸è¿‡ï¼Œç”±äºå›¾å½¢å†…å­˜æ˜¯ä¸€ç§è¿›ç¨‹é—´å…±äº«å†…å­˜ï¼Œéœ€è¦ä½œå¾ˆå¤šé¢å¤–çš„åŒæ­¥ã€æ˜ å°„ç­‰ç®¡ç†å·¥ä½œã€‚å¯¹äºä¸€èˆ¬çš„åº”ç”¨åœºæ™¯ï¼Œåœ¨è‡ªå·±çš„è¿›ç¨‹ç©ºé—´ç”³è¯·å†…å­˜ï¼Œæ— ç–‘æ˜¯æ›´æ–¹ä¾¿ç®¡ç†çš„ï¼Œä¹Ÿä¸ä¼šé€ æˆç³»ç»Ÿçš„é¢å¤–è´Ÿæ‹…ã€‚ 2. è§£ç å›¾ç‰‡éœ€è¦æ—¶é—´ï¼Œå¯ä¸å¯ä»¥ä¸€å¼€å§‹å°±ç”¨åŸå§‹ä½å›¾ï¼Œè·³è¿‡è¿™ä¸€è¿‡ç¨‹ï¼Ÿå½“ç„¶å¯ä»¥ï¼ŒAndroidçš„ç³»ç»Ÿå›¾åº“ä¼šä¸ºæ¯ä¸€å¼ ç…§ç‰‡åˆ›å»ºä¸€å¼ ç¼©ç•¥å›¾ï¼Œè¿™ä¸€å¼ ç¼©ç•¥å›¾å°±æ˜¯æ— å‹ç¼©çš„ä½å›¾æ ¼å¼ï¼Œä»¥ä¾¿ç”¨æˆ·å¿«é€Ÿçœ‹åˆ°é¢„è§ˆçš„ç…§ç‰‡ã€‚ä½†å½“\båƒç´ å€¼æ¯”è¾ƒå¤§æ—¶ï¼ŒåŸå§‹ä½å›¾å®åœ¨æ˜¯å¤ªå¤§äº†ï¼Œç›¸æœºæ‹å‡ºæ¥ä¸€å¼ 800wåƒç´ çš„å›¾ç‰‡æ¥è¿‘32Mï¼Œ\bå­˜å‚¨è®¾å¤‡å’Œç½‘ç»œä¼ è¾“éƒ½åƒä¸æ¶ˆã€‚ ä¸€ç§æ›´å¥½çš„æ–¹æ³•æ˜¯ä½¿ç”¨å‹ç¼©çº¹ç†ï¼Œè¿™æ ·æ—¢èƒ½çœå»è§£ç å›¾ç‰‡çš„æ—¶é—´ï¼Œåˆèƒ½å‡å°‘æ¸²æŸ“æ—¶æ‰€éœ€è¦çš„è¯»å–å†…å­˜é‡ã€‚ä½†è¿™ä¸ªå­˜åœ¨å¦‚ä¸‹é—®é¢˜ï¼šç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ï¼ŒAndroidçš„ç¡¬ä»¶åŠ é€Ÿæœºåˆ¶æ˜¯åŸºäºè½¯ä»¶ç»˜åˆ¶æµç¨‹ä¿®æ”¹è€Œæ¥çš„ï¼Œå®ƒéœ€è¦ä¸è½¯ä»¶ç»˜åˆ¶æœ‰ç›¸åŒçš„ä¸Šå±‚æ¥å£ï¼Œè¿™å°±æ„å‘³ç€ï¼Œè½¯ä»¶ç»˜åˆ¶ä¹Ÿè¦è®¾æ³•æ”¯æŒè¿™ç§æ¨¡å¼ã€‚è®©è½¯ä»¶ç»˜åˆ¶æ”¯æŒå‹ç¼©çº¹ç†çš„è§£å‹æ˜¯ä¸å¤§ç°å®çš„ï¼Œä¸è¿‡å‘¢ï¼Œå¯ä»¥è€ƒè™‘å‰¯æœ¬çš„æ¨¡å¼ï¼Œå³åŒæ—¶æä¾›jpg/pngå’Œå‹ç¼©çº¹ç†çš„èµ„æºã€‚ç¬¬äºŒä¸ªé—®é¢˜æ›´åŠ æ£˜æ‰‹ï¼Œç§»åŠ¨è®¾å¤‡çš„GPUæ˜¯åˆ†æ•£çš„ï¼Œæ‰€æä¾›çš„å‹ç¼©çº¹ç†æ ¼å¼ä¹Ÿäº’ä¸ç›¸åŒï¼Œè™½ç„¶æœ‰ETC1å’ŒETC2ä½œä¸ºæ ‡å‡†æ ¼å¼ï¼Œä½†å…¶æ˜¾ç¤ºæ•ˆæœå·®å¼ºäººæ„ã€‚ 3. å°±æ˜¾ç¤ºä¸€å¼ å›¾ç‰‡ï¼Œä¸ºä»€ä¹ˆè¦åˆæˆï¼Œç›´æ¥ä¼ ç»™LCDä¸å¯ä»¥ä¹ˆï¼Ÿå½“ç„¶å¯ä»¥ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„OverlayæŠ€æœ¯ï¼Œè¿›ä¸€æ­¥ï¼Œæ˜¯åœ¨çº¿åˆæˆã€‚æ®è¯´ï¼Œiosçš„å›¾åº“æ˜¾ç¤ºç…§ç‰‡æ—¶æ­£æ˜¯è¿™ä¹ˆåšçš„ã€‚ä¸è¿‡ï¼Œä½¿ç”¨è¿™ä¸ªæŠ€æœ¯æœ‰å¾ˆå¤šå‘ã€‚ç¬¬ä¸€ä¸ªå‘æ˜¯Bufferå¾ªç¯æœºåˆ¶ï¼Œå¤„ç†ä¸å¥½ï¼Œå°±å®¹æ˜“å‡ºç°è£‚å±ã€‚ç¬¬äºŒä¸ªå‘æ˜¯åƒå¥‡ç™¾æ€ªçš„å¸ƒå±€ä½ç½®ï¼Œå•ä¸ªå›¾å±‚è¾…æ»¡æ˜¾ç¤ºå±å¥½å¤„ç†ï¼Œä½†çº¯å¤§éƒ¨åˆ†æƒ…å†µæ˜¯å¤šä¸ªå›¾å±‚å„å å±å¹•çš„ä¸€éƒ¨åˆ†ï¼Œå¦å¤–è¿˜ä¼šæœ‰é‡å çš„æƒ…å†µã€‚ç¬¬ä¸‰ä¸ªå‘åˆ™æ˜¯åå¤„ç†éœ€æ±‚ï¼Œæœ‰æ—¶å€™ç¼©æ”¾å’Œæ—‹è½¬ä¼šå»¶è¿Ÿåˆ°åˆæˆé˜¶æ®µåšå¤„ç†ï¼Œç›´æ¥ä¼ ç»™LCDæ—¶å¦‚ä½•åšè¿™äº›å¤„ç†ä¹Ÿæ˜¯ä¸ªé—®é¢˜ã€‚ åœ¨ç†è§£æ¸…æ¥šåŸç†åï¼Œæ‰¾åˆ°æ€§èƒ½ç“¶é¢ˆå¹¶å‘ç°ä¼˜åŒ–ç‚¹ï¼Œå¹¶ä¸æ˜¯ä»¶éš¾äº‹ï¼Œä½†æ€ä¹ˆé’ˆå¯¹æ€§åœ°å®æ–½ä¼˜åŒ–å¹¶å…¼å®¹åŸæœ‰ç³»ç»Ÿè¿™ä¹ˆä¸€ä¸ªå®å¤§çš„ä½“ç³»ï¼Œå°±ä¸æ˜¯é‚£ä¹ˆå¥½åšäº† ã€‚ä¸è¿‡ï¼Œè§£å†³é—®é¢˜çš„å…³é”®è¿˜æ˜¯åŸç†è¦æ­£ç¡®ï¼Œè¦ç›¸ä¿¡ï¼Œåªè¦åŸç†æ˜¯æ­£ç¡®çš„ï¼Œæµç¨‹ä¸Šå³ä¾¿åƒèˆ¬é˜»ç¢ï¼Œæœ€ç»ˆä¹Ÿèƒ½è¾¾åˆ°ç›®æ ‡çš„ã€‚","categories":[],"tags":[{"name":"Android","slug":"Android","permalink":"https://edward7zhang.github.io/tags/Android/"}]},{"title":"RecyclerViewä¸ºä»€ä¹ˆä¼šæ›¿ä»£scrollView","slug":"RecyclerViewä¸ºä»€ä¹ˆä¼šæ›¿ä»£scrollView","date":"2018-03-22T11:07:14.000Z","updated":"2018-04-02T12:42:04.382Z","comments":true,"path":"2018/03/22/RecyclerViewä¸ºä»€ä¹ˆä¼šæ›¿ä»£scrollView/","link":"","permalink":"https://edward7zhang.github.io/2018/03/22/RecyclerViewä¸ºä»€ä¹ˆä¼šæ›¿ä»£scrollView/","excerpt":"2018-03-21 19:35 å¹¿å·è…¾è®¯è§†é¢‘Androidå²—æ‰“æ¥äº†é¢è¯•ç”µè¯â€¦æ­¤æ¬¡é¢è¯•ä¸­å‘ç°äº†è‡ªå·±çš„è–„å¼±ä¸ä¸è¶³â€¦ç”šè‡³è¢«é—®åˆ°ä¸€ä¸ªä»æ¥ä¹Ÿæ²¡æœ‰æƒ³è¿‡éœ€è¦å»æ¯”è¾ƒçš„Viewâ€¦æœ€åä¸€ä¸ªé—®é¢˜ï¼š é—®ï¼šè¯·é—®åœ¨é¡¹ç›®å¼€å‘ä¸­ç”¨è¿‡å“ªäº›å¸ƒå±€ï¼Ÿ ç­”ï¼šLinearLayoutã€RelativeLayoutã€è‡ªå®šä¹‰ViewGroupã€FrameLayoutã€TableLayoutã€AbsoluteLayoutå…­ç§å¸ƒå±€ é—®ï¼šè‡ªå®šä¹‰å¸ƒå±€ç”¨è¿‡å“ªäº›ï¼Ÿ ç­”ï¼šæœ€å¸¸ç”¨çš„åº”è¯¥æ˜¯RecyclerView é—®ï¼šèƒ½å‘Šè¯‰æˆ‘scollViewå’ŒRecyclerViewçš„åŒºåˆ«å—ï¼Ÿä¸ºä»€ä¹ˆRecyclerViewå¯ä»¥æ›¿ä»£scollViewï¼Ÿ æˆ‘ä¸€è„¸èŒ«ç„¶â€¦","text":"2018-03-21 19:35 å¹¿å·è…¾è®¯è§†é¢‘Androidå²—æ‰“æ¥äº†é¢è¯•ç”µè¯â€¦æ­¤æ¬¡é¢è¯•ä¸­å‘ç°äº†è‡ªå·±çš„è–„å¼±ä¸ä¸è¶³â€¦ç”šè‡³è¢«é—®åˆ°ä¸€ä¸ªä»æ¥ä¹Ÿæ²¡æœ‰æƒ³è¿‡éœ€è¦å»æ¯”è¾ƒçš„Viewâ€¦æœ€åä¸€ä¸ªé—®é¢˜ï¼š é—®ï¼šè¯·é—®åœ¨é¡¹ç›®å¼€å‘ä¸­ç”¨è¿‡å“ªäº›å¸ƒå±€ï¼Ÿ ç­”ï¼šLinearLayoutã€RelativeLayoutã€è‡ªå®šä¹‰ViewGroupã€FrameLayoutã€TableLayoutã€AbsoluteLayoutå…­ç§å¸ƒå±€ é—®ï¼šè‡ªå®šä¹‰å¸ƒå±€ç”¨è¿‡å“ªäº›ï¼Ÿ ç­”ï¼šæœ€å¸¸ç”¨çš„åº”è¯¥æ˜¯RecyclerView é—®ï¼šèƒ½å‘Šè¯‰æˆ‘scollViewå’ŒRecyclerViewçš„åŒºåˆ«å—ï¼Ÿä¸ºä»€ä¹ˆRecyclerViewå¯ä»¥æ›¿ä»£scollViewï¼Ÿ æˆ‘ä¸€è„¸èŒ«ç„¶â€¦ è¿™çš„ç¡®æ˜¯æˆ‘çš„çŸ¥è¯†æ¼æ´â€¦ä¹Ÿæ›¾æ¯”è¾ƒè¿‡ListViewå’ŒRecyclerViewå¯ä»æ¥æ²¡æœ‰æƒ³è¿‡è¦å’Œscollviewæ¥åšç±»æ¯”â€¦é¢è¯•åå°±åšäº†è¿™æ–¹é¢çš„åŠŸè¯¾..ç»ˆäºæ‰¾åˆ°äº†ä¸€ç¯‡å¯ä»¥è§£å†³æˆ‘å¿ƒä¸­å›°æƒ‘çš„æ–‡ç«  ä»¥å‰æˆ‘ä»¬å¼€å‘ä¸€ä¸ªé¡µé¢ï¼Œå‡ ä¹éƒ½æ˜¯é‡‡ç”¨ScrollViewä½œä¸ºçˆ¶å®¹å™¨ï¼Œç„¶ååœ¨ScrollViewä¸­åŒ…å«å„ä¸ªæ¨¡å—Viewã€‚ä»¥å¦‚ä¸‹é¡µé¢æºç¨‹ä¸ºä¾‹ï¼Œæˆ‘å°†å¯¹è¿™ä¸ªç¼–ç¨‹æ¡†æ¶è¿›è¡Œè®²è§£ã€‚ æ‹¿åˆ°ä¸€ä¸ªéœ€è¦æ–°å¼€å‘çš„é¡µé¢ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦ç»™è¿™ä¸ªé¡µé¢åˆ†åŠŸèƒ½æ¨¡å—ã€‚æŠŠé¡µé¢ä¸­æ¯ä¸€ä¸ªæ¨¡å—ä½œä¸ºRecyclerViewçš„ä¸€ä¸ªitemã€‚åœ¨listViewä¸­æŠŠæ¯ä¸ªitemè®¾è®¡ä¸ºä¸åŒçš„ç»“æ„æ—¶ï¼Œä»£ç å†™èµ·æ¥ä¼šç‰¹åˆ«å†—ä½™ï¼Œç»“æ„ä¼šéå¸¸ä¹±ã€‚è€ŒRecyclViewæœ¬èº«ä¸€ä¸ªå¾ˆé‡è¦çš„ç‰¹ç‚¹å°±æ˜¯å¯ä»¥å®ç°å¤šç§ç±»ITEMã€‚ç»™å¼ å›¾æ¥è§£é‡Šä¸€ä¸‹ï¼Œ ä½¿ç”¨RecyclerViewæ¥è®¾è®¡è¿™æ ·ä¸€ä¸ªé¡µé¢èƒ½è§£å†³åŠ è½½æ…¢å’Œå†…å­˜ç´§å¼ çš„é—®é¢˜ï¼Œå› ä¸ºRecyclerViewæœ¬èº«å°±å…·æœ‰å›æ”¶å’Œå»¶è¿ŸåŠ è½½çš„ç‰¹æ€§ã€‚ç„¶è€Œï¼Œå¯¹äºè¿™æ ·åŠŸèƒ½å¤æ‚çš„RecyclerViewï¼Œå¦‚æœè¦æ˜¯ä¸è®¾è®¡ä¸€ä¸‹ç»“æ„ï¼Œå¯æƒ³è€ŒçŸ¥ï¼Œè¿™ä¸ªä»£ç ç»´æŠ¤èµ·æ¥å¾—æœ‰å¤šä¹±ï¼ï¼ï¼å› ä¸ºRecyclerViewçš„ä¸šåŠ¡é€»è¾‘éƒ½æ˜¯å†™åœ¨MainAdapter.javaï¼Œè¦æŠŠè¿™å‡ ç§typeçš„iteméƒ½å†™åœ¨MainAdapter.javaä¸­ï¼Œç»´æŠ¤èµ·æ¥å¾—å¤šè´¹åŠ²ï¼ï¼ äºæ˜¯ï¼Œæˆ‘è®¾è®¡äº†è¿™æ ·ä¸€ç§ç»“æ„ã€‚ æˆ‘ç”¨çº¢è‰²åœ†åœˆåœˆèµ·æ¥çš„æ˜¯ç¨‹åºçš„3ä¸ªæ ¸å¿ƒç±»ï¼šMainActivityã€MainAdapterã€AdapterViewHolderManagerã€‚ MainAcitivityç”¨äºç»„ç»‡ä¸šåŠ¡é€»è¾‘ã€‚ MainAdapteræ˜¯RecyclerViewå¯¹åº”çš„Adapterã€‚ AdapterViewHolderManageræ¥ç®¡ç†æ‰€æœ‰çš„ViewHolderã€‚å¯æƒ³è€ŒçŸ¥ï¼ŒAdapterä¸­æœ‰å¤šå°‘ä¸ªtypeçš„itemï¼Œå°±æœ‰å¤šå°‘ä¸ªViewHolderã€‚ ä»æ€ç»´å¯¼å›¾ä¸­å¯ä»¥çœ‹åˆ°æœ‰ä¸ªdelegateæ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰æ¯ä¸€ç§viewholderçš„delegateã€‚å…¶ä¸­ï¼ŒAdapterDelegateæ˜¯æ¯ä¸€ç§delegateéƒ½è¦å®ç°çš„æ¥å£ã€‚ç”±äºç°åœ¨ç¼–å†™ç¨‹åºéƒ½æ˜¯æ•°æ®é©±åŠ¨ä¸šåŠ¡é€»è¾‘ï¼Œmodelæ–‡ä»¶å¤¹é‡Œå°±æ˜¯æ¯ä¸€ç§delegateå¯¹åº”çš„æ•°æ®ï¼Œè€Œæœ€ç»ˆéœ€è¦æŠŠæ¯ä¸€ç§delegateçš„æ•°æ®éƒ½æ”¾åˆ°ä¸€ä¸ªlistä¸­ï¼Œè¿™å°±éœ€è¦è®©æ¯ä¸€ä¸ªæ•°æ®ç±»éƒ½å®ç°IIndependentTravelDataæ¥å£ã€‚è¿™é‡Œç»™å‡ºdemoå·¥ç¨‹çš„æ–‡ä»¶ç»“æ„ã€‚ ç°åœ¨ï¼Œä½ æ— æ³•æƒ³è±¡æœ¬è¯¥ä»£ç å¾ˆå¤æ‚çš„ä¸»Adapterä¸­çš„ä»£ç ç»“æ„æœ‰å¤šæ¸…æ™°ã€‚ è¿™é‡ŒonBindViewHolderç­‰æ–¹æ³•é‡Œå†ä¹Ÿä¸éœ€è¦å†™switchæ¥åˆ¤æ–­ä¸åŒçš„typeï¼Œæ ¹æ®ä¸åŒçš„typeåšç›¸åº”æ“ä½œäº†ã€‚ä¸ºä»€ä¹ˆç»“æ„ä¼šå¦‚æ­¤æ¸…æ™°ï¼Ÿè¿™é‡Œç”¨åˆ°äº†javaçš„å¤šæ€ã€‚åœ¨MainAdapterçš„æ„é€ æ–¹æ³•é‡ŒæŠŠæ¯ä¸€ä¸ªdelegateçš„å¼•ç”¨addåˆ°managerä¸­ï¼Œåœ¨å››ä¸ªå®ç°æ–¹æ³•é‡Œåªéœ€è¦è°ƒç”¨manger.*å¯¹åº”çš„æ–¹æ³•å°±å¯ä»¥äº†ã€‚ è¿™æ ·è®¾è®¡ç¨‹åºä¸å…‰æœ‰ç»“æ„æ¸…æ™°çš„ç‰¹ç‚¹ï¼Œç»´æŠ¤èµ·æ¥ä¹Ÿéå¸¸å®¹æ˜“ã€‚æ¯”å¦‚ï¼Œæˆ‘ç°åœ¨è¦è°ƒæ•´ä¸€ä¸‹æ¯ä¸€ä¸ªitemçš„å±•ç¤ºé¡ºåºï¼Œæˆ‘åªéœ€è¦è°ƒæ•´listä¸­æ¯ä¸ªitemçš„modelé¡ºåºå°±å¯ä»¥äº†ã€‚ æ€»ç»“ï¼šåœ¨æ—¥å¸¸å¼€å‘ä¸­çš„ç±»ä¼¼Listé•¿åˆ—è¡¨åŠ è½½å±•ç¤ºçš„ä½¿ç”¨éå¸¸å¤š..å¹¶ä¸”ä¸ä»…ä»…æ˜¯å•ä¸€çš„ä¸€ç§viewè¿›è¡Œå¾ªç¯åŠ è½½æ•°æ®å¡«å……..è¿™æ—¶scollviewç›¸å¯¹äºRecyclerViewå°±å˜å¾—éå¸¸ä¸é€‚ç”¨â€¦å½“å¯¹scollviewä¸­è¿›è¡Œä¸åŒviewçš„å¡«å……å°±ä¼šå½±å“æ•´ä½“æ€§èƒ½å’Œèµ„æºå ç”¨â€¦å¯¹äºscollviewè¿™æ ·çš„ç¼–ç¨‹æ¡†æ¶æœ‰ä»¥ä¸‹ä¸¤ä¸ªç¼ºç‚¹ï¼š1ã€åŠ è½½æ—¶é—´é•¿ã€‚2ã€å ç”¨å†…å­˜å¤§ã€‚å› ä¸ºè¿›å…¥é¡µé¢éœ€è¦æŠŠå…¨éƒ¨æ¨¡å—éƒ½åŠ è½½å‡ºæ¥ï¼Œè¿™ä¸ä½†ä¼šéœ€è¦å¾ˆé•¿çš„åŠ è½½æ—¶é—´ï¼Œè€Œä¸”å•ä¸ªé¡µé¢å¦‚æœå ç”¨å†…å­˜è¿‡å¤§ï¼Œä¼šä½¿å¾—é¡µé¢éå¸¸å¡é¡¿ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚è€Œæˆ‘å°†RecyclerViewä»£æ›¿ScrollViewï¼Œå¹¶ä»¥RecyclerViewä½œä¸ºåŸºç¡€ï¼Œä»¥å¢å¼ºå¯æ‰©å±•æ€§ã€çµæ´»æ€§ä¸ºç›®æ ‡ï¼Œå¹¶ä½¿å¾—å„æ¨¡å—é—´å®Œå…¨è§£è€¦ã€‚æ‰€ä»¥è¯´ï¼Œè¿™ä¸ªç¼–ç¨‹æ¡†æ¶éå¸¸å€¼å¾—ä½ æ¥åº”ç”¨ä¸€ä¸‹ï¼Œç›®å‰æˆ‘ä¹Ÿåœ¨å¤šä¸ªçº¿ä¸Šé¡µé¢ä¸­é‡‡ç”¨äº†è¿™ç§æ¡†æ¶ã€‚","categories":[],"tags":[{"name":"Android","slug":"Android","permalink":"https://edward7zhang.github.io/tags/Android/"},{"name":"Interview","slug":"Interview","permalink":"https://edward7zhang.github.io/tags/Interview/"}]},{"title":"å“ªäº›æƒ…å†µä¸‹çš„å¯¹è±¡ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å¤„ç†æ‰ï¼Ÿ","slug":"å“ªäº›æƒ…å†µä¸‹çš„å¯¹è±¡ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å¤„ç†æ‰ï¼Ÿ","date":"2018-03-03T11:07:14.000Z","updated":"2018-03-04T09:22:04.035Z","comments":true,"path":"2018/03/03/å“ªäº›æƒ…å†µä¸‹çš„å¯¹è±¡ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å¤„ç†æ‰ï¼Ÿ/","link":"","permalink":"https://edward7zhang.github.io/2018/03/03/å“ªäº›æƒ…å†µä¸‹çš„å¯¹è±¡ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å¤„ç†æ‰ï¼Ÿ/","excerpt":"Javaå¯¹è±¡ç¬¦åˆä»¥ä¸‹æ¡ä»¶ä¾¿ä¼šè¢«åƒåœ¾å›æ”¶ï¼š1.æ‰€æœ‰å®ä¾‹éƒ½æ²¡æœ‰æ´»åŠ¨çº¿ç¨‹è®¿é—®ã€‚2.æ²¡æœ‰è¢«å…¶ä»–ä»»ä½•å®ä¾‹è®¿é—®çš„å¾ªç¯å¼•ç”¨å®ä¾‹ã€‚3.Java ä¸­æœ‰ä¸åŒçš„å¼•ç”¨ç±»å‹ã€‚åˆ¤æ–­å®ä¾‹æ˜¯å¦ç¬¦åˆåƒåœ¾æ”¶é›†çš„æ¡ä»¶éƒ½ä¾èµ–äºå®ƒçš„å¼•ç”¨ç±»å‹ã€‚[ ç‚¹å‡»æŸ¥çœ‹å¤§å›¾","text":"Javaå¯¹è±¡ç¬¦åˆä»¥ä¸‹æ¡ä»¶ä¾¿ä¼šè¢«åƒåœ¾å›æ”¶ï¼š1.æ‰€æœ‰å®ä¾‹éƒ½æ²¡æœ‰æ´»åŠ¨çº¿ç¨‹è®¿é—®ã€‚2.æ²¡æœ‰è¢«å…¶ä»–ä»»ä½•å®ä¾‹è®¿é—®çš„å¾ªç¯å¼•ç”¨å®ä¾‹ã€‚3.Java ä¸­æœ‰ä¸åŒçš„å¼•ç”¨ç±»å‹ã€‚åˆ¤æ–­å®ä¾‹æ˜¯å¦ç¬¦åˆåƒåœ¾æ”¶é›†çš„æ¡ä»¶éƒ½ä¾èµ–äºå®ƒçš„å¼•ç”¨ç±»å‹ã€‚[ ç‚¹å‡»æŸ¥çœ‹å¤§å›¾ 123456789101112åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ä½œä¸ºä¸€ç§ä¼˜åŒ–æŠ€æœ¯ï¼ŒJava ç¼–è¯‘å™¨èƒ½é€‰æ‹©ç»™å®ä¾‹èµ‹ null å€¼ï¼Œä»è€Œæ ‡è®°å®ä¾‹ä¸ºå¯å›æ”¶ã€‚class Animal &#123; public static void main(String[] args) &#123; Animal lion =new Animal(); System.out.println(\"Main is completed.\"); &#125; protected void finalize() &#123; System.out.println(\"Rest in Peace!\"); &#125;&#125;","categories":[],"tags":[{"name":"Interview","slug":"Interview","permalink":"https://edward7zhang.github.io/tags/Interview/"},{"name":"Java","slug":"Java","permalink":"https://edward7zhang.github.io/tags/Java/"},{"name":"GC","slug":"GC","permalink":"https://edward7zhang.github.io/tags/GC/"}]},{"title":"volatileå…³é”®å­—","slug":"volatileå…³é”®å­—","date":"2018-03-01T13:04:12.000Z","updated":"2018-03-04T06:39:01.299Z","comments":true,"path":"2018/03/01/volatileå…³é”®å­—/","link":"","permalink":"https://edward7zhang.github.io/2018/03/01/volatileå…³é”®å­—/","excerpt":"æ˜¨å¤©æŠ•äº†é˜¿é‡ŒAndroidå¼€å‘çš„å†…æ¨ç®€å†â€¦ä»Šå¤©ç»“æŸäº†ä¸€é¢â€¦å¯¹äºé¢è¯•å®˜æé—®volatileå…³é”®å­—çš„æ„ä¹‰å›ç­”å¾—æ¯”è¾ƒå«ç³Šâ€¦å½“æ—¶åªæœ‰ä¹‹å‰ç”¨è¿‡ä»¥åŠåœ¨JavaæŠ€æœ¯ä¹¦ä¸Šçš„æ¨¡ç³Šè®°å¿†ä½œç­”â€¦ç‰¹ä»¥æ­¤æ–‡æ¥å¼¥è¡¥è‡ªå·±çŸ¥è¯†çš„æ¼æ´ä¸€ã€Javaå†…å­˜æ¨¡å‹æƒ³è¦ç†è§£volatileä¸ºä»€ä¹ˆèƒ½ç¡®ä¿å¯è§æ€§ï¼Œå°±è¦å…ˆç†è§£Javaä¸­çš„å†…å­˜æ¨¡å‹æ˜¯ä»€ä¹ˆæ ·çš„ã€‚ Javaå†…å­˜æ¨¡å‹è§„å®šäº†æ‰€æœ‰çš„å˜é‡éƒ½å­˜å‚¨åœ¨ä¸»å†…å­˜ä¸­ã€‚æ¯æ¡çº¿ç¨‹ä¸­è¿˜æœ‰è‡ªå·±çš„å·¥ä½œå†…å­˜ï¼Œçº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­ä¿å­˜äº†è¢«è¯¥çº¿ç¨‹æ‰€ä½¿ç”¨åˆ°çš„å˜é‡ï¼ˆè¿™äº›å˜é‡æ˜¯ä»ä¸»å†…å­˜ä¸­æ‹·è´è€Œæ¥ï¼‰ã€‚çº¿ç¨‹å¯¹å˜é‡çš„æ‰€æœ‰æ“ä½œï¼ˆè¯»å–ï¼Œèµ‹å€¼ï¼‰éƒ½å¿…é¡»åœ¨å·¥ä½œå†…å­˜ä¸­è¿›è¡Œã€‚ä¸åŒçº¿ç¨‹ä¹‹é—´ä¹Ÿæ— æ³•ç›´æ¥è®¿é—®å¯¹æ–¹å·¥ä½œå†…å­˜ä¸­çš„å˜é‡ï¼Œçº¿ç¨‹é—´å˜é‡å€¼çš„ä¼ é€’å‡éœ€è¦é€šè¿‡ä¸»å†…å­˜æ¥å®Œæˆã€‚ åŸºäºæ­¤ç§å†…å­˜æ¨¡å‹ï¼Œä¾¿äº§ç”Ÿäº†å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­çš„æ•°æ®â€œè„è¯»â€ç­‰é—®é¢˜ã€‚","text":"æ˜¨å¤©æŠ•äº†é˜¿é‡ŒAndroidå¼€å‘çš„å†…æ¨ç®€å†â€¦ä»Šå¤©ç»“æŸäº†ä¸€é¢â€¦å¯¹äºé¢è¯•å®˜æé—®volatileå…³é”®å­—çš„æ„ä¹‰å›ç­”å¾—æ¯”è¾ƒå«ç³Šâ€¦å½“æ—¶åªæœ‰ä¹‹å‰ç”¨è¿‡ä»¥åŠåœ¨JavaæŠ€æœ¯ä¹¦ä¸Šçš„æ¨¡ç³Šè®°å¿†ä½œç­”â€¦ç‰¹ä»¥æ­¤æ–‡æ¥å¼¥è¡¥è‡ªå·±çŸ¥è¯†çš„æ¼æ´ä¸€ã€Javaå†…å­˜æ¨¡å‹æƒ³è¦ç†è§£volatileä¸ºä»€ä¹ˆèƒ½ç¡®ä¿å¯è§æ€§ï¼Œå°±è¦å…ˆç†è§£Javaä¸­çš„å†…å­˜æ¨¡å‹æ˜¯ä»€ä¹ˆæ ·çš„ã€‚ Javaå†…å­˜æ¨¡å‹è§„å®šäº†æ‰€æœ‰çš„å˜é‡éƒ½å­˜å‚¨åœ¨ä¸»å†…å­˜ä¸­ã€‚æ¯æ¡çº¿ç¨‹ä¸­è¿˜æœ‰è‡ªå·±çš„å·¥ä½œå†…å­˜ï¼Œçº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­ä¿å­˜äº†è¢«è¯¥çº¿ç¨‹æ‰€ä½¿ç”¨åˆ°çš„å˜é‡ï¼ˆè¿™äº›å˜é‡æ˜¯ä»ä¸»å†…å­˜ä¸­æ‹·è´è€Œæ¥ï¼‰ã€‚çº¿ç¨‹å¯¹å˜é‡çš„æ‰€æœ‰æ“ä½œï¼ˆè¯»å–ï¼Œèµ‹å€¼ï¼‰éƒ½å¿…é¡»åœ¨å·¥ä½œå†…å­˜ä¸­è¿›è¡Œã€‚ä¸åŒçº¿ç¨‹ä¹‹é—´ä¹Ÿæ— æ³•ç›´æ¥è®¿é—®å¯¹æ–¹å·¥ä½œå†…å­˜ä¸­çš„å˜é‡ï¼Œçº¿ç¨‹é—´å˜é‡å€¼çš„ä¼ é€’å‡éœ€è¦é€šè¿‡ä¸»å†…å­˜æ¥å®Œæˆã€‚ åŸºäºæ­¤ç§å†…å­˜æ¨¡å‹ï¼Œä¾¿äº§ç”Ÿäº†å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­çš„æ•°æ®â€œè„è¯»â€ç­‰é—®é¢˜ã€‚ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼šåœ¨javaä¸­ï¼Œæ‰§è¡Œä¸‹é¢è¿™ä¸ªè¯­å¥ï¼š1i = 10; æ‰§è¡Œçº¿ç¨‹å¿…é¡»å…ˆåœ¨è‡ªå·±çš„å·¥ä½œçº¿ç¨‹ä¸­å¯¹å˜é‡iæ‰€åœ¨çš„ç¼“å­˜è¡Œè¿›è¡Œèµ‹å€¼æ“ä½œï¼Œç„¶åå†å†™å…¥ä¸»å­˜å½“ä¸­ã€‚è€Œä¸æ˜¯ç›´æ¥å°†æ•°å€¼10å†™å…¥ä¸»å­˜å½“ä¸­ã€‚ æ¯”å¦‚åŒæ—¶æœ‰2ä¸ªçº¿ç¨‹æ‰§è¡Œè¿™æ®µä»£ç ï¼Œå‡å¦‚åˆå§‹æ—¶içš„å€¼ä¸º10ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¸Œæœ›ä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œä¹‹åiçš„å€¼å˜ä¸º12ã€‚ä½†æ˜¯äº‹å®ä¼šæ˜¯è¿™æ ·å—ï¼Ÿ å¯èƒ½å­˜åœ¨ä¸‹é¢ä¸€ç§æƒ…å†µï¼šåˆå§‹æ—¶ï¼Œä¸¤ä¸ªçº¿ç¨‹åˆ†åˆ«è¯»å–içš„å€¼å­˜å…¥å„è‡ªæ‰€åœ¨çš„å·¥ä½œå†…å­˜å½“ä¸­ï¼Œç„¶åçº¿ç¨‹1è¿›è¡ŒåŠ 1æ“ä½œï¼Œç„¶åæŠŠiçš„æœ€æ–°å€¼11å†™å…¥åˆ°å†…å­˜ã€‚æ­¤æ—¶çº¿ç¨‹2çš„å·¥ä½œå†…å­˜å½“ä¸­içš„å€¼è¿˜æ˜¯10ï¼Œè¿›è¡ŒåŠ 1æ“ä½œä¹‹åï¼Œiçš„å€¼ä¸º11ï¼Œç„¶åçº¿ç¨‹2æŠŠiçš„å€¼å†™å…¥å†…å­˜ã€‚ æœ€ç»ˆç»“æœiçš„å€¼æ˜¯11ï¼Œè€Œä¸æ˜¯12ã€‚è¿™å°±æ˜¯è‘—åçš„ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ã€‚é€šå¸¸ç§°è¿™ç§è¢«å¤šä¸ªçº¿ç¨‹è®¿é—®çš„å˜é‡ä¸ºå…±äº«å˜é‡ã€‚ é‚£ä¹ˆå¦‚ä½•ç¡®ä¿å…±äº«å˜é‡åœ¨å¤šçº¿ç¨‹è®¿é—®æ—¶èƒ½å¤Ÿæ­£ç¡®è¾“å‡ºç»“æœå‘¢ï¼Ÿ åœ¨è§£å†³è¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆäº†è§£å¹¶å‘ç¼–ç¨‹çš„ä¸‰å¤§æ¦‚å¿µï¼šåŸå­æ€§ï¼Œæœ‰åºæ€§ï¼Œå¯è§æ€§ã€‚ äºŒã€åŸå­æ€§1.å®šä¹‰åŸå­æ€§ï¼šå³ä¸€ä¸ªæ“ä½œæˆ–è€…å¤šä¸ªæ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œå¹¶ä¸”æ‰§è¡Œçš„è¿‡ç¨‹ä¸ä¼šè¢«ä»»ä½•å› ç´ æ‰“æ–­ï¼Œè¦ä¹ˆå°±éƒ½ä¸æ‰§è¡Œã€‚ 2.å®ä¾‹ä¸€ä¸ªå¾ˆç»å…¸çš„ä¾‹å­å°±æ˜¯é“¶è¡Œè´¦æˆ·è½¬è´¦é—®é¢˜ï¼š æ¯”å¦‚ä»è´¦æˆ·Aå‘è´¦æˆ·Bè½¬1000å…ƒï¼Œé‚£ä¹ˆå¿…ç„¶åŒ…æ‹¬2ä¸ªæ“ä½œï¼šä»è´¦æˆ·Aå‡å»1000å…ƒï¼Œå¾€è´¦æˆ·BåŠ ä¸Š1000å…ƒã€‚ è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœè¿™2ä¸ªæ“ä½œä¸å…·å¤‡åŸå­æ€§ï¼Œä¼šé€ æˆä»€ä¹ˆæ ·çš„åæœã€‚å‡å¦‚ä»è´¦æˆ·Aå‡å»1000å…ƒä¹‹åï¼Œæ“ä½œçªç„¶ä¸­æ­¢ã€‚è¿™æ ·å°±ä¼šå¯¼è‡´è´¦æˆ·Aè™½ç„¶å‡å»äº†1000å…ƒï¼Œä½†æ˜¯è´¦æˆ·Bæ²¡æœ‰æ”¶åˆ°è¿™ä¸ªè½¬è¿‡æ¥çš„1000å…ƒã€‚ æ‰€ä»¥è¿™2ä¸ªæ“ä½œå¿…é¡»è¦å…·å¤‡åŸå­æ€§æ‰èƒ½ä¿è¯ä¸å‡ºç°ä¸€äº›æ„å¤–çš„é—®é¢˜ã€‚ åŒæ ·åœ°åæ˜ åˆ°å¹¶å‘ç¼–ç¨‹ä¸­ä¼šå‡ºç°ä»€ä¹ˆç»“æœå‘¢ï¼Ÿ ä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œå¤§å®¶æƒ³ä¸€ä¸‹å‡å¦‚ä¸ºä¸€ä¸ª32ä½çš„å˜é‡èµ‹å€¼è¿‡ç¨‹ä¸å…·å¤‡åŸå­æ€§çš„è¯ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆåæœï¼Ÿ1234567891011121314151617i = 9;``` å‡è‹¥ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œåˆ°è¿™ä¸ªè¯­å¥æ—¶ï¼Œæˆ‘æš‚ä¸”å‡è®¾ä¸ºä¸€ä¸ª32ä½çš„å˜é‡èµ‹å€¼åŒ…æ‹¬ä¸¤ä¸ªè¿‡ç¨‹ï¼šä¸ºä½16ä½èµ‹å€¼ï¼Œä¸ºé«˜16ä½èµ‹å€¼ã€‚é‚£ä¹ˆå°±å¯èƒ½å‘ç”Ÿä¸€ç§æƒ…å†µï¼šå½“å°†ä½16ä½æ•°å€¼å†™å…¥ä¹‹åï¼Œçªç„¶è¢«ä¸­æ–­ï¼Œè€Œæ­¤æ—¶åˆæœ‰ä¸€ä¸ªçº¿ç¨‹å»è¯»å–içš„å€¼ï¼Œé‚£ä¹ˆè¯»å–åˆ°çš„å°±æ˜¯é”™è¯¯çš„æ•°æ®ã€‚### 3.Javaä¸­çš„åŸå­æ€§åœ¨Javaä¸­ï¼Œ**å¯¹åŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡çš„è¯»å–å’Œèµ‹å€¼æ“ä½œæ˜¯åŸå­æ€§æ“ä½œ**ï¼Œå³è¿™äº›æ“ä½œæ˜¯ä¸å¯è¢«ä¸­æ–­çš„ï¼Œè¦ä¹ˆæ‰§è¡Œï¼Œè¦ä¹ˆä¸æ‰§è¡Œã€‚ä¸Šé¢ä¸€å¥è¯è™½ç„¶çœ‹èµ·æ¥ç®€å•ï¼Œä½†æ˜¯ç†è§£èµ·æ¥å¹¶ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“ã€‚çœ‹ä¸‹é¢ä¸€ä¸ªä¾‹å­iï¼šè¯·åˆ†æä»¥ä¸‹å“ªäº›æ“ä½œæ˜¯åŸå­æ€§æ“ä½œï¼š```javax = 10; //è¯­å¥1y = x; //è¯­å¥2x++; //è¯­å¥3x = x + 1; //è¯­å¥4 å’‹ä¸€çœ‹ï¼Œå¯èƒ½ä¼šè¯´ä¸Šé¢çš„4ä¸ªè¯­å¥ä¸­çš„æ“ä½œéƒ½æ˜¯åŸå­æ€§æ“ä½œã€‚å…¶å®åªæœ‰è¯­å¥1æ˜¯åŸå­æ€§æ“ä½œï¼Œå…¶ä»–ä¸‰ä¸ªè¯­å¥éƒ½ä¸æ˜¯åŸå­æ€§æ“ä½œã€‚ è¯­å¥1æ˜¯ç›´æ¥å°†æ•°å€¼10èµ‹å€¼ç»™xï¼Œä¹Ÿå°±æ˜¯è¯´çº¿ç¨‹æ‰§è¡Œè¿™ä¸ªè¯­å¥çš„ä¼šç›´æ¥å°†æ•°å€¼10å†™å…¥åˆ°å·¥ä½œå†…å­˜ä¸­ã€‚ è¯­å¥2å®é™…ä¸ŠåŒ…å«2ä¸ªæ“ä½œï¼Œå®ƒå…ˆè¦å»è¯»å–xçš„å€¼ï¼Œå†å°†xçš„å€¼å†™å…¥å·¥ä½œå†…å­˜ï¼Œè™½ç„¶è¯»å–xçš„å€¼ä»¥åŠå°†xçš„å€¼å†™å…¥å·¥ä½œå†…å­˜ï¼Œè¿™2ä¸ªæ“ä½œéƒ½æ˜¯åŸå­æ€§æ“ä½œï¼Œä½†æ˜¯åˆèµ·æ¥å°±ä¸æ˜¯åŸå­æ€§æ“ä½œäº†ã€‚ åŒæ ·çš„ï¼Œx++å’Œ x = x+1åŒ…æ‹¬3ä¸ªæ“ä½œï¼šè¯»å–xçš„å€¼ï¼Œè¿›è¡ŒåŠ 1æ“ä½œï¼Œå†™å…¥æ–°çš„å€¼ã€‚ æ‰€ä»¥ä¸Šé¢4ä¸ªè¯­å¥åªæœ‰è¯­å¥1çš„æ“ä½œå…·å¤‡åŸå­æ€§ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰ç®€å•çš„è¯»å–ã€èµ‹å€¼ï¼ˆè€Œä¸”å¿…é¡»æ˜¯å°†æ•°å­—èµ‹å€¼ç»™æŸä¸ªå˜é‡ï¼Œå˜é‡ä¹‹é—´çš„ç›¸äº’èµ‹å€¼ä¸æ˜¯åŸå­æ“ä½œï¼‰æ‰æ˜¯åŸå­æ“ä½œã€‚ ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼ŒJavaå†…å­˜æ¨¡å‹åªä¿è¯äº†åŸºæœ¬è¯»å–å’Œèµ‹å€¼æ˜¯åŸå­æ€§æ“ä½œï¼Œå¦‚æœè¦å®ç°æ›´å¤§èŒƒå›´æ“ä½œçš„åŸå­æ€§ï¼Œå¯ä»¥é€šè¿‡synchronizedå’ŒLockæ¥å®ç°ã€‚ç”±äºsynchronizedå’ŒLockèƒ½å¤Ÿä¿è¯ä»»ä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè¯¥ä»£ç å—ï¼Œé‚£ä¹ˆè‡ªç„¶å°±ä¸å­˜åœ¨åŸå­æ€§é—®é¢˜äº†ï¼Œä»è€Œä¿è¯äº†åŸå­æ€§ã€‚ ä¸‰ã€å¯è§æ€§1.å®šä¹‰å¯è§æ€§æ˜¯æŒ‡å½“å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªå˜é‡æ—¶ï¼Œä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†è¿™ä¸ªå˜é‡çš„å€¼ï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹å³çœ‹å¾—åˆ°ä¿®æ”¹çš„å€¼ã€‚ 2.å®ä¾‹ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œçœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼š 123456//çº¿ç¨‹1æ‰§è¡Œçš„ä»£ç int i = 0;i = 10;//çº¿ç¨‹2æ‰§è¡Œçš„ä»£ç j = i; ç”±ä¸Šé¢çš„åˆ†æå¯çŸ¥ï¼Œå½“çº¿ç¨‹1æ‰§è¡Œ i =10è¿™å¥æ—¶ï¼Œä¼šå…ˆæŠŠiçš„åˆå§‹å€¼åŠ è½½åˆ°å·¥ä½œå†…å­˜ä¸­ï¼Œç„¶åèµ‹å€¼ä¸º10ï¼Œé‚£ä¹ˆåœ¨çº¿ç¨‹1çš„å·¥ä½œå†…å­˜å½“ä¸­içš„å€¼å˜ä¸º10äº†ï¼Œå´æ²¡æœ‰ç«‹å³å†™å…¥åˆ°ä¸»å­˜å½“ä¸­ã€‚ æ­¤æ—¶çº¿ç¨‹2æ‰§è¡Œ j = iï¼Œå®ƒä¼šå…ˆå»ä¸»å­˜è¯»å–içš„å€¼å¹¶åŠ è½½åˆ°çº¿ç¨‹2çš„å·¥ä½œå†…å­˜å½“ä¸­ï¼Œæ³¨æ„æ­¤æ—¶å†…å­˜å½“ä¸­içš„å€¼è¿˜æ˜¯0ï¼Œé‚£ä¹ˆå°±ä¼šä½¿å¾—jçš„å€¼ä¸º0ï¼Œè€Œä¸æ˜¯10. è¿™å°±æ˜¯å¯è§æ€§é—®é¢˜ï¼Œçº¿ç¨‹1å¯¹å˜é‡iä¿®æ”¹äº†ä¹‹åï¼Œçº¿ç¨‹2æ²¡æœ‰ç«‹å³çœ‹åˆ°çº¿ç¨‹1ä¿®æ”¹çš„å€¼ã€‚ 3.Javaä¸­çš„å¯è§æ€§å¯¹äºå¯è§æ€§ï¼ŒJavaæä¾›äº†volatileå…³é”®å­—æ¥ä¿è¯å¯è§æ€§ã€‚ å½“ä¸€ä¸ªå…±äº«å˜é‡è¢«volatileä¿®é¥°æ—¶ï¼Œå®ƒä¼šä¿è¯ä¿®æ”¹çš„å€¼ä¼šç«‹å³è¢«æ›´æ–°åˆ°ä¸»å­˜ï¼Œå½“æœ‰å…¶ä»–çº¿ç¨‹éœ€è¦è¯»å–æ—¶ï¼Œå®ƒä¼šå»å†…å­˜ä¸­è¯»å–æ–°å€¼ã€‚ è€Œæ™®é€šçš„å…±äº«å˜é‡ä¸èƒ½ä¿è¯å¯è§æ€§ï¼Œå› ä¸ºæ™®é€šå…±äº«å˜é‡è¢«ä¿®æ”¹ä¹‹åï¼Œä»€ä¹ˆæ—¶å€™è¢«å†™å…¥ä¸»å­˜æ˜¯ä¸ç¡®å®šçš„ï¼Œå½“å…¶ä»–çº¿ç¨‹å»è¯»å–æ—¶ï¼Œæ­¤æ—¶å†…å­˜ä¸­å¯èƒ½è¿˜æ˜¯åŸæ¥çš„æ—§å€¼ï¼Œå› æ­¤æ— æ³•ä¿è¯å¯è§æ€§ã€‚ å¦å¤–ï¼Œé€šè¿‡synchronizedå’ŒLockä¹Ÿèƒ½å¤Ÿä¿è¯å¯è§æ€§ï¼Œsynchronizedå’ŒLockèƒ½ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹è·å–é”ç„¶åæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œå¹¶ä¸”åœ¨é‡Šæ”¾é”ä¹‹å‰ä¼šå°†å¯¹å˜é‡çš„ä¿®æ”¹åˆ·æ–°åˆ°ä¸»å­˜å½“ä¸­ã€‚å› æ­¤å¯ä»¥ä¿è¯å¯è§æ€§ã€‚ å››ã€æœ‰åºæ€§1.å®šä¹‰æœ‰åºæ€§ï¼šå³ç¨‹åºæ‰§è¡Œçš„é¡ºåºæŒ‰ç…§ä»£ç çš„å…ˆåé¡ºåºæ‰§è¡Œã€‚ 2.å®ä¾‹ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œçœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼š 123456int i = 0;boolean flag = false;i = 1; //è¯­å¥1flag = true; //è¯­å¥2 ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªintå‹å˜é‡ï¼Œå®šä¹‰äº†ä¸€ä¸ªbooleanç±»å‹å˜é‡ï¼Œç„¶ååˆ†åˆ«å¯¹ä¸¤ä¸ªå˜é‡è¿›è¡Œèµ‹å€¼æ“ä½œã€‚ä»ä»£ç é¡ºåºä¸Šçœ‹ï¼Œè¯­å¥1æ˜¯åœ¨è¯­å¥2å‰é¢çš„ï¼Œé‚£ä¹ˆJVMåœ¨çœŸæ­£æ‰§è¡Œè¿™æ®µä»£ç çš„æ—¶å€™ä¼šä¿è¯è¯­å¥1ä¸€å®šä¼šåœ¨è¯­å¥2å‰é¢æ‰§è¡Œå—ï¼Ÿä¸ä¸€å®šï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿè¿™é‡Œå¯èƒ½ä¼šå‘ç”ŸæŒ‡ä»¤é‡æ’åºï¼ˆInstruction Reorderï¼‰ã€‚ ä¸‹é¢è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯æŒ‡ä»¤é‡æ’åºï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå¤„ç†å™¨ä¸ºäº†æé«˜ç¨‹åºè¿è¡Œæ•ˆç‡ï¼Œå¯èƒ½ä¼šå¯¹è¾“å…¥ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œå®ƒä¸ä¿è¯ç¨‹åºä¸­å„ä¸ªè¯­å¥çš„æ‰§è¡Œå…ˆåé¡ºåºåŒä»£ç ä¸­çš„é¡ºåºä¸€è‡´ï¼Œä½†æ˜¯å®ƒä¼šä¿è¯ç¨‹åºæœ€ç»ˆæ‰§è¡Œç»“æœå’Œä»£ç é¡ºåºæ‰§è¡Œçš„ç»“æœæ˜¯ä¸€è‡´çš„ã€‚ æ¯”å¦‚ä¸Šé¢çš„ä»£ç ä¸­ï¼Œè¯­å¥1å’Œè¯­å¥2è°å…ˆæ‰§è¡Œå¯¹æœ€ç»ˆçš„ç¨‹åºç»“æœå¹¶æ²¡æœ‰å½±å“ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè¯­å¥2å…ˆæ‰§è¡Œè€Œè¯­å¥1åæ‰§è¡Œã€‚ ä½†æ˜¯è¦æ³¨æ„ï¼Œè™½ç„¶å¤„ç†å™¨ä¼šå¯¹æŒ‡ä»¤è¿›è¡Œé‡æ’åºï¼Œä½†æ˜¯å®ƒä¼šä¿è¯ç¨‹åºæœ€ç»ˆç»“æœä¼šå’Œä»£ç é¡ºåºæ‰§è¡Œç»“æœç›¸åŒï¼Œé‚£ä¹ˆå®ƒé ä»€ä¹ˆä¿è¯çš„å‘¢ï¼Ÿå†çœ‹ä¸‹é¢ä¸€ä¸ªä¾‹å­ï¼š1234int a = 10; //è¯­å¥1int r = 2; //è¯­å¥2a = a + 3; //è¯­å¥3r = a*a; //è¯­å¥4 è¿™æ®µä»£ç æœ‰4ä¸ªè¯­å¥ï¼Œé‚£ä¹ˆå¯èƒ½çš„ä¸€ä¸ªæ‰§è¡Œé¡ºåºæ˜¯ï¼š é‚£ä¹ˆå¯ä¸å¯èƒ½æ˜¯è¿™ä¸ªæ‰§è¡Œé¡ºåºå‘¢ï¼š è¯­å¥2 è¯­å¥1 è¯­å¥4 è¯­å¥3 ä¸å¯èƒ½ï¼Œå› ä¸ºå¤„ç†å™¨åœ¨è¿›è¡Œé‡æ’åºæ—¶æ˜¯ä¼šè€ƒè™‘æŒ‡ä»¤ä¹‹é—´çš„æ•°æ®ä¾èµ–æ€§ï¼Œå¦‚æœä¸€ä¸ªæŒ‡ä»¤Instruction 2å¿…é¡»ç”¨åˆ°Instruction 1çš„ç»“æœï¼Œé‚£ä¹ˆå¤„ç†å™¨ä¼šä¿è¯Instruction 1ä¼šåœ¨Instruction 2ä¹‹å‰æ‰§è¡Œã€‚ è™½ç„¶é‡æ’åºä¸ä¼šå½±å“å•ä¸ªçº¿ç¨‹å†…ç¨‹åºæ‰§è¡Œçš„ç»“æœï¼Œä½†æ˜¯å¤šçº¿ç¨‹å‘¢ï¼Ÿä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­ï¼š 12345678910//çº¿ç¨‹1:context = loadContext(); //è¯­å¥1inited = true; //è¯­å¥2 //çº¿ç¨‹2:while(!inited )&#123; sleep()&#125;doSomethingwithconfig(context); ä¸Šé¢ä»£ç ä¸­ï¼Œç”±äºè¯­å¥1å’Œè¯­å¥2æ²¡æœ‰æ•°æ®ä¾èµ–æ€§ï¼Œå› æ­¤å¯èƒ½ä¼šè¢«é‡æ’åºã€‚å‡å¦‚å‘ç”Ÿäº†é‡æ’åºï¼Œåœ¨çº¿ç¨‹1æ‰§è¡Œè¿‡ç¨‹ä¸­å…ˆæ‰§è¡Œè¯­å¥2ï¼Œè€Œæ­¤æ˜¯çº¿ç¨‹2ä¼šä»¥ä¸ºåˆå§‹åŒ–å·¥ä½œå·²ç»å®Œæˆï¼Œé‚£ä¹ˆå°±ä¼šè·³å‡ºwhileå¾ªç¯ï¼Œå»æ‰§è¡ŒdoSomethingwithconfig(context)æ–¹æ³•ï¼Œè€Œæ­¤æ—¶contextå¹¶æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œå°±ä¼šå¯¼è‡´ç¨‹åºå‡ºé”™ã€‚ ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼ŒæŒ‡ä»¤é‡æ’åºä¸ä¼šå½±å“å•ä¸ªçº¿ç¨‹çš„æ‰§è¡Œï¼Œä½†æ˜¯ä¼šå½±å“åˆ°çº¿ç¨‹å¹¶å‘æ‰§è¡Œçš„æ­£ç¡®æ€§ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œè¦æƒ³å¹¶å‘ç¨‹åºæ­£ç¡®åœ°æ‰§è¡Œï¼Œå¿…é¡»è¦ä¿è¯åŸå­æ€§ã€å¯è§æ€§ä»¥åŠæœ‰åºæ€§ã€‚åªè¦æœ‰ä¸€ä¸ªæ²¡æœ‰è¢«ä¿è¯ï¼Œå°±æœ‰å¯èƒ½ä¼šå¯¼è‡´ç¨‹åºè¿è¡Œä¸æ­£ç¡®ã€‚ 3.Javaä¸­çš„æœ‰åºæ€§åœ¨Javaå†…å­˜æ¨¡å‹ä¸­ï¼Œå…è®¸ç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¯¹æŒ‡ä»¤è¿›è¡Œé‡æ’åºï¼Œä½†æ˜¯é‡æ’åºè¿‡ç¨‹ä¸ä¼šå½±å“åˆ°å•çº¿ç¨‹ç¨‹åºçš„æ‰§è¡Œï¼Œå´ä¼šå½±å“åˆ°å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œçš„æ­£ç¡®æ€§ã€‚ åœ¨Javaé‡Œé¢ï¼Œå¯ä»¥é€šè¿‡volatileå…³é”®å­—æ¥ä¿è¯ä¸€å®šçš„â€œæœ‰åºæ€§â€ã€‚å¦å¤–å¯ä»¥é€šè¿‡synchronizedå’ŒLockæ¥ä¿è¯æœ‰åºæ€§ï¼Œå¾ˆæ˜¾ç„¶ï¼Œsynchronizedå’ŒLockä¿è¯æ¯ä¸ªæ—¶åˆ»æ˜¯æœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œç›¸å½“äºæ˜¯è®©çº¿ç¨‹é¡ºåºæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œè‡ªç„¶å°±ä¿è¯äº†æœ‰åºæ€§ã€‚ å¦å¤–ï¼ŒJavaå†…å­˜æ¨¡å‹å…·å¤‡ä¸€äº›å…ˆå¤©çš„â€œæœ‰åºæ€§â€ï¼Œå³ä¸éœ€è¦é€šè¿‡ä»»ä½•æ‰‹æ®µå°±èƒ½å¤Ÿå¾—åˆ°ä¿è¯çš„æœ‰åºæ€§ï¼Œè¿™ä¸ªé€šå¸¸ä¹Ÿç§°ä¸º happens-before åŸåˆ™ã€‚å¦‚æœä¸¤ä¸ªæ“ä½œçš„æ‰§è¡Œæ¬¡åºæ— æ³•ä»happens-beforeåŸåˆ™æ¨å¯¼å‡ºæ¥ï¼Œé‚£ä¹ˆå®ƒä»¬å°±ä¸èƒ½ä¿è¯å®ƒä»¬çš„æœ‰åºæ€§ï¼Œè™šæ‹Ÿæœºå¯ä»¥éšæ„åœ°å¯¹å®ƒä»¬è¿›è¡Œé‡æ’åºã€‚ ä¸‹é¢å°±æ¥å…·ä½“ä»‹ç»ä¸‹happens-beforeåŸåˆ™ï¼ˆå…ˆè¡Œå‘ç”ŸåŸåˆ™ï¼‰ï¼šâ‘ ç¨‹åºæ¬¡åºè§„åˆ™ï¼šä¸€ä¸ªçº¿ç¨‹å†…ï¼ŒæŒ‰ç…§ä»£ç é¡ºåºï¼Œä¹¦å†™åœ¨å‰é¢çš„æ“ä½œå…ˆè¡Œå‘ç”Ÿäºä¹¦å†™åœ¨åé¢çš„æ“ä½œ â‘¡é”å®šè§„åˆ™ï¼šä¸€ä¸ªunLockæ“ä½œå…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹åŒä¸€ä¸ªé”çš„lockæ“ä½œ â‘¢volatileå˜é‡è§„åˆ™ï¼šå¯¹ä¸€ä¸ªå˜é‡çš„å†™æ“ä½œå…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹è¿™ä¸ªå˜é‡çš„è¯»æ“ä½œ â‘£ä¼ é€’è§„åˆ™ï¼šå¦‚æœæ“ä½œAå…ˆè¡Œå‘ç”Ÿäºæ“ä½œBï¼Œè€Œæ“ä½œBåˆå…ˆè¡Œå‘ç”Ÿäºæ“ä½œCï¼Œåˆ™å¯ä»¥å¾—å‡ºæ“ä½œAå…ˆè¡Œå‘ç”Ÿäºæ“ä½œC â‘¤çº¿ç¨‹å¯åŠ¨è§„åˆ™ï¼šThreadå¯¹è±¡çš„start()æ–¹æ³•å…ˆè¡Œå‘ç”Ÿäºæ­¤çº¿ç¨‹çš„æ¯ä¸ªä¸€ä¸ªåŠ¨ä½œ â‘¥çº¿ç¨‹ä¸­æ–­è§„åˆ™ï¼šå¯¹çº¿ç¨‹interrupt()æ–¹æ³•çš„è°ƒç”¨å…ˆè¡Œå‘ç”Ÿäºè¢«ä¸­æ–­çº¿ç¨‹çš„ä»£ç æ£€æµ‹åˆ°ä¸­æ–­äº‹ä»¶çš„å‘ç”Ÿ â‘¦çº¿ç¨‹ç»ˆç»“è§„åˆ™ï¼šçº¿ç¨‹ä¸­æ‰€æœ‰çš„æ“ä½œéƒ½å…ˆè¡Œå‘ç”Ÿäºçº¿ç¨‹çš„ç»ˆæ­¢æ£€æµ‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Thread.join()æ–¹æ³•ç»“æŸã€Thread.isAlive()çš„è¿”å›å€¼æ‰‹æ®µæ£€æµ‹åˆ°çº¿ç¨‹å·²ç»ç»ˆæ­¢æ‰§è¡Œ â‘§å¯¹è±¡ç»ˆç»“è§„åˆ™ï¼šä¸€ä¸ªå¯¹è±¡çš„åˆå§‹åŒ–å®Œæˆå…ˆè¡Œå‘ç”Ÿäºä»–çš„finalize()æ–¹æ³•çš„å¼€å§‹ è¿™8æ¡è§„åˆ™ä¸­ï¼Œå‰4æ¡è§„åˆ™æ˜¯æ¯”è¾ƒé‡è¦çš„ï¼Œå4æ¡è§„åˆ™éƒ½æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚ ä¸‹é¢æˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹å‰4æ¡è§„åˆ™ï¼š å¯¹äºç¨‹åºæ¬¡åºè§„åˆ™æ¥è¯´ï¼Œå°±æ˜¯ä¸€æ®µç¨‹åºä»£ç çš„æ‰§è¡Œåœ¨å•ä¸ªçº¿ç¨‹ä¸­çœ‹èµ·æ¥æ˜¯æœ‰åºçš„ã€‚æ³¨æ„ï¼Œè™½ç„¶è¿™æ¡è§„åˆ™ä¸­æåˆ°â€œä¹¦å†™åœ¨å‰é¢çš„æ“ä½œå…ˆè¡Œå‘ç”Ÿäºä¹¦å†™åœ¨åé¢çš„æ“ä½œâ€ï¼Œè¿™ä¸ªåº”è¯¥æ˜¯ç¨‹åºçœ‹èµ·æ¥æ‰§è¡Œçš„é¡ºåºæ˜¯æŒ‰ç…§ä»£ç é¡ºåºæ‰§è¡Œçš„ï¼Œä½†æ˜¯è™šæ‹Ÿæœºå¯èƒ½ä¼šå¯¹ç¨‹åºä»£ç è¿›è¡ŒæŒ‡ä»¤é‡æ’åºã€‚è™½ç„¶è¿›è¡Œé‡æ’åºï¼Œä½†æ˜¯æœ€ç»ˆæ‰§è¡Œçš„ç»“æœæ˜¯ä¸ç¨‹åºé¡ºåºæ‰§è¡Œçš„ç»“æœä¸€è‡´çš„ï¼Œå®ƒåªä¼šå¯¹ä¸å­˜åœ¨æ•°æ®ä¾èµ–æ€§çš„æŒ‡ä»¤è¿›è¡Œé‡æ’åºã€‚å› æ­¤ï¼Œåœ¨å•ä¸ªçº¿ç¨‹ä¸­ï¼Œç¨‹åºæ‰§è¡Œçœ‹èµ·æ¥æ˜¯æœ‰åºæ‰§è¡Œçš„ï¼Œè¿™ä¸€ç‚¹è¦æ³¨æ„ç†è§£ã€‚äº‹å®ä¸Šï¼Œè¿™ä¸ªè§„åˆ™æ˜¯ç”¨æ¥ä¿è¯ç¨‹åºåœ¨å•çº¿ç¨‹ä¸­æ‰§è¡Œç»“æœçš„æ­£ç¡®æ€§ï¼Œä½†æ— æ³•ä¿è¯ç¨‹åºåœ¨å¤šçº¿ç¨‹ä¸­æ‰§è¡Œçš„æ­£ç¡®æ€§ã€‚ ç¬¬äºŒæ¡è§„åˆ™ä¹Ÿæ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œä¹Ÿå°±æ˜¯è¯´æ— è®ºåœ¨å•çº¿ç¨‹ä¸­è¿˜æ˜¯å¤šçº¿ç¨‹ä¸­ï¼ŒåŒä¸€ä¸ªé”å¦‚æœå¤„äºè¢«é”å®šçš„çŠ¶æ€ï¼Œé‚£ä¹ˆå¿…é¡»å…ˆå¯¹é”è¿›è¡Œäº†é‡Šæ”¾æ“ä½œï¼Œåé¢æ‰èƒ½ç»§ç»­è¿›è¡Œlockæ“ä½œã€‚ ç¬¬ä¸‰æ¡è§„åˆ™æ˜¯ä¸€æ¡æ¯”è¾ƒé‡è¦çš„è§„åˆ™ã€‚ç›´è§‚åœ°è§£é‡Šå°±æ˜¯ï¼Œå¦‚æœä¸€ä¸ªçº¿ç¨‹å…ˆå»å†™ä¸€ä¸ªå˜é‡ï¼Œç„¶åä¸€ä¸ªçº¿ç¨‹å»è¿›è¡Œè¯»å–ï¼Œé‚£ä¹ˆå†™å…¥æ“ä½œè‚¯å®šä¼šå…ˆè¡Œå‘ç”Ÿäºè¯»æ“ä½œã€‚ ç¬¬å››æ¡è§„åˆ™å®é™…ä¸Šå°±æ˜¯ä½“ç°happens-beforeåŸåˆ™å…·å¤‡ä¼ é€’æ€§ã€‚ äº”ã€æ·±å…¥ç†è§£volatileå…³é”®å­—1.volatileä¿è¯å¯è§æ€§ä¸€æ—¦ä¸€ä¸ªå…±äº«å˜é‡ï¼ˆç±»çš„æˆå‘˜å˜é‡ã€ç±»çš„é™æ€æˆå‘˜å˜é‡ï¼‰è¢«volatileä¿®é¥°ä¹‹åï¼Œé‚£ä¹ˆå°±å…·å¤‡äº†ä¸¤å±‚è¯­ä¹‰ï¼š 1ï¼‰ä¿è¯äº†ä¸åŒçº¿ç¨‹å¯¹è¿™ä¸ªå˜é‡è¿›è¡Œæ“ä½œæ—¶çš„å¯è§æ€§ï¼Œå³ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†æŸä¸ªå˜é‡çš„å€¼ï¼Œè¿™æ–°å€¼å¯¹å…¶ä»–çº¿ç¨‹æ¥è¯´æ˜¯ç«‹å³å¯è§çš„ã€‚ 2ï¼‰ç¦æ­¢è¿›è¡ŒæŒ‡ä»¤é‡æ’åºã€‚ å…ˆçœ‹ä¸€æ®µä»£ç ï¼Œå‡å¦‚çº¿ç¨‹1å…ˆæ‰§è¡Œï¼Œçº¿ç¨‹2åæ‰§è¡Œï¼š12345678//çº¿ç¨‹1boolean stop = false;while(!stop)&#123; doSomething();&#125; //çº¿ç¨‹2stop = true; è¿™æ®µä»£ç æ˜¯å¾ˆå…¸å‹çš„ä¸€æ®µä»£ç ï¼Œå¾ˆå¤šäººåœ¨ä¸­æ–­çº¿ç¨‹æ—¶å¯èƒ½éƒ½ä¼šé‡‡ç”¨è¿™ç§æ ‡è®°åŠæ³•ã€‚ä½†æ˜¯äº‹å®ä¸Šï¼Œè¿™æ®µä»£ç ä¼šå®Œå…¨è¿è¡Œæ­£ç¡®ä¹ˆï¼Ÿå³ä¸€å®šä¼šå°†çº¿ç¨‹ä¸­æ–­ä¹ˆï¼Ÿä¸ä¸€å®šï¼Œä¹Ÿè®¸åœ¨å¤§å¤šæ•°æ—¶å€™ï¼Œè¿™ä¸ªä»£ç èƒ½å¤ŸæŠŠçº¿ç¨‹ä¸­æ–­ï¼Œä½†æ˜¯ä¹Ÿæœ‰å¯èƒ½ä¼šå¯¼è‡´æ— æ³•ä¸­æ–­çº¿ç¨‹ï¼ˆè™½ç„¶è¿™ä¸ªå¯èƒ½æ€§å¾ˆå°ï¼Œä½†æ˜¯åªè¦ä¸€æ—¦å‘ç”Ÿè¿™ç§æƒ…å†µå°±ä¼šé€ æˆæ­»å¾ªç¯äº†ï¼‰ã€‚ ä¸‹é¢è§£é‡Šä¸€ä¸‹è¿™æ®µä»£ç ä¸ºä½•æœ‰å¯èƒ½å¯¼è‡´æ— æ³•ä¸­æ–­çº¿ç¨‹ã€‚åœ¨å‰é¢å·²ç»è§£é‡Šè¿‡ï¼Œæ¯ä¸ªçº¿ç¨‹åœ¨è¿è¡Œè¿‡ç¨‹ä¸­éƒ½æœ‰è‡ªå·±çš„å·¥ä½œå†…å­˜ï¼Œé‚£ä¹ˆçº¿ç¨‹1åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œä¼šå°†stopå˜é‡çš„å€¼æ‹·è´ä¸€ä»½æ”¾åœ¨è‡ªå·±çš„å·¥ä½œå†…å­˜å½“ä¸­ã€‚ é‚£ä¹ˆå½“çº¿ç¨‹2æ›´æ”¹äº†stopå˜é‡çš„å€¼ä¹‹åï¼Œä½†æ˜¯è¿˜æ²¡æ¥å¾—åŠå†™å…¥ä¸»å­˜å½“ä¸­ï¼Œçº¿ç¨‹2è½¬å»åšå…¶ä»–äº‹æƒ…äº†ï¼Œé‚£ä¹ˆçº¿ç¨‹1ç”±äºä¸çŸ¥é“çº¿ç¨‹2å¯¹stopå˜é‡çš„æ›´æ”¹ï¼Œå› æ­¤è¿˜ä¼šä¸€ç›´å¾ªç¯ä¸‹å»ã€‚ ä½†æ˜¯ç”¨volatileä¿®é¥°ä¹‹åå°±å˜å¾—ä¸ä¸€æ ·äº†ï¼š ç¬¬ä¸€ï¼šä½¿ç”¨volatileå…³é”®å­—ä¼šå¼ºåˆ¶å°†ä¿®æ”¹çš„å€¼ç«‹å³å†™å…¥ä¸»å­˜ï¼› ç¬¬äºŒï¼šä½¿ç”¨volatileå…³é”®å­—çš„è¯ï¼Œå½“çº¿ç¨‹2è¿›è¡Œä¿®æ”¹æ—¶ï¼Œä¼šå¯¼è‡´çº¿ç¨‹1çš„å·¥ä½œå†…å­˜ä¸­ç¼“å­˜å˜é‡stopçš„ç¼“å­˜è¡Œæ— æ•ˆï¼ˆåæ˜ åˆ°ç¡¬ä»¶å±‚çš„è¯ï¼Œå°±æ˜¯CPUçš„L1æˆ–è€…L2ç¼“å­˜ä¸­å¯¹åº”çš„ç¼“å­˜è¡Œæ— æ•ˆï¼‰ï¼› ç¬¬ä¸‰ï¼šç”±äºçº¿ç¨‹1çš„å·¥ä½œå†…å­˜ä¸­ç¼“å­˜å˜é‡stopçš„ç¼“å­˜è¡Œæ— æ•ˆï¼Œæ‰€ä»¥çº¿ç¨‹1å†æ¬¡è¯»å–å˜é‡stopçš„å€¼æ—¶ä¼šå»ä¸»å­˜è¯»å–ã€‚ é‚£ä¹ˆåœ¨çº¿ç¨‹2ä¿®æ”¹stopå€¼æ—¶ï¼ˆå½“ç„¶è¿™é‡ŒåŒ…æ‹¬2ä¸ªæ“ä½œï¼Œä¿®æ”¹çº¿ç¨‹2å·¥ä½œå†…å­˜ä¸­çš„å€¼ï¼Œç„¶åå°†ä¿®æ”¹åçš„å€¼å†™å…¥å†…å­˜ï¼‰ï¼Œä¼šä½¿å¾—çº¿ç¨‹1çš„å·¥ä½œå†…å­˜ä¸­ç¼“å­˜å˜é‡stopçš„ç¼“å­˜è¡Œæ— æ•ˆï¼Œç„¶åçº¿ç¨‹1è¯»å–æ—¶ï¼Œå‘ç°è‡ªå·±çš„ç¼“å­˜è¡Œæ— æ•ˆï¼Œå®ƒä¼šç­‰å¾…ç¼“å­˜è¡Œå¯¹åº”çš„ä¸»å­˜åœ°å€è¢«æ›´æ–°ä¹‹åï¼Œç„¶åå»å¯¹åº”çš„ä¸»å­˜è¯»å–æœ€æ–°çš„å€¼ã€‚ é‚£ä¹ˆçº¿ç¨‹1è¯»å–åˆ°çš„å°±æ˜¯æœ€æ–°çš„æ­£ç¡®çš„å€¼ã€‚ 2.volatileä¸èƒ½ç¡®ä¿åŸå­æ€§ä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­ï¼š 123456789101112131415161718192021222324252627282930313233343536public class Nothing &#123; private volatile int inc = 0; private volatile static int count = 10; private void increase() &#123; ++inc; &#125; public static void main(String[] args) &#123; int loop = 10; Nothing nothing = new Nothing(); while (loop-- &gt; 0) &#123; nothing.operation(); &#125; &#125; private void operation() &#123; final Nothing test = new Nothing(); for (int i = 0; i &lt; 10; i++) &#123; new Thread(() -&gt; &#123; for (int j = 0; j &lt; 1000000; j++) &#123; test.increase(); &#125; --count; &#125;).start(); &#125; // ä¿è¯å‰é¢çš„çº¿ç¨‹éƒ½æ‰§è¡Œå®Œ while (count &gt; 0) &#123; &#125; System.out.println(\"æœ€åçš„æ•°æ®ä¸ºï¼š\" + test.inc); &#125;&#125; è¿è¡Œç»“æœä¸ºï¼š 12345678910æœ€åçš„æ•°æ®ä¸ºï¼š5919956æœ€åçš„æ•°æ®ä¸ºï¼š3637231æœ€åçš„æ•°æ®ä¸ºï¼š2144549æœ€åçš„æ•°æ®ä¸ºï¼š2403538æœ€åçš„æ•°æ®ä¸ºï¼š1762639æœ€åçš„æ•°æ®ä¸ºï¼š2878721æœ€åçš„æ•°æ®ä¸ºï¼š2658645æœ€åçš„æ•°æ®ä¸ºï¼š2534078æœ€åçš„æ•°æ®ä¸ºï¼š2031751æœ€åçš„æ•°æ®ä¸ºï¼š2924506 å¤§å®¶æƒ³ä¸€ä¸‹è¿™æ®µç¨‹åºçš„è¾“å‡ºç»“æœæ˜¯å¤šå°‘ï¼Ÿä¹Ÿè®¸æœ‰äº›æœ‹å‹è®¤ä¸ºæ˜¯1000000ã€‚ä½†æ˜¯äº‹å®ä¸Šè¿è¡Œå®ƒä¼šå‘ç°æ¯æ¬¡è¿è¡Œç»“æœéƒ½ä¸ä¸€è‡´ï¼Œéƒ½æ˜¯ä¸€ä¸ªå°äº1000000çš„æ•°å­—ã€‚ å¯èƒ½æœ‰çš„æœ‹å‹å°±ä¼šæœ‰ç–‘é—®ï¼Œä¸å¯¹å•Šï¼Œä¸Šé¢æ˜¯å¯¹å˜é‡incè¿›è¡Œè‡ªå¢æ“ä½œï¼Œç”±äºvolatileä¿è¯äº†å¯è§æ€§ï¼Œé‚£ä¹ˆåœ¨æ¯ä¸ªçº¿ç¨‹ä¸­å¯¹incè‡ªå¢å®Œä¹‹åï¼Œåœ¨å…¶ä»–çº¿ç¨‹ä¸­éƒ½èƒ½çœ‹åˆ°ä¿®æ”¹åçš„å€¼å•Šï¼Œæ‰€ä»¥æœ‰10ä¸ªçº¿ç¨‹åˆ†åˆ«è¿›è¡Œäº†1000000æ¬¡æ“ä½œï¼Œé‚£ä¹ˆæœ€ç»ˆincçš„å€¼åº”è¯¥æ˜¯1000000*10=10000000ã€‚ è¿™é‡Œé¢å°±æœ‰ä¸€ä¸ªè¯¯åŒºäº†ï¼Œvolatileå…³é”®å­—èƒ½ä¿è¯å¯è§æ€§æ²¡æœ‰é”™ï¼Œä½†æ˜¯ä¸Šé¢çš„ç¨‹åºé”™åœ¨æ²¡èƒ½ä¿è¯åŸå­æ€§ã€‚ å¯è§æ€§åªèƒ½ä¿è¯æ¯æ¬¡è¯»å–çš„æ˜¯æœ€æ–°çš„å€¼ï¼Œä½†æ˜¯volatileæ²¡åŠæ³•ä¿è¯å¯¹å˜é‡çš„æ“ä½œçš„åŸå­æ€§ã€‚ åœ¨å‰é¢å·²ç»æåˆ°è¿‡ï¼Œè‡ªå¢æ“ä½œæ˜¯ä¸å…·å¤‡åŸå­æ€§çš„ï¼Œå®ƒåŒ…æ‹¬è¯»å–å˜é‡çš„åŸå§‹å€¼ã€è¿›è¡ŒåŠ 1æ“ä½œã€å†™å…¥å·¥ä½œå†…å­˜ã€‚é‚£ä¹ˆå°±æ˜¯è¯´è‡ªå¢æ“ä½œçš„ä¸‰ä¸ªå­æ“ä½œå¯èƒ½ä¼šåˆ†å‰²å¼€æ‰§è¡Œï¼Œå°±æœ‰å¯èƒ½å¯¼è‡´ä¸‹é¢è¿™ç§æƒ…å†µå‡ºç°ï¼š å‡å¦‚æŸä¸ªæ—¶åˆ»å˜é‡incçš„å€¼ä¸º10ï¼Œçº¿ç¨‹1å¯¹å˜é‡è¿›è¡Œè‡ªå¢æ“ä½œï¼Œçº¿ç¨‹1å…ˆè¯»å–äº†å˜é‡incçš„åŸå§‹å€¼ï¼Œç„¶åçº¿ç¨‹1è¢«é˜»å¡äº†ï¼› ç„¶åçº¿ç¨‹2å¯¹å˜é‡è¿›è¡Œè‡ªå¢æ“ä½œï¼Œçº¿ç¨‹2ä¹Ÿå»è¯»å–å˜é‡incçš„åŸå§‹å€¼ï¼Œç”±äºçº¿ç¨‹1åªæ˜¯å¯¹å˜é‡incè¿›è¡Œè¯»å–æ“ä½œï¼Œè€Œæ²¡æœ‰å¯¹å˜é‡è¿›è¡Œä¿®æ”¹æ“ä½œï¼Œæ‰€ä»¥ä¸ä¼šå¯¼è‡´çº¿ç¨‹2çš„å·¥ä½œå†…å­˜ä¸­ç¼“å­˜å˜é‡incçš„ç¼“å­˜è¡Œæ— æ•ˆï¼Œä¹Ÿä¸ä¼šå¯¼è‡´ä¸»å­˜ä¸­çš„å€¼åˆ·æ–°ï¼Œ æ‰€ä»¥çº¿ç¨‹2ä¼šç›´æ¥å»ä¸»å­˜è¯»å–incçš„å€¼ï¼Œå‘ç°incçš„å€¼æ—¶10ï¼Œç„¶åè¿›è¡ŒåŠ 1æ“ä½œï¼Œå¹¶æŠŠ11å†™å…¥å·¥ä½œå†…å­˜ï¼Œæœ€åå†™å…¥ä¸»å­˜ã€‚ ç„¶åçº¿ç¨‹1æ¥ç€è¿›è¡ŒåŠ 1æ“ä½œï¼Œç”±äºå·²ç»è¯»å–äº†incçš„å€¼ï¼Œæ³¨æ„æ­¤æ—¶åœ¨çº¿ç¨‹1çš„å·¥ä½œå†…å­˜ä¸­incçš„å€¼ä»ç„¶ä¸º10ï¼Œæ‰€ä»¥çº¿ç¨‹1å¯¹incè¿›è¡ŒåŠ 1æ“ä½œåincçš„å€¼ä¸º11ï¼Œç„¶åå°†11å†™å…¥å·¥ä½œå†…å­˜ï¼Œæœ€åå†™å…¥ä¸»å­˜ã€‚ é‚£ä¹ˆä¸¤ä¸ªçº¿ç¨‹åˆ†åˆ«è¿›è¡Œäº†ä¸€æ¬¡è‡ªå¢æ“ä½œåï¼Œincåªå¢åŠ äº†1ã€‚ æ ¹æºå°±åœ¨è¿™é‡Œï¼Œè‡ªå¢æ“ä½œä¸æ˜¯åŸå­æ€§æ“ä½œï¼Œè€Œä¸”volatileä¹Ÿæ— æ³•ä¿è¯å¯¹å˜é‡çš„ä»»ä½•æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ã€‚ è§£å†³æ–¹æ¡ˆï¼šå¯ä»¥é€šè¿‡synchronizedæˆ–lockï¼Œè¿›è¡ŒåŠ é”ï¼Œæ¥ä¿è¯æ“ä½œçš„åŸå­æ€§ã€‚ä¹Ÿå¯ä»¥é€šè¿‡AtomicIntegerã€‚ åœ¨java 1.5çš„java.util.concurrent.atomicåŒ…ä¸‹æä¾›äº†ä¸€äº›åŸå­æ“ä½œç±»ï¼Œå³å¯¹åŸºæœ¬æ•°æ®ç±»å‹çš„ è‡ªå¢ï¼ˆåŠ 1æ“ä½œï¼‰ï¼Œè‡ªå‡ï¼ˆå‡1æ“ä½œï¼‰ã€ä»¥åŠåŠ æ³•æ“ä½œï¼ˆåŠ ä¸€ä¸ªæ•°ï¼‰ï¼Œå‡æ³•æ“ä½œï¼ˆå‡ä¸€ä¸ªæ•°ï¼‰è¿›è¡Œäº†å°è£…ï¼Œä¿è¯è¿™äº›æ“ä½œæ˜¯åŸå­æ€§æ“ä½œã€‚atomicæ˜¯åˆ©ç”¨CASæ¥å®ç°åŸå­æ€§æ“ä½œçš„ï¼ˆCompare And Swapï¼‰ï¼ŒCASå®é™…ä¸Šæ˜¯åˆ©ç”¨å¤„ç†å™¨æä¾›çš„CMPXCHGæŒ‡ä»¤å®ç°çš„ï¼Œè€Œå¤„ç†å™¨æ‰§è¡ŒCMPXCHGæŒ‡ä»¤æ˜¯ä¸€ä¸ªåŸå­æ€§æ“ä½œã€‚ 3.volatileä¿è¯æœ‰åºæ€§åœ¨å‰é¢æåˆ°volatileå…³é”®å­—èƒ½ç¦æ­¢æŒ‡ä»¤é‡æ’åºï¼Œæ‰€ä»¥volatileèƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¿è¯æœ‰åºæ€§ã€‚ volatileå…³é”®å­—ç¦æ­¢æŒ‡ä»¤é‡æ’åºæœ‰ä¸¤å±‚æ„æ€ï¼š 1ï¼‰å½“ç¨‹åºæ‰§è¡Œåˆ°volatileå˜é‡çš„è¯»æ“ä½œæˆ–è€…å†™æ“ä½œæ—¶ï¼Œåœ¨å…¶å‰é¢çš„æ“ä½œçš„æ›´æ”¹è‚¯å®šå…¨éƒ¨å·²ç»è¿›è¡Œï¼Œä¸”ç»“æœå·²ç»å¯¹åé¢çš„æ“ä½œå¯è§ï¼›åœ¨å…¶åé¢çš„æ“ä½œè‚¯å®šè¿˜æ²¡æœ‰è¿›è¡Œï¼› 2ï¼‰åœ¨è¿›è¡ŒæŒ‡ä»¤ä¼˜åŒ–æ—¶ï¼Œä¸èƒ½å°†åœ¨å¯¹volatileå˜é‡çš„è¯»æ“ä½œæˆ–è€…å†™æ“ä½œçš„è¯­å¥æ”¾åœ¨å…¶åé¢æ‰§è¡Œï¼Œä¹Ÿä¸èƒ½æŠŠvolatileå˜é‡åé¢çš„è¯­å¥æ”¾åˆ°å…¶å‰é¢æ‰§è¡Œã€‚ å¯èƒ½ä¸Šé¢è¯´çš„æ¯”è¾ƒç»•ï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼š 12345678// xã€yä¸ºévolatileå˜é‡// flagä¸ºvolatileå˜é‡x = 2; //è¯­å¥1y = 0; //è¯­å¥2flag = true; //è¯­å¥3x = 4; //è¯­å¥4y = -1; //è¯­å¥5 ç”±äºflagå˜é‡ä¸ºvolatileå˜é‡ï¼Œé‚£ä¹ˆåœ¨è¿›è¡ŒæŒ‡ä»¤é‡æ’åºçš„è¿‡ç¨‹çš„æ—¶å€™ï¼Œä¸ä¼šå°†è¯­å¥3æ”¾åˆ°è¯­å¥1ã€è¯­å¥2å‰é¢ï¼Œä¹Ÿä¸ä¼šè®²è¯­å¥3æ”¾åˆ°è¯­å¥4ã€è¯­å¥5åé¢ã€‚ä½†æ˜¯è¦æ³¨æ„è¯­å¥1å’Œè¯­å¥2çš„é¡ºåºã€è¯­å¥4å’Œè¯­å¥5çš„é¡ºåºæ˜¯ä¸ä½œä»»ä½•ä¿è¯çš„ã€‚ å¹¶ä¸”volatileå…³é”®å­—èƒ½ä¿è¯ï¼Œæ‰§è¡Œåˆ°è¯­å¥3æ—¶ï¼Œè¯­å¥1å’Œè¯­å¥2å¿…å®šæ˜¯æ‰§è¡Œå®Œæ¯•äº†çš„ï¼Œä¸”è¯­å¥1å’Œè¯­å¥2çš„æ‰§è¡Œç»“æœå¯¹è¯­å¥3ã€è¯­å¥4ã€è¯­å¥5æ˜¯å¯è§çš„ã€‚ é‚£ä¹ˆæˆ‘ä»¬å›åˆ°å‰é¢ä¸¾çš„ä¸€ä¸ªä¾‹å­ï¼š 123456789//çº¿ç¨‹1:context = loadContext(); //è¯­å¥1inited = true; //è¯­å¥2//çº¿ç¨‹2:while(!inited )&#123; sleep()&#125;doSomethingwithconfig(context); å‰é¢ä¸¾è¿™ä¸ªä¾‹å­çš„æ—¶å€™ï¼Œæåˆ°æœ‰å¯èƒ½è¯­å¥2ä¼šåœ¨è¯­å¥1ä¹‹å‰æ‰§è¡Œï¼Œé‚£ä¹ˆä¹…å¯èƒ½å¯¼è‡´contextè¿˜æ²¡è¢«åˆå§‹åŒ–ï¼Œè€Œçº¿ç¨‹2ä¸­å°±ä½¿ç”¨æœªåˆå§‹åŒ–çš„contextå»è¿›è¡Œæ“ä½œï¼Œå¯¼è‡´ç¨‹åºå‡ºé”™ã€‚ è¿™é‡Œå¦‚æœç”¨volatileå…³é”®å­—å¯¹initedå˜é‡è¿›è¡Œä¿®é¥°ï¼Œå°±ä¸ä¼šå‡ºç°è¿™ç§é—®é¢˜äº†ï¼Œå› ä¸ºå½“æ‰§è¡Œåˆ°è¯­å¥2æ—¶ï¼Œå¿…å®šèƒ½ä¿è¯contextå·²ç»åˆå§‹åŒ–å®Œæ¯•ã€‚ å…­ã€volatileçš„å®ç°åŸç†1.å¯è§æ€§å¤„ç†å™¨ä¸ºäº†æé«˜å¤„ç†é€Ÿåº¦ï¼Œä¸ç›´æ¥å’Œå†…å­˜è¿›è¡Œé€šè®¯ï¼Œè€Œæ˜¯å°†ç³»ç»Ÿå†…å­˜çš„æ•°æ®ç‹¬åˆ°å†…éƒ¨ç¼“å­˜åå†è¿›è¡Œæ“ä½œï¼Œä½†æ“ä½œå®Œåä¸çŸ¥ä»€ä¹ˆæ—¶å€™ä¼šå†™åˆ°å†…å­˜ã€‚ å¦‚æœå¯¹å£°æ˜äº†volatileå˜é‡è¿›è¡Œå†™æ“ä½œæ—¶ï¼ŒJVMä¼šå‘å¤„ç†å™¨å‘é€ä¸€æ¡Lockå‰ç¼€çš„æŒ‡ä»¤ï¼Œå°†è¿™ä¸ªå˜é‡æ‰€åœ¨ç¼“å­˜è¡Œçš„æ•°æ®å†™ä¼šåˆ°ç³»ç»Ÿå†…å­˜ã€‚ è¿™ä¸€æ­¥ç¡®ä¿äº†å¦‚æœæœ‰å…¶ä»–çº¿ç¨‹å¯¹å£°æ˜äº†volatileå˜é‡è¿›è¡Œä¿®æ”¹ï¼Œåˆ™ç«‹å³æ›´æ–°ä¸»å†…å­˜ä¸­æ•°æ®ã€‚ ä½†è¿™æ—¶å€™å…¶ä»–å¤„ç†å™¨çš„ç¼“å­˜è¿˜æ˜¯æ—§çš„ï¼Œæ‰€ä»¥åœ¨å¤šå¤„ç†å™¨ç¯å¢ƒä¸‹ï¼Œä¸ºäº†ä¿è¯å„ä¸ªå¤„ç†å™¨ç¼“å­˜ä¸€è‡´ï¼Œæ¯ä¸ªå¤„ç†ä¼šé€šè¿‡å—…æ¢åœ¨æ€»çº¿ä¸Šä¼ æ’­çš„æ•°æ®æ¥æ£€æŸ¥ è‡ªå·±çš„ç¼“å­˜æ˜¯å¦è¿‡æœŸï¼Œ å½“å¤„ç†å™¨å‘ç°è‡ªå·±ç¼“å­˜è¡Œå¯¹åº”çš„å†…å­˜åœ°å€è¢«ä¿®æ”¹äº†ï¼Œå°±ä¼šå°†å½“å‰å¤„ç†å™¨çš„ç¼“å­˜è¡Œè®¾ç½®æˆæ— æ•ˆçŠ¶æ€ï¼Œå½“å¤„ç†å™¨è¦å¯¹è¿™ä¸ªæ•°æ®è¿›è¡Œä¿®æ”¹æ“ä½œæ—¶ï¼Œä¼šå¼ºåˆ¶é‡æ–°ä»ç³»ç»Ÿå†…å­˜æŠŠæ•°æ®è¯»åˆ°å¤„ç†å™¨ç¼“å­˜é‡Œã€‚ è¿™ä¸€æ­¥ç¡®ä¿äº†å…¶ä»–çº¿ç¨‹è·å¾—çš„å£°æ˜äº†volatileå˜é‡éƒ½æ˜¯ä»ä¸»å†…å­˜ä¸­è·å–æœ€æ–°çš„ã€‚ 2.æœ‰åºæ€§Lockå‰ç¼€æŒ‡ä»¤å®é™…ä¸Šç›¸å½“äºä¸€ä¸ªå†…å­˜å±éšœï¼ˆä¹Ÿæˆå†…å­˜æ …æ ï¼‰ï¼Œå®ƒç¡®ä¿æŒ‡ä»¤é‡æ’åºæ—¶ä¸ä¼šæŠŠå…¶åé¢çš„æŒ‡ä»¤æ’åˆ°å†…å­˜å±éšœä¹‹å‰çš„ä½ç½®ï¼Œä¹Ÿä¸ä¼šæŠŠå‰é¢çš„æŒ‡ä»¤æ’åˆ°å†…å­˜å±éšœçš„åé¢ï¼›å³åœ¨æ‰§è¡Œåˆ°å†…å­˜å±éšœè¿™å¥æŒ‡ä»¤æ—¶ï¼Œåœ¨å®ƒå‰é¢çš„æ“ä½œå·²ç»å…¨éƒ¨å®Œæˆã€‚ ä¸ƒã€volatileçš„åº”ç”¨åœºæ™¯synchronizedå…³é”®å­—æ˜¯é˜²æ­¢å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œä¸€æ®µä»£ç ï¼Œé‚£ä¹ˆå°±ä¼šå¾ˆå½±å“ç¨‹åºæ‰§è¡Œæ•ˆç‡ï¼Œè€Œvolatileå…³é”®å­—åœ¨æŸäº›æƒ…å†µä¸‹æ€§èƒ½è¦ä¼˜äºsynchronizedï¼Œä½†æ˜¯è¦æ³¨æ„volatileå…³é”®å­—æ˜¯æ— æ³•æ›¿ä»£synchronizedå…³é”®å­—çš„ï¼Œå› ä¸ºvolatileå…³é”®å­—æ— æ³•ä¿è¯æ“ä½œçš„åŸå­æ€§ã€‚é€šå¸¸æ¥è¯´ï¼Œä½¿ç”¨volatileå¿…é¡»å…·å¤‡ä»¥ä¸‹2ä¸ªæ¡ä»¶ï¼š 1ï¼‰å¯¹å˜é‡çš„å†™æ“ä½œä¸ä¾èµ–äºå½“å‰å€¼ 2ï¼‰è¯¥å˜é‡æ²¡æœ‰åŒ…å«åœ¨å…·æœ‰å…¶ä»–å˜é‡çš„ä¸å˜å¼ä¸­ ä¸‹é¢åˆ—ä¸¾å‡ ä¸ªJavaä¸­ä½¿ç”¨volatileçš„å‡ ä¸ªåœºæ™¯ã€‚ â‘ .çŠ¶æ€æ ‡è®°é‡ 123456789volatile boolean flag = false; //çº¿ç¨‹1while(!flag)&#123; doSomething();&#125; //çº¿ç¨‹2public void setFlag() &#123; flag = true;&#125; æ ¹æ®çŠ¶æ€æ ‡è®°ï¼Œç»ˆæ­¢çº¿ç¨‹ã€‚ â‘¡.å•ä¾‹æ¨¡å¼ä¸­çš„double check 1234567891011121314151617class Singleton &#123; private volatile static Singleton instance = null; private Singleton() &#123; &#125; public static Singleton getInstance() &#123; if (instance == null) &#123; synchronized (Singleton.class) &#123; if (instance == null) instance = new Singleton(); &#125; &#125; return instance; &#125;&#125; ä¸ºä»€ä¹ˆè¦ä½¿ç”¨volatile ä¿®é¥°instanceï¼Ÿä¸»è¦åœ¨äºinstance = new Singleton()è¿™å¥ï¼Œè¿™å¹¶éæ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œäº‹å®ä¸Šåœ¨ JVM ä¸­è¿™å¥è¯å¤§æ¦‚åšäº†ä¸‹é¢ 3 ä»¶äº‹æƒ…: 1.ç»™ instance åˆ†é…å†…å­˜ 2.è°ƒç”¨ Singleton çš„æ„é€ å‡½æ•°æ¥åˆå§‹åŒ–æˆå‘˜å˜é‡ 3.å°†instanceå¯¹è±¡æŒ‡å‘åˆ†é…çš„å†…å­˜ç©ºé—´ï¼ˆæ‰§è¡Œå®Œè¿™æ­¥ instance å°±ä¸ºé null äº†ï¼‰ã€‚ ä½†æ˜¯åœ¨ JVM çš„å³æ—¶ç¼–è¯‘å™¨ä¸­å­˜åœ¨æŒ‡ä»¤é‡æ’åºçš„ä¼˜åŒ–ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸Šé¢çš„ç¬¬äºŒæ­¥å’Œç¬¬ä¸‰æ­¥çš„é¡ºåºæ˜¯ä¸èƒ½ä¿è¯çš„ï¼Œæœ€ç»ˆçš„æ‰§è¡Œé¡ºåºå¯èƒ½æ˜¯ 1-2-3 ä¹Ÿå¯èƒ½æ˜¯ 1-3-2ã€‚å¦‚æœæ˜¯åè€…ï¼Œåˆ™åœ¨ 3 æ‰§è¡Œå®Œæ¯•ã€2 æœªæ‰§è¡Œä¹‹å‰ï¼Œè¢«çº¿ç¨‹äºŒæŠ¢å äº†ï¼Œè¿™æ—¶ instance å·²ç»æ˜¯é null äº†ï¼ˆä½†å´æ²¡æœ‰åˆå§‹åŒ–ï¼‰ï¼Œæ‰€ä»¥çº¿ç¨‹äºŒä¼šç›´æ¥è¿”å› instanceï¼Œç„¶åä½¿ç”¨ï¼Œç„¶åé¡ºç†æˆç« åœ°æŠ¥é”™ã€‚","categories":[],"tags":[{"name":"Interview","slug":"Interview","permalink":"https://edward7zhang.github.io/tags/Interview/"},{"name":"Java","slug":"Java","permalink":"https://edward7zhang.github.io/tags/Java/"}]},{"title":"synchronizedå’ŒReentrantLockçš„æ¯”è¾ƒ","slug":"synchronizedå’ŒReentrantLockçš„æ¯”è¾ƒ","date":"2018-01-20T12:24:12.000Z","updated":"2018-03-04T06:26:01.819Z","comments":true,"path":"2018/01/20/synchronizedå’ŒReentrantLockçš„æ¯”è¾ƒ/","link":"","permalink":"https://edward7zhang.github.io/2018/01/20/synchronizedå’ŒReentrantLockçš„æ¯”è¾ƒ/","excerpt":"ä¸€ã€çº¿ç¨‹åŒæ­¥é—®é¢˜çš„äº§ç”ŸåŠè§£å†³æ–¹æ¡ˆé—®é¢˜çš„äº§ç”Ÿï¼š Javaå…è®¸å¤šçº¿ç¨‹å¹¶å‘æ§åˆ¶ï¼Œå½“å¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œä¸€ä¸ªå¯å…±äº«çš„èµ„æºå˜é‡æ—¶ï¼ˆå¦‚æ•°æ®çš„å¢åˆ æ”¹æŸ¥ï¼‰ï¼Œå°†ä¼šå¯¼è‡´æ•°æ®ä¸å‡†ç¡®ï¼Œç›¸äº’ä¹‹é—´äº§ç”Ÿå†²çªã€‚ å¦‚ä¸‹ä¾‹ï¼šå‡è®¾æœ‰ä¸€ä¸ªå–ç¥¨ç³»ç»Ÿï¼Œä¸€å…±æœ‰100å¼ ç¥¨ï¼Œæœ‰4ä¸ªçª—å£åŒæ—¶å–ã€‚ 1234567891011121314151617public class Ticket implements Runnable &#123; // å½“å‰æ‹¥æœ‰çš„ç¥¨æ•° private int num = 100; public void run() &#123; while (true) &#123; if (num &gt; 0) &#123; try &#123; Thread.sleep(10); &#125; catch (InterruptedException e) &#123; &#125; // è¾“å‡ºå–ç¥¨ä¿¡æ¯ System.out.println(Thread.currentThread().getName() + \".....sale....\" + num--); &#125; &#125; &#125;&#125;","text":"ä¸€ã€çº¿ç¨‹åŒæ­¥é—®é¢˜çš„äº§ç”ŸåŠè§£å†³æ–¹æ¡ˆé—®é¢˜çš„äº§ç”Ÿï¼š Javaå…è®¸å¤šçº¿ç¨‹å¹¶å‘æ§åˆ¶ï¼Œå½“å¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œä¸€ä¸ªå¯å…±äº«çš„èµ„æºå˜é‡æ—¶ï¼ˆå¦‚æ•°æ®çš„å¢åˆ æ”¹æŸ¥ï¼‰ï¼Œå°†ä¼šå¯¼è‡´æ•°æ®ä¸å‡†ç¡®ï¼Œç›¸äº’ä¹‹é—´äº§ç”Ÿå†²çªã€‚ å¦‚ä¸‹ä¾‹ï¼šå‡è®¾æœ‰ä¸€ä¸ªå–ç¥¨ç³»ç»Ÿï¼Œä¸€å…±æœ‰100å¼ ç¥¨ï¼Œæœ‰4ä¸ªçª—å£åŒæ—¶å–ã€‚ 1234567891011121314151617public class Ticket implements Runnable &#123; // å½“å‰æ‹¥æœ‰çš„ç¥¨æ•° private int num = 100; public void run() &#123; while (true) &#123; if (num &gt; 0) &#123; try &#123; Thread.sleep(10); &#125; catch (InterruptedException e) &#123; &#125; // è¾“å‡ºå–ç¥¨ä¿¡æ¯ System.out.println(Thread.currentThread().getName() + \".....sale....\" + num--); &#125; &#125; &#125;&#125; 12345678910111213141516public class Nothing &#123; public static void main(String[] args) &#123; Ticket t = new Ticket();//åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ä»»åŠ¡å¯¹è±¡ã€‚ //åˆ›å»º4ä¸ªçº¿ç¨‹åŒæ—¶å–ç¥¨ Thread t1 = new Thread(t); Thread t2 = new Thread(t); Thread t3 = new Thread(t); Thread t4 = new Thread(t); //å¯åŠ¨çº¿ç¨‹ t1.start(); t2.start(); t3.start(); t4.start(); &#125;&#125; è¾“å‡ºéƒ¨åˆ†ç»“æœï¼š Thread-1â€¦..saleâ€¦.2Thread-0â€¦..saleâ€¦.3Thread-2â€¦..saleâ€¦.1Thread-0â€¦..saleâ€¦.0Thread-1â€¦..saleâ€¦.0Thread-3â€¦..saleâ€¦.1 æ˜¾ç„¶ä¸Šè¿°ç»“æœæ˜¯ä¸åˆç†çš„ï¼Œå¯¹äºåŒä¸€å¼ ç¥¨è¿›è¡Œäº†å¤šæ¬¡å”®å‡ºã€‚è¿™å°±æ˜¯å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œå‡ºç°äº†æ•°æ®â€œè„è¯»â€æƒ…å†µã€‚å³å¤šä¸ªçº¿ç¨‹è®¿é—®ä½™ç¥¨numæ—¶ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è·å¾—ä½™ç¥¨çš„æ•°é‡ï¼Œè¦åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œ-1çš„æ“ä½œä¹‹å‰ï¼Œå…¶ä»–çº¿ç¨‹å¯èƒ½å·²ç»å–å‡ºå¤šå¼ ç¥¨ï¼Œå¯¼è‡´è·å¾—çš„numä¸æ˜¯æœ€æ–°çš„ï¼Œç„¶å-1åæ›´æ–°çš„æ•°æ®å°±ä¼šæœ‰è¯¯ã€‚è¿™å°±éœ€è¦çº¿ç¨‹åŒæ­¥çš„å®ç°äº†ã€‚ é—®é¢˜çš„è§£å†³ï¼š å› æ­¤åŠ å…¥åŒæ­¥é”ä»¥é¿å…åœ¨è¯¥çº¿ç¨‹æ²¡æœ‰å®Œæˆæ“ä½œä¹‹å‰ï¼Œè¢«å…¶ä»–çº¿ç¨‹çš„è°ƒç”¨ï¼Œä»è€Œä¿è¯äº†è¯¥å˜é‡çš„å”¯ä¸€æ€§å’Œå‡†ç¡®æ€§ã€‚ ä¸€å…±æœ‰ä¸¤ç§é”ï¼Œæ¥å®ç°çº¿ç¨‹åŒæ­¥é—®é¢˜ï¼Œåˆ†åˆ«æ˜¯ï¼šsynchronizedå’ŒReentrantLockã€‚ä¸‹é¢æˆ‘ä»¬å°±å¸¦ç€ä¸Šè¿°é—®é¢˜ï¼Œçœ‹çœ‹è¿™ä¸¤ç§é”æ˜¯å¦‚ä½•è§£å†³çš„ã€‚ äºŒã€synchronizedå…³é”®å­—1.synchronizedç®€ä»‹ synchronizedå®ç°åŒæ­¥çš„åŸºç¡€ï¼šJavaä¸­æ¯ä¸ªå¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºé”ã€‚å½“çº¿ç¨‹è¯•å›¾è®¿é—®åŒæ­¥ä»£ç æ—¶ï¼Œå¿…é¡»å…ˆè·å¾—å¯¹è±¡é”ï¼Œé€€å‡ºæˆ–æŠ›å‡ºå¼‚å¸¸æ—¶å¿…é¡»é‡Šæ”¾é”ã€‚ Synchronziedå®ç°åŒæ­¥çš„è¡¨ç°å½¢å¼åˆ†ä¸ºï¼šä»£ç å—åŒæ­¥ å’Œ æ–¹æ³•åŒæ­¥ã€‚ 2.synchronizedåŸç†JVMåŸºäºè¿›å…¥å’Œé€€å‡ºMonitorå¯¹è±¡æ¥å®ç° ä»£ç å—åŒæ­¥ å’Œ æ–¹æ³•åŒæ­¥ ï¼Œä¸¤è€…å®ç°ç»†èŠ‚ä¸åŒã€‚ ä»£ç å—åŒæ­¥ï¼š åœ¨ç¼–è¯‘åé€šè¿‡å°†monitorenteræŒ‡ä»¤æ’å…¥åˆ°åŒæ­¥ä»£ç å—çš„å¼€å§‹å¤„ï¼Œå°†monitorexitæŒ‡ä»¤æ’å…¥åˆ°æ–¹æ³•ç»“æŸå¤„å’Œå¼‚å¸¸å¤„ï¼Œé€šè¿‡åç¼–è¯‘å­—èŠ‚ç å¯ä»¥è§‚å¯Ÿåˆ°ã€‚ä»»ä½•ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªmonitorä¸ä¹‹å…³è”ï¼Œçº¿ç¨‹æ‰§è¡ŒmonitorenteræŒ‡ä»¤æ—¶ï¼Œä¼šå°è¯•è·å–å¯¹è±¡å¯¹åº”çš„monitorçš„æ‰€æœ‰æƒï¼Œå³å°è¯•è·å¾—å¯¹è±¡çš„é”ã€‚ æ–¹æ³•åŒæ­¥ï¼š synchronizedæ–¹æ³•åœ¨method_infoç»“æ„æœ‰ACC_synchronizedæ ‡è®°ï¼Œçº¿ç¨‹æ‰§è¡Œæ—¶ä¼šè¯†åˆ«è¯¥æ ‡è®°ï¼Œè·å–å¯¹åº”çš„é”ï¼Œå®ç°æ–¹æ³•åŒæ­¥ã€‚ ä¸¤è€…è™½ç„¶å®ç°ç»†èŠ‚ä¸åŒï¼Œä½†æœ¬è´¨ä¸Šéƒ½æ˜¯å¯¹ä¸€ä¸ªå¯¹è±¡çš„ç›‘è§†å™¨ï¼ˆmonitorï¼‰çš„è·å–ã€‚ä»»æ„ä¸€ä¸ªå¯¹è±¡éƒ½æ‹¥æœ‰è‡ªå·±çš„ç›‘è§†å™¨ï¼Œå½“åŒæ­¥ä»£ç å—æˆ–åŒæ­¥æ–¹æ³•æ—¶ï¼Œæ‰§è¡Œæ–¹æ³•çš„çº¿ç¨‹å¿…é¡»å…ˆè·å¾—è¯¥å¯¹è±¡çš„ç›‘è§†å™¨æ‰èƒ½è¿›å…¥åŒæ­¥å—æˆ–åŒæ­¥æ–¹æ³•ï¼Œæ²¡æœ‰è·å–åˆ°ç›‘è§†å™¨çš„çº¿ç¨‹å°†ä¼šè¢«é˜»å¡ï¼Œå¹¶è¿›å…¥åŒæ­¥é˜Ÿåˆ—ï¼ŒçŠ¶æ€å˜ä¸ºBLOCKEDã€‚å½“æˆåŠŸè·å–ç›‘è§†å™¨çš„çº¿ç¨‹é‡Šæ”¾äº†é”åï¼Œä¼šå”¤é†’é˜»å¡åœ¨åŒæ­¥é˜Ÿåˆ—çš„çº¿ç¨‹ï¼Œä½¿å…¶é‡æ–°å°è¯•å¯¹ç›‘è§†å™¨çš„è·å–ã€‚ å¯¹è±¡ã€ç›‘è§†å™¨ã€åŒæ­¥é˜Ÿåˆ—å’Œæ‰§è¡Œçº¿ç¨‹é—´çš„å…³ç³»å¦‚ä¸‹å›¾ï¼š 3.synchronizedçš„ä½¿ç”¨åœºæ™¯â‘ æ–¹æ³•åŒæ­¥ 1public synchronized void method1 é”ä½çš„æ˜¯è¯¥å¯¹è±¡,ç±»çš„å…¶ä¸­ä¸€ä¸ªå®ä¾‹ï¼Œå½“è¯¥å¯¹è±¡(ä»…ä»…æ˜¯è¿™ä¸€ä¸ªå¯¹è±¡)åœ¨ä¸åŒçº¿ç¨‹ä¸­æ‰§è¡Œè¿™ä¸ªåŒæ­¥æ–¹æ³•æ—¶ï¼Œçº¿ç¨‹ä¹‹é—´ä¼šå½¢æˆäº’æ–¥ã€‚è¾¾åˆ°åŒæ­¥æ•ˆæœï¼Œä½†å¦‚æœä¸åŒçº¿ç¨‹åŒæ—¶å¯¹è¯¥ç±»çš„ä¸åŒå¯¹è±¡æ‰§è¡Œè¿™ä¸ªåŒæ­¥æ–¹æ³•æ—¶ï¼Œåˆ™çº¿ç¨‹ä¹‹é—´ä¸ä¼šå½¢æˆäº’æ–¥ï¼Œå› ä¸ºä»–ä»¬æ‹¥æœ‰çš„æ˜¯ä¸åŒçš„é”ã€‚ â‘¡ä»£ç å—åŒæ­¥ 1synchronized(this)&#123; //TODO &#125; æè¿°åŒâ‘  â‘¢æ–¹æ³•åŒæ­¥ 1public synchronized static void method3 é”ä½çš„æ˜¯è¯¥ç±»ï¼Œå½“æ‰€æœ‰è¯¥ç±»çš„å¯¹è±¡(å¤šä¸ªå¯¹è±¡)åœ¨ä¸åŒçº¿ç¨‹ä¸­è°ƒç”¨è¿™ä¸ªstaticåŒæ­¥æ–¹æ³•æ—¶ï¼Œçº¿ç¨‹ä¹‹é—´ä¼šå½¢æˆäº’æ–¥ï¼Œè¾¾åˆ°åŒæ­¥æ•ˆæœã€‚ â‘£ä»£ç å—åŒæ­¥1synchronized(Test.class)&#123; //TODO&#125; åŒâ‘¢ â‘¤ä»£ç å—åŒæ­¥1synchronized(o) &#123;&#125; è¿™é‡Œé¢çš„oå¯ä»¥æ˜¯ä¸€ä¸ªä»»ä½•Objectå¯¹è±¡æˆ–æ•°ç»„ï¼Œå¹¶ä¸ä¸€å®šæ˜¯å®ƒæœ¬èº«å¯¹è±¡æˆ–è€…ç±»ï¼Œè°æ‹¥æœ‰oè¿™ä¸ªé”ï¼Œè°å°±èƒ½å¤Ÿæ“ä½œè¯¥å—ç¨‹åºä»£ç ã€‚ 4.è§£å†³çº¿ç¨‹åŒæ­¥çš„å®ä¾‹é’ˆå¯¹ä¸Šè¿°æ–¹æ³•ï¼Œå…·ä½“çš„è§£å†³æ–¹å¼å¦‚ä¸‹ï¼š 1234567891011121314151617181920public class Ticket implements Runnable &#123; // å½“å‰æ‹¥æœ‰çš„ç¥¨æ•° private int num = 100; public void run() &#123; while (true) &#123; try &#123; Thread.sleep(10); &#125; catch (InterruptedException e) &#123; &#125; synchronized (this) &#123; // è¾“å‡ºå–ç¥¨ä¿¡æ¯ if (num &gt; 0) &#123; System.out.println(Thread.currentThread().getName() + \".....sale....\" + num--); &#125; &#125; &#125; &#125;&#125; è¾“å‡ºéƒ¨åˆ†ç»“æœï¼š Thread-2â€¦..saleâ€¦.10Thread-1â€¦..saleâ€¦.9Thread-3â€¦..saleâ€¦.8Thread-0â€¦..saleâ€¦.7Thread-2â€¦..saleâ€¦.6Thread-1â€¦..saleâ€¦.5Thread-2â€¦..saleâ€¦.4Thread-1â€¦..saleâ€¦.3Thread-3â€¦..saleâ€¦.2Thread-0â€¦..saleâ€¦.1 å¯ä»¥çœ‹å‡ºå®ç°äº†çº¿ç¨‹åŒæ­¥ã€‚åŒæ—¶æ”¹äº†ä¸€ä¸‹é€»è¾‘ï¼Œåœ¨è¿›å…¥åˆ°åŒæ­¥ä»£ç å—æ—¶ï¼Œå…ˆåˆ¤æ–­ç°åœ¨æ˜¯å¦æœ‰æ²¡æœ‰ç¥¨ï¼Œç„¶åå†ä¹°ç¥¨ï¼Œé˜²æ­¢å‡ºç°æ²¡ç¥¨è¿˜è¦å”®å‡ºçš„æƒ…å†µã€‚é€šè¿‡åŒæ­¥ä»£ç å—å®ç°äº†çº¿ç¨‹åŒæ­¥ï¼Œå…¶ä»–æ–¹æ³•ä¹Ÿä¸€æ ·å¯ä»¥å®ç°è¯¥æ•ˆæœã€‚ ä¸‰ã€ReentrantLocké”ReentrantLockï¼Œä¸€ä¸ªå¯é‡å…¥çš„äº’æ–¥é”ï¼Œå®ƒå…·æœ‰ä¸ä½¿ç”¨synchronizedæ–¹æ³•å’Œè¯­å¥æ‰€è®¿é—®çš„éšå¼ç›‘è§†å™¨é”ç›¸åŒçš„ä¸€äº›åŸºæœ¬è¡Œä¸ºå’Œè¯­ä¹‰ï¼Œä½†åŠŸèƒ½æ›´å¼ºå¤§ã€‚ï¼ˆé‡å…¥é”åé¢ä»‹ç»ï¼‰ 1.Lockæ¥å£Lockï¼Œé”å¯¹è±¡ã€‚åœ¨Javaä¸­é”æ˜¯ç”¨æ¥æ§åˆ¶å¤šä¸ªçº¿ç¨‹è®¿é—®å…±äº«èµ„æºçš„æ–¹å¼ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªé”èƒ½å¤Ÿé˜²æ­¢å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å…±äº«èµ„æºï¼ˆä½†æœ‰çš„é”å¯ä»¥å…è®¸å¤šä¸ªçº¿ç¨‹å¹¶å‘è®¿é—®å…±äº«èµ„æºï¼Œæ¯”å¦‚è¯»å†™é”ï¼Œåé¢æˆ‘ä»¬ä¼šåˆ†æï¼‰ã€‚åœ¨Lockæ¥å£å‡ºç°ä¹‹å‰ï¼ŒJavaç¨‹åºæ˜¯é synchronizedå…³é”®å­—ï¼ˆåé¢åˆ†æï¼‰å®ç°é”åŠŸèƒ½çš„ï¼Œè€ŒJAVA SE5.0ä¹‹åå¹¶å‘åŒ…ä¸­æ–°å¢äº†Lockæ¥å£ç”¨æ¥å®ç°é”çš„åŠŸèƒ½ï¼Œå®ƒæä¾›äº†ä¸synchronizedå…³é”®å­—ç±»ä¼¼çš„åŒæ­¥åŠŸèƒ½ï¼Œåªæ˜¯åœ¨ä½¿ç”¨æ—¶éœ€è¦æ˜¾å¼åœ°è·å–å’Œé‡Šæ”¾é”ï¼Œç¼ºç‚¹å°±æ˜¯ç¼ºå°‘åƒsynchronizedé‚£æ ·éšå¼è·å–é‡Šæ”¾é”çš„ä¾¿æ·æ€§ï¼Œä½†æ˜¯å´æ‹¥æœ‰äº†é”è·å–ä¸é‡Šæ”¾çš„å¯æ“ä½œæ€§ï¼Œå¯ä¸­æ–­çš„è·å–é”ä»¥åŠè¶…æ—¶è·å–é”ç­‰å¤šç§synchronizedå…³é”®å­—æ‰€ä¸å…·å¤‡çš„åŒæ­¥ç‰¹æ€§ã€‚ Lockæ¥å£çš„ä¸»è¦æ–¹æ³•ï¼ˆè¿˜æœ‰ä¸¤ä¸ªæ–¹æ³•æ¯”è¾ƒå¤æ‚ï¼Œæš‚ä¸ä»‹ç»ï¼‰ï¼š void lock(): æ‰§è¡Œæ­¤æ–¹æ³•æ—¶ï¼Œå¦‚æœé”å¤„äºç©ºé—²çŠ¶æ€ï¼Œå½“å‰çº¿ç¨‹å°†è·å–åˆ°é”ã€‚ç›¸åï¼Œå¦‚æœé”å·²ç»è¢«å…¶ä»–çº¿ç¨‹æŒæœ‰ï¼Œå°†ç¦ç”¨å½“å‰çº¿ç¨‹ï¼Œç›´åˆ°å½“å‰çº¿ç¨‹è·å–åˆ°é”ã€‚boolean tryLock()ï¼š å¦‚æœé”å¯ç”¨ï¼Œåˆ™è·å–é”ï¼Œå¹¶ç«‹å³è¿”å›trueï¼Œå¦åˆ™è¿”å›false. è¯¥æ–¹æ³•å’Œlock()çš„åŒºåˆ«åœ¨äºï¼ŒtryLock()åªæ˜¯â€è¯•å›¾â€è·å–é”ï¼Œå¦‚æœé”ä¸å¯ç”¨ï¼Œä¸ä¼šå¯¼è‡´å½“å‰çº¿ç¨‹è¢«ç¦ç”¨ï¼Œå½“å‰çº¿ç¨‹ä»ç„¶ç»§ç»­å¾€ä¸‹æ‰§è¡Œä»£ç ã€‚è€Œlock()æ–¹æ³•åˆ™æ˜¯ä¸€å®šè¦è·å–åˆ°é”ï¼Œå¦‚æœé”ä¸å¯ç”¨ï¼Œå°±ä¸€ç›´ç­‰å¾…ï¼Œåœ¨æœªè·å¾—é”ä¹‹å‰,å½“å‰çº¿ç¨‹å¹¶ä¸ç»§ç»­å‘ä¸‹æ‰§è¡Œ. é€šå¸¸é‡‡ç”¨å¦‚ä¸‹çš„ä»£ç å½¢å¼è°ƒç”¨tryLock()æ–¹æ³•ï¼švoid unlock()ï¼š æ‰§è¡Œæ­¤æ–¹æ³•æ—¶ï¼Œå½“å‰çº¿ç¨‹å°†é‡Šæ”¾æŒæœ‰çš„é”. é”åªèƒ½ç”±æŒæœ‰è€…é‡Šæ”¾ï¼Œå¦‚æœçº¿ç¨‹å¹¶ä¸æŒæœ‰é”ï¼Œå´æ‰§è¡Œè¯¥æ–¹æ³•ï¼Œå¯èƒ½å¯¼è‡´å¼‚å¸¸çš„å‘ç”Ÿ.Condition newCondition()ï¼š æ¡ä»¶å¯¹è±¡ï¼Œè·å–ç­‰å¾…é€šçŸ¥ç»„ä»¶ã€‚è¯¥ç»„ä»¶å’Œå½“å‰çš„é”ç»‘å®šï¼Œå½“å‰çº¿ç¨‹åªæœ‰è·å–äº†é”ï¼Œæ‰èƒ½è°ƒç”¨è¯¥ç»„ä»¶çš„await()æ–¹æ³•ï¼Œè€Œè°ƒç”¨åï¼Œå½“å‰çº¿ç¨‹å°†ç¼©æ”¾é”ã€‚ 2.ReentrantLockçš„ä½¿ç”¨å…³äºReentrantLockçš„ä½¿ç”¨å¾ˆç®€å•ï¼Œåªéœ€è¦æ˜¾ç¤ºè°ƒç”¨ï¼Œè·å¾—åŒæ­¥é”ï¼Œé‡Šæ”¾åŒæ­¥é”å³å¯ã€‚ 12345678ReentrantLock lock = new ReentrantLock(); //å‚æ•°é»˜è®¤falseï¼Œä¸å…¬å¹³é”.....................lock.lock(); //å¦‚æœè¢«å…¶å®ƒèµ„æºé”å®šï¼Œä¼šåœ¨æ­¤ç­‰å¾…é”é‡Šæ”¾ï¼Œè¾¾åˆ°æš‚åœçš„æ•ˆæœtry &#123; //æ“ä½œ&#125; finally &#123; lock.unlock(); //é‡Šæ”¾é”&#125; 3.è§£å†³çº¿ç¨‹åŒæ­¥çš„å®ä¾‹é’ˆå¯¹ä¸Šè¿°æ–¹æ³•ï¼Œå…·ä½“çš„è§£å†³æ–¹å¼å¦‚ä¸‹ï¼š 12345678910111213141516171819202122public class Ticket implements Runnable &#123; // å½“å‰æ‹¥æœ‰çš„ç¥¨æ•° private int num = 100; ReentrantLock lock = new ReentrantLock(); public void run() &#123; while (true) &#123; try &#123; Thread.sleep(10); &#125; catch (InterruptedException e) &#123; &#125; lock.lock(); // è¾“å‡ºå–ç¥¨ä¿¡æ¯ if (num &gt; 0) &#123; System.out.println(Thread.currentThread().getName() + \".....sale....\" + num--); &#125; lock.unlock(); &#125; &#125;&#125; å››ã€é‡å…¥é”å½“ä¸€ä¸ªçº¿ç¨‹å¾—åˆ°ä¸€ä¸ªå¯¹è±¡åï¼Œå†æ¬¡è¯·æ±‚è¯¥å¯¹è±¡é”æ—¶æ˜¯å¯ä»¥å†æ¬¡å¾—åˆ°è¯¥å¯¹è±¡çš„é”çš„ã€‚ å…·ä½“æ¦‚å¿µå°±æ˜¯ï¼šè‡ªå·±å¯ä»¥å†æ¬¡è·å–è‡ªå·±çš„å†…éƒ¨é”ã€‚ Javaé‡Œé¢å†…ç½®é”(synchronized)å’ŒLock(ReentrantLock)éƒ½æ˜¯å¯é‡å…¥çš„ã€‚ 12345678910111213141516public class SynchronizedTest &#123; public void method1() &#123; synchronized (SynchronizedTest.class) &#123; System.out.println(\"æ–¹æ³•1è·å¾—ReentrantTestçš„é”è¿è¡Œäº†\"); method2(); &#125; &#125; public void method2() &#123; synchronized (SynchronizedTest.class) &#123; System.out.println(\"æ–¹æ³•1é‡Œé¢è°ƒç”¨çš„æ–¹æ³•2é‡å…¥é”,ä¹Ÿæ­£å¸¸è¿è¡Œäº†\"); &#125; &#125; public static void main(String[] args) &#123; new SynchronizedTest().method1(); &#125;&#125; ä¸Šé¢ä¾¿æ˜¯synchronizedçš„é‡å…¥é”ç‰¹æ€§ï¼Œå³è°ƒç”¨method1()æ–¹æ³•æ—¶ï¼Œå·²ç»è·å¾—äº†é”ï¼Œæ­¤æ—¶å†…éƒ¨è°ƒç”¨method2()æ–¹æ³•æ—¶ï¼Œç”±äºæœ¬èº«å·²ç»å…·æœ‰è¯¥é”ï¼Œæ‰€ä»¥å¯ä»¥å†æ¬¡è·å–ã€‚ 1234567891011121314151617181920212223public class ReentrantLockTest &#123; private Lock lock = new ReentrantLock(); public void method1() &#123; lock.lock(); try &#123; System.out.println(\"æ–¹æ³•1è·å¾—ReentrantLocké”è¿è¡Œäº†\"); method2(); &#125; finally &#123; lock.unlock(); &#125; &#125; public void method2() &#123; lock.lock(); try &#123; System.out.println(\"æ–¹æ³•1é‡Œé¢è°ƒç”¨çš„æ–¹æ³•2é‡å…¥ReentrantLocké”,ä¹Ÿæ­£å¸¸è¿è¡Œäº†\"); &#125; finally &#123; lock.unlock(); &#125; &#125; public static void main(String[] args) &#123; new ReentrantLockTest().method1(); &#125;&#125; ä¸Šé¢ä¾¿æ˜¯ReentrantLockçš„é‡å…¥é”ç‰¹æ€§ï¼Œå³è°ƒç”¨method1()æ–¹æ³•æ—¶ï¼Œå·²ç»è·å¾—äº†é”ï¼Œæ­¤æ—¶å†…éƒ¨è°ƒç”¨method2()æ–¹æ³•æ—¶ï¼Œ ç”±äºæœ¬èº«å·²ç»å…·æœ‰è¯¥é”ï¼Œæ‰€ä»¥å¯ä»¥å†æ¬¡è·å–ã€‚ äº”ã€å…¬å¹³é”CPUåœ¨è°ƒåº¦çº¿ç¨‹çš„æ—¶å€™æ˜¯åœ¨ç­‰å¾…é˜Ÿåˆ—é‡ŒéšæœºæŒ‘é€‰ä¸€ä¸ªçº¿ç¨‹ï¼Œç”±äºè¿™ç§éšæœºæ€§æ‰€ä»¥æ˜¯æ— æ³•ä¿è¯çº¿ç¨‹å…ˆåˆ°å…ˆå¾—çš„ï¼ˆsynchronizedæ§åˆ¶çš„é”å°±æ˜¯è¿™ç§éå…¬å¹³é”ï¼‰ã€‚ä½†è¿™æ ·å°±ä¼šäº§ç”Ÿé¥¥é¥¿ç°è±¡ï¼Œå³æœ‰äº›çº¿ç¨‹ï¼ˆä¼˜å…ˆçº§è¾ƒä½çš„çº¿ç¨‹ï¼‰å¯èƒ½æ°¸è¿œä¹Ÿæ— æ³•è·å–CPUçš„æ‰§è¡Œæƒï¼Œä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹ä¼šä¸æ–­çš„å¼ºåˆ¶å®ƒçš„èµ„æºã€‚é‚£ä¹ˆå¦‚ä½•è§£å†³é¥¥é¥¿é—®é¢˜å‘¢ï¼Œè¿™å°±éœ€è¦å…¬å¹³é”äº†ã€‚å…¬å¹³é”å¯ä»¥ä¿è¯çº¿ç¨‹æŒ‰ç…§æ—¶é—´çš„å…ˆåé¡ºåºæ‰§è¡Œï¼Œé¿å…é¥¥é¥¿ç°è±¡çš„äº§ç”Ÿã€‚ä½†å…¬å¹³é”çš„æ•ˆç‡æ¯”è¾ƒä½ï¼Œå› ä¸ºè¦å®ç°é¡ºåºæ‰§è¡Œï¼Œéœ€è¦ç»´æŠ¤ä¸€ä¸ªæœ‰åºé˜Ÿåˆ—ã€‚ ReentrantLockä¾¿æ˜¯ä¸€ç§å…¬å¹³é”ï¼Œé€šè¿‡åœ¨æ„é€ æ–¹æ³•ä¸­ä¼ å…¥trueå°±æ˜¯å…¬å¹³é”ï¼Œä¼ å…¥falseï¼Œå°±æ˜¯éå…¬å¹³é”ã€‚ 123public ReentrantLock(boolean fair) &#123; sync = fair ? new FairSync() : new NonfairSync(); &#125; ä»¥ä¸‹æ˜¯ä½¿ç”¨å…¬å¹³é”å®ç°çš„æ•ˆæœï¼š 123456789101112131415161718192021public class LockFairTest implements Runnable&#123; //åˆ›å»ºå…¬å¹³é” private static ReentrantLock lock=new ReentrantLock(true); public void run() &#123; while(true)&#123; lock.lock(); try&#123; System.out.println(Thread.currentThread().getName()+\"è·å¾—é”\"); &#125;finally&#123; lock.unlock(); &#125; &#125; &#125; public static void main(String[] args) &#123; LockFairTest lft=new LockFairTest(); Thread th1=new Thread(lft); Thread th2=new Thread(lft); th1.start(); th2.start(); &#125;&#125; è¾“å‡ºç»“æœï¼š Thread-1è·å¾—é”Thread-0è·å¾—é”Thread-1è·å¾—é”Thread-0è·å¾—é”Thread-1è·å¾—é”Thread-0è·å¾—é”Thread-1è·å¾—é”Thread-0è·å¾—é”Thread-1è·å¾—é”Thread-0è·å¾—é”Thread-1è·å¾—é”Thread-0è·å¾—é”Thread-1è·å¾—é”Thread-0è·å¾—é”Thread-1è·å¾—é”Thread-0è·å¾—é” è¿™æ˜¯æˆªå–çš„éƒ¨åˆ†æ‰§è¡Œç»“æœï¼Œåˆ†æç»“æœå¯çœ‹å‡ºä¸¤ä¸ªçº¿ç¨‹æ˜¯äº¤æ›¿æ‰§è¡Œçš„ï¼Œå‡ ä¹ä¸ä¼šå‡ºç°åŒä¸€ä¸ªçº¿ç¨‹è¿ç»­æ‰§è¡Œå¤šæ¬¡ã€‚ å…­ã€synchronizedå’ŒReentrantLockçš„æ¯”è¾ƒ1.åŒºåˆ«ï¼š1ï¼‰Lockæ˜¯ä¸€ä¸ªæ¥å£ï¼Œè€Œsynchronizedæ˜¯Javaä¸­çš„å…³é”®å­—ï¼Œsynchronizedæ˜¯å†…ç½®çš„è¯­è¨€å®ç°ï¼› 2ï¼‰synchronizedåœ¨å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œä¼šè‡ªåŠ¨é‡Šæ”¾çº¿ç¨‹å æœ‰çš„é”ï¼Œå› æ­¤ä¸ä¼šå¯¼è‡´æ­»é”ç°è±¡å‘ç”Ÿï¼›è€ŒLockåœ¨å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œå¦‚æœæ²¡æœ‰ä¸»åŠ¨é€šè¿‡unLock()å»é‡Šæ”¾é”ï¼Œåˆ™å¾ˆå¯èƒ½é€ æˆæ­»é”ç°è±¡ï¼Œå› æ­¤ä½¿ç”¨Lockæ—¶éœ€è¦åœ¨finallyå—ä¸­é‡Šæ”¾é”ï¼› 3ï¼‰Lockå¯ä»¥è®©ç­‰å¾…é”çš„çº¿ç¨‹å“åº”ä¸­æ–­ï¼Œè€Œsynchronizedå´ä¸è¡Œï¼Œä½¿ç”¨synchronizedæ—¶ï¼Œç­‰å¾…çš„çº¿ç¨‹ä¼šä¸€ç›´ç­‰å¾…ä¸‹å»ï¼Œä¸èƒ½å¤Ÿå“åº”ä¸­æ–­ï¼› 4ï¼‰é€šè¿‡Lockå¯ä»¥çŸ¥é“æœ‰æ²¡æœ‰æˆåŠŸè·å–é”ï¼Œè€Œsynchronizedå´æ— æ³•åŠåˆ°ã€‚ 5ï¼‰Lockå¯ä»¥æé«˜å¤šä¸ªçº¿ç¨‹è¿›è¡Œè¯»æ“ä½œçš„æ•ˆç‡ã€‚ æ€»ç»“ï¼šReentrantLockç›¸æ¯”synchronizedï¼Œå¢åŠ äº†ä¸€äº›é«˜çº§çš„åŠŸèƒ½ã€‚ä½†ä¹Ÿæœ‰ä¸€å®šç¼ºé™·ã€‚ åœ¨ReentrantLockç±»ä¸­å®šä¹‰äº†å¾ˆå¤šæ–¹æ³•ï¼Œæ¯”å¦‚ï¼š 1234567isFair() //åˆ¤æ–­é”æ˜¯å¦æ˜¯å…¬å¹³é”isLocked() //åˆ¤æ–­é”æ˜¯å¦è¢«ä»»ä½•çº¿ç¨‹è·å–äº†isHeldByCurrentThread() //åˆ¤æ–­é”æ˜¯å¦è¢«å½“å‰çº¿ç¨‹è·å–äº†hasQueuedThreads() //åˆ¤æ–­æ˜¯å¦æœ‰çº¿ç¨‹åœ¨ç­‰å¾…è¯¥é” 2.ä¸¤è€…åœ¨é”çš„ç›¸å…³æ¦‚å¿µä¸ŠåŒºåˆ«ï¼š1)å¯ä¸­æ–­é” é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å¯ä»¥å“åº”ä¸­æ–­çš„é”ã€‚ åœ¨Javaä¸­ï¼Œsynchronizedå°±ä¸æ˜¯å¯ä¸­æ–­é”ï¼Œè€ŒLockæ˜¯å¯ä¸­æ–­é”ã€‚å¦‚æœæŸä¸€çº¿ç¨‹Aæ­£åœ¨æ‰§è¡Œé”ä¸­çš„ä»£ç ï¼Œå¦ä¸€çº¿ç¨‹Bæ­£åœ¨ç­‰å¾…è·å–è¯¥é”ï¼Œå¯èƒ½ç”±äºç­‰å¾…æ—¶é—´è¿‡é•¿ï¼Œçº¿ç¨‹Bä¸æƒ³ç­‰å¾…äº†ï¼Œæƒ³å…ˆå¤„ç†å…¶ä»–äº‹æƒ…ï¼Œæˆ‘ä»¬å¯ä»¥è®©å®ƒä¸­æ–­è‡ªå·±æˆ–è€…åœ¨åˆ«çš„çº¿ç¨‹ä¸­ä¸­æ–­å®ƒï¼Œè¿™ç§å°±æ˜¯å¯ä¸­æ–­é”ã€‚ lockInterruptibly()çš„ç”¨æ³•ä½“ç°äº†Lockçš„å¯ä¸­æ–­æ€§ã€‚ 2)å…¬å¹³é” å…¬å¹³é”å³å°½é‡ä»¥è¯·æ±‚é”çš„é¡ºåºæ¥è·å–é”ã€‚æ¯”å¦‚åŒæ˜¯æœ‰å¤šä¸ªçº¿ç¨‹åœ¨ç­‰å¾…ä¸€ä¸ªé”ï¼Œå½“è¿™ä¸ªé”è¢«é‡Šæ”¾æ—¶ï¼Œç­‰å¾…æ—¶é—´æœ€ä¹…çš„çº¿ç¨‹ï¼ˆæœ€å…ˆè¯·æ±‚çš„çº¿ç¨‹ï¼‰ä¼šè·å¾—è¯¥é”ï¼ˆå¹¶ä¸æ˜¯ç»å¯¹çš„ï¼Œå¤§ä½“ä¸Šæ˜¯è¿™ç§é¡ºåºï¼‰ï¼Œè¿™ç§å°±æ˜¯å…¬å¹³é”ã€‚ éå…¬å¹³é”å³æ— æ³•ä¿è¯é”çš„è·å–æ˜¯æŒ‰ç…§è¯·æ±‚é”çš„é¡ºåºè¿›è¡Œçš„ã€‚è¿™æ ·å°±å¯èƒ½å¯¼è‡´æŸä¸ªæˆ–è€…ä¸€äº›çº¿ç¨‹æ°¸è¿œè·å–ä¸åˆ°é”ã€‚ åœ¨Javaä¸­ï¼Œsynchronizedå°±æ˜¯éå…¬å¹³é”ï¼Œå®ƒæ— æ³•ä¿è¯ç­‰å¾…çš„çº¿ç¨‹è·å–é”çš„é¡ºåºã€‚ReentrantLockå¯ä»¥è®¾ç½®æˆå…¬å¹³é”ã€‚ 3)è¯»å†™é” è¯»å†™é”å°†å¯¹ä¸€ä¸ªèµ„æºï¼ˆæ¯”å¦‚æ–‡ä»¶ï¼‰çš„è®¿é—®åˆ†æˆäº†2ä¸ªé”ï¼Œä¸€ä¸ªè¯»é”å’Œä¸€ä¸ªå†™é”ã€‚ æ­£å› ä¸ºæœ‰äº†è¯»å†™é”ï¼Œæ‰ä½¿å¾—å¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„è¯»æ“ä½œå¯ä»¥å¹¶å‘è¿›è¡Œï¼Œä¸éœ€è¦åŒæ­¥ï¼Œè€Œå†™æ“ä½œéœ€è¦åŒæ­¥è¿›è¡Œï¼Œæé«˜äº†æ•ˆç‡ã€‚ ReadWriteLockå°±æ˜¯è¯»å†™é”ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ¥å£ï¼ŒReentrantReadWriteLockå®ç°äº†è¿™ä¸ªæ¥å£ã€‚ å¯ä»¥é€šè¿‡readLock()è·å–è¯»é”ï¼Œé€šè¿‡writeLock()è·å–å†™é”ã€‚ 4)ç»‘å®šå¤šä¸ªæ¡ä»¶ ä¸€ä¸ªReentrantLockå¯¹è±¡å¯ä»¥åŒæ—¶ç»‘å®šå¤šä¸ªConditionå¯¹è±¡ï¼Œè€Œåœ¨synchronizedä¸­ï¼Œé”å¯¹è±¡çš„wait()å’Œnotify()æˆ–notifyAll()æ–¹æ³•å¯ä»¥å®ç°ä¸€ä¸ªéšå«çš„æ¡ä»¶ï¼Œå¦‚æœè¦å’Œå¤šä½™ä¸€ä¸ªæ¡ä»¶å…³è”çš„æ—¶å€™ï¼Œå°±ä¸å¾—ä¸é¢å¤–åœ°æ·»åŠ ä¸€ä¸ªé”ï¼Œè€ŒReentrantLockåˆ™æ— é¡»è¿™ä¹ˆåšï¼Œåªéœ€è¦å¤šæ¬¡è°ƒç”¨new Condition()æ–¹æ³•å³å¯ã€‚ 3.æ€§èƒ½æ¯”è¾ƒåœ¨æ€§èƒ½ä¸Šæ¥è¯´ï¼Œå¦‚æœç«äº‰èµ„æºä¸æ¿€çƒˆï¼Œä¸¤è€…çš„æ€§èƒ½æ˜¯å·®ä¸å¤šçš„ï¼Œè€Œ å½“ç«äº‰èµ„æºéå¸¸æ¿€çƒˆæ—¶ï¼ˆå³æœ‰å¤§é‡çº¿ç¨‹åŒæ—¶ç«äº‰ï¼‰ï¼Œæ­¤æ—¶ReentrantLockçš„æ€§èƒ½è¦è¿œè¿œä¼˜äºsynchronized ã€‚æ‰€ä»¥è¯´ï¼Œåœ¨å…·ä½“ä½¿ç”¨æ—¶è¦æ ¹æ®é€‚å½“æƒ…å†µé€‰æ‹©ã€‚ åœ¨JDK1.5ä¸­ï¼Œsynchronizedæ˜¯æ€§èƒ½ä½æ•ˆçš„ã€‚å› ä¸ºè¿™æ˜¯ä¸€ä¸ªé‡é‡çº§æ“ä½œï¼Œå®ƒå¯¹æ€§èƒ½æœ€å¤§çš„å½±å“æ˜¯é˜»å¡çš„æ˜¯å®ç°ï¼ŒæŒ‚èµ·çº¿ç¨‹å’Œæ¢å¤çº¿ç¨‹çš„æ“ä½œéƒ½éœ€è¦è½¬å…¥å†…æ ¸æ€ä¸­å®Œæˆï¼Œè¿™äº›æ“ä½œç»™ç³»ç»Ÿçš„å¹¶å‘æ€§å¸¦æ¥äº†å¾ˆå¤§çš„å‹åŠ›ã€‚ç›¸æ¯”ä¹‹ä¸‹ä½¿ç”¨Javaæä¾›çš„ReentrankLockå¯¹è±¡ï¼Œæ€§èƒ½æ›´é«˜ä¸€äº›ã€‚åˆ°äº†JDK1.6ï¼Œå‘ç”Ÿäº†å˜åŒ–ï¼Œå¯¹synchronizeåŠ å…¥äº†å¾ˆå¤šä¼˜åŒ–æªæ–½ï¼Œæœ‰è‡ªé€‚åº”è‡ªæ—‹ï¼Œé”æ¶ˆé™¤ï¼Œé”ç²—åŒ–ï¼Œè½»é‡çº§é”ï¼Œåå‘é”ç­‰ç­‰ã€‚å¯¼è‡´åœ¨JDK1.6ä¸Šsynchronizeçš„æ€§èƒ½å¹¶ä¸æ¯”Lockå·®ã€‚å®˜æ–¹ä¹Ÿè¡¨ç¤ºï¼Œä»–ä»¬ä¹Ÿæ›´æ”¯æŒsynchronizeï¼Œåœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­è¿˜æœ‰ä¼˜åŒ–ä½™åœ°ï¼Œæ‰€ä»¥è¿˜æ˜¯æå€¡åœ¨synchronizedèƒ½å®ç°éœ€æ±‚çš„æƒ…å†µä¸‹ï¼Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨synchronizedæ¥è¿›è¡ŒåŒæ­¥ã€‚","categories":[],"tags":[{"name":"Interview","slug":"Interview","permalink":"https://edward7zhang.github.io/tags/Interview/"},{"name":"Java","slug":"Java","permalink":"https://edward7zhang.github.io/tags/Java/"}]},{"title":"Javaåˆ›å»ºçº¿ç¨‹çš„ä¸‰ç§æ–¹å¼","slug":"Javaåˆ›å»ºçº¿ç¨‹çš„ä¸‰ç§æ–¹å¼","date":"2018-01-15T12:24:12.000Z","updated":"2018-03-04T06:28:31.476Z","comments":true,"path":"2018/01/15/Javaåˆ›å»ºçº¿ç¨‹çš„ä¸‰ç§æ–¹å¼/","link":"","permalink":"https://edward7zhang.github.io/2018/01/15/Javaåˆ›å»ºçº¿ç¨‹çš„ä¸‰ç§æ–¹å¼/","excerpt":"ä¸€ã€ç»§æ‰¿Threadç±»åˆ›å»ºçº¿ç¨‹ç±»ï¼ˆ1ï¼‰å®šä¹‰Threadç±»çš„å­ç±»ï¼Œå¹¶é‡å†™è¯¥ç±»çš„runæ–¹æ³•ï¼Œè¯¥runæ–¹æ³•çš„æ–¹æ³•ä½“å°±ä»£è¡¨äº†çº¿ç¨‹è¦å®Œæˆçš„ä»»åŠ¡ã€‚å› æ­¤æŠŠrun()æ–¹æ³•ç§°ä¸ºæ‰§è¡Œä½“ã€‚ ï¼ˆ2ï¼‰åˆ›å»ºThreadå­ç±»çš„å®ä¾‹ï¼Œå³åˆ›å»ºäº†çº¿ç¨‹å¯¹è±¡ã€‚ ï¼ˆ3ï¼‰è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„start()æ–¹æ³•æ¥å¯åŠ¨è¯¥çº¿ç¨‹ã€‚","text":"ä¸€ã€ç»§æ‰¿Threadç±»åˆ›å»ºçº¿ç¨‹ç±»ï¼ˆ1ï¼‰å®šä¹‰Threadç±»çš„å­ç±»ï¼Œå¹¶é‡å†™è¯¥ç±»çš„runæ–¹æ³•ï¼Œè¯¥runæ–¹æ³•çš„æ–¹æ³•ä½“å°±ä»£è¡¨äº†çº¿ç¨‹è¦å®Œæˆçš„ä»»åŠ¡ã€‚å› æ­¤æŠŠrun()æ–¹æ³•ç§°ä¸ºæ‰§è¡Œä½“ã€‚ ï¼ˆ2ï¼‰åˆ›å»ºThreadå­ç±»çš„å®ä¾‹ï¼Œå³åˆ›å»ºäº†çº¿ç¨‹å¯¹è±¡ã€‚ ï¼ˆ3ï¼‰è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„start()æ–¹æ³•æ¥å¯åŠ¨è¯¥çº¿ç¨‹ã€‚12345678910111213141516171819202122public class FirstThreadTest extends Thread &#123; int i = 0; //é‡å†™runæ–¹æ³•ï¼Œrunæ–¹æ³•çš„æ–¹æ³•ä½“å°±æ˜¯ç°åœºæ‰§è¡Œä½“ public void run() &#123; for (; i &lt; 100; i++) &#123; System.out.println(getName() + \" \" + i); &#125; &#125; public static void main(String[] args) &#123; for (int i = 0; i &lt; 100; i++) &#123; System.out.println(Thread.currentThread().getName() + \" : \" + i); if (i == 20) &#123; new FirstThreadTest().start(); new FirstThreadTest().start(); &#125; &#125; &#125;&#125; ä¸Šè¿°ä»£ç ä¸­Thread.currentThread()æ–¹æ³•è¿”å›å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡ã€‚GetName()æ–¹æ³•è¿”å›è°ƒç”¨è¯¥æ–¹æ³•çš„çº¿ç¨‹çš„åå­—ã€‚ äºŒã€é€šè¿‡Runnableæ¥å£åˆ›å»ºçº¿ç¨‹ç±»ï¼ˆ1ï¼‰å®šä¹‰runnableæ¥å£çš„å®ç°ç±»ï¼Œå¹¶é‡å†™è¯¥æ¥å£çš„run()æ–¹æ³•ï¼Œè¯¥run()æ–¹æ³•çš„æ–¹æ³•ä½“åŒæ ·æ˜¯è¯¥çº¿ç¨‹çš„çº¿ç¨‹æ‰§è¡Œä½“ã€‚ ï¼ˆ2ï¼‰åˆ›å»º Runnableå®ç°ç±»çš„å®ä¾‹ï¼Œå¹¶ä¾æ­¤å®ä¾‹ä½œä¸ºThreadçš„targetæ¥åˆ›å»ºThreadå¯¹è±¡ï¼Œè¯¥Threadå¯¹è±¡æ‰æ˜¯çœŸæ­£çš„çº¿ç¨‹å¯¹è±¡ã€‚ ï¼ˆ3ï¼‰è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„start()æ–¹æ³•æ¥å¯åŠ¨è¯¥çº¿ç¨‹ã€‚ 12345678910111213141516171819202122public class RunnableThreadTest implements Runnable &#123; private int i; public void run() &#123; for (i = 0; i &lt; 100; i++) &#123; System.out.println(Thread.currentThread().getName() + \" \" + i); &#125; &#125; public static void main(String[] args) &#123; for (int i = 0; i &lt; 100; i++) &#123; System.out.println(Thread.currentThread().getName() + \" \" + i); if (i == 20) &#123; RunnableThreadTest rtt = new RunnableThreadTest(); new Thread(rtt, \"æ–°çº¿ç¨‹1\").start(); new Thread(rtt, \"æ–°çº¿ç¨‹2\").start(); &#125; &#125; &#125;&#125; ä¸‰ã€é€šè¿‡Callableå’ŒFutureåˆ›å»ºçº¿ç¨‹ï¼ˆ1ï¼‰åˆ›å»ºCallableæ¥å£çš„å®ç°ç±»ï¼Œå¹¶å®ç°call()æ–¹æ³•ï¼Œè¯¥call()æ–¹æ³•å°†ä½œä¸ºçº¿ç¨‹æ‰§è¡Œä½“ï¼Œå¹¶ä¸”æœ‰è¿”å›å€¼ã€‚ ï¼ˆ2ï¼‰åˆ›å»ºCallableå®ç°ç±»çš„å®ä¾‹ï¼Œä½¿ç”¨FutureTaskç±»æ¥åŒ…è£…Callableå¯¹è±¡ï¼Œè¯¥FutureTaskå¯¹è±¡å°è£…äº†è¯¥Callableå¯¹è±¡çš„call()æ–¹æ³•çš„è¿”å›å€¼ã€‚ ï¼ˆ3ï¼‰ä½¿ç”¨FutureTaskå¯¹è±¡ä½œä¸ºThreadå¯¹è±¡çš„targetåˆ›å»ºå¹¶å¯åŠ¨æ–°çº¿ç¨‹ã€‚ ï¼ˆ4ï¼‰è°ƒç”¨FutureTaskå¯¹è±¡çš„get()æ–¹æ³•æ¥è·å¾—å­çº¿ç¨‹æ‰§è¡Œç»“æŸåçš„è¿”å›å€¼ï¼Œè°ƒç”¨get()æ–¹æ³•ä¼šé˜»å¡çº¿ç¨‹ã€‚ 1234567891011121314151617181920212223242526272829public class CallableThreadTest implements Callable&lt;Integer&gt; &#123; public static void main(String[] args) &#123; CallableThreadTest ctt = new CallableThreadTest(); FutureTask&lt;Integer&gt; ft = new FutureTask&lt;&gt;(ctt); for (int i = 0; i &lt; 100; i++) &#123; System.out.println(Thread.currentThread().getName() + \" çš„å¾ªç¯å˜é‡içš„å€¼\" + i); if (i == 20) &#123; new Thread(ft, \"æœ‰è¿”å›å€¼çš„çº¿ç¨‹\").start(); &#125; &#125; try &#123; System.out.println(\"å­çº¿ç¨‹çš„è¿”å›å€¼ï¼š\" + ft.get()); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; catch (ExecutionException e) &#123; e.printStackTrace(); &#125; &#125; @Override public Integer call() throws Exception &#123; int i = 0; for (; i &lt; 100; i++) &#123; System.out.println(Thread.currentThread().getName() + \" \" + i); &#125; return i; &#125;&#125; å››ã€åˆ›å»ºçº¿ç¨‹çš„ä¸‰ç§æ–¹å¼çš„å¯¹æ¯”é‡‡ç”¨å®ç°Runnableã€Callableæ¥å£çš„æ–¹å¼åˆ›è§å¤šçº¿ç¨‹æ—¶ï¼Œä¼˜åŠ¿æ˜¯ï¼š çº¿ç¨‹ç±»åªæ˜¯å®ç°äº†Runnableæ¥å£æˆ–Callableæ¥å£ï¼Œè¿˜å¯ä»¥ç»§æ‰¿å…¶ä»–ç±»ã€‚ åœ¨è¿™ç§æ–¹å¼ä¸‹ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥å…±äº«åŒä¸€ä¸ªtargetå¯¹è±¡ï¼Œæ‰€ä»¥éå¸¸é€‚åˆå¤šä¸ªç›¸åŒçº¿ç¨‹æ¥å¤„ç†åŒä¸€ä»½èµ„æºçš„æƒ…å†µï¼Œä»è€Œå¯ä»¥å°†CPUã€ä»£ç å’Œæ•°æ®åˆ†å¼€ï¼Œå½¢æˆæ¸…æ™°çš„æ¨¡å‹ï¼Œè¾ƒå¥½åœ°ä½“ç°äº†é¢å‘å¯¹è±¡çš„æ€æƒ³ã€‚ åŠ£åŠ¿æ˜¯ï¼š ç¼–ç¨‹ç¨å¾®å¤æ‚ï¼Œå¦‚æœè¦è®¿é—®å½“å‰çº¿ç¨‹ï¼Œåˆ™å¿…é¡»ä½¿ç”¨Thread.currentThread()æ–¹æ³•ã€‚ ä½¿ç”¨ç»§æ‰¿Threadç±»çš„æ–¹å¼åˆ›å»ºå¤šçº¿ç¨‹æ—¶ä¼˜åŠ¿æ˜¯ï¼š ç¼–å†™ç®€å•ï¼Œå¦‚æœéœ€è¦è®¿é—®å½“å‰çº¿ç¨‹ï¼Œåˆ™æ— éœ€ä½¿ç”¨Thread.currentThread()æ–¹æ³•ï¼Œç›´æ¥ä½¿ç”¨thiså³å¯è·å¾—å½“å‰çº¿ç¨‹ã€‚ åŠ£åŠ¿æ˜¯ï¼š çº¿ç¨‹ç±»å·²ç»ç»§æ‰¿äº†Threadç±»ï¼Œæ‰€ä»¥ä¸èƒ½å†ç»§æ‰¿å…¶ä»–çˆ¶ç±»ã€‚","categories":[],"tags":[{"name":"Interview","slug":"Interview","permalink":"https://edward7zhang.github.io/tags/Interview/"},{"name":"Java","slug":"Java","permalink":"https://edward7zhang.github.io/tags/Java/"}]},{"title":"ã€è½¬è½½ã€‘äºšé©¬é€Šé«˜çº§å·¥ç¨‹å¸ˆï¼šå¹³å‡¡æ˜¯ç¨‹åºå‘˜å”¯ä¸€çš„ç­”æ¡ˆå—ï¼Ÿ","slug":"ã€è½¬è½½ã€‘äºšé©¬é€Šé«˜çº§å·¥ç¨‹å¸ˆï¼šå¹³å‡¡æ˜¯ç¨‹åºå‘˜å”¯ä¸€çš„ç­”æ¡ˆå—ï¼Ÿ","date":"2017-09-18T15:20:13.000Z","updated":"2017-09-18T15:27:40.078Z","comments":true,"path":"2017/09/18/ã€è½¬è½½ã€‘äºšé©¬é€Šé«˜çº§å·¥ç¨‹å¸ˆï¼šå¹³å‡¡æ˜¯ç¨‹åºå‘˜å”¯ä¸€çš„ç­”æ¡ˆå—ï¼Ÿ/","link":"","permalink":"https://edward7zhang.github.io/2017/09/18/ã€è½¬è½½ã€‘äºšé©¬é€Šé«˜çº§å·¥ç¨‹å¸ˆï¼šå¹³å‡¡æ˜¯ç¨‹åºå‘˜å”¯ä¸€çš„ç­”æ¡ˆå—ï¼Ÿ/","excerpt":"ã€è½¬è½½ã€‘äºšé©¬é€Šé«˜çº§å·¥ç¨‹å¸ˆï¼šå¹³å‡¡æ˜¯ç¨‹åºå‘˜å”¯ä¸€çš„ç­”æ¡ˆå—ï¼Ÿæœ¬æ–‡ä½œè€…ï¼šæ•…èƒ¤é“é•¿ CMU ç¡•å£«æ¯•ä¸šï¼Œå¸¸å¹´å±…ä½äºç¾å›½çš„ iOS å¼€å‘è€…ã€‚Githubç´¯è®¡ 4000 æ˜Ÿï¼Œå‰ Uber æ ¸å¿ƒæ¶æ„ç»„æˆå‘˜ï¼Œç°äºšé©¬é€Šæ‹…ä»»é¡¹ç›®æŠ€æœ¯è´Ÿè´£äººã€‚ ä»¥ä¸‹ä¸ºæ­£æ–‡ï¼š æˆ‘åœ¨ Facebook æœ‰ä¸€ä½å¥½å‹ã€‚ä»–æœ¬ç§‘å›½å†… Top 2 å¤§å­¦æ¯•ä¸šï¼Œåœ¨ç¾å›½æ‹¿äº†æœ€é¡¶å°–å¤§å­¦çš„ç¡•å£«å­¦ä½ï¼Œç„¶åå¹´çºªè½»è½»å°±åšåˆ°äº†æŠ€æœ¯è´Ÿè´£äººï¼Œæ‹¿ç€è¶…é«˜çš„è–ªæ°´ã€‚å°±æ˜¯è¿™ä¹ˆä¸€ä¸ªå¼€äº†æŒ‚ä¸€èˆ¬çš„å¤©æ‰ï¼Œæ¯ä¸ªæ˜ŸæœŸå…­æ™šä¸Šçš„å¤œé‡Œï¼Œä»–æ˜¯æ°¸è¿œæ˜¯ç¡ä¸ç€çš„ã€‚ æˆ‘é—®ä»–ä¸ºä»€ä¹ˆå¤±çœ ã€‚ä»–çš„å›ç­”æ˜¯ç„¦è™‘ã€‚","text":"ã€è½¬è½½ã€‘äºšé©¬é€Šé«˜çº§å·¥ç¨‹å¸ˆï¼šå¹³å‡¡æ˜¯ç¨‹åºå‘˜å”¯ä¸€çš„ç­”æ¡ˆå—ï¼Ÿæœ¬æ–‡ä½œè€…ï¼šæ•…èƒ¤é“é•¿ CMU ç¡•å£«æ¯•ä¸šï¼Œå¸¸å¹´å±…ä½äºç¾å›½çš„ iOS å¼€å‘è€…ã€‚Githubç´¯è®¡ 4000 æ˜Ÿï¼Œå‰ Uber æ ¸å¿ƒæ¶æ„ç»„æˆå‘˜ï¼Œç°äºšé©¬é€Šæ‹…ä»»é¡¹ç›®æŠ€æœ¯è´Ÿè´£äººã€‚ ä»¥ä¸‹ä¸ºæ­£æ–‡ï¼š æˆ‘åœ¨ Facebook æœ‰ä¸€ä½å¥½å‹ã€‚ä»–æœ¬ç§‘å›½å†… Top 2 å¤§å­¦æ¯•ä¸šï¼Œåœ¨ç¾å›½æ‹¿äº†æœ€é¡¶å°–å¤§å­¦çš„ç¡•å£«å­¦ä½ï¼Œç„¶åå¹´çºªè½»è½»å°±åšåˆ°äº†æŠ€æœ¯è´Ÿè´£äººï¼Œæ‹¿ç€è¶…é«˜çš„è–ªæ°´ã€‚å°±æ˜¯è¿™ä¹ˆä¸€ä¸ªå¼€äº†æŒ‚ä¸€èˆ¬çš„å¤©æ‰ï¼Œæ¯ä¸ªæ˜ŸæœŸå…­æ™šä¸Šçš„å¤œé‡Œï¼Œä»–æ˜¯æ°¸è¿œæ˜¯ç¡ä¸ç€çš„ã€‚ æˆ‘é—®ä»–ä¸ºä»€ä¹ˆå¤±çœ ã€‚ä»–çš„å›ç­”æ˜¯ç„¦è™‘ã€‚ ä»–è¯´ï¼Œä»–é©¬ä¸Šå°±è¦30å²äº†ã€‚ä»–çš„è€æ¿æ‰å…‹ä¼¯æ ¼åœ¨30å²æ—¶æ—¶å·²ç»ç¼”é€ äº† Facebookï¼›è´ä½æ–¯è¾å»äº†åå°”è¡—çš„å‰¯æ€»è£èŒä½ï¼Œå¼€å§‹äº† Amazon çš„åˆ›ä¸šæ—…ç¨‹ï¼›ä¸ç£Šå·²ç»æˆä¸ºäº†ä¸­å›½é¦–å¯Œï¼›æå½¦å®ä¹Ÿåœ¨è¿™ä¸€å¹´æ”¾å¼ƒäº†è´¢åŠ¡è‡ªç”±çš„ç¡…è°·ç”Ÿæ´»ï¼Œè½¬èº«å›åˆ°ä¸­å›½ï¼Œåˆ›ç«‹äº†ç™¾åº¦ã€‚è¿œçš„ä¸è¯´ï¼Œè¿‘å¤„ä»–æœ‰å‡ ä¸ªè®¤è¯†çš„åŒé¾„äººåœ¨å›½å†…åˆ›ä¸šé£ç”Ÿæ°´èµ·ï¼Œåƒä¸‡æŠ•èµ„ï¼Œè¿˜æœ‰å‡ ä¸ªè¢«è¯„ä¸º Forbes 30 Under 30ã€‚ è€Œä»–å‘¢ï¼Œä¸è¿‡ä¸€ä¸ªç¨‹åºå‘˜ã€‚30å²çš„æ—¶å€™ä¾ç„¶åœ¨ç¡…è°·ç§Ÿç€æˆ¿å­ï¼Œè‡³ä»Šæ²¡æœ‰æ„Ÿè§‰åšå‡ºä»€ä¹ˆæ”¹å˜ä¸–ç•Œçš„äº§å“ã€‚æ¯å½“çœ‹åˆ°ç¡…è°·å¤§åè¶…å¸‚é‡Œé¢æ‹–å®¶å¸¦å£çš„åäººè€å·¥ç¨‹å¸ˆï¼Œä»–å°±è§‰å¾—å¯ä»¥çœ‹ç©¿æœªæ¥ â€”â€” åå¹´åä»–ä¹Ÿä¼šæ˜¯è¿™æ ·ï¼šæŒºç€å¤§è‚šå­ï¼Œå¸¦ç€å­©å­ï¼Œä¸ºæŸ´ç±³æ²¹ç›æ–¤æ–¤è®¡è¾ƒã€‚ æˆ‘å½“æ—¶ç¬‘ç€è¯´ï¼Œä½ å“ªä¼šé‚£æ ·ã€‚ä½ ç°åœ¨åªä¸è¿‡æ˜¯å°‘å¹´ç»´ç‰¹çš„çƒ¦æ¼ï¼Œä½ ä¹‹å‰çš„ç”Ÿå‘½å¦‚å¤èŠ±èˆ¬ç¿çƒ‚ï¼Œè¿™ä¹‹åå¹³å‡¡ä¹Ÿä¸ä¼šæ˜¯å”¯ä¸€çš„ç­”æ¡ˆã€‚ ç°åœ¨æƒ³æƒ³ï¼Œæˆ‘ä¹Ÿè®¸è¿‡äºä¹è§‚äº†ã€‚ç°åœ¨è¶…å¸‚é‡Œçœ‹åˆ°çš„åäººå·¥ç¨‹å¸ˆï¼Œä»–ä»¬å½“å¹´éƒ½æ˜¯å›½å†…æ•°ä¸€æ•°äºŒçš„å­¦éœ¸ï¼Œå¤§å¤šåœ¨æ²¡æœ‰çˆ¶æ¯æ”¯æŒçš„æƒ…å†µä¸‹ï¼Œæ¼‚æ´‹è¿‡æµ·ï¼Œå­¦æˆæ¯•ä¸šï¼Œç•™åœ¨ç¡…è°·ï¼ˆé‚£ä¸ªæ—¶å€™ææ€•è°·æ­Œè¿˜æ²¡ä¸Šå¸‚ï¼‰ï¼ŒçœŸæ˜¯æ¯”æˆ‘ä»¬è¿™ä»£ç•™å­¦ç”Ÿä¼˜ç§€å¤ªå¤šã€‚å³ä½¿è¿™æ ·ï¼Œåœ¨æˆ‘ä»¬è¿™å¸®ä¸çŸ¥å¤©é«˜åœ°åšçš„å¹´è½»äººçœ‹æ¥ï¼Œä»–ä»¬ä¹Ÿè€äº†ã€æ— èŠäº†ã€æ³¯ç„¶ä¼—äººçŸ£äº†ã€‚åå¹´ä¹‹åï¼Œæˆ‘ä»¬è¿™ä»£ç¨‹åºå‘˜ï¼Œæ˜¯å¦ä¹Ÿä¼šè¢«åè¾ˆæ‰€é„™å¼ƒï¼Ÿ è¿™ä¸ªé—®é¢˜æˆ‘æƒ³æ— æ•°äººæ€è€ƒè¿‡ï¼Œæ— è®ºæ˜¯å›½å†…çš„è¿˜æ˜¯ç¡…è°·çš„ï¼Œæ— è®ºæ˜¯ä¸æ˜¯ç¨‹åºå‘˜ã€‚å½“å¹´æ‰å…‹ä¼¯æ ¼ä¸€ç›´ä¸ºè‡ªå·±æå®¢çš„èº«ä»½æ„Ÿåˆ°è‡ªè±ªï¼Œä¹Ÿæƒ§æ€•æœ€åè¢«ä¸–ä¿—è£¹æŒŸï¼Œæˆä¸ºæ‰€è°“èŒåœºä¸ŠæŒ‡æ‰‹ç”»è„šçš„è€æ²¹æ¡â€”â€”äºæ˜¯ä»–åœ¨è‡ªå·±åç‰‡ä¸Šçš„èŒä½ CEO å‰åŠ ä¸Šäº†ä¸ªâ€œä»–å¦ˆçš„â€ï¼›è¶…çº§æå®¢çº¦ç¿°å¡é©¬å…‹åœ¨æˆä¸º Oculus CTO ä¹‹åï¼Œä¾ç„¶åšæŒæ¯å¤©å†™ä»£ç ï¼Œä¸€å¤©ä¸å†™å°±è§‰å¾—æµ‘èº«ä¸èˆ’æœï¼Œè¦åœ¨æ¨ç‰¹ä¸Šåæ§½è‡ªå·±ã€‚ è¿™ä¸¤ä¸ªäººç›´åˆ°ä»Šå¤©ä¾ç„¶å¾ˆé…·ï¼Œä¾ç„¶æ˜¯ç¨‹åºå‘˜å¿ƒä¸­çš„å¶åƒã€‚ æœ‰äººè¯´ï¼Œè¿™ä¸¤ä¸ªäººå¤©èµ‹å¼‚ç¦€ï¼Œéª¨éª¼æƒŠå¥‡ï¼Œæ˜¯ä¸‡ä¸­æ— ä¸€çš„ç¨‹åºå‘˜ã€‚ç„¶è€Œä¸»æµä¸–ç•Œè§‚å°±æ˜¯ï¼Œæˆ‘ä»¬ç»ˆå°†è€å»ã€‚ç§‘æŠ€è¡Œä¸šçš„æ—¥æ–°æœˆå¼‚æ›´æ˜¯å†³å®šäº†ï¼Œæˆ‘ä»¬çš„ä»£ç ç»ˆå°†è¢«è¦†ç›–ï¼Œæˆ‘ä»¬åšçš„äº§å“ç»ˆå°†ä¼šè½å¯ï¼Œæˆ‘ä»¬è®¨è®ºçš„æŠ€æœ¯ç»ˆå°†ä¼šæ·˜æ±°ï¼Œé‚£æˆ‘ä»¬ç¨‹åºå‘˜è¿˜å‰©ä¸‹ä»€ä¹ˆï¼Ÿ ç¥é¾Ÿè™½å¯¿ï¼ŒçŠ¹æœ‰ç«Ÿæ—¶ã€‚è…¾è›‡ä¹˜é›¾ï¼Œç»ˆä¸ºåœŸç°ã€‚ è¦å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘æƒ³è°ˆä¸¤ä½è‰ºæœ¯å®¶ã€‚ä¸€ä½æ˜¯éŸ³ä¹ä¹‹çˆ¶å·´èµ«ï¼Œå¦ä¸€ä½æ˜¯éŸ³ä¹ç¥ç«¥è«æ‰ç‰¹ã€‚å‰è€…ç”Ÿå‰æ˜¯ä¸€ä½å®«å»·ä¹æ‰‹ï¼Œä¸ºç‹å®«è´µæ—è°±æ›²ï¼Œæ­»å80å¹´ï¼Œä»–ä¼Ÿå¤§çš„ä½œå“æ‰åœ¨æå…¶å¶ç„¶çš„æƒ…å†µä¸‹è¢«é—¨å¾·å°”æ¾å‘ç°ï¼›åè€…ç”Ÿå‰äº¦ä¸å—å¾…è§ï¼Œè‹±å¹´æ—©é€åæ— äººé€è‘¬ã€‚ è¿™ä¸¤ä¸ªäººåœ¨ç”Ÿå‰éƒ½æ˜¯æ™®æ™®é€šé€šï¼Œç»ä¸åƒè¿ˆå…‹å°”æ°å…‹é€Šé‚£æ ·å®¶å–»æˆ·æ™“ï¼Œèº«å‰èº«åéƒ½ç²‰ä¸æ— æ•°ã€‚ä»–ä»¬çš„å¹³å¸¸å·¥ä½œï¼Œä¸æˆ‘ä»¬ç¨‹åºå‘˜ä¸€æ ·ï¼Œä¸è¿‡æˆ‘ä»¬å†™ä»£ç ï¼Œä»–ä»¬å†™ä¹è°±ã€‚ æˆ‘æƒ³ï¼Œå·´èµ«å’Œè«æ‰ç‰¹ï¼Œåœ¨å®‰å®‰é™é™çš„è°±å†™ä¸€é¦–åˆä¸€é¦–æ›²ç›®çš„æ—¶å€™ï¼Œä»æ¥æ²¡æœ‰è€ƒè™‘è¿‡ï¼Œä»–ä»¬ä»¥åä¼šæˆä¸ºè¥¿æ–¹éŸ³ä¹çš„ä»£åè¯ã€‚ æˆ‘ä»¬ç¨‹åºå‘˜ä¹Ÿä¸€æ ·ï¼Œä¹Ÿè®¸åœ¨ä»–äººçœ‹æ¥æˆ‘ä»¬åªæ˜¯èºä¸é’‰ã€‚ä½†æ˜¯æˆ‘ä»¬æ•²ä¸‹æ¥çš„æ¯ä¸€è¡Œä»£ç ï¼Œä¹Ÿè®¸éƒ½å°†ç¼”é€ ä¸å‡¡ã€‚ å²ä¸Šæœ€ä¼Ÿå¤§çš„å¥³ç¨‹åºå‘˜ç›æ ¼ä¸½ç‰¹Â·æ±‰å¯†å°”é¡¿åœ¨ä¸º NASA å†™ä»£ç çš„æ—¶å€™ï¼Œå¥¹è´Ÿè´£çš„é¡¹ç›®åªæ˜¯ä¸ºäº†åº”å¯¹ä¸‡åˆ†ä¹‹ä¸€çš„æ„å¤–äº‹ä»¶ï¼Œè€Œå¥¹ä»ç„¶å…¢å…¢ä¸šä¸šåœ°å®Œæˆäº†å·¥ä½œã€‚æœ€åï¼Œå¥¹çš„ç¨‹åºçœŸçš„å‘æŒ¥äº†ä½œç”¨ï¼Œæ‹¯æ•‘äº†é˜¿æ³¢ç½—è®¡åˆ’ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬ç¨‹åºå‘˜ä¸€å®šè¦åŠŸæˆåå°±å—ï¼Ÿä¸€å®šè¦è£è€€æ˜¾è¾¾å—ï¼Ÿè¿™æ‰ç®—æ˜¯ä¸å¹³å‡¡æ‰æ˜¯å¹¸ç¦å—ï¼Ÿè™½ç„¶å†™ä»£ç ç¡®å®èµšé’±ï¼Œä½†å¦‚æœå¤šå¹´åé€€ä¼‘çš„æˆ‘å›åˆ°å…¬å¸ï¼Œå‘ç°å¹´è½»æ—¶å€™æˆ‘å†™çš„ä»£ç æˆ–è€…åº“ä¾ç„¶åœ¨è¢«å¹¿æ³›çš„ä½¿ç”¨ï¼Œæˆ‘ä¼šç”±è¡·çš„æ¬£æ…°ã€‚ ä½œä¸ºä¸€åå¹´è½»çš„ç¨‹åºå‘˜ï¼Œæˆ‘è¿˜æƒ³åšå‡ºä¸€äº›å¾ˆé…·çš„äº§å“ï¼›è¿˜æƒ³åœ¨ Github ä¸Šå¼€æºä¸€äº›ç¨‹åºä¾›å¤§å®¶å‚è€ƒæˆ–è€…ä½¿ç”¨ï¼›æˆ‘è¿˜æƒ³å†å†™å‡ºä¸€æ®µæ®µä»£ç ï¼Œè®©å¾ˆå¤šäººçš„ä½“éªŒå› ä¸ºæˆ‘çš„å·¥ä½œè€Œä¸åŒã€‚ æå¼€å¤è€å¸ˆå‰æ®µæ—¶é—´åœ¨å“¥å¤§æ¼”è®²ã€‚çœ‹ç€ä»–æ€ç»´æ´»è·ƒï¼Œè·Ÿæ¯•ä¸šç”Ÿä»¬ç•…è°ˆäººå·¥æ™ºèƒ½ï¼Œæˆ‘ä¾ç„¶è§‰å¾—ä»–æ˜¯ä¸€ä½å¾ˆé…·çš„ç¨‹åºå‘˜ã€‚ä¹Ÿè®¸è¿™å°±æ˜¯ç¨‹åºå‘˜è¿™ä»½å·¥ä½œæ„ä¹‰çš„æ‰€åœ¨ï¼šæ•°åå¹´ä¹‹åï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥é€šè¿‡æŠ€æœ¯ç´§è·Ÿå¹´è½»äººçš„ä¸–ç•Œï¼Œè€Œå¹´è½»äººä¾ç„¶è§‰å¾—æˆ‘ä»¬æ˜¯ä¸€ç¾¤å¾ˆé…·çš„æå®¢ã€‚ æœ¬æ–‡æ˜¯æ•…èƒ¤é“é•¿ã€Šç¡…è°·é—®é“ã€‹ä¸“æ çš„å‘åˆŠè¯ï¼Œã€Šç¡…è°·é—®é“ã€‹æ ¸å¿ƒå†…å®¹æ˜¯å¯¹ç¾å›½æœ€æ–° iOS äº§å“ä»‹ç»çš„å’Œåˆ†æï¼›ç¡…è°·å…¬å¸å…ˆè¿›çš„ç®¡ç†æ–¹æ³•å’ŒèŒåœºä¹‹é“ï¼›ç§‘æŠ€è®ºå›å’Œå¤§ä¼šå¦‚ WWDCï¼ŒFacebook F8ï¼ŒGoogle IOçš„æ·±åº¦å›é¡¾ï¼›Facebookï¼ŒGoogleï¼ŒAmazonï¼ŒAppleç­‰ç¾å›½ä¸€æµäº’è”ç½‘å…¬å¸çš„ç§‘æŠ€åŠ¨æ€ã€‚","categories":[],"tags":[{"name":"Inspire","slug":"Inspire","permalink":"https://edward7zhang.github.io/tags/Inspire/"}]},{"title":"TensorFlow_Cifar_10","slug":"TensorFlow_Cifar10æµ‹è¯•æ•™ç¨‹","date":"2017-07-15T14:32:18.000Z","updated":"2018-04-27T08:14:28.081Z","comments":true,"path":"2017/07/15/TensorFlow_Cifar10æµ‹è¯•æ•™ç¨‹/","link":"","permalink":"https://edward7zhang.github.io/2017/07/15/TensorFlow_Cifar10æµ‹è¯•æ•™ç¨‹/","excerpt":"The examples of image recognition with the dataset CIFAR10 via tensorflow.1 CIFAR-10 æ•°æ®é›†CIFAR-10æ•°æ®é›†æ˜¯æœºå™¨å­¦ä¹ ä¸­çš„ä¸€ä¸ªé€šç”¨çš„ç”¨äºå›¾åƒè¯†åˆ«çš„åŸºç¡€æ•°æ®é›†ï¼Œå®˜ç½‘é“¾æ¥ä¸ºï¼šThe CIFAR-10 dataset cifar10","text":"The examples of image recognition with the dataset CIFAR10 via tensorflow.1 CIFAR-10 æ•°æ®é›†CIFAR-10æ•°æ®é›†æ˜¯æœºå™¨å­¦ä¹ ä¸­çš„ä¸€ä¸ªé€šç”¨çš„ç”¨äºå›¾åƒè¯†åˆ«çš„åŸºç¡€æ•°æ®é›†ï¼Œå®˜ç½‘é“¾æ¥ä¸ºï¼šThe CIFAR-10 dataset cifar10 ä¸‹è½½ä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯ï¼š version å°†å…¶è§£å‹åï¼ˆä»£ç ä¸­åŒ…å«è‡ªåŠ¨è§£å‹ä»£ç ï¼‰ï¼Œå†…å®¹ä¸ºï¼š cifar10 data2 2 æµ‹è¯•ä»£ç æµ‹è¯•ä»£ç å…¬å¸ƒåœ¨GitHubï¼šEdwardZhang ä¸»è¦ä»£ç åŠä½œç”¨ï¼š æ–‡ä»¶ ä½œç”¨ cifar10_input.py è¯»å–æœ¬åœ°æˆ–è€…åœ¨çº¿ä¸‹è½½CIFAR-10çš„äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼æ•°æ®é›† cifar10.py å»ºç«‹CIFAR-10çš„æ¨¡å‹ cifar10_train.py åœ¨CPUæˆ–GPUä¸Šè®­ç»ƒCIFAR-10çš„æ¨¡å‹ cifar10_multi_gpu_train.py åœ¨å¤šä¸ªGPUä¸Šè®­ç»ƒCIFAR-10çš„æ¨¡å‹ cifar10_eval.py è¯„ä¼°CIFAR-10æ¨¡å‹çš„é¢„æµ‹æ€§èƒ½ $ $ è¯¥éƒ¨åˆ†çš„ä»£ç ï¼Œä»‹ç»äº†å¦‚ä½•ä½¿ç”¨TensorFlowåœ¨CPUå’ŒGPUä¸Šè®­ç»ƒå’Œè¯„ä¼°å·ç§¯ç¥ç»ç½‘ç»œï¼ˆconvolutional neural network, CNNï¼‰ã€‚ ###3 ç›¸å…³ç½‘é¡µåŠæ•™ç¨‹æ›´åŠ è¯¦ç»†åœ°ä»‹ç»è¯´æ˜ï¼Œè¯·æµè§ˆç½‘é¡µï¼šConvolutional Neural Networks ä¸­æ–‡ç½‘ç«™æå®¢å­¦é™¢ä¹Ÿæœ‰è¯¥éƒ¨åˆ†çš„æ±‰è¯‘ç‰ˆï¼šå·ç§¯ç¥ç»ç½‘ç»œ ä»£ç æºè‡ªtensorflowå®˜ç½‘ï¼štensorflow/models/image/cifar10 4 ä»£ç ä¿®æ”¹è¯´æ˜GitHubå…¬å¸ƒä»£ç ç›¸å¯¹æºç ï¼Œä¸»è¦è¿›è¡Œäº†ä»¥ä¸‹ä¿®æ­£ï¼š cifar10.py 12345#indices = tf.reshape(tf.range(FLAGS.batch_size), [FLAGS.batch_size, 1])indices = tf.reshape(range(FLAGS.batch_size), [FLAGS.batch_size, 1])# orindices = tf.reshape(tf.range(0, FLAGS.batch_size, 1), [FLAGS.batch_size, 1]) æ­¤å¤„ï¼Œæºç ç¼–è¯‘æ—¶ä¼šå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š 1234 ... File \".../cifar10.py\", line 271, in loss indices = tf.reshape(tf.range(FLAGS.batch_size), [FLAGS.batch_size, 1])TypeError: range() takes at least 2 arguments (1 given) cifar10_input_test.py 123456#self.assertEqual(\"%s:%d\" % (filename, i), tf.compat.as_text(key))import compat as cp...self.assertEqual(\"%s:%d\" % (filename, i), cp.as_text(key)) ä¸ç„¶çš„è¯ï¼Œæˆ‘æµ‹è¯•çš„æ—¶å€™å°±ä¼šå‡ºç°è¿™çš„é”™è¯¯ï¼š 1AttributeError: 'module' object has no attribute 'compat' cifar10_train.pyå’Œcifar10_multi_gpu_train.py æºä»£ç é‡Œçš„æœ€å¤§è¿­ä»£æ¬¡æ•°max_stepsä¸º1000000ï¼Œå¦‚ä½¿ç”¨CPUè®­ç»ƒéœ€è¦å¥½å‡ ä¸ªå°æ—¶ï¼Œæ¨èå¤§å®¶ä½¿ç”¨GPUè®­ç»ƒï¼ŒGPUè®­ç»ƒç¯å¢ƒå®‰è£…æ•™ç¨‹ã€‚","categories":[],"tags":[{"name":"TensorFlow","slug":"TensorFlow","permalink":"https://edward7zhang.github.io/tags/TensorFlow/"},{"name":"Cifar-10","slug":"Cifar-10","permalink":"https://edward7zhang.github.io/tags/Cifar-10/"}]},{"title":"DeepLearning   æ€’å‘æ•™ç¨‹ï¼ï¼ï¼Ubuntu16.04ç³»ç»Ÿæ­å»ºTensorFlowGPU","slug":"DeepLearning   æ€’å‘æ•™ç¨‹ï¼ï¼ï¼Ubuntu16.04ç³»ç»Ÿæ­å»ºTensorFlowGPU","date":"2017-06-30T12:43:13.000Z","updated":"2018-04-27T08:09:27.378Z","comments":true,"path":"2017/06/30/DeepLearning   æ€’å‘æ•™ç¨‹ï¼ï¼ï¼Ubuntu16.04ç³»ç»Ÿæ­å»ºTensorFlowGPU/","link":"","permalink":"https://edward7zhang.github.io/2017/06/30/DeepLearning   æ€’å‘æ•™ç¨‹ï¼ï¼ï¼Ubuntu16.04ç³»ç»Ÿæ­å»ºTensorFlowGPU/","excerpt":"â€‹å¤§æ¦‚åœ¨ä¸€ä¸ªæœˆå‰å¼€å§‹æ¥è§¦æ¨¡å¼è¯†åˆ«ã€äººå·¥ç¥ç»ç½‘ç»œã€å›¾åƒè¯†åˆ«æ–¹å‘ã€‚ ä»Matlabå¼€å§‹ä¸€è¾¹ç†è§£ç¥ç»ç½‘ç»œå±‚ä¸€è¾¹çœ‹ä»£ç è·‘äº†æœ€åŸºç¡€çš„MNISTè¯†åˆ«æ‰‹å†™æ•°å­—çš„ä»£ç ï¼Œä¸­é—´é‡åˆ°äº†å¾ˆå¤šé—®é¢˜ï¼Œæ¯”å¦‚è¯´åœ¨å›¾åƒå¤„ç†æ–¹é¢CPUè¿œä¸åŠGPUå¼ºè€Œåœ¨IOè¯»å†™ä¸ŠCPUåˆå¾ˆå ä¼˜åŠ¿ã€‚å½“æˆ‘åœ¨è¿›ä¸€æ­¥å­¦ä¹ å·ç§¯ç¥ç»ç½‘ç»œçš„è¿‡ç¨‹ä¸­å‘ç°äº†Matlabçš„å¼ºå¤§å’Œä¸è¶³ã€‚åœ¨ä¸¤å¹´å‰Googleçˆ¸çˆ¸å‡ºå“äº†TensorFlowè¿™ä¸€æ·±åº¦å­¦ä¹ å¼€æºæ¡†æ¶ã€‚å†ç»2å¤©1å¤œ13æ¬¡é‡è£…ç³»ç»Ÿã€‚ã€‚ã€‚æ‰€ä»¥ä¸ºä»€ä¹ˆè¦æ€’å‘æ•™ç¨‹ï¼Œä½ æ‡‚çš„ã€‚è¯ä¸å¤šè¯´ç›´æ¥å¼€é…ï¼ requirements Ubuntu-16.04 python-2.7 cuda-8 cuDNN-5.1 tensorflow GPU ç‰ˆæœ¬","text":"â€‹å¤§æ¦‚åœ¨ä¸€ä¸ªæœˆå‰å¼€å§‹æ¥è§¦æ¨¡å¼è¯†åˆ«ã€äººå·¥ç¥ç»ç½‘ç»œã€å›¾åƒè¯†åˆ«æ–¹å‘ã€‚ ä»Matlabå¼€å§‹ä¸€è¾¹ç†è§£ç¥ç»ç½‘ç»œå±‚ä¸€è¾¹çœ‹ä»£ç è·‘äº†æœ€åŸºç¡€çš„MNISTè¯†åˆ«æ‰‹å†™æ•°å­—çš„ä»£ç ï¼Œä¸­é—´é‡åˆ°äº†å¾ˆå¤šé—®é¢˜ï¼Œæ¯”å¦‚è¯´åœ¨å›¾åƒå¤„ç†æ–¹é¢CPUè¿œä¸åŠGPUå¼ºè€Œåœ¨IOè¯»å†™ä¸ŠCPUåˆå¾ˆå ä¼˜åŠ¿ã€‚å½“æˆ‘åœ¨è¿›ä¸€æ­¥å­¦ä¹ å·ç§¯ç¥ç»ç½‘ç»œçš„è¿‡ç¨‹ä¸­å‘ç°äº†Matlabçš„å¼ºå¤§å’Œä¸è¶³ã€‚åœ¨ä¸¤å¹´å‰Googleçˆ¸çˆ¸å‡ºå“äº†TensorFlowè¿™ä¸€æ·±åº¦å­¦ä¹ å¼€æºæ¡†æ¶ã€‚å†ç»2å¤©1å¤œ13æ¬¡é‡è£…ç³»ç»Ÿã€‚ã€‚ã€‚æ‰€ä»¥ä¸ºä»€ä¹ˆè¦æ€’å‘æ•™ç¨‹ï¼Œä½ æ‡‚çš„ã€‚è¯ä¸å¤šè¯´ç›´æ¥å¼€é…ï¼ requirements Ubuntu-16.04 python-2.7 cuda-8 cuDNN-5.1 tensorflow GPU ç‰ˆæœ¬ å®‰è£…nvidia driver ç»è¿‡ä¸æ–­è¸©å‘çš„å®‰è£…ï¼Œç»ˆäºgoogleåˆ°äº†é è°±çš„æ–¹æ³•ï¼Œé¦–å…ˆæ£€æŸ¥ä½ çš„NVIDIA VGA card model Ctrl+Alt+T æ‰“å¼€ç»ˆç«¯ è¾“å…¥ï¼š 1sudo lshw -numeric -C display å¯ä»¥çœ‹åˆ°ä½ çš„æ˜¾å¡ä¿¡æ¯ï¼Œæ¯”å¦‚æˆ‘çš„å°±æ˜¯ product: GM107M [GeForce GTX 960M] [10DE:139B] æ‰¾åˆ° ç³»ç»Ÿè®¾ç½®-&gt;è½¯ä»¶æ›´æ–°-&gt;é™„åŠ é©±åŠ¨ æŸ¥çœ‹å’Œä¸Šé¢GPUå‹å·ç›¸å¯¹åº”çš„æ˜¾å¡ é€‰æ‹©æœ€æ–°çš„æ˜¾å¡é©±åŠ¨å¹¶ç‚¹å‡»åº”ç”¨æ›´æ”¹ ç„¶åå–æ¯å’–å•¡é™å€™åº”ç”¨æ›´æ”¹å®Œæˆ è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š 1sudo apt-get install mesa-common-devsudo apt-get install freeglut3-dev å®‰è£…å®Œæˆä¹‹åï¼Œé‡å¯ç”µè„‘ï¼Œé©±åŠ¨åº”è¯¥å°±å®Œæˆäº†ï¼ ä½ å¯ä»¥åœ¨dashboardä¸Šæœç´¢nvidia çœ‹åˆ°åƒ NVIDIA X Server Settingsçš„ä¸œè¥¿ å°±è¯´æ˜å®‰è£…é©±åŠ¨æˆåŠŸäº† æ¥ä¸‹æ¥å°±è¯¥å®‰è£…cuda8 å®‰è£…cuda8é¦–å…ˆä¹Ÿæ˜¯å»ä¸‹è½½cuda toolkit 8.0 è€é“ï¼çœ‹æˆ‘çš„æ•™ç¨‹å°±æŒ‰æˆ‘çš„æ¥ï¼ç…§ç€å›¾å¥½å¥½é€‰ï¼ ä¸€å®šè¦é€‰æ‹©runfile.ä¸‹è½½å®Œæˆä¹‹åï¼Œæ‰§è¡Œ 1sudo sh cuda_8.0.44_linux.run ç„¶åå°±è¿›å…¥å®‰è£…è¿‡ç¨‹ å¼€å§‹éƒ½æ˜¯End User License Agreement ä½ å¯ä»¥CTRL +C è·³è¿‡ ç„¶åacceptï¼Œä¸‹é¢å°±æ˜¯å®‰è£…çš„äº¤äº’ç•Œé¢ å¼€å§‹çš„Install NVIDIA Accelerated Graphics Driver for Linux-x86_64 375.66? é€‰æ‹©nï¼Œå› ä¸ºä½ å·²ç»å®‰è£…é©±åŠ¨äº†ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869Using more to view the EULA.End User License AgreementPrefaceThe following contains specific license terms and conditionsfor four separate NVIDIA products. By accepting thisagreement, you agree to comply with all the terms andconditions applicable to the specific product(s) includedherein.NVIDIA CUDA ToolkitDescriptionThe NVIDIA CUDA Toolkit provides command-line and graphicaltools for building, debugging and optimizing the performanceof applications accelerated by NVIDIA GPUs, runtime and mathlibraries, and documentation including programming guides,user manuals, and API references. The NVIDIA CUDA ToolkitLicense Agreement is available in Chapter 1.Default Install Location of CUDA ToolkitWindows platform:Do you accept the previously read EULA?accept/decline/quit: acceptInstall NVIDIA Accelerated Graphics Driver for Linux-x86_64 367.48?(y)es/(n)o/(q)uit: nInstall the CUDA 8.0 Toolkit?(y)es/(n)o/(q)uit: yEnter Toolkit Location [ default is /usr/local/cuda-8.0 ]: Do you want to install a symbolic link at /usr/local/cuda?(y)es/(n)o/(q)uit: yInstall the CUDA 8.0 Samples?(y)es/(n)o/(q)uit: y Enter CUDA Samples Location [ default is /home/kinny ]: Installing the CUDA Toolkit in /usr/local/cuda-8.0 ...Missing recommended library: libXmu.soInstalling the CUDA Samples in /home/kinny ...Copying samples to /home/kinny/NVIDIA_CUDA-8.0_Samples now...Finished copying samples.============ Summary ============Driver: Not SelectedToolkit: Installed in /usr/local/cuda-8.0Samples: Installed in /home/kinny, but missing recommended librariesPlease make sure that - PATH includes /usr/local/cuda-8.0/bin - LD_LIBRARY_PATH includes /usr/local/cuda-8.0/lib64, or, add /usr/local/cuda-8.0/lib64 to /etc/ld.so.conf and run ldconfig as rootTo uninstall the CUDA Toolkit, run the uninstall script in /usr/local/cuda-8.0/binPlease see CUDA_Installation_Guide_Linux.pdf in /usr/local/cuda-8.0/doc/pdf for detailed information on setting up CUDA.***WARNING: Incomplete installation! This installation did not install the CUDA Driver. A driver of version at least 361.00 is required for CUDA 8.0 functionality to work.To install the driver using this installer, run the following command, replacing &lt;CudaInstaller&gt; with the name of this run file: sudo &lt;CudaInstaller&gt;.run -silent -driverLogfile is /tmp/cuda_install_17494.log é…ç½®cudaç¯å¢ƒå˜é‡1export PATH=&quot;$PATH:/usr/local/cuda-8.0/bin&quot;export LD_LIBRARY_PATH=&quot;/usr/local/cuda-8.0/lib64&quot;nvidia-smi ç»“æœå‡ºç°ä»¥ä¸‹è¾“å‡ºï¼Œè¯´æ˜é…ç½®æˆåŠŸ å®‰è£…æ·±åº¦å­¦ä¹ åº“cuDNN-v5.1é¦–å…ˆä¸‹è½½cuDNN5.1ï¼Œç›´æ¥ä¸‹è½½ï¼Œæ³¨æ„å‰ææ˜¯ä½ å·²ç»æ³¨å†Œä¸ºå¼€å‘è€…äº†ï¼ è§£å‹ï¼š 1tar xvzf cudnn-8.0-linux-x64-v5.1.tgz ç„¶åå°†åº“å¤´æ–‡ä»¶Copyåˆ°cudaç›®å½• 123sudo cp cuda/include/cudnn.h /usr/local/cuda/includesudo cp cuda/lib64/libcudnn* /usr/local/cuda/lib64sudo chmod a+r /usr/local/cuda/include/cudnn.h /usr/local/cuda/lib64/libcudnn* å®‰è£…tensorflow gpu enable python 2.7 ç‰ˆæœ¬ï¼Œè¯¦è§å®˜ç½‘123456789101112131415export TF_BINARY_URL=https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.11.0-cp27-none-linux_x86_64.whlsudo pip install --upgrade $TF_BINARY_URLéªŒè¯$python Python 2.7.12 (default, Jul 1 2016, 15:12:24) [GCC 5.4.0 20160609] on linux2Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.&gt;&gt;&gt; import tensorflowI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcublas.so locallyI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcudnn.so locallyI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcufft.so locallyI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcuda.so.1 locallyI tensorflow/stream_executor/dso_loader.cc:111] successfully opened CUDA library libcurand.so locally&gt;&gt;&gt; quit()å¤§åŠŸå‘Šæˆï¼ å…¨éƒ¨ç»“æŸ è°¢è°¢è§‚çœ‹ï¼ ç°åœ¨å°±å¯ä»¥æ”¾å¿ƒçš„å¼€å§‹ä½ çš„æ·±åº¦å­¦ä¹ ä¹‹è·¯äº† ä¸è¦è§‰å¾—å¥½å®¹æ˜“ã€‚ã€‚ã€‚éƒ½æ˜¯å‡ åéè¡€çš„æ•™è®­æˆå°±çš„ï¼ ä¹‹åæˆ‘ä¼šç»§ç»­æ›´æ–°ä¸ªäººå…¬ä¼—å·ï¼Œå‘å¸ƒä¸€äº›è‡ªå·±åœ¨æ·±åº¦å­¦ä¹ æ–¹é¢çš„è§é—»ã€‚ CreatedbyEdwardZhangâˆ£ä¸€ä¸ªä¸åªåšæŠ€æœ¯çš„å…¬ä¼—å· é•¿æŒ‰ï¼Œè¯†åˆ«äºŒç»´ç ï¼ŒåŠ å…³æ³¨ 0.gif","categories":[],"tags":[{"name":"DeepLearning","slug":"DeepLearning","permalink":"https://edward7zhang.github.io/tags/DeepLearning/"}]},{"title":"Android Chapter III.   Androidå››å¤§ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ","slug":"Android Chapter III.   Androidå››å¤§ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ","date":"2017-06-11T12:43:13.000Z","updated":"2017-09-15T09:38:53.214Z","comments":true,"path":"2017/06/11/Android Chapter III.   Androidå››å¤§ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ/","link":"","permalink":"https://edward7zhang.github.io/2017/06/11/Android Chapter III.   Androidå››å¤§ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ/","excerpt":"â€‹Hello everybody,ä¸Šä¸€æ¬¡æˆ‘ä»¬è®²å®Œäº†Androidå››å¤§ç»„ä»¶é‚£ä¹ˆä¼´éšå››å¤§ç»„ä»¶å¿…ä¸å¯å°‘çš„å°±æ˜¯ä»–ä»¬çš„ç”Ÿå‘½å‘¨æœŸäº†ï¼Œé‚£ä¹ˆä»Šå¤©æˆ‘ä»¬å°±å†å¨å¨ç”Ÿå‘½å‘¨æœŸçš„ä¸‰ä¸¤äº‹å§ã€‚ ä»‹ç»ç”Ÿå‘½å‘¨æœŸä¹‹å‰ï¼Œå…ˆæä¸€ä¸‹ä»»åŠ¡çš„æ¦‚å¿µ ä»»åŠ¡å…¶å®å°±æ˜¯activity çš„æ ˆå®ƒç”±ä¸€ä¸ªæˆ–å¤šä¸ªActivityç»„æˆçš„å…±åŒå®Œæˆä¸€ä¸ªå®Œæ•´çš„ç”¨æˆ·ä½“éªŒï¼Œ æ¢å¥è¯è¯´ä»»åŠ¡å°±æ˜¯â€ åº”ç”¨ç¨‹åºâ€ ï¼ˆå¯ä»¥æ˜¯ä¸€ä¸ªä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªï¼Œæ¯”å¦‚å‡è®¾ä½ æƒ³è®©ç”¨æˆ·çœ‹åˆ°æŸä¸ªåœ°æ–¹çš„è¡—é“åœ°å›¾ã€‚è€Œå·²ç»å­˜åœ¨ä¸€ä¸ªå…·æœ‰æ­¤åŠŸèƒ½çš„activity äº†ï¼Œé‚£ä¹ˆä½ çš„activity æ‰€éœ€è¦åšçš„å·¥ä½œå°±æ˜¯æŠŠè¯·æ±‚ä¿¡æ¯æ”¾åˆ°ä¸€ä¸ªIntent å¯¹è±¡é‡Œé¢ï¼Œå¹¶æŠŠå®ƒä¼ é€’ç»™startActivity()ã€‚äºæ˜¯åœ°å›¾æµè§ˆå™¨å°±ä¼šæ˜¾ç¤ºé‚£ä¸ªåœ°å›¾ã€‚è€Œå½“ç”¨æˆ·æŒ‰ä¸‹BACK é”®çš„æ—¶å€™ï¼Œä½ çš„activity åˆä¼šå†ä¸€æ¬¡çš„æ˜¾ç¤ºåœ¨å±å¹•ä¸Šï¼Œæ­¤æ—¶ä»»åŠ¡æ˜¯ç”±2ä¸ªåº”ç”¨ç¨‹åºä¸­çš„ç›¸å…³activityç»„æˆçš„ï¼‰æ ˆåº•çš„æ˜¯å¯åŠ¨æ•´ä¸ªä»»åŠ¡çš„Activityï¼Œæ ˆé¡¶çš„æ˜¯å½“å‰è¿è¡Œçš„ç”¨æˆ·å¯ä»¥äº¤äº’çš„Activityï¼Œå½“ä¸€ä¸ªactivity å¯åŠ¨å¦å¤–ä¸€ä¸ªçš„æ—¶å€™ï¼Œæ–°çš„activity å°±è¢«å‹å…¥æ ˆï¼Œå¹¶æˆä¸ºå½“å‰è¿è¡Œçš„activityã€‚è€Œå‰ä¸€ä¸ªactivity ä»ä¿æŒåœ¨æ ˆä¹‹ä¸­ã€‚å½“ç”¨æˆ·æŒ‰ä¸‹BACK é”®çš„æ—¶å€™ï¼Œå½“å‰activity å‡ºæ ˆï¼Œè€Œå‰ä¸€ä¸ªæ¢å¤ä¸ºå½“å‰è¿è¡Œçš„activityã€‚æ ˆä¸­ä¿å­˜çš„å…¶å®æ˜¯å¯¹è±¡ï¼Œæ ˆä¸­çš„Activity æ°¸è¿œä¸ä¼šé‡æ’ï¼Œåªä¼šå‹å…¥æˆ–å¼¹å‡ºï¼Œæ‰€ä»¥å¦‚æœå‘ç”Ÿäº†è¯¸å¦‚éœ€è¦å¤šä¸ªåœ°å›¾æµè§ˆå™¨çš„æƒ…å†µï¼Œå°±ä¼šä½¿å¾—ä¸€ä¸ªä»»åŠ¡ä¸­å‡ºç°å¤šä¸ªåŒä¸€Activity å­ç±»çš„å®ä¾‹åŒæ—¶å­˜åœ¨ã€‚","text":"â€‹Hello everybody,ä¸Šä¸€æ¬¡æˆ‘ä»¬è®²å®Œäº†Androidå››å¤§ç»„ä»¶é‚£ä¹ˆä¼´éšå››å¤§ç»„ä»¶å¿…ä¸å¯å°‘çš„å°±æ˜¯ä»–ä»¬çš„ç”Ÿå‘½å‘¨æœŸäº†ï¼Œé‚£ä¹ˆä»Šå¤©æˆ‘ä»¬å°±å†å¨å¨ç”Ÿå‘½å‘¨æœŸçš„ä¸‰ä¸¤äº‹å§ã€‚ ä»‹ç»ç”Ÿå‘½å‘¨æœŸä¹‹å‰ï¼Œå…ˆæä¸€ä¸‹ä»»åŠ¡çš„æ¦‚å¿µ ä»»åŠ¡å…¶å®å°±æ˜¯activity çš„æ ˆå®ƒç”±ä¸€ä¸ªæˆ–å¤šä¸ªActivityç»„æˆçš„å…±åŒå®Œæˆä¸€ä¸ªå®Œæ•´çš„ç”¨æˆ·ä½“éªŒï¼Œ æ¢å¥è¯è¯´ä»»åŠ¡å°±æ˜¯â€ åº”ç”¨ç¨‹åºâ€ ï¼ˆå¯ä»¥æ˜¯ä¸€ä¸ªä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªï¼Œæ¯”å¦‚å‡è®¾ä½ æƒ³è®©ç”¨æˆ·çœ‹åˆ°æŸä¸ªåœ°æ–¹çš„è¡—é“åœ°å›¾ã€‚è€Œå·²ç»å­˜åœ¨ä¸€ä¸ªå…·æœ‰æ­¤åŠŸèƒ½çš„activity äº†ï¼Œé‚£ä¹ˆä½ çš„activity æ‰€éœ€è¦åšçš„å·¥ä½œå°±æ˜¯æŠŠè¯·æ±‚ä¿¡æ¯æ”¾åˆ°ä¸€ä¸ªIntent å¯¹è±¡é‡Œé¢ï¼Œå¹¶æŠŠå®ƒä¼ é€’ç»™startActivity()ã€‚äºæ˜¯åœ°å›¾æµè§ˆå™¨å°±ä¼šæ˜¾ç¤ºé‚£ä¸ªåœ°å›¾ã€‚è€Œå½“ç”¨æˆ·æŒ‰ä¸‹BACK é”®çš„æ—¶å€™ï¼Œä½ çš„activity åˆä¼šå†ä¸€æ¬¡çš„æ˜¾ç¤ºåœ¨å±å¹•ä¸Šï¼Œæ­¤æ—¶ä»»åŠ¡æ˜¯ç”±2ä¸ªåº”ç”¨ç¨‹åºä¸­çš„ç›¸å…³activityç»„æˆçš„ï¼‰æ ˆåº•çš„æ˜¯å¯åŠ¨æ•´ä¸ªä»»åŠ¡çš„Activityï¼Œæ ˆé¡¶çš„æ˜¯å½“å‰è¿è¡Œçš„ç”¨æˆ·å¯ä»¥äº¤äº’çš„Activityï¼Œå½“ä¸€ä¸ªactivity å¯åŠ¨å¦å¤–ä¸€ä¸ªçš„æ—¶å€™ï¼Œæ–°çš„activity å°±è¢«å‹å…¥æ ˆï¼Œå¹¶æˆä¸ºå½“å‰è¿è¡Œçš„activityã€‚è€Œå‰ä¸€ä¸ªactivity ä»ä¿æŒåœ¨æ ˆä¹‹ä¸­ã€‚å½“ç”¨æˆ·æŒ‰ä¸‹BACK é”®çš„æ—¶å€™ï¼Œå½“å‰activity å‡ºæ ˆï¼Œè€Œå‰ä¸€ä¸ªæ¢å¤ä¸ºå½“å‰è¿è¡Œçš„activityã€‚æ ˆä¸­ä¿å­˜çš„å…¶å®æ˜¯å¯¹è±¡ï¼Œæ ˆä¸­çš„Activity æ°¸è¿œä¸ä¼šé‡æ’ï¼Œåªä¼šå‹å…¥æˆ–å¼¹å‡ºï¼Œæ‰€ä»¥å¦‚æœå‘ç”Ÿäº†è¯¸å¦‚éœ€è¦å¤šä¸ªåœ°å›¾æµè§ˆå™¨çš„æƒ…å†µï¼Œå°±ä¼šä½¿å¾—ä¸€ä¸ªä»»åŠ¡ä¸­å‡ºç°å¤šä¸ªåŒä¸€Activity å­ç±»çš„å®ä¾‹åŒæ—¶å­˜åœ¨ã€‚ ä»»åŠ¡ä¸­çš„æ‰€æœ‰activity æ˜¯ä½œä¸ºä¸€ä¸ªæ•´ä½“è¿›è¡Œç§»åŠ¨çš„ã€‚æ•´ä¸ªçš„ä»»åŠ¡ï¼ˆå³activity æ ˆï¼‰å¯ä»¥ç§»åˆ°å‰å°ï¼Œæˆ–é€€è‡³åå°ã€‚ä¸¾ä¸ªä¾‹å­è¯´ï¼Œæ¯”å¦‚å½“å‰ä»»åŠ¡åœ¨æ ˆä¸­å­˜æœ‰å››ä¸ªactivityâ”€â”€ä¸‰ä¸ªåœ¨å½“å‰activity ä¹‹ä¸‹ã€‚å½“ç”¨æˆ·æŒ‰ä¸‹HOME é”®çš„æ—¶å€™ï¼Œå›åˆ°äº†åº”ç”¨ç¨‹åºåŠ è½½å™¨ï¼Œç„¶åé€‰æ‹©äº†ä¸€ä¸ªæ–°çš„åº”ç”¨ç¨‹åºï¼ˆä¹Ÿå°±æ˜¯ä¸€ä¸ªæ–°ä»»åŠ¡ï¼‰ã€‚åˆ™å½“å‰ä»»åŠ¡éå…¥åå°ï¼Œè€Œæ–°ä»»åŠ¡çš„æ ¹activity æ˜¾ç¤ºå‡ºæ¥ã€‚ç„¶åï¼Œè¿‡äº†ä¸€å°ä¼šå„¿ï¼Œç”¨æˆ·å†æ¬¡å›åˆ°äº†åº”ç”¨ç¨‹åºåŠ è½½å™¨è€Œåˆé€‰æ‹©äº†å‰ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼ˆä¸Šä¸€ä¸ªä»»åŠ¡ï¼‰ã€‚äºæ˜¯é‚£ä¸ªä»»åŠ¡ï¼Œå¸¦ç€å®ƒæ ˆä¸­æ‰€æœ‰çš„å››ä¸ªactivityï¼Œå†ä¸€æ¬¡çš„åˆ°äº†å‰å°ã€‚å½“ç”¨æˆ·æŒ‰ä¸‹BACK é”®çš„æ—¶å€™ï¼Œå±å¹•ä¸ä¼šæ˜¾ç¤ºå‡ºç”¨æˆ·åˆšæ‰ç¦»å¼€çš„activityï¼ˆä¸Šä¸€ä¸ªä»»åŠ¡çš„æ ¹activityï¼‰ã€‚å–è€Œä»£ä¹‹ï¼Œå½“å‰ä»»åŠ¡çš„æ ˆä¸­æœ€ä¸Šé¢çš„activity è¢«å¼¹å‡ºï¼Œè€ŒåŒä¸€ä»»åŠ¡ä¸­çš„ä¸Šä¸€ä¸ªactivity æ˜¾ç¤ºäº†å‡ºæ¥ã€‚ Activityæ ˆï¼šå…ˆè¿›åå‡ºè§„åˆ™ Androidç³»ç»Ÿæ˜¯ä¸€ä¸ªå¤šä»»åŠ¡(Multi-Task)çš„æ“ä½œç³»ç»Ÿï¼Œå¯ä»¥åœ¨ç”¨æ‰‹æœºå¬éŸ³ä¹çš„åŒæ—¶ï¼Œä¹Ÿæ‰§è¡Œå…¶ä»–å¤šä¸ªç¨‹åºã€‚æ¯å¤šæ‰§è¡Œä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå°±ä¼šå¤šè€—è´¹ä¸€äº›ç³»ç»Ÿå†…å­˜ï¼Œå½“åŒæ—¶æ‰§è¡Œçš„ç¨‹åºè¿‡å¤šï¼Œæˆ–æ˜¯å…³é—­çš„ç¨‹åºæ²¡æœ‰æ­£ç¡®é‡Šæ”¾æ‰å†…å­˜ï¼Œç³»ç»Ÿå°±ä¼šè§‰å¾—è¶Šæ¥è¶Šæ…¢ï¼Œç”šè‡³ä¸ç¨³å®šã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ Android å¼•å…¥äº†ä¸€ä¸ªæ–°çš„æœºåˆ¶â€“ ç”Ÿå‘½å‘¨æœŸ(Life Cycle)ã€‚ Android åº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸæ˜¯ç”±Android æ¡†æ¶è¿›è¡Œç®¡ç†ï¼Œè€Œä¸æ˜¯ç”±åº”ç”¨ç¨‹åºç›´æ¥æ§ åˆ¶ã€‚é€šå¸¸ï¼Œæ¯ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼ˆå…¥å£ä¸€èˆ¬ä¼šæ˜¯ä¸€ä¸ªActivity çš„onCreate æ–¹æ³•ï¼‰ï¼Œéƒ½ä¼šäº§ç”Ÿ ä¸€ä¸ªè¿›ç¨‹(Process)ã€‚å½“ç³»ç»Ÿå†…å­˜å³å°†ä¸è¶³çš„æ—¶å€™ï¼Œä¼šä¾ç…§ä¼˜å…ˆçº§è‡ªåŠ¨è¿›è¡Œè¿›ç¨‹(process)çš„å›æ”¶ã€‚ä¸ç®¡æ˜¯ä½¿ç”¨è€…æˆ–å¼€å‘è€…ï¼Œ éƒ½æ— æ³•ç¡®å®šçš„åº”ç”¨ç¨‹åºä½•æ—¶ä¼šè¢«å›æ”¶ã€‚æ‰€ä»¥ä¸ºäº†å¾ˆå¥½çš„é˜²æ­¢æ•°æ®ä¸¢å¤±å’Œå…¶ä»–é—®é¢˜ï¼Œäº†è§£ç”Ÿå‘½å‘¨æœŸå¾ˆé‡è¦ã€‚ Activityç”Ÿå‘½å‘¨æœŸï¼š å›¾3.1activityç”Ÿå‘½å‘¨æœŸå›¾ Activityæ•´ä¸ªç”Ÿå‘½å‘¨æœŸçš„4ç§çŠ¶æ€ã€7ä¸ªé‡è¦æ–¹æ³•å’Œ3ä¸ªåµŒå¥—å¾ªç¯ 1&gt; å››ç§çŠ¶æ€ æ´»åŠ¨ï¼ˆActive/Runningï¼‰çŠ¶æ€ å½“Activityè¿è¡Œåœ¨å±å¹•å‰å°(å¤„äºå½“å‰ä»»åŠ¡æ´»åŠ¨æ ˆçš„æœ€ä¸Šé¢),æ­¤æ—¶å®ƒè·å–äº†ç„¦ç‚¹èƒ½å“åº”ç”¨æˆ·çš„æ“ä½œ,å±äºè¿è¡ŒçŠ¶æ€ï¼ŒåŒä¸€ä¸ªæ—¶åˆ»åªä¼šæœ‰ä¸€ä¸ªActivity å¤„äºæ´»åŠ¨(Active)æˆ–è¿è¡Œ (Running)çŠ¶æ€ æš‚åœ(Paused)çŠ¶æ€ å½“Activityå¤±å»ç„¦ç‚¹ä½†ä»å¯¹ç”¨æˆ·å¯è§(å¦‚åœ¨å®ƒä¹‹ä¸Šæœ‰å¦ä¸€ä¸ªé€æ˜çš„Activityæˆ–Toastã€AlertDialogç­‰å¼¹å‡ºçª—å£æ—¶)å®ƒå¤„äºæš‚åœçŠ¶æ€ã€‚æš‚åœçš„Activityä»ç„¶æ˜¯å­˜æ´»çŠ¶æ€(å®ƒä¿ç•™ç€æ‰€æœ‰çš„çŠ¶æ€å’Œæˆå‘˜ä¿¡æ¯å¹¶ä¿æŒå’Œçª—å£ç®¡ç†å™¨çš„è¿æ¥),ä½†æ˜¯å½“ç³»ç»Ÿå†…å­˜æå°æ—¶å¯ä»¥è¢«ç³»ç»Ÿæ€æ‰ åœæ­¢(Stopped)çŠ¶æ€ å®Œå…¨è¢«å¦ä¸€ä¸ªActivityé®æŒ¡æ—¶å¤„äºåœæ­¢çŠ¶æ€,å®ƒä»ç„¶ä¿ç•™ç€æ‰€æœ‰çš„çŠ¶æ€å’Œæˆå‘˜ä¿¡æ¯ã€‚åªæ˜¯å¯¹ç”¨æˆ·ä¸å¯è§,å½“å…¶ä»–åœ°æ–¹éœ€è¦å†…å­˜æ—¶å®ƒå¾€å¾€è¢«ç³»ç»Ÿæ€æ‰ éæ´»åŠ¨ï¼ˆDeadï¼‰çŠ¶æ€ Activity å°šæœªè¢«å¯åŠ¨ã€å·²ç»è¢«æ‰‹åŠ¨ç»ˆæ­¢ï¼Œæˆ–å·²ç»è¢«ç³»ç»Ÿå›æ”¶æ—¶å¤„äºéæ´»åŠ¨çš„çŠ¶æ€ï¼Œè¦æ‰‹åŠ¨ç»ˆæ­¢Activityï¼Œå¯ä»¥åœ¨ç¨‹åºä¸­è°ƒç”¨â€finishâ€æ–¹æ³•ã€‚ å¦‚æœæ˜¯ï¼ˆæŒ‰æ ¹æ®å†…å­˜ä¸è¶³æ—¶çš„å›æ”¶è§„åˆ™ï¼‰è¢«ç³»ç»Ÿå›æ”¶ï¼Œå¯èƒ½æ˜¯å› ä¸ºå†…å­˜ä¸è¶³äº† å†…å­˜ä¸è¶³æ—¶ï¼ŒDalvak è™šæ‹Ÿæœºä¼šæ ¹æ®å…¶å†…å­˜å›æ”¶è§„åˆ™æ¥å›æ”¶å†…å­˜ï¼š 1. å…ˆå›æ”¶ä¸å…¶ä»–Activity æˆ–Service/Intent Receiver æ— å…³çš„è¿›ç¨‹(å³ä¼˜å…ˆå›æ”¶ç‹¬ç«‹çš„Activity)å› æ­¤å»ºè®®,æˆ‘ä»¬çš„ä¸€äº›(è€—æ—¶)åå°æ“ä½œï¼Œæœ€å¥½æ˜¯ä½œæˆServiceçš„å½¢å¼ 2.ä¸å¯è§(å¤„äºStoppedçŠ¶æ€çš„)Activity 3.Serviceè¿›ç¨‹(é™¤éçœŸçš„æ²¡æœ‰å†…å­˜å¯ç”¨æ—¶ä¼šè¢«é”€æ¯) 4.éæ´»åŠ¨çš„å¯è§çš„(PausedçŠ¶æ€çš„)Activity 5.å½“å‰æ­£åœ¨è¿è¡Œï¼ˆActive/RunningçŠ¶æ€çš„ï¼‰Activity 2&gt; 7ä¸ªé‡è¦æ–¹æ³•,å½“Activityä»ä¸€ç§çŠ¶æ€è¿›å…¥å¦ä¸€çŠ¶æ€æ—¶ç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨ä¸‹é¢ç›¸åº”çš„æ–¹ æ³•æ¥é€šçŸ¥ç”¨æˆ·è¿™ç§å˜åŒ– å½“Activityç¬¬ä¸€æ¬¡è¢«å®ä¾‹åŒ–çš„æ—¶å€™ç³»ç»Ÿä¼šè°ƒç”¨, æ•´ä¸ªç”Ÿå‘½å‘¨æœŸåªè°ƒç”¨1æ¬¡è¿™ä¸ªæ–¹æ³• é€šå¸¸ç”¨äºåˆå§‹åŒ–è®¾ç½®: 1ã€ä¸ºActivityè®¾ç½®æ‰€è¦ä½¿ç”¨çš„å¸ƒå±€æ–‡ä»¶2ã€ä¸ºæŒ‰é’®ç»‘å®šç›‘å¬å™¨ç­‰é™æ€çš„è®¾ç½®æ“ä½œ onCreate(Bundle savedInstanceState); å½“Activityå¯è§æœªè·å¾—ç”¨æˆ·ç„¦ç‚¹ä¸èƒ½äº¤äº’æ—¶ç³»ç»Ÿä¼šè°ƒç”¨ onStart(); å½“Activityå·²ç»åœæ­¢ç„¶åé‡æ–°è¢«å¯åŠ¨æ—¶ç³»ç»Ÿä¼šè°ƒç”¨ onRestart(); å½“Activityå¯è§ä¸”è·å¾—ç”¨æˆ·ç„¦ç‚¹èƒ½äº¤äº’æ—¶ç³»ç»Ÿä¼šè°ƒç”¨ onResume(); å½“ç³»ç»Ÿå¯åŠ¨å¦å¤–ä¸€ä¸ªæ–°çš„Activityæ—¶,åœ¨æ–°Activityå¯åŠ¨ä¹‹å‰è¢«ç³»ç»Ÿè°ƒç”¨ä¿å­˜ç°æœ‰çš„Activityä¸­çš„æŒä¹…æ•°æ®ã€åœæ­¢åŠ¨ç”»ç­‰,è¿™ä¸ªå®ç°æ–¹æ³•å¿…é¡»éå¸¸å¿«ã€‚å½“ç³»ç»Ÿè€Œä¸æ˜¯ç”¨æˆ·è‡ªå·±å‡ºäºå›æ”¶å†…å­˜æ—¶ï¼Œå…³é—­äº†activity ä¹‹åã€‚ç”¨æˆ·ä¼šæœŸæœ›å½“ä»–å†æ¬¡å›åˆ°è¿™ä¸ªactivity çš„æ—¶å€™ï¼Œå®ƒä»ä¿æŒç€ä¸Šæ¬¡ç¦»å¼€æ—¶çš„æ ·å­ã€‚æ­¤æ—¶ç”¨åˆ°äº†onSaveInstanceState()ï¼Œæ–¹æ³•onSaveInstanceState()ç”¨æ¥ä¿å­˜Activityè¢«æ€ä¹‹å‰çš„çŠ¶æ€,åœ¨onPause()ä¹‹å‰è¢«è§¦å‘,å½“ç³»ç»Ÿä¸ºäº†èŠ‚çœå†…å­˜é”€æ¯äº†Activity(ç”¨æˆ·æœ¬ä¸æƒ³é”€æ¯)æ—¶å°±éœ€è¦é‡å†™è¿™ä¸ªæ–¹æ³•äº†,å½“æ­¤Activityå†æ¬¡è¢«å®ä¾‹åŒ–æ—¶ä¼šé€šè¿‡onCreate(Bundle savedInstanceState)å°†å·²ç»ä¿å­˜çš„ä¸´æ—¶çŠ¶æ€æ•°æ®ä¼ å…¥å› ä¸ºonSaveInstanceState()æ–¹æ³•ä¸æ€»æ˜¯è¢«è°ƒç”¨,è§¦å‘æ¡ä»¶ä¸º(æŒ‰ä¸‹HOMEé”®,æŒ‰ä¸‹ç”µæºæŒ‰é”®å…³é—­å±å¹•,æ¨ªç«–å±åˆ‡æ¢æƒ…å†µä¸‹),ä½ åº”è¯¥ä»…é‡å†™onSaveInstanceState()æ¥è®°å½•activityçš„ä¸´æ—¶çŠ¶æ€ï¼Œè€Œä¸æ˜¯æŒä¹…çš„æ•°æ®ã€‚åº”è¯¥ä½¿ç”¨onPause()æ¥å­˜å‚¨æŒä¹…æ•°æ®ã€‚ onPause(); å½“Activityè¢«æ–°çš„Activityå®Œå…¨è¦†ç›–ä¸å¯è§æ—¶è¢«ç³»ç»Ÿè°ƒç”¨ onStop(); å½“Activity(ç”¨æˆ·è°ƒç”¨finish()æˆ–ç³»ç»Ÿç”±äºå†…å­˜ä¸è¶³)è¢«ç³»ç»Ÿé”€æ¯æ€æ‰æ—¶ç³»ç»Ÿè°ƒç”¨,ï¼ˆæ•´ä¸ªç”Ÿå‘½å‘¨æœŸåªè°ƒç”¨1æ¬¡ï¼‰ç”¨æ¥é‡Šæ”¾onCreate ()æ–¹æ³•ä¸­åˆ›å»ºçš„èµ„æº,å¦‚ç»“æŸçº¿ç¨‹ç­‰ onDestroy(); 3&gt; 3ä¸ªåµŒå¥—å¾ªç¯ 1.Activityå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸ:ä»ç¬¬ä¸€æ¬¡è°ƒç”¨onCreate()å¼€å§‹ç›´åˆ°è°ƒç”¨onDestroy()ç»“æŸ 2.Activityçš„å¯è§†ç”Ÿå‘½å‘¨æœŸ:ä»è°ƒç”¨onStart()åˆ°ç›¸åº”çš„è°ƒç”¨onStop() åœ¨è¿™ä¸¤ä¸ªæ–¹æ³•ä¹‹é—´,å¯ä»¥ä¿æŒæ˜¾ç¤ºActivityæ‰€éœ€è¦çš„èµ„æºã€‚å¦‚åœ¨onStart()ä¸­æ³¨å†Œä¸€ä¸ªå¹¿æ’­æ¥æ”¶è€…ç›‘å¬å½±å“ä½ çš„UIçš„æ”¹å˜,åœ¨onStop() ä¸­æ³¨é”€ã€‚ 3.Activityçš„å‰å°ç”Ÿå‘½å‘¨æœŸ:ä»è°ƒç”¨onResume()åˆ°ç›¸åº”çš„è°ƒç”¨onPause()ã€‚ ä¸¾ä¾‹è¯´æ˜: ä¾‹1ï¼šæœ‰3ä¸ªAcitivity,åˆ†åˆ«ç”¨One,Two(é€æ˜çš„),Threeè¡¨ç¤º,Oneæ˜¯åº”ç”¨å¯åŠ¨æ—¶çš„ä¸»Activity å¯åŠ¨ç¬¬ä¸€ä¸ªç•Œé¢Activity Oneæ—¶,å®ƒçš„æ¬¡åºæ˜¯ onCreate (ONE) - onStart (ONE) - onResume(ONE) ç‚¹&quot;æ‰“å¼€é€æ˜Activity&quot;æŒ‰é’®æ—¶,è¿™æ—¶èµ°çš„æ¬¡åºæ˜¯ onPause(ONE) - onCreate(TWO) - onStart(TWO) - onResume(TWO) å†ç‚¹backå›åˆ°ç¬¬ä¸€ä¸ªç•Œé¢,Twoä¼šè¢«æ€è¿™æ—¶èµ°çš„æ¬¡åºæ˜¯ onPause(TWO) - onActivityResult(ONE) - onResume(ONE) - onStop(TWO) - onDestroy(TWO) ç‚¹&quot;æ‰“å¼€å…¨å±Activity&quot;æŒ‰é’®æ—¶,è¿™æ—¶èµ°çš„æ¬¡åºæ˜¯ onPause(ONE) - onCreate(Three) - onStart(Three) - onResume(Three) - onStop(ONE) å†ç‚¹backå›åˆ°ç¬¬ä¸€ä¸ªç•Œé¢,Threeä¼šè¢«æ€è¿™æ—¶èµ°çš„æ¬¡åºæ˜¯ onPause(Three) - onActivityResult(ONE) - onRestart(ONE) - onStart(ONE)- onResume(ONE) - onStop(Three) - onDestroy(Three) å†ç‚¹backé€€å‡ºåº”ç”¨æ—¶,å®ƒçš„æ¬¡åºæ˜¯ onPause(ONE) - onStop(ONE) - onDestroy(ONE) ä¾‹2ï¼šæ¨ªç«–å±åˆ‡æ¢æ—¶å€™Activityçš„ç”Ÿå‘½å‘¨æœŸ ä»–åˆ‡æ¢æ—¶å…·ä½“çš„ç”Ÿå‘½å‘¨æœŸæ˜¯æ€ä¹ˆæ ·çš„ï¼š 1ã€æ–°å»ºä¸€ä¸ªActivityï¼Œå¹¶æŠŠå„ä¸ªç”Ÿå‘½å‘¨æœŸæ‰“å°å‡ºæ¥ 2ã€è¿è¡ŒActivityï¼Œå¾—åˆ°å¦‚ä¸‹ä¿¡æ¯ onCreateâ€“&gt;onStartâ€“&gt;onResumeâ€“&gt; 3ã€æŒ‰crtl+f12åˆ‡æ¢æˆæ¨ªå±æ—¶ onSaveInstanceStateâ€“&gt;onPauseâ€“&gt;onStopâ€“&gt;onDestroyâ€“&gt;onCreateâ€“&gt;onStartâ€“&gt;onRestoreInstanceStateâ€“&gt;onResumeâ€“&gt; 4ã€å†æŒ‰crtl+f12åˆ‡æ¢æˆç«–å±æ—¶ï¼Œå‘ç°æ‰“å°äº†ä¸¤æ¬¡ç›¸åŒçš„log onSaveInstanceStateâ€“&gt;onPauseâ€“&gt;onStopâ€“&gt;onDestroyâ€“&gt;onCreateâ€“&gt;onStartâ€“&gt;onRestoreInstanceStateâ€“&gt;onResumeâ€“&gt;onSaveInstanceStateâ€“&gt;onPauseâ€“&gt;onStopâ€“&gt;onDestroyâ€“&gt;onCreateâ€“&gt;onStartâ€“&gt;onRestoreInstanceStateâ€“&gt;onResumeâ€“&gt; 5ã€ä¿®æ”¹AndroidManifest.xmlï¼ŒæŠŠè¯¥Activityæ·»åŠ android:configChanges=â€orientationâ€ï¼Œæ‰§è¡Œæ­¥éª¤3 onSaveInstanceStateâ€“&gt;onPauseâ€“&gt;onStopâ€“&gt;onDestroyâ€“&gt;onCreateâ€“&gt;onStartâ€“&gt;onRestoreInstanceStateâ€“&gt;onResumeâ€“&gt; 6ã€å†æ‰§è¡Œæ­¥éª¤4ï¼Œå‘ç°ä¸ä¼šå†æ‰“å°ç›¸åŒä¿¡æ¯ï¼Œä½†å¤šæ‰“å°äº†ä¸€è¡ŒonConfigChanged onSaveInstanceStateâ€“&gt;onPauseâ€“&gt;onStopâ€“&gt;onDestroyâ€“&gt;onCreateâ€“&gt;onStartâ€“&gt;onRestoreInstanceStateâ€“&gt;onResumeâ€“&gt;onConfigurationChangedâ€“&gt; 7ã€æŠŠæ­¥éª¤5çš„android:configChanges=â€orientationâ€ æ”¹æˆ android:configChanges=â€orientation|keyboardHiddenâ€ï¼Œæ‰§è¡Œæ­¥éª¤3ï¼Œå°±åªæ‰“å°onConfigChanged onConfigurationChangedâ€“&gt; 8ã€æ‰§è¡Œæ­¥éª¤4 onConfigurationChangedâ€“&gt;onConfigurationChangedâ€“&gt; æ€»ç»“ï¼š 1ã€ä¸è®¾ç½®Activityçš„android:configChangesæ—¶ï¼Œåˆ‡å±ä¼šé‡æ–°è°ƒç”¨å„ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåˆ‡æ¨ªå±æ—¶ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œåˆ‡ç«–å±æ—¶ä¼šæ‰§è¡Œä¸¤æ¬¡ 2ã€è®¾ç½®Activityçš„android:configChanges=â€orientationâ€æ—¶ï¼Œåˆ‡å±è¿˜æ˜¯ä¼šé‡æ–°è°ƒç”¨å„ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåˆ‡æ¨ªã€ç«–å±æ—¶åªä¼šæ‰§è¡Œä¸€æ¬¡ 3ã€è®¾ç½®Activityçš„android:configChanges=â€orientation|keyboardHiddenâ€æ—¶ï¼Œåˆ‡å±ä¸ä¼šé‡æ–°è°ƒç”¨å„ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåªä¼šæ‰§è¡ŒonConfigurationChangedæ–¹æ³• æ€»ç»“ä¸€ä¸‹æ•´ä¸ªActivityçš„ç”Ÿå‘½å‘¨æœŸ è¡¥å……ä¸€ç‚¹ï¼Œå½“å‰Activityäº§ç”Ÿäº‹ä»¶å¼¹å‡ºToastå’ŒAlertDialogçš„æ—¶å€™Activityçš„ç”Ÿå‘½å‘¨æœŸä¸ä¼šæœ‰æ”¹å˜ Activityè¿è¡Œæ—¶æŒ‰ä¸‹HOMEé”®(è·Ÿè¢«å®Œå…¨è¦†ç›–æ˜¯ä¸€æ ·çš„)ï¼šonSaveInstanceState â€“&gt; onPause â€“&gt; onStopï¼Œå†æ¬¡è¿›å…¥æ¿€æ´»çŠ¶æ€æ—¶ï¼š onRestart â€“&gt;onStartâ€”&gt;onResume BroadcastReceiveå¹¿æ’­æ¥æ”¶å™¨ç”Ÿå‘½å‘¨æœŸï¼š ç”Ÿå‘½å‘¨æœŸåªæœ‰åç§’å·¦å³ï¼Œå¦‚æœåœ¨ onReceive() å†…åšè¶…è¿‡åç§’å†…çš„äº‹æƒ…ï¼Œå°±ä¼šæŠ¥ANR(Application No Response) ç¨‹åºæ— å“åº”çš„é”™è¯¯ä¿¡æ¯ å®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸ºä»å›è°ƒonReceive()æ–¹æ³•å¼€å§‹åˆ°è¯¥æ–¹æ³•è¿”å›ç»“æœåç»“æŸ ServiceæœåŠ¡ç”Ÿå‘½å‘¨æœŸï¼š å›¾3.2serviceç”Ÿå‘½å‘¨æœŸå›¾ Serviceå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸ:ä»è°ƒç”¨onCreate()å¼€å§‹ç›´åˆ°è°ƒç”¨onDestroy()ç»“æŸ Serviceæœ‰ä¸¤ç§ä½¿ç”¨æ–¹æ³•ï¼š 1&gt;ä»¥è°ƒç”¨Context.startService()å¯åŠ¨ï¼Œè€Œä»¥è°ƒç”¨Context.stopService()ç»“æŸ 2&gt;ä»¥è°ƒç”¨Context.bindService()æ–¹æ³•å»ºç«‹ï¼Œä»¥è°ƒç”¨Context.unbindService()å…³é—­ serviceé‡è¦çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³• å½“ç”¨æˆ·è°ƒç”¨startService ï¼ˆï¼‰æˆ–bindServiceï¼ˆï¼‰æ—¶ï¼ŒServiceç¬¬ä¸€æ¬¡è¢«å®ä¾‹åŒ–çš„æ—¶å€™ç³»ç»Ÿä¼šè°ƒç”¨,æ•´ä¸ªç”Ÿå‘½å‘¨æœŸåªè°ƒç”¨1æ¬¡è¿™ä¸ªæ–¹æ³•ï¼Œé€šå¸¸ç”¨äºåˆå§‹åŒ–è®¾ç½®ã€‚æ³¨æ„ï¼šå¤šæ¬¡è°ƒç”¨startServiceï¼ˆï¼‰æˆ–bindServiceï¼ˆï¼‰æ–¹æ³•ä¸ä¼šå¤šæ¬¡è§¦å‘onCreateï¼ˆï¼‰æ–¹æ³• void onCreate() å½“ç”¨æˆ·è°ƒç”¨stopService()æˆ–unbindServiceï¼ˆï¼‰æ¥åœæ­¢æœåŠ¡æ—¶è¢«ç³»ç»Ÿè°ƒç”¨,ï¼ˆæ•´ä¸ªç”Ÿå‘½å‘¨æœŸåªè°ƒç”¨1æ¬¡ï¼‰ç”¨æ¥é‡Šæ”¾onCreate()æ–¹æ³•ä¸­åˆ›å»ºçš„èµ„æº void onDestroy() é€šè¿‡startService()æ–¹æ³•å¯åŠ¨çš„æœåŠ¡ åˆå§‹åŒ–ç»“æŸåç³»ç»Ÿä¼šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œç”¨äºå¤„ç†ä¼ é€’ç»™startService()çš„Intentå¯¹è±¡ã€‚å¦‚éŸ³ä¹æœåŠ¡ä¼šæ‰“å¼€Intent æ¥æ¢æ˜å°†è¦æ’­æ”¾å“ªé¦–éŸ³ä¹ï¼Œå¹¶å¼€å§‹æ’­æ”¾ã€‚æ³¨æ„ï¼šå¤šæ¬¡è°ƒç”¨startServiceï¼ˆï¼‰æ–¹æ³•ä¼šå¤šæ¬¡è§¦å‘onStartï¼ˆï¼‰æ–¹æ³• void onStart(Intent intent) é€šè¿‡bindService ()æ–¹æ³•å¯åŠ¨çš„æœåŠ¡ åˆå§‹åŒ–ç»“æŸåç³»ç»Ÿä¼šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œç”¨æ¥ç»‘å®šä¼ é€’ç»™bindService çš„Intent çš„å¯¹è±¡ã€‚æ³¨æ„ï¼šå¤šæ¬¡è°ƒç”¨bindServiceï¼ˆï¼‰æ—¶ï¼Œå¦‚æœè¯¥æœåŠ¡å·²å¯åŠ¨åˆ™ä¸ä¼šå†è§¦å‘æ­¤æ–¹æ³• IBinder onBind(Intent intent) ç”¨æˆ·è°ƒç”¨unbindService()æ—¶ç³»ç»Ÿè°ƒç”¨æ­¤æ–¹æ³•ï¼ŒIntent å¯¹è±¡åŒæ ·ä¼ é€’ç»™è¯¥æ–¹æ³• boolean onUnbind(Intent intent) å¦‚æœæœ‰æ–°çš„å®¢æˆ·ç«¯è¿æ¥è‡³è¯¥æœåŠ¡ï¼Œåªæœ‰å½“æ—§çš„è°ƒç”¨onUnbind()åï¼Œæ–°çš„æ‰ä¼šè°ƒç”¨è¯¥æ–¹æ³• void onRebind(Intent intent) è¡¥å……ï¼šonCreate(Bundle savedInstanceState)ä¸onSaveInstanceState(Bundle savedInstanceState)é…åˆä½¿ç”¨ï¼Œè§å¦‚ä¸‹ä»£ç ï¼Œè¾¾åˆ°æ˜¾ç¤ºactivityè¢«ç³»ç»Ÿæ€æ­»å‰çš„çŠ¶æ€ @Overridepublic void onCreate(Bundle savedInstanceState) {super.onCreate(savedInstanceState); if (null != savedInstanceState) { String _userid = savedInstanceState.getString(â€œStrUserIdâ€); String _uid = savedInstanceState.getString(â€œStrUidâ€); String _serverid = savedInstanceState.getString(â€œStrServerIdâ€); String _servername = savedInstanceState.getString(â€œStrServerNameâ€); int _rate = savedInstanceState.getInt(â€œStrRateâ€); //updateUserId(_userid); //updateUId(_uid); //updateServerId(_serverid); //updateUserServer(_servername); //updateRate(_rate); } } @Overrideprotected void onSaveInstanceState(Bundle savedInstanceState) {super.onSaveInstanceState(savedInstanceState); savedInstanceState.putString(&quot;StrUserId&quot;, getUserId()); savedInstanceState.putString(&quot;StrUid&quot;, getUId()); savedInstanceState.putString(&quot;StrServerId&quot;, getServerId()); savedInstanceState.putString(&quot;StrServerName&quot;, getServerName()); savedInstanceState.putInt(&quot;StrRate&quot;, getRate()); } å¦‚æœå¤§å®¶å¯¹è¿™æœ‰è¶£å®ç”¨çš„æŠ€æœ¯è´´æ„Ÿå…´è¶£ æˆ‘åæœŸä¼šç»§ç»­åŠªåŠ›çš„ï¼ è¯·å¤§å®¶æ‰«æäºŒç»´ç ï¼ å…³æ³¨æˆ‘ï¼","categories":[],"tags":[{"name":"Android","slug":"Android","permalink":"https://edward7zhang.github.io/tags/Android/"}]},{"title":"Android Chapter II.   Androidå››å¤§ç»„ä»¶","slug":"Android Chapter II.   Androidå››å¤§ç»„ä»¶","date":"2017-06-10T12:43:13.000Z","updated":"2017-09-15T04:25:18.665Z","comments":true,"path":"2017/06/10/Android Chapter II.   Androidå››å¤§ç»„ä»¶/","link":"","permalink":"https://edward7zhang.github.io/2017/06/10/Android Chapter II.   Androidå››å¤§ç»„ä»¶/","excerpt":"â€‹å­¦ä¹ Androidæœ€é‡è¦çš„è«è¿‡äºå¯¹äºå››å¤§ç»„ä»¶ã€äº”å¤§å¸ƒå±€ä»¥åŠç”Ÿå‘½å‘¨æœŸçš„å­¦ä¹ ï¼Œè¿™ä¸€æœŸæˆ‘ä»¬å°±ä¸€èµ·æ¥å¨å¨Androidå››å¤§åŸºæœ¬ç»„ä»¶ç›¸å…³çš„çŸ¥è¯†ã€‚Androidå››å¤§åŸºæœ¬ç»„ä»¶åˆ†åˆ«æ˜¯Activityï¼ŒServiceæœåŠ¡,Content Providerå†…å®¹æä¾›è€…ï¼ŒBroadcastReceiverå¹¿æ’­æ¥æ”¶å™¨ã€‚","text":"â€‹å­¦ä¹ Androidæœ€é‡è¦çš„è«è¿‡äºå¯¹äºå››å¤§ç»„ä»¶ã€äº”å¤§å¸ƒå±€ä»¥åŠç”Ÿå‘½å‘¨æœŸçš„å­¦ä¹ ï¼Œè¿™ä¸€æœŸæˆ‘ä»¬å°±ä¸€èµ·æ¥å¨å¨Androidå››å¤§åŸºæœ¬ç»„ä»¶ç›¸å…³çš„çŸ¥è¯†ã€‚Androidå››å¤§åŸºæœ¬ç»„ä»¶åˆ†åˆ«æ˜¯Activityï¼ŒServiceæœåŠ¡,Content Providerå†…å®¹æä¾›è€…ï¼ŒBroadcastReceiverå¹¿æ’­æ¥æ”¶å™¨ã€‚ äº†è§£å››å¤§åŸºæœ¬ç»„ä»¶ Activity** :** åº”ç”¨ç¨‹åºä¸­ï¼Œä¸€ä¸ªActivityé€šå¸¸å°±æ˜¯ä¸€ä¸ªå•ç‹¬çš„å±å¹•ï¼Œå®ƒä¸Šé¢å¯ä»¥æ˜¾ç¤ºä¸€äº›æ§ä»¶ä¹Ÿå¯ä»¥ç›‘å¬å¹¶å¤„ç†ç”¨æˆ·çš„äº‹ä»¶åšå‡ºå“åº”ã€‚ Activityä¹‹é—´é€šè¿‡Intentè¿›è¡Œé€šä¿¡ã€‚åœ¨Intent çš„æè¿°ç»“æ„ä¸­ï¼Œæœ‰ä¸¤ä¸ªæœ€é‡è¦çš„éƒ¨åˆ†ï¼šåŠ¨ä½œå’ŒåŠ¨ä½œå¯¹åº”çš„æ•°æ®ã€‚ å…¸å‹çš„åŠ¨ä½œç±»å‹æœ‰ï¼šM AINï¼ˆactivityçš„é—¨æˆ·ï¼‰ã€VIEWã€PICKã€EDIT ç­‰ã€‚è€ŒåŠ¨ä½œå¯¹åº”çš„æ•°æ®åˆ™ä»¥URI çš„å½¢å¼è¿›è¡Œè¡¨ç¤ºã€‚ä¾‹å¦‚ï¼šè¦æŸ¥çœ‹ä¸€ä¸ªäººçš„è”ç³»æ–¹å¼ï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªåŠ¨ä½œç±»å‹ä¸ºVIEW çš„intentï¼Œä»¥åŠä¸€ä¸ªè¡¨ç¤ºè¿™ä¸ªäººçš„URIã€‚ ä¸ä¹‹æœ‰å…³ç³»çš„ä¸€ä¸ªç±»å«IntentFilterã€‚ç›¸å¯¹äºintent æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„åšæŸäº‹çš„è¯·æ±‚ï¼Œä¸€ä¸ªintentfilter åˆ™ç”¨äºæè¿°ä¸€ä¸ªactivityï¼ˆæˆ–è€…IntentReceiverï¼‰èƒ½å¤Ÿæ“ä½œå“ªäº›intentã€‚ä¸€ä¸ªactivity å¦‚æœè¦æ˜¾ç¤ºä¸€ä¸ªäººçš„è”ç³»æ–¹å¼æ—¶ï¼Œéœ€è¦å£°æ˜ä¸€ä¸ªIntentFilterï¼Œè¿™ä¸ªIntentFilter è¦çŸ¥é“æ€ä¹ˆå»å¤„ç†VIEW åŠ¨ä½œå’Œè¡¨ç¤ºä¸€ä¸ªäººçš„URIã€‚IntentFilter éœ€è¦åœ¨AndroidManifest.xml ä¸­å®šä¹‰ã€‚é€šè¿‡è§£æå„ç§intentï¼Œä»ä¸€ä¸ªå±å¹•å¯¼èˆªåˆ°å¦ä¸€ä¸ªå±å¹•æ˜¯å¾ˆç®€å•çš„ã€‚å½“å‘å‰å¯¼èˆªæ—¶ï¼Œactivity å°†ä¼šè°ƒç”¨startActivity(Intent myIntent)æ–¹æ³•ã€‚ç„¶åï¼Œç³»ç»Ÿä¼šåœ¨æ‰€æœ‰å®‰è£…çš„åº”ç”¨ç¨‹åºä¸­å®šä¹‰çš„IntentFilter ä¸­æŸ¥æ‰¾ï¼Œæ‰¾åˆ°æœ€åŒ¹é…myIntent çš„Intent å¯¹åº”çš„activityã€‚æ–°çš„activity æ¥æ”¶åˆ°myIntent çš„é€šçŸ¥åï¼Œå¼€å§‹è¿è¡Œã€‚å½“startActivity æ–¹æ³•è¢«è°ƒç”¨å°†è§¦å‘è§£æmyIntent çš„åŠ¨ä½œï¼Œè¿™ä¸ªæœºåˆ¶æä¾›äº†ä¸¤ä¸ªå…³é”®å¥½å¤„ï¼š Aã€Activities èƒ½å¤Ÿé‡å¤åˆ©ç”¨ä»å…¶å®ƒç»„ä»¶ä¸­ä»¥Intent çš„å½¢å¼äº§ç”Ÿçš„ä¸€ä¸ªè¯·æ±‚ï¼› Bã€Activities å¯ä»¥åœ¨ä»»ä½•æ—¶å€™è¢«ä¸€ä¸ªå…·æœ‰ç›¸åŒIntentFilter çš„æ–°çš„Activity å–ä»£ã€‚ AndroidManifestæ–‡ä»¶ä¸­å«æœ‰å¦‚ä¸‹è¿‡æ»¤å™¨çš„Activityç»„ä»¶ä¸ºé»˜è®¤å¯åŠ¨ç±»å½“ç¨‹åºå¯åŠ¨æ—¶ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨å®ƒ BroadcastReceiveå¹¿æ’­æ¥æ”¶å™¨: ä½ çš„åº”ç”¨å¯ä»¥ä½¿ç”¨å®ƒå¯¹å¤–éƒ¨äº‹ä»¶è¿›è¡Œè¿‡æ»¤åªå¯¹æ„Ÿå…´è¶£çš„å¤–éƒ¨äº‹ä»¶(å¦‚å½“ç”µè¯å‘¼å…¥æ—¶ï¼Œæˆ–è€…æ•°æ®ç½‘ç»œå¯ç”¨æ—¶)è¿›è¡Œæ¥æ”¶å¹¶åšå‡ºå“åº”ã€‚å¹¿æ’­æ¥æ”¶å™¨æ²¡æœ‰ç”¨æˆ·ç•Œé¢ã€‚ç„¶è€Œï¼Œå®ƒä»¬å¯ä»¥å¯åŠ¨ä¸€ä¸ªactivityæˆ–serice æ¥å“åº”å®ƒä»¬æ”¶åˆ°çš„ä¿¡æ¯ï¼Œæˆ–è€…ç”¨NotificationManager æ¥é€šçŸ¥ç”¨æˆ·ã€‚é€šçŸ¥å¯ä»¥ç”¨å¾ˆå¤šç§æ–¹å¼æ¥å¸å¼•ç”¨æˆ·çš„æ³¨æ„åŠ›â”€â”€é—ªåŠ¨èƒŒç¯ã€éœ‡åŠ¨ã€æ’­æ”¾å£°éŸ³ç­‰ã€‚ä¸€èˆ¬æ¥è¯´æ˜¯åœ¨çŠ¶æ€æ ä¸Šæ”¾ä¸€ä¸ªæŒä¹…çš„å›¾æ ‡ï¼Œç”¨æˆ·å¯ä»¥æ‰“å¼€å®ƒå¹¶è·å–æ¶ˆæ¯ã€‚ å¹¿æ’­ç±»å‹ï¼š æ™®é€šå¹¿æ’­ï¼Œé€šè¿‡Context.sendBroadcast(Intent myIntent)å‘é€çš„ æœ‰åºå¹¿æ’­ï¼Œé€šè¿‡Context.sendOrderedBroadcast(intent, receiverPermission)å‘é€çš„ï¼Œè¯¥æ–¹æ³•ç¬¬2ä¸ªå‚æ•°å†³å®šè¯¥å¹¿æ’­çš„çº§åˆ«ï¼Œçº§åˆ«æ•°å€¼æ˜¯åœ¨ -1000 åˆ° 1000 ä¹‹é—´ , å€¼è¶Šå¤§ , å‘é€çš„ä¼˜å…ˆçº§è¶Šé«˜ï¼›å¹¿æ’­æ¥æ”¶è€…æ¥æ”¶å¹¿æ’­æ—¶çš„çº§åˆ«çº§åˆ«ï¼ˆå¯é€šè¿‡intentfilterä¸­çš„priorityè¿›è¡Œè®¾ç½®è®¾ä¸º2147483647æ—¶ä¼˜å…ˆçº§æœ€é«˜ï¼‰ï¼ŒåŒçº§åˆ«æ¥æ”¶çš„å…ˆåæ˜¯éšæœºçš„ï¼Œ å†åˆ°çº§åˆ«ä½çš„æ”¶åˆ°å¹¿æ’­ï¼Œé«˜çº§åˆ«çš„æˆ–åŒçº§åˆ«å…ˆæ¥æ”¶åˆ°å¹¿æ’­çš„å¯ä»¥é€šè¿‡abortBroadcast()æ–¹æ³•æˆªæ–­å¹¿æ’­ä½¿å…¶ä»–çš„æ¥æ”¶è€…æ— æ³•æ”¶åˆ°è¯¥å¹¿æ’­ï¼Œè¿˜æœ‰å…¶ä»–æ„é€ å‡½æ•° å¼‚æ­¥å¹¿æ’­ï¼Œé€šè¿‡Context.sendStickyBroadcast(Intent myIntent)å‘é€çš„ï¼Œè¿˜æœ‰sendStickyOrderedBroadcast(intent, resultReceiver, scheduler, initialCode, initialData, initialExtras)æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å…·æœ‰æœ‰åºå¹¿æ’­çš„ç‰¹æ€§ä¹Ÿæœ‰å¼‚æ­¥å¹¿æ’­çš„ç‰¹æ€§ï¼›å‘é€å¼‚æ­¥å¹¿æ’­è¦ï¼š æƒé™ï¼Œæ¥æ”¶å¹¶å¤„ç†å®ŒIntentåï¼Œå¹¿æ’­ä¾ç„¶å­˜åœ¨ï¼Œç›´åˆ°ä½ è°ƒç”¨removeStickyBroadcast(intent)ä¸»åŠ¨æŠŠå®ƒå»æ‰ æ³¨æ„ï¼šå‘é€å¹¿æ’­æ—¶çš„intentå‚æ•°ä¸Contex.startActivity()å¯åŠ¨èµ·æ¥çš„Intentä¸åŒ,å‰è€…å¯ä»¥è¢«å¤šä¸ªè®¢é˜…å®ƒçš„å¹¿æ’­æ¥æ”¶å™¨è°ƒç”¨,åè€…åªèƒ½è¢«ä¸€ä¸ª(Activityæˆ–service)è°ƒç”¨ ç›‘å¬å¹¿æ’­Intentæ­¥éª¤: 1&gt;å†™ä¸€ä¸ªç»§æ‰¿BroadCastReceiverçš„ç±»,é‡å†™onReceive()æ–¹æ³•,å¹¿æ’­æ¥æ”¶å™¨ä»…åœ¨å®ƒæ‰§è¡Œè¿™ä¸ªæ–¹æ³•æ—¶å¤„äºæ´»è·ƒçŠ¶æ€ã€‚å½“onReceive()è¿”å›åï¼Œå®ƒå³ä¸ºå¤±æ´»çŠ¶æ€,æ³¨æ„:ä¸ºäº†ä¿è¯ç”¨æˆ·äº¤äº’è¿‡ç¨‹çš„æµç•…,ä¸€äº›è´¹æ—¶çš„æ“ä½œè¦æ”¾åˆ°çº¿ç¨‹é‡Œ,å¦‚ç±»åSMSBroadcastReceiver 2&gt;æ³¨å†Œè¯¥å¹¿æ’­æ¥æ”¶è€…,æ³¨å†Œæœ‰ä¸¤ç§æ–¹æ³•ç¨‹åºåŠ¨æ€æ³¨å†Œå’ŒAndroidManifestæ–‡ä»¶ä¸­è¿›è¡Œé™æ€æ³¨å†Œï¼ˆå¯ç†è§£ä¸ºç³»ç»Ÿä¸­æ³¨å†Œï¼‰å¦‚ä¸‹ï¼š é™æ€æ³¨å†Œ,æ³¨å†Œçš„å¹¿æ’­ï¼Œä¸‹é¢çš„priorityè¡¨ç¤ºæ¥æ”¶å¹¿æ’­çš„çº§åˆ«&quot;2147483647&quot;ä¸ºæœ€é«˜ä¼˜å…ˆçº§ 1&lt;receiver android:name=&quot;.SMSBroadcastReceiver&quot; &gt; &lt;intent-filter android:priority = &quot;2147483647&quot; &gt; &lt;action android:name=&quot;android.provider.Telephony.SMS_RECEIVED&quot; /&gt; &lt;/intent-filter&gt;&lt;/receiver &gt; åŠ¨æ€æ³¨å†Œï¼Œä¸€èˆ¬åœ¨Activityå¯äº¤äº’æ—¶onResume()å†…æ³¨å†ŒBroadcastReceiver IntentFilter intentFilter=new IntentFilter(â€œandroid.provider.Telephony.SMS_RECEIVEDâ€);registerReceiver(mBatteryInfoReceiver ,intentFilter);//åæ³¨å†ŒunregisterReceiver(receiver); æ³¨æ„ï¼š 1.ç”Ÿå‘½å‘¨æœŸåªæœ‰åç§’å·¦å³ï¼Œå¦‚æœåœ¨ onReceive() å†…åšè¶…è¿‡åç§’å†…çš„äº‹æƒ…ï¼Œå°±ä¼šæŠ¥ANR(Application No Response) ç¨‹åºæ— å“åº”çš„é”™è¯¯ä¿¡æ¯ï¼Œå¦‚æœéœ€è¦å®Œæˆä¸€é¡¹æ¯”è¾ƒè€—æ—¶çš„å·¥ä½œ , åº”è¯¥é€šè¿‡å‘é€ Intent ç»™ Service, ç”±Service æ¥å®Œæˆ . è¿™é‡Œä¸èƒ½ä½¿ç”¨å­çº¿ç¨‹æ¥è§£å†³ , å› ä¸º BroadcastReceiver çš„ç”Ÿå‘½å‘¨æœŸå¾ˆçŸ­ , å­çº¿ç¨‹å¯èƒ½è¿˜æ²¡æœ‰ç»“æŸBroadcastReceiver å°±å…ˆç»“æŸäº† .BroadcastReceiver ä¸€æ—¦ç»“æŸ , æ­¤æ—¶ BroadcastReceiver çš„æ‰€åœ¨è¿›ç¨‹å¾ˆå®¹æ˜“åœ¨ç³»ç»Ÿéœ€è¦å†…å­˜æ—¶è¢«ä¼˜å…ˆæ€æ­» , å› ä¸ºå®ƒå±äºç©ºè¿›ç¨‹ ( æ²¡æœ‰ä»»ä½•æ´»åŠ¨ç»„ä»¶çš„è¿›ç¨‹ ). å¦‚æœå®ƒçš„å®¿ä¸»è¿›ç¨‹è¢«æ€æ­» , é‚£ä¹ˆæ­£åœ¨å·¥ä½œçš„å­çº¿ç¨‹ä¹Ÿä¼šè¢«æ€æ­» . æ‰€ä»¥é‡‡ç”¨å­çº¿ç¨‹æ¥è§£å†³æ˜¯ä¸å¯é çš„ 2. åŠ¨æ€æ³¨å†Œå¹¿æ’­æ¥æ”¶å™¨è¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯å½“ç”¨æ¥æ³¨å†Œçš„Activityå…³æ‰åï¼Œå¹¿æ’­ä¹Ÿå°±å¤±æ•ˆäº†ã€‚é™æ€æ³¨å†Œæ— éœ€æ‹…å¿§å¹¿æ’­æ¥æ”¶å™¨æ˜¯å¦è¢«å…³é—­,åªè¦è®¾å¤‡æ˜¯å¼€å¯çŠ¶æ€,å¹¿æ’­æ¥æ”¶å™¨ä¹Ÿæ˜¯æ‰“å¼€ç€çš„ã€‚ä¹Ÿå°±æ˜¯è¯´å“ªæ€•appæœ¬èº«æœªå¯åŠ¨,è¯¥appè®¢é˜…çš„å¹¿æ’­åœ¨è§¦å‘æ—¶ä¹Ÿä¼šå¯¹å®ƒèµ·ä½œç”¨ ç³»ç»Ÿå¸¸è§å¹¿æ’­Intent,å¦‚å¼€æœºå¯åŠ¨ã€ç”µæ± ç”µé‡å˜åŒ–ã€æ—¶é—´æ”¹å˜ç­‰å¹¿æ’­ Service æœåŠ¡: ä¸€ä¸ªService æ˜¯ä¸€æ®µé•¿ç”Ÿå‘½å‘¨æœŸçš„ï¼Œæ²¡æœ‰ç”¨æˆ·ç•Œé¢çš„ç¨‹åºï¼Œå¯ä»¥ç”¨æ¥å¼€å‘å¦‚ç›‘æ§ç±»ç¨‹åºã€‚ æ¯”è¾ƒå¥½çš„ä¸€ä¸ªä¾‹å­å°±æ˜¯ä¸€ä¸ªæ­£åœ¨ä»æ’­æ”¾åˆ—è¡¨ä¸­æ’­æ”¾æ­Œæ›²çš„åª’ä½“æ’­æ”¾å™¨ã€‚åœ¨ä¸€ä¸ªåª’ä½“æ’­æ”¾å™¨çš„åº”ç”¨ä¸­ï¼Œåº”è¯¥ä¼šæœ‰å¤šä¸ªactivityï¼Œè®©ä½¿ç”¨è€…å¯ä»¥é€‰æ‹©æ­Œæ›²å¹¶æ’­æ”¾æ­Œæ›²ã€‚ç„¶è€Œï¼ŒéŸ³ä¹é‡æ”¾è¿™ä¸ªåŠŸèƒ½å¹¶æ²¡æœ‰å¯¹åº”çš„activityï¼Œå› ä¸ºä½¿ç”¨è€…å½“ç„¶ä¼šè®¤ä¸ºåœ¨å¯¼èˆªåˆ°å…¶å®ƒå±å¹•æ—¶éŸ³ä¹åº”è¯¥è¿˜åœ¨æ’­æ”¾çš„ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåª’ä½“æ’­æ”¾å™¨è¿™ä¸ªactivity ä¼šä½¿ç”¨Context.startService()æ¥å¯åŠ¨ä¸€ä¸ªserviceï¼Œä»è€Œå¯ä»¥åœ¨åå°ä¿æŒéŸ³ä¹çš„æ’­æ”¾ã€‚åŒæ—¶ï¼Œç³»ç»Ÿä¹Ÿå°†ä¿æŒè¿™ä¸ªservice ä¸€ç›´æ‰§è¡Œï¼Œç›´åˆ°è¿™ä¸ªservice è¿è¡Œç»“æŸã€‚å¦å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨Context.bindService()æ–¹æ³•ï¼Œè¿æ¥åˆ°ä¸€ä¸ªservice ä¸Šï¼ˆå¦‚æœè¿™ä¸ªservice è¿˜æ²¡æœ‰è¿è¡Œå°†å¯åŠ¨å®ƒï¼‰ã€‚å½“è¿æ¥åˆ°ä¸€ä¸ªservice ä¹‹åï¼Œæˆ‘ä»¬è¿˜å¯ä»¥service æä¾›çš„æ¥å£ä¸å®ƒè¿›è¡Œé€šè®¯ã€‚æ‹¿åª’ä½“æ’­æ”¾å™¨è¿™ä¸ªä¾‹å­æ¥è¯´ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è¿›è¡Œæš‚åœã€é‡æ’­ç­‰æ“ä½œã€‚ Serviceä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ 1&gt;ç»§æ‰¿serviceç±» 2&gt;AndroidManifast.xmlé…ç½®æ¸…å•æ–‡ä»¶ä¸­&lt;application&gt;èŠ‚ç‚¹é‡Œå¯¹æœåŠ¡è¿›è¡Œé…ç½® &lt;service name=&quot;.SMSService&quot;/&gt; æœåŠ¡ä¸èƒ½è‡ªå·±è¿è¡Œ,éœ€è¦é€šè¿‡Contex.startService()æˆ–Contex.bindService()å¯åŠ¨æœåŠ¡ é€šè¿‡startService()æ–¹æ³•å¯åŠ¨çš„æœåŠ¡äºè°ƒç”¨è€…æ²¡æœ‰å…³ç³»,å³ä½¿è°ƒç”¨è€…å…³é—­äº†,æœåŠ¡ä»ç„¶è¿è¡Œæƒ³åœæ­¢æœåŠ¡è¦è°ƒç”¨Context.stopService(),æ­¤æ—¶ç³»ç»Ÿä¼šè°ƒç”¨onDestory(),ä½¿ç”¨æ­¤æ–¹æ³•å¯åŠ¨æ—¶,æœåŠ¡é¦–æ¬¡å¯åŠ¨ç³»ç»Ÿå…ˆè°ƒç”¨æœåŠ¡çš„onCreate()â€“&gt;onStart(),å¦‚æœæœåŠ¡å·²ç»å¯åŠ¨å†æ¬¡è°ƒç”¨åªä¼šè§¦å‘onStart()æ–¹æ³• ä½¿ç”¨bindService()å¯åŠ¨çš„æœåŠ¡ä¸è°ƒç”¨è€…ç»‘å®š,åªè¦è°ƒç”¨è€…å…³é—­æœåŠ¡å°±ç»ˆæ­¢,ä½¿ç”¨æ­¤æ–¹æ³•å¯åŠ¨æ—¶,æœåŠ¡é¦–æ¬¡å¯åŠ¨ç³»ç»Ÿå…ˆè°ƒç”¨æœåŠ¡çš„onCreate()â€“&gt;onBind(),å¦‚æœæœåŠ¡å·²ç»å¯åŠ¨å†æ¬¡è°ƒç”¨ä¸ä¼šå†è§¦å‘è¿™2ä¸ªæ–¹æ³•,è°ƒç”¨è€…é€€å‡ºæ—¶ç³»ç»Ÿä¼šè°ƒç”¨æœåŠ¡çš„onUnbind()â€“&gt;onDestory(),æƒ³ä¸»åŠ¨è§£é™¤ç»‘å®šå¯ä½¿ç”¨Contex.unbindService(),ç³»ç»Ÿä¾æ¬¡è°ƒç”¨onUnbind()â€“&gt;onDestory(); Content Providerå†…å®¹æä¾›è€… : androidå¹³å°æä¾›äº†Content Providerä½¿ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„æŒ‡å®šæ•°æ®é›†æä¾›ç»™å…¶ä»–åº”ç”¨ç¨‹åºã€‚è¿™äº›æ•°æ®å¯ä»¥å­˜å‚¨åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ã€åœ¨ä¸€ä¸ªSQLiteæ•°æ®åº“ã€æˆ–ä»¥ä»»ä½•å…¶ä»–åˆç†çš„æ–¹å¼, å…¶ä»–åº”ç”¨å¯ä»¥é€šè¿‡ContentResolverç±»(è§ContentProviderAccessAppä¾‹å­)ä»è¯¥å†…å®¹æä¾›è€…ä¸­è·å–æˆ–å­˜å…¥æ•°æ®.(ç›¸å½“äºåœ¨åº”ç”¨å¤–åŒ…äº†ä¸€å±‚å£³), åªæœ‰éœ€è¦åœ¨å¤šä¸ªåº”ç”¨ç¨‹åºé—´å…±äº«æ•°æ®æ˜¯æ‰éœ€è¦å†…å®¹æä¾›è€…ã€‚ä¾‹å¦‚ï¼Œé€šè®¯å½•æ•°æ®è¢«å¤šä¸ªåº”ç”¨ç¨‹åºä½¿ç”¨ï¼Œä¸”å¿…é¡»å­˜å‚¨åœ¨ä¸€ä¸ªå†…å®¹æä¾›è€…ä¸­ å®ƒçš„å¥½å¤„:ç»Ÿä¸€æ•°æ®è®¿é—®æ–¹å¼ã€‚ androidç³»ç»Ÿè‡ªå¸¦çš„å†…å®¹æä¾›è€…(é¡¶çº§çš„è¡¨ç¤ºæ•°æ®åº“å,éé¡¶çº§çš„éƒ½æ˜¯è¡¨å)è¿™äº›å†…å®¹æä¾›è€…åœ¨SDKæ–‡æ¡£çš„android.provider JavaåŒ…ä¸­éƒ½æœ‰ä»‹ç»ã€‚è§ï¼šhttp://developer.android.com/reference/android/provider/package-summary.html â”œâ”€â”€â”€â”€Browser â”œâ”€â”€â”€â”€CallLog â”œâ”€â”€â”€â”€Contacts â”‚ â”œâ”€â”€â”€â”€Groups â”‚ â”œâ”€â”€â”€â”€People â”‚ â”œâ”€â”€â”€â”€Phones â”‚ â””â”€â”€â”€â”€Photos â”œâ”€â”€â”€â”€Images â”‚ â””â”€â”€â”€â”€Thumbnails â”œâ”€â”€â”€â”€MediaStore â”‚ â”œâ”€â”€â”€â”€Albums â”‚ â”œâ”€â”€â”€â”€Artists â”‚ â”œâ”€â”€â”€â”€Audio â”‚ â”œâ”€â”€â”€â”€Genres â”‚ â””â”€â”€â”€â”€Playlists â”œâ”€â”€â”€â”€Settings â””â”€â”€â”€â”€Video CallLogï¼šåœ°å€å’Œæ¥æ”¶åˆ°çš„ç”µè¯ä¿¡æ¯ Contact.People.Phonesï¼šå­˜å‚¨ç”µè¯å·ç  Setting.Systemï¼šç³»ç»Ÿè®¾ç½®å’Œåå¥½è®¾ç½® ä½¿ç”¨Content Providerå¯¹å¤–å…±äº«æ•°æ®çš„æ­¥éª¤ 1&gt;ç»§æ‰¿ContentProviderç±»å¹¶æ ¹æ®éœ€æ±‚é‡å†™ä»¥ä¸‹æ–¹æ³•: public boolean onCreate();//å¤„ç†åˆå§‹åŒ–æ“ä½œ /** * æ’å…¥æ•°æ®åˆ°å†…å®¹æä¾›è€…(å…è®¸å…¶ä»–åº”ç”¨å‘ä½ çš„åº”ç”¨ä¸­æ’å…¥æ•°æ®æ—¶é‡å†™) * @param uri * @param initialValues æ’å…¥çš„æ•°æ® * @return */ public Uri insert(Uri uri, ContentValues initialValues); /** * ä»å†…å®¹æä¾›è€…ä¸­åˆ é™¤æ•°æ®(å…è®¸å…¶ä»–åº”ç”¨åˆ é™¤ä½ åº”ç”¨çš„æ•°æ®æ—¶é‡å†™) * @param uri * @param selection æ¡ä»¶è¯­å¥ * @param selectionArgs å‚æ•° * @return */ public int delete(Uri uri, String selection, String[] selectionArgs); /** * æ›´æ–°å†…å®¹æä¾›è€…å·²å­˜åœ¨çš„æ•°æ®(å…è®¸å…¶ä»–åº”ç”¨æ›´æ–°ä½ åº”ç”¨çš„æ•°æ®æ—¶é‡å†™) * @param uri * @param values æ›´æ–°çš„æ•°æ® * @param selection æ¡ä»¶è¯­å¥ * @param selectionArgs å‚æ•° * @return */ public int update(Uri uri, ContentValues values, String selection, String[] selectionArgs); /** * è¿”å›æ•°æ®ç»™è°ƒç”¨è€…(å…è®¸å…¶ä»–åº”ç”¨ä»ä½ çš„åº”ç”¨ä¸­è·å–æ•°æ®æ—¶é‡å†™) * @param uri * @param projection åˆ—å * @param selection æ¡ä»¶è¯­å¥ * @param selectionArgs å‚æ•° * @param sortOrder æ’åº * @return */ public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) ; /** * ç”¨äºè¿”å›å½“å‰Uriæ‰€ä»£è¡¨æ•°æ®çš„MIMEç±»å‹ * å¦‚æœæ“ä½œçš„æ•°æ®ä¸ºé›†åˆç±»å‹(å¤šæ¡æ•°æ®),é‚£ä¹ˆè¿”å›çš„ç±»å‹å­—ç¬¦ä¸²åº”è¯¥ä¸ºvnd.android.cursor.dir/å¼€å¤´ * ä¾‹å¦‚è¦å¾—åˆ°æ‰€æœ‰personè®°å½•çš„Uriä¸ºcontent://com.bravestarr.provider.personprovider/person, * é‚£ä¹ˆè¿”å›çš„MIMEç±»å‹å­—ç¬¦ä¸²åº”è¯¥ä¸ºâ€vnd.android.cursor.dir/personâ€ * å¦‚æœæ“ä½œçš„æ•°æ®ä¸ºå•ä¸€æ•°æ®,é‚£ä¹ˆè¿”å›çš„ç±»å‹å­—ç¬¦ä¸²åº”è¯¥ä¸ºvnd.android.cursor.item/å¼€å¤´ * ä¾‹å¦‚è¦å¾—åˆ°idä¸º10çš„personè®°å½•çš„Uriä¸ºcontent://com.bravestarr.provider.personprovider/person/10, * é‚£ä¹ˆè¿”å›çš„MIMEç±»å‹å­—ç¬¦ä¸²åº”è¯¥ä¸ºâ€vnd.android.cursor.item/personâ€ * @param uri */ public String getType(Uri uri) è¿™äº›æ–¹æ³•ä¸­çš„Uriå‚æ•°,å¾—åˆ°åéœ€è¦è¿›è¡Œè§£æç„¶ååšå¯¹åº”å¤„ç†,Uriè¡¨ç¤ºè¦æ“ä½œçš„æ•°æ®,åŒ…å«ä¸¤éƒ¨åˆ†ä¿¡æ¯: 1.éœ€è¦æ“ä½œçš„contentprovider 2.å¯¹contentproviderä¸­çš„ä»€ä¹ˆæ•°æ®è¿›è¡Œæ“ä½œ,ä¸€ä¸ªUriæ ¼å¼:ç»“æ„å¤´://authorities(åŸŸå)/è·¯å¾„(è¦æ“ä½œçš„æ•°æ®,æ ¹æ®ä¸šåŠ¡è€Œå®š) content://com.bravestarr.provider.personprovider/person/10 è¯´æ˜:contentproviderçš„ç»“æ„å¤´å·²ç»ç”±androidè§„å®šä¸ºcontent:// authoritiesç”¨äºå”¯ä¸€æ ‡è¯†è¿™ä¸ªcontentproviderç¨‹åº,å¤–éƒ¨è°ƒç”¨è€…å¯ä»¥æ ¹æ®è¿™ä¸ªæ‰¾åˆ°ä»– è·¯å¾„è¡¨ç¤ºæˆ‘ä»¬è¦æ“ä½œçš„æ•°æ®,è·¯å¾„çš„æ„å»ºæ ¹æ®ä¸šåŠ¡è€Œå®š.è·¯å¾„æ ¼å¼å¦‚ä¸‹: è¦æ“ä½œpersonè¡¨è¡Œå·ä¸º10çš„è®°å½•,å¯ä»¥è¿™æ ·æ„å»º/person/10 è¦æ“ä½œpersonè¡¨çš„æ‰€æœ‰è®°å½•,å¯ä»¥è¿™æ ·æ„å»º/person 2&gt;åœ¨AndroidManifest.xmlä¸­ä½¿ç”¨å¯¹ContentProviderè¿›è¡Œé…ç½®æ³¨å†Œ(å†…å®¹æä¾›è€…æ³¨å†Œå®ƒè‡ªå·±å°±åƒç½‘ç«™æ³¨å†ŒåŸŸå),ContentProvideré‡‡ç”¨authoritie(åŸæ„æˆæƒ,å¯ç†è§£ä¸ºåŸŸå)ä½œä¸ºå”¯ä¸€æ ‡è¯†,æ–¹ä¾¿å…¶ä»–åº”ç”¨èƒ½æ‰¾åˆ° â€¦ å…³äºå››å¤§åŸºæœ¬ç»„ä»¶çš„ä¸€ä¸ªæ€»ç»“ï¼š 1&gt; 4å¤§ç»„ä»¶çš„æ³¨å†Œ 4å¤§åŸºæœ¬ç»„ä»¶éƒ½éœ€è¦æ³¨å†Œæ‰èƒ½ä½¿ç”¨,æ¯ä¸ªActivityã€serviceã€Content Providerå†…å®¹æä¾›è€…éƒ½éœ€è¦åœ¨AndroidManifestæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®AndroidManifestæ–‡ä»¶ä¸­æœªè¿›è¡Œå£°æ˜çš„activityã€æœåŠ¡ä»¥åŠå†…å®¹æä¾›è€…å°†ä¸ä¸ºç³»ç»Ÿæ‰€è§ï¼Œä»è€Œä¹Ÿå°±ä¸å¯ç”¨ï¼Œè€ŒBroadcastReceiveå¹¿æ’­æ¥æ”¶è€…çš„æ³¨å†Œåˆ†é™æ€æ³¨å†Œï¼ˆåœ¨AndroidManifestæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼‰å’Œé€šè¿‡ä»£ç åŠ¨æ€åˆ›å»ºå¹¶ä»¥è°ƒç”¨Context.registerReceiver()çš„æ–¹å¼æ³¨å†Œè‡³ç³»ç»Ÿã€‚éœ€è¦æ³¨æ„çš„æ˜¯åœ¨AndroidManifestæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®çš„å¹¿æ’­æ¥æ”¶è€…ä¼šéšç³»ç»Ÿçš„å¯åŠ¨è€Œä¸€ç›´å¤„äºæ´»è·ƒçŠ¶æ€,åªè¦æ¥æ”¶åˆ°æ„Ÿå…´è¶£çš„å¹¿æ’­å°±ä¼šè§¦å‘ï¼ˆå³ä½¿ç¨‹åºæœªè¿è¡Œï¼‰ AndroidManifestæ–‡ä»¶ä¸­è¿›è¡Œæ³¨å†Œæ ¼å¼å¦‚ä¸‹ï¼š å…ƒç´ çš„name å±æ€§æŒ‡å®šäº†å®ç°äº†è¿™ä¸ªactivity çš„Activity çš„å­ç±»ã€‚icon å’Œlabel å±æ€§æŒ‡å‘äº†åŒ…å«å±•ç¤ºç»™ç”¨æˆ·çš„æ­¤activity çš„å›¾æ ‡å’Œæ ‡ç­¾çš„èµ„æºæ–‡ä»¶ã€‚ å…ƒç´ ç”¨äºå£°æ˜æœåŠ¡ å…ƒç´ ç”¨äºå£°æ˜å¹¿æ’­æ¥æ”¶å™¨ å…ƒç´ ç”¨äºå£°æ˜å†…å®¹æä¾›è€… 2&gt; 4å¤§ç»„ä»¶çš„æ¿€æ´» â€¢ å®¹æä¾›è€…çš„æ¿€æ´»ï¼šå½“æ¥æ”¶åˆ°ContentResolver å‘å‡ºçš„è¯·æ±‚åï¼Œå†…å®¹æä¾›è€…è¢«æ¿€æ´»ã€‚è€Œå…¶å®ƒä¸‰ç§ç»„ä»¶â”€â”€activityã€æœåŠ¡å’Œå¹¿æ’­æ¥æ”¶å™¨è¢«ä¸€ç§å«åšintent çš„å¼‚æ­¥æ¶ˆæ¯æ‰€æ¿€æ´» â€¢ Activityçš„æ¿€æ´»é€šè¿‡ä¼ é€’ä¸€ä¸ªIntent å¯¹è±¡è‡³Context.startActivity()æˆ–Activity.startActivityForResult()ä»¥è½½å…¥ï¼ˆæˆ–æŒ‡å®šæ–°å·¥ä½œç»™ï¼‰ä¸€ä¸ªactivityã€‚ç›¸åº”çš„activity å¯ä»¥é€šè¿‡è°ƒç”¨getIntent() æ–¹æ³•æ¥æŸ¥çœ‹æ¿€æ´»å®ƒçš„intentã€‚å¦‚æœå®ƒæœŸæœ›å®ƒæ‰€å¯åŠ¨çš„é‚£ä¸ªactivity è¿”å›ä¸€ä¸ªç»“æœï¼Œå®ƒä¼šä»¥è°ƒç”¨startActivityForResult()æ¥å–ä»£startActivity()ã€‚æ¯”å¦‚è¯´ï¼Œå¦‚æœå®ƒå¯åŠ¨äº†å¦å¤–ä¸€ä¸ªActivity ä»¥ä½¿ç”¨æˆ·æŒ‘é€‰ä¸€å¼ ç…§ç‰‡ï¼Œå®ƒä¹Ÿè®¸æƒ³çŸ¥é“å“ªå¼ ç…§ç‰‡è¢«é€‰ä¸­äº†ã€‚ç»“æœå°†ä¼šè¢«å°è£…åœ¨ä¸€ä¸ªIntent å¯¹è±¡ä¸­ï¼Œå¹¶ä¼ é€’ç»™å‘å‡ºè°ƒç”¨çš„activity çš„onActivityResult() æ–¹æ³•ã€‚ â€¢ æœåŠ¡çš„æ¿€æ´»å¯ä»¥é€šè¿‡ä¼ é€’ä¸€ä¸ªIntent å¯¹è±¡è‡³Context.startService()æˆ–Context.bindService()å‰è€…Android è°ƒç”¨æœåŠ¡çš„onStart()æ–¹æ³•å¹¶å°†Intent å¯¹è±¡ä¼ é€’ç»™å®ƒï¼Œåè€…Android è°ƒç”¨æœåŠ¡çš„onBind()æ–¹æ³•å°†è¿™ä¸ªIntent å¯¹è±¡ä¼ é€’ç»™å®ƒ â€¢ å‘é€å¹¿æ’­å¯ä»¥é€šè¿‡ä¼ é€’ä¸€ä¸ªIntent å¯¹è±¡è‡³ç»™Context.sendBroadcast() ã€ Context.sendOrderedBroadcast()æˆ–Context.sendStickyBroadcast()Android ä¼šè°ƒç”¨æ‰€æœ‰å¯¹æ­¤å¹¿æ’­æœ‰å…´è¶£çš„å¹¿æ’­æ¥æ”¶å™¨çš„onReceive()æ–¹æ³•ï¼Œå°†intent ä¼ é€’ç»™å®ƒä»¬ 3&gt; å››å¤§ç»„ä»¶çš„å…³é—­ å†…å®¹æä¾›è€…ä»…åœ¨å“åº”ContentResolver æå‡ºè¯·æ±‚çš„æ—¶å€™æ¿€æ´»ã€‚è€Œä¸€ä¸ªå¹¿æ’­æ¥æ”¶å™¨ä»…åœ¨å“åº”å¹¿æ’­ä¿¡æ¯çš„æ—¶å€™æ¿€æ´»ã€‚æ‰€ä»¥ï¼Œæ²¡æœ‰å¿…è¦å»æ˜¾å¼çš„å…³é—­è¿™äº›ç»„ä»¶ã€‚ Activityå…³é—­ï¼šå¯ä»¥é€šè¿‡è°ƒç”¨å®ƒçš„finish()æ–¹æ³•æ¥å…³é—­ä¸€ä¸ªactivity æœåŠ¡å…³é—­ï¼šå¯¹äºé€šè¿‡startService()æ–¹æ³•å¯åŠ¨çš„æœåŠ¡è¦è°ƒç”¨Context.stopService()æ–¹æ³•å…³é—­æœåŠ¡ï¼Œä½¿ç”¨bindService()æ–¹æ³•å¯åŠ¨çš„æœåŠ¡è¦è°ƒç”¨Contex.unbindService ()æ–¹æ³•å…³é—­æœåŠ¡ CreatedbyEdwardZhangâˆ£ä¸€ä¸ªä¸åªåšæŠ€æœ¯çš„å…¬ä¼—å· é•¿æŒ‰ï¼Œè¯†åˆ«äºŒç»´ç ï¼ŒåŠ å…³æ³¨","categories":[],"tags":[{"name":"Android","slug":"Android","permalink":"https://edward7zhang.github.io/tags/Android/"}]},{"title":"Android Chapter I. ç£¨äººçš„ä¸æ˜¯ Android è€Œæ˜¯ AndroidStudio :ï¼ˆ","slug":"Android Chapter I. ç£¨äººçš„ä¸æ˜¯ Android è€Œæ˜¯ AndroidStudio","date":"2017-06-09T12:43:13.000Z","updated":"2017-09-15T04:30:21.674Z","comments":true,"path":"2017/06/09/Android Chapter I. ç£¨äººçš„ä¸æ˜¯ Android è€Œæ˜¯ AndroidStudio/","link":"","permalink":"https://edward7zhang.github.io/2017/06/09/Android Chapter I. ç£¨äººçš„ä¸æ˜¯ Android è€Œæ˜¯ AndroidStudio/","excerpt":"è§£å†³ Android Studio åˆ›å»ºé¡¹ç›®æ—¶æå…¶çš„æ…¢çš„å°´å°¬Android Studio åˆ›å»ºæ–°é¡¹ç›®çš„æ—¶å€™ï¼Œä¼šåœ¨è¿›åº¦æ¡çš„ç•Œé¢æ»ç•™å¾ˆä¹…ã€‚ æœ‰æ—¶å€™ä¸€å¤©éƒ½å¡åœ¨è¿™. æ‰“å¼€å…¶å®ƒé¡¹ç›®æœ‰äº›æ—¶å€™,ä¹Ÿä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚ è¿™é‡Œå†™å›¾ç‰‡æè¿°","text":"è§£å†³ Android Studio åˆ›å»ºé¡¹ç›®æ—¶æå…¶çš„æ…¢çš„å°´å°¬Android Studio åˆ›å»ºæ–°é¡¹ç›®çš„æ—¶å€™ï¼Œä¼šåœ¨è¿›åº¦æ¡çš„ç•Œé¢æ»ç•™å¾ˆä¹…ã€‚ æœ‰æ—¶å€™ä¸€å¤©éƒ½å¡åœ¨è¿™. æ‰“å¼€å…¶å®ƒé¡¹ç›®æœ‰äº›æ—¶å€™,ä¹Ÿä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚ è¿™é‡Œå†™å›¾ç‰‡æè¿° â™¦åˆ›å»ºå·¥ç¨‹ åŸå› ï¼šåœ¨åˆ›å»ºæ–°é¡¹ç›®çš„æ—¶å€™å¯¼è‡´è¿›åº¦æ¡ä¸€ç›´åœåœ¨ Gradle:Project: çš„ä¸»è¦åŸå› å°±æ˜¯ï¼Œä½ å¯¼å…¥çš„é¡¹ç›®ä¸ä½ çš„IDEç‰ˆæœ¬ä¸åŒ¹é…ï¼Œæ­¤è¿‡ç¨‹æ­£åœ¨ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„ gradleã€‚å¦‚æœç½‘ç»œæ¯å…·çš„è¯ï¼Œ å‘µå‘µ â€¦ è¿™é‡Œå†™å›¾ç‰‡æè¿° æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤æ¥å°±èƒ½å®Œç¾è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåªè¦ä¸¤æ­¥å°±OKäº†ï¼ŒHere we go ! æŸ¥çœ‹å¯¹åº”çš„ Gradle ç‰ˆæœ¬æ‰¾åˆ°ä½ åˆ›å»ºé¡¹ç›®æ—¶çš„ä¿å­˜è·¯å¾„ï¼Œé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ gradle æ–‡ä»¶å¤¹ è¿™é‡Œå†™å›¾ç‰‡æè¿° â™¦æ‰¾åˆ° gradle æ–‡ä»¶å¤¹ æ¥ç€åŒå‡»è¿›å…¥ gradle æ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ° wrapper\\gradle-wrapper.properties æ–‡ä»¶ è¿™é‡Œå†™å›¾ç‰‡æè¿° â™¦gradle-wrapper.properties æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ distributionBase=GRADLE_USER_HOMEdistributionPath=wrapper/distszipStoreBase=GRADLE_USER_HOMEzipStorePath=wrapper/distsdistributionUrl=https\\://services.gradle.org/distributions/gradle-3.3-all.zipåœ¨æœ€åä¸€è¡Œå¯ä»¥çœ‹åˆ°ï¼Œå½“å‰é¡¹ç›®ä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯ gradle-3.3-allï¼Œå¦‚æœä½ çš„ç”µè„‘ä¸Šï¼Œå·²ç»ä¸‹è½½äº†è¿™ä¸ªç‰ˆæœ¬ï¼Œé‚£ä¹ˆé¡¹ç›®å¾ˆå¿«å°±æ‰“å¼€äº†ã€‚å½“ç„¶ï¼Œ å¦‚æœä¸å­˜åœ¨çš„è¯ï¼Œè‚¯å®šæ˜¯éœ€è¦ä¸‹è½½çš„ â€¦ å‘µå‘µ ä½ å¯ä»¥åœ¨ä»¥ä¸‹ä½ç½®æ‰¾åˆ°ç”µè„‘ä¸Šå®‰è£…äº†ä»€ä¹ˆç‰ˆæœ¬çš„ Gradleï¼š 1%USERPROFILE%\\.gradle\\wrapper\\dists è¿™é‡Œå†™å›¾ç‰‡æè¿° æŸ¥çœ‹å½“å‰å·²å®‰è£…çš„ Gradle ç‰ˆæœ¬æ³¨æ„ï¼šæœ‰äº›æ—¶å€™ï¼Œä½ ä¼šå‘ç°ä½ åˆ›å»ºçš„é¡¹ç›®ä¸­æ ¹æœ¬æ²¡æœ‰ gradle æ–‡ä»¶å¤¹ã€‚ (æˆ‘æ“¦ï¼Œé‚£å²‚ä¸æ˜¯çæ¯”æ¯”äº†ï¼Ÿ) å½“é¡¹ç›®ä¸­ä¸å­˜åœ¨ gradle æ–‡ä»¶å¤¹çš„æ—¶å€™ï¼Œ è¿™ç§æƒ…å†µå’Œåˆ›å»ºæ–°çš„é¡¹ç›®æ˜¯ä¸€æ ·çš„ã€‚éƒ½é»˜è®¤ä½¿ç”¨ Android Studio ç‰ˆæœ¬å¯¹åº”çš„ gradle ç‰ˆæœ¬ï¼›ä¹Ÿå°±æ˜¯å¦‚æœä½ çš„ Android Studio ç‰ˆæœ¬è¶Šé«˜, å¯¹åº”çš„ gradle ç‰ˆæœ¬å°±è¶Šé«˜ â€¦ å…·ä½“çš„éœ€è¦åœ¨ Android å®˜ç½‘ æŸ¥çœ‹ï¼Œæˆ–è€…æŸ¥çœ‹ Android Studio å®‰è£…ç›®å½•ä¸‹çš„ gradle æ–‡ä»¶å¤¹ã€‚2. æ‰‹åŠ¨ä¸‹è½½å¯¹åº”çš„ Gradle ç‰ˆæœ¬å¾ˆå¤šæ—¶å€™ï¼Œè‡ªåŠ¨ä¸‹è½½ä¼š å¾ˆæ…¢ å¾ˆæ…¢ å¾ˆæ…¢ï¼ˆé‡è¦çš„äº‹æƒ…è¦è¯´å‡ éæ¥ç€ï¼Ÿè¿™å°±æ˜¯åˆ›å»ºé¡¹ç›®æ—¶å¡åŠå¤©çš„åŸå› ï¼‰ï¼Œæ¯•ç«Ÿä¸æ˜¯æ‰€æœ‰äººçš„ç½‘ç»œéƒ½é‚£ä¹ˆåŠ â€¦ æ€»æœ‰ç—›è‹¦çš„äººç¾¤ â€¦ è¿™ä¸ªæ—¶å€™ï¼Œå°±éœ€è¦æ‰‹åŠ¨ä¸‹è½½äº†ã€‚ æ‰‹åŠ¨ä¸‹è½½ä¹‹å‰ï¼Œéœ€è¦çŸ¥é“å½“å‰ Android Studio å¯¹åº”çš„ Gradle ç‰ˆæœ¬æ˜¯å¤šå°‘ â€¦ æ€ä¹ˆçœ‹å‘¢ï¼Ÿ æ–¹æ³•1ï¼šå®˜ç½‘æŸ¥çœ‹ â€¦ (ä¸æ¨è)æ–¹æ³•2ï¼šåœ¨æˆ‘ä»¬ä¸Šé¢æŸ¥çœ‹å½“å‰é¡¹ç›®å¯¹åº”çš„ Gradle ç‰ˆæœ¬æ—¶ï¼ˆé¡¹ç›®å\\gradle\\wrapper\\gradle-wrapper.properties ï¼‰ï¼Œè¿™é‡Œçš„å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„ç‰ˆæœ¬ï¼Œä½¿ç”¨è¿™ä¸ªé“¾æ¥ä¸‹è½½å³å¯ã€‚ 1distributionUrl=https\\://services.gradle.org/distributions/gradle-3.3-all.zip é‚£ä¹ˆæˆ‘ä»¬ä¸‹è½½å¥½äº†ï¼Œè¦ä¿å­˜åœ¨å“ªé‡Œå‘¢ï¼Œä¸æ€¥ï¼Œæˆ‘ä»¬ç»“åˆä¸‹é¢è¿™ä¸ªæ–¹æ³•ä¸€èµ·çœ‹ æ–¹æ³•3ï¼šï¼ˆæœªåˆ›å»ºé¡¹ç›®çš„å…„å¼Ÿï¼‰æ‰“å¼€ Android Studioï¼Œåˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ï¼Œå½“å‡ºç°è¿›åº¦æ¡çš„æ—¶å€™. (ä¸€èˆ¬æ¥è¯´ä¼šå¡åœ¨è¿™é‡Œ.) æ­¤æ—¶è«æ…Œï¼Œ é‡ç‚¹æ¥äº† æ‰“å¼€è¿™ä¸ªè·¯å¾„ï¼š %USERPROFILE%\\.gradle\\wrapper\\dists ï¼Œä¸å‡ºæ„å¤–, ä½ ä¼šçœ‹åˆ°ä¸€ä¸ªåŒ…å«ç‰ˆæœ¬ä¿¡æ¯çš„æ–‡ä»¶å¤¹.( å¦‚æœæ²¡æœ‰çœ‹åˆ°ï¼Œé‚£å°±ç­‰ç­‰ â€¦ ) è¿™é‡Œå†™å›¾ç‰‡æè¿° æ‰“å¼€è¿™ä¸ªç‰ˆæœ¬æ–‡ä»¶å¤¹ï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªéšæœºç”Ÿæˆçš„æ–‡ä»¶å¤¹ï¼š( è¿™ä¸ªæ–‡ä»¶å¤¹ç‰¹åˆ«éœ€è¦æ³¨æ„ï¼Œå› ä¸ºè¿™æ˜¯å…³é”® ã€‚æœ‰äº›æ—¶å€™ï¼Œä½ ä¼šå‘ç°ï¼Œæ˜æ˜å·²ç»ä¸‹è½½äº†å¯¹åº”ç‰ˆæœ¬çš„ Gradleï¼Œä½†æ˜¯è«åå…¶å¦™çš„åˆä¸‹è½½äº†ä¸€æ¬¡ã€‚å°±æ˜¯å› ä¸ºè¿™ä¸ªéšæœºæ–‡ä»¶å¤¹ä¸å¯¹å¯¼è‡´çš„ã€‚è§£å†³æ–¹æ³•æ˜¯ï¼Œåœ¨æ¯ä¸ªéšæœºæ–‡ä»¶å¤¹ä¸­éƒ½ æ‹·è´ ä¸€ä»½ä½ ä¸‹è½½å¥½çš„ gradle-ç‰ˆæœ¬-all.zip å°±è¡Œäº† ) è¿™é‡Œå†™å›¾ç‰‡æè¿° éšæœºç”Ÿæˆçš„æ–‡ä»¶å¤¹å¦‚æœä¸Šé¢çš„éšæœºæ–‡ä»¶å¤¹æ²¡æœ‰ç”Ÿæˆ, é‚£å°±ç­‰ç­‰ â€¦. é€šè¿‡ä»¥ä¸Šç¿»å±±è¶Šå²­ï¼Œæˆ‘ä»¬åªéœ€è¦è¿™ä¸ªåŒ…å«éšæœºæ–‡ä»¶å¤¹çš„è·¯å¾„ â€¦ å› ä¸ºæ‰‹åŠ¨ä¸‹è½½çš„ Gradle å¿…é¡»æ”¾åœ¨è¿™ä¸ªè‹›åˆ»çš„è·¯å¾„ä¸‹ï¼Œæ‰æœ‰æ•ˆ ã€‚ ä¸€å®šè¦æŒ‰ç…§å¯¹åº”çš„ç‰ˆæœ¬ä¸‹è½½å“¦ï¼Œå¹¶ä¸”ä¸€å®šè¦æ”¾åœ¨åˆšåˆšåƒè¾›ä¸‡è‹¦ç”Ÿæˆçš„éšæœºæ–‡ä»¶å¤¹çš„è·¯å¾„ä¸­â€¦ ä¹‹åï¼Œé‡å¯ Android Studioï¼Œå†æ¬¡åˆ›å»ºæ–°é¡¹ç›®ï¼Œä½ å°±ä¼šå‘ç° â€¦ å“‡å¡ï¼Œè¿™ä¹ˆå¿« ??? è¿™é‡Œå†™å›¾ç‰‡æè¿° ç›¸è§æ¨æ™š hhhå¦‚æœå¤§å®¶å¯¹è¿™æœ‰è¶£å®ç”¨çš„æŠ€æœ¯è´´æ„Ÿå…´è¶£æˆ‘åæœŸä¼šç»§ç»­åŠªåŠ›çš„ï¼è¯·å¤§å®¶æ‰«æäºŒç»´ç ï¼å…³æ³¨æˆ‘ï¼ è¿™é‡Œå†™å›¾ç‰‡æè¿° è¿™é‡Œå†™å›¾ç‰‡æè¿°","categories":[],"tags":[{"name":"Android","slug":"Android","permalink":"https://edward7zhang.github.io/tags/Android/"}]},{"title":"Access denied for user 'root'@'localhost' (using password YES)","slug":"Access denied for user 'root'@'localhost' (using password YES)","date":"2017-06-09T12:43:13.000Z","updated":"2017-09-15T04:23:30.106Z","comments":true,"path":"2017/06/09/Access denied for user 'root'@'localhost' (using password YES)/","link":"","permalink":"https://edward7zhang.github.io/2017/06/09/Access denied for user 'root'@'localhost' (using password YES)/","excerpt":"Access denied for user â€˜rootâ€™@â€™localhostâ€™ (using password:YES)å®‰è£…æˆåŠŸçš„MySQLï¼Œå†æ¬¡ç™»å½•é—®é¢˜ã€‚","text":"Access denied for user â€˜rootâ€™@â€™localhostâ€™ (using password:YES)å®‰è£…æˆåŠŸçš„MySQLï¼Œå†æ¬¡ç™»å½•é—®é¢˜ã€‚ 1.ç™»å½•å‡ºç°Access denied for user â€˜rootâ€™@â€™localhostâ€™ (using password:YES)é—®é¢˜ è®¤å‡†ç™»å½•å‘½ä»¤æ˜¯å¦å†™æ­£ç¡®ï¼Œè¯·ä¸€å®šçœ‹ä»”ç»†äº†ã€‚ 1mysql -hlocalhost -uroot -p ç„¶åè¾“å…¥å¯†ç ã€‚ç”¨æˆ·åä¸€å®šä¸ºrootã€‚è¾“é”™å°±æ˜¯å¦‚ä¸Šé—®é¢˜ã€‚ 2.æ‰¾ä¸åˆ°é»˜è®¤çš„Cï¼š//pragramdataä¸‹MySQLæ•°æ®åº“æ–‡ä»¶é—®é¢˜ åœ¨win10ä¸­programdataæ–‡ä»¶å¤¹æ˜¯è¢«éšè—äº†çš„ï¼Œæ˜¾ç¤ºéšè—å³å¯ã€‚ å¦‚æœè¦å°†å·²å­˜åœ¨çš„æ•°æ®åº“å­˜æ”¾è·¯å¾„æ”¹ä¸ºè‡ªå·±æƒ³è¦çš„ï¼ŒæŠŠåŸæ–‡ä»¶å‰ªåˆ‡åˆ°ç›®æ ‡è·¯å¾„ä¸‹ã€‚ ç„¶åï¼Œæ›´æ”¹my.inié…ç½®æ–‡ä»¶ä¸­çš„datadirå€¼ä¸ºç›®æ ‡è·¯å¾„ã€‚ é‡å¯MySQLå³å¯ã€‚ æ³¨æ„ï¼š å¦‚æœä¿®æ”¹äº†datadirè·¯å¾„ï¼Œä½†æ˜¯æ²¡æœ‰å°†åŸæ–‡ä»¶æ‹·è´è¿‡æ¥ï¼Œä¼šå‡ºç°æ— æ³•å¯åŠ¨MySQLã€‚ CreatedbyEdwardZhangâˆ£ä¸€ä¸ªä¸åªåšæŠ€æœ¯çš„å…¬ä¼—å· é•¿æŒ‰ï¼Œè¯†åˆ«äºŒç»´ç ï¼ŒåŠ å…³æ³¨","categories":[],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"https://edward7zhang.github.io/tags/MySQL/"}]},{"title":"åˆ©ç”¨ Github+Hexo æ­å»ºBlog","slug":"åˆ©ç”¨ Github+Hexo æ­å»ºBlog","date":"2016-06-08T09:27:13.000Z","updated":"2019-03-04T07:38:28.907Z","comments":true,"path":"2016/06/08/åˆ©ç”¨ Github+Hexo æ­å»ºBlog/","link":"","permalink":"https://edward7zhang.github.io/2016/06/08/åˆ©ç”¨ Github+Hexo æ­å»ºBlog/","excerpt":"Blog å°±æ˜¯ç”¨æ¥è®°å½•è‡ªå·±çš„ç”Ÿæ´»æˆ–æ˜¯å‘è¡¨è‡ªå·±çš„è§è§£çš„ä¸€ç§ç½‘ç»œæ—¥è®°ã€‚æ—¢ç„¶ä¸€åˆ‡äº’è”ç½‘çš„åˆè¡·æ˜¯ Freeï¼ˆè‡ªç”±ï¼‰ Freeï¼ˆå…è´¹ï¼‰ï¼Œé‚£æˆ‘ä»¬åˆä½•å¿…ä¸ºäº†è®°æ—¥è®°è€Œæ–¥å·¨èµ„å‘¢ï¼Ÿ wikipedia","text":"Blog å°±æ˜¯ç”¨æ¥è®°å½•è‡ªå·±çš„ç”Ÿæ´»æˆ–æ˜¯å‘è¡¨è‡ªå·±çš„è§è§£çš„ä¸€ç§ç½‘ç»œæ—¥è®°ã€‚æ—¢ç„¶ä¸€åˆ‡äº’è”ç½‘çš„åˆè¡·æ˜¯ Freeï¼ˆè‡ªç”±ï¼‰ Freeï¼ˆå…è´¹ï¼‰ï¼Œé‚£æˆ‘ä»¬åˆä½•å¿…ä¸ºäº†è®°æ—¥è®°è€Œæ–¥å·¨èµ„å‘¢ï¼Ÿ wikipedia â™ â™¥â™¦â™£ ï¼ˆFrom.wikipediaï¼‰ So å¹²è´§ coming!ä»Šå¤©EdwardZhangå°±æ¥å¸¦å¤§å®¶çœ‹çœ‹å¦‚ä½•0è´¹ç”¨æ­å»ºç¬¦åˆè‡ªå·±å®¡ç¾çš„Blogï¼Here we go ~ åˆ©ç”¨ Github+Hexo è¿›è¡Œæ­å»ºï¼ˆä»¥ä¸‹è¿‡ç¨‹åŸºäºWindowsç³»ç»Ÿï¼‰å‡†å¤‡å·¥ä½œï¼š&emsp;1.å®‰è£…Node.js&emsp;&ensp;&ensp;ä¸‹è½½åœ°å€ï¼šä¼ é€é—¨&emsp;&ensp;&ensp;å» NodeJs å®˜ç½‘ä¸‹è½½ç›¸åº”ç‰ˆæœ¬ï¼Œè¿›è¡Œå®‰è£…å³å¯ã€‚&emsp;&ensp;&ensp;å¯ä»¥é€šè¿‡node -vçš„å‘½ä»¤æ¥æµ‹è¯•NodeJSæ˜¯å¦å®‰è£…æˆåŠŸ è¿™é‡Œå†™å›¾ç‰‡æè¿° &emsp;2.å®‰è£…Git&emsp;&ensp;&ensp;ä¸‹è½½åœ°å€ï¼šä¼ é€é—¨&emsp;&ensp;&ensp;å» Git å®˜ç½‘ä¸‹è½½ç›¸åº”ç‰ˆæœ¬ï¼Œè¿›è¡Œå®‰è£…å³å¯ã€‚ git1 git2 git3 git4 git5 &emsp;&ensp;&ensp;å¯ä»¥é€šè¿‡git â€“versionçš„å‘½ä»¤æ¥æµ‹è¯•gitæ˜¯å¦å®‰è£…æˆåŠŸ gitcmd &emsp;3.æ³¨å†ŒGithubè´¦å·&emsp;&ensp;&ensp;å» Github å®˜ç½‘è¿›è¡Œæ³¨å†Œå³å¯ã€‚&emsp;&ensp;&ensp;æ³¨å†Œå®Œä¹‹åè®°å¾—æ·»åŠ  SSH Keyã€‚&emsp;&ensp;&ensp;è¿™ä¸ª SSH Keyæ˜¯ä¸€ä¸ªè®¤è¯ï¼Œè®©githubè¯†åˆ«ç»‘&emsp;&ensp;&ensp;è¿™å°æœºå™¨ï¼Œå…è®¸è¿™å°æœºå™¨æäº¤ã€‚æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š&emsp;&ensp;&ensp;cd ~/.ssh&emsp;&ensp;&ensp;~è¿™ä¸ªç¬¦å·ï¼Œè¡¨ç¤ºåœ¨ç”¨æˆ·ç›®å½•ä¸‹&emsp;&ensp;&ensp;æ‰§è¡Œä»£ç å¦‚æœæç¤ºï¼šNo such file or directory è¯´æ˜ä½ æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨gitã€‚&emsp;&ensp;&ensp;ä¸‹é¢å°±è¯´ä¸‹æ€ä¹ˆé…ç½®SSH Keyã€‚&emsp;&ensp;&ensp;ç”Ÿäº§æ–°çš„SSH Keyé…ç½®&emsp;&ensp;&ensp;åœ¨Git Bashæ‰§è¡Œä»£ç ï¼šï¼ˆæ­¤å¤„æœ‰å‘ï¼è¦æ³¨æ„è¿è¡ŒGit Bashæ—¶å³é”®ä½¿ç”¨ç®¡ç†å‘˜èº«ä»½è¿è¡Œï¼‰&emsp;&ensp;&ensp;ssh-keygen -t rsa -C &quot;your email address&quot;&emsp;&ensp;&ensp;è®°å¾—ä¿®æ”¹æˆä½ è‡ªå·±é‚®ç®±åœ°å€ã€‚&emsp;&ensp;&ensp;æˆåŠŸåä¼šç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶id_rsa ä»¥åŠid_rsa.pubã€‚&emsp;&ensp;&ensp;è¿™ä¸¤ä¸ªæ–‡ä»¶åœ¨åˆšæ‰ç”¨æˆ·çš„.sshç›®å½•ä¸‹&emsp;&ensp;&ensp;å¦‚å›¾ï¼š 12345 &emsp;&ensp;&ensp;id_rsa&emsp;&ensp;&ensp;id_rsa.pub 0 &emsp;&ensp;&ensp;ä¹‹ååœ¨githubæ·»åŠ SSH Key,åœ¨ä»»æ„ç•Œé¢å³ä¸Šè§’&emsp;&ensp;&ensp;ç‚¹å‡»ä½ çš„å¤´åƒï¼Œé€‰æ‹©Settings-&gt; SSH keys-&gt;New SSH key è¿™é‡Œå†™å›¾ç‰‡æè¿°&emsp;&ensp;&ensp;Congratulationsï¼&emsp;&ensp;&ensp;æ·»åŠ æˆåŠŸï¼ æ­å»ºåšå®¢ï¼š&emsp;1.å®‰è£…Hexo&emsp;&ensp;&ensp;åœ¨æœ¬åœ°æ–°å»ºä¸€ä¸ªBlogæ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å³é”®ï¼Œé€‰æ‹©Git Bashã€‚ è¿™é‡Œå†™å›¾ç‰‡æè¿° è¾“å…¥æŒ‡ä»¤å®‰è£…hexoï¼šnpm install -g hexo&emsp;&ensp;&ensp;ç­‰å®‰è£…å®Œæ¯•ï¼Œé€šè¿‡è¾“å…¥hexoçš„å‘½ä»¤æ¥æµ‹è¯•Hexoæ˜¯å¦å®‰è£…æˆåŠŸï¼ŒæˆåŠŸå¦‚ä¸‹å›¾å±•ç¤ºï¼š è¿™é‡Œå†™å›¾ç‰‡æè¿° æ¥ç€åˆå§‹åŒ–Hexoï¼šhexo init hexo&emsp;&ensp;&ensp;åˆå§‹åŒ–æˆåŠŸä¼šæ˜¾ç¤ºStart blogging with Hexo! 1 &emsp;&ensp;&ensp;è¿™æ—¶åœ¨ä½ åˆšæ‰åˆ›å»ºçš„Blogé‡Œé¢ä¼šå¤šå‡ºä¸€ä¸ªhexoæ–‡ä»¶ è¿™é‡Œå†™å›¾ç‰‡æè¿° &emsp;&ensp;&ensp;è¿›å…¥åˆ°hexoç›®å½•ï¼Œè¾“å…¥æŒ‡ä»¤npm install&emsp;&ensp;&ensp;å®‰è£…ä¾èµ–æ–‡ä»¶ä»¥åŠéƒ¨ç½²å½¢æˆæ–‡ä»¶&emsp;&ensp;&ensp;æ‰“å¼€hexoç›®å½• cd hexo&emsp;&ensp;&ensp;å®‰è£…ä¾èµ–æ–‡ä»¶ npm install&emsp;&ensp;&ensp;éƒ¨ç½²å½¢æˆæ–‡ä»¶ hexo generatehexo generate 123 &emsp;&ensp;&ensp;æœ€ååªå‰©ä¸‹è¿è¡Œserver&emsp;&ensp;&ensp;è·‘èµ·hexoæœåŠ¡&emsp;&ensp;&ensp;hexo server è¿™é‡Œå†™å›¾ç‰‡æè¿° &emsp;&ensp;&ensp;è¿™æ—¶æç¤º&emsp;&ensp;&ensp;Hexo is running at http://loalhost:4000/.&emsp;&ensp;&ensp;æ¥ç€æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥http://localhost:4000&emsp;&ensp;&ensp;ä¾¿å¯çœ‹åˆ°é»˜è®¤çš„åšå®¢ï¼Œå¦‚å›¾ï¼š 12 &emsp;&ensp;&ensp;è‡³æ­¤ï¼Œhexoå·²ç»å®‰è£…å®Œæ¯•ã€‚&emsp;é…ç½®githubPageï¼š&emsp;&ensp;&ensp;ç™»å½•githubï¼Œç‚¹å‡»â€œNew respositoryâ€ &emsp;&ensp;&ensp;æ–°å»ºä¸€ä¸ªä»“åº“&emsp;&ensp;&ensp;è¾“å…¥ä»“åº“åï¼šä½ çš„githubåç§°,github.io&emsp;&ensp;&ensp;ï¼ˆè¿™é‡Œåƒä¸‡ä¸è¦å¿ƒå­˜ä¾¥å¹¸éšæ„è¾“åŸŸåã€‚ã€‚ã€‚åæœä½ æ‡‚ï¼‰&emsp;&ensp;&ensp;ç„¶åç‚¹å‡»Create repositoryã€‚ è¿™é‡Œå†™å›¾ç‰‡æè¿° &emsp;&ensp;&ensp;æ³¨æ„ï¼šè¿™è¾¹çš„åˆ›å»ºåå­—&emsp;&ensp;&ensp;ä¸€å®šè¦ç”¨çš„githubçš„ç”¨æˆ·åï¼&emsp;&ensp;&ensp;ä¸€å®šè¦ç”¨çš„githubçš„ç”¨æˆ·åï¼&emsp;&ensp;&ensp;ä¸€å®šè¦ç”¨çš„githubçš„ç”¨æˆ·åï¼&emsp;å¯ç”¨GitHub Page&emsp;&ensp;&ensp;ç‚¹å‡»å³è¾¹çš„â€œSettingâ€èœå•è¿›å…¥è®¾ç½® è¿™é‡Œå†™å›¾ç‰‡æè¿° &emsp;&ensp;&ensp;æ‹‰åˆ°æœ€ä¸‹é¢&emsp;&ensp;&ensp;ç‚¹å‡» Choose a theme&emsp;&ensp;&ensp;éšä¾¿é€‰æ‹©ä¸€ä¸ªæ ·å¼ ä¹‹åä¼šç”¨è‡ªå·±çš„hexoè¦†ç›–&emsp;&ensp;&ensp;ç‚¹å‡»â€Publish pageâ€&emsp;&ensp;&ensp;å‘å¸ƒgithubé»˜è®¤ç”Ÿæˆçš„ä¸€ä¸ªé™æ€ç«™ç‚¹&emsp;&ensp;&ensp;è¯•ç€æ‰“å¼€è‡ªå·±åœ¨githubçš„é™æ€ç½‘å€ï¼Œ&emsp;&ensp;&ensp;æˆ‘çš„https://Edward7Zhang.github.io ï¼Œ&emsp;&ensp;&ensp;ä½ ä¼šå‘ç°ï¼Œ&emsp;&ensp;&ensp;æ‰“å¼€æ˜¯ä½ è‡ªå·±åˆšæ‰é€‰æ‹©é™æ€ç«™ç‚¹æ¨¡ç‰ˆã€‚&emsp;&ensp;&ensp;å°†æœ¬åœ°hexoé¡¹ç›®æ‰˜ç®¡åˆ°Github&emsp;&ensp;&ensp;æ‰“å¼€ä¿®æ”¹hexoç›®å½•ä¸‹é…ç½®æ–‡ä»¶_config.yml è¿™é‡Œå†™å›¾ç‰‡æè¿° &emsp;&ensp;&ensp;ç¼–è¾‘æœ€åé¢çš„deployå±æ€§ï¼ŒåŠ å…¥ä»£ç ï¼š 1234type: gitrepository: git@github.com:your-github-name/your-github-name.github.io.gitbranch: master typeä½¿ç”¨æ˜¯gitã€‚ &emsp;&ensp;&ensp;repositoryå±æ€§æ”¹æˆä½ çš„åˆšæ‰åˆ›å»ºä»“åº“gitåœ°å€ã€‚&emsp;&ensp;&ensp;åˆ†æ”¯branchå¡«å†™masterã€‚&emsp;&ensp;&ensp;è¿™è¾¹è¯´ä¸‹æœ¬åœ°ç½‘ç«™é…ç½®æ–‡ä»¶ _config.yml&emsp;&ensp;&ensp;ç½‘ç«™çš„é…ç½®æ–‡ä»¶ï¼Œ&emsp;&ensp;&ensp;ä½ å¯ä»¥åœ¨è¿™é‡Œé…ç½®ä¸€äº›åŸºæœ¬ä¿¡æ¯ã€‚&emsp;&ensp;&ensp;ï¼ˆåªè¦ä½ è¿‡äº†å››çº§åº”è¯¥éƒ½æ‡‚ /// ///ï¼‰&emsp;&ensp;&ensp;æ ¹æ®è‡ªå·±çš„éœ€è¦ä¿®æ”¹å³å¯ï¼&emsp;&ensp;&ensp;å®‰è£…hexo-deployer-gitæ’ä»¶ 1cnpm install hexo-deployer-git --save è¿™é‡Œå†™å›¾ç‰‡æè¿° &emsp;&ensp;&ensp;éƒ¨ç½²ä½ æœ¬åœ°çš„ä¸»é¢˜åˆ°githubä¸Š &emsp;&ensp;&ensp;ä»£ç å¦‚ä¸‹ï¼Œæ¯æ¬¡ä¿®æ”¹æœ¬åœ°ä¸»é¢˜ï¼Œéƒ½éœ€è¦æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼š 123hexo cleanhexo generator #ç®€å†™ hexo ghexo deploy #ç®€å†™ hexo d è¿™é‡Œå†™å›¾ç‰‡æè¿° è¿™é‡Œå†™å›¾ç‰‡æè¿° è¿™é‡Œå†™å›¾ç‰‡æè¿° &emsp;&ensp;&ensp;æœ€åçœ‹ä¸‹ï¼Œéƒ¨ç½²åˆ°githubä¸Šçš„æ•ˆæœï¼ è¿™é‡Œå†™å›¾ç‰‡æè¿° &emsp;&ensp;&ensp;Congratulation!!!Finished this project! â€‹&emsp;&ensp;&ensp;æ˜¯ä¸æ˜¯ç¬é—´æ„Ÿè§‰è‡ªå·±å¼ºçš„ä¸è¡Œ è¿™é‡Œå†™å›¾ç‰‡æè¿° &emsp;&ensp;&ensp;OK,ä»¥ä¸Šä¸ºWindowsä¸‹ä½¿ç”¨Hexo+Githubæ­å»ºä¸ªäººåšå®¢ã€‚ æ€ä¹ˆæ ·No Payï¼ŒMore Gain è¿™é‡Œå†™å›¾ç‰‡æè¿°","categories":[],"tags":[{"name":"Blog","slug":"Blog","permalink":"https://edward7zhang.github.io/tags/Blog/"}]},{"title":"Hello World","slug":"hello-world","date":"2016-06-07T18:26:34.000Z","updated":"2018-04-27T10:32:43.231Z","comments":true,"path":"2016/06/08/hello-world/","link":"","permalink":"https://edward7zhang.github.io/2016/06/08/hello-world/","excerpt":"","text":"Welcome to EdwardZhangâ€™s Blog! This is my first step,there are more about my codingLife and insLife.You can ask me on GitHub or Weibo. -haveaniceday.","categories":[],"tags":[]}]}