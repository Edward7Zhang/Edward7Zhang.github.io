<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>EdwardZhang&#39;s Blog</title>
  
  <subtitle>Life starts at the end of your comfort zone. âš½ ğŸ‚ ğŸƒ ğŸš´ âŒ¨ï¸</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://edward7zhang.github.io/"/>
  <updated>2019-02-23T10:38:51.323Z</updated>
  <id>https://edward7zhang.github.io/</id>
  
  <author>
    <name>EdwardZhang</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ByteDanceã€ä¸€é¢æ€»ç»“ã€‘</title>
    <link href="https://edward7zhang.github.io/2019/02/18/ByteDance%E3%80%90%E4%B8%80%E9%9D%A2%E6%80%BB%E7%BB%93%E3%80%91/"/>
    <id>https://edward7zhang.github.io/2019/02/18/ByteDanceã€ä¸€é¢æ€»ç»“ã€‘/</id>
    <published>2019-02-18T11:07:14.000Z</published>
    <updated>2019-02-23T10:38:51.323Z</updated>
    
    <content type="html"><![CDATA[<p>å¤§æ¦‚åœ¨æ•°å¤©å‰æŠ•é€’äº†å­—èŠ‚è·³åŠ¨-æŠ–éŸ³æ–¹å‘çš„å®ä¹ ç”Ÿå²—ä½<br>æ˜¨å¤©æ¥åˆ°äº†é¢è¯•é€šçŸ¥ï¼Œä»Šå¤©é¢è¯•åå¯¹æ¶‰åŠåˆ°çš„é—®é¢˜è¿›è¡Œä¸€ä¸ªå¤ç›˜ã€‚ï¼ˆå­—èŠ‚è·³åŠ¨æœç„¶åä¸è™šä¼ â€¦é¢è¯•å®˜ç›¸å½“äº²åˆ‡ä¸”å–„äºå¾ªå¾ªå–„è¯±æ¥å¼•å¯¼æˆ‘å›ç­”é—®é¢˜ï¼‰</p><h2 id="1-Javaä¸­çš„å¼•ç”¨ç±»å‹æœ‰æ²¡æœ‰ä»€ä¹ˆäº†è§£ï¼Ÿ"><a href="#1-Javaä¸­çš„å¼•ç”¨ç±»å‹æœ‰æ²¡æœ‰ä»€ä¹ˆäº†è§£ï¼Ÿ" class="headerlink" title="1.Javaä¸­çš„å¼•ç”¨ç±»å‹æœ‰æ²¡æœ‰ä»€ä¹ˆäº†è§£ï¼Ÿ"></a>1.Javaä¸­çš„å¼•ç”¨ç±»å‹æœ‰æ²¡æœ‰ä»€ä¹ˆäº†è§£ï¼Ÿ</h2><p>Java.lang.refæ˜¯Javaç±»åº“ä¸­æ¯”è¾ƒç‰¹æ®Šçš„ä¸€ä¸ªåŒ…ï¼Œå®ƒæä¾›äº†ä¸Javaåƒåœ¾å›æ”¶å™¨å¯†åˆ‡ç›¸å…³çš„å¼•ç”¨ç±»ã€‚</p><pre><code>StrongReferenceï¼ˆå¼ºå¼•ç”¨ï¼‰SoftReferenceï¼ˆè½¯å¼•ç”¨ï¼‰WeakReferenceï¼ˆå¼±å¼•ç”¨ï¼‰PhantomReferenceï¼ˆè™šå¼•ç”¨ï¼‰</code></pre><h3 id="å¼•ç”¨ç±»å‹å¯¹æ¯”"><a href="#å¼•ç”¨ç±»å‹å¯¹æ¯”" class="headerlink" title="å¼•ç”¨ç±»å‹å¯¹æ¯”"></a>å¼•ç”¨ç±»å‹å¯¹æ¯”</h3><table><thead><tr><th>åºå·</th><th>å¼•ç”¨ç±»å‹</th><th>å–å¾—ç›®æ ‡å¯¹è±¡æ–¹å¼</th><th>åƒåœ¾å›æ”¶æ¡ä»¶</th><th>æ˜¯å¦å¯èƒ½å†…å­˜æ³„æ¼</th></tr></thead><tbody><tr><td>1</td><td>å¼ºå¼•ç”¨</td><td>ç›´æ¥è°ƒç”¨</td><td>ä¸å›æ”¶</td><td>å¯èƒ½</td></tr><tr><td>2</td><td>è½¯å¼•ç”¨</td><td>é€šè¿‡ get()æ–¹æ³•</td><td>è§†å†…å­˜æƒ…å†µå›æ”¶</td><td>ä¸å¯èƒ½</td></tr><tr><td>3</td><td>å¼±å¼•ç”¨</td><td>é€šè¿‡ get()æ–¹æ³•</td><td>æ°¸è¿œå›æ”¶</td><td>ä¸å¯èƒ½</td></tr><tr><td>4</td><td>è™šå¼•ç”¨</td><td>æ— æ³•å–å¾—</td><td>ä¸å›æ”¶</td><td>å¯èƒ½</td></tr></tbody></table><h4 id="1-StrongReferenceï¼ˆå¼ºå¼•ç”¨ï¼‰"><a href="#1-StrongReferenceï¼ˆå¼ºå¼•ç”¨ï¼‰" class="headerlink" title="1.StrongReferenceï¼ˆå¼ºå¼•ç”¨ï¼‰"></a>1.StrongReferenceï¼ˆå¼ºå¼•ç”¨ï¼‰</h4><p>å¦‚æœä¸€ä¸ªå¯¹è±¡å…·æœ‰å¼ºå¼•ç”¨ï¼Œé‚£åƒåœ¾å›æ”¶å™¨ç»ä¸ä¼šå›æ”¶å®ƒã€‚å½“å†…å­˜ç©ºé—´ä¸è¶³ï¼ŒJavaè™šæ‹Ÿæœºå®æ„¿æŠ›å‡ºOutOfMemoryErroré”™è¯¯ï¼Œä½¿ç¨‹åºå¼‚å¸¸ç»ˆæ­¢ï¼Œä¹Ÿä¸ä¼šé éšæ„å›æ”¶å…·æœ‰å¼ºå¼•ç”¨çš„å¯¹è±¡æ¥è§£å†³å†…å­˜ä¸è¶³çš„é—®é¢˜ã€‚</p><p><strong>ç¤ºä¾‹</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">String[] arr = <span class="keyword">new</span> String[]&#123;<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>&#125;;</div></pre></td></tr></table></figure><h4 id="2-SoftReferenceï¼ˆè½¯å¼•ç”¨ï¼‰"><a href="#2-SoftReferenceï¼ˆè½¯å¼•ç”¨ï¼‰" class="headerlink" title="2.SoftReferenceï¼ˆè½¯å¼•ç”¨ï¼‰"></a>2.SoftReferenceï¼ˆè½¯å¼•ç”¨ï¼‰</h4><p>å¦‚æœä¸€ä¸ªå¯¹è±¡åªå…·æœ‰è½¯å¼•ç”¨ï¼Œå¦‚æœå†…å­˜ç©ºé—´è¶³å¤Ÿï¼Œåƒåœ¾å›æ”¶å™¨å°±ä¸ä¼šå›æ”¶å®ƒï¼›å¦‚æœå†…å­˜ç©ºé—´ä¸è¶³ï¼Œå°±ä¼šå›æ”¶è¿™äº›å¯¹è±¡çš„å†…å­˜ã€‚åªè¦åƒåœ¾å›æ”¶å™¨æ²¡æœ‰å›æ”¶å®ƒï¼Œè¯¥å¯¹è±¡å°±å¯ä»¥è¢«ç¨‹åºä½¿ç”¨ã€‚è½¯å¼•ç”¨å¯ç”¨æ¥å®ç°å†…å­˜æ•æ„Ÿçš„é«˜é€Ÿç¼“å­˜ã€‚<br>è½¯å¼•ç”¨å¯ä»¥å’Œä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ï¼Œå¦‚æœè½¯å¼•ç”¨æ‰€å¼•ç”¨çš„å¯¹è±¡è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ï¼ŒJavaè™šæ‹Ÿæœºå°±ä¼šæŠŠè¿™ä¸ªè½¯å¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚</p><p><strong>ç¤ºä¾‹</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Example1</span></div><div class="line">SoftReference&lt;String[]&gt; softBean = <span class="keyword">new</span> SoftReference&lt;String[]&gt;(<span class="keyword">new</span> String[]&#123;<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>&#125;);</div><div class="line"></div><div class="line"><span class="comment">//Example2</span></div><div class="line">ReferenceQueue&lt;String[]&gt; referenceQueue = <span class="keyword">new</span> ReferenceQueue&lt;String[]&gt;();</div><div class="line">SoftReference&lt;String[]&gt; softBean = <span class="keyword">new</span> SoftReference&lt;String[]&gt;(<span class="keyword">new</span> String[]&#123;<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>&#125;, referenceQueue);</div></pre></td></tr></table></figure></p><h4 id="3-WeakReferenceï¼ˆå¼±å¼•ç”¨ï¼‰"><a href="#3-WeakReferenceï¼ˆå¼±å¼•ç”¨ï¼‰" class="headerlink" title="3.WeakReferenceï¼ˆå¼±å¼•ç”¨ï¼‰"></a>3.WeakReferenceï¼ˆå¼±å¼•ç”¨ï¼‰</h4><p>å¼±å¼•ç”¨ä¸è½¯å¼•ç”¨çš„åŒºåˆ«åœ¨äºï¼šåªå…·æœ‰å¼±å¼•ç”¨çš„å¯¹è±¡æ‹¥æœ‰æ›´çŸ­æš‚çš„ç”Ÿå‘½å‘¨æœŸã€‚åœ¨åƒåœ¾å›æ”¶å™¨çº¿ç¨‹æ‰«æå®ƒæ‰€ç®¡è¾–çš„å†…å­˜åŒºåŸŸçš„è¿‡ç¨‹ä¸­ï¼Œä¸€æ—¦å‘ç°äº†åªå…·æœ‰å¼±å¼•ç”¨çš„å¯¹è±¡ï¼Œä¸ç®¡å½“å‰å†…å­˜ç©ºé—´è¶³å¤Ÿä¸å¦ï¼Œéƒ½ä¼šå›æ”¶å®ƒçš„å†…å­˜ã€‚ä¸è¿‡ï¼Œç”±äºåƒåœ¾å›æ”¶å™¨æ˜¯ä¸€ä¸ªä¼˜å…ˆçº§å¾ˆä½çš„çº¿ç¨‹ï¼Œå› æ­¤ä¸ä¸€å®šä¼šå¾ˆå¿«å‘ç°é‚£äº›åªå…·æœ‰å¼±å¼•ç”¨çš„å¯¹è±¡ã€‚<br>â€‚â€‚â€‚â€‚å¼±å¼•ç”¨å¯ä»¥å’Œä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ï¼Œå¦‚æœå¼±å¼•ç”¨æ‰€å¼•ç”¨çš„å¯¹è±¡è¢«åƒåœ¾å›æ”¶ï¼ŒJavaè™šæ‹Ÿæœºå°±ä¼šæŠŠè¿™ä¸ªå¼±å¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚<br>â€‚â€‚â€‚â€‚<br><strong>ç¤ºä¾‹</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//Example1</div><div class="line">WeakReference&lt;String[]&gt; weakBean = new WeakReference&lt;String[]&gt;(new String[]&#123;&quot;a&quot;, &quot;b&quot;, &quot;c&quot;&#125;);</div><div class="line">//Example2</div><div class="line">ReferenceQueue&lt;String[]&gt; referenceQueue = new ReferenceQueue&lt;String[]&gt;();</div><div class="line">WeakReference&lt;String[]&gt; softBean = new WeakReference&lt;String[]&gt;(new String[]&#123;&quot;a&quot;, &quot;b&quot;, &quot;c&quot;&#125;, referenceQueue);</div></pre></td></tr></table></figure></p><h4 id="4-PhantomReferenceï¼ˆè™šå¼•ç”¨ï¼‰"><a href="#4-PhantomReferenceï¼ˆè™šå¼•ç”¨ï¼‰" class="headerlink" title="4.PhantomReferenceï¼ˆè™šå¼•ç”¨ï¼‰"></a>4.PhantomReferenceï¼ˆè™šå¼•ç”¨ï¼‰</h4><p>â€œè™šå¼•ç”¨â€é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å½¢åŒè™šè®¾ï¼Œä¸å…¶ä»–å‡ ç§å¼•ç”¨éƒ½ä¸åŒï¼Œè™šå¼•ç”¨å¹¶ä¸ä¼šå†³å®šå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡ä»…æŒæœ‰è™šå¼•ç”¨ï¼Œé‚£ä¹ˆå®ƒå°±å’Œæ²¡æœ‰ä»»ä½•å¼•ç”¨ä¸€æ ·ï¼Œåœ¨ä»»ä½•æ—¶å€™éƒ½å¯èƒ½è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ã€‚<br>è™šå¼•ç”¨ä¸»è¦ç”¨æ¥è·Ÿè¸ªå¯¹è±¡è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶çš„æ´»åŠ¨ã€‚è™šå¼•ç”¨ä¸è½¯å¼•ç”¨å’Œå¼±å¼•ç”¨çš„ä¸€ä¸ªåŒºåˆ«åœ¨äºï¼šè™šå¼•ç”¨å¿…é¡»å’Œå¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ã€‚å½“åƒåœ¾å›æ”¶å™¨å‡†å¤‡æ”¶ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æœå‘ç°å®ƒè¿˜æœ‰è™šå¼•ç”¨ï¼Œå°±ä¼šåœ¨å›æ”¶å¯¹è±¡çš„å†…å­˜ä¹‹å‰ï¼ŒæŠŠè¿™ä¸ªè™šå¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚</p><p><strong>ç¤ºä¾‹</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ReferenceQueue&lt;String[]&gt; referenceQueue = <span class="keyword">new</span> ReferenceQueue&lt;String[]&gt;();</div><div class="line">PhantomReference&lt;String[]&gt; referent = <span class="keyword">new</span> PhantomReference&lt;String&gt;(<span class="keyword">new</span> String[]&#123;<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>&#125;, referenceQueue);</div></pre></td></tr></table></figure></p><h2 id="2-Javaä¸­åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼æœ‰å“ªäº›"><a href="#2-Javaä¸­åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼æœ‰å“ªäº›" class="headerlink" title="2.Javaä¸­åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼æœ‰å“ªäº›"></a>2.Javaä¸­åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼æœ‰å“ªäº›</h2><h3 id="1-ç»§æ‰¿Threadç±»åˆ›å»ºçº¿ç¨‹ç±»"><a href="#1-ç»§æ‰¿Threadç±»åˆ›å»ºçº¿ç¨‹ç±»" class="headerlink" title="1.ç»§æ‰¿Threadç±»åˆ›å»ºçº¿ç¨‹ç±»"></a>1.ç»§æ‰¿Threadç±»åˆ›å»ºçº¿ç¨‹ç±»</h3><pre><code>(1) å®šä¹‰Threadç±»çš„å­ç±»ï¼Œå¹¶é‡å†™è¯¥ç±»çš„runæ–¹æ³•ï¼Œè¯¥runæ–¹æ³•çš„æ–¹æ³•ä½“å°±ä»£è¡¨äº†çº¿ç¨‹è¦å®Œæˆçš„ä»»åŠ¡ã€‚å› æ­¤æŠŠrun()æ–¹æ³•ç§°ä¸ºæ‰§è¡Œä½“ã€‚(2) åˆ›å»ºThreadå­ç±»çš„å®ä¾‹ï¼Œå³åˆ›å»ºäº†çº¿ç¨‹å¯¹è±¡ã€‚(3) è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„start()æ–¹æ³•æ¥å¯ç”¨è¯¥çº¿ç¨‹ã€‚</code></pre><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span>  <span class="class"><span class="keyword">class</span>  <span class="title">FirstThreadTest</span>  <span class="keyword">extends</span>  <span class="title">Thread</span> </span>&#123;</div><div class="line"><span class="keyword">int</span>  i  =  <span class="number">0</span>; <span class="comment">//é‡å†™runæ–¹æ³•ï¼Œrunæ–¹æ³•çš„æ–¹æ³•ä½“å°±æ˜¯ç°åœºæ‰§è¡Œä½“</span></div><div class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">void</span>  <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line"><span class="keyword">for</span> (; i &lt;  <span class="number">100</span>; i++) &#123;</div><div class="line">System.out.println(getName() +  <span class="string">" "</span>  + i);</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">static</span>  <span class="keyword">void</span>  <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span>  i  =  <span class="number">0</span>; i &lt;  <span class="number">100</span>; i++) &#123;</div><div class="line">System.out.println(Thread.currentThread().getName() +  <span class="string">" : "</span>  + i);</div><div class="line"><span class="keyword">if</span> (i ==  <span class="number">20</span>) &#123;</div><div class="line"><span class="keyword">new</span>  FirstThreadTest().start();</div><div class="line"><span class="keyword">new</span>  FirstThreadTest().start();</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç ä¸­Thread.currentThread()æ–¹æ³•è¿”å›å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡ã€‚GetName() æ–¹æ³•è¿”å›è°ƒç”¨è¯¥æ–¹æ³•çš„çº¿ç¨‹çš„åå­—ã€‚</p><h3 id="2-é€šè¿‡Runnableæ¥å£åˆ›å»ºçº¿ç¨‹ç±»"><a href="#2-é€šè¿‡Runnableæ¥å£åˆ›å»ºçº¿ç¨‹ç±»" class="headerlink" title="2.é€šè¿‡Runnableæ¥å£åˆ›å»ºçº¿ç¨‹ç±»"></a>2.é€šè¿‡Runnableæ¥å£åˆ›å»ºçº¿ç¨‹ç±»</h3><pre><code>ï¼ˆ1ï¼‰å®šä¹‰runnableæ¥å£çš„å®ç°ç±»ï¼Œå¹¶é‡å†™è¯¥æ¥å£çš„run()æ–¹æ³•ï¼Œè¯¥run()æ–¹æ³•çš„æ–¹æ³• ä½“åŒæ ·æ˜¯è¯¥çº¿ç¨‹çš„çº¿ç¨‹æ‰§è¡Œä½“ã€‚ï¼ˆ2ï¼‰åˆ›å»º Runnableå®ç°ç±»çš„å®ä¾‹ï¼Œå¹¶ä¾æ­¤å®ä¾‹ä½œä¸ºThreadçš„targetæ¥åˆ›å»ºThread å¯¹è±¡ï¼Œè¯¥Threadå¯¹è±¡æ‰æ˜¯çœŸæ­£çš„çº¿ç¨‹å¯¹è±¡ã€‚ï¼ˆ3ï¼‰è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„start()æ–¹æ³•æ¥å¯åŠ¨è¯¥çº¿ç¨‹ã€‚</code></pre><h3 id="3-é€šè¿‡Callableå’ŒFutureåˆ›å»ºçº¿ç¨‹"><a href="#3-é€šè¿‡Callableå’ŒFutureåˆ›å»ºçº¿ç¨‹" class="headerlink" title="3.é€šè¿‡Callableå’ŒFutureåˆ›å»ºçº¿ç¨‹"></a>3.é€šè¿‡Callableå’ŒFutureåˆ›å»ºçº¿ç¨‹</h3><pre><code>ï¼ˆ1ï¼‰åˆ›å»ºCallableæ¥å£çš„å®ç°ç±»ï¼Œå¹¶å®ç°call()æ–¹æ³•ï¼Œè¯¥call()æ–¹æ³•å°†ä½œä¸ºçº¿ç¨‹æ‰§è¡Œ ä½“ï¼Œå¹¶ä¸”æœ‰è¿”å›å€¼ã€‚ï¼ˆ2ï¼‰åˆ›å»ºCallableå®ç°ç±»çš„å®ä¾‹ï¼Œä½¿ç”¨FutureTaskç±»æ¥åŒ…è£…Callableå¯¹è±¡ï¼Œè¯¥ FutureTaskå¯¹è±¡å°è£…äº†è¯¥Callableå¯¹è±¡çš„call()æ–¹æ³•çš„è¿”å›å€¼ã€‚ï¼ˆ3ï¼‰ä½¿ç”¨FutureTaskå¯¹è±¡ä½œä¸ºThreadå¯¹è±¡çš„targetåˆ›å»ºå¹¶å¯åŠ¨æ–°çº¿ç¨‹ã€‚ï¼ˆ4ï¼‰è°ƒç”¨FutureTaskå¯¹è±¡çš„get()æ–¹æ³•æ¥è·å¾—å­çº¿ç¨‹æ‰§è¡Œç»“æŸåçš„è¿”å›å€¼ï¼Œè°ƒç”¨ get()æ–¹æ³•ä¼šé˜»å¡çº¿ç¨‹ã€‚</code></pre><h3 id="åˆ›å»ºçº¿ç¨‹çš„ä¸‰ç§æ–¹å¼çš„å¯¹æ¯”"><a href="#åˆ›å»ºçº¿ç¨‹çš„ä¸‰ç§æ–¹å¼çš„å¯¹æ¯”" class="headerlink" title="åˆ›å»ºçº¿ç¨‹çš„ä¸‰ç§æ–¹å¼çš„å¯¹æ¯”"></a>åˆ›å»ºçº¿ç¨‹çš„ä¸‰ç§æ–¹å¼çš„å¯¹æ¯”</h3><p>é‡‡ç”¨å®ç°Runnableã€Callableæ¥å£çš„æ–¹å¼åˆ›è§å¤šçº¿ç¨‹æ—¶ï¼Œä¼˜åŠ¿æ˜¯ï¼š çº¿ç¨‹ç±»åªæ˜¯å®ç°äº†Runnableæ¥å£æˆ–Callableæ¥å£ï¼Œè¿˜å¯ä»¥ç»§æ‰¿å…¶ä»–ç±»ã€‚ åœ¨è¿™ç§æ–¹å¼ä¸‹ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥å…±äº«åŒä¸€ä¸ªtargetå¯¹è±¡ï¼Œæ‰€ä»¥éå¸¸é€‚åˆå¤šä¸ªç›¸åŒçº¿ç¨‹ æ¥å¤„ç†åŒä¸€ä»½èµ„æºçš„æƒ…å†µï¼Œä»è€Œå¯ä»¥å°†CPUã€ä»£ç å’Œæ•°æ®åˆ†å¼€ï¼Œå½¢æˆæ¸…æ™°çš„æ¨¡å‹ï¼Œ è¾ƒå¥½åœ°ä½“ç°äº†é¢å‘å¯¹è±¡çš„æ€æƒ³ã€‚ åŠ£åŠ¿æ˜¯ï¼š ç¼–ç¨‹ç¨å¾®å¤æ‚ï¼Œå¦‚æœè¦è®¿é—®å½“å‰çº¿ç¨‹ï¼Œåˆ™å¿…é¡»ä½¿ç”¨Thread.currentThread()æ–¹æ³•ã€‚ ä½¿ç”¨ç»§æ‰¿Threadç±»çš„æ–¹å¼åˆ›å»ºå¤šçº¿ç¨‹æ—¶ä¼˜åŠ¿æ˜¯ï¼š ç¼–å†™ç®€å•ï¼Œå¦‚æœéœ€è¦è®¿é—®å½“å‰çº¿ç¨‹ï¼Œåˆ™æ— éœ€ä½¿ç”¨Thread.currentThread()æ–¹æ³•ï¼Œç›´æ¥ ä½¿ç”¨thiså³å¯è·å¾—å½“å‰çº¿ç¨‹ã€‚ åŠ£åŠ¿æ˜¯ï¼š çº¿ç¨‹ç±»å·²ç»ç»§æ‰¿äº†Threadç±»ï¼Œæ‰€ä»¥ä¸èƒ½å†ç»§æ‰¿å…¶ä»–çˆ¶ç±»ã€‚</p><h2 id="3-Objectç±»å¯¹è±¡å«æœ‰çš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ"><a href="#3-Objectç±»å¯¹è±¡å«æœ‰çš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="3.Objectç±»å¯¹è±¡å«æœ‰çš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ"></a>3.Objectç±»å¯¹è±¡å«æœ‰çš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ</h2><p>Javaä¸­çš„Objectç±»æ˜¯æ‰€æœ‰ç±»çš„çˆ¶ç±»ï¼Œå®ƒæä¾›äº†ä»¥ä¸‹11ä¸ªæ–¹æ³•ï¼š</p><pre><code>1.public final native Class&lt;?&gt;getClass()2.public native int hashCode()3.public boolean equals(Object obj)4.protected native Object clone() throws CloneNotSupportedException5.public String toString()6.public final native void notify()7.public final native void notifyAll()8.public final native void wait(long timeout) throws InterruptedException9.public final void wait(long timeout,int nanos)throws InterruptedException10.public final void wait() throws InterruptedException11.protected void finalize() throws Throwable{}</code></pre><h2 id="4-Androidä¸­çš„è¿›ç¨‹é—´é€šä¿¡æœ‰å“ªäº›æ–¹å¼ï¼Ÿå…·ä½“è¯´è¯´Binder"><a href="#4-Androidä¸­çš„è¿›ç¨‹é—´é€šä¿¡æœ‰å“ªäº›æ–¹å¼ï¼Ÿå…·ä½“è¯´è¯´Binder" class="headerlink" title="4.Androidä¸­çš„è¿›ç¨‹é—´é€šä¿¡æœ‰å“ªäº›æ–¹å¼ï¼Ÿå…·ä½“è¯´è¯´Binder"></a>4.Androidä¸­çš„è¿›ç¨‹é—´é€šä¿¡æœ‰å“ªäº›æ–¹å¼ï¼Ÿå…·ä½“è¯´è¯´Binder</h2><p>Androidä¸­çš„IPCæ–¹å¼</p><pre><code>ä½¿ç”¨Intentä½¿ç”¨æ–‡ä»¶å…±äº«ä½¿ç”¨Messengerä½¿ç”¨AIDLä½¿ç”¨ContentProviderä½¿ç”¨Socket</code></pre><h3 id="1-ä½¿ç”¨Intent"><a href="#1-ä½¿ç”¨Intent" class="headerlink" title="1.ä½¿ç”¨Intent"></a>1.ä½¿ç”¨Intent</h3><h4 id="1-Activityï¼ŒServiceï¼ŒReceiveréƒ½æ”¯æŒåœ¨Intentä¸­ä¼ é€’Bundleæ•°æ®ï¼Œè€ŒBundleå®ç°äº†Parcelableæ¥å£ï¼Œå¯ä»¥åœ¨ä¸åŒçš„è¿›ç¨‹é—´è¿›è¡Œä¼ è¾“ã€‚"><a href="#1-Activityï¼ŒServiceï¼ŒReceiveréƒ½æ”¯æŒåœ¨Intentä¸­ä¼ é€’Bundleæ•°æ®ï¼Œè€ŒBundleå®ç°äº†Parcelableæ¥å£ï¼Œå¯ä»¥åœ¨ä¸åŒçš„è¿›ç¨‹é—´è¿›è¡Œä¼ è¾“ã€‚" class="headerlink" title="1.Activityï¼ŒServiceï¼ŒReceiveréƒ½æ”¯æŒåœ¨Intentä¸­ä¼ é€’Bundleæ•°æ®ï¼Œè€ŒBundleå®ç°äº†Parcelableæ¥å£ï¼Œå¯ä»¥åœ¨ä¸åŒçš„è¿›ç¨‹é—´è¿›è¡Œä¼ è¾“ã€‚"></a>1.Activityï¼ŒServiceï¼ŒReceiveréƒ½æ”¯æŒåœ¨Intentä¸­ä¼ é€’Bundleæ•°æ®ï¼Œè€ŒBundleå®ç°äº†Parcelableæ¥å£ï¼Œå¯ä»¥åœ¨ä¸åŒçš„è¿›ç¨‹é—´è¿›è¡Œä¼ è¾“ã€‚</h4><h4 id="2-åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­å¯åŠ¨äº†å¦ä¸€ä¸ªè¿›ç¨‹çš„Activityï¼ŒServiceå’ŒReceiverï¼Œå¯ä»¥åœ¨Bundleä¸­é™„åŠ è¦ä¼ é€’çš„æ•°æ®é€šè¿‡Intentå‘é€å‡ºå»ã€‚"><a href="#2-åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­å¯åŠ¨äº†å¦ä¸€ä¸ªè¿›ç¨‹çš„Activityï¼ŒServiceå’ŒReceiverï¼Œå¯ä»¥åœ¨Bundleä¸­é™„åŠ è¦ä¼ é€’çš„æ•°æ®é€šè¿‡Intentå‘é€å‡ºå»ã€‚" class="headerlink" title="2.åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­å¯åŠ¨äº†å¦ä¸€ä¸ªè¿›ç¨‹çš„Activityï¼ŒServiceå’ŒReceiverï¼Œå¯ä»¥åœ¨Bundleä¸­é™„åŠ è¦ä¼ é€’çš„æ•°æ®é€šè¿‡Intentå‘é€å‡ºå»ã€‚"></a>2.åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­å¯åŠ¨äº†å¦ä¸€ä¸ªè¿›ç¨‹çš„Activityï¼ŒServiceå’ŒReceiverï¼Œå¯ä»¥åœ¨Bundleä¸­é™„åŠ è¦ä¼ é€’çš„æ•°æ®é€šè¿‡Intentå‘é€å‡ºå»ã€‚</h4><h3 id="2-ä½¿ç”¨æ–‡ä»¶å…±äº«"><a href="#2-ä½¿ç”¨æ–‡ä»¶å…±äº«" class="headerlink" title="2.ä½¿ç”¨æ–‡ä»¶å…±äº«"></a>2.ä½¿ç”¨æ–‡ä»¶å…±äº«</h3><h4 id="1-Windowsä¸Šï¼Œä¸€ä¸ªæ–‡ä»¶å¦‚æœè¢«åŠ äº†æ’æ–¥é”ä¼šå¯¼è‡´å…¶ä»–çº¿ç¨‹æ— æ³•å¯¹å…¶è¿›è¡Œè®¿é—®ï¼ŒåŒ…æ‹¬è¯»å’Œå†™ï¼›è€ŒAndroidç³»ç»ŸåŸºäºLinuxï¼Œä½¿å¾—å…¶å¹¶å‘è¯»å–æ–‡ä»¶æ²¡æœ‰é™åˆ¶åœ°è¿›è¡Œï¼Œç”šè‡³å…è®¸ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œï¼Œalthough-this-may-be-a-problem"><a href="#1-Windowsä¸Šï¼Œä¸€ä¸ªæ–‡ä»¶å¦‚æœè¢«åŠ äº†æ’æ–¥é”ä¼šå¯¼è‡´å…¶ä»–çº¿ç¨‹æ— æ³•å¯¹å…¶è¿›è¡Œè®¿é—®ï¼ŒåŒ…æ‹¬è¯»å’Œå†™ï¼›è€ŒAndroidç³»ç»ŸåŸºäºLinuxï¼Œä½¿å¾—å…¶å¹¶å‘è¯»å–æ–‡ä»¶æ²¡æœ‰é™åˆ¶åœ°è¿›è¡Œï¼Œç”šè‡³å…è®¸ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œï¼Œalthough-this-may-be-a-problem" class="headerlink" title="1.Windowsä¸Šï¼Œä¸€ä¸ªæ–‡ä»¶å¦‚æœè¢«åŠ äº†æ’æ–¥é”ä¼šå¯¼è‡´å…¶ä»–çº¿ç¨‹æ— æ³•å¯¹å…¶è¿›è¡Œè®¿é—®ï¼ŒåŒ…æ‹¬è¯»å’Œå†™ï¼›è€ŒAndroidç³»ç»ŸåŸºäºLinuxï¼Œä½¿å¾—å…¶å¹¶å‘è¯»å–æ–‡ä»¶æ²¡æœ‰é™åˆ¶åœ°è¿›è¡Œï¼Œç”šè‡³å…è®¸ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œï¼Œalthough this may be a problem."></a>1.Windowsä¸Šï¼Œä¸€ä¸ªæ–‡ä»¶å¦‚æœè¢«åŠ äº†æ’æ–¥é”ä¼šå¯¼è‡´å…¶ä»–çº¿ç¨‹æ— æ³•å¯¹å…¶è¿›è¡Œè®¿é—®ï¼ŒåŒ…æ‹¬è¯»å’Œå†™ï¼›è€ŒAndroidç³»ç»ŸåŸºäºLinuxï¼Œä½¿å¾—å…¶å¹¶å‘è¯»å–æ–‡ä»¶æ²¡æœ‰é™åˆ¶åœ°è¿›è¡Œï¼Œç”šè‡³å…è®¸ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œï¼Œalthough this may be a problem.</h4><h4 id="2-å¯ä»¥åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­åºåˆ—åŒ–ä¸€ä¸ªå¯¹è±¡åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œåœ¨å¦ä¸€ä¸ªè¿›ç¨‹ä¸­ååºåˆ—åŒ–æ¢å¤è¿™ä¸ªå¯¹è±¡ï¼ˆAttentionï¼šå¹¶ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œåªæ˜¯å†…å®¹ç›¸åŒï¼‰"><a href="#2-å¯ä»¥åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­åºåˆ—åŒ–ä¸€ä¸ªå¯¹è±¡åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œåœ¨å¦ä¸€ä¸ªè¿›ç¨‹ä¸­ååºåˆ—åŒ–æ¢å¤è¿™ä¸ªå¯¹è±¡ï¼ˆAttentionï¼šå¹¶ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œåªæ˜¯å†…å®¹ç›¸åŒï¼‰" class="headerlink" title="2.å¯ä»¥åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­åºåˆ—åŒ–ä¸€ä¸ªå¯¹è±¡åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œåœ¨å¦ä¸€ä¸ªè¿›ç¨‹ä¸­ååºåˆ—åŒ–æ¢å¤è¿™ä¸ªå¯¹è±¡ï¼ˆAttentionï¼šå¹¶ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œåªæ˜¯å†…å®¹ç›¸åŒï¼‰"></a>2.å¯ä»¥åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­åºåˆ—åŒ–ä¸€ä¸ªå¯¹è±¡åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œåœ¨å¦ä¸€ä¸ªè¿›ç¨‹ä¸­ååºåˆ—åŒ–æ¢å¤è¿™ä¸ªå¯¹è±¡ï¼ˆAttentionï¼šå¹¶ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œåªæ˜¯å†…å®¹ç›¸åŒï¼‰</h4><h4 id="3-SharePreferenceæ˜¯ä¸ªç‰¹ä¾‹ï¼Œç³»ç»Ÿå¯¹å®ƒçš„è¯»-å†™æœ‰ä¸€å®šçš„ç¼“å­˜ç­–ç•¥ï¼Œå³å†…å­˜ä¸­ä¼šæœ‰ä¸€ä»½SharePreferencesæ–‡ä»¶çš„ç¼“å­˜ï¼Œç³»ç»Ÿå¯¹å®ƒçš„è¯»-å†™å°±å˜å¾—ä¸å¯é ï¼Œå½“é¢å¯¹é«˜å¹¶å‘çš„è¯»å†™è®¿é—®ï¼ŒSharePreferencesæœ‰å¾ˆå¤§çš„å‡ ç‡ä¸¢å¤±æ•°æ®ã€‚å› æ­¤ï¼ŒIPCä¸å»ºè®®é‡‡ç”¨SharePreferencesã€‚"><a href="#3-SharePreferenceæ˜¯ä¸ªç‰¹ä¾‹ï¼Œç³»ç»Ÿå¯¹å®ƒçš„è¯»-å†™æœ‰ä¸€å®šçš„ç¼“å­˜ç­–ç•¥ï¼Œå³å†…å­˜ä¸­ä¼šæœ‰ä¸€ä»½SharePreferencesæ–‡ä»¶çš„ç¼“å­˜ï¼Œç³»ç»Ÿå¯¹å®ƒçš„è¯»-å†™å°±å˜å¾—ä¸å¯é ï¼Œå½“é¢å¯¹é«˜å¹¶å‘çš„è¯»å†™è®¿é—®ï¼ŒSharePreferencesæœ‰å¾ˆå¤§çš„å‡ ç‡ä¸¢å¤±æ•°æ®ã€‚å› æ­¤ï¼ŒIPCä¸å»ºè®®é‡‡ç”¨SharePreferencesã€‚" class="headerlink" title="3.SharePreferenceæ˜¯ä¸ªç‰¹ä¾‹ï¼Œç³»ç»Ÿå¯¹å®ƒçš„è¯»/å†™æœ‰ä¸€å®šçš„ç¼“å­˜ç­–ç•¥ï¼Œå³å†…å­˜ä¸­ä¼šæœ‰ä¸€ä»½SharePreferencesæ–‡ä»¶çš„ç¼“å­˜ï¼Œç³»ç»Ÿå¯¹å®ƒçš„è¯»/å†™å°±å˜å¾—ä¸å¯é ï¼Œå½“é¢å¯¹é«˜å¹¶å‘çš„è¯»å†™è®¿é—®ï¼ŒSharePreferencesæœ‰å¾ˆå¤§çš„å‡ ç‡ä¸¢å¤±æ•°æ®ã€‚å› æ­¤ï¼ŒIPCä¸å»ºè®®é‡‡ç”¨SharePreferencesã€‚"></a>3.SharePreferenceæ˜¯ä¸ªç‰¹ä¾‹ï¼Œç³»ç»Ÿå¯¹å®ƒçš„è¯»/å†™æœ‰ä¸€å®šçš„ç¼“å­˜ç­–ç•¥ï¼Œå³å†…å­˜ä¸­ä¼šæœ‰ä¸€ä»½SharePreferencesæ–‡ä»¶çš„ç¼“å­˜ï¼Œç³»ç»Ÿå¯¹å®ƒçš„è¯»/å†™å°±å˜å¾—ä¸å¯é ï¼Œå½“é¢å¯¹é«˜å¹¶å‘çš„è¯»å†™è®¿é—®ï¼ŒSharePreferencesæœ‰å¾ˆå¤§çš„å‡ ç‡ä¸¢å¤±æ•°æ®ã€‚å› æ­¤ï¼ŒIPCä¸å»ºè®®é‡‡ç”¨SharePreferencesã€‚</h4><h3 id="3-ä½¿ç”¨Messenger"><a href="#3-ä½¿ç”¨Messenger" class="headerlink" title="3.ä½¿ç”¨Messenger"></a>3.ä½¿ç”¨Messenger</h3><p>Messengeræ˜¯ä¸€ç§è½»é‡çº§çš„IPCæ–¹æ¡ˆï¼Œå®ƒçš„åº•å±‚å®ç°æ˜¯AIDLï¼Œå¯ä»¥åœ¨ä¸åŒè¿›ç¨‹ä¸­ä¼ é€’Messageå¯¹è±¡ï¼Œå®ƒä¸€æ¬¡åªå¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼Œåœ¨æœåŠ¡ç«¯ä¸éœ€è¦è€ƒè™‘çº¿ç¨‹åŒæ­¥çš„é—®é¢˜ï¼ŒæœåŠ¡ç«¯ä¸å­˜åœ¨å¹¶å‘æ‰§è¡Œçš„æƒ…å½¢</p><ul><li><p>æœåŠ¡ç«¯è¿›ç¨‹ï¼šæœåŠ¡ç«¯åˆ›å»ºä¸€ä¸ªServiceæ¥å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ï¼ŒåŒæ—¶é€šè¿‡ä¸€ä¸ªHandlerå¯¹è±¡æ¥å®ä¾‹åŒ–ä¸€ä¸ªMeaaengerå¯¹è±¡ï¼Œç„¶ååœ¨Serviveçš„onBindä¸­è¿”å›è¿™ä¸ªMessengerå¯¹è±¡åº•å±‚çš„Binderå³å¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MessengerSercive</span> <span class="keyword">extends</span> <span class="title">Service</span></span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = MessengerSercive.class.getSimpleName();</div><div class="line">    </div><div class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">MessengerHandler</span> <span class="keyword">extends</span> <span class="title">Handler</span></span>&#123;</div><div class="line">        <span class="comment">/**</span></div><div class="line">         * <span class="doctag">@param</span> msg</div><div class="line">         */</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span></span>&#123;</div><div class="line">            <span class="keyword">switch</span> (msg.what) &#123;</div><div class="line">                <span class="keyword">case</span> Constants.MSG_FROM_CLIENT:</div><div class="line">                    Log.d(TAG, <span class="string">"receive msg from client: msg = ["</span></div><div class="line">                    + msg.getData().getString(Constants.MSG_KEY) + <span class="string">"]"</span>);</div><div class="line">                    Toast.makeText(MessengerService.<span class="keyword">this</span>, <span class="string">"receive msg from client: msg = ["</span> + msg.getData().getString(Constants.MSG_KEY) + <span class="string">"]"</span>, Toast.LENGTH_SHORT).show();</div><div class="line">                    Messenger client = msg.replyTo;</div><div class="line">                    Message replyMsg = Message.obtain(<span class="keyword">null</span>, Constants.MSG_FROM_SERVICE);</div><div class="line">                    Bundle bundle = <span class="keyword">new</span> Bundle();</div><div class="line">                    bundle.putString(Constants.MSG_KEY, <span class="string">"æˆ‘å·²ç»æ”¶åˆ°ä½ çš„æ¶ˆæ¯ï¼Œç¨åå›å¤ä½ ï¼"</span>);</div><div class="line">                    replyMsg.setData(bundle);</div><div class="line">                    <span class="keyword">try</span> &#123;</div><div class="line">                        client.send(replyMsg);</div><div class="line">                    &#125; <span class="keyword">catch</span> (RemoteException e) &#123;</div><div class="line">                        e.printStackTrace();</div><div class="line">                    &#125;</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">default</span>:</div><div class="line">                    <span class="keyword">super</span>.handleMessage(msg);</div><div class="line">            &#125;</div><div class="line">                </div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Messenger mMessenger = <span class="keyword">new</span> Messenger(<span class="keyword">new</span> MessengerHandler());</div><div class="line"></div><div class="line">    <span class="meta">@Nullable</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> IBinder <span class="title">onBind</span><span class="params">(Intent intent)</span></span>&#123;</div><div class="line">        <span class="keyword">return</span> mMessenger.getBinder();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></li><li><p>å®¢æˆ·ç«¯è¿›ç¨‹ï¼šé¦–å…ˆç»‘å®šæœåŠ¡ç«¯Serviceï¼Œç»‘å®šæˆåŠŸä¹‹åç”¨æœåŠ¡ç«¯çš„IBinderå¯¹è±¡åˆ›å»ºä¸€ä¸ªMessengerï¼Œé€šè¿‡è¿™ä¸ªMessengerå°±å¯ä»¥å‘æœåŠ¡ç«¯å‘é€æ¶ˆæ¯äº†ï¼Œæ¶ˆæ¯ç±»å‹æ˜¯Messageã€‚å¦‚æœéœ€è¦æœåŠ¡ç«¯å“åº”ï¼Œåˆ™éœ€è¦åˆ›å»ºä¸€ä¸ªHandlerå¹¶é€šè¿‡å®ƒæ¥åˆ›å»ºä¸€ä¸ªMessengerï¼ˆå’ŒæœåŠ¡ç«¯ä¸€æ ·ï¼‰ï¼Œå¹¶é€šè¿‡Messageçš„replyToå‚æ•°ä¼ é€’ç»™æœåŠ¡ç«¯ã€‚æœåŠ¡ç«¯é€šè¿‡Messageçš„replyToå‚æ•°å°±å¯ä»¥å›åº”å®¢æˆ·ç«¯äº†ã€‚</p><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line">public class MainActivity extends ApCompatActivity&#123;</div><div class="line">    private static final String TAG = MainActivity.class.getSimpleName();</div><div class="line">    private Messenger mGetReplyMessenger = new Messenger(new MessageHandler());</div><div class="line">    private Messenger mService;</div><div class="line">    private class MessageHandler extends Handler&#123;</div><div class="line">        @Override</div><div class="line">        public void handleMessage(Message msg)&#123;</div><div class="line">            switch(msg.what)&#123;</div><div class="line">                case Constants.MSG_FROM_SERVICE:</div><div class="line">                Log.d(TAG, "received msg form service: msg = </div><div class="line">                [" + msg.getData().getString(Constants.MSG_KEY) + "]");</div><div class="line">                Toast.makeText(MainActivity.this, "received vice: msg = [" + msg.getData().getString(Constants.MSG_KEY) + "]", Toast.LENGTH_SHORT).show();</div><div class="line">                break;</div><div class="line">            default:</div><div class="line">                super.handleMessage(msg);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    @Override</div><div class="line">    protected void onCreate(Bundle savedInsttanceState)&#123;</div><div class="line">        super.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_main);</div><div class="line">    &#125;</div><div class="line">    public void bindService(View v)&#123;</div><div class="line">        Intent mIntent = new Intent(thia,MessengerService.class);</div><div class="line">        bindService(mIntent, mServiceConnection, Context.BIND_AUTO_CREATE);</div><div class="line">    &#125;</div><div class="line">    public void sendMessage(View v)&#123;</div><div class="line">        Message msg = Message.obtain(null,Constants.MSG_FROM_CLIENT);</div><div class="line">        Bundle data = new Bunle();</div><div class="line">        data.putString(Constants.MSG_KEY, "Hello! This is client.");</div><div class="line">        msg.setData(data);</div><div class="line">        msg.replyTo = mGetReplyMessenger;</div><div class="line">        try&#123;</div><div class="line">            mService.send(mag);</div><div class="line">        &#125;catch(RemoteException e)&#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    @Override</div><div class="line">    protected void onDestroy()&#123;</div><div class="line">        unbindService(mServiceConnection);</div><div class="line">        super.onDestroy();</div><div class="line">    &#125;</div><div class="line">    private ServiceConnection mServiceConnection = new ServiceConnection()&#123;</div><div class="line">        /**</div><div class="line">         * @param name</div><div class="line">         * @param service</div><div class="line">         */</div><div class="line">        @Override</div><div class="line">        public void onServiceConnected(ComponentName name, IBinder service)&#123;</div><div class="line">            mService = new Messenger(service);</div><div class="line">            Message msg = Message.obtain(null, Constants.MSG_FROM_CLIENT);</div><div class="line">            Bundle data = new Bundle();</div><div class="line">            data.putString(Constants.MSG_KEY,"Hello! This is cient.");</div><div class="line">            msg.setData(data);</div><div class="line">            mag.replyTo = mGetReplyMessenger;</div><div class="line">            try&#123;</div><div class="line">                mService.send(msg);</div><div class="line">            &#125;catch(RemoteException e)&#123;</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        /**</div><div class="line">         * @param name</div><div class="line">         */</div><div class="line">        @Override</div><div class="line">        public void onServiceDiscommected(ComponentName name)&#123;</div><div class="line">            </div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure></li></ul><p>æ³¨æ„ï¼š å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ˜¯é€šè¿‡é€šè¿‡æ‹¿åˆ°å¯¹æ–¹çš„Messengeræ¥å‘é€Messageçš„ã€‚åªä¸è¿‡å®¢æˆ·ç«¯é€šè¿‡bindService onServiceConnectedè€ŒæœåŠ¡ç«¯é€šè¿‡message.replyToæ¥è·å¾—å¯¹æ–¹çš„Messengerã€‚Messengerä¸­æœ‰ä¸€ä¸ªHanlderä»¥ä¸²è¡Œçš„æ–¹å¼å¤„ç†é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ã€‚ä¸å­˜åœ¨å¹¶å‘æ‰§è¡Œï¼Œå› æ­¤æˆ‘ä»¬ä¸è€ƒè™‘çº¿ç¨‹åŒæ­¥çš„é—®é¢˜ã€‚</p><h3 id="4-ä½¿ç”¨AIDL"><a href="#4-ä½¿ç”¨AIDL" class="headerlink" title="4.ä½¿ç”¨AIDL"></a>4.ä½¿ç”¨AIDL</h3><p>Messengeræ˜¯ä»¥ä¸²è¡Œçš„æ–¹å¼å¤„ç†å®¢æˆ·ç«¯å‘æ¥çš„æ¶ˆæ¯ï¼Œå¦‚æœå¤§é‡æ¶ˆæ¯åŒæ—¶å‘é€åˆ°æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯åªèƒ½ä¸€ä¸ªä¸€ä¸ªå¤„ç†ï¼Œæ‰€ä»¥å¤§é‡å¹¶å‘è¯·æ±‚å°±ä¸é€‚åˆç”¨Messengerï¼Œè€Œä¸”Messengeråªé€‚åˆä¼ é€’æ¶ˆæ¯ï¼Œä¸èƒ½è·¨è¿›ç¨‹è°ƒç”¨æ–¹æ³•çš„é—®é¢˜ï¼Œè¦çŸ¥é“Messengeræœ¬è´¨ä¸Šä¹Ÿæ˜¯AIDLï¼Œåªä¸è¿‡ç³»ç»Ÿåšäº†å°è£…æ–¹ä¾¿ä¸Šå±‚çš„è°ƒç”¨è€Œå·²ã€‚</p><p><strong>AIDLæ–‡ä»¶æ”¯æŒçš„æ•°æ®ç±»å‹</strong></p><ul><li>åŸºæœ¬æ•°æ®ç±»å‹ï¼›</li><li>Stringå’ŒCharSequenceï¼›</li><li>ArrayListï¼Œé‡Œé¢çš„å…ƒç´ å¿…é¡»èƒ½å¤Ÿè¢«AIDLæ”¯æŒï¼›</li><li>HashMapï¼Œå®ç°Parcelableæ¥å£çš„å¯¹è±¡ï¼›æ³¨æ„ï¼šå¦‚æœAIDLæ–‡ä»¶ä¸­ç”¨åˆ°äº†è‡ªå®šä¹‰çš„Parcelableå¯¹è±¡ï¼Œå¿…é¡»æ–°å»ºä¸€ä¸ªå’Œå®ƒåŒåçš„AIDLæ–‡ä»¶ã€‚</li><li>AIDLï¼ŒAIDLæ¥å£æœ¬èº«ä¹Ÿå¯ä»¥åœ¨AIDLæ–‡ä»¶ä¸­ä½¿ç”¨ã€‚<br><strong>æœåŠ¡ç«¯</strong><br>æœåŠ¡ç«¯åˆ›å»ºä¸€ä¸ªServiceç”¨æ¥ç›‘å¬å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªAIDLæ–‡ä»¶ï¼Œå°†æš´éœ²ç»™å®¢æˆ·ç«¯çš„æ¥å£åœ¨è¿™ä¸ªAIDLæ–‡ä»¶ä¸­å£°æ˜ï¼Œæœ€ååœ¨Serviceä¸­å®ç°è¿™ä¸ªAIDLæ¥å£å³å¯ã€‚<br><strong>å®¢æˆ·ç«¯</strong><br>ç»‘å®šæœåŠ¡ç«¯çš„Serviceï¼Œç»‘å®šæˆåŠŸåï¼Œå°†æœåŠ¡ç«¯è¿”å›çš„Binderå¯¹è±¡è½¬æˆAIDLæ¥å£æ‰€å±çš„ç±»å‹ï¼Œç„¶åå°±å¯ä»¥è°ƒç”¨AIDLä¸­çš„æ–¹æ³•äº†ã€‚å®¢æˆ·ç«¯è°ƒç”¨è¿œç¨‹æœåŠ¡çš„æ–¹æ³•ï¼Œè¢«è°ƒç”¨çš„æ–¹æ³•è¿è¡Œåœ¨æœåŠ¡ç«¯çš„Binderçº¿ç¨‹æ± ä¸­ï¼ŒåŒæ—¶å®¢æˆ·ç«¯çš„çº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼Œå¦‚æœæœåŠ¡ç«¯æ–¹æ³•æ‰§è¡Œæ¯”è¾ƒè€—æ—¶ï¼Œå°±ä¼šå¯¼è‡´å®¢æˆ·ç«¯çº¿ç¨‹é•¿æ—¶é—´é˜»å¡ï¼Œå¯¼è‡´ANRã€‚å®¢æˆ·ç«¯çš„onServiceConnectedå’ŒonServiceDisconnectedæ–¹æ³•éƒ½åœ¨UIçº¿ç¨‹ä¸­ã€‚</li></ul><h2 id="5-Androidä¸­çš„AsyncTaskçš„ä½œç”¨ï¼Ÿ"><a href="#5-Androidä¸­çš„AsyncTaskçš„ä½œç”¨ï¼Ÿ" class="headerlink" title="5.Androidä¸­çš„AsyncTaskçš„ä½œç”¨ï¼Ÿ"></a>5.Androidä¸­çš„AsyncTaskçš„ä½œç”¨ï¼Ÿ</h2><h2 id="6-Androidä¸­çš„æ¶ˆæ¯æœºåˆ¶ï¼Ÿ"><a href="#6-Androidä¸­çš„æ¶ˆæ¯æœºåˆ¶ï¼Ÿ" class="headerlink" title="6.Androidä¸­çš„æ¶ˆæ¯æœºåˆ¶ï¼Ÿ"></a>6.Androidä¸­çš„æ¶ˆæ¯æœºåˆ¶ï¼Ÿ</h2><h2 id="7-Androidä¸­çš„äº‹ä»¶åˆ†å‘æœºåˆ¶äº†è§£å¤šå°‘ï¼Ÿå¦‚ä½•è§£å†³æ»‘åŠ¨å†²çª"><a href="#7-Androidä¸­çš„äº‹ä»¶åˆ†å‘æœºåˆ¶äº†è§£å¤šå°‘ï¼Ÿå¦‚ä½•è§£å†³æ»‘åŠ¨å†²çª" class="headerlink" title="7.Androidä¸­çš„äº‹ä»¶åˆ†å‘æœºåˆ¶äº†è§£å¤šå°‘ï¼Ÿå¦‚ä½•è§£å†³æ»‘åŠ¨å†²çª"></a>7.Androidä¸­çš„äº‹ä»¶åˆ†å‘æœºåˆ¶äº†è§£å¤šå°‘ï¼Ÿå¦‚ä½•è§£å†³æ»‘åŠ¨å†²çª</h2><h2 id="8-Javaè®¾è®¡æ¨¡å¼äº†è§£å¤šå°‘ï¼Ÿè§‚å¯Ÿè€…æ¨¡å¼åœ¨å“ªé‡Œä½¿ç”¨è¿‡ï¼Ÿ"><a href="#8-Javaè®¾è®¡æ¨¡å¼äº†è§£å¤šå°‘ï¼Ÿè§‚å¯Ÿè€…æ¨¡å¼åœ¨å“ªé‡Œä½¿ç”¨è¿‡ï¼Ÿ" class="headerlink" title="8.Javaè®¾è®¡æ¨¡å¼äº†è§£å¤šå°‘ï¼Ÿè§‚å¯Ÿè€…æ¨¡å¼åœ¨å“ªé‡Œä½¿ç”¨è¿‡ï¼Ÿ"></a>8.Javaè®¾è®¡æ¨¡å¼äº†è§£å¤šå°‘ï¼Ÿè§‚å¯Ÿè€…æ¨¡å¼åœ¨å“ªé‡Œä½¿ç”¨è¿‡ï¼Ÿ</h2><h2 id="9-æœ‰æ²¡æœ‰ç”¨è¿‡MVC-MVP-MVVMï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸMVPæ˜¯å¦‚ä½•ä½¿modelä¸viewè¿›è¡Œäº’é€šçš„ï¼Ÿ"><a href="#9-æœ‰æ²¡æœ‰ç”¨è¿‡MVC-MVP-MVVMï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸMVPæ˜¯å¦‚ä½•ä½¿modelä¸viewè¿›è¡Œäº’é€šçš„ï¼Ÿ" class="headerlink" title="9.æœ‰æ²¡æœ‰ç”¨è¿‡MVC\MVP\MVVMï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸMVPæ˜¯å¦‚ä½•ä½¿modelä¸viewè¿›è¡Œäº’é€šçš„ï¼Ÿ"></a>9.æœ‰æ²¡æœ‰ç”¨è¿‡MVC\MVP\MVVMï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸMVPæ˜¯å¦‚ä½•ä½¿modelä¸viewè¿›è¡Œäº’é€šçš„ï¼Ÿ</h2>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å¤§æ¦‚åœ¨æ•°å¤©å‰æŠ•é€’äº†å­—èŠ‚è·³åŠ¨-æŠ–éŸ³æ–¹å‘çš„å®ä¹ ç”Ÿå²—ä½&lt;br&gt;æ˜¨å¤©æ¥åˆ°äº†é¢è¯•é€šçŸ¥ï¼Œä»Šå¤©é¢è¯•åå¯¹æ¶‰åŠåˆ°çš„é—®é¢˜è¿›è¡Œä¸€ä¸ªå¤ç›˜ã€‚ï¼ˆå­—èŠ‚è·³åŠ¨æœç„¶åä¸è™šä¼ â€¦é¢è¯•å®˜ç›¸å½“äº²åˆ‡ä¸”å–„äºå¾ªå¾ªå–„è¯±æ¥å¼•å¯¼æˆ‘å›ç­”é—®é¢˜ï¼‰&lt;/p&gt;
&lt;h2 id=&quot;1-Javaä¸­çš„å¼•ç”¨ç±»å‹æœ‰æ²¡æœ‰ä»€ä¹ˆäº†è§£ï¼Ÿ&quot;&gt;&lt;a href=&quot;#
      
    
    </summary>
    
    
      <category term="Interview" scheme="https://edward7zhang.github.io/tags/Interview/"/>
    
  </entry>
  
  <entry>
    <title>æ·±åº¦å­¦ä¹ æ¨¡å‹çš„è½¬æ¢ [å­¦ä¹ &amp;è½¬è½½]</title>
    <link href="https://edward7zhang.github.io/2019/01/26/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2/"/>
    <id>https://edward7zhang.github.io/2019/01/26/æ·±åº¦å­¦ä¹ æ¨¡å‹çš„è½¬æ¢/</id>
    <published>2019-01-26T11:07:14.000Z</published>
    <updated>2019-01-26T14:04:00.096Z</updated>
    
    <content type="html"><![CDATA[<p>ç”±äºå„ç§æ·±åº¦å­¦ä¹ æ¡†æ¶çš„å±‚å‡ºä¸ç©·ï¼Œæˆ‘ä»¬åœ¨è¿›è¡Œç®—æ³•å¼€å‘åˆ°ç®—æ³•éƒ¨ç½²çš„è¿‡ç¨‹ä¸­ï¼Œå¾€å¾€éƒ½éœ€è¦ç”¨åˆ°ä¸åŒçš„æ¡†æ¶ã€‚ä¾‹å¦‚æˆ‘ä»¬å¾ˆæœ‰å¯èƒ½ä½¿ç”¨tensorflow,pytorchç­‰è¿›è¡Œç®—æ³•å¼€å‘å’Œè°ƒè¯•ï¼Œåœ¨æ—©æœŸå·¥ç¨‹inferenceçš„æ—¶å€™æˆ‘ä»¬å¾€å¾€ä½¿ç”¨è¾ƒä¸ºè½»é‡çš„caffeæˆ–è€…é­”æ”¹åçš„caffeã€‚åˆ°äº†ç§»åŠ¨ç«¯éƒ¨ç½²æˆ‘ä»¬å¯èƒ½ä¼šä½¿ç”¨feather CNN nihuiçš„NCNNæˆ–è€…å°ç±³çš„maceç­‰æ¡†æ¶ã€‚facebook ONNXçš„å‡ºç°ä¸ºæ¨¡å‹çš„è½¬æ¢æä¾›äº†ä¸€ç§æ€è·¯ï¼Œä½†é™¤äº†pytorchç­‰æ¡†æ¶èƒ½å¾ˆå¥½çš„æ”¯æŒONNXã€‚å…¶ä»–ç­‰æ¡†æ¶å¹¶æœªå¾ˆå¥½çš„å¯¹æ¥ONNXã€‚åœ¨<a href="https://github.com/Microsoft/MMdnn" target="_blank" rel="external">MMdnn</a>å‡ºç°ä¹‹å‰ï¼Œå¤§å®¶éƒ½æŠŠcaffemodelä½œä¸ºä¸€ä¸ªä¸­é—´ä½“æ¥è¿›è¡Œè½¬æ¢ã€‚</p><p>å…¶å®å°±æ¨¡å‹è½¬æ¢è€Œè¨€åªæ˜¯ä¸ªå¡«å‚æ•°çš„è¿‡ç¨‹ï¼ŒæŠŠæ¨¡å‹ç»“æ„æ­å¥½ï¼ŒæŠŠå‚æ•°å¡«è¿›å»å°±å³å¯ï¼Œä½†æ˜¯å®è·µè¿‡çš„æœ‹å‹å¤§å®¶ä¸€å®šä¼šçŸ¥é“è¿™å…¶ä¸­å­˜åœ¨ä¸å°‘å‘ï¼Œä½†æ˜¯æˆ‘ä»¬æ›´å¸Œæœ›æœ‰ä¸€ç§è‡ªåŠ¨åŒ–çš„æ¨¡å‹è½¬æ¢æ–¹æ¡ˆæ¥è¿›è¡Œæ¨¡å‹è½¬æ¢ã€‚</p><p><a href="https://github.com/Microsoft/MMdnn" target="_blank" rel="external">MMdnn</a>çš„å‡ºç°ä¸ºæ¨¡å‹è½¬æ¢å¸¦æ¥äº†ä¸å°‘çš„ç¦éŸ³ï¼Œ<a href="https://github.com/Microsoft/MMdnn" target="_blank" rel="external">MMdnn</a>æä¾›äº†ä¸€ç§IR(ä¸­é—´è¡¨ç¤º)æ¥æ¥è¡”æ¥å„ä¸ªæ¨¡å‹ä¹‹é—´çš„è½¬æ¢ã€‚ä»–å›Šæ‹¬å¹¶æ”¯æŒäº†ä¸»æµçš„DNNæ¡†æ¶ã€‚</p><p>ä¸‹é¢æˆ‘å°±ç®€è¦è®²ä¸€ä¸‹å‡ ä¸ªçš„ç®€å•æ¨¡å‹è½¬æ¢</p><p>åœ¨æ­¤æˆ‘æ¨èä¸€ä¸ªæŸ¥çœ‹æ¨¡å‹ç»“æ„çš„å·¥å…·<a href="https://github.com/lutzroeder/Netron" target="_blank" rel="external">Netron</a> æ”¯æŒæ•°ç§ä¸»æµæ·±åº¦å­¦ä¹ æ¡†æ¶(Caffe,Tensorflow,ONNXç­‰)çš„æ¨¡å‹ç»“æ„æŸ¥çœ‹ã€‚</p><p>ä¾‹å¦‚ä¸‹å›¾æ˜¯MTCNN Pnetçš„æ¨¡å‹ç»“æ„å›¾</p><p><img src="https://i.loli.net/2019/01/09/5c35f0ad3eaf1.png" alt="det1.png"></p><h3 id="MMdnnçš„å®‰è£…"><a href="#MMdnnçš„å®‰è£…" class="headerlink" title="MMdnnçš„å®‰è£…"></a>MMdnnçš„å®‰è£…</h3><p><a href="https://github.com/Microsoft/MMdnn" target="_blank" rel="external">MMdnn</a>çš„å®‰è£…éå¸¸ç®€å•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install mmdnn</div></pre></td></tr></table></figure><h4 id="è½¬æ¢ä¸­çš„ä¸€äº›å‘"><a href="#è½¬æ¢ä¸­çš„ä¸€äº›å‘" class="headerlink" title="è½¬æ¢ä¸­çš„ä¸€äº›å‘"></a>è½¬æ¢ä¸­çš„ä¸€äº›å‘</h4><h5 id="1-å¹¶ä¸æ˜¯æ‰€æœ‰Layerå’Œæ‰€æœ‰ç½‘ç»œéƒ½æ”¯æŒè½¬æ¢"><a href="#1-å¹¶ä¸æ˜¯æ‰€æœ‰Layerå’Œæ‰€æœ‰ç½‘ç»œéƒ½æ”¯æŒè½¬æ¢" class="headerlink" title="1.å¹¶ä¸æ˜¯æ‰€æœ‰Layerå’Œæ‰€æœ‰ç½‘ç»œéƒ½æ”¯æŒè½¬æ¢"></a>1.å¹¶ä¸æ˜¯æ‰€æœ‰Layerå’Œæ‰€æœ‰ç½‘ç»œéƒ½æ”¯æŒè½¬æ¢</h5><p>ç”±äºå„ä¸ªæ·±åº¦å­¦ä¹ æ¡†æ¶ä¹‹é—´çš„è®¾è®¡æ¨¡å¼ä¸åŒæœ‰çš„æ˜¯åŸºäºå‘½ä»¤å¼çš„æœ‰çš„æ˜¯åŸºäºç¬¦å·å½¢å¼çš„ã€‚å„ä¸ªæ¡†æ¶ä¹‹é—´çš„opçš„ç²’åº¦ä¸åŒï¼Œåˆç”±äºæ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€çš„æ ‡å‡†ï¼Œæ”¯æŒæ‰€æœ‰æ¡†æ¶ä¹‹é—´çš„è½¬æ¢æ˜¯ä¸€ä»¶éå¸¸éš¾çš„äº‹æƒ…ã€‚MMdnnä¹Ÿåªæ˜¯æŠŠä¸€äº›æä¾›çš„å¸¸ç”¨çš„opï¼Œå¦‚conv,poolingç­‰å¸¸è§„opã€‚</p><h5 id="2-Tensorflowä¸caffeçš„paddingæ–¹å¼å¹¶ä¸ç›¸åŒ"><a href="#2-Tensorflowä¸caffeçš„paddingæ–¹å¼å¹¶ä¸ç›¸åŒ" class="headerlink" title="2.Tensorflowä¸caffeçš„paddingæ–¹å¼å¹¶ä¸ç›¸åŒ"></a>2.Tensorflowä¸caffeçš„paddingæ–¹å¼å¹¶ä¸ç›¸åŒ</h5><p>è¿™ä¸ªé—®é¢˜ä¼šå‡ºç°åœ¨MobileNetåœ¨è½¬æ¢çš„è¿‡ç¨‹ä¸­ï¼Œå› ä¸ºTensorflowçš„paddingæ–¹å¼å’Œå…¶ä»–æ¡†æ¶æ˜¯ä¸åŒçš„ã€‚Tensorflowæ ‡å‡†çš„å·ç§¯æ“ä½œé€šå¸¸é‡‡ç”¨éå¯¹ç§°çš„paddingï¼Œè€Œcaffeç­‰å…¶ä»–æ¡†æ¶çš„å·ç§¯æ“ä½œåˆ™æ˜¯é‡‡ç”¨å¯¹ç§°çš„paddingã€‚</p><p>å¦‚ä¸‹å›¾ ï¼Œæ¯”å¦‚å½“ å·ç§¯æ ¸çš„å¤§å°ä¸º3x3 strideä¸º2çš„æ—¶å€™ã€‚å°½ç®¡ä»–ä»¬çš„paddingæ–¹å¼ä¸åŒï¼Œä½†å·ç§¯ä¹‹åçš„å°ºå¯¸ç¡®æ˜¯ä¸€æ ·çš„ã€‚</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://github.com/Microsoft/MMdnn/wiki/image/mobilenet1.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><h4 id="è½¬æ¢æ­¥éª¤"><a href="#è½¬æ¢æ­¥éª¤" class="headerlink" title="è½¬æ¢æ­¥éª¤"></a>è½¬æ¢æ­¥éª¤</h4><p>ä¾‹å¦‚ç°åœ¨æˆ‘ä»¬æƒ³æŠŠMTCNNçš„Keras Pnetè½¬åŒ–æˆcaffeodelç”¨äºéƒ¨ç½²ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mmtoir -f keras -w pnet.h5 -o pnet</div></pre></td></tr></table></figure><p>æŠŠkerasæ¨¡å‹è½¬åŒ–æˆMMdnn IRä¸­é—´è¡¨ç¤ºï¼Œåœ¨å½“ç„¶ç›®å½•ä¸‹ä¼šç”Ÿæˆä¸€ä¸ª.npy çš„weightsæ–‡ä»¶å’Œä¸€ä¸ª.pbæ–‡ä»¶ã€‚æ¥ç€ä½¿ç”¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mmtomodel -f caffe -in pnet -iw pnet.npy -o pnet</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ç”±äºå„ç§æ·±åº¦å­¦ä¹ æ¡†æ¶çš„å±‚å‡ºä¸ç©·ï¼Œæˆ‘ä»¬åœ¨è¿›è¡Œç®—æ³•å¼€å‘åˆ°ç®—æ³•éƒ¨ç½²çš„è¿‡ç¨‹ä¸­ï¼Œå¾€å¾€éƒ½éœ€è¦ç”¨åˆ°ä¸åŒçš„æ¡†æ¶ã€‚ä¾‹å¦‚æˆ‘ä»¬å¾ˆæœ‰å¯èƒ½ä½¿ç”¨tensorflow,pytorchç­‰è¿›è¡Œç®—æ³•å¼€å‘å’Œè°ƒè¯•ï¼Œåœ¨æ—©æœŸå·¥ç¨‹inferenceçš„æ—¶å€™æˆ‘ä»¬å¾€å¾€ä½¿ç”¨è¾ƒä¸ºè½»é‡çš„caffeæˆ–è€…é­”æ”¹åçš„caffeã€‚åˆ°äº†ç§»åŠ¨ç«¯
      
    
    </summary>
    
    
      <category term="DeepLearning" scheme="https://edward7zhang.github.io/tags/DeepLearning/"/>
    
  </entry>
  
  <entry>
    <title>æ·±åº¦å­¦ä¹ ç»å…¸å·ç§¯ç¥ç»ç½‘ç»œ [å­¦ä¹ &amp;è½¬è½½]</title>
    <link href="https://edward7zhang.github.io/2019/01/16/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%BB%8F%E5%85%B8%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/"/>
    <id>https://edward7zhang.github.io/2019/01/16/æ·±åº¦å­¦ä¹ ç»å…¸å·ç§¯ç¥ç»ç½‘ç»œ/</id>
    <published>2019-01-16T11:07:14.000Z</published>
    <updated>2019-01-26T14:03:30.420Z</updated>
    
    <content type="html"><![CDATA[<p>éšç€æ·±åº¦å­¦ä¹ çš„å‘å±•ï¼Œç ”ç©¶äººå‘˜æå‡ºäº†å¾ˆå¤šæ¨¡å‹ï¼Œè¿™å…¶ä¸­ä¸€äº›è®¾è®¡æ–¹å¼ï¼Œåœ¨å½“æ—¶å–å¾—äº†å¾ˆå¥½çš„æ•ˆæœï¼Œä¹Ÿä¸ºå…¶ä»–ç§‘ç ”å·¥ä½œè€…æä¾›äº†å¾ˆå¥½çš„æ€è·¯ã€‚CNN çš„ç»å…¸ç»“æ„å§‹äº1998å¹´çš„LeNet-5ï¼Œæˆäº2012å¹´å†å²æ€§çš„AlexNetï¼Œä»æ­¤å¹¿æ³›ç”¨äºå›¾åƒç›¸å…³é¢†åŸŸï¼Œä¸»è¦åŒ…æ‹¬ï¼š</p><pre><code>1.LeNet-5, 1998å¹´2.AlexNet, 2012å¹´3.ZF-Net, 2013å¹´4.GoogleNet, 2014å¹´5.VGG, 2014å¹´6.ResNet, 2015å¹´</code></pre><p>ç»è¿‡ç§‘ç ”å·¥ä½œè€…çš„åå¤éªŒè¯åŠå¹¿æ³›ä½¿ç”¨ï¼Œè¿™äº›æ¨¡å‹é€æ¸æˆä¸ºç»å…¸ï¼Œæˆ‘ä»¬è¿™é‡Œæ”¶é›†äº†ä¸€äº›å¸¸ç”¨çš„æ¨¡å‹è¿›è¡Œä»‹ç»ã€‚</p><h3 id="1-VGG"><a href="#1-VGG" class="headerlink" title="1. VGG"></a>1. VGG</h3><p><a href="https://arxiv.org/abs/1409.1556" target="_blank" rel="external">è®ºæ–‡åœ°å€</a></p><p>VGGNetæ˜¯ç‰›æ´¥å¤§å­¦è®¡ç®—æœºè§†è§‰ç»„ï¼ˆVisual Geometry Groupï¼‰å’Œ Google DeepMind å…¬å¸çš„ç ”ç©¶å‘˜ä¸€èµ·ç ”å‘çš„çš„æ·±åº¦å·ç§¯ç¥ç»ç½‘ç»œã€‚VGGNet æ¢ç´¢äº†å·ç§¯ç¥ç»ç½‘ç»œçš„æ·±åº¦ä¸å…¶æ€§èƒ½ä¹‹é—´çš„å…³ç³»ï¼Œä¸€å…±æœ‰å…­ç§ä¸åŒçš„ç½‘ç»œç»“æ„ï¼Œä½†æ˜¯æ¯ç§ç»“æ„éƒ½æœ‰å«æœ‰ï¼•ç»„å·ç§¯ï¼Œæ¯ç»„å·ç§¯éƒ½ä½¿ç”¨ï¼“ï½˜ï¼“çš„å·ç§¯æ ¸ï¼Œæ¯ç»„å·ç§¯åè¿›è¡Œä¸€ä¸ªï¼’ï½˜ï¼’æœ€å¤§æ± åŒ–ï¼Œæ¥ä¸‹æ¥æ˜¯ä¸‰ä¸ªå…¨è¿æ¥å±‚ã€‚åœ¨è®­ç»ƒé«˜çº§åˆ«çš„ç½‘ç»œæ—¶ï¼Œå¯ä»¥å…ˆè®­ç»ƒä½çº§åˆ«çš„ç½‘ç»œï¼Œç”¨å‰è€…è·å¾—çš„æƒé‡åˆå§‹åŒ–é«˜çº§åˆ«çš„ç½‘ç»œï¼Œå¯ä»¥åŠ é€Ÿç½‘ç»œçš„æ”¶æ•›ã€‚VGGNet ç›¸æ¯”ä¹‹å‰state-of-the-artçš„ç½‘ç»œç»“æ„ï¼Œé”™è¯¯ç‡å¤§å¹…ä¸‹é™ï¼Œå¹¶å–å¾—äº†ILSVRC 2014æ¯”èµ›åˆ†ç±»é¡¹ç›®çš„ç¬¬2åå’Œå®šä½é¡¹ç›®çš„ç¬¬1åã€‚åŒæ—¶VGGNetçš„æ‹“å±•æ€§å¾ˆå¼ºï¼Œè¿ç§»åˆ°å…¶ä»–å›¾ç‰‡æ•°æ®ä¸Šçš„æ³›åŒ–æ€§éå¸¸å¥½ã€‚VGGNetçš„ç»“æ„éå¸¸ç®€æ´ï¼Œæ•´ä¸ªç½‘ç»œéƒ½ä½¿ç”¨äº†åŒæ ·å¤§å°çš„å·ç§¯æ ¸å°ºå¯¸ï¼ˆ3<em>3ï¼‰å’Œæœ€å¤§æ± åŒ–å°ºå¯¸ï¼ˆ2</em>2ï¼‰ã€‚<br>åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒVGGNetä¾ç„¶ç»å¸¸è¢«ç”¨æ¥æå–å›¾åƒç‰¹å¾ã€‚</p><p><a href="https://blog.csdn.net/marsjhao/article/details/72955935" target="_blank" rel="external">ç»å…¸å·ç§¯ç¥ç»ç½‘ç»œä¹‹VGGNet</a></p><p><a href="https://blog.csdn.net/qq_40027052/article/details/79015827" target="_blank" rel="external">VGGæ¨¡å‹æ ¸å¿ƒæ‹†è§£</a></p><h3 id="2-GoogLeNet"><a href="#2-GoogLeNet" class="headerlink" title="2. GoogLeNet"></a>2. GoogLeNet</h3><p><a href="http://arxiv.org/abs/1409.4842" target="_blank" rel="external">[v1] Going Deeper with Convolutions</a></p><p><a href="http://arxiv.org/abs/1502.03167" target="_blank" rel="external">[v2] Batch Normalization: Accelerating Deep Network Training by Reducing Internal Covariate Shift</a></p><p><a href="http://arxiv.org/abs/1512.00567" target="_blank" rel="external">[v3] Rethinking the Inception Architecture for Computer Vision</a> </p><p><a href="http://arxiv.org/abs/1602.07261" target="_blank" rel="external">[v4] Inception-v4, Inception-ResNet and the Impact of Residual Connections on Learning</a></p><p>GoogLeNetçš„æœ€æ—©ç‰ˆæœ¬ï¼Œå‡ºç°åœ¨2014å¹´çš„â€ Going deeper with convolutions â€œã€‚ä¹‹æ‰€ä»¥åä¸º â€œGoogLeNetâ€ è€Œé â€œGoogleNetâ€ ,æ–‡ç« è¯´æ˜¯ä¸ºäº†å‘æ—©æœŸçš„LeNetè‡´æ•¬ã€‚GoogleNetæå‡ºäº†ä¸€ä¸ªå…¨æ–°çš„æ·±åº¦ CNN æ¶æ„â€”â€”Inceptionï¼Œæ— å…¨è¿æ¥å±‚ï¼Œå¯ä»¥èŠ‚çœè¿ç®—çš„åŒæ—¶ï¼Œå‡å°‘äº†å¾ˆå¤šå‚æ•°ï¼Œå‚æ•°æ•°é‡æ˜¯AlexNetçš„1/12ï¼Œæ•°é‡åªæœ‰5 millionï¼Œè€Œä¸”åœ¨ImageNetç«èµ›ä¸­å–å¾—äº†å¾ˆå¥½çš„æˆç»©ã€‚</p><p><a href="https://blog.csdn.net/cdknight_happy/article/details/79247280" target="_blank" rel="external">GoogleNetç³»åˆ—è®ºæ–‡å­¦ä¹ </a></p><h3 id="3-Resnet"><a href="#3-Resnet" class="headerlink" title="3. Resnet"></a>3. Resnet</h3><p><a href="https://arxiv.org/abs/1512.03385" target="_blank" rel="external">è®ºæ–‡åœ°å€</a></p><p>ResNetåœ¨2015å¹´è¢«æå‡ºï¼Œåœ¨ImageNetæ¯”èµ›classificationä»»åŠ¡ä¸Šè·å¾—ç¬¬ä¸€åï¼Œå› ä¸ºå®ƒ â€œç®€å•ä¸å®ç”¨â€ å¹¶å­˜ï¼Œä¹‹åå¾ˆå¤šæ–¹æ³•éƒ½å»ºç«‹åœ¨ResNet50æˆ–è€…ResNet101çš„åŸºç¡€ä¸Šå®Œæˆçš„ï¼Œæ£€æµ‹ï¼Œåˆ†å‰²ï¼Œè¯†åˆ«ç­‰é¢†åŸŸéƒ½çº·çº·ä½¿ç”¨ResNetï¼Œå…·æœ‰å¾ˆå¼ºçš„é€‚åº”æ€§ã€‚ResNetçš„ä½œè€…<a href="http://kaiminghe.com/" target="_blank" rel="external">ä½•å‡¯æ˜</a>ä¹Ÿå› æ­¤æ‘˜å¾—CVPR2016æœ€ä½³è®ºæ–‡å¥–ã€‚</p><p><a href="https://blog.csdn.net/lanran2/article/details/79057994" target="_blank" rel="external">ResNetè§£æ</a></p><p><a href="https://blog.csdn.net/xxy0118/article/details/78324256" target="_blank" rel="external">ResNetå­¦ä¹ </a></p><h3 id="4-MobileNet-V1-amp-MobileNet-V2"><a href="#4-MobileNet-V1-amp-MobileNet-V2" class="headerlink" title="4. MobileNet-V1 &amp; MobileNet -V2"></a>4. MobileNet-V1 &amp; MobileNet -V2</h3><p><a href="https://arxiv.org/abs/1704.04861" target="_blank" rel="external">V1è®ºæ–‡åœ°å€</a></p><p><a href="https://arxiv.org/abs/1801.04381" target="_blank" rel="external">V2è®ºæ–‡åœ°å€</a></p><p>MobileNetæ˜¯Googleå›¢é˜Ÿé’ˆå¯¹ç§»åŠ¨ç«¯æå‡ºçš„é«˜æ•ˆå›¾åƒè¯†åˆ«ç½‘ç»œï¼Œæ·±å…¥çš„ç ”ç©¶äº†Depthwise Separable Convolutionsä½¿ç”¨æ–¹æ³•åè®¾è®¡å‡ºMobileNetï¼ŒDepthwise Separable Convolutionsçš„æœ¬è´¨æ˜¯å†—ä½™ä¿¡æ¯æ›´å°‘çš„ç¨€ç–åŒ–è¡¨è¾¾ã€‚åœ¨æ­¤åŸºç¡€ä¸Šç»™å‡ºäº†é«˜æ•ˆæ¨¡å‹è®¾è®¡çš„ä¸¤ä¸ªé€‰æ‹©ï¼šå®½åº¦å› å­(Width Multiplier)å’Œåˆ†è¾¨ç‡å› å­(Resolution Multiplier)ï¼›é€šè¿‡æƒè¡¡å¤§å°ã€å»¶è¿Ÿæ—¶é—´ä»¥åŠç²¾åº¦ï¼Œæ¥æ„å»ºè§„æ¨¡æ›´å°ã€é€Ÿåº¦æ›´å¿«çš„MobileNetã€‚</p><p>MobileNet V2æ˜¯ä¹‹å‰MobileNet V1çš„æ”¹è¿›ç‰ˆã€‚MobileNet V1ä¸­ä¸»è¦æ˜¯å¼•å…¥äº†Depthwise Separable Convolutionä»£æ›¿ä¼ ç»Ÿçš„å·ç§¯æ“ä½œï¼Œç›¸å½“äºå®ç°äº†spatialå’Œchannelä¹‹é—´çš„è§£è€¦ï¼Œè¾¾åˆ°æ¨¡å‹åŠ é€Ÿçš„ç›®çš„ï¼Œæ•´ä½“ç½‘ç»œç»“æ„è¿˜æ˜¯å»¶ç»­äº†VGGç½‘ç»œç›´ä¸Šç›´ä¸‹çš„ç‰¹ç‚¹ã€‚å’ŒMobileNet V1ç›¸æ¯”ï¼ŒMobileNet V2ä¸»è¦çš„æ”¹è¿›æœ‰ä¸¤ç‚¹ï¼š1ã€Linear Bottlenecksã€‚ä¹Ÿå°±æ˜¯å»æ‰äº†å°ç»´åº¦è¾“å‡ºå±‚åé¢çš„éçº¿æ€§æ¿€æ´»å±‚ï¼Œç›®çš„æ˜¯ä¸ºäº†ä¿è¯æ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›ã€‚2ã€Inverted Residual blockã€‚è¯¥ç»“æ„å’Œä¼ ç»Ÿresidual blockä¸­ç»´åº¦å…ˆç¼©å‡å†æ‰©å¢æ­£å¥½ç›¸åï¼Œå› æ­¤shotcutä¹Ÿå°±å˜æˆäº†è¿æ¥çš„æ˜¯ç»´åº¦ç¼©å‡åçš„feature mapã€‚</p><p><a href="https://blog.csdn.net/t800ghb/article/details/78879612" target="_blank" rel="external">æ·±åº¦è§£è¯»è°·æ­ŒMobileNet</a></p><p><a href="https://blog.csdn.net/u011995719/article/details/79135818" target="_blank" rel="external">è½»é‡åŒ–ç½‘ç»œï¼šMobileNet-V2</a></p><h3 id="5-U-NET"><a href="#5-U-NET" class="headerlink" title="5. U-NET"></a>5. U-NET</h3><p><a href="http://arxiv.org/abs/1505.04597" target="_blank" rel="external">è®ºæ–‡åœ°å€</a></p><p><a href="https://lmb.informatik.uni-freiburg.de/people/ronneber/u-net/" target="_blank" rel="external">é¡¹ç›®åœ°å€</a></p><p>è¿™æ˜¯Encoder-Decoderç½‘ç»œçš„ä¸€ç§ï¼Œåœ¨æ— ç›‘ç£å­¦ä¹ ä¸­çš„æ¡†æ¶ï¼Œåˆ©ç”¨convä¸deconvé™ç»´å‡ç»´æ¥è¿›è¡Œå­¦ä¹ ï¼Œåˆ†åˆ«å«åšencoderä¸decoderç¼–ç è§£ç ï¼Œä¸€èˆ¬åŸºäºå·ç§¯ç½‘ç»œï¼Œencoderåç›¸å½“äºå­¦ä¹ åˆ°äº†ç‰¹å¾ï¼Œè€Œdecoderåç›¸å½“äºè¿˜åŸäº†å›¾åƒï¼Œæ—¢å¯ä»¥ç”¨è¾“å…¥å›¾åƒè¿›è¡Œè®­ç»ƒï¼Œè®­ç»ƒå¥½ä¸€å±‚åŠ æ·±ä¸€å±‚ã€‚å†å¯ä»¥åˆ©ç”¨æœ‰ç›‘ç£å¾®è°ƒï¼Œä»è€Œè¾¾åˆ°åˆ†ç±»æˆ–è€…å›¾åƒè½¬æ¢çš„ç›®çš„ã€‚</p><h3 id="6-GAN"><a href="#6-GAN" class="headerlink" title="6. GAN"></a>6. GAN</h3><p>æ€»ç»“ï¼šåˆ©ç”¨ä¸¤ä¸ªç½‘ç»œå¯¹æŠ—ç”Ÿæˆæ¨¡å‹ï¼Œç”Ÿæˆå™¨ä¸è¾¨åˆ«å™¨ï¼Œç”Ÿæˆå™¨è¾“å…¥å›¾åƒï¼Œç”Ÿæˆæ‰€éœ€å›¾åƒï¼Œè¾¨åˆ«å™¨è¾¨åˆ«æ‰€éœ€å›¾åƒä¸ç”Ÿæˆå›¾åƒï¼Œä½¿ç”Ÿæˆå™¨çš„ç”Ÿæˆå›¾åƒéª—è¿‡è¾¨åˆ«å™¨ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;éšç€æ·±åº¦å­¦ä¹ çš„å‘å±•ï¼Œç ”ç©¶äººå‘˜æå‡ºäº†å¾ˆå¤šæ¨¡å‹ï¼Œè¿™å…¶ä¸­ä¸€äº›è®¾è®¡æ–¹å¼ï¼Œåœ¨å½“æ—¶å–å¾—äº†å¾ˆå¥½çš„æ•ˆæœï¼Œä¹Ÿä¸ºå…¶ä»–ç§‘ç ”å·¥ä½œè€…æä¾›äº†å¾ˆå¥½çš„æ€è·¯ã€‚CNN çš„ç»å…¸ç»“æ„å§‹äº1998å¹´çš„LeNet-5ï¼Œæˆäº2012å¹´å†å²æ€§çš„AlexNetï¼Œä»æ­¤å¹¿æ³›ç”¨äºå›¾åƒç›¸å…³é¢†åŸŸï¼Œä¸»è¦åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;co
      
    
    </summary>
    
    
      <category term="DeepLearning" scheme="https://edward7zhang.github.io/tags/DeepLearning/"/>
    
  </entry>
  
  <entry>
    <title>å¸¸ç”¨æ·±åº¦å­¦ä¹ æ¡†æ¶[å­¦ä¹ &amp;è½¬è½½]</title>
    <link href="https://edward7zhang.github.io/2019/01/09/%E5%B8%B8%E8%A7%81%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/"/>
    <id>https://edward7zhang.github.io/2019/01/09/å¸¸è§æ·±åº¦å­¦ä¹ æ¡†æ¶/</id>
    <published>2019-01-09T11:07:14.000Z</published>
    <updated>2019-01-09T12:55:52.270Z</updated>
    
    <content type="html"><![CDATA[<p>æ·±åº¦å­¦ä¹ ç ”ç©¶çš„çƒ­æ½®æŒç»­é«˜æ¶¨ï¼Œå„ç§å¼€æºæ·±åº¦å­¦ä¹ æ¡†æ¶ä¹Ÿå±‚å‡ºä¸ç©·ï¼Œå…¶ä¸­åŒ…æ‹¬TensorFlowã€Caffeã€Kerasã€CNTKã€Torch7ã€MXNetã€Leafã€Theanoã€DeepLearning4ã€Lasagneã€Neonç­‰ã€‚æˆ‘ä»¬å‚è€ƒå¼€æºçš„æµ‹è¯•ç»“æœï¼Œç»“åˆè‡ªå·±æ•´ç†çš„æ•°æ®ï¼Œé’ˆå¯¹ä¸»æµçš„æ·±åº¦å­¦ä¹ æ¡†æ¶è¿›è¡Œç®€å•å¯¹æ¯”åŠä»‹ç»ã€‚</p><table><thead><tr><th>æ¡†æ¶</th><th>æœºæ„</th><th>æ”¯æŒè¯­è¨€</th><th>Stars</th><th>Forks</th></tr></thead><tbody><tr><td><a href="https://github.com/BVLC/caffe" target="_blank" rel="external">Caffe</a></td><td>BVLC</td><td>C++/Python/Matlab</td><td>25480</td><td>15560</td></tr><tr><td><a href="https://github.com/Microsoft/CNTK" target="_blank" rel="external">CNTK</a></td><td>Microsoft</td><td>C++</td><td>15083</td><td>4020</td></tr><tr><td><a href="notebooks/Keras_TF_CNN.ipynb">Keras</a></td><td>Fchollet</td><td>Python</td><td>33332</td><td>12563</td></tr><tr><td><a href="https://github.com/tensorflow/tensorflow" target="_blank" rel="external">Tensorflow</a></td><td>Google</td><td>Python/C++/Goâ€¦</td><td>109115</td><td>67339</td></tr><tr><td><a href="https://github.com/apache/incubator-mxnet" target="_blank" rel="external">MXNet</a></td><td>DMLC</td><td>Python/C++/Râ€¦</td><td>15162</td><td>5484</td></tr><tr><td><a href="https://github.com/pytorch/pytorch" target="_blank" rel="external">PyTorch</a></td><td>Facebook</td><td>Python</td><td>18517</td><td>4426</td></tr></tbody></table><h3 id="æ€§èƒ½å¯¹æ¯”"><a href="#æ€§èƒ½å¯¹æ¯”" class="headerlink" title="æ€§èƒ½å¯¹æ¯”"></a>æ€§èƒ½å¯¹æ¯”</h3><h4 id="1-è®­ç»ƒæ—¶é—´-Network-DenseNet-121-Multi-GPU"><a href="#1-è®­ç»ƒæ—¶é—´-Network-DenseNet-121-Multi-GPU" class="headerlink" title="1. è®­ç»ƒæ—¶é—´: Network DenseNet-121 (Multi-GPU)"></a>1. è®­ç»ƒæ—¶é—´: Network DenseNet-121 (Multi-GPU)</h4><p><strong>è¿è¡Œäº SSD ç¡¬ç›˜</strong></p><table><thead><tr><th>æ¡†æ¶</th><th style="text-align:center">1xV100/CUDA 9/CuDNN 7</th><th style="text-align:center">4xV100/CUDA 9/CuDNN 7</th></tr></thead><tbody><tr><td>Pytorch</td><td style="text-align:center">27min</td><td style="text-align:center">10min</td></tr><tr><td>Keras(TF)</td><td style="text-align:center">38min</td><td style="text-align:center">18min</td></tr><tr><td>Tensorflow</td><td style="text-align:center">33min</td><td style="text-align:center">22min</td></tr><tr><td>MXNet(Gluon)</td><td style="text-align:center">29min</td><td style="text-align:center">10min</td></tr></tbody></table><p><strong>è¿è¡ŒäºRAMå†…å­˜ä¸­</strong></p><table><thead><tr><th>æ¡†æ¶</th><th style="text-align:center">1xV100/CUDA 9/CuDNN 7</th><th style="text-align:center">4xV100/CUDA 9/CuDNN 7</th></tr></thead><tbody><tr><td>Pytorch</td><td style="text-align:center">25min</td><td style="text-align:center">8min</td></tr><tr><td>Keras(TF)</td><td style="text-align:center">36min</td><td style="text-align:center">15min</td></tr><tr><td>Tensorflow</td><td style="text-align:center">25min</td><td style="text-align:center">14min</td></tr><tr><td>MXNet(Gluon)</td><td style="text-align:center">28min</td><td style="text-align:center">8min</td></tr></tbody></table><h4 id="2-1000å¼ å›¾ç‰‡æ¨ç†æ—¶é—´-s-Network-ResNet-50"><a href="#2-1000å¼ å›¾ç‰‡æ¨ç†æ—¶é—´-s-Network-ResNet-50" class="headerlink" title="2. 1000å¼ å›¾ç‰‡æ¨ç†æ—¶é—´(s): Network ResNet-50"></a>2. 1000å¼ å›¾ç‰‡æ¨ç†æ—¶é—´(s): Network ResNet-50</h4><table><thead><tr><th>æ¡†æ¶</th><th style="text-align:center">K80/CUDA 8/CuDNN 6</th><th style="text-align:center">P100/CUDA 8/CuDNN 6</th></tr></thead><tbody><tr><td>CNTK</td><td style="text-align:center">8.5</td><td style="text-align:center">1.6</td></tr><tr><td>Keras(TF)</td><td style="text-align:center">10.2</td><td style="text-align:center">2.9</td></tr><tr><td>Tensorflow</td><td style="text-align:center">6.5</td><td style="text-align:center">1.8</td></tr><tr><td>MXNet</td><td style="text-align:center">7.7</td><td style="text-align:center">1.6</td></tr><tr><td>PyTorch</td><td style="text-align:center">7.7</td><td style="text-align:center">1.9</td></tr></tbody></table><h4 id="3-CPUæ¨ç†æ—¶é—´-s-E5-2630v4-Network-FCN5"><a href="#3-CPUæ¨ç†æ—¶é—´-s-E5-2630v4-Network-FCN5" class="headerlink" title="3. CPUæ¨ç†æ—¶é—´(s): E5-2630v4, Network FCN5"></a>3. CPUæ¨ç†æ—¶é—´(s): E5-2630v4, Network FCN5</h4><table><thead><tr><th>æ¡†æ¶</th><th style="text-align:center">1 Thread</th><th style="text-align:center">2 Threads</th><th style="text-align:center">4 Threads</th><th style="text-align:center">8 Threads</th><th style="text-align:center">16 Threads</th><th style="text-align:center">32 Threads</th></tr></thead><tbody><tr><td>Caffe</td><td style="text-align:center">1887.2ms</td><td style="text-align:center">1316.7ms</td><td style="text-align:center">1051.8ms</td><td style="text-align:center">952.1ms</td><td style="text-align:center">952.3ms</td><td style="text-align:center">834.7ms</td></tr><tr><td>CNTK</td><td style="text-align:center">1238.7ms</td><td style="text-align:center">616.3ms</td><td style="text-align:center">352.7ms</td><td style="text-align:center">229.5ms</td><td style="text-align:center">155.9ms</td><td style="text-align:center">192.4ms</td></tr><tr><td>Tensorflow</td><td style="text-align:center">992.2ms</td><td style="text-align:center">773.6ms</td><td style="text-align:center">419.3ms</td><td style="text-align:center">252.3ms</td><td style="text-align:center">149.7ms</td><td style="text-align:center">124.7ms</td></tr><tr><td>MXNet</td><td style="text-align:center">1386.8ms</td><td style="text-align:center">915.5ms</td><td style="text-align:center">559.0ms</td><td style="text-align:center">499.1ms</td><td style="text-align:center">416.3ms</td><td style="text-align:center">413.9ms</td></tr></tbody></table><h3 id="æ¡†æ¶è¯„ä»·"><a href="#æ¡†æ¶è¯„ä»·" class="headerlink" title="æ¡†æ¶è¯„ä»·"></a>æ¡†æ¶è¯„ä»·</h3><table><thead><tr><th>æ¡†æ¶</th><th style="text-align:center">å®‰è£…æˆæœ¬</th><th style="text-align:center">ä»£ç ç†è§£ç¨‹åº¦</th><th style="text-align:center">APIä¸°å¯Œç¨‹åº¦</th><th style="text-align:center">æ¨¡å‹ä¸°å¯Œç¨‹åº¦</th><th style="text-align:center">æ–‡æ¡£å®Œæ•´ç¨‹åº¦</th><th style="text-align:center">è®­ç»ƒä¸æµ‹è¿‡ç¨‹</th><th style="text-align:center">å­¦ä¹ èµ„æº</th></tr></thead><tbody><tr><td>CNTK</td><td style="text-align:center">è‰¯å¥½</td><td style="text-align:center">è‰¯å¥½</td><td style="text-align:center">è‰¯å¥½</td><td style="text-align:center">è‰¯å¥½</td><td style="text-align:center">ä¼˜ç§€</td><td style="text-align:center">è‰¯å¥½</td><td style="text-align:center">è‰¯å¥½</td></tr><tr><td>Keras</td><td style="text-align:center">è‰¯å¥½</td><td style="text-align:center">è‰¯å¥½</td><td style="text-align:center">ä¼˜ç§€</td><td style="text-align:center">ä¼˜ç§€</td><td style="text-align:center">è‰¯å¥½</td><td style="text-align:center">ä¼˜ç§€</td><td style="text-align:center">è‰¯å¥½</td></tr><tr><td>MXNet</td><td style="text-align:center">è‰¯å¥½</td><td style="text-align:center">è‰¯å¥½</td><td style="text-align:center">è‰¯å¥½</td><td style="text-align:center">è‰¯å¥½</td><td style="text-align:center">è‰¯å¥½</td><td style="text-align:center">ä¼˜ç§€</td><td style="text-align:center">ä¼˜ç§€</td></tr><tr><td>Pytorch</td><td style="text-align:center">ä¼˜ç§€</td><td style="text-align:center">ä¼˜ç§€</td><td style="text-align:center">è‰¯å¥½</td><td style="text-align:center">è‰¯å¥½</td><td style="text-align:center">ä¼˜ç§€</td><td style="text-align:center">è‰¯å¥½</td><td style="text-align:center">è‰¯å¥½</td></tr><tr><td>Tensorflow</td><td style="text-align:center">è‰¯å¥½</td><td style="text-align:center">è‰¯å¥½</td><td style="text-align:center">ä¼˜ç§€</td><td style="text-align:center">ä¼˜ç§€</td><td style="text-align:center">ä¼˜ç§€</td><td style="text-align:center">ä¼˜ç§€</td><td style="text-align:center">ä¼˜ç§€</td></tr><tr><td>Caffe</td><td style="text-align:center">è‰¯å¥½</td><td style="text-align:center">ä¼˜ç§€</td><td style="text-align:center">è‰¯å¥½</td><td style="text-align:center">è‰¯å¥½</td><td style="text-align:center">ä¼˜ç§€</td><td style="text-align:center">è‰¯å¥½</td><td style="text-align:center">ä¼˜ç§€</td></tr></tbody></table><h3 id="æ¨èæ¡†æ¶"><a href="#æ¨èæ¡†æ¶" class="headerlink" title="æ¨èæ¡†æ¶"></a>æ¨èæ¡†æ¶</h3><p>ç›®å‰ä¼—å¤šçš„æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œä½¿ç”¨è€…åªè¦é€‰æ‹©é€‚åˆè‡ªå·±çš„æ¡†æ¶å³å¯ï¼Œæˆ‘ä»¬åœ¨æ—¥å¸¸ä½¿ç”¨ä¸­ï¼Œè€ƒè™‘åˆ°è®­ç»ƒçš„å¿«æ·ç¨‹åº¦ï¼Œéƒ¨ç½²éš¾åº¦ä»¥åŠå¯¹CNNã€RNNæ¨¡å‹çš„ç›´æ¥ç¨‹åº¦ï¼Œæ¨èä»¥ä¸‹å‡ æ¬¾æ·±åº¦å­¦ä¹ æ¡†æ¶ã€‚</p><h4 id="1-Keras"><a href="#1-Keras" class="headerlink" title="1.Keras"></a>1.Keras</h4><p>Keras æä¾›äº†ç®€å•æ˜“ç”¨çš„ API æ¥å£ï¼Œå…¥é—¨å¿«ï¼Œç‰¹åˆ«é€‚åˆåˆå­¦è€…å…¥é—¨ã€‚å…¶åç«¯é‡‡ç”¨ TensorFlow, CNTKï¼Œä»¥åŠ Theanoã€‚å¦å¤–ï¼ŒDeeplearning4j çš„ Python ä¹Ÿæ˜¯åŸºäº Keras å®ç°çš„ã€‚Keras å‡ ä¹å·²ç»æˆäº† Python ç¥ç»ç½‘ç»œçš„æ¥å£æ ‡å‡†ã€‚</p><h4 id="2-TensorFlow"><a href="#2-TensorFlow" class="headerlink" title="2.TensorFlow"></a>2.TensorFlow</h4><p>è°·æ­Œå‡ºå“ï¼Œè¿½éšè€…ä¼—å¤šã€‚ä»£ç è´¨é‡é«˜ï¼Œæ”¯æŒæ¨¡å‹ä¸°å¯Œï¼Œæ”¯æŒè¯­è¨€å¤šæ ·ï¼Œ TensorBoard å¯è§†åŒ–å·¥å…·ä½¿ç”¨æ–¹ä¾¿ã€‚</p><h4 id="3-MXNet"><a href="#3-MXNet" class="headerlink" title="3.MXNet"></a>3.MXNet</h4><p>å·²è¢«äºšé©¬é€Šé€‰ä¸º AWS ä¸Šçš„æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œæ”¯æŒåŠ¨æ€å›¾è®¡ç®—ã€‚MXNet æœ‰è®¸å¤šä¸­å›½å¼€å‘è€…ï¼Œå› è€Œæœ‰éå¸¸è‰¯å¥½çš„ä¸­æ–‡æ–‡æ¡£æ”¯æŒã€‚Gluon æ¥å£ä½¿å¾— MXNet åƒ Keras ä¸€æ ·ç®€å•æ˜“ç”¨ã€‚</p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ol><li><a href="http://dlbench.comp.hkbu.edu.hk/?v=v8" target="_blank" rel="external">é¦™æ¸¯æµ¸ä¼šå¤§å­¦æ·±åº¦å­¦ä¹ æ¡†æ¶Benchmark</a></li><li><a href="https://github.com/ilkarman/DeepLearningFrameworks" target="_blank" rel="external">DeepLearningFrameworks</a></li><li><a href="http://app.myzaker.com/news/article.php?pk=5a13b55c1bc8e05d71000016" target="_blank" rel="external">åšå®¢</a></li><li><a href="https://www.zhihu.com/question/68114194/answer/465874315" target="_blank" rel="external">å¼€å‘è€…å¦‚ä½•é€‰æ‹©æ·±åº¦å­¦ä¹ æ¡†æ¶?</a></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æ·±åº¦å­¦ä¹ ç ”ç©¶çš„çƒ­æ½®æŒç»­é«˜æ¶¨ï¼Œå„ç§å¼€æºæ·±åº¦å­¦ä¹ æ¡†æ¶ä¹Ÿå±‚å‡ºä¸ç©·ï¼Œå…¶ä¸­åŒ…æ‹¬TensorFlowã€Caffeã€Kerasã€CNTKã€Torch7ã€MXNetã€Leafã€Theanoã€DeepLearning4ã€Lasagneã€Neonç­‰ã€‚æˆ‘ä»¬å‚è€ƒå¼€æºçš„æµ‹è¯•ç»“æœï¼Œç»“åˆè‡ªå·±æ•´ç†çš„æ•°æ®ï¼Œ
      
    
    </summary>
    
    
      <category term="DeepLearning" scheme="https://edward7zhang.github.io/tags/DeepLearning/"/>
    
  </entry>
  
  <entry>
    <title>å›ç¯ï¼Œæœªæ¥å¯æœŸ</title>
    <link href="https://edward7zhang.github.io/2018/08/27/%E5%9B%9E%E7%8E%AF%EF%BC%8C%E6%9C%AA%E6%9D%A5%E5%8F%AF%E6%9C%9F/"/>
    <id>https://edward7zhang.github.io/2018/08/27/å›ç¯ï¼Œæœªæ¥å¯æœŸ/</id>
    <published>2018-08-26T17:42:07.000Z</published>
    <updated>2018-08-26T13:25:57.009Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä»Šå¤©ï¼Œæ˜¯æˆ‘21å²çš„ç”Ÿæ—¥ã€‚<br>åœ¨ä¸€ä¸ªåŠæœˆå‰æˆ‘è¾èŒäº†ï¼Œä½†å‡†ç¡®çš„è¯´æ˜¯è¢«åŠ¨å¼è¾èŒã€‚<br>ç°åœ¨çœ‹æ¥è¿™æ˜¯ä¸€ä»¶å¥½äº‹ã€‚</p></blockquote><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://i.loli.net/2018/08/25/5b8176988f43d.jpg" alt="ç¬¬ä¸€å¤©åˆ°å…¬å¸æ¥¼ä¸‹" title="">                </div>                <div class="image-caption">ç¬¬ä¸€å¤©åˆ°å…¬å¸æ¥¼ä¸‹</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://i.loli.net/2018/08/25/5b8173ac7c155.jpg" alt="å·¥ç‰Œ" title="">                </div>                <div class="image-caption">å·¥ç‰Œ</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://i.loli.net/2018/08/25/5b81769918ccc.jpg" alt="ç¬¬ä¸€å¤©å®‰é¡¿ä¸‹æ¥" title="">                </div>                <div class="image-caption">ç¬¬ä¸€å¤©å®‰é¡¿ä¸‹æ¥</div>            </figure><h2 id="ä¼¼ä¹äººç”Ÿè¿›å…¥å¼±å† ä¹‹åï¼Œå¾ˆå¤šäº‹æƒ…éƒ½äº‹å‘çªç„¶ï¼Œå¥½åœ¨äº‹æƒ…å‘ç”Ÿè¿‡åï¼Œå†å›å¤´çœ‹ï¼Œä¸å¤±æ˜¯ä¸€ç§ä¸é”™çš„ç»å†"><a href="#ä¼¼ä¹äººç”Ÿè¿›å…¥å¼±å† ä¹‹åï¼Œå¾ˆå¤šäº‹æƒ…éƒ½äº‹å‘çªç„¶ï¼Œå¥½åœ¨äº‹æƒ…å‘ç”Ÿè¿‡åï¼Œå†å›å¤´çœ‹ï¼Œä¸å¤±æ˜¯ä¸€ç§ä¸é”™çš„ç»å†" class="headerlink" title="ä¼¼ä¹äººç”Ÿè¿›å…¥å¼±å† ä¹‹åï¼Œå¾ˆå¤šäº‹æƒ…éƒ½äº‹å‘çªç„¶ï¼Œå¥½åœ¨äº‹æƒ…å‘ç”Ÿè¿‡åï¼Œå†å›å¤´çœ‹ï¼Œä¸å¤±æ˜¯ä¸€ç§ä¸é”™çš„ç»å†"></a>ä¼¼ä¹äººç”Ÿè¿›å…¥å¼±å† ä¹‹åï¼Œå¾ˆå¤šäº‹æƒ…éƒ½äº‹å‘çªç„¶ï¼Œå¥½åœ¨äº‹æƒ…å‘ç”Ÿè¿‡åï¼Œå†å›å¤´çœ‹ï¼Œä¸å¤±æ˜¯ä¸€ç§ä¸é”™çš„ç»å†</h2><p>è¾èŒçš„åŸå› æ˜¯ä¼˜ç§€çš„projectä¸è¢«è®¤å¯â€¦æ‰€ä»¥å’Œæˆ‘çš„ç›´æ¥ä¸»ç®¡å°±ä¸€å¹¶é€‰æ‹©äº†ç¦»èŒâ€¦</p><p>åœ¨å¤–ç•Œäººçœ‹æ¥å¯èƒ½è¿™ç§åšæ³•ç®€ç›´æ˜¯ä¸è§£â€¦</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://i.loli.net/2018/08/25/5b8173aeb88e9.jpg" alt="å—¯ï¼Œå¸Œæœ›è¿™å®¶å…¬å¸å¯ä»¥ä¿æŒåˆå¿ƒ" title="">                </div>                <div class="image-caption">å—¯ï¼Œå¸Œæœ›è¿™å®¶å…¬å¸å¯ä»¥ä¿æŒåˆå¿ƒ</div>            </figure><p>å¯æ˜¯å¯¹äºç¨‹åºçŒ¿è¿™ç±»äººæ¥è¯´ï¼Œèƒ½åšè‡ªå·±æ„Ÿå…´è¶£çš„äº‹æƒ…åº”è¯¥æ˜¯æœ€é«˜çš„è£èª‰â€¦</p><p>å†µä¸”æ˜¯åœ¨ä¸€ä¸ªä¼˜ç§€projectå¹¶ä¸”åœ¨æœ‰è‰¯å¥½å®ç°çš„åŸºç¡€ä¸Šè¢«å¦æ‰â€¦è¿™ç§ç—›è‹¦è«è¿‡äºé¥®é¸©</p><p>æ­£å¦‚æ ‡é¢˜æ‰€è¨€<strong> å›ç¯ </strong>ï¼Œåˆšåˆšæ¥åˆ°æ¶ˆæ¯çš„æ—¶å€™è‡ªå·±è¿˜éƒé—·äº†ä¸€æ•´å¤©ï¼Œç°åœ¨å›å¤´çœ‹è¿™åº”è¯¥æ˜¯ä¸€ç§å›ç¯ï¼Œå°±å¦‚åŒç«‹äº¤æ¡¥çš„è½¬ç¯åŒé“ï¼Œè™½ç„¶åˆç»•å›äº†åŸç‚¹ï¼Œä½†æ˜¯å´æå‡äº†ä¸€ä¸ªç»´åº¦ã€‚</p><p>å¹¸è¿å¦‚æˆ‘ï¼Œåœ¨è¿™çŸ­æš‚çš„å®ä¹ ä¸­é‡åˆ°äº†éå¸¸niceçš„ä¸»ç®¡ï¼Œæ¶¨äº†å¾ˆå¤šè§è¯†ï¼Œæ„è¯†åˆ°æˆ‘ä¹‹å‰æ˜¯å¤šä¹ˆçš„çŸ­è§†â€¦ä»è€Œä¹Ÿçœ‹åˆ°äº†è‡ªå·±æœªæ¥çš„ä¸€äº›å¯èƒ½ï¼Œä½†å‰æè¦åšä¸€äº›ä»˜å‡ºã€‚</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://i.loli.net/2018/08/25/5b8173ad848db.jpg" alt="å…¬å¸å¯¹é¢çš„è…¾è®¯&å®Œç¾ä¸–ç•Œ" title="">                </div>                <div class="image-caption">å…¬å¸å¯¹é¢çš„è…¾è®¯&å®Œç¾ä¸–ç•Œ</div>            </figure><h2 id="åœ¨è¿™ä¸¤ä¸ªæœˆçš„å®ä¹ ä¸­ï¼Œé¡¹ç›®è¿›å±•æœ‰å¦‚ç¥åŠ©"><a href="#åœ¨è¿™ä¸¤ä¸ªæœˆçš„å®ä¹ ä¸­ï¼Œé¡¹ç›®è¿›å±•æœ‰å¦‚ç¥åŠ©" class="headerlink" title="åœ¨è¿™ä¸¤ä¸ªæœˆçš„å®ä¹ ä¸­ï¼Œé¡¹ç›®è¿›å±•æœ‰å¦‚ç¥åŠ©"></a>åœ¨è¿™ä¸¤ä¸ªæœˆçš„å®ä¹ ä¸­ï¼Œé¡¹ç›®è¿›å±•æœ‰å¦‚ç¥åŠ©</h2><p>åœ¨å®ä¹ è¿™æ®µæ—¶é—´ï¼Œé¡¹ç›®è¿›å±•é€Ÿåº¦æƒŠäººï¼Œæ¯å¤©éƒ½å¾ˆå……å®ï¼Œæ¯å¤©ä¸€ç»„çš„ä¼™ä¼´ä»¬éƒ½åœ¨ä¸€èµ·æƒ³å¯¹ç­–ï¼Œç°åœ¨å›å¤´æƒ³æƒ³ä¹Ÿè®¸æ˜¯ä¹‹å‰è‡ªå·±åœ¨äººå·¥æ™ºèƒ½æ–¹é¢çš„ä¸€ç‚¹å°å°çš„ç»éªŒåŠ ä¹‹ä¸»ç®¡ä¹‹å‰åœ¨NLPæ–¹é¢çš„ç ”ç©¶çš„å…±äº¤ä½¿å¾—é¡¹ç›®å‘å±•è¿…é€Ÿã€‚</p><p>ä¸¤ä¸ªæœˆçš„æ—¶é—´å®ç°äº†æ¨¡å‹çš„æ­å»ºä»¥åŠdemoçš„å®ç°&amp;é¡¹ç›®é¢„æ¼”â€¦</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://i.loli.net/2018/08/25/5b8173a8e14d3.png" alt="å·¥ä½" title="">                </div>                <div class="image-caption">å·¥ä½</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://i.loli.net/2018/08/25/5b8173ac5d381.jpg" alt="åœ¨å…¬å¸æœ€åä¸€å¤©çš„é¡¹ç›®æ±‡æŠ¥" title="">                </div>                <div class="image-caption">åœ¨å…¬å¸æœ€åä¸€å¤©çš„é¡¹ç›®æ±‡æŠ¥</div>            </figure><p>è‡³äºä¸ºä»€ä¹ˆå¦æ‰æˆ‘ä»¬â€¦å„ç§å› ç´ â€¦ä¸æƒ³æ˜è¯´äº†â€¦æœ‰ç‚¹å®˜å®¦é£æ ¼â€¦å„ä½çœ‹å®¢è‡ªå·±æƒ³è±¡å§â€¦</p><h2 id="ä¸‹ä¸€æ­¥ï¼Œå†è¿›ç«™"><a href="#ä¸‹ä¸€æ­¥ï¼Œå†è¿›ç«™" class="headerlink" title="ä¸‹ä¸€æ­¥ï¼Œå†è¿›ç«™"></a>ä¸‹ä¸€æ­¥ï¼Œå†è¿›ç«™</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://i.loli.net/2018/08/25/5b8173ad86919.jpg" alt="åå°„" title="">                </div>                <div class="image-caption">åå°„</div>            </figure><p>è¿™ä¸€è¶Ÿå®ä¹ ä¸‹æ¥ï¼Œå¯ä»¥è¯´å½»åº•æ”¹å˜äº†æˆ‘æ›¾ç»å¯¹è‡ªå·±çš„çœ‹æ³•â€¦</p><p>æ€»çš„æ¥è¯´ï¼Œè¿‡å»æˆ‘å¸¸å¸¸è§†çº¿è¿‡åº¦çŸ­æµ…â€¦åœ¨å¯¹è‡ªå·±äººç”Ÿçš„è§„åˆ’ä¸Šä¹Ÿè¿‡äºä¿å®ˆå§â€¦</p><p>äº‹å®ä¸Šï¼Œä¸€ä¸ªäººæ‰€çœ‹åˆ°çš„å¾€å¾€æ˜¯ç‹­çª„çš„ï¼Œé€šè¿‡ä¸æ–­çš„æ¥è§¦é«˜å±‚æ¬¡çš„äººå’Œäº‹ç‰©æ‰èƒ½è®©è‡ªå·±å˜å¾—æ›´openã€‚</p><p>å†³å®šäº†è€ƒç ”ï¼Œä¹Ÿçœ‹æ¸…äº†å›½å†…çš„äº’è”ç½‘ç¯å¢ƒçš„è™šå®â€¦å¸Œæœ›è‡ªå·±èƒ½ä»˜æœ‰æ‰€å¾—â€¦</p><p>å¦‚æœæœ‰æœºä¼šï¼Œè¿˜æ˜¯å»æ¥è§¦æ¥è§¦æŠ€æœ¯åŸå§‹åœ°ç†é™¶ç†é™¶å§â€¦</p><h2 id="æœªæ¥å¯æœŸ"><a href="#æœªæ¥å¯æœŸ" class="headerlink" title="æœªæ¥å¯æœŸ"></a>æœªæ¥å¯æœŸ</h2><p>åœ¨å¤§å­¦é‡Œçš„ä¸‰å¹´å†ç®—ä¸Šå®ä¹ çš„ç»å†â€¦å°è¯•äº†äº’è”ç½‘å¼€å‘çš„å¾ˆå¤šæ–¹å‘â€¦</p><p>æœ€ç»ˆå¸å¼•æˆ‘çš„å¹¶ä¸æ˜¯å„ç§æ¡†æ¶ç‚«æŠ€çš„å¼€å‘â€¦è€Œæ˜¯èƒ½èµ‹äºˆåº”ç”¨çµé­‚çš„äººå·¥æ™ºèƒ½æ–¹å‘â€¦</p><p>å¤§æ¦‚æœªæ¥çš„å‘å±•æ–¹å‘ä¹Ÿå°±å®šåœ¨è¿™æ ·çš„è¶‹åŠ¿äº†â€¦</p><p><strong>ç»§ç»­è¡Œèµ°ï¼Œæœªæ¥å¯æœŸã€‚</strong></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://i.loli.net/2018/08/25/5b8173ac9ba83.jpg" alt="ç¦»å¼€é‚£å¤©å¤©æ°”å¾ˆå¥½" title="">                </div>                <div class="image-caption">ç¦»å¼€é‚£å¤©å¤©æ°”å¾ˆå¥½</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://i.loli.net/2018/08/25/5b8173a5c08cd.jpg" alt="æœªæ¥å¯æœŸ" title="">                </div>                <div class="image-caption">æœªæ¥å¯æœŸ</div>            </figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;ä»Šå¤©ï¼Œæ˜¯æˆ‘21å²çš„ç”Ÿæ—¥ã€‚&lt;br&gt;åœ¨ä¸€ä¸ªåŠæœˆå‰æˆ‘è¾èŒäº†ï¼Œä½†å‡†ç¡®çš„è¯´æ˜¯è¢«åŠ¨å¼è¾èŒã€‚&lt;br&gt;ç°åœ¨çœ‹æ¥è¿™æ˜¯ä¸€ä»¶å¥½äº‹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div 
      
    
    </summary>
    
    
      <category term="Inspire" scheme="https://edward7zhang.github.io/tags/Inspire/"/>
    
  </entry>
  
  <entry>
    <title>åŸºäºTensorFlowçš„CNNä¸­æ–‡æ–‡æœ¬åˆ†ç±»</title>
    <link href="https://edward7zhang.github.io/2018/05/20/%E5%9F%BA%E4%BA%8ETensorFlow%E7%9A%84CNN%E4%B8%AD%E6%96%87%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB/"/>
    <id>https://edward7zhang.github.io/2018/05/20/åŸºäºTensorFlowçš„CNNä¸­æ–‡æ–‡æœ¬åˆ†ç±»/</id>
    <published>2018-05-20T10:00:07.000Z</published>
    <updated>2018-05-20T10:50:21.054Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>CNNåœ¨è®¡ç®—æœºè§†è§‰é¢†åŸŸå–å¾—äº†å¾ˆå¥½çš„ç»“æœï¼ŒåŒæ—¶å®ƒå¯ä»¥åº”ç”¨åœ¨æ–‡æœ¬åˆ†ç±»ä¸Šé¢ï¼Œæ­¤æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨tensorflowå®ç°æ­¤ä»»åŠ¡ã€‚</p></blockquote><h1 id="CNNå®ç°æ–‡æœ¬åˆ†ç±»çš„åŸç†"><a href="#CNNå®ç°æ–‡æœ¬åˆ†ç±»çš„åŸç†" class="headerlink" title="CNNå®ç°æ–‡æœ¬åˆ†ç±»çš„åŸç†"></a>CNNå®ç°æ–‡æœ¬åˆ†ç±»çš„åŸç†</h1><p>ä¸‹å›¾å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨cnnè¿›è¡Œå¥å­åˆ†ç±»ã€‚è¾“å…¥æ˜¯ä¸€ä¸ªå¥å­ï¼Œä¸ºäº†ä½¿å…¶å¯ä»¥è¿›è¡Œå·ç§¯ï¼Œé¦–å…ˆéœ€è¦å°†å…¶è½¬åŒ–ä¸ºå‘é‡è¡¨ç¤ºï¼Œé€šå¸¸ä½¿ç”¨word2vecå®ç°ã€‚d=5è¡¨ç¤ºæ¯ä¸ªè¯è½¬åŒ–ä¸º5ç»´çš„å‘é‡ï¼ŒçŸ©é˜µçš„å½¢çŠ¶æ˜¯[sentence_length Ã—Ã— 5]ï¼Œå³[7 Ã—Ã— 5]ã€‚6ä¸ªfilterï¼ˆå·ç§¯æ ¸ï¼‰ï¼Œä¸å›¾åƒä¸­ä½¿ç”¨çš„å·ç§¯æ ¸ä¸åŒçš„æ˜¯ï¼Œnlpä½¿ç”¨çš„å·ç§¯æ ¸çš„å®½ä¸å¥å­çŸ©é˜µçš„å®½ç›¸åŒï¼Œåªæ˜¯é•¿åº¦ä¸åŒã€‚è¿™é‡Œæœ‰ï¼ˆ2ï¼Œ3ï¼Œ4ï¼‰ä¸‰ç§sizeï¼Œæ¯ç§sizeæœ‰ä¸¤ä¸ªfilterï¼Œä¸€å…±æœ‰6ä¸ªfilterã€‚ç„¶åå¼€å§‹å·ç§¯ï¼Œä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œstrideæ˜¯1ï¼Œå› ä¸ºå¯¹äºé«˜æ˜¯4çš„filterï¼Œæœ€åç”Ÿæˆ4ç»´çš„å‘é‡ï¼Œï¼ˆ7-4ï¼‰/1+1=4ã€‚å¯¹äºé«˜æ˜¯3çš„filterï¼Œæœ€åç”Ÿæˆ5ç»´çš„å‘é‡ï¼Œï¼ˆ7-3ï¼‰/1+1=5ã€‚å·ç§¯ä¹‹åï¼Œæˆ‘ä»¬å¾—åˆ°å¥å­çš„ç‰¹å¾ï¼Œä½¿ç”¨activation functionå’Œ1-max-poolingå¾—åˆ°æœ€åçš„å€¼ï¼Œæ¯ä¸ªfilteræœ€åå¾—åˆ°ä¸¤ä¸ªç‰¹å¾ã€‚å°†æ‰€æœ‰ç‰¹å¾åˆå¹¶åï¼Œä½¿ç”¨softmaxè¿›è¡Œåˆ†ç±»ã€‚å›¾ä¸­æ²¡æœ‰ç”¨åˆ°chanel,ä¸‹æ–‡çš„å®éªŒå°†ä¼šä½¿ç”¨ä¸¤ä¸ªé€šé“ï¼Œstaticå’Œnon-staticï¼Œæœ‰ç›¸å…³çš„å…·ä½“è§£é‡Šã€‚<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://d3kbpzbmcynnmx.cloudfront.net/wp-content/uploads/2015/11/Screen-Shot-2015-11-06-at-12.05.40-PM-1024x937.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" title="">                </div>                <div class="image-caption">è¿™é‡Œå†™å›¾ç‰‡æè¿°</div>            </figure></p><h1 id="æœ¬æ–‡ä½¿ç”¨çš„æ¨¡å‹"><a href="#æœ¬æ–‡ä½¿ç”¨çš„æ¨¡å‹" class="headerlink" title="æœ¬æ–‡ä½¿ç”¨çš„æ¨¡å‹"></a>æœ¬æ–‡ä½¿ç”¨çš„æ¨¡å‹</h1><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://d3kbpzbmcynnmx.cloudfront.net/wp-content/uploads/2015/11/Screen-Shot-2015-11-06-at-8.03.47-AM-1024x413.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" title="">                </div>                <div class="image-caption">è¿™é‡Œå†™å›¾ç‰‡æè¿°</div>            </figure><p>ä¸»è¦åŒ…æ‹¬äº”å±‚ï¼Œç¬¬ä¸€å±‚æ˜¯embedding layer,ç¬¬äºŒå±‚æ˜¯convolutional layer,ç¬¬ä¸‰å±‚æ˜¯max-pooling layer,ç¬¬å››å±‚æ˜¯fully connected layerï¼Œæœ€åä¸€å±‚æ˜¯softmax layer.æ¥ä¸‹æ¥ä¾æ¬¡ä»‹ç»ç›¸å…³ä»£ç å®ç°ã€‚</p><h2 id="Input-placeholder"><a href="#Input-placeholder" class="headerlink" title="Input placeholder"></a>Input placeholder</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># Placeholders for input, output and dropout</div><div class="line">self.input_x = tf.placeholder(tf.int32, [None, sequence_length], name=&quot;input_x&quot;)</div><div class="line">self.input_y = tf.placeholder(tf.float32, [None, num_classes], name=&quot;input_y&quot;)</div><div class="line">self.dropout_keep_prob = tf.placeholder(tf.float32, name=&quot;dropout_keep_prob&quot;)</div></pre></td></tr></table></figure><p><code>tf.placeholder</code> åˆ›å»ºä¸€ä¸ªå ä½ç¬¦å˜é‡ï¼Œåœ¨è®­ç»ƒæˆ–è€…æµ‹è¯•çš„æ—¶å€™ï¼Œéœ€è¦å°†å ä½ç¬¦è¾“å…¥åˆ°ç½‘ç»œä¸­è¿›è¡Œè®¡ç®—ï¼Œå…¶ä¸­çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¾“å…¥å¼ é‡çš„å½¢çŠ¶ã€‚None æ„å‘³ç€å®ƒå¯ä»¥æ˜¯ä»»ä½•ç»´åº¦çš„é•¿åº¦ï¼Œåœ¨æˆ‘ä»¬çš„å®éªŒä¸­å®ƒä»£è¡¨æ‰¹å¤„ç†çš„å¤§å°ï¼ŒNoneä½¿å¾—ç½‘ç»œå¯ä»¥å¤„ç†ä»»æ„é•¿åº¦çš„batchesã€‚<br>å¤±æ´»ç‡åŒæ ·ä¹Ÿæ˜¯è¾“å…¥çš„ä¸€éƒ¨åˆ†ï¼Œåœ¨è®­ç»ƒçš„æ—¶å€™ä½¿ç”¨dropout ï¼Œæµ‹è¯•çš„æ—¶å€™ä¸ä½¿ç”¨dropout ã€‚</p><h2 id="EMBEDDING-LAYER"><a href="#EMBEDDING-LAYER" class="headerlink" title="EMBEDDING LAYER"></a>EMBEDDING LAYER</h2><p>è¿™ä¸€å±‚å°†å•è¯ç´¢å¼•æ˜ å°„åˆ°ä½ç»´çš„å‘é‡è¡¨ç¤ºï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæŸ¥æ‰¾è¡¨ï¼Œæˆ‘ä»¬ä»æ•°æ®ä¸­é€šè¿‡å­¦ä¹ å¾—åˆ°ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">with tf.device(&apos;/cpu:0&apos;), tf.name_scope(&quot;embedding&quot;):</div><div class="line">    W = tf.Variable(tf.random_uniform([vocab_size, embedding_size], -1.0, 1.0), name=&quot;W&quot;)</div><div class="line">    self.embedded_chars = tf.nn.embedding_lookup(W, self.input_x)</div><div class="line">    self.embedded_chars_expanded = tf.expand_dims(self.embedded_chars, -1)</div></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>W</code> æ˜¯ åœ¨è®­ç»ƒæ—¶å¾—åˆ°çš„embedding matrix.ï¼Œç”¨éšæœºå‡åŒ€åˆ†å¸ƒè¿›è¡Œåˆå§‹åŒ–ã€‚<a href="http://blog.csdn.net/u013713117/article/details/55048040" target="_blank" rel="external">tf.nn.embedding_lookup</a>å®ç°embeddingæ“ä½œï¼Œå¾—åˆ° ä¸€ä¸ª3-dimensional çš„å¼ é‡ï¼Œå½¢çŠ¶æ˜¯ <code>[None, sequence_length, embedding_size].</code> <code>sequence_length</code> æ˜¯æ•°æ®é›†ä¸­æœ€é•¿å¥å­çš„é•¿åº¦ï¼Œå…¶ä»–å¥å­éƒ½é€šè¿‡æ·»åŠ â€œPADâ€è¡¥å……åˆ°è¿™ä¸ªé•¿åº¦ã€‚<code>embedding_size</code> æ˜¯è¯å‘é‡çš„å¤§å°ã€‚</p><p>TensorFlowçš„å·ç§¯å‡½æ•°-<code>conv2d</code> éœ€è¦å››ä¸ªå‚æ•°ï¼Œ åˆ†åˆ«æ˜¯batch, width, height ä»¥åŠchannelã€‚ embeddingä¹‹åä¸åŒ…æ‹¬ channel, æ‰€ä»¥æˆ‘ä»¬äººä¸ºåœ°æ·»åŠ ä¸Šå®ƒï¼Œå¹¶è®¾ç½®ä¸º1ã€‚ç°åœ¨å°±æ˜¯<code>[None, sequence_length, embedding_size, 1]</code></p><h2 id="CONVOLUTION-AND-MAX-POOLING-LAYERS"><a href="#CONVOLUTION-AND-MAX-POOLING-LAYERS" class="headerlink" title="CONVOLUTION AND MAX-POOLING LAYERS"></a>CONVOLUTION AND MAX-POOLING LAYERS</h2><p>ç”±å›¾ä¸­å¯çŸ¥ï¼Œ æˆ‘ä»¬æœ‰ä¸åŒsizeçš„filtersã€‚å› ä¸ºæ¯æ¬¡å·ç§¯éƒ½ä¼šäº§ç”Ÿä¸åŒå½¢çŠ¶çš„å¼ é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦éå†æ¯ä¸ªfilterï¼Œç„¶åå°†ç»“æœåˆå¹¶æˆä¸€ä¸ªå¤§çš„ç‰¹å¾å‘é‡ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">pooled_outputs = []</div><div class="line">for i, filter_size in enumerate(filter_sizes):</div><div class="line">    with tf.name_scope(&quot;conv-maxpool-%s&quot; % filter_size):</div><div class="line">        # Convolution Layer</div><div class="line">        filter_shape = [filter_size, embedding_size, 1, num_filters]</div><div class="line">        W = tf.Variable(tf.truncated_normal(filter_shape, stddev=0.1), name=&quot;W&quot;)</div><div class="line">        b = tf.Variable(tf.constant(0.1, shape=[num_filters]), name=&quot;b&quot;)</div><div class="line">        conv = tf.nn.conv2d(</div><div class="line">            self.embedded_chars_expanded,</div><div class="line">            W,</div><div class="line">            strides=[1, 1, 1, 1],</div><div class="line">            padding=&quot;VALID&quot;,</div><div class="line">            name=&quot;conv&quot;)</div><div class="line">        # Apply nonlinearity</div><div class="line">        h = tf.nn.relu(tf.nn.bias_add(conv, b), name=&quot;relu&quot;)</div><div class="line">        # Max-pooling over the outputs</div><div class="line">        pooled = tf.nn.max_pool(</div><div class="line">            h,</div><div class="line">            ksize=[1, sequence_length - filter_size + 1, 1, 1],</div><div class="line">            strides=[1, 1, 1, 1],</div><div class="line">            padding=&apos;VALID&apos;,</div><div class="line">            name=&quot;pool&quot;)</div><div class="line">        pooled_outputs.append(pooled)</div><div class="line"></div><div class="line"># Combine all the pooled features</div><div class="line">num_filters_total = num_filters * len(filter_sizes)</div><div class="line">self.h_pool = tf.concat(3, pooled_outputs)</div><div class="line">self.h_pool_flat = tf.reshape(self.h_pool, [-1, num_filters_total])</div></pre></td></tr></table></figure><p>è¿™é‡Œ<code>W</code> æ˜¯filter çŸ©é˜µï¼Œ<code>h</code> æ˜¯å¯¹å·ç§¯ç»“æœè¿›è¡Œéçº¿æ€§è½¬æ¢ä¹‹åçš„ç»“æœã€‚æ¯ä¸ª filteréƒ½ä»æ•´ä¸ªembeddingåˆ’è¿‡,ä¸åŒä¹‹å¤„åœ¨äºè¦†ç›–å¤šå°‘å•è¯ã€‚ â€œVALIDâ€ paddingæ„å‘³ç€æ²¡æœ‰å¯¹å¥å­çš„è¾¹ç¼˜è¿›è¡Œpadding,ä¹Ÿå°±æ˜¯ç”¨äº†narrow convolutionï¼Œè¾“å‡ºçš„å½¢çŠ¶æ˜¯ <code>[1, sequence_length - filter_size + 1, 1, 1]</code>ã€‚narrow convolutionä¸ wide convolutionçš„åŒºåˆ«æ˜¯æ˜¯å¦å¯¹è¾¹ç¼˜è¿›è¡Œå¡«å……ã€‚<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://d3kbpzbmcynnmx.cloudfront.net/wp-content/uploads/2015/11/Screen-Shot-2015-11-05-at-9.47.41-AM-1024x261.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" title="">                </div>                <div class="image-caption">è¿™é‡Œå†™å›¾ç‰‡æè¿°</div>            </figure><br><em>Narrow vs. Wide Convolution. Filter size 5, input size 7. Source: A Convolutional Neural Network for Modelling Sentences (2014)</em><br>å½“ä½ çš„filteræ¯”è¾“å…¥çš„sizeè¿˜å¤§æ—¶ï¼Œä½ å¯ä»¥çœ‹åˆ°wide convolutionæ˜¯å¤šä¹ˆçš„æœ‰ç”¨ï¼Œç”šè‡³è¯´æ˜¯å¿…é¡»çš„ã€‚å¦‚ä¸Šæ‰€ç¤ºï¼Œnarrow convolutionäº§å‡ºçš„å°ºå¯¸æ˜¯ï¼ˆ7-5ï¼‰+1=3ï¼Œè€Œwide convolutionäº§å‡ºå°ºå¯¸æ˜¯ï¼ˆ7+2*4-5ï¼‰+1=11ã€‚é€šå¸¸ï¼Œè¾“å‡ºå°ºå¯¸çš„è§„åˆ™è¡¨è¾¾å¼ä¸ºï¼š<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://img-blog.csdn.net/20161218225721289?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1eXVlbWFpY2hh/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" title="">                </div>                <div class="image-caption">è¿™é‡Œå†™å›¾ç‰‡æè¿°</div>            </figure><br>å¯¹è¾“å‡ºè¿›è¡Œmax-poolingåå¾—åˆ°å½¢çŠ¶æ˜¯ <code>[batch_size, 1, 1, num_filters]</code> çš„å¼ é‡ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç‰¹å¾å‘é‡ï¼Œæœ€åä¸€ä¸ªç»´åº¦æ˜¯ç‰¹å¾ä»£è¡¨æ•°é‡ã€‚æŠŠæ¯ä¸€ä¸ªmax-poolingä¹‹åçš„å¼ é‡åˆå¹¶èµ·æ¥ä¹‹åå¾—åˆ°ä¸€ä¸ªé•¿å‘é‡ <code>[batch_size, num_filters_total]</code>. in <code>tf.reshape</code> ä¸­çš„ -1è¡¨ç¤ºTå°†å‘é‡å±•å¹³ã€‚</p><h2 id="DROPOUT-LAYER"><a href="#DROPOUT-LAYER" class="headerlink" title="DROPOUT LAYER"></a>DROPOUT LAYER</h2><p>Dropoutä¹Ÿè®¸æ˜¯cnnä¸­æœ€æµè¡Œçš„æ­£åˆ™åŒ–æ–¹æ³•ã€‚dropoutçš„æƒ³æ³•å¾ˆç®€å•ï¼Œdropout layeréšæœºåœ°é€‰æ‹©ä¸€äº›ç¥ç»å…ƒï¼Œä½¿å…¶å¤±æ´»ã€‚è¿™æ ·å¯ä»¥é˜»æ­¢co-adapting,è¿«ä½¿å®ƒä»¬æ¯ä¸€ä¸ªéƒ½å­¦ä¹ åˆ°æœ‰ç”¨çš„ç‰¹å¾ã€‚å¤±æ´»çš„ç¥ç»å•å…ƒä¸ªæ•°ç”±<code>dropout_keep_prob</code> å†³å®šã€‚åœ¨è®­ç»ƒçš„æ—¶å€™è®¾ä¸º 0.5 ,æµ‹è¯•çš„æ—¶å€™è®¾ä¸º 1 (disable dropout) .</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># Add dropout</div><div class="line">with tf.name_scope(&quot;dropout&quot;):</div><div class="line">    self.h_drop = tf.nn.dropout(self.h_pool_flat, self.dropout_keep_prob)</div></pre></td></tr></table></figure><h2 id="SCORES-AND-PREDICTIONS"><a href="#SCORES-AND-PREDICTIONS" class="headerlink" title="SCORES AND PREDICTIONS"></a>SCORES AND PREDICTIONS</h2><p>åˆ©ç”¨ç‰¹å¾å‘é‡ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨çŸ©é˜µç›¸ä¹˜è®¡ç®—ä¸¤ç±»çš„å¾—åˆ†ï¼Œä¹Ÿå¯ä»¥ç”¨ softmaxå‡½æ•°è®¡ç®—ä¸¤ç±»çš„æ¦‚ç‡å€¼ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">with tf.name_scope(&quot;output&quot;):</div><div class="line">    W = tf.Variable(tf.truncated_normal([num_filters_total, num_classes], stddev=0.1), name=&quot;W&quot;)</div><div class="line">    b = tf.Variable(tf.constant(0.1, shape=[num_classes]), name=&quot;b&quot;)</div><div class="line">    self.scores = tf.nn.xw_plus_b(self.h_drop, W, b, name=&quot;scores&quot;)</div><div class="line">    self.predictions = tf.argmax(self.scores, 1, name=&quot;predictions&quot;)</div></pre></td></tr></table></figure><h2 id="LOSS-AND-ACCURACY"><a href="#LOSS-AND-ACCURACY" class="headerlink" title="LOSS AND ACCURACY"></a>LOSS AND ACCURACY</h2><p>å¯ä»¥ç”¨å¾—åˆ†å®šä¹‰æŸå¤±å€¼ã€‚æŸå¤±è®¡ç®—çš„æ˜¯ç½‘ç»œçš„è¯¯å·®ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å°†å…¶æœ€å°åŒ–ï¼Œåˆ†ç±»é—®é¢˜æ ‡å‡†çš„æŸå¤±å‡½æ•°æ˜¯äº¤å‰ç†µæŸå¤±ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># Calculate mean cross-entropy loss</div><div class="line">with tf.name_scope(&quot;loss&quot;):</div><div class="line">    losses = tf.nn.softmax_cross_entropy_with_logits(self.scores, self.input_y)</div><div class="line">    self.loss = tf.reduce_mean(losses)</div></pre></td></tr></table></figure><p>è®¡ç®—æ­£ç¡®ç‡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># Calculate Accuracy</div><div class="line">with tf.name_scope(&quot;accuracy&quot;):</div><div class="line">    correct_predictions = tf.equal(self.predictions, tf.argmax(self.input_y, 1))</div><div class="line">    self.accuracy = tf.reduce_mean(tf.cast(correct_predictions, &quot;float&quot;), name=&quot;accuracy&quot;)</div></pre></td></tr></table></figure><h2 id="MINIMIZING-THE-LOSS"><a href="#MINIMIZING-THE-LOSS" class="headerlink" title="MINIMIZING THE LOSS"></a>MINIMIZING THE LOSS</h2><p>åˆ©ç”¨TensorFlow å†…ç½®çš„optimizersï¼Œä¾‹å¦‚ Adam optimizerï¼Œä¼˜åŒ–ç½‘ç»œæŸå¤±ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">global_step = tf.Variable(0, name=&quot;global_step&quot;, trainable=False)</div><div class="line">optimizer = tf.train.AdamOptimizer(1e-4)</div><div class="line">grads_and_vars = optimizer.compute_gradients(cnn.loss)</div><div class="line">train_op = optimizer.apply_gradients(grads_and_vars, global_step=global_step)</div></pre></td></tr></table></figure><p><code>train_op</code> æ˜¯ä¸€ä¸ªæ–°å»ºçš„æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‚æ•°ä¸Šè¿›è¡Œæ¢¯åº¦æ›´æ–°ã€‚æ¯æ‰§è¡Œä¸€æ¬¡ <code>train_op</code> å°±æ˜¯ä¸€æ¬¡è®­ç»ƒæ­¥éª¤ã€‚ TensorFlow å¯ä»¥è‡ªåŠ¨åœ°è®¡ç®—æ‰é‚£äº›å˜é‡æ˜¯â€œå¯è®­ç»ƒçš„â€ç„¶åè®¡ç®—ä»–ä»¬çš„æ¢¯åº¦ã€‚é€šè¿‡<code>global_step</code>è¿™ä¸ªå˜é‡å¯ä»¥è®¡ç®—è®­ç»ƒçš„æ­¥æ•°ï¼Œæ¯è®­ç»ƒä¸€æ¬¡è‡ªåŠ¨åŠ ä¸€ã€‚</p><h2 id="CHECKPOINTING"><a href="#CHECKPOINTING" class="headerlink" title="CHECKPOINTING"></a>CHECKPOINTING</h2><p>TensorFlow ä¸­å¯ä»¥ç”¨checkpointing ä¿å­˜æ¨¡å‹çš„å‚æ•°ã€‚checkpointingä¸­çš„å‚æ•°ä¹Ÿå¯ä»¥ç”¨æ¥ç»§ç»­è®­ç»ƒã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"># Checkpointing</div><div class="line">checkpoint_dir = os.path.abspath(os.path.join(out_dir, &quot;checkpoints&quot;))</div><div class="line">checkpoint_prefix = os.path.join(checkpoint_dir, &quot;model&quot;)</div><div class="line"># Tensorflow assumes this directory already exists so we need to create it</div><div class="line">if not os.path.exists(checkpoint_dir):</div><div class="line">    os.makedirs(checkpoint_dir)</div><div class="line">saver = tf.train.Saver(tf.all_variables())</div></pre></td></tr></table></figure><h2 id="DEFINING-A-SINGLE-TRAINING-STEP"><a href="#DEFINING-A-SINGLE-TRAINING-STEP" class="headerlink" title="DEFINING A SINGLE TRAINING STEP"></a>DEFINING A SINGLE TRAINING STEP</h2><p>ç”¨ä¸€ä¸ªbatchçš„æ•°æ®è¿›è¡Œä¸€æ¬¡è®­ç»ƒã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">def train_step(x_batch, y_batch):</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    A single training step</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    feed_dict = &#123;</div><div class="line">      cnn.input_x: x_batch,</div><div class="line">      cnn.input_y: y_batch,</div><div class="line">      cnn.dropout_keep_prob: FLAGS.dropout_keep_prob</div><div class="line">    &#125;</div><div class="line">    _, step, summaries, loss, accuracy = sess.run(</div><div class="line">        [train_op, global_step, train_summary_op, cnn.loss, cnn.accuracy],</div><div class="line">        feed_dict)</div><div class="line">    time_str = datetime.datetime.now().isoformat()</div><div class="line">    print(&quot;&#123;&#125;: step &#123;&#125;, loss &#123;:g&#125;, acc &#123;:g&#125;&quot;.format(time_str, step, loss, accuracy))</div><div class="line">    train_summary_writer.add_summary(summaries, step)</div></pre></td></tr></table></figure><p><code>train_op</code> ä»€ä¹ˆä¹Ÿä¸è¿”å›ï¼Œåªæ˜¯æ›´æ–°ç½‘ç»œä¸­çš„å‚æ•°ã€‚æœ€ç»ˆï¼Œæ‰“å°å‡ºå½“å‰è®­ç»ƒçš„æŸå¤±å€¼ä¸æ­£ç¡®ç‡ã€‚å¦‚æœbatchçš„sizeå¾ˆå°çš„è¯ï¼Œè¿™ä¸¤è€…åœ¨ä¸åŒçš„batchä¸­å·®åˆ«å¾ˆå¤§ã€‚å› ä¸ºä½¿ç”¨äº†dropoutï¼Œè®­ç»ƒçš„metricså¯èƒ½è¦æ¯”æµ‹è¯•çš„metricsç³Ÿç³•ã€‚</p><p>åŒæ ·çš„å‡½æ•°ä¹Ÿå¯ä»¥ç”¨åœ¨æµ‹è¯•æ—¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">def dev_step(x_batch, y_batch, writer=None):</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    Evaluates model on a dev set</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    feed_dict = &#123;</div><div class="line">      cnn.input_x: x_batch,</div><div class="line">      cnn.input_y: y_batch,</div><div class="line">      cnn.dropout_keep_prob: 1.0</div><div class="line">    &#125;</div><div class="line">    step, summaries, loss, accuracy = sess.run(</div><div class="line">        [global_step, dev_summary_op, cnn.loss, cnn.accuracy],</div><div class="line">        feed_dict)</div><div class="line">    time_str = datetime.datetime.now().isoformat()</div><div class="line">    print(&quot;&#123;&#125;: step &#123;&#125;, loss &#123;:g&#125;, acc &#123;:g&#125;&quot;.format(time_str, step, loss, accuracy))</div><div class="line">    if writer:</div><div class="line">        writer.add_summary(summaries, step)</div></pre></td></tr></table></figure><h2 id="TRAINING-LOOP"><a href="#TRAINING-LOOP" class="headerlink" title="TRAINING LOOP"></a>TRAINING LOOP</h2><p>é€šè¿‡è¿­ä»£æ•°æ®è¿›è¡Œè®­ç»ƒã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"># Generate batches</div><div class="line">batches = data_helpers.batch_iter(</div><div class="line">    zip(x_train, y_train), FLAGS.batch_size, FLAGS.num_epochs)</div><div class="line"># Training loop. For each batch...</div><div class="line">for batch in batches:</div><div class="line">    x_batch, y_batch = zip(*batch)</div><div class="line">    train_step(x_batch, y_batch)</div><div class="line">    current_step = tf.train.global_step(sess, global_step)</div><div class="line">    if current_step % FLAGS.evaluate_every == 0:</div><div class="line">        print(&quot;\nEvaluation:&quot;)</div><div class="line">        dev_step(x_dev, y_dev, writer=dev_summary_writer)</div><div class="line">        print(&quot;&quot;)</div><div class="line">    if current_step % FLAGS.checkpoint_every == 0:</div><div class="line">        path = saver.save(sess, checkpoint_prefix, global_step=current_step)</div><div class="line">        print(&quot;Saved model checkpoint to &#123;&#125;\n&quot;.format(path))</div></pre></td></tr></table></figure><h2 id="VISUALIZING-RESULTS-IN-TENSORBOARD"><a href="#VISUALIZING-RESULTS-IN-TENSORBOARD" class="headerlink" title="VISUALIZING RESULTS IN TENSORBOARD"></a>VISUALIZING RESULTS IN TENSORBOARD</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://d3kbpzbmcynnmx.cloudfront.net/wp-content/uploads/2015/12/Screen-Shot-2015-12-11-at-6.29.14-AM-1024x347.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" title="">                </div>                <div class="image-caption">è¿™é‡Œå†™å›¾ç‰‡æè¿°</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://d3kbpzbmcynnmx.cloudfront.net/wp-content/uploads/2015/12/Screen-Shot-2015-12-11-at-6.27.48-AM-1024x350.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" title="">                </div>                <div class="image-caption">è¿™é‡Œå†™å›¾ç‰‡æè¿°</div>            </figure><p>ä»ä¸Šå›¾ä¸­æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°:</p><ul><li>æˆ‘ä»¬çš„è®­ç»ƒ metricsä¸å¹³æ»‘ï¼Œå› ä¸ºç”¨çš„batch sizeså¾ˆå°ã€‚å¦‚æœç”¨å¤§çš„batches (æˆ–è€…åœ¨æ•´ä¸ªæµ‹è¯•é›†ä¸Šè¿›è¡Œè¯„ä¼°)ï¼Œä¼šå¾—åˆ°å¹³æ»‘çš„çº¿ã€‚</li><li>æµ‹è¯•é›†çš„ accuracyæ˜æ˜¾æ¯”è®­ç»ƒé›†çš„ä½ï¼Œè¯´æ˜ç½‘ç»œè¿‡æ‹Ÿåˆäº†ï¼Œæˆ‘ä»¬åº”è¯¥ç”¨æ›´å¤§çš„æ•°æ®é›†ï¼Œæ›´å¼ºçš„æ­£åˆ™åŒ–ï¼Œæ›´å°‘çš„æ¨¡å‹å‚æ•°ã€‚</li><li>è®­ç»ƒé›†ä¸Šçš„ loss å’Œ accuracyæ¯”æµ‹è¯•é›†ä½çš„åŸå› æ˜¯ç”¨äº†dropout.</li></ul><h1 id="å‚è€ƒï¼šhttp-www-wildml-com-2015-12-implementing-a-cnn-for-text-classification-in-tensorflow"><a href="#å‚è€ƒï¼šhttp-www-wildml-com-2015-12-implementing-a-cnn-for-text-classification-in-tensorflow" class="headerlink" title="å‚è€ƒï¼šhttp://www.wildml.com/2015/12/implementing-a-cnn-for-text-classification-in-tensorflow/"></a>å‚è€ƒï¼š<a href="http://www.wildml.com/2015/12/implementing-a-cnn-for-text-classification-in-tensorflow/" target="_blank" rel="external">http://www.wildml.com/2015/12/implementing-a-cnn-for-text-classification-in-tensorflow/</a></h1>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;CNNåœ¨è®¡ç®—æœºè§†è§‰é¢†åŸŸå–å¾—äº†å¾ˆå¥½çš„ç»“æœï¼ŒåŒæ—¶å®ƒå¯ä»¥åº”ç”¨åœ¨æ–‡æœ¬åˆ†ç±»ä¸Šé¢ï¼Œæ­¤æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨tensorflowå®ç°æ­¤ä»»åŠ¡ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;CNNå®ç°æ–‡æœ¬åˆ†ç±»çš„åŸç†&quot;&gt;&lt;a href=&quot;#CNNå®ç°æ–‡æœ¬åˆ†ç±»çš„åŸç†
      
    
    </summary>
    
    
      <category term="TensorFlow" scheme="https://edward7zhang.github.io/tags/TensorFlow/"/>
    
  </entry>
  
  <entry>
    <title>å®éªŒå®¤æ‹›æ–°é¢˜ç›®â‘¡</title>
    <link href="https://edward7zhang.github.io/2018/05/08/%E5%AE%9E%E9%AA%8C%E5%AE%A4%E6%8B%9B%E6%96%B0%E9%A2%98%E7%9B%AE(2)/"/>
    <id>https://edward7zhang.github.io/2018/05/08/å®éªŒå®¤æ‹›æ–°é¢˜ç›®(2)/</id>
    <published>2018-05-08T10:00:07.000Z</published>
    <updated>2018-05-08T16:09:44.840Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç«è½¦è£…ç®±"><a href="#ç«è½¦è£…ç®±" class="headerlink" title="ç«è½¦è£…ç®±"></a>ç«è½¦è£…ç®±</h1><hr><h2 id="ç°æœ‰ä¸€æ‰¹ç«è½¦è½¦å¢éœ€è¦æŒ‰ç…§æ¯èŠ‚è½¦å¢ä¸­æ‰€å«è´§ç‰©æ•°é‡è¿›è¡Œè¿æ¥å‘è½¦"><a href="#ç°æœ‰ä¸€æ‰¹ç«è½¦è½¦å¢éœ€è¦æŒ‰ç…§æ¯èŠ‚è½¦å¢ä¸­æ‰€å«è´§ç‰©æ•°é‡è¿›è¡Œè¿æ¥å‘è½¦" class="headerlink" title="ç°æœ‰ä¸€æ‰¹ç«è½¦è½¦å¢éœ€è¦æŒ‰ç…§æ¯èŠ‚è½¦å¢ä¸­æ‰€å«è´§ç‰©æ•°é‡è¿›è¡Œè¿æ¥å‘è½¦"></a>ç°æœ‰ä¸€æ‰¹ç«è½¦è½¦å¢éœ€è¦æŒ‰ç…§æ¯èŠ‚è½¦å¢ä¸­æ‰€å«è´§ç‰©æ•°é‡è¿›è¡Œè¿æ¥å‘è½¦</h2><h2 id="è¦æ±‚ï¼š"><a href="#è¦æ±‚ï¼š" class="headerlink" title="è¦æ±‚ï¼š"></a>è¦æ±‚ï¼š</h2><ul><li>å…¶ä¸­æ¯èŠ‚è½¦å¢ä¸­åŒ…å«ä¸¤ç§å…ƒç´  è½¦å¢å·ï¼š<code>TrainNum</code> ä»¥åŠæ‰€è£…è½½è´§ç‰©æ•°é‡ï¼š<code>GoodsNum</code>ï¼›</li><li>å…¶ä¸­æ¯èŠ‚è½¦å¢ä»¥<code>å‰è½¦å¢</code> -&gt; <code>åè½¦å¢</code> çš„å½¢å¼è¿›è¡Œè¿æ¥ï¼›</li><li>æŒ‰ç…§æ¯èŠ‚è½¦å¢çš„<code>GoodsNum</code>çš„é™åºè¿›è¡Œè¿æ¥ï¼›</li><li><p>è‡ªå®šä¹‰ä¸€ä¸ª<code>TrainCabin</code>æ•°æ®ç»“æ„</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TrainCabin</span>&#123;</span></div><div class="line"></div><div class="line"><span class="comment">//TODO structure your struct</span></div><div class="line"></div><div class="line">&#125;;</div></pre></td></tr></table></figure></li><li><p>å†™å‡ºä¸€ä¸ªå‡½æ•°</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function">TrainCabin* <span class="title">AssembleTraninCabin</span><span class="params">(TrainCabin* TrainList)</span></span>;</div><div class="line"><span class="comment">//é€‰æ‹©ä½ è®¤ä¸ºæ—¶é—´å¤æ‚åº¦æœ€å°çš„ç®—æ³•è¿›è¡Œç¼–ç </span></div></pre></td></tr></table></figure></li></ul><blockquote><p>è¿”å›å€¼ä¸ºå·²æŒ‰ç…§ä»¥ä¸Šè¦æ±‚æ’å¥½åºåçš„ç«è½¦é“¾è¡¨</p></blockquote><h2 id="è¾“å…¥"><a href="#è¾“å…¥" class="headerlink" title="è¾“å…¥"></a>è¾“å…¥</h2><ul><li>ç¬¬ä¸€ä¸ªå€¼ä¸º<code>TrainNum</code></li><li>ç¬¬äºŒä¸ªå€¼ä¸º<code>GoodsNum</code></li><li>ä¸­é—´ä»¥<code>|</code>åˆ†å‰²</li><li>è¾“å…¥<code>-1</code> ä»¥ç»“æŸè¾“å…¥</li></ul><h3 id="Inputï¼š"><a href="#Inputï¼š" class="headerlink" title="Inputï¼š"></a>Inputï¼š</h3><pre><code>1 | 32 | 53 | 74 | 25 | 0-1</code></pre><h2 id="è¾“å‡º"><a href="#è¾“å‡º" class="headerlink" title="è¾“å‡º"></a>è¾“å‡º</h2><ul><li>åœ¨æ§åˆ¶å°ä¸­æ‰“å°æ’å¥½åºçš„ç«è½¦åˆ—</li><li>æŒ‰ç…§ä»¥ä¸‹ç¤ºä¾‹æ ¼å¼</li></ul><h3 id="Outputï¼š"><a href="#Outputï¼š" class="headerlink" title="Outputï¼š"></a>Outputï¼š</h3><pre><code>| 3 | 7 | -&gt; | 2 | 5 | -&gt; | 1 | 3 | -&gt; | 4 | 2 | -&gt; | 5 | 0 |</code></pre><hr><h1 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h1><p>éå¸¸åŸºç¡€çš„ä¸€é“è€ƒå¯Ÿæ•°æ®æŠ½è±¡ã€æ•°æ®ç»“æ„æ„é€ ã€æ’åºç®—æ³•ã€å•å‘é“¾è¡¨çš„ç®€å•é¢˜â€¦ä½†ä»Šå¤©çš„ç°åœºæƒ…å†µä¸å®¹ä¹è§‚<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">TrainCabin</span></span></div><div class="line">&#123;</div><div class="line"><span class="keyword">int</span> TrainNum;</div><div class="line"><span class="keyword">int</span> GoodsNum;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TrainCabin</span> *<span class="title">next</span>;</span></div><div class="line">&#125;TrainCabin;</div><div class="line"></div><div class="line"><span class="function">TrainCabin* <span class="title">AssembleTraninCabin</span><span class="params">(TrainCabin *TrainList)</span></span></div><div class="line">&#123;</div><div class="line">TrainCabin *i=TrainList;</div><div class="line">TrainCabin *j;</div><div class="line">TrainCabin *temp=(TrainCabin*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(TrainCabin));</div><div class="line">temp-&gt;next=<span class="literal">NULL</span>;</div><div class="line"><span class="keyword">while</span>(i!=<span class="literal">NULL</span>)</div><div class="line">&#123;</div><div class="line">j=i-&gt;next;</div><div class="line"><span class="keyword">while</span>(j!=<span class="literal">NULL</span>)</div><div class="line">&#123;</div><div class="line"><span class="keyword">if</span>((*i).GoodsNum&gt;(*j).GoodsNum)</div><div class="line">&#123;</div><div class="line">(*temp).TrainNum=(*i).TrainNum;</div><div class="line">(*temp).GoodsNum=(*i).GoodsNum;</div><div class="line">(*i).TrainNum=(*j).TrainNum;</div><div class="line">(*i).GoodsNum=(*j).GoodsNum;</div><div class="line">(*j).TrainNum=(*temp).TrainNum;</div><div class="line">(*j).GoodsNum=(*temp).GoodsNum;</div><div class="line">&#125;</div><div class="line">j=j-&gt;next;</div><div class="line">&#125;</div><div class="line">i=i-&gt;next;</div><div class="line">&#125;</div><div class="line"><span class="keyword">return</span> TrainList;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">(<span class="keyword">const</span> TrainCabin *TrainList)</span></span></div><div class="line">&#123;</div><div class="line"><span class="keyword">while</span>(TrainList-&gt;next!=<span class="literal">NULL</span>)</div><div class="line">&#123;</div><div class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">"|"</span>&lt;&lt;(*TrainList).TrainNum&lt;&lt;<span class="string">"|"</span>&lt;&lt;(*TrainList).GoodsNum&lt;&lt;<span class="string">"| -&gt; "</span>;</div><div class="line">TrainList=TrainList-&gt;next;</div><div class="line">&#125;</div><div class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">"|"</span>&lt;&lt;(*TrainList).TrainNum&lt;&lt;<span class="string">"|"</span>&lt;&lt;(*TrainList).GoodsNum&lt;&lt;<span class="string">"|"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line"><span class="keyword">int</span> TrainNum=<span class="number">0</span>,GoodsNum=<span class="number">0</span>;</div><div class="line">TrainCabin *frist,*last;</div><div class="line">TrainCabin *temp;</div><div class="line">frist=(TrainCabin*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(TrainCabin));</div><div class="line">frist-&gt;next=<span class="literal">NULL</span>;</div><div class="line">last=frist;</div><div class="line"><span class="keyword">char</span> input;</div><div class="line"><span class="keyword">while</span>(<span class="number">1</span>)</div><div class="line">&#123;</div><div class="line"><span class="built_in">cin</span>&gt;&gt;TrainNum;</div><div class="line"><span class="keyword">if</span>(TrainNum==<span class="number">-1</span>)</div><div class="line"><span class="keyword">break</span>;</div><div class="line"><span class="built_in">cin</span>&gt;&gt;input;</div><div class="line"><span class="built_in">cin</span>&gt;&gt;GoodsNum;</div><div class="line"></div><div class="line">temp=(TrainCabin*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(TrainCabin));</div><div class="line">temp-&gt;TrainNum=TrainNum;</div><div class="line">temp-&gt;GoodsNum=GoodsNum;</div><div class="line">temp-&gt;next=<span class="literal">NULL</span>;</div><div class="line"></div><div class="line">last-&gt;next=temp;</div><div class="line">last=temp;</div><div class="line">&#125;</div><div class="line">TrainCabin *result=AssembleTraninCabin((*frist).next);</div><div class="line">display(result);</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ç«è½¦è£…ç®±&quot;&gt;&lt;a href=&quot;#ç«è½¦è£…ç®±&quot; class=&quot;headerlink&quot; title=&quot;ç«è½¦è£…ç®±&quot;&gt;&lt;/a&gt;ç«è½¦è£…ç®±&lt;/h1&gt;&lt;hr&gt;
&lt;h2 id=&quot;ç°æœ‰ä¸€æ‰¹ç«è½¦è½¦å¢éœ€è¦æŒ‰ç…§æ¯èŠ‚è½¦å¢ä¸­æ‰€å«è´§ç‰©æ•°é‡è¿›è¡Œè¿æ¥å‘è½¦&quot;&gt;&lt;a href=&quot;#ç°æœ‰ä¸€æ‰¹ç«è½¦è½¦å¢éœ€è¦æŒ‰
      
    
    </summary>
    
    
      <category term="Lab_Interview" scheme="https://edward7zhang.github.io/tags/Lab-Interview/"/>
    
  </entry>
  
  <entry>
    <title>åç”Ÿå¯ç•</title>
    <link href="https://edward7zhang.github.io/2018/05/06/%E5%90%8E%E7%94%9F%E5%8F%AF%E7%95%8F/"/>
    <id>https://edward7zhang.github.io/2018/05/06/åç”Ÿå¯ç•/</id>
    <published>2018-05-06T15:20:07.000Z</published>
    <updated>2018-05-06T15:44:43.485Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Take-your-Child-to-work-Day-at-Google-2018"><a href="#Take-your-Child-to-work-Day-at-Google-2018" class="headerlink" title="Take your Child to work Day at Google 2018"></a>Take your Child to work Day at Google 2018</h1><iframe width="600" height="337.3" src="https://www.youtube.com/embed/2nWkYwC2XHI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe><p>When I heared a kid who Firmly said I will be a video game programmer, I realize that it is extraordinary.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Take-your-Child-to-work-Day-at-Google-2018&quot;&gt;&lt;a href=&quot;#Take-your-Child-to-work-Day-at-Google-2018&quot; class=&quot;headerlink&quot; title=&quot;Take you
      
    
    </summary>
    
    
      <category term="Inspire" scheme="https://edward7zhang.github.io/tags/Inspire/"/>
    
  </entry>
  
  <entry>
    <title>Fragment Navigation Drawer</title>
    <link href="https://edward7zhang.github.io/2018/05/05/Fragment%20Navigation%20Drawer/"/>
    <id>https://edward7zhang.github.io/2018/05/05/Fragment Navigation Drawer/</id>
    <published>2018-05-05T14:20:07.000Z</published>
    <updated>2018-05-05T15:28:55.945Z</updated>
    
    <content type="html"><![CDATA[<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://camo.githubusercontent.com/6d366e1a5c41a4fc25432102224848023987a8f8/68747470733a2f2f692e6c6f6c692e6e65742f323031382f30352f30352f356165643265643962393236632e706e67" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><blockquote><p>..æœ€è¿‘è¿™æ®µæ—¶é—´åœ¨ç€æ‰‹åšä¸€ä¸ª<a href="https://github.com/Edward7Zhang/Sorry-AndroidClient" target="_blank" rel="external">å¼€æºé¡¹ç›®</a>..ä½¿ç”¨æ–°é²œçš„Kotlinä»¥åŠGoogleæœ€ç»å…¸çš„MaterialDesign..ç”±äºåˆšå¼€å§‹ä½¿ç”¨è‡ªç„¶ä¼šç¢°åˆ°å¾ˆå¤šå‘..ä¸Šé¢æ˜¯æˆ‘çš„é¡¹ç›®LogoğŸ¤£<br>æœ¬ç¯‡æ–‡ç« é‡ç‚¹è®²è§£æœ€ç»å…¸çš„MaterialDesignä¸­çš„æŠ½å±‰å¼å¸ƒå±€ <a href="http://developer.android.com/training/implementing-navigation/nav-drawer.html" target="_blank" rel="external">Navigation Drawer</a>è™½ç„¶AndroidStudioå·²ç»é›†æˆäº†Sampleä½†è·Ÿæ‰‹å¤ç°ä¸€éè¿˜æ˜¯å¾ˆå—ç›Šçš„ã€‚</p></blockquote><p>åœ¨2015å¹´I/Oå¤§ä¼šä¸Š..Googleå‘å¸ƒäº†NavigationViewï¼Œä¸ä¹‹å‰çš„å®˜æ–¹æ–‡æ¡£ç›¸æ¯”ï¼Œæœ¬æ–‡æ¡£æ›´å®¹æ˜“åˆ›å»ºå®Œæ•´çš„æŠ½å±‰å¼å¸ƒå±€<br>éšç€Android 5.0 Lollipopçš„å‘å¸ƒï¼Œæ–°çš„ææ–™è®¾è®¡é£æ ¼çš„æŠ½å±‰æ¨ªè·¨å±å¹•çš„æ•´ä¸ªé«˜åº¦ï¼Œå¹¶æ˜¾ç¤ºåœ¨<code>ActionBar</code>åŠé€æ˜çš„ä¸Šæ–¹å¹¶é‡å <code>StatusBar</code>ã€‚<br>Like thisï¼š<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://i.imgur.com/hPOFJUf.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure></p><h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><p>æœ¬æŒ‡å—å°†ä»‹ç»å¦‚ä½•å»ºç«‹ä¸€ä¸ªåŸºäºMaterialDesignçš„å¯ä»¥åˆ‡æ¢ä¸åŒFragmentåˆ°å†…å®¹åŒºåŸŸçš„æŠ½å±‰å¼å¯¼èˆªã€‚In this way,you can define multiple fragments, and then define the list of options which will display in the drawers items list. Each item when clicked will switch the relevant fragment into the activityâ€™s container view.</p><h3 id="Setup"><a href="#Setup" class="headerlink" title="Setup"></a>Setup</h3><p>Make sure to setup the Google Design Support Library before using Googleâ€™s new NavigationView,announced as part of the Android M release. The NavigationView should be backwards compatible with all versions down to Android 2.1.</p><p>Make sure you have this Gradle dependency added to your <code>app/build.gradle</code> file:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">dependencies &#123;</div><div class="line">  implementation <span class="string">'com.android.support:design:27.1.1'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>Setup Drawer Resources</p><p>Create a <code>menu/drawer_view.xml</code> file:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">menu</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">group</span> <span class="attr">android:checkableBehavior</span>=<span class="string">"single"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/nav_first_fragment"</span></div><div class="line">            <span class="attr">android:icon</span>=<span class="string">"@drawable/ic_one"</span></div><div class="line">            <span class="attr">android:title</span>=<span class="string">"First"</span> /&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">item</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/nav_second_fragment"</span></div><div class="line">            <span class="attr">android:icon</span>=<span class="string">"@drawable/ic_two"</span></div><div class="line">            <span class="attr">android:title</span>=<span class="string">"Second"</span> /&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">item</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/nav_third_fragment"</span></div><div class="line">            <span class="attr">android:icon</span>=<span class="string">"@drawable/ic_three"</span></div><div class="line">            <span class="attr">android:title</span>=<span class="string">"Third"</span> /&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">group</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">menu</span>&gt;</span></div></pre></td></tr></table></figure></p><p>Note that you can set one of these elements to be default selected by using <code>android:checked=&quot;true&quot;</code> .</p><p>You can also create subheaders too and group elements together:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">android:title</span>=<span class="string">"Sub items"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">menu</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">group</span> <span class="attr">android:checkableBehavior</span>=<span class="string">"single"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">item</span></span></div><div class="line">                    <span class="attr">android:icon</span>=<span class="string">"@drawable/ic_dashboard"</span></div><div class="line">                    <span class="attr">android:title</span>=<span class="string">"Sub item 1"</span> /&gt;</div><div class="line">                <span class="tag">&lt;<span class="name">item</span></span></div><div class="line">                    <span class="attr">android:icon</span>=<span class="string">"@drawable/ic_forum"</span></div><div class="line">                    <span class="attr">android:title</span>=<span class="string">"Sub item 2"</span> /&gt;</div><div class="line">            <span class="tag">&lt;/<span class="name">group</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">menu</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div></pre></td></tr></table></figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgur.com/zoDqDKM.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="Define-Fragments"><a href="#Define-Fragments" class="headerlink" title="Define Fragments"></a>Define Fragments</h3><p>æ¥ä¸‹æ¥ï¼Œä½ éœ€è¦æ¥å®šä¹‰ä½ çš„Fragmentsï¼Œè¿™äº›Fragmentså°†ä¼šæ˜¾ç¤ºåœ¨ä½ çš„Activityä¸­ã€‚<br>These can be any support fragments you define within your application. Make sure that all the fragments extend from <strong>android.support.v4.app.Fragment</strong>.</p><h3 id="Setup-Toolbar"><a href="#Setup-Toolbar" class="headerlink" title="Setup Toolbar"></a>Setup Toolbar</h3><p>In order to slide our navigation drawer over the ActionBar, we need to use the new Toolbar widget as defined in the AppCompat v21 library.The <code>Toolbar</code> can be embedded into your view hierarchy which makes sure that the drawer slides over the <code>ActionBar</code>.</p><p>Create a new layout file <code>res/layout/toolbar.xml</code> with the following code:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></div><div class="line">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></div><div class="line">    <span class="attr">android:id</span>=<span class="string">"@+id/toolbar"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:fitsSystemWindows</span>=<span class="string">"true"</span></div><div class="line">    <span class="attr">android:minHeight</span>=<span class="string">"?attr/actionBarSize"</span></div><div class="line">    <span class="attr">app:theme</span>=<span class="string">"@style/ThemeOverlay.AppCompat.Dark.ActionBar"</span></div><div class="line">    <span class="attr">android:background</span>=<span class="string">"?attr/colorPrimaryDark"</span>&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">android.support.v7.widget.Toolbar</span>&gt;</span></div></pre></td></tr></table></figure></p><p>Note that when the <code>android:fitsSystemWindows</code> attribute is set to true for a view, the view would be laid out as if the <code>StatusBar</code> and the <code>ActionBar</code> were present i.e. the UI on top gets padding enough to not be obscured by the navigation bar. Without this attribute, there is not enough padding factored into consideration for the <code>ToolBar</code>:<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgur.com/HaOAmoh.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure></p><p>We want our main content view to have the navigation bar and hence <code>android:fitsSystemWindows</code> is set to true for the <code>Toolbar</code>.</p><p>To use the <code>Toolbar</code> as an <code>ActionBar</code>, you need to disable the default <code>ActionBar</code>. This can be done by setting the app theme in <code>styles.xml</code> file.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- Base application theme. --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"AppTheme"</span> <span class="attr">parent</span>=<span class="string">"Theme.AppCompat.Light.NoActionBar"</span>&gt;</span><span class="xml"></span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"colorPrimary"</span>&gt;</span>#673AB7<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"colorPrimaryDark"</span>&gt;</span>#512DA8<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"colorAccent"</span>&gt;</span>#FF4081<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></div></pre></td></tr></table></figure><p>Also note that normally you should decide on your color scheme by going to <a href="http://www.materialpalette.com/" target="_blank" rel="external">Material Palette</a> and choosing a primary and dark primary color. For this example, we will pick purple-based colors as shown in the screenshot.</p><p><em>Note</em>: If you forget to disable the ActionBar in <code>styles.xml</code>, you are likely to see a <code>java.lang.IllegalStateException</code> with an error message that reads <code>This Activity already has an action bar supplied by the window decor. Do not request Window.FEATURE_ACTION_BAR and set windowActionBar to false in your theme to use a Toolbar instead.</code>If you see this message, you need to make sure to follow the previous steps.</p><h3 id="Setup-Drawer-in-Activity"><a href="#Setup-Drawer-in-Activity" class="headerlink" title="Setup Drawer in Activity"></a>Setup Drawer in Activity</h3><p>Next, letâ€™s setup a basic navigation drawer based on the following layout file which has the entire drawer setup in <code>res/layout/activity_main.xml</code>. Note that the <code>Toolbar</code> is added as the first child of the main content view by adding the include tag. <em>Note: if you are using a CoordinatorLayout, it must not lie outside of the DrawerLayout. See <a href="https://stackoverflow.com/questions/32523188/coordinatorlayout-appbarlayout-navigationdrawer" target="_blank" rel="external">https://stackoverflow.com/questions/32523188/coordinatorlayout-appbarlayout-navigationdrawer</a></em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- This DrawerLayout has two children at the root  --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">android.support.v4.widget.DrawerLayout</span></span></div><div class="line">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></div><div class="line">    <span class="attr">android:id</span>=<span class="string">"@+id/drawer_layout"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- This LinearLayout represents the contents of the screen  --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line">        <span class="comment">&lt;!-- The ActionBar displayed at the top --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">include</span></span></div><div class="line">            <span class="attr">layout</span>=<span class="string">"@layout/toolbar"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span> /&gt;</div><div class="line"></div><div class="line">        <span class="comment">&lt;!-- The main content view where fragments are loaded --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">FrameLayout</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/flContent"</span></div><div class="line">            <span class="attr">app:layout_behavior</span>=<span class="string">"@string/appbar_scrolling_view_behavior"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span> /&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- The navigation drawer that comes from the left --&gt;</span></div><div class="line">    <span class="comment">&lt;!-- Note that `android:layout_gravity` needs to be set to 'start' --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.NavigationView</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/nvView"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_gravity</span>=<span class="string">"start"</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"@android:color/white"</span></div><div class="line">        <span class="attr">app:menu</span>=<span class="string">"@menu/drawer_view"</span> /&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">android.support.v4.widget.DrawerLayout</span>&gt;</span></div></pre></td></tr></table></figure><p>Now, letâ€™s setup the drawer in our activity. We can also setup the menu icon too.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</div><div class="line">  <span class="keyword">private</span> DrawerLayout mDrawer;</div><div class="line">  <span class="keyword">private</span> Toolbar toolbar;</div><div class="line"> <span class="keyword">private</span> NavigationView nvDrawer;</div><div class="line"></div><div class="line">  <span class="comment">// Make sure to be using android.support.v7.app.ActionBarDrawerToggle version.</span></div><div class="line"></div><div class="line"> <span class="comment">// The android.support.v4.app.ActionBarDrawerToggle has been deprecated.</span></div><div class="line"></div><div class="line">    <span class="keyword">private</span> ActionBarDrawerToggle drawerToggle;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_main);</div><div class="line"></div><div class="line">        <span class="comment">// Set a Toolbar to replace the ActionBar.</span></div><div class="line"></div><div class="line">        toolbar = (Toolbar) findViewById(R.id.toolbar);</div><div class="line">        setSupportActionBar(toolbar);</div><div class="line"></div><div class="line">        <span class="comment">// Find our drawer view</span></div><div class="line"></div><div class="line">        mDrawer = (DrawerLayout) findViewById(R.id.drawer_layout);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onOptionsItemSelected</span><span class="params">(MenuItem item)</span> </span>&#123;</div><div class="line">        <span class="comment">// The action bar home/up action should open or close the drawer.</span></div><div class="line"></div><div class="line">        <span class="keyword">switch</span> (item.getItemId()) &#123;</div><div class="line">            <span class="keyword">case</span> android.R.id.home:</div><div class="line">                mDrawer.openDrawer(GravityCompat.START);</div><div class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.onOptionsItemSelected(item);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="Navigating-between-Menu-Items"><a href="#Navigating-between-Menu-Items" class="headerlink" title="Navigating between Menu Items"></a>Navigating between Menu Items</h3><p>Setup a handler to respond to click events on the navigation elements and swap out the fragment. This can be put into the activity directly:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">// ...</span></div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="comment">// ...From section above...</span></div><div class="line"></div><div class="line">        <span class="comment">// Find our drawer view</span></div><div class="line"></div><div class="line">        nvDrawer = (NavigationView) findViewById(R.id.nvView);</div><div class="line">        <span class="comment">// Setup drawer view</span></div><div class="line"></div><div class="line">        setupDrawerContent(nvDrawer);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setupDrawerContent</span><span class="params">(NavigationView navigationView)</span> </span>&#123;</div><div class="line">        navigationView.setNavigationItemSelectedListener(</div><div class="line">                <span class="keyword">new</span> NavigationView.OnNavigationItemSelectedListener() &#123;</div><div class="line">                    <span class="meta">@Override</span></div><div class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onNavigationItemSelected</span><span class="params">(MenuItem menuItem)</span> </span>&#123;</div><div class="line">                        selectDrawerItem(menuItem);</div><div class="line">                        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">selectDrawerItem</span><span class="params">(MenuItem menuItem)</span> </span>&#123;</div><div class="line">        <span class="comment">// Create a new fragment and specify the fragment to show based on nav item clicked</span></div><div class="line"></div><div class="line">        Fragment fragment = <span class="keyword">null</span>;</div><div class="line">        Class fragmentClass;</div><div class="line">        <span class="keyword">switch</span>(menuItem.getItemId()) &#123;</div><div class="line">            <span class="keyword">case</span> R.id.nav_first_fragment:</div><div class="line">                fragmentClass = FirstFragment.class;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> R.id.nav_second_fragment:</div><div class="line">                fragmentClass = SecondFragment.class;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> R.id.nav_third_fragment:</div><div class="line">                fragmentClass = ThirdFragment.class;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">default</span>:</div><div class="line">                fragmentClass = FirstFragment.class;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            fragment = (Fragment) fragmentClass.newInstance();</div><div class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// Insert the fragment by replacing any existing fragment</span></div><div class="line"></div><div class="line">        FragmentManager fragmentManager = getSupportFragmentManager();</div><div class="line">        fragmentManager.beginTransaction().replace(R.id.flContent, fragment).commit();</div><div class="line"></div><div class="line">        <span class="comment">// Highlight the selected item has been done by NavigationView</span></div><div class="line"></div><div class="line">        menuItem.setChecked(<span class="keyword">true</span>);</div><div class="line">        <span class="comment">// Set action bar title</span></div><div class="line"></div><div class="line">        setTitle(menuItem.getTitle());</div><div class="line">        <span class="comment">// Close the navigation drawer</span></div><div class="line"></div><div class="line">        mDrawer.closeDrawers();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// ...</span></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="Add-Navigation-Header"><a href="#Add-Navigation-Header" class="headerlink" title="Add Navigation Header"></a>Add Navigation Header</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://i.imgur.com/Ri3c6Xz.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>The NavigationView also accepts a custom attribute that can reference a layout that provides a header of our layout. For instance, you can create a <code>layout/nav_header.xml</code> similar to the following:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"192dp"</span></div><div class="line">    <span class="attr">android:background</span>=<span class="string">"?attr/colorPrimaryDark"</span></div><div class="line">    <span class="attr">android:padding</span>=<span class="string">"16dp"</span></div><div class="line">    <span class="attr">android:theme</span>=<span class="string">"@style/ThemeOverlay.AppCompat.Dark"</span></div><div class="line">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></div><div class="line">    <span class="attr">android:gravity</span>=<span class="string">"bottom"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:text</span>=<span class="string">"Header"</span></div><div class="line">        <span class="attr">android:textColor</span>=<span class="string">"@android:color/white"</span></div><div class="line">        <span class="attr">android:textAppearance</span>=<span class="string">"@style/TextAppearance.AppCompat.Body1"</span>/&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure><p>You would then reference this in the layout <code>res/layout/activity_main.xml</code> in the <code>NavigationView</code> with the <code>app:headerLayout</code> custom attribute:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- res/layout/activity_main.xml --&gt;</span></div><div class="line"></div><div class="line"> <span class="comment">&lt;!-- The navigation drawer --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.NavigationView</span></span></div><div class="line">        <span class="attr">...</span></div><div class="line">        <span class="attr">app:headerLayout</span>=<span class="string">"@layout/nav_header"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;/<span class="name">android.support.design.widget.NavigationView</span>&gt;</span></div></pre></td></tr></table></figure><p>This <code>app:headerLayout</code> inflates the specified layout into the header automatically. This can alternatively be done at runtime with:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Lookup navigation view</span></div><div class="line"></div><div class="line">NavigationView navigationView = (NavigationView) findViewById(R.id.nav_draw);</div><div class="line"><span class="comment">// Inflate the header view at runtime</span></div><div class="line"></div><div class="line">View headerLayout = navigationView.inflateHeaderView(R.layout.nav_header);</div><div class="line"><span class="comment">// We can now look up items within the header if needed</span></div><div class="line"></div><div class="line">ImageView ivHeaderPhoto = headerLayout.findViewById(R.id.imageView);</div></pre></td></tr></table></figure><h3 id="Getting-references-to-the-header"><a href="#Getting-references-to-the-header" class="headerlink" title="Getting references to the header"></a>Getting references to the header</h3><p><strong>Note:</strong> Version <code>23.1.0</code> of the design support library switches <code>NavigationView</code> to using a <code>RecyclerView</code> and causes NPE (null exceptions) on header lookups unless the header is added at runtime. If you need to get a reference to the header, you need to use the new <code>getHeaderView()</code>method introduced in the latest <code>v23.1.1</code> update:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// There is usually only 1 header view.  </span></div><div class="line"></div><div class="line"><span class="comment">// Multiple header views can technically be added at runtime.</span></div><div class="line"></div><div class="line"><span class="comment">// We can use navigationView.getHeaderCount() to determine the total number.</span></div><div class="line"></div><div class="line">View headerLayout = navigationView.getHeaderView(<span class="number">0</span>);</div></pre></td></tr></table></figure><h2 id="åŠ¨ç”»æ±‰å ¡å›¾æ ‡"><a href="#åŠ¨ç”»æ±‰å ¡å›¾æ ‡" class="headerlink" title="åŠ¨ç”»æ±‰å ¡å›¾æ ‡"></a>åŠ¨ç”»æ±‰å ¡å›¾æ ‡</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgur.com/ekmWl7q.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>ä¸ºäº†è®©æ±‰å ¡åŒ…å›¾æ ‡åŠ¨ç”»æ˜¾ç¤ºæŠ½å±‰æ­£åœ¨æ‰“å¼€å’Œå…³é—­ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨<a href="https://developer.android.com/reference/android/support/v7/app/ActionBarDrawerToggle.html" target="_blank" rel="external">ActionBarDrawerToggle</a>ç±»ã€‚</p><p>åœ¨ä½ çš„<code>res/values/strings.xml</code>æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">string</span> <span class="attr">name</span>=<span class="string">"drawer_open"</span>&gt;</span>Open navigation drawer<span class="tag">&lt;/<span class="name">string</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">string</span> <span class="attr">name</span>=<span class="string">"drawer_close"</span>&gt;</span>Close navigation drawer<span class="tag">&lt;/<span class="name">string</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></div></pre></td></tr></table></figure><p>æˆ‘ä»¬éœ€è¦å°†DrawerLayoutå’Œå·¥å…·æ ç»“åˆåœ¨ä¸€èµ·ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123; </div><div class="line"><span class="comment">// Set a Toolbar to replace the ActionBar.</span></div><div class="line"></div><div class="line">toolbar = (Toolbar) findViewById(R.id.toolbar);</div><div class="line">setSupportActionBar(toolbar);</div><div class="line"></div><div class="line"><span class="comment">// Find our drawer view</span></div><div class="line"></div><div class="line">mDrawer = (DrawerLayout) findViewById(R.id.drawer_layout);</div><div class="line">drawerToggle = setupDrawerToggle();</div><div class="line"></div><div class="line"><span class="comment">// Tie DrawerLayout events to the ActionBarToggle</span></div><div class="line"></div><div class="line">mDrawer.addDrawerListener(drawerToggle);</div><div class="line"> &#125;</div><div class="line"></div><div class="line"> <span class="function"><span class="keyword">private</span> ActionBarDrawerToggle <span class="title">setupDrawerToggle</span><span class="params">()</span> </span>&#123;</div><div class="line">      <span class="comment">// <span class="doctag">NOTE:</span> Make sure you pass in a valid toolbar reference.  ActionBarDrawToggle() does not require it</span></div><div class="line"></div><div class="line">      <span class="comment">// and will not render the hamburger icon without it.  </span></div><div class="line"></div><div class="line">      <span class="keyword">return</span> <span class="keyword">new</span> ActionBarDrawerToggle(<span class="keyword">this</span>, mDrawer, toolbar, R.string.drawer_open,  R.string.drawer_close);</div><div class="line"> &#125;</div></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿åœ¨æ¢å¤å±å¹•æˆ–é…ç½®å‘ç”Ÿå˜åŒ–ï¼ˆå³å±å¹•æ—‹è½¬ï¼‰æ—¶åŒæ­¥çŠ¶æ€ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// `onPostCreate` called when activity start-up is complete after `onStart()`</span></div><div class="line"></div><div class="line"><span class="comment">// NOTE 1: Make sure to override the method with only a single `Bundle` argument</span></div><div class="line"></div><div class="line"><span class="comment">// Note 2: Make sure you implement the correct `onPostCreate(Bundle savedInstanceState)` method. </span></div><div class="line"></div><div class="line"><span class="comment">// There are 2 signatures and only `onPostCreate(Bundle state)` shows the hamburger icon.</span></div><div class="line"></div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onPostCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onPostCreate(savedInstanceState);</div><div class="line">    <span class="comment">// Sync the toggle state after onRestoreInstanceState has occurred.</span></div><div class="line"></div><div class="line">    drawerToggle.syncState();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onConfigurationChanged</span><span class="params">(Configuration newConfig)</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onConfigurationChanged(newConfig);</div><div class="line">    <span class="comment">// Pass any configuration change to the drawer toggles</span></div><div class="line"></div><div class="line">    drawerToggle.onConfigurationChanged(newConfig);</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>æˆ‘ä»¬è¿˜éœ€è¦æ›´æ”¹<code>onOptionsItemSelected()</code>æ–¹æ³•å¹¶å…è®¸ActionBarToggleå¤„ç†äº‹ä»¶ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onOptionsItemSelected</span><span class="params">(MenuItem item)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (drawerToggle.onOptionsItemSelected(item)) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.onOptionsItemSelected(item);</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>ActionBarToggleå°†æ‰§è¡Œä¸å…ˆå‰å®Œæˆçš„åŠŸèƒ½ç›¸åŒçš„åŠŸèƒ½ï¼Œä½†ä¼šæ·»åŠ æ›´å¤šæ£€æŸ¥ï¼Œå¹¶å…è®¸é¼ æ ‡â€‹â€‹å•å‡»å›¾æ ‡ä»¥æ‰“å¼€å’Œå…³é—­æŠ½å±‰ã€‚æœ‰å…³æ›´å¤šä¸Šä¸‹æ–‡ï¼Œè¯·å‚é˜…<a href="https://github.com/android/platform_frameworks_support/blob/master/v7/appcompat/src/android/support/v7/app/ActionBarDrawerToggle.java#L285-291" target="_blank" rel="external">æºä»£ç </a>ã€‚</p><p>æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒActionBarDrawerToggleä¼šä¸ºæ‚¨å‘ˆç°æ±‰å ¡å›¾æ ‡çš„è‡ªå®šä¹‰<a href="https://github.com/android/platform_frameworks_support/blob/master/v7/appcompat/src/android/support/v7/graphics/drawable/DrawerArrowDrawable.java" target="_blank" rel="external">DrawerArrowDrawable</a>ã€‚</p><p>å¦å¤–ï¼Œè¯·ç¡®ä¿ä½¿ç”¨çš„<code>android.support.v7.app.ActionBarDrawerToggle</code>ç‰ˆæœ¬ã€‚åœ¨<code>android.support.v4.app.ActionBarDrawerToggle</code>å·²è¢«å¼ƒç”¨ã€‚</p><h2 id="ä½¿çŠ¶æ€æ åŠé€æ˜"><a href="#ä½¿çŠ¶æ€æ åŠé€æ˜" class="headerlink" title="ä½¿çŠ¶æ€æ åŠé€æ˜"></a>ä½¿çŠ¶æ€æ åŠé€æ˜</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgur.com/o4WvT3k.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>è¦ä½¿çŠ¶æ€æ å˜æˆåŠé€æ˜çŠ¶æ€å¹¶è®©æˆ‘ä»¬çš„æŠ½å±‰æ»‘è¿‡å®ƒï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶è®¾ç½®<code>android:windowTranslucentStatus</code>ä¸ºtrueã€‚ç”±äºæ­¤æ ·å¼ä¸é€‚ç”¨äºä¹‹å‰çš„Kitkatè®¾å¤‡ï¼Œå› æ­¤æˆ‘ä»¬å°†ä¸º<code>res/values-v19/styles.xml</code>APIç‰ˆæœ¬19åŠä¹‹åçš„ç‰ˆæœ¬æ·»åŠ  æ–‡ä»¶ã€‚ <strong>æ³¨æ„</strong>ï¼šå¦‚æœ<code>res/values/styles.xml</code>ç›´æ¥ç”¨æ­¤<code>android:windowTranslucentStatus</code>è¡Œä¿®æ”¹ï¼Œåˆ™å¯èƒ½éœ€è¦æ„å»ºä»…é€‚ç”¨äº19æˆ–æ›´é«˜ç‰ˆæœ¬çš„SDKï¼Œè¿™æ˜¾ç„¶ä¼šé™åˆ¶æ‚¨æ”¯æŒè®¸å¤šè¾ƒæ—§çš„è®¾å¤‡ã€‚</p><p>åœ¨<code>res/values-v19/styles.xml</code>æˆ‘ä»¬å¯ä»¥æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!-- Base application theme. --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"AppTheme"</span> <span class="attr">parent</span>=<span class="string">"Theme.AppCompat.Light.NoActionBar"</span>&gt;</span><span class="xml"></span></div><div class="line">    <span class="comment">&lt;!-- Customize your theme here. --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowTranslucentStatus"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></div></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œå¦‚æœä½ è¿è¡Œä½ çš„åº”ç”¨ç¨‹åºï¼Œä½ åº”è¯¥çœ‹åˆ°å¯¼èˆªæŠ½å±‰ï¼Œå¹¶èƒ½å¤Ÿåœ¨ä½ çš„ç‰‡æ®µä¹‹é—´è¿›è¡Œé€‰æ‹©ã€‚</p><h2 id="å°†è‡ªå®šä¹‰è§†å›¾æ·»åŠ åˆ°å¯¼èˆªæŠ½å±‰"><a href="#å°†è‡ªå®šä¹‰è§†å›¾æ·»åŠ åˆ°å¯¼èˆªæŠ½å±‰" class="headerlink" title="å°†è‡ªå®šä¹‰è§†å›¾æ·»åŠ åˆ°å¯¼èˆªæŠ½å±‰"></a>å°†è‡ªå®šä¹‰è§†å›¾æ·»åŠ åˆ°å¯¼èˆªæŠ½å±‰</h2><p>å¯¹è®¾è®¡æ”¯æŒåº“23.1.0æ‰€åšçš„ä¸€é¡¹æ”¹è¿›æ˜¯å¢åŠ äº†å¯¹å¯¼èˆªæŠ½å±‰é¡¹ç›®çš„è‡ªå®šä¹‰è§†å›¾çš„æ”¯æŒã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºå…¶ä¸­ä¸€è¡Œåˆ›å»ºè‡ªå®šä¹‰å¼€å…³ï¼Œå¦‚Google Playç”µå½±çš„å¯¼èˆªæŠ½å±‰ï¼š</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://i.imgur.com/gCgB5PQ.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>è¯¥æ–¹æ³•ä¸å°†<a href="https://guides.codepath.com/android/Extended-ActionBar-Guide#adding-actionview-items" target="_blank" rel="external">ActionViewé¡¹ç›®</a>æ·»åŠ åˆ°ActionBarç›¸åŒã€‚æˆ‘ä»¬åªéœ€è¦å®šä¹‰ä¸€ä¸ªå•ç‹¬çš„å¸ƒå±€ï¼Œå¦‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µã€‚æˆ‘ä»¬å°†è°ƒç”¨è¿™ä¸ªæ–‡ä»¶<code>action_view_switch.xml</code>ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span> <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">android.support.v7.widget.SwitchCompat</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"fill_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:text</span>=<span class="string">"Switch"</span>/&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure><p>ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨è¯¥<code>app:actionLayout</code>å±æ€§å¼•ç”¨æ­¤å¸ƒå±€ã€‚æ ‡é¢˜å¿…é¡»æä¾›ï¼Œä½†ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºç©ºç™½ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">menu</span> <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">"@+id/nav_switch"</span></span></div><div class="line">        <span class="attr">app:actionLayout</span>=<span class="string">"@layout/action_view_switch"</span></div><div class="line">        <span class="attr">android:title</span>=<span class="string">"Downloaded only"</span> /&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">menu</span>&gt;</span></div></pre></td></tr></table></figure><p>åªè¦æ‚¨çš„æ´»åŠ¨å°†å®æ–½è¯¥æ–¹æ³•ï¼Œæ‚¨å°±å¯ä»¥ç›´æ¥ä½¿ç”¨XMLé™„åŠ äº‹ä»¶ã€‚è¦é€šè¿‡Javaä»¥ç¼–ç¨‹æ–¹å¼å°†äº‹ä»¶å¤„ç†æ·»åŠ åˆ°åˆ‡æ¢å¼€å…³ï¼Œæ‚¨éœ€è¦å…ˆè·å–èœå•å®ä¾‹å¹¶è®¿é—®ç›¸åº”çš„ActionViewï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Menu menu = navigationView.getMenu();</div><div class="line">MenuItem menuItem = menu.findItem(R.id.nav_switch);</div><div class="line">View actionView = MenuItemCompat.getActionView(menuItem);</div><div class="line">actionView.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">  <span class="meta">@Override</span></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line"></div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure><p>è‡ªå®šä¹‰å°éƒ¨ä»¶çš„ä½¿ç”¨<code>app:actionViewClass</code>ä¹Ÿå¯ä»¥ç”¨äºèœå•é¡¹ç›®ã€‚æœ‰å…³Action Viewsçš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…å°†<a href="https://guides.codepath.com/android/Extended-ActionBar-Guide#adding-searchview-to-actionbar" target="_blank" rel="external">SearchView</a>æ·»åŠ <a href="https://guides.codepath.com/android/Extended-ActionBar-Guide#adding-searchview-to-actionbar" target="_blank" rel="external">åˆ°ActionBar</a>æŒ‡å—ã€‚</p><h2 id="æŒä¹…å¯¼èˆªæŠ½å±‰"><a href="#æŒä¹…å¯¼èˆªæŠ½å±‰" class="headerlink" title="æŒä¹…å¯¼èˆªæŠ½å±‰"></a>æŒä¹…å¯¼èˆªæŠ½å±‰</h2><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç‰¹åˆ«æ˜¯åœ¨å¹³æ¿ç”µè„‘ä¸Šï¼Œå¯¼èˆªæŠ½å±‰åº”è¯¥æ˜¯å……å½“ä¾§æ çš„æ´»åŠ¨çš„æ°¸ä¹…å›ºå®šè£…ç½®(Like my Blog Design)ï¼š</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://i.imgur.com/9f7nyrA.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>è¦è¾¾åˆ°æ­¤æ•ˆæœï¼Œè¯·æŸ¥çœ‹ä»¥ä¸‹æè¿°ä¸€ç§æ–¹æ³•çš„é“¾æ¥ï¼š</p><ul><li><a href="http://derekrwoods.com/2013/09/creating-a-static-navigation-drawer-in-android/" target="_blank" rel="external">é™æ€å¯¼èˆªæŠ½å±‰</a></li><li><a href="http://stackoverflow.com/a/18095111" target="_blank" rel="external">ç›¸å…³çš„Stackoverflowé—®é¢˜</a></li><li><a href="https://github.com/samerzmd/Navigation-Drawer-set-as-always-opened-on-tablets" target="_blank" rel="external">ç¤ºä¾‹ä»£ç </a></li></ul><p>ç¬¬ä¸‰æ–¹åº“ä¹Ÿå¯èƒ½ä½¿è¿™æ›´å®¹æ˜“å®ç°ã€‚</p><h2 id="ç¬¬ä¸‰æ–¹åº“"><a href="#ç¬¬ä¸‰æ–¹åº“" class="headerlink" title="ç¬¬ä¸‰æ–¹åº“"></a>ç¬¬ä¸‰æ–¹åº“</h2><p>æœ‰ä¸€äº›ç¬¬ä¸‰æ–¹åº“ä»ç„¶å¯ä»¥ä½œä¸º<code>DrawerLayout</code>ç›´æ¥ä½¿ç”¨è‡ªåŠ¨æä¾›æŸäº›ææ–™è®¾è®¡å…ƒç´ çš„æ›¿ä»£æ–¹æ¡ˆï¼š</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://i.imgur.com/6WHIEX5.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ul><li><a href="https://github.com/mikepenz/MaterialDrawer" target="_blank" rel="external">MaterialDrawer</a></li><li><a href="https://github.com/rudsonlive/NavigationDrawer-MaterialDesign" target="_blank" rel="external">NavigationDrawerMaterial</a></li></ul><p>é€šå¸¸è¿™äº›éƒ½æ˜¯ä¸å¿…è¦çš„ï¼Œä½†è¯·æ£€æŸ¥å®ƒä»¬ä»¥æŸ¥çœ‹å®ƒä»¬æä¾›çš„åŠŸèƒ½ã€‚</p><h2 id="é™åˆ¶"><a href="#é™åˆ¶" class="headerlink" title="é™åˆ¶"></a>é™åˆ¶</h2><p>è®¾è®¡æ”¯æŒåº“çš„å½“å‰ç‰ˆæœ¬çš„ç¡®æœ‰å…¶å±€é™æ€§ã€‚ä¸»è¦é—®é¢˜åœ¨äºçªå‡ºæ˜¾ç¤ºå¯¼èˆªèœå•ä¸­çš„å½“å‰é¡¹ç›®çš„ç³»ç»Ÿã€‚NavigationViewçš„itemBackgroundå±æ€§ä¸èƒ½æ­£ç¡®å¤„ç†é¡¹ç›®çš„é€‰ä¸­çŠ¶æ€ï¼šä¸ç®¡æ€æ ·ï¼Œæ‰€æœ‰é¡¹ç›®éƒ½çªå‡ºæ˜¾ç¤ºæˆ–è€…æ²¡æœ‰ä»»ä½•é¡¹ç›®ã€‚è¿™ä½¿å¾—è¿™ä¸ªå±æ€§åŸºæœ¬ä¸Šä¸é€‚ç”¨äºå¤§å¤šæ•°åº”ç”¨ç¨‹åºã€‚</p><h2 id="Fragmentçš„æ›¿ä»£å“"><a href="#Fragmentçš„æ›¿ä»£å“" class="headerlink" title="Fragmentçš„æ›¿ä»£å“"></a>Fragmentçš„æ›¿ä»£å“</h2><p>è™½ç„¶è®¸å¤šå¯¼èˆªæŠ½å±‰ç¤ºä¾‹æ˜¾ç¤ºäº†å¦‚ä½•å°†Fragmentç”¨äºå¯¼èˆªæŠ½å±‰ï¼Œä½†å¦‚æœæ‚¨å¸Œæœ›å°†æŠ½å±‰ç”¨ä½œå½“å‰æ˜¾ç¤ºçš„æ´»åŠ¨çš„å åŠ å±‚ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>RelativeLayout</code>/ <code>LinearLayout</code>ã€‚</p><p>è€Œä¸æ˜¯<code>&lt;FrameLayout&gt;</code>ä½ å¯ä»¥ç”¨ä¸€ä¸ª<code>&lt;LinearLayout&gt;</code>æ›¿ä»£</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">android.support.v4.widget.DrawerLayout</span></span></div><div class="line">        <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/drawer_layout"</span>&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">                <span class="attr">android:id</span>=<span class="string">"@+id/content_frame"</span></div><div class="line">                <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>/&gt;</div><div class="line"></div><div class="line">        <span class="comment">&lt;!-- The navigation drawer --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">ListView</span> <span class="attr">android:id</span>=<span class="string">"@+id/left_drawer"</span></span></div><div class="line">                  <span class="attr">android:layout_width</span>=<span class="string">"240dp"</span></div><div class="line">                  <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">                  <span class="attr">android:layout_gravity</span>=<span class="string">"start"</span></div><div class="line">                  <span class="attr">android:choiceMode</span>=<span class="string">"singleChoice"</span></div><div class="line">                  <span class="attr">android:divider</span>=<span class="string">"@android:color/transparent"</span></div><div class="line">                  <span class="attr">android:dividerHeight</span>=<span class="string">"0dp"</span></div><div class="line">                  <span class="attr">android:background</span>=<span class="string">"#111"</span>/&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">android.support.v4.widget.DrawerLayout</span>&gt;</span></div></pre></td></tr></table></figure><p>å–è€Œä»£ä¹‹çš„æ˜¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Insert the fragment by replacing any existing fragment</span></div><div class="line"></div><div class="line">getFragmentManager().beginTransaction()</div><div class="line">       .replace(R.id.content_frame, fragment)</div><div class="line">       .commit();</div></pre></td></tr></table></figure><p>æ‚¨å¯ä»¥æ”¹ä¸ºä½¿ç”¨<code>LinearLayout</code>å®¹å™¨ç›´æ¥ä¸ºæ´»åŠ¨å……æ°”ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">LayoutInflater inflater = getLayoutInflater();</div><div class="line">LinearLayout container = (LinearLayout) findViewById(R.id.content_frame);</div><div class="line">inflater.inflate(R.layout.activity_main, container);</div></pre></td></tr></table></figure><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul><li><a href="http://android-developers.blogspot.com/2014/10/appcompat-v21-material-design-for-pre.html" target="_blank" rel="external">http://android-developers.blogspot.com/2014/10/appcompat-v21-material-design-for-pre.html</a></li><li><a href="http://stackoverflow.com/questions/26440879/how-do-i-use-drawerlayout-to-display-over-the-actionbar-toolbar-and-under-the-st" target="_blank" rel="external">http://stackoverflow.com/questions/26440879/how-do-i-use-drawerlayout-to-display-over-the-actionbar-toolbar-and-under-the-st</a></li><li><a href="http://antonioleiva.com/navigation-view/" target="_blank" rel="external">http://antonioleiva.com/navigation-view/</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overlay&quot;&gt;&lt;/div&gt;
                   
      
    
    </summary>
    
    
      <category term="Android" scheme="https://edward7zhang.github.io/tags/Android/"/>
    
      <category term="Material Design" scheme="https://edward7zhang.github.io/tags/Material-Design/"/>
    
  </entry>
  
  <entry>
    <title>å®éªŒå®¤æ‹›æ–°é¢˜ç›®â‘ </title>
    <link href="https://edward7zhang.github.io/2018/04/27/%E5%AE%9E%E9%AA%8C%E5%AE%A4%E6%8B%9B%E6%96%B0%E9%A2%98%E7%9B%AE/"/>
    <id>https://edward7zhang.github.io/2018/04/27/å®éªŒå®¤æ‹›æ–°é¢˜ç›®/</id>
    <published>2018-04-27T10:00:07.000Z</published>
    <updated>2018-05-07T16:02:13.058Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ‘‡ç¯®æ’åº"><a href="#æ‘‡ç¯®æ’åº" class="headerlink" title="æ‘‡ç¯®æ’åº"></a>æ‘‡ç¯®æ’åº</h1><h2 id="è¾“å…¥æ‘‡ç¯®æ•°ç»„ä»¥æ‘‡ç¯®ä¸­çš„åºå·ä¸ºåŸºå‡†è¿›è¡Œæ’åº"><a href="#è¾“å…¥æ‘‡ç¯®æ•°ç»„ä»¥æ‘‡ç¯®ä¸­çš„åºå·ä¸ºåŸºå‡†è¿›è¡Œæ’åº" class="headerlink" title="è¾“å…¥æ‘‡ç¯®æ•°ç»„ä»¥æ‘‡ç¯®ä¸­çš„åºå·ä¸ºåŸºå‡†è¿›è¡Œæ’åº"></a>è¾“å…¥æ‘‡ç¯®æ•°ç»„ä»¥æ‘‡ç¯®ä¸­çš„åºå·ä¸ºåŸºå‡†è¿›è¡Œæ’åº</h2><h2 id="è¯·è‡ªå®šä¹‰Bucketçš„æ•°æ®ç»“æ„åŒ…æ‹¬"><a href="#è¯·è‡ªå®šä¹‰Bucketçš„æ•°æ®ç»“æ„åŒ…æ‹¬" class="headerlink" title="è¯·è‡ªå®šä¹‰Bucketçš„æ•°æ®ç»“æ„åŒ…æ‹¬"></a>è¯·è‡ªå®šä¹‰Bucketçš„æ•°æ®ç»“æ„åŒ…æ‹¬</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;åºå·&#125;,&#123;å­¦ç§‘&#125;&#125;</div></pre></td></tr></table></figure><h2 id="è¦æ±‚ï¼š"><a href="#è¦æ±‚ï¼š" class="headerlink" title="è¦æ±‚ï¼š"></a>è¦æ±‚ï¼š</h2><ul><li><p>å†™å‡ºä¸€ä¸ªæ–¹æ³• </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Bucket[] sortBucket(Bucket[] J,boolean Flag)</div></pre></td></tr></table></figure></li><li><p>è¿”å›ä¸ºæ’å¥½åºåçš„Bucketæ•°ç»„å¹¶åœ¨æ§åˆ¶å°ä¸­ç­”åº”</p></li><li>Flag == trueè¿”å›æ­£åºæ’åº</li><li>Flag == falseè¿”å›å€’åºæ’åº</li></ul><h1 id="é¢å‘å¤§ä¸€åŒå­¦è¦æ±‚ï¼š"><a href="#é¢å‘å¤§ä¸€åŒå­¦è¦æ±‚ï¼š" class="headerlink" title="é¢å‘å¤§ä¸€åŒå­¦è¦æ±‚ï¼š"></a>é¢å‘å¤§ä¸€åŒå­¦è¦æ±‚ï¼š</h1><h2 id="åœ¨æ§åˆ¶å°ä¸­è¾“å…¥Bucketæ•°ç»„"><a href="#åœ¨æ§åˆ¶å°ä¸­è¾“å…¥Bucketæ•°ç»„" class="headerlink" title="åœ¨æ§åˆ¶å°ä¸­è¾“å…¥Bucketæ•°ç»„"></a>åœ¨æ§åˆ¶å°ä¸­è¾“å…¥Bucketæ•°ç»„</h2><h2 id="exampleï¼š"><a href="#exampleï¼š" class="headerlink" title="exampleï¼š"></a>exampleï¼š</h2><h2 id="input"><a href="#input" class="headerlink" title="input:"></a>input:</h2><ul><li>1 æ•°å­¦</li><li>3 è¯­æ–‡</li><li>2 è‹±è¯­</li><li>true<h2 id="output"><a href="#output" class="headerlink" title="output:"></a>output:</h2></li><li>1 æ•°å­¦</li><li>2 è‹±è¯­</li><li>3 è¯­æ–‡</li></ul><h1 id="é¢å‘å¤§äºŒåŒå­¦è¦æ±‚ï¼š"><a href="#é¢å‘å¤§äºŒåŒå­¦è¦æ±‚ï¼š" class="headerlink" title="é¢å‘å¤§äºŒåŒå­¦è¦æ±‚ï¼š"></a>é¢å‘å¤§äºŒåŒå­¦è¦æ±‚ï¼š</h1><h2 id="æ„é€ è‡ªå·±ç†Ÿæ‚‰çš„å‰ç«¯ç•Œé¢è¾“å…¥è¾“å‡ºæ¡†ä»¥åŠæ­£åºå€’åºæ’åºæŒ‰é’®"><a href="#æ„é€ è‡ªå·±ç†Ÿæ‚‰çš„å‰ç«¯ç•Œé¢è¾“å…¥è¾“å‡ºæ¡†ä»¥åŠæ­£åºå€’åºæ’åºæŒ‰é’®" class="headerlink" title="æ„é€ è‡ªå·±ç†Ÿæ‚‰çš„å‰ç«¯ç•Œé¢è¾“å…¥è¾“å‡ºæ¡†ä»¥åŠæ­£åºå€’åºæ’åºæŒ‰é’®"></a>æ„é€ è‡ªå·±ç†Ÿæ‚‰çš„å‰ç«¯ç•Œé¢è¾“å…¥è¾“å‡ºæ¡†ä»¥åŠæ­£åºå€’åºæ’åºæŒ‰é’®</h2><h2 id="åœ¨å…¶ä¸­è¾“å…¥Bucketæ•°ç»„"><a href="#åœ¨å…¶ä¸­è¾“å…¥Bucketæ•°ç»„" class="headerlink" title="åœ¨å…¶ä¸­è¾“å…¥Bucketæ•°ç»„"></a>åœ¨å…¶ä¸­è¾“å…¥Bucketæ•°ç»„</h2><h2 id="exampleï¼š-1"><a href="#exampleï¼š-1" class="headerlink" title="exampleï¼š"></a>exampleï¼š</h2><h2 id="input-1"><a href="#input-1" class="headerlink" title="input:"></a>input:</h2><ul><li>1 æ•°å­¦</li><li>3 è¯­æ–‡</li><li>2 è‹±è¯­<h2 id="output-1"><a href="#output-1" class="headerlink" title="output:"></a>output:</h2></li><li>1 æ•°å­¦</li><li>2 è‹±è¯­</li><li>3 è¯­æ–‡</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;æ‘‡ç¯®æ’åº&quot;&gt;&lt;a href=&quot;#æ‘‡ç¯®æ’åº&quot; class=&quot;headerlink&quot; title=&quot;æ‘‡ç¯®æ’åº&quot;&gt;&lt;/a&gt;æ‘‡ç¯®æ’åº&lt;/h1&gt;&lt;h2 id=&quot;è¾“å…¥æ‘‡ç¯®æ•°ç»„ä»¥æ‘‡ç¯®ä¸­çš„åºå·ä¸ºåŸºå‡†è¿›è¡Œæ’åº&quot;&gt;&lt;a href=&quot;#è¾“å…¥æ‘‡ç¯®æ•°ç»„ä»¥æ‘‡ç¯®ä¸­çš„åºå·ä¸ºåŸºå‡†è¿›è¡Œæ’åº&quot; cla
      
    
    </summary>
    
    
      <category term="Lab_Interview" scheme="https://edward7zhang.github.io/tags/Lab-Interview/"/>
    
  </entry>
  
  <entry>
    <title>ä¸‰å¹´ä¸‰æœˆä¸‰å¤©ä¸‰å°æ—¶</title>
    <link href="https://edward7zhang.github.io/2018/04/27/%E4%B8%89%E5%B9%B4%E4%B8%89%E6%9C%88%E4%B8%89%E5%A4%A9%E4%B8%89%E5%B0%8F%E6%97%B6/"/>
    <id>https://edward7zhang.github.io/2018/04/27/ä¸‰å¹´ä¸‰æœˆä¸‰å¤©ä¸‰å°æ—¶/</id>
    <published>2018-04-26T17:42:07.000Z</published>
    <updated>2018-04-27T07:52:55.006Z</updated>
    
    <content type="html"><![CDATA[<p><iframe frameborder="no" marginwidth="0" marginheight="0" width="300" height="50" src="https://music.163.com/outchain/player?type=2&id=1218773&auto=0&height=32"></iframe></p><h1 id="2018-04-26-14-27-ğŸ‘¨â€ğŸ’»"><a href="#2018-04-26-14-27-ğŸ‘¨â€ğŸ’»" class="headerlink" title="2018.04.26/14:27 ğŸ‘¨â€ğŸ’»"></a>2018.04.26/14:27 ğŸ‘¨â€ğŸ’»</h1><h3 id="æˆ‘æ”¶åˆ°äº†çˆ±å¥‡è‰ºç§»åŠ¨è½¯ä»¶å¼€å‘å²—çš„Offerï¼Œè¯šæƒ¶è¯šæã€‚"><a href="#æˆ‘æ”¶åˆ°äº†çˆ±å¥‡è‰ºç§»åŠ¨è½¯ä»¶å¼€å‘å²—çš„Offerï¼Œè¯šæƒ¶è¯šæã€‚" class="headerlink" title="æˆ‘æ”¶åˆ°äº†çˆ±å¥‡è‰ºç§»åŠ¨è½¯ä»¶å¼€å‘å²—çš„Offerï¼Œè¯šæƒ¶è¯šæã€‚"></a>æˆ‘æ”¶åˆ°äº†çˆ±å¥‡è‰ºç§»åŠ¨è½¯ä»¶å¼€å‘å²—çš„Offerï¼Œè¯šæƒ¶è¯šæã€‚</h3><h2 id=""><a href="#" class="headerlink" title="-"></a>-</h2><p>æˆ‘çš„ä»·å€¼ç»ˆäºå¾—åˆ°äº†è®¤å¯â€¦<strong>å‰20å¹´çš„çŸ¥è¯†ç§¯å¥ ..å3å¹´çš„ä¸“ä¸šæµ…è§¦..ä»¥åŠ3ä¸ªæœˆæ¥çš„å‡†å¤‡..è¿˜æœ‰è¿‘3å¤©ä»¥æ¥çš„ç„¦è™‘..æœ€ç»ˆæ˜¯æ‹¿åˆ°Offerå‰3å°æ—¶çš„ä¸é•‡å®š</strong>â€¦ä¹Ÿè®¸è¿™ç§è¿‡ç¨‹æ­£æ˜¯æˆ‘è¸å…¥ç¤¾ä¼šçš„å¼€å§‹ä»¥åŠæœ€é‡è¦çš„æ˜¯å¯ä»¥åœ¨æˆ‘æ¢¦å¯çš„å¤§å¹³å°ä¸Šå¼€æ‹“è‡ªå·±çš„è§†é‡å¼ºåŒ–è‡ªå·±çš„ä¸“ä¸šçŸ¥è¯†â€¦è¿™ä¸€åˆ‡ä¹Ÿæ¥æºäºæˆ‘3å¹´ä»¥æ¥çš„ä¸æ‡ˆâ€¦ä½†æ›´å€¼å¾—æ„Ÿè°¢çš„æ˜¯æˆ‘çš„ä¼¯ä¹â€“æˆ‘çš„ä¸“ä¸šå¼•è·¯äººåˆ˜è€å¸ˆå’Œç­å¯¼ä¸¥è€å¸ˆåœ¨è¿™ä¸‰å¹´æ¥çš„ç…§æ–™ä¸è§£æƒ‘â€¦åè§‚æˆ‘ä¸‰å¹´å‰åˆšå…¥æ ¡çš„æœ¨è®·ä¸è½»æµ®..åˆ°ç°åœ¨å¯ä»¥è´Ÿè´£å®éªŒå®¤..ä»¥åŠå¾—åˆ°ç¤¾ä¼šçš„è®¤å¯è¿™ä¸€è·¯æ¥æ²¡æœ‰ä»–ä»¬çš„æŒ‡å¼•æˆ‘ä¹Ÿè®¸è¿˜åœ¨è‡ªå·±çš„æ··æ²Œä¸­ä¸èƒ½è‡ªæ‹”â€¦<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://i.loli.net/2018/04/27/5ae2c7ffc33f5.png" alt="My favorite mural Creazione di Adamo by Michelangelo" title="">                </div>                <div class="image-caption">My favorite mural Creazione di Adamo by Michelangelo</div>            </figure></p><ul><li><p>æˆ‘ä¹Ÿæ›¾æ„£å¤´é’â€¦åœ¨è¿˜æœªå‡†å¤‡å……åˆ†å°±å†²å»é¢è¯•é˜¿é‡Œâ€¦è¿ç»­æŒ‚æ‰ä¸¤æ¬¡çš„è…¾è®¯é¢è¯•â€¦ä»¥åŠæ²¡æœ‰éŸ³è®¯çš„ç¾å›¢â€¦åˆ°ç°åœ¨æˆ‘å¿ƒå¿ƒå¿µçš„è¿˜åœ¨ç­‰ç»“æœçš„å¤§ç–†â€¦ä»¥åŠæˆ‘å·²æ‹¿åˆ°å®ä¹ Offerçš„çˆ±å¥‡è‰ºâ€¦</p></li><li><p>æ‹¿åˆ°Offerçš„æˆ‘ä¸€ç‚¹ä¹Ÿæ²¡æœ‰æ¿€åŠ¨â€¦åªæ˜¯è®©æˆ‘åƒç–®ç™¾å­”çš„å¿ƒå¾—åˆ°äº†ä¸€ç‚¹æ»¡è¶³â€¦</p></li><li><p>åœ¨è¿™ä¸€è·¯çš„é¢è¯•ç»å†ä¸­æˆ‘å‘ç°ï¼Œæˆ‘æœ€ç»ˆæ”¶ç›Šçš„è¿˜æ˜¯æˆ‘å¯¹ä¸“ä¸šçš„åšæŒâ€¦å§‹ç»ˆæ²¡æœ‰æ”¾å¼ƒæˆ‘çƒ­çˆ±çš„Androidç§»åŠ¨ç«¯å¼€å‘..å½“å‡ºç°æ–°çš„æŠ€æœ¯..æˆ‘æ€»æ˜¯é¦–å…ˆæƒ³åˆ°åº”ç”¨äºç§»åŠ¨ç«¯â€¦è‡³å°‘è¿™ç§åŸåŠ›å¼çš„é©±åŠ¨æ¥è‡ªäºæˆ‘çš„ä¸–ç•Œè§‚..æˆ‘è®¤ä¸ºåœ¨è¿™ä¸ªæ—¶ä»£äº’è”ç½‘çš„æœ€å¤§ä½œç”¨åº”è¯¥æ˜¯å¸¦åŠ¨äººç±»å‘å±•è¿›æ­¥..å³ä½¿å¦‚ä»Šæ˜¯ä¸ªç™¾å®¶åˆå”±çš„äº’è”ç½‘ç¯å¢ƒ..æ›´å¤šçš„ä¼ä¸šé€‰æ‹©äº†æ¨åŠ¨ç»æµçš„æé’±å¼è¡Œä¸ºâ€¦å¤§é‡çš„ç ”å‘èµ„æºç”¨äºå¯¹å¨±ä¹æˆ–æ˜¯ä½ä¿—æ–‡åŒ–çš„ä¼ æ’­â€¦ä½¿å¾—å¦‚ä»Šéƒ½æ˜¯é¢å‘ä¸Šå¸‚æ•²é’Ÿå¼åˆ›ä¸šâ€¦</p></li><li><p>å¼‚æ›²åŒå·¥çš„æ˜¯æœ€è¿‘åœ¨å¹´çº§ç¾¤ä¸­çœ‹åˆ°æœ‰å·²é¢50å®¶å…¬å¸æ‹¿åˆ°3ä¸ªOfferçš„äººå´å¤§è¨€ä¸æƒ­çš„å†™ç€é¢ç»..æ•™å”†æƒ³å»å‚åŠ å·¥ä½œçš„åŒå­¦è‹¥æ˜¯æ²¡æœ‰é¡¹ç›®å»æŸå®èŠ±é’±è´­ä¹°â€¦çº¯ç²¹çš„é¢å‘é¢è¯•çš„ç¼–ç¨‹ä»¤äººæ„Ÿåˆ°æ¶ä¿—â€¦åœ°çƒç§‘æŠ€çš„è¿›æ­¥å¦‚æœå­˜åœ¨å¾ˆå¤šè¿™æ ·çš„äººç®€ç›´ä¸å ªæƒ³è±¡å§â€¦</p></li><li><p>å¦‚ä»Šè¿™ä¸ªæ—¶ä»£æœ‰ç‚¹ä¼ªæ–‡è‰ºå¤å…´çš„æ„Ÿè§‰â€¦å¥½åƒä¸–é—´å¾ˆçº·ä¹±â€¦ä¸æ˜¯é‚£ä¹ˆå®‰å®šâ€¦ä½†å¤§å®¶å¥½åƒè¿˜è¿‡å¾—è‡ªå¾—å…¶ä¹â€¦è¿™ç§è‡ªæ€å¼çš„ä¹ æƒ¯åœ¨ä¸€ç‚¹ç‚¹çš„åå™¬äººç±»å¿ƒçµæœ€åçš„è¿›å–â€¦</p></li></ul><h1 id="ä¸‰å¹´-ğŸ‘¹"><a href="#ä¸‰å¹´-ğŸ‘¹" class="headerlink" title="ä¸‰å¹´ ğŸ‘¹"></a>ä¸‰å¹´ ğŸ‘¹</h1><p>å¤§å­¦è¿™ä¸‰å¹´æ¥å…¶å®æ˜¯æ†‹äº†ä¸€å£æ°”çš„å»è¿½èµ¶æˆ‘é«˜ä¸­ä¸‰å¹´æ‰€é—å¤±çš„ç§ç§<br>ä¸‰å¹´åå†çœ‹æˆ‘å€’æ˜¯è¿½å›æ¥äº†ä¸€äº›..è¿™æ˜¯å€¼å¾—è‚¯å®šçš„<br>è‡³å°‘æˆ‘æ²¡æœ‰è¢«ä¸–ä¿—èµ¶ä¸Š..è‡³å°‘æˆ‘æš‚æ—¶èµ¢å¾—äº†è‡ªå·±çš„è®¤å¯</p><h1 id="ä¼¯ä¹-ğŸ"><a href="#ä¼¯ä¹-ğŸ" class="headerlink" title="ä¼¯ä¹ ğŸ"></a>ä¼¯ä¹ ğŸ</h1><blockquote><p>ä¸–æœ‰ä¼¯ä¹ï¼Œç„¶åæœ‰åƒé‡Œé©¬ã€‚åƒé‡Œé©¬å¸¸æœ‰ï¼Œè€Œä¼¯ä¹ä¸å¸¸æœ‰ã€‚<br>æˆ‘æ˜¯ä¸€ä¸ªå‚²æ…¢çš„è‡ªè°¦çš„ï¼Œä¸æ˜“è¢«ä»–äººå‹åˆ¶çš„ï¼Œå‘å¾€è‡ªç”±çš„äººã€‚</p></blockquote><p>è¿™ä¸‰å¹´æ¥æˆ‘çœŸå¿ƒçš„æ„Ÿè°¢æˆ‘çš„ç­å¯¼ä¸¥çµæ¯“è€å¸ˆã€æˆ‘çš„è®¡ç®—æœºè¯­è¨€å…¥é—¨äººåˆ˜ä¼Ÿè€å¸ˆã€‚<br>æ˜¯ä»–ä»¬çš„æ…§çœ¼ç»™äº†æˆ‘è¿›å‡çš„å¹³å°ã€‚<br>è¿™ä¸¤ä½è€å¸ˆçš„æ€§æ ¼è¿¥å¼‚å¯¹æˆ‘æ¥è¯´æ˜¯éå¸¸å—ç›Šçš„â€¦</p><ul><li>å…¶ä¸€ã€é‚£ç§å¯¹å­¦ç”Ÿçš„å…³æ€€ä¸å­¦æœ¯ä¸Šã€äººç”Ÿä¸Šå¤§ä¹‰è‡³ç®€çš„æŒ‡å¯¼ä¸æ²Ÿé€šæ˜¯è®©æˆ‘æ‘†è„±å„ç§æœ¨è®·ä¸æ··æ²Œçš„å”¯ä¸€ç»³ç´¢ã€‚</li><li>å¦ä¸€ä½ã€é‚£ç§éšæ€§çš„ä¸ç¾çš„å¸…æ°”çš„ç”·æ€§é£æ ¼æˆä¸ºäº†æˆ‘å¯¹ç”·æ€§ç†è§£çš„æ ‡æ¦œâ€¦ä½œä¸ºæˆ‘é¡¹ç›®æŒ‡å¯¼è€å¸ˆå¯¹æˆ‘çš„ä¿¡ä»»ï¼Œç›´æ¥å½±å“äº†æˆ‘ä¹‹åå¯¹è½¯ä»¶äº§å“çš„çœ‹æ³•ä¸ç†è§£â€¦å°†é¡¹ç›®å¤§æ„è§£é‡Šä¸å­¦ç”Ÿï¼Œå…¶ä»–çš„å¯ä»¥è‡ªæˆ‘å‘æŒ¥çš„åšæ³•ï¼Œè‡³å°‘ç›®å‰æˆ‘æ²¡æœ‰åœ¨å…¶ä»–è€å¸ˆèº«ä¸Šå‘ç°è¿‡â€¦è¿™ç§å¯¹å­¦ç”Ÿçš„ä¿¡ä»»åŒæ ·ä¹Ÿæ˜¯è®©æˆ‘è¾—è½¬å„ç§å®éªŒå®¤åæœ€ç»ˆåˆå›åˆ°Lab603çš„å”¯ä¸€ç†ç”±â€¦</li></ul><p>ç°åœ¨å†å›å¤´çœ‹çœ‹è¿™ä¸‰å¹´â€¦å……å®åˆå……æ»¡å›å¿†â€¦</p><h1 id="å¼€å‘è€…åŒä¼´-ğŸ˜"><a href="#å¼€å‘è€…åŒä¼´-ğŸ˜" class="headerlink" title="å¼€å‘è€…åŒä¼´ ğŸ˜"></a>å¼€å‘è€…åŒä¼´ ğŸ˜</h1><blockquote><p>å¦‚æœæ‹¿ä¼¯ç‰™ä¸é’Ÿå­æœŸçš„æ•…äº‹æ¥è¯´æˆ‘ä»¬å¯èƒ½è¿‡å¤´..å…¶å®æˆ‘ä»¬ä¹Ÿæ²¡æœ‰åˆ°é‚£ç§å¢ƒç•Œâ€¦åªæ˜¯æƒ³ç”¨è¿™ç§æ„Ÿè§‰æ¥è¡¨è¾¾æˆ‘è¿™ä¸‰å¹´æ¥å¯¹ä»–çš„æ„Ÿè°¢ï¼Œä»–ä¸æˆ‘å…±åŒå¼€å‘äº†æˆ‘è¿™ä¸‰å¹´æ¥çš„å¤§éƒ¨åˆ†é¡¹ç›®â€¦</p></blockquote><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://i.loli.net/2018/04/27/5ae2c382bbaeb.jpg" alt="2016å¹´10æœˆ12æ—¥ æ˜ŸæœŸä¸‰ 23:22 å¼ ç¿åœ¨æˆ‘çš„å®¿èˆé‡Œä¸€èµ·é‡æ„é¡¹ç›®çœ‹åˆ°ç»“æœåçš„å–œæ‚¦" title="">                </div>                <div class="image-caption">2016å¹´10æœˆ12æ—¥ æ˜ŸæœŸä¸‰ 23:22 å¼ ç¿åœ¨æˆ‘çš„å®¿èˆé‡Œä¸€èµ·é‡æ„é¡¹ç›®çœ‹åˆ°ç»“æœåçš„å–œæ‚¦</div>            </figure><p>è¿™ä¸‰å¹´æ¥ä¸ä¸‹10ä¸ªå¤§å¤§å°å°çš„é¡¹ç›®å…¶ä¸­2/3éƒ½æ˜¯æˆ‘å’Œä»–å…±åŒå¼€å‘çš„â€¦æ— æ•°ä¸ªé€šå®µ..æ— æ•°ä¸ªéœ€æ±‚çš„äº‰æ‰§æ— æ•°ä¸ªé—®é¢˜çš„è§£å†³â€¦åœ¨è¿™ä¸€ç³»åˆ—çš„è¿‡ç¨‹ä¸­å¦‚æœæ²¡æœ‰è¿™æ ·ä¸€ä¸ªäººçš„å­˜åœ¨åˆä¼šå˜å¾—æœ‰å¤šå¤§çš„æŒ‘æˆ˜å‘¢ï¼Ÿ<br>æˆ‘ç°åœ¨åªèƒ½è¯´å¼ ç¿è¿™ä¸‰å¹´æ¥æ„Ÿè°¢ä½ çš„äº’åŠ©ï¼Œæ²¡æœ‰ä½ æˆ‘ä¹Ÿèµ°ä¸åˆ°è¿™ä¸€æ­¥â€¦æˆ‘ä¼šåœ¨è¿™æ¡è·¯ç»§ç»­èµ°ä¸‹å»çš„â€¦åªä¸ºäº†æˆ‘ä»¬é‚£æ— æ•°ä¸ªæ—¥å¤œçš„å•çº¯çš„æ¢¦ã€‚</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://i.loli.net/2018/04/27/5ae2d43e09aaf.jpg" alt="2016å¹´10æœˆ16æ—¥ æ˜ŸæœŸæ—¥ 3:11 æˆ‘ä»¬åˆä½œçš„ç¬¬ä¸€ä¸ªé¡¹ç›®OneKey2Alarmè‚é€šå®µ" title="">                </div>                <div class="image-caption">2016å¹´10æœˆ16æ—¥ æ˜ŸæœŸæ—¥ 3:11 æˆ‘ä»¬åˆä½œçš„ç¬¬ä¸€ä¸ªé¡¹ç›®OneKey2Alarmè‚é€šå®µ</div>            </figure><h1 id="Project-âŒ¨ï¸"><a href="#Project-âŒ¨ï¸" class="headerlink" title="Project âŒ¨ï¸"></a>Project âŒ¨ï¸</h1><blockquote><p>é¡¹ç›®ä¹‹äºå¼€å‘è€…å¦‚åŒçˆ¶ä¸å­çš„å…³ç³»</p></blockquote><p>ç›¸ä¿¡æ¯ä¸€ä¸ªå¼€å‘è€…åœ¨å®Œæˆä»–çš„Projectåéƒ½ä¼šåŠ å€å¿ƒåŠ›çš„å»ç»´æŠ¤ä»–çš„Projectâ€¦åœ¨è¿™è¿‡ç¨‹ä¸­ä¹ŸåŒæ—¶æ˜¯å¼€å‘è€…ç»éªŒèƒ½åŠ›æå‡çš„å…³é”®â€¦æ‰€ä»¥åœ¨é¢è¯•è¿‡ç¨‹ä¸­æ¯ä¸ªå¼€å‘è€…åœ¨ä»–è¿‡å»å®Œæˆçš„é¡¹ç›®è´¨é‡ä¸æ•°é‡å°±æ˜¾å¾—æ ¼å¤–å®è´µ..é€šè¿‡é¡¹ç›®çš„ä¾§é¢è§‚å¯Ÿå¯ä»¥çœ‹å¾—å‡ºä¸€ä¸ªäººçš„ä»£ç é£æ ¼..ä»–çš„ä¸ªæ€§..ä»–çš„ä¸ºäººâ€¦æ‰€ä»¥å¦‚ä¸Šæ–‡æ‰€è¿°çš„é‚£ç§é¢å‘é¢è¯•çš„ç¼–ç¨‹æ–¹å¼æ˜¯æˆ‘ä¸ªäººéå¸¸åŒæ¶çš„â€¦æˆ‘è®¤ä¸ºåªè¦æ˜¯ä¸€ä¸ªæœ‰è¿½æ±‚çš„å¼€å‘è€…..ä¸€ä¸ªåˆæ ¼çš„ç¨‹åºå‘˜éƒ½ååˆ†æ‘’å¼ƒè¿™ç§åšæ³•â€¦é€šè¿‡è·å–ä»–äººçš„åŠ³åŠ¨æˆæœæ¥æ‰“è‚¿è„¸å……èƒ–å­..æ€»æœ‰ä¸€å¤©ä¼šè´¥éœ²çš„ã€‚<br>çœŸè¯šæ˜¯ä¸€ä¸ªäººæœ€ç¾å¥½ä¹Ÿæ˜¯æœ€åº•çº¿çš„å“è´¨â€¦å¦‚æœä½ æƒ³è®©è¿™ä¸ªä¸–ç•Œè¾¾åˆ°å…¬å¹³é‚£ä¹ˆä¹…åº”è¯¥äººäººæœ‰è´£â€¦é€šè¿‡ä¸æ‹©æ‰‹æ®µçš„æ–¹å¼æ¥é€šè¿‡é¢è¯•è¿™æ ·å¯¹æ›´å¤šä¼˜ç§€çš„é¡¹ç›®å¼€å‘è€…æ— å¼‚äºæ˜¯ä¸€ç§ä¾®è¾±â€¦æˆ‘å‘¨å›´çš„åŒå­¦åœ¨æœ€è¿‘æ‰¾å·¥ä½œçš„è¿‡ç¨‹ä¸­æ²¡æœ‰ä¸€ä¸ªäººæ˜¯è½»æ¾çš„â€¦ä¸€å®¶å®¶å…¬å¸ä¸€æ¬¡æ¬¡çš„æ‹’ç»åˆ°è®©äººæ€€ç–‘è‡ªå·±â€¦ä½†è¯´å®è¯åªæœ‰å†…å¿ƒå¼ºå¤§çš„äººæ‰èƒ½å†²å‡ºè¿™ç‰‡æ··æ²Œâ€¦å› ä¸ºä»æ­¤ä¹‹åä½ å°±ä¼šè„±ç¦»è±¡ç‰™å¡”â€¦ä¸ä¼šå†æœ‰äººå»åº‡æŠ¤ä½ â€¦ä½ è¦é¢å¯¹çš„æ˜¯ç‹°ç‹è€Œæ®‹é…·çš„ç¤¾ä¼š..è¦ä¸ºè‡ªå·±çš„è¨€è¡Œè´Ÿè´£äº†â€¦äººäººä¸æ˜“â€¦å”¯æœ‰åšæŒæ‰èƒ½å†²ç ´é‡å›´â€¦</p><blockquote><p>åœ¨è¿™é‡ŒåŒæ—¶æƒ³æ„Ÿè°¢æˆ‘æœªæ¥çš„éƒ¨é—¨é¢†å¯¼..æ˜¯ä»–å¯¹æˆ‘çš„è®¤å¯..æˆ‘æ‰ç›´æ¥çš„å¾—åˆ°äº†è¿™ä¸€æå‡è‡ªå·±è§†é‡çš„æœºä¼šâ€¦æˆ‘ä¼šå‘è‡ªå·±è¯æ˜ä»–å¹¶æ²¡æœ‰çœ‹é”™</p></blockquote><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://i.loli.net/2018/04/27/5ae2c508827c3.jpg" alt="2018.04 æ­¦æ±‰æ˜¥å­£Hackthon" title="">                </div>                <div class="image-caption">2018.04 æ­¦æ±‰æ˜¥å­£Hackthon</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://i.loli.net/2018/04/27/5ae2c50d2c899.jpg" alt="2018.04 å‡Œæ™¨4:00 æ­¦æ±‰æ˜¥å­£Hackthon" title="">                </div>                <div class="image-caption">2018.04 å‡Œæ™¨4:00 æ­¦æ±‰æ˜¥å­£Hackthon</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://i.loli.net/2018/04/27/5ae2c50919947.jpg" alt="2018.04 æ­¦æ±‰æ˜¥å­£Hackthon äº§å“å±•ç¤º" title="">                </div>                <div class="image-caption">2018.04 æ­¦æ±‰æ˜¥å­£Hackthon äº§å“å±•ç¤º</div>            </figure><h1 id="å®¶åº­-ğŸ‘ª"><a href="#å®¶åº­-ğŸ‘ª" class="headerlink" title="å®¶åº­ ğŸ‘ª"></a>å®¶åº­ ğŸ‘ª</h1><ul><li>æˆ‘æ‹¥æœ‰è¿™æ ·çš„å®¶åº­åº”è¯¥æ˜¯æˆ‘äººç”Ÿèµ°è¿‡20å¹´æ‰€å¹¸è‡³æä¹‹äº‹</li><li>çˆ¶æ¯å¯¹æˆ‘çš„å…³å¿ƒä¸çˆ±æŠ¤é€‚åˆä¸”å¾—å½“</li><li>çˆ¶æ¯å¯¹æˆ‘çš„æ”¾å…»å¼ç®¡ç†æˆ‘ç§°ä¸ºâ€œä¸ç®¡ä¹‹æ©â€è¿™ç§åšæ³•é—´æ¥çš„ä½¿æˆ‘è‡ªç”±å‘å±•å¯»æˆ‘æ‰€ä¹</li><li>çˆ¶æ¯å¯¹æˆ‘çš„æ— æ¡ä»¶æ”¯æŒæˆ‘çš„é€‰æ‹©ä½¿æˆ‘å—ç›Š</li><li>ç”Ÿäºå¼ å…ˆç”Ÿä¸é™ˆå¥³å£«æ˜¯æˆ‘è¿™ä¸€ç”Ÿæ— å¯æ¯”æ‹Ÿçš„å¹¸è¿</li></ul><p>æ„Ÿè°¢æˆ‘çš„çˆ¶æ¯è®©æˆ‘åº¦è¿‡äº†æ— å¿§çš„ç«¥å¹´ã€å°‘å¹´..æœªæ¥ä¸–ç•Œçš„ç‹°ç‹æˆ‘å·²ç»å¯ä»¥ç‹¬è‡ªå»é¢å¯¹äº†ï¼Œä¹Ÿè¯·ä½ ä»¬æ”¾å¿ƒ<br>æˆ‘æ°¸è¿œçˆ±ä½ ä»¬â¤ï¸</p><h1 id="Last-but-not-least-ğŸ’ª"><a href="#Last-but-not-least-ğŸ’ª" class="headerlink" title="Last but not least ğŸ’ª"></a>Last but not least ğŸ’ª</h1><p>é€šè¿‡æˆ‘ä¸€æ¬¡æ¬¡çš„å¤±è´¥..ç»éªŒçš„ç§¯ç´¯..ä¹Ÿæ‹¿åˆ°äº†å¦‚æ„¿çš„Offerâ€¦<br>æˆ‘æ˜ç™½è¿™å¹¶ä¸æ˜¯æ ‡æ¦œç€ä»€ä¹ˆ..è€Œæ˜¯åˆä¸€æ¬¡æ–°çš„å¼€å§‹..æˆ‘è¿™é•¿ä¹…ä»¥æ¥åªæ˜¯åœ¨ä¸ºè‡ªå·±äº‰å–å»æ›´å¥½çš„å¹³å°å­¦ä¹ ..å‘å±•â€¦<br>åœ¨æ­¤æƒ³ç»™æœªæ¥çš„è‡ªå·±è¯´ï¼šä¸è¦è®©ä½ ä¹‹å‰çš„åŠªåŠ›ç™½è´¹..ä¿æŒè‡ªå·±çš„æ¢¦æƒ³..ä¸è¦è¢«ä¸–ä¿—ä¾µæŸ“..ä¿æŒå­¦ä¹ ..ä¿æŒç«äº‰åŠ›..åˆ‡å‹¿è‡ªæ»¡â€¦</p><blockquote><p>è®°ä¸€ä¸ªå³å°†æ­¥å…¥ç¤¾ä¼šçš„ç”·ç”Ÿå›é¦–è¿‡å»20å¹´çš„ç‹°ç‹ä¸å¯¹è‡ªå·±æœªæ¥çš„å‹‰åŠ±</p></blockquote><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://i.loli.net/2018/04/27/5ae2c515a6cd2.jpg" alt="Lab603 æˆ‘çš„å·¥ä½ ;-)" title="">                </div>                <div class="image-caption">Lab603 æˆ‘çš„å·¥ä½ ;-)</div>            </figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;iframe frameborder=&quot;no&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; width=&quot;300&quot; height=&quot;50&quot; src=&quot;https://music.163.com/outchain/player?type=2&amp;id=12
      
    
    </summary>
    
    
      <category term="Inspire" scheme="https://edward7zhang.github.io/tags/Inspire/"/>
    
  </entry>
  
  <entry>
    <title>Javaä¸Kotlinä¸‹çš„6ç§å•ä¾‹æ¨¡å¼</title>
    <link href="https://edward7zhang.github.io/2018/04/25/Java%E4%B8%8EKotlin%E4%B8%8B%E7%9A%846%E7%A7%8D%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"/>
    <id>https://edward7zhang.github.io/2018/04/25/Javaä¸Kotlinä¸‹çš„6ç§å•ä¾‹æ¨¡å¼/</id>
    <published>2018-04-25T05:44:14.000Z</published>
    <updated>2018-04-26T11:15:00.285Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://user-gold-cdn.xitu.io/2018/4/12/162b9b7aa8c2779e?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"></p><hr><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><blockquote><p>æœ€è¿‘åœ¨å­¦ä¹ Kotlinï¼Œç”±äºGoogleç²‘ç²‘æŠŠè¿™ä¸€è¯­è¨€ææºä¸ºå®˜æ–¹æŒ‡å®šï¼Œå¹¶ä¸”å¯¹äºç§»åŠ¨ç«¯ç­‰å¼€å‘å¾—å¤©ç‹¬åšçš„ä¼˜åŠ¿ï¼Œä½œä¸ºä¸€åAndroidDeveloperå­¦ä¹ Kotlinæ˜¯å¿…è¦çš„ã€‚<br>å½“åˆåœ¨å­¦ä¹ Javaæ—¶å¯¹å•ä¾‹æ¨¡å¼çš„å…­ç§ä¹¦å†™ä¸åº”ç”¨è®°å¿†æ·±åˆ»<br>æ‰€ä»¥è¿™æ¬¡å¯¹ä¸åŒå•ä¾‹æ¨¡å¼çš„Javaä¸Kotlinå®ç°è¿›è¡Œäº†åˆ†åˆ«æ¢è®¨ã€‚</p></blockquote><p>å…­ç§æ¨¡å¼å¦‚ä¸‹ï¼š</p><ul><li>é¥¿æ±‰æ¨¡å¼</li><li>æ‡’æ±‰æ¨¡å¼</li><li>çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰æ¨¡å¼</li><li>åŒé‡æ ¡éªŒé”å¼</li><li>é™æ€å†…éƒ¨ç±»å¼</li><li>æšä¸¾å¼</li></ul><hr><h1 id="é¥¿æ±‰æ¨¡å¼ï¼šstatic-final-field"><a href="#é¥¿æ±‰æ¨¡å¼ï¼šstatic-final-field" class="headerlink" title="é¥¿æ±‰æ¨¡å¼ï¼šstatic final field"></a>é¥¿æ±‰æ¨¡å¼ï¼šstatic final field</h1><p>é¥¿æ±‰å¼å…¶å®æ˜¯ä¸€ç§æ¯”è¾ƒå½¢è±¡çš„ç§°è°“ã€‚æ—¢ç„¶é¥¿ï¼Œé‚£ä¹ˆåœ¨åˆ›å»ºå¯¹è±¡å®ä¾‹çš„æ—¶å€™å°±æ¯”è¾ƒç€æ€¥ï¼Œé¥¿äº†å˜›ï¼Œäºæ˜¯åœ¨è£…è½½ç±»çš„æ—¶å€™å°±åˆ›å»ºå¯¹è±¡å®ä¾‹ã€‚<br>è¿™ç§æ–¹æ³•éå¸¸ç®€å•ï¼Œå› ä¸ºå•ä¾‹çš„å®ä¾‹è¢«å£°æ˜æˆ static å’Œ final å˜é‡äº†ï¼Œåœ¨ç¬¬ä¸€æ¬¡åŠ è½½ç±»åˆ°å†…å­˜ä¸­æ—¶å°±ä¼šåˆå§‹åŒ–ï¼Œæ‰€ä»¥åˆ›å»ºå®ä¾‹æœ¬èº«æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Javaå®ç°</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span>&#123;</div><div class="line"><span class="comment">//ç±»åŠ è½½æ—¶å°±åˆå§‹åŒ–</span></div><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton instance = <span class="keyword">new</span> Singleton();</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</div><div class="line"><span class="keyword">return</span> instance;</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>Kotlinå¼•å…¥äº† <code>object</code>ç±»å‹ï¼Œå¯ä»¥å¾ˆå®¹æ˜“å£°æ˜å•ä¾‹æ¨¡å¼<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Kotlinå®ç°</span></div><div class="line"><span class="keyword">object</span> Singleton</div></pre></td></tr></table></figure></p><p>è¿™ç§æ–¹å¼å’Œ Java å•ä¾‹æ¨¡å¼çš„é¥¿æ±‰å¼ä¸€æ ·ï¼Œä¸è¿‡æ¯” Java ä¸­çš„å®ç°ä»£ç é‡å°‘å¾ˆå¤šï¼Œå…¶å®æ˜¯ä¸ªè¯­æ³•ç³–ï¼ˆKotlinæ¼«å±±éé‡éƒ½æ˜¯è¯­æ³•ç³–ï¼‰ã€‚åç¼–è¯‘ç”Ÿæˆçš„ class æ–‡ä»¶åå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton INSTANCE = <span class="keyword">null</span>;</div><div class="line">    <span class="keyword">static</span> &#123;</div><div class="line">        Singleton singleton = <span class="keyword">new</span> Singleton();</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;</div><div class="line">        INSTANCE = <span class="keyword">this</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>ä»åç¼–è¯‘çš„ä»£ç å¯ä»¥çœ‹å‡º object å¯¹è±¡å®é™…ä¸Šè¿˜æ˜¯åˆ©ç”¨äº† INSTANCE é™æ€å˜é‡ï¼Œä½†æ˜¯åœ¨Javaå’ŒKotlinæ··ç¼–æ—¶ï¼ŒJavaä»£ç ä¸­è°ƒç”¨åˆ™éœ€è¦æ³¨æ„ï¼Œä½¿ç”¨å¦‚ä¸‹<code>Singleton.INSTANCE.test()</code>,Kolintä¸­è°ƒç”¨æ—¶åªéœ€è¦ä½¿ç”¨<code>Singleton.test()</code>ã€‚<br>è¿™ç§å®ç°æ–¹å¼åœ¨ç±»åŠ è½½æ—¶å°±åˆ›å»ºäº†å•ä¾‹å¯¹è±¡ï¼Œæ‰€ä»¥è‚¯å®šæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰é¥¿æ±‰å¼å®ç°æ–¹å¼çš„é—®é¢˜ï¼š</p><ul><li>å¦‚æœæ„é€ æ–¹æ³•ä¸­æœ‰è€—æ—¶æ“ä½œçš„è¯ï¼Œä¼šå¯¼è‡´è¿™ä¸ªç±»çš„åŠ è½½æ¯”è¾ƒæ…¢ã€‚</li><li>é¥¿æ±‰å¼ä¸€å¼€å§‹å°±åˆ›å»ºå®ä¾‹ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰è°ƒç”¨ï¼Œä¼šé€ æˆèµ„æºæµªè´¹ã€‚</li><li>è¿˜æœ‰ä¸€ä¸ª Java é¥¿æ±‰å¼å•ä¾‹æ¨¡å¼æ²¡æœ‰çš„é—®é¢˜ï¼šæ— æ³•è‡ªå®šä¹‰æ„é€ å‡½æ•°ï¼Œobject ä¸­ä¸å…è®¸ constructor å‡½æ•°ã€‚</li></ul><h1 id="æ‡’æ±‰æ¨¡å¼ï¼šçº¿ç¨‹ä¸å®‰å…¨"><a href="#æ‡’æ±‰æ¨¡å¼ï¼šçº¿ç¨‹ä¸å®‰å…¨" class="headerlink" title="æ‡’æ±‰æ¨¡å¼ï¼šçº¿ç¨‹ä¸å®‰å…¨"></a>æ‡’æ±‰æ¨¡å¼ï¼šçº¿ç¨‹ä¸å®‰å…¨</h1><p>æ‡’æ±‰å¼å…¶å®æ˜¯ä¸€ç§æ¯”è¾ƒå½¢è±¡çš„ç§°è°“ã€‚æ—¢ç„¶æ‡’ï¼Œé‚£ä¹ˆåœ¨åˆ›å»ºå¯¹è±¡å®ä¾‹çš„æ—¶å€™å°±ä¸ç€æ€¥ã€‚ä¼šä¸€ç›´ç­‰åˆ°é©¬ä¸Šè¦ä½¿ç”¨å¯¹è±¡å®ä¾‹çš„æ—¶å€™æ‰ä¼šåˆ›å»ºï¼Œæ‡’äººå˜›ï¼Œæ€»æ˜¯æ¨è„±ä¸å¼€çš„æ—¶å€™æ‰ä¼šçœŸæ­£å»æ‰§è¡Œå·¥ä½œï¼Œå› æ­¤åœ¨è£…è½½å¯¹è±¡çš„æ—¶å€™ä¸åˆ›å»ºå¯¹è±¡å®ä¾‹ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Javaå®ç°</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span>&#123;</div><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> Singleton instance;</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</div><div class="line"><span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</div><div class="line">instance = <span class="keyword">new</span> Singleton()ï¼›</div><div class="line">&#125;</div><div class="line"><span class="keyword">return</span> instance;</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>è¿™æ®µä»£ç ç®€å•æ˜äº†ï¼Œè€Œä¸”ä½¿ç”¨äº†æ‡’åŠ è½½æ¨¡å¼ï¼Œä½†æ˜¯å´å­˜åœ¨è‡´å‘½çš„é—®é¢˜ã€‚å½“æœ‰å¤šä¸ªçº¿ç¨‹å¹¶è¡Œè°ƒç”¨ getInstance() çš„æ—¶å€™ï¼Œå°±ä¼šåˆ›å»ºå¤šä¸ªå®ä¾‹ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨å¤šçº¿ç¨‹ä¸‹ä¸èƒ½æ­£å¸¸å·¥ä½œã€‚<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Kotlin</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> <span class="keyword">private</span> <span class="keyword">constructor</span></span>()&#123;</div><div class="line">    <span class="keyword">companion</span> <span class="keyword">object</span>&#123;</div><div class="line">        <span class="keyword">private</span> <span class="keyword">var</span> instance : Singleton? = <span class="literal">null</span></div><div class="line">        <span class="keyword">get</span>()&#123;</div><div class="line">            <span class="keyword">if</span>(field == <span class="literal">null</span>)&#123;</div><div class="line">                field = Singleton()</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> field</div><div class="line">        &#125; </div><div class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">get</span><span class="params">()</span></span>:Singleton&#123;</div><div class="line">            <span class="keyword">return</span> instance!!</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°åœ¨Kotlinå®ç°ä¸­ï¼Œæˆ‘ä»¬è®©å…¶<strong>ä¸»æ„é€ å‡½æ•°ç§æœ‰åŒ–</strong>å¹¶è‡ªå®šä¹‰äº†å…¶<strong>å±æ€§è®¿é—®å™¨</strong>ï¼Œå…¶ä½™å†…å®¹å¤§åŒå°å¼‚ã€‚</p><ul><li>å¦‚æœä¸æ¸…æ¥šKotlinæ„é€ å‡½æ•°çš„ä½¿ç”¨æ–¹å¼ã€‚è¯·ç‚¹å‡» - - - <a href="https://link.juejin.im?target=https%3A%2F%2Fwww.kotlincn.net%2Fdocs%2Freference%2Fclasses.html" target="_blank" rel="external">æ„é€ å‡½æ•°</a></li><li>ä¸æ¸…æ¥šKotlinçš„å±æ€§ä¸è®¿é—®å™¨ï¼Œè¯·ç‚¹å‡» - - -<a href="https://link.juejin.im?target=https%3A%2F%2Fwww.kotlincn.net%2Fdocs%2Freference%2Fproperties.html" target="_blank" rel="external">å±æ€§å’Œå­—æ®µ</a></li></ul><h1 id="çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰æ¨¡å¼"><a href="#çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰æ¨¡å¼" class="headerlink" title="çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰æ¨¡å¼"></a>çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰æ¨¡å¼</h1><p>ä¸ºäº†è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯å°†æ•´ä¸ª getInstance() æ–¹æ³•è®¾ä¸ºåŒæ­¥ï¼ˆsynchronizedï¼‰ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Javaå®ç°</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span>&#123;</div><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> Singleton instance;</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</div><div class="line"><span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</div><div class="line">instance = <span class="keyword">new</span> Singleton()ï¼›</div><div class="line">&#125;</div><div class="line"><span class="keyword">return</span> instance;</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>è™½ç„¶åšåˆ°äº†çº¿ç¨‹å®‰å…¨ï¼Œå¹¶ä¸”è§£å†³äº†å¤šå®ä¾‹çš„é—®é¢˜ï¼Œä½†æ˜¯å®ƒå¹¶ä¸é«˜æ•ˆã€‚å› ä¸ºåœ¨ä»»ä½•æ—¶å€™åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨ getInstance() æ–¹æ³•ã€‚ä½†æ˜¯åŒæ­¥æ“ä½œåªéœ€è¦åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶æ‰è¢«éœ€è¦ï¼Œå³ç¬¬ä¸€æ¬¡åˆ›å»ºå•ä¾‹å®ä¾‹å¯¹è±¡æ—¶ã€‚è¿™å°±å¼•å‡ºäº†åŒé‡æ£€éªŒé”ã€‚<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Kotlin</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> <span class="keyword">private</span> <span class="keyword">constructor</span></span>() &#123;</div><div class="line">    <span class="keyword">companion</span> <span class="keyword">object</span> &#123;</div><div class="line">        <span class="keyword">private</span> <span class="keyword">var</span> instance: Singleton? = <span class="literal">null</span></div><div class="line">            <span class="keyword">get</span>() &#123;</div><div class="line">                <span class="keyword">if</span> (field == <span class="literal">null</span>) &#123;</div><div class="line">                    field = Singleton()</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">return</span> field</div><div class="line">            &#125;</div><div class="line">        <span class="meta">@Synchronized</span></div><div class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">get</span><span class="params">()</span></span>: Singleton&#123;</div><div class="line">            <span class="keyword">return</span> instance!!</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>å¤§å®¶éƒ½çŸ¥é“åœ¨ä½¿ç”¨æ‡’æ±‰å¼ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼Œéœ€è¦ä½¿ç”¨åŒæ­¥é”ï¼Œåœ¨Kotlinä¸­ï¼Œå¦‚æœä½ éœ€è¦å°†æ–¹æ³•å£°æ˜ä¸ºåŒæ­¥ï¼Œéœ€è¦æ·»åŠ  <strong>@Synchronized</strong> æ³¨è§£</p><h1 id="åŒé‡æ ¡éªŒé”å¼"><a href="#åŒé‡æ ¡éªŒé”å¼" class="headerlink" title="åŒé‡æ ¡éªŒé”å¼"></a>åŒé‡æ ¡éªŒé”å¼</h1><p>åŒé‡æ£€éªŒé”æ¨¡å¼ï¼ˆdouble checked locking patternï¼‰ï¼Œæ˜¯ä¸€ç§ä½¿ç”¨åŒæ­¥å—åŠ é”çš„æ–¹æ³•ã€‚ç¨‹åºå‘˜ç§°å…¶ä¸ºåŒé‡æ£€æŸ¥é”ï¼Œå› ä¸ºä¼šæœ‰ä¸¤æ¬¡æ£€æŸ¥ instance == nullï¼Œä¸€æ¬¡æ˜¯åœ¨åŒæ­¥å—å¤–ï¼Œä¸€æ¬¡æ˜¯åœ¨åŒæ­¥å—å†…ã€‚ä¸ºä»€ä¹ˆåœ¨åŒæ­¥å—å†…è¿˜è¦å†æ£€éªŒä¸€æ¬¡ï¼Ÿå› ä¸ºå¯èƒ½ä¼šæœ‰å¤šä¸ªçº¿ç¨‹ä¸€èµ·è¿›å…¥åŒæ­¥å—å¤–çš„ ifï¼Œå¦‚æœåœ¨åŒæ­¥å—å†…ä¸è¿›è¡ŒäºŒæ¬¡æ£€éªŒçš„è¯å°±ä¼šç”Ÿæˆå¤šä¸ªå®ä¾‹äº†ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Javaå®ç°</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span>&#123;</div><div class="line"><span class="comment">/**</span></div><div class="line"> * volatileä¿è¯äº†ï¼š</div><div class="line"> * 1.instanceå†å¤šçº¿ç¨‹ä¸‹çš„å¹¶å‘å¯è§æ€§</div><div class="line"> * 2.ç¦æ­¢instanceåœ¨æ“ä½œæ—¶çš„æŒ‡ä»¤é‡æ’åº</div><div class="line"> */</div><div class="line"><span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">null</span>;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getIntance</span><span class="params">()</span></span>&#123;</div><div class="line"><span class="comment">//ç¬¬ä¸€æ¬¡åˆ¤ç©ºï¼Œä¿è¯ä¸å¿…è¦çš„åŒæ­¥</span></div><div class="line"><span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</div><div class="line"><span class="comment">//synchronizedå¯¹SingletonåŠ å…¨å±€é”ï¼Œä¿è¯æ¯æ¬¡åªè¦ä¸€ä¸ªçº¿ç¨‹åˆ›å»ºå®ä¾‹</span></div><div class="line"><span class="keyword">synchronized</span>(Singleton.class)&#123;</div><div class="line"><span class="comment">//ç¬¬äºŒæ¬¡åˆ¤ç©ºæ—¶ä¸ºäº†åœ¨nullçš„æƒ…å†µä¸‹åˆ›å»ºå®ä¾‹</span></div><div class="line"><span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</div><div class="line">instance = <span class="keyword">new</span> Singleton();</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">return</span> instance;</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>æœ‰äº›äººè®¤ä¸ºä½¿ç”¨ volatile çš„åŸå› æ˜¯å¯è§æ€§ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥ä¿è¯çº¿ç¨‹åœ¨æœ¬åœ°ä¸ä¼šå­˜æœ‰ instance çš„å‰¯æœ¬ï¼Œæ¯æ¬¡éƒ½æ˜¯å»ä¸»å†…å­˜ä¸­è¯»å–ã€‚ä½†å…¶å®æ˜¯ä¸å¯¹çš„ã€‚<strong>ä½¿ç”¨ volatile çš„ä¸»è¦åŸå› æ˜¯å…¶å¦ä¸€ä¸ªç‰¹æ€§ï¼šç¦æ­¢æŒ‡ä»¤é‡æ’åºä¼˜åŒ–ã€‚</strong>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>åœ¨ volatile å˜é‡çš„èµ‹å€¼æ“ä½œåé¢ä¼šæœ‰ä¸€ä¸ªå†…å­˜å±éšœï¼ˆç”Ÿæˆçš„æ±‡ç¼–ä»£ç ä¸Šï¼‰ï¼Œè¯»æ“ä½œä¸ä¼šè¢«é‡æ’åºåˆ°å†…å­˜å±éšœä¹‹å‰</strong>ã€‚æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œå–æ“ä½œå¿…é¡»åœ¨æ‰§è¡Œå®Œ 1-2-3 ä¹‹åæˆ–è€… 1-3-2 ä¹‹åï¼Œä¸å­˜åœ¨æ‰§è¡Œåˆ° 1-3 ç„¶åå–åˆ°å€¼çš„æƒ…å†µã€‚</p><ul><li>ä»ã€Œå…ˆè¡Œå‘ç”ŸåŸåˆ™ã€çš„è§’åº¦ç†è§£çš„è¯ï¼Œå°±æ˜¯å¯¹äºä¸€ä¸ª volatile å˜é‡çš„å†™æ“ä½œéƒ½å…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹è¿™ä¸ªå˜é‡çš„è¯»æ“ä½œï¼ˆè¿™é‡Œçš„â€œåé¢â€æ˜¯æ—¶é—´ä¸Šçš„å…ˆåé¡ºåºï¼‰ã€‚</li></ul><p>ä½†æ˜¯ç‰¹åˆ«æ³¨æ„åœ¨ Java 5 ä»¥å‰çš„ç‰ˆæœ¬ä½¿ç”¨äº† volatile çš„åŒæ£€é”è¿˜æ˜¯æœ‰é—®é¢˜çš„ã€‚å…¶åŸå› æ˜¯ Java 5 ä»¥å‰çš„ JMM ï¼ˆJava å†…å­˜æ¨¡å‹ï¼‰æ˜¯å­˜åœ¨ç¼ºé™·çš„ï¼Œå³æ—¶å°†å˜é‡å£°æ˜æˆ volatile ä¹Ÿä¸èƒ½å®Œå…¨é¿å…é‡æ’åºï¼Œä¸»è¦æ˜¯ volatile å˜é‡å‰åçš„ä»£ç ä»ç„¶å­˜åœ¨é‡æ’åºé—®é¢˜ã€‚è¿™ä¸ª volatile å±è”½é‡æ’åºçš„é—®é¢˜åœ¨ Java 5 ä¸­æ‰å¾—ä»¥ä¿®å¤ï¼Œæ‰€ä»¥åœ¨è¿™ä¹‹åæ‰å¯ä»¥æ”¾å¿ƒä½¿ç”¨ volatileã€‚</p><p>ç›¸ä¿¡ä½ ä¸ä¼šå–œæ¬¢è¿™ç§å¤æ‚åˆéšå«é—®é¢˜çš„æ–¹å¼ï¼Œå½“ç„¶æˆ‘ä»¬æœ‰æ›´å¥½çš„å®ç°çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼çš„åŠæ³•ã€‚<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Kotlinå®ç°</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> <span class="keyword">private</span> <span class="keyword">constructor</span></span>()&#123;</div><div class="line">    <span class="keyword">companion</span> <span class="keyword">object</span>&#123;</div><div class="line">        <span class="keyword">val</span> instance: Singleton <span class="keyword">by</span> lazy(mode = LazyThreadSafetyMode.SYNCHRONIZED)&#123;</div><div class="line">            SingletonDemo()</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>å“‡ï¼å°ä¼™ä¼´ä»¬æƒŠå–œä¸ï¼Œæ„Ÿä¸æ„ŸåŠ¨å•Šã€‚æˆ‘ä»¬å±…ç„¶å‡ è¡Œä»£ç å°±å®ç°äº†å¤šè¡Œçš„Javaä»£ç ã€‚å…¶ä¸­æˆ‘ä»¬è¿ç”¨åˆ°äº†Kotlinçš„<strong>å»¶è¿Ÿå±æ€§ Lazy</strong>ã€‚</p><p><strong>Lazy</strong>æ˜¯æ¥å—ä¸€ä¸ª lambda å¹¶è¿”å›ä¸€ä¸ª Lazy å®ä¾‹çš„å‡½æ•°ï¼Œè¿”å›çš„å®ä¾‹å¯ä»¥ä½œä¸ºå®ç°å»¶è¿Ÿå±æ€§çš„å§”æ‰˜ï¼š ç¬¬ä¸€æ¬¡è°ƒç”¨ get() ä¼šæ‰§è¡Œå·²ä¼ é€’ç»™ lazy() çš„ lambda è¡¨è¾¾å¼å¹¶è®°å½•ç»“æœï¼Œ åç»­è°ƒç”¨ get() åªæ˜¯è¿”å›è®°å½•çš„ç»“æœã€‚</p><p>è¿™é‡Œè¿˜æœ‰æœ‰ä¸¤ä¸ªé¢å¤–çš„çŸ¥è¯†ç‚¹ã€‚</p><ul><li><a href="https://link.juejin.im?target=https%3A%2F%2Fwww.kotlincn.net%2Fdocs%2Freference%2Flambdas.html" target="_blank" rel="external">é«˜é˜¶å‡½æ•°</a></li><li><a href="https://link.juejin.im?target=https%3A%2F%2Fwww.kotlincn.net%2Fdocs%2Freference%2Fdelegated-properties.html" target="_blank" rel="external">å§”æ‰˜å±æ€§</a></li></ul><p>å¦‚æœä½ äº†è§£ä»¥ä¸ŠçŸ¥è¯†ç‚¹ï¼Œæˆ‘ä»¬ç›´æ¥æ¥çœ‹Lazyçš„å†…éƒ¨å®ç°ã€‚</p><ul><li>Lazyå†…éƒ¨å®ç°</li></ul><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">fun</span> <span class="type">&lt;T&gt;</span> <span class="title">lazy</span><span class="params">(mode: <span class="type">LazyThreadSafetyMode</span>, initializer: ()</span></span> -&gt; T): Lazy&lt;T&gt; =</div><div class="line">        <span class="keyword">when</span> (mode) &#123;</div><div class="line">            LazyThreadSafetyMode.SYNCHRONIZED -&gt; SynchronizedLazyImpl(initializer)</div><div class="line">            LazyThreadSafetyMode.PUBLICATION -&gt; SafePublicationLazyImpl(initializer)</div><div class="line">            LazyThreadSafetyMode.NONE -&gt; UnsafeLazyImpl(initializer)</div><div class="line">        &#125;</div></pre></td></tr></table></figure><p>è§‚å¯Ÿä¸Šè¿°ä»£ç ï¼Œå› ä¸ºæˆ‘ä»¬ä¼ å…¥çš„<strong>mode = LazyThreadSafetyMode.SYNCHRONIZED</strong>ï¼Œ é‚£ä¹ˆä¼šç›´æ¥èµ° SynchronizedLazyImplï¼Œæˆ‘ä»¬ç»§ç»­è§‚å¯ŸSynchronizedLazyImplã€‚</p><ul><li>Lazyæ¥å£</li></ul><p>SynchronizedLazyImplå®ç°äº†Lazyæ¥å£ï¼ŒLazyå…·ä½“æ¥å£å¦‚ä¸‹ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Lazy</span>&lt;<span class="type">out T</span>&gt; </span>&#123;</div><div class="line">     <span class="comment">//å½“å‰å®ä¾‹åŒ–å¯¹è±¡ï¼Œä¸€æ—¦å®ä¾‹åŒ–åï¼Œè¯¥å¯¹è±¡ä¸ä¼šå†æ”¹å˜</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">val</span> value: T</div><div class="line">    <span class="comment">//è¿”å›trueè¡¨ç¤ºï¼Œå·²ç»å»¶è¿Ÿå®ä¾‹åŒ–è¿‡äº†ï¼Œfalse è¡¨ç¤ºï¼Œæ²¡æœ‰è¢«å®ä¾‹åŒ–ï¼Œ</span></div><div class="line">    <span class="comment">//ä¸€æ—¦æ–¹æ³•è¿”å›trueï¼Œè¯¥æ–¹æ³•ä¼šä¸€ç›´è¿”å›true,ä¸”ä¸ä¼šå†ç»§ç»­å®ä¾‹åŒ–</span></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">fun</span> <span class="title">isInitialized</span><span class="params">()</span></span>: <span class="built_in">Boolean</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><p>ç»§ç»­æŸ¥çœ‹SynchronizedLazyImplï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š</p><ul><li>SynchronizedLazyImplå†…éƒ¨å®ç°</li></ul><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">SynchronizedLazyImpl</span>&lt;<span class="type">out T</span>&gt;</span>(initializer: () -&gt; T, lock: Any? = <span class="literal">null</span>) : Lazy&lt;T&gt;, Serializable &#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">var</span> initializer: (() -&gt; T)? = initializer</div><div class="line">    <span class="meta">@Volatile</span> <span class="keyword">private</span> <span class="keyword">var</span> _value: Any? = UNINITIALIZED_VALUE</div><div class="line">    <span class="comment">// final field is required to enable safe publication of constructed instance</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">val</span> lock = lock ?: <span class="keyword">this</span></div><div class="line"></div><div class="line">    <span class="keyword">override</span> <span class="keyword">val</span> value: T</div><div class="line">        <span class="keyword">get</span>() &#123;</div><div class="line">            <span class="keyword">val</span> _v1 = _value</div><div class="line">            <span class="comment">//åˆ¤æ–­æ˜¯å¦å·²ç»åˆå§‹åŒ–è¿‡ï¼Œå¦‚æœåˆå§‹åŒ–è¿‡ç›´æ¥è¿”å›ï¼Œä¸åœ¨è°ƒç”¨é«˜çº§å‡½æ•°å†…éƒ¨é€»è¾‘</span></div><div class="line">            <span class="keyword">if</span> (_v1 !== UNINITIALIZED_VALUE) &#123;</div><div class="line">                <span class="meta">@Suppress(<span class="meta-string">"UNCHECKED_CAST"</span>)</span></div><div class="line">                <span class="keyword">return</span> _v1 <span class="keyword">as</span> T</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="keyword">return</span> synchronized(lock) &#123;</div><div class="line">                <span class="keyword">val</span> _v2 = _value</div><div class="line">                <span class="keyword">if</span> (_v2 !== UNINITIALIZED_VALUE) &#123;</div><div class="line">                    <span class="meta">@Suppress(<span class="meta-string">"UNCHECKED_CAST"</span>)</span> (_v2 <span class="keyword">as</span> T)</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">else</span> &#123;</div><div class="line">                    <span class="keyword">val</span> typedValue = initializer!!()<span class="comment">//è°ƒç”¨é«˜çº§å‡½æ•°è·å–å…¶è¿”å›å€¼</span></div><div class="line">                    _value = typedValue   <span class="comment">//å°†è¿”å›å€¼èµ‹å€¼ç»™_value,ç”¨äºä¸‹æ¬¡åˆ¤æ–­æ—¶ï¼Œç›´æ¥è¿”å›é«˜çº§å‡½æ•°çš„è¿”å›å€¼</span></div><div class="line">                    initializer = <span class="literal">null</span></div><div class="line">                    typedValue  </div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"><span class="comment">//çœç•¥éƒ¨åˆ†ä»£ç </span></div><div class="line">&#125;</div></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šè¿°ä»£ç ï¼Œæˆ‘ä»¬å‘ç° SynchronizedLazyImpl è¦†ç›–äº†Lazyæ¥å£çš„valueå±æ€§ï¼Œå¹¶ä¸”é‡æ–°äº†å…¶å±æ€§è®¿é—®å™¨ã€‚å…¶å…·ä½“é€»è¾‘ä¸Javaçš„åŒé‡æ£€éªŒæ˜¯ç±»ä¼¼çš„ã€‚</p><p>åˆ°é‡Œè¿™é‡Œå…¶å®å¤§å®¶è¿˜æ˜¯è‚¯å®šæœ‰ç–‘é—®ï¼Œæˆ‘è¿™é‡Œ<strong>åªæ˜¯å®ä¾‹åŒ–äº†SynchronizedLazyImplå¯¹è±¡ï¼Œå¹¶æ²¡æœ‰è¿›è¡Œå€¼çš„è·å–ï¼Œå®ƒæ˜¯æ€ä¹ˆæ‹¿åˆ°é«˜é˜¶å‡½æ•°çš„è¿”å›å€¼å‘¢ï¼Ÿ</strong>ã€‚è¿™é‡Œåˆæ¶‰åŠåˆ°äº†<strong>å§”æ‰˜å±æ€§</strong>ã€‚</p><p>å§”æ‰˜å±æ€§è¯­æ³•æ˜¯ï¼š val/var &lt;å±æ€§å&gt;: &lt;ç±»å‹&gt; by &lt;è¡¨è¾¾å¼&gt;ã€‚åœ¨ by åé¢çš„è¡¨è¾¾å¼æ˜¯è¯¥ å§”æ‰˜ï¼Œ å› ä¸ºå±æ€§å¯¹åº”çš„ get()ï¼ˆå’Œ set()ï¼‰ä¼šè¢«å§”æ‰˜ç»™å®ƒçš„ getValue() å’Œ setValue() æ–¹æ³•ã€‚ å±æ€§çš„å§”æ‰˜ä¸å¿…å®ç°ä»»ä½•çš„æ¥å£ï¼Œä½†æ˜¯éœ€è¦æä¾›ä¸€ä¸ª getValue() å‡½æ•°ï¼ˆå’Œ setValue()â€”â€”å¯¹äº var å±æ€§ï¼‰ã€‚</p><p>è€ŒLazy.ktæ–‡ä»¶ä¸­ï¼Œå£°æ˜äº†Lazyæ¥å£çš„getValueæ‰©å±•å‡½æ•°ã€‚æ•…åœ¨æœ€ç»ˆèµ‹å€¼çš„æ—¶å€™ä¼šè°ƒç”¨è¯¥æ–¹æ³•ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">@kotlin.internal.InlineOnly</div><div class="line">//è¿”å›åˆå§‹åŒ–çš„å€¼ã€‚</div><div class="line">public inline operator fun &lt;T&gt; Lazy&lt;T&gt;.getValue(thisRef: Any?, property: KProperty&lt;*&gt;): T = value</div></pre></td></tr></table></figure><h1 id="é™æ€å†…éƒ¨ç±»å¼"><a href="#é™æ€å†…éƒ¨ç±»å¼" class="headerlink" title="é™æ€å†…éƒ¨ç±»å¼"></a>é™æ€å†…éƒ¨ç±»å¼</h1><p>è¿™ç§æ–¹æ³•ä¹Ÿæ˜¯ã€ŠEffective Javaã€‹ä¸Šæ‰€æ¨èçš„ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Javaå®ç°</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span>&#123;</div><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonHolder</span></span>&#123;</div><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton INSTANCE = <span class="keyword">new</span> Singleton();</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</div><div class="line"><span class="keyword">return</span> SingletonHolder.INSTANCE;</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>è¿™ç§å†™æ³•ä»ç„¶ä½¿ç”¨JVMæœ¬èº«æœºåˆ¶ä¿è¯äº†çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ã€‚ç”±äºé™æ€å•ä¾‹å¯¹è±¡æ²¡æœ‰ä½œä¸ºSingletonçš„æˆå‘˜å˜é‡ç›´æ¥å®ä¾‹åŒ–ï¼Œå› æ­¤ç±»åŠ è½½æ—¶ä¸ä¼šå®ä¾‹åŒ–Singletonï¼Œ<strong>ç¬¬ä¸€æ¬¡è°ƒç”¨getInstance()æ—¶å°†å†…éƒ¨ç±»SingletonHodler</strong>ï¼Œåœ¨è¯¥å†…éƒ¨ç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªstaticç±»å‹çš„å˜é‡INSTANCEï¼Œæ­¤æ—¶ä¼šé¦–å…ˆåˆå§‹åŒ–è¿™ä¸ªæˆå‘˜å˜é‡ï¼Œç”±Javaè™šæ‹Ÿæœºæ¥ä¿è¯å…¶çº¿ç¨‹å®‰å…¨æ€§ï¼Œç¡®ä¿è¯¥æˆå‘˜å˜é‡åªèƒ½åˆå§‹åŒ–ä¸€æ¬¡ã€‚ç”±äºgetInstance()æ–¹æ³•æ²¡æœ‰ä»»ä½•çº¿ç¨‹é”å®šï¼Œå› æ­¤å…¶æ€§èƒ½ä¸ä¼šé€ æˆä»»ä½•å½±å“ã€‚</p><p>ç”±äºSingletonHodleræ˜¯ç§æœ‰çš„ï¼Œé™¤äº†getInstance()ä¹‹å¤–æ²¡æœ‰åŠæ³•è®¿é—®å®ƒï¼Œå› æ­¤å®ƒæ˜¯æ‡’æ±‰å¼çš„ï¼›åŒæ—¶è¯»å–å®ä¾‹çš„æ—¶å€™ä¸ä¼šè¿›è¡ŒåŒæ­¥ï¼Œæ²¡æœ‰æ€§èƒ½ç¼ºé™·ï¼›ä¹Ÿä¸ä¾èµ–JDKç‰ˆæœ¬ã€‚<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Kotlinå®ç°</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> <span class="keyword">private</span> <span class="keyword">constructor</span></span>() &#123;</div><div class="line">    <span class="keyword">companion</span> <span class="keyword">object</span> &#123;</div><div class="line">        <span class="keyword">val</span> instance = SingletonHolder.holder</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">object</span> SingletonHolder &#123;</div><div class="line">        <span class="keyword">val</span> holder= Singleton()</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><h1 id="æšä¸¾å¼ï¼šEnum"><a href="#æšä¸¾å¼ï¼šEnum" class="headerlink" title="æšä¸¾å¼ï¼šEnum"></a>æšä¸¾å¼ï¼šEnum</h1><p>ç”¨æšä¸¾å†™å•ä¾‹å®åœ¨å¤ªç®€å•äº†ï¼è¿™ä¹Ÿæ˜¯å®ƒæœ€å¤§çš„ä¼˜ç‚¹ã€‚ä¸‹é¢è¿™æ®µä»£ç å°±æ˜¯å£°æ˜æšä¸¾å®ä¾‹çš„é€šå¸¸åšæ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Javaå®ç°</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">enum</span> EasySingleton&#123;</div><div class="line">    INSTANCE;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡EasySingleton.INSTANCEæ¥è®¿é—®å®ä¾‹ï¼Œè¿™æ¯”è°ƒç”¨getInstance()æ–¹æ³•ç®€å•å¤šäº†ã€‚åˆ›å»ºæšä¸¾é»˜è®¤å°±æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦æ‹…å¿ƒdouble checked lockingï¼Œè€Œä¸”è¿˜èƒ½é˜²æ­¢ååºåˆ—åŒ–å¯¼è‡´é‡æ–°åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Kotlinå®ç°</span></div><div class="line"><span class="keyword">enum</span> <span class="class"><span class="keyword">class</span> <span class="title">EasySingleton</span></span>&#123;</div><div class="line">INSTANCE;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/4/12/162b9b7aa8c2779e?imageView2/0/w/1280/h/960/format/webp/ignore-error/1&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h1 id
      
    
    </summary>
    
    
      <category term="Java" scheme="https://edward7zhang.github.io/tags/Java/"/>
    
      <category term="Kotlin" scheme="https://edward7zhang.github.io/tags/Kotlin/"/>
    
  </entry>
  
  <entry>
    <title>è®°ä¸€æ¬¡å‘†è‹¥æœ¨é¸¡çš„é¢è¯•</title>
    <link href="https://edward7zhang.github.io/2018/04/24/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%91%86%E8%8B%A5%E6%9C%A8%E9%B8%A1%E7%9A%84%E9%9D%A2%E8%AF%95/"/>
    <id>https://edward7zhang.github.io/2018/04/24/è®°ä¸€æ¬¡å‘†è‹¥æœ¨é¸¡çš„é¢è¯•/</id>
    <published>2018-04-24T14:24:14.000Z</published>
    <updated>2018-04-24T14:52:45.817Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è®°å½•ä¸€é“å¾ˆç®€å•å¾ˆç®€å•çš„å…¥é—¨é¢˜â€¦æ ¸å¿ƒå°±æ˜¯ä¸€ä¸ªæˆ‘é«˜ä¸­å°±å­¦è¿‡çš„æ•°å­¦çŸ¥è¯†â€¦å‰ç§¯â€¦å¯æƒœå¹´ä¹…ä¸ç”¨â€¦åœ¨é¢è¯•çš„ç´§è¦å…³å¤´å°±æ˜¾å¾—å‘†è‹¥æœ¨é¸¡â€¦å¾ˆé—æ†¾æ²¡æœ‰è¡¨ç°å‡ºè‡ªå·±çš„çœŸå®æ°´å¹³â€¦</p></blockquote><pre><code>/* ** åœ¨ä¸€ä¸ªå¹³é¢ä¸­.ä»»æ„ä¸€ä¸ªç›´çº¿çº¿æ®µå¯ä»¥ç”±2ä¸ªç‚¹è¡¨ç¤º,ä»»æ„ä¸€ä¸ªç‚¹å¯ä»¥ç”±X,Yåæ ‡å€¼è¡¨ç¤º.*ä¾‹å¦‚çº¿æ®µ J ç”± ç‚¹A(x1, y1), B(x2, y2)è¡¨ç¤º. å…¶ä¸­åæ ‡å€¼ x,y éƒ½ä¸ºint. *æ±‚å†™å‡ºä¸€ä¸ªæ–¹æ³•, boolean checkIntersect(Line J, Line K); *æ£€æŸ¥åœ¨å¹³é¢ä¸­ç»™å‡ºçš„2ä¸ªçº¿æ®µæ˜¯å¦ç›¸äº¤, return true ä»£è¡¨çº¿æ®µç›¸äº¤, false ä¸ºä¸æƒ³äº¤. *è¯·è‡ªè¡Œå®šä¹‰çº¿æ®µLineçš„æ•°æ®ç»“æ„, å¹¶å¯ä»¥å‡è®¾ä¼ å…¥å‚æ•°Line J å’Œ Line K ä¸ºæœ‰æ•ˆè¾“å…¥. */</code></pre><hr><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> aiqyInterview;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CheckIntersect</span> </span>&#123;</div><div class="line"><span class="comment">/**</span></div><div class="line"> * </div><div class="line"> * <span class="doctag">@author</span> EdwardZhang</div><div class="line"> * åˆ¤æ–­çº¿æ®µç›¸äº¤ï¼š</div><div class="line"> * ä¸¤ä¸ªçº¿æ®µçš„äº¤ç‚¹ä¸ªæ•°å¯èƒ½æœ‰0ä¸ª 1ä¸ªæˆ–è€…æ— æ•°ä¸ª</div><div class="line"> * åˆ¤æ–­ä¸¤ä¸ªçº¿æ®µç›¸äº¤ï¼Œå¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ­¥éª¤ï¼š</div><div class="line"> * åˆ¤æ–­Aç‚¹Bç‚¹æ˜¯å¦åœ¨çº¿æ®µCDçš„ä¸¤ä¾§ï¼Œå³è®¡ç®—å‰ç§¯æ—¶å¼‚å·</div><div class="line"> * åˆ¤æ–­Cç‚¹å’ŒDç‚¹æ˜¯å¦åœ¨çº¿æ®µABçš„ä¸¤ä¾§ï¼Œå³è®¡ç®—å‰ç§¯æ—¶å¼‚å·</div><div class="line"> * ç„¶ååœ¨å¤„ç†ç‰¹æ®Šæƒ…å†µï¼Œå³ABCDå››ä¸ªç‚¹æœ‰è‡³å°‘ä¸‰ä¸ªç‚¹å…±çº¿çš„æƒ…å†µï¼Œ</div><div class="line"> * å³å‡ºç°å‰ç§¯ä¸ºé›¶çš„æƒ…å†µï¼Œå¦‚æœAç‚¹ä¸çº¿æ®µCDå…±çº¿ï¼Œ</div><div class="line"> * åˆ™è¦æŸ¥çœ‹Aç‚¹æ˜¯å¦åœ¨çº¿æ®µCDä¸Šï¼Œå…¶å®ƒæƒ…å†µä¾æ¬¡ç±»æ¨ã€‚</div><div class="line"> */</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</div><div class="line"><span class="keyword">int</span> x;</div><div class="line"><span class="keyword">int</span> y;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getX</span><span class="params">()</span> </span>&#123;</div><div class="line"><span class="keyword">return</span> x;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setX</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line"><span class="keyword">this</span>.x = x;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getY</span><span class="params">()</span> </span>&#123;</div><div class="line"><span class="keyword">return</span> y;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setY</span><span class="params">(<span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line"><span class="keyword">this</span>.y = y;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Line</span> </span>&#123;</div><div class="line">Point A = <span class="keyword">new</span> Point();</div><div class="line">Point B = <span class="keyword">new</span> Point();</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> Point <span class="title">getA</span><span class="params">()</span> </span>&#123;</div><div class="line"><span class="keyword">return</span> A;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setA</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</div><div class="line">A.x = i;</div><div class="line">A.y = j;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> Point <span class="title">getB</span><span class="params">()</span> </span>&#123;</div><div class="line"><span class="keyword">return</span> B;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setB</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</div><div class="line">B.x = i;</div><div class="line">B.y = j;</div><div class="line">&#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">float</span> <span class="title">direct</span><span class="params">(Point i, Point j, Point k)</span> </span>&#123; <span class="comment">// è®¡ç®—å‰ç§¯</span></div><div class="line"><span class="keyword">return</span> (k.x - i.x) * (j.y - i.y) - (j.x - i.x) * (k.y - i.y);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">onSegment</span><span class="params">(Point a, Point b, Point c)</span> </span>&#123; <span class="comment">// å…±çº¿æ—¶ï¼Œåˆ¤æ–­ç‚¹æ˜¯å¦è½åœ¨çº¿æ®µ</span></div><div class="line"><span class="keyword">float</span> minx = Math.min(a.x, b.x);</div><div class="line"><span class="keyword">float</span> maxx = Math.max(a.x, b.x);</div><div class="line"><span class="keyword">float</span> miny = Math.min(a.y, b.y);</div><div class="line"><span class="keyword">float</span> maxy = Math.max(a.y, b.y);</div><div class="line"><span class="keyword">if</span> (c.x &gt;= minx &amp;&amp; c.x &lt;= maxx &amp;&amp; c.y &gt;= miny &amp;&amp; c.y &lt;= maxy) &#123;</div><div class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">checkIntersect</span><span class="params">(Line X, Line Y)</span> </span>&#123;</div><div class="line"><span class="keyword">float</span> d1 = direct(Y.A, Y.B, X.A);</div><div class="line"><span class="keyword">float</span> d2 = direct(Y.A, Y.B, X.B);</div><div class="line"><span class="keyword">float</span> d3 = direct(X.A, X.B, Y.A);</div><div class="line"><span class="keyword">float</span> d4 = direct(X.A, X.B, Y.B);</div><div class="line"><span class="keyword">if</span> (d1 * d2 &lt; <span class="number">0</span> &amp;&amp; d3 * d4 &lt; <span class="number">0</span>)</div><div class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line"><span class="keyword">else</span> <span class="keyword">if</span> (d1 == <span class="number">0</span> &amp;&amp; onSegment(Y.A, Y.B, X.A))</div><div class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line"><span class="keyword">else</span> <span class="keyword">if</span> (d2 == <span class="number">0</span> &amp;&amp; onSegment(Y.A, Y.B, X.B))</div><div class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line"><span class="keyword">else</span> <span class="keyword">if</span> (d3 == <span class="number">0</span> &amp;&amp; onSegment(X.A, X.B, Y.A))</div><div class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line"><span class="keyword">else</span> <span class="keyword">if</span> (d4 == <span class="number">0</span> &amp;&amp; onSegment(X.A, X.B, Y.B))</div><div class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">CheckIntersect checkIntersect = <span class="keyword">new</span> CheckIntersect();</div><div class="line">Line a = checkIntersect.new Line();</div><div class="line">Line b = checkIntersect.new Line();</div><div class="line">a.setA(<span class="number">0</span>, <span class="number">0</span>);</div><div class="line">a.setB(<span class="number">2</span>, <span class="number">2</span>);</div><div class="line">b.setA(<span class="number">2</span>, <span class="number">0</span>);</div><div class="line">b.setB(<span class="number">0</span>, <span class="number">2</span>);</div><div class="line">System.out.println(checkIntersect(a,b));<span class="comment">//ç›¸äº¤ true</span></div><div class="line">a.setA(<span class="number">0</span>, <span class="number">0</span>);</div><div class="line">a.setB(<span class="number">2</span>, <span class="number">2</span>);</div><div class="line">b.setA(<span class="number">2</span>, <span class="number">0</span>);</div><div class="line">b.setB(<span class="number">1</span>, <span class="number">0</span>);</div><div class="line">System.out.println(checkIntersect(a,b));<span class="comment">//ç›¸ç¦» false</span></div><div class="line">a.setA(<span class="number">0</span>, <span class="number">0</span>);</div><div class="line">a.setB(<span class="number">2</span>, <span class="number">2</span>);</div><div class="line">b.setA(<span class="number">2</span>, <span class="number">0</span>);</div><div class="line">b.setB(<span class="number">4</span>, <span class="number">2</span>);</div><div class="line">System.out.println(checkIntersect(a,b));<span class="comment">//å¹³è¡Œ false</span></div><div class="line">a.setA(<span class="number">0</span>, <span class="number">0</span>);</div><div class="line">a.setB(<span class="number">2</span>, <span class="number">2</span>);</div><div class="line">b.setA(<span class="number">1</span>, <span class="number">1</span>);</div><div class="line">b.setB(<span class="number">3</span>, <span class="number">3</span>);</div><div class="line">System.out.println(checkIntersect(a,b));<span class="comment">//åœ¨ä¸€æ¡ç›´çº¿ä¸Š true</span></div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;è®°å½•ä¸€é“å¾ˆç®€å•å¾ˆç®€å•çš„å…¥é—¨é¢˜â€¦æ ¸å¿ƒå°±æ˜¯ä¸€ä¸ªæˆ‘é«˜ä¸­å°±å­¦è¿‡çš„æ•°å­¦çŸ¥è¯†â€¦å‰ç§¯â€¦å¯æƒœå¹´ä¹…ä¸ç”¨â€¦åœ¨é¢è¯•çš„ç´§è¦å…³å¤´å°±æ˜¾å¾—å‘†è‹¥æœ¨é¸¡â€¦å¾ˆé—æ†¾æ²¡æœ‰è¡¨ç°å‡ºè‡ªå·±çš„çœŸå®æ°´å¹³â€¦&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code&gt;/* *

* åœ¨ä¸€ä¸ªå¹³é¢ä¸­.ä»»æ„ä¸€ä¸ª
      
    
    </summary>
    
    
      <category term="Interview" scheme="https://edward7zhang.github.io/tags/Interview/"/>
    
      <category term="Inspire" scheme="https://edward7zhang.github.io/tags/Inspire/"/>
    
  </entry>
  
  <entry>
    <title>è®¡ç®—æœºç³»åº”å±Šç”Ÿæ±‚èŒæŒ‡åŒ—</title>
    <link href="https://edward7zhang.github.io/2018/04/19/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E5%BA%94%E5%B1%8A%E7%94%9F%E6%B1%82%E8%81%8C%E6%8C%87%E5%8C%97/"/>
    <id>https://edward7zhang.github.io/2018/04/19/è®¡ç®—æœºç³»åº”å±Šç”Ÿæ±‚èŒæŒ‡åŒ—/</id>
    <published>2018-04-19T01:07:14.000Z</published>
    <updated>2018-04-19T05:18:21.396Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä»Šå¤©æ—©æ™¨çœ‹åˆ°äº†Easyå¤§å¤§çš„è¿™ç¯‡æ–‡ç« ï¼Œåœ¨æ–‡ç« ä¸­è¯»åˆ°äº†è‡ªå·±çš„å½±å­ï¼Œå¹¶ä¸”ä¹Ÿæ˜ç™½äº†è¿™æ®µæ—¶é—´è‡ªå·±åœ¨å®ä¹ æ‹›è˜ä¸­çš„ä¸è¶³ï¼Œå—ç›ŠåŒªæµ…ã€‚å¸Œæœ›æˆ‘çš„å¥½å‹å¯ä»¥çœ‹åˆ°ä»ä¸­å—ç›Š<br>ç‰¹æ­¤è½¬è½½ Fromï¼š<a href="https://github.com/easychen/career-guide-for-cs-graduate" target="_blank" rel="external">https://github.com/easychen/career-guide-for-cs-graduate</a></p></blockquote><h1 id="è®¡ç®—æœºç³»åº”å±Šç”Ÿæ±‚èŒæŒ‡åŒ—"><a href="#è®¡ç®—æœºç³»åº”å±Šç”Ÿæ±‚èŒæŒ‡åŒ—" class="headerlink" title="è®¡ç®—æœºç³»åº”å±Šç”Ÿæ±‚èŒæŒ‡åŒ—"></a>è®¡ç®—æœºç³»åº”å±Šç”Ÿæ±‚èŒæŒ‡åŒ—</h1><p>æœ€è¿‘å¸®äº†ä¸€ä¸ªæœ‹å‹çš„æœ‹å‹åšäº†ä¸‹èŒä¸šè§„åˆ’ï¼Œç»“åˆä¹‹å‰åœ¨å¾®åšä¸Šçš„ä¸€äº›é—®ç­”ï¼Œè§‰å¾—ä¸å°‘åº”å±Šç”ŸåŒå­¦å¯¹æ±‚èŒæœ‰è›®å¤šè¯¯è§£çš„ï¼Œæ‰€ä»¥è¿™é‡Œåˆ†äº«ä¸‹æˆ‘çš„ä¸€ç‚¹ç»éªŒå§ã€‚è™½ç„¶æœ¬æ–‡é¢˜ä¸ºæŒ‡åŒ—ï¼Œä½†åªæ˜¯ä¸€ä¸ªé¢å‘å¯¹è¡Œä¸šã€å¯¹ä¸šç•ŒæŠ€æœ¯ä¸ç†Ÿæ‚‰çš„åŒå­¦çš„æ“ä½œæ‰‹å†Œã€‚å„ä½æŠ€æœ¯å¤§ç‰›å¯èƒ½è§‰å¾—ç²—æµ…ï¼Œè¯·è§è°…ã€‚</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ws1.sinaimg.cn/large/40dfde6fgy1fqh5iysqx1j20qy0f50xb.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure> <p>æœ¬æ–‡ç•¥é•¿ï¼Œä¼šè°ˆåŠä»¥ä¸‹é—®é¢˜ã€‚</p><ul><li>èŒä¸šè§„åˆ’è¶Šæ—©è¶Šå¥½</li><li>ä¸€å®šè¦çæƒœæ ¡æ‹›çš„æœºä¼šçª—å£</li><li>åº”å±Šç”Ÿçš„æ±‚èŒç­–ç•¥</li><li>æŠ€æœ¯èŒä½çš„é€‰æ‹©</li><li>è¯­è¨€å’ŒæŠ€æœ¯æ ˆçš„é€‰æ‹©</li><li>æŠ€æœ¯æ ˆçš„ä¼˜åŒ–</li><li>ç®€å†çš„ä¹¦å†™</li></ul><p>ä¸‹è¾¹æˆ‘ä»¬ä¸€ç‚¹ä¸€ç‚¹æ¥è®²ã€‚</p><blockquote><p>æœ¬æ–‡ä½œè€… @Easy ï¼ˆ <a href="http://weibo.com/easy" target="_blank" rel="external">weibo.com/easy</a> ï¼‰ï¼Œæ–¹ç³–å…¨æ ˆè¯¾ï¼ˆ <a href="http://quanzhanke.com" target="_blank" rel="external">quanzhanke.com</a> ï¼‰ä¸»è®²äººï¼Œæœ‰å¤šå¹´å¤§è§„æ¨¡ç½‘ç«™ã€äº‘å¹³å°å¼€å‘ç»éªŒã€æ›¾è¿è¥è¿‡ç”¨æˆ·æ•°åä¸‡çš„ç¨‹åºå‘˜æ‹å–å¹³å°ï¼Œä¸ºä¸Šåƒåç¨‹åºå‘˜æ‰¾è¿‡å·¥ä½œã€‚è½¬è½½è¯·ä¿ç•™ä»¥ä¸Šä½œè€…ä¿¡æ¯å’Œé“¾æ¥ï¼Œè°¢è°¢ã€‚</p></blockquote><p>å†…å®¹æ›´æ–°é€šçŸ¥</p><p>å¯å¾®ä¿¡æ‰«ç ï¼ˆæœªå…³æ³¨ç›´æ¥å…³æ³¨ï¼‰è®¢é˜…æœ¬æŒ‡åŒ—æ›´æ–°ã€‚</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ws1.sinaimg.cn/large/40dfde6fgy1fqh6g6fiauj20by0byq3p.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure> <h2 id="èŒä¸šè§„åˆ’è¶Šæ—©è¶Šå¥½"><a href="#èŒä¸šè§„åˆ’è¶Šæ—©è¶Šå¥½" class="headerlink" title="èŒä¸šè§„åˆ’è¶Šæ—©è¶Šå¥½"></a>èŒä¸šè§„åˆ’è¶Šæ—©è¶Šå¥½</h2><p>èŒä¸šæ˜¯ä¸€ä¸ªéå¸¸ç‰¹æ®Šçš„ä¸œè¥¿ï¼Œå®ƒæœ‰ä¸¤ç‚¹å¾ˆç‰¹åˆ«ï¼Œä¸€ä¸ªæ˜¯ã€Œä¸å¯é‡æ¥ã€ï¼Œå¦ä¸€ä¸ªæ˜¯ã€ŒéªŒè¯è€—æ—¶ã€ã€‚ä¹‹å‰å’Œä¸€ä¸ªè€å‹èŠå¤©ï¼Œä»–æ„Ÿå¹è¯´ï¼Œå›è¿‡å¤´çœ‹çœ‹ï¼Œè‡ªå·±çš„æ•´ä¸ªèŒä¸šè¿‡å¾—ä¹±ä¸ƒå…«ç³Ÿã€‚ç­‰åˆ°ç°åœ¨æ˜ç™½è¿™ç‚¹çš„æ—¶å€™ï¼Œå·²ç»æ¥ä¸åŠäº†ã€‚å› ä¸ºä¸€èˆ¬ä¸€æ®µèŒä¸šç»å†çŸ­åˆ™ä¸€åˆ°ä¸¤å¹´ï¼Œé•¿åˆ™ä¸‰åˆ°äº”å¹´ã€‚æ¢ä¸¤å®¶å…¬å¸ï¼Œåå¹´ä¸€æ™ƒå°±è¿‡å»äº†ã€‚å¦‚æœä½ åœ¨è¿™åå¹´ä¸­æ²¡æœ‰å¾ˆå¥½çš„æˆé•¿ï¼Œåˆä¸å¹¸èº«åœ¨æŸäº›å…¬å¸ï¼Œé‚£ä¸‰åå¤šå²å¯èƒ½å°±é¢ä¸´è¢«æ¸…é€€çš„å¤„å¢ƒäº†ã€‚</p><p>æˆ‘ä¸€èˆ¬ä¸å±‘äºå»å’Œåˆ«äººåˆ†äº«ä»€ä¹ˆäººç”Ÿç»éªŒï¼Œæ¯•ç«Ÿæœ‰äº›å‘ä¸è‡ªå·±è·³ä¸‹å»æ˜¯ä¸ä¼šç‰¢è®°åœ¨å¿ƒçš„ã€‚ä½†èŒä¸šçš„å‘ä¸ä¸€æ ·ï¼Œç­‰ä½ å‘ç°åœ¨å‘é‡Œæ—¶ï¼Œå¯èƒ½å·²ç»æ™šäº†ã€‚æ‰€ä»¥æˆ‘èŠ±äº†è›®å¤šæ—¶é—´æ¥ç ”ç©¶è¿™ä¸ªã€‚æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å»è¯»è¯»æˆ‘çš„ã€Šç¨‹åºå‘˜è·³æ§½å…¨æ”»ç•¥ã€‹ï¼Œä¸“é—¨è®²èŒä¸šè§„åˆ’çš„ã€‚( åœ¨æˆ‘çš„ä¸ªäººç½‘ç«™ä¸Šå¯ä»¥å…è´¹è¯» <a href="http://t.cn/RYh1xhS" target="_blank" rel="external">æ–¹ç³–æ°”çƒğŸˆ|ç¨‹åºå‘˜è·³æ§½å…¨æ”»ç•¥</a> ) </p><h2 id="ä¸€å®šè¦çæƒœæ ¡æ‹›çš„æœºä¼šçª—å£"><a href="#ä¸€å®šè¦çæƒœæ ¡æ‹›çš„æœºä¼šçª—å£" class="headerlink" title="ä¸€å®šè¦çæƒœæ ¡æ‹›çš„æœºä¼šçª—å£"></a>ä¸€å®šè¦çæƒœæ ¡æ‹›çš„æœºä¼šçª—å£</h2><p>æˆ‘å¤§å­¦çš„è¯­æ–‡è€å¸ˆæ›¾å‘Šè¯«æˆ‘ä»¬è¯´ï¼Œäººç”Ÿå°±åƒå››å­£ä¸€æ ·ï¼Œæ˜¥å¤©è¯¥æ’­ç§ï¼Œä½ å»æ’­ç§ï¼Œç§‹å¤©è¯¥æ”¶è·ï¼Œä½ å»æ”¶è·ï¼Œè¿™æ ·æ˜¯æœ€çœåŠ›çš„ã€‚ä½ éè¦å€’è¿‡æ¥å‘¢ï¼Œä¹Ÿä¸æ˜¯ä¸è¡Œï¼Œä½†å°±æ˜¯ä¼šå¾ˆç´¯ï¼Œä¼šä»˜å‡ºæ›´å¤šçš„ç²¾åŠ›å’Œä»£ä»·ã€‚</p><p>æ ¡æ‹›ä¹Ÿç±»ä¼¼ï¼Œå®ƒæ˜¯ç¤¾ä¼šå’Œä¼ä¸šä¸ºä»æœªæ­¥å…¥èŒåœºçš„åŒå­¦ç‰¹æ„å‡†å¤‡çš„ä¸€ä¸ªç»¿è‰²é€šé“ã€‚åœ¨è¿™ä¸ªé€šé“é‡Œï¼Œæˆ‘ä»¬å°†å€™é€‰äººå½“åšä¸€å¼ ç™½çº¸ï¼Œå¯ä»¥æ²¡æœ‰ç»éªŒã€æ²¡æœ‰è¡Œä¸šå¸¸è¯†ï¼Œåªè¦å¯¹å·¥ä½œå……æ»¡çƒ­æƒ…ã€æœ‰è¿˜ç®—èªæ˜çš„å¤´è„‘ï¼ŒåŸºæœ¬éƒ½ç®—æ˜¯åˆæ ¼çš„ã€‚ä¼ä¸šä¼šä¸ºè¿™äº›åŒå­¦å‡†å¤‡åŸ¹è®­ï¼Œå¹¶ç•™è¶³é€‚åº”æœŸï¼Œæœ‰çš„ç”šè‡³è¿˜ä¼šå®‰æ’ä¸€å¯¹ä¸€çš„è€å‘˜å·¥æ¥å¸¦ã€‚</p><p>ä½†æ˜¯ï¼Œä¸€æ—¦ä½ é”™è¿‡äº†å®ƒï¼Œé‚£ä¸€åˆ‡éƒ½ä¸ä¸€æ ·äº†ï¼Œå› ä¸ºä½ è¿›å…¥äº†åä¸ºã€Œç¤¾æ‹›ã€çš„çº¢æµ·ã€‚åœ¨è¿™é‡Œï¼Œæ‰€æœ‰å·²ç»æ¯•ä¸šçš„äººå˜æˆäº†ä½ çš„ç«äº‰å¯¹æ‰‹ï¼Œä¸ä½†è¦é¢å¯¹å’Œä½ ä¸€æ ·å·¥ä½œå¹´é™çš„äººç«äº‰ï¼Œè¿˜è¦é¢å¯¹å…¶ä»–å·¥ä½œæ—¶é—´æ›´é•¿ã€ç»éªŒæ›´ä¸°å¯Œçš„åŒè¡Œè·³æ§½å¸¦æ¥çš„ç«äº‰ã€‚ç”šè‡³ç»å¸¸å‘ç”Ÿå› ä¸ºæ‹›åˆ°äº†ä¸€ä¸ªä¸­çº§å²—ä½çš„å€™é€‰äººï¼Œå–æ¶ˆæ‰ä¸¤ä¸ªåˆçº§å²—ä½çš„æƒ…å†µã€‚</p><p>æ‰€ä»¥æ ¡æ‹›éå¸¸é‡è¦ï¼Œä¸€å®šä¸è¦é”™è¿‡ã€‚</p><h2 id="åº”å±Šç”Ÿçš„æ±‚èŒç­–ç•¥"><a href="#åº”å±Šç”Ÿçš„æ±‚èŒç­–ç•¥" class="headerlink" title="åº”å±Šç”Ÿçš„æ±‚èŒç­–ç•¥"></a>åº”å±Šç”Ÿçš„æ±‚èŒç­–ç•¥</h2><p>æ—¢ç„¶æ ¡æ‹›è¿™ä¹ˆé‡è¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆæ‰èƒ½åœ¨å…¶ä¸­å æ®ä¼˜åŠ¿å‘¢ï¼Ÿè®°ä½ä¸¤ä¸ªè¯ã€Œæ‹©ä¼˜å½•å–ã€å’Œã€Œè·‘èµ¢åŒå­¦ã€ã€‚</p><h3 id="æ‹©ä¼˜å½•å–"><a href="#æ‹©ä¼˜å½•å–" class="headerlink" title="æ‹©ä¼˜å½•å–"></a>æ‹©ä¼˜å½•å–</h3><p>åœ¨å¾®åšä¸Šç»å¸¸å¯ä»¥çœ‹åˆ°è¿™æ ·çš„é—®é¢˜ï¼šã€Œæˆ‘è¿™ä¸ªä¹Ÿä¼šã€é‚£ä¸ªä¹Ÿåˆæ ¼ï¼Œå‡­ä»€ä¹ˆä»–ä»¬å°±ä¸æ‹›æˆ‘å‘¢ï¼Ÿã€è¿™æ˜¯å…¸å‹çš„æ²¡æœ‰æ˜ç™½æ‹›è˜æœ¬è´¨çš„è¡¨ç°ã€‚è¦æ˜ç™½ï¼Œæ±‚èŒä¸æ˜¯ã€Œä¼šè€ƒã€è€Œæ˜¯ã€Œé«˜è€ƒã€ï¼Œä¸æ˜¯ä»€ä¹ˆäº§å“çš„å‡ºå‚åˆæ ¼æ ¡éªŒï¼Œè€Œæ˜¯ä¸€åœºä¸­å›½è¿™ä¸ªèµ„æºç´§ç¼ºå‹å›½å®¶é‡Œçš„åˆä¸€åœºä¼˜è´¨èµ„æºäº‰å¤ºæˆ˜ã€‚</p><p>é‚£äº›è–ªæ°´é«˜ã€å‘å±•ç©ºé—´å¥½çš„çŸ¥åä¼ä¸šï¼ˆåæ–‡ç®€ç§°å¤§å‚ï¼‰ï¼Œæ¯å¹´æ‹›è˜çš„äººæ•°æ˜¯ä¸€å®šçš„ã€‚æç«¯ç‚¹è¯´ï¼Œå¦‚æœç°åœ¨æ‰€æœ‰å€™é€‰äººçš„æ°´å¹³éƒ½ä¸‹è°ƒ20%ï¼Œä»–ä»¬ä¾ç„¶è¦æ‹›äººçš„ï¼Œä¸ç„¶æ²¡æ³•å‘å±•ï¼ˆä¸¥æ ¼è®²ä¼šæœ‰ä¸€äº›è°ƒæ•´ç©ºé—´ï¼Œä½†ä¹Ÿæ‰›ä¸äº†å¤šä¹…ï¼‰ã€‚</p><p>æ‰€ä»¥ï¼Œå°¤å…¶æ˜¯åœ¨æ ¡æ‹›é‡Œè¾¹ï¼Œã€Œç»å¯¹å€¼ã€å¹¶ä¸é‡è¦ï¼Œã€Œç›¸å¯¹å€¼ã€æ‰æ˜¯æœ€é‡è¦çš„ã€‚</p><h3 id="è·‘èµ¢åŒå­¦"><a href="#è·‘èµ¢åŒå­¦" class="headerlink" title="è·‘èµ¢åŒå­¦"></a>è·‘èµ¢åŒå­¦</h3><p>æˆ‘æ¥è®²ä¸€ä¸ªå¾ˆè€çš„ç«¥è¯ï¼Œå¬è¿‡çš„åŒå­¦è¯·è£…ä½œæ²¡å¬è¿‡ã€‚ä¸¤ä¸ªäººåœ¨æ£®æ—é‡Œè¾¹é‡åˆ°äº†ç†ŠğŸ»ï¼Œkuma çœ‹è§ä»–ä»¬å°±å—·å—·çš„è¿½äº†è¿‡æ¥ã€‚ä¸€ä¸ªåŒå­¦è½¬èº«å°±è·‘ï¼Œå¦ä¸€ä¸ªé—®ä»–è¯´ï¼Œæˆ‘ä»¬æ€ä¹ˆè·‘ä¹Ÿè·‘ä¸è¿‡ç†Šçš„ï¼Œé‚£è·‘æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿè¿™ä¸ªåŒå­¦å›ç­”è¯´ï¼Œæˆ‘åªè¦è·‘èµ¢ä½ å°±å¥½äº†å‘€ã€‚</p><p>é‚£å…¶å®æ ¡æ‹›ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚å®ƒä¸æ˜¯è¯´ä½ çš„èƒ½åŠ›è¦æœ‰å¤šå°‘ï¼Œå…¶å®å†ç‰›çš„åº”å±Šç”Ÿçš„æ°´å¹³æ”¾åˆ°è¡Œä¸šé‡Œè¾¹ï¼Œéƒ½æ˜¯ä¸å…¥æµçš„ï¼Œå› ä¸ºå¾ˆå¤šæ°´å¹³æ˜¯é æµ·é‡çš„ç”¨æˆ·å‹å‡ºæ¥çš„ï¼Œä½ æ²¡æœ‰é‡åˆ°è¿‡è¿™äº›åœºæ™¯ï¼Œæ€ä¹ˆå¯èƒ½çŸ¥é“æ€ä¹ˆå»åº”å¯¹ã€‚</p><p>æ‰€ä»¥åº”å±Šç”Ÿå’Œé‚£äº›ç¤¾æ‹›çš„å€™é€‰äººæ¯”ï¼Œé€šå¸¸éƒ½æ˜¯æ²¡å•¥èƒœç®—çš„ï¼Œä½†å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å’Œä»–ä»¬æ˜¯ä¸åŒçš„èµ›é“ã€‚è¦è·‘èµ¢ä¸€ä¸ªåœ¨å¤§å‚æ ¸å¿ƒå²—ä½å·¥ä½œäº†ä¸€ä¸¤å¹´çš„äººä¸å®¹æ˜“ï¼Œä½†è¦è·‘èµ¢é‚£äº›å’Œä½ ä¸€æ ·åœ¨å¤§å­¦åªå­¦äº†ä¸€å †ç†è®ºåŸºç¡€ï¼Œç”šè‡³ç†è®ºè¯¾éƒ½æ²¡å¥½å¥½å­¦å¤©å¤©åœ¨å¯å®¤åƒé¸¡çš„åŒå­¦ï¼Œå°±å®¹æ˜“å¾ˆå¤šäº†ã€‚</p><p>è¦æ‰¿è®¤ï¼Œå³ä½¿è¿™æ ·ï¼Œè¦è·‘èµ¢æŸäº›å¤©èµ„èªé¢–ã€èƒ½åŠ›æ‹”ç¾¤çš„å­¦éœ¸è¿˜æ˜¯æœ‰éš¾åº¦çš„ã€‚ä½†è¿™åœºæ¯”èµ›æ˜¯ä¸å…¬å¹³çš„ï¼Œå› ä¸ºå®ƒæ²¡è§„å®šæ¯ä¸ªäººå¿…é¡»åŒæ—¶å¼€å§‹è·‘ã€‚é²è¿…è¯´å¾—å¥½ï¼Œç¬¨é¸Ÿå…ˆé£ã€‚ï¼ˆé²è¿…ï¼šæˆ‘æ²¡æœ‰è¯´è¿‡ï¼‰å¦‚æœæˆ‘ä»¬èƒ½æ›´æ—©çš„è®¤è¯†åˆ°è¿™ç‚¹ï¼ŒèŠ±æ›´å¤šæ—¶é—´å»å‡†å¤‡ï¼Œé‚£ä¹ˆèµ¢çš„æ¦‚ç‡å°±ä¼šæˆå€æå‡ã€‚</p><p>æˆ‘æœ¬èº«å°±æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„ä¾‹å­ã€‚ä¸¥æ ¼çš„è®²ï¼Œæˆ‘çš„èƒ½åŠ›ç®—æ˜¯å¹³åº¸åä¸Šä¸€ç‚¹ç‚¹çš„ï¼Œè™½ç„¶åœ¨å½“æ—¶æ— è®ºå¦‚ä½•æˆ‘éƒ½ä¸ä¼šæ‰¿è®¤ã€‚å½“æˆ‘åœ¨å¤§ä¸€ä¸‹åŠæœŸè®¤è¯†åˆ°è¿™ä¸€ç‚¹æ—¶ï¼Œå°±å¼€å§‹è‡ªå­¦ PHPï¼Œå¤§äºŒçš„æ—¶å€™å†™äº†ä¸€å †æ²¡äººç”¨çš„å¼€æºé¡¹ç›®ï¼Œå¤§ä¸‰ä¸ŠåŠæœŸæ‰¾äº†å®¶å…¬å¸åšå…¼èŒï¼Œå·²ç»èƒ½æŠŠå­¦è´¹æŒ£å›æ¥äº†ã€‚å½“å¤§ä¸‰ä¸‹åŠæœŸå¼€å§‹æ‰¾å®ä¹ æ—¶ï¼Œæˆ‘çš„ç®€å†å·²ç»å¯ä»¥ç§’æ€åŒæ ¡åŒå­¦ï¼Œå°å°PK ä¸€æµé«˜æ ¡çš„åŒå­¦äº†ã€‚</p><p>æ‰€ä»¥ä½ ä»¥ä¸ºæ ¡æ‹›æ¯”çš„æ˜¯èƒ½åŠ›ï¼Œå…¶å®å¯¹äºæ‰§è¡ŒåŠ›ä¸­ç­‰ã€åŒæ ·å¤©èµ‹çš„åŒå­¦æ¥è®²ï¼Œæ ¡æ‹›æ¯”çš„å…¶å®æ˜¯è®¤çŸ¥ã€‚è¶Šæ—©è®¤è¯†åˆ°æœ¬è´¨çš„äººï¼Œå°±è¶Šå®¹æ˜“åœ¨è¿™åœºæ¸¸æˆé‡Œè¾¹èƒœå‡ºã€‚ä»è¿™ä¸ªè§’åº¦è®²ï¼ŒåšæŒè¯»åˆ°è¿™é‡Œçš„ä½ ï¼Œç”šè‡³å¯èƒ½å·²ç»èµ¢äº†ä¸€åŠäº†ã€‚æ‰€ä»¥è®°å¾—è¦æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„å¥½æœ‹å‹ï¼Œç„¶ååƒä¸‡åˆ«è®©ä½ ä¸å–œæ¬¢çš„åŒå­¦çŸ¥é“ã€‚</p><h2 id="æŠ€æœ¯å²—ä½çš„é€‰æ‹©"><a href="#æŠ€æœ¯å²—ä½çš„é€‰æ‹©" class="headerlink" title="æŠ€æœ¯å²—ä½çš„é€‰æ‹©"></a>æŠ€æœ¯å²—ä½çš„é€‰æ‹©</h2><p>æŠ€æœ¯å²—ä½çš„å¤§ä½“åˆ†å¸ƒå¦‚å›¾ï¼š</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ws1.sinaimg.cn/large/40dfde6fgy1fqh4nht0kdj20vn0hhmz8.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>ç°åœ¨å‡ ä¹æ‰€æœ‰çš„è½¯ä»¶éƒ½å·²ç»äº’è”ç½‘åŒ–äº†ï¼Œå°±ç®—æ²¡æœ‰äº’è”ç½‘åŒ–çš„ï¼Œå®ƒä»¥åä¹Ÿä¼šäº’è”ç½‘åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ä¸å•çº¯åœ°å»è¯´è½¯ä»¶å¼€å‘è¿™ä¸ªè¡Œä¸šäº†ã€‚</p><h4 id="å¼€å‘å²—"><a href="#å¼€å‘å²—" class="headerlink" title="å¼€å‘å²—"></a>å¼€å‘å²—</h4><p>é¦–å…ˆå°±æ˜¯å¼€å‘å²—ï¼Œè¿™ä¸ªå°±åŒ…æ‹¬äº†å‰ç«¯å¼€å‘ã€åç«¯å¼€å‘å’Œç§»åŠ¨å¼€å‘ã€‚</p><p>å‰ç«¯å¼€å‘å’Œåç«¯å¼€å‘ï¼Œä¸»è¦æ˜¯ B/S ç»“æ„é‡Œçš„ã€‚B/S ç»“æ„å°±æ˜¯ Browser-Server ç»“æ„ã€‚è€Œå‰ç«¯æŒ‡çš„å°±æ˜¯æµè§ˆå™¨è¿™ä¸ªç«¯ï¼›åç«¯æŒ‡çš„å°±æ˜¯æœåŠ¡å™¨è¿™ä¸ªç«¯ã€‚</p><h5 id="å‰ç«¯"><a href="#å‰ç«¯" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h5><p>å‰ç«¯ä¸»è¦åšçš„äº‹æƒ…ï¼Œå°±æ˜¯æŠŠä»æœåŠ¡å™¨ç«¯è¯»å–åˆ°çš„æ•°æ®å±•ç°ç»™ç”¨æˆ·ï¼Œç„¶åé€šè¿‡å„ç§ UI æ§ä»¶å’Œç”¨æˆ·äº’åŠ¨ï¼Œå†å°†æ–°çš„æ•°æ®é€å›æœåŠ¡å™¨ç«¯ã€‚å…·ä½“çš„æŠ€æœ¯åŒ…æ‹¬ HTMLã€CSSã€JavaScriptï¼Œè¿˜å¯èƒ½æœ‰ä¸€äº›åµŒå…¥æµè§ˆå™¨è¿è¡Œçš„ç»„ä»¶ï¼Œæ¯”å¦‚ Flash ã€ WebGL ã€‚</p><h5 id="åç«¯"><a href="#åç«¯" class="headerlink" title="åç«¯"></a>åç«¯</h5><p>åç«¯åˆ™ä¸»è¦é€æ•°æ®ç»™å‰ç«¯ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼Œä»¥å‰ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯ï¼Œå°†æ•°æ®åœ¨æœåŠ¡å™¨ç«¯å…ˆæ¸²æŸ“å®Œï¼Œç„¶åå°†è¾“å‡ºçš„ç»“æœå‘é€ç»™å‰ç«¯ï¼›ç°åœ¨ç”¨çš„æ¯”è¾ƒå¤šçš„æ–¹å¼æ˜¯å°†çº¯æ•°æ®é€šè¿‡ Json æˆ–è€… xml ç­‰æ ¼å¼å‘é€ç»™å‰ç«¯ï¼Œåœ¨æµè§ˆå™¨ä¸­é€šè¿‡ JS æ¥è¿›è¡Œæ¸²æŸ“ã€‚</p><p>æ‰€ä»¥ä»¥å‰å¾ˆå¤šåç«¯çš„å·¥ç¨‹å¸ˆå¾€å¾€ä¹Ÿæ‡‚ä¸€äº›å‰ç«¯çš„çŸ¥è¯†ï¼Œæ¯”å¦‚æˆ‘è®¤è¯†çš„å¾ˆå¤š PHP ç¨‹åºå‘˜ï¼Œä»–ä»¬ä¸ä½†æ‡‚ MySQL å’Œ Apacheï¼Œè¿˜æ‡‚ HTML ã€ CSS ã€ JS å’Œ PSã€‚è¿™ç§å‰åç«¯éƒ½æ‡‚çš„å·¥ç¨‹å¸ˆï¼Œä¹Ÿå«å…¨æ ˆå·¥ç¨‹å¸ˆã€‚</p><p>åç«¯å¯ä»¥ç”¨å„ç§è¯­è¨€å¼€å‘ï¼Œå›½å†…ç”¨çš„æ¯”è¾ƒå¤šçš„åŒ…æ‹¬ Javaã€PHP ï¼Œè¿˜æœ‰ç›¸å¯¹å°ä¼—ä¸€äº›çš„ Python ã€ Ruby ã€ Goã€‚å…¶å® C ä¹Ÿæ˜¯å¯ä»¥å†™åç«¯çš„ï¼Œä¸è¿‡ç°åœ¨å·²ç»å¾ˆå°‘æœ‰å…¬å¸ç›´æ¥ç”¨å®ƒå†™äº†ã€‚</p><p>åæ¥æœ‰äº† NodeJS ï¼ŒJavaScript ä¹Ÿèƒ½è·‘åˆ°åç«¯äº†ï¼Œæ‰€ä»¥å¾ˆå¤šå‰ç«¯å·¥ç¨‹å¸ˆä¹Ÿæœ‰äº†åç«¯å¼€å‘çš„èƒ½åŠ›ï¼Œä»–ä»¬ä¹Ÿå äº†å…¨æ ˆå·¥ç¨‹å¸ˆçš„å¾ˆå¤§ä¸€éƒ¨åˆ†ã€‚</p><h5 id="å®¢æˆ·ç«¯"><a href="#å®¢æˆ·ç«¯" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h5><p>ç›¸å¯¹äº B/S ç»“æ„ï¼Œè¿˜æœ‰ C/S ç»“æ„ï¼Œå°±æ˜¯ Client-Server ã€‚C/S ç»“æ„ä¸‹ä¸ç”¨æµè§ˆå™¨æ¥å±•ç°æ•°æ®å’Œäº¤äº’ï¼Œè€Œæ˜¯ç”¨å®¢æˆ·ç«¯ï¼Œä¸€èˆ¬æ˜¯ Mac/Win/Linux ä¸‰å¤§å¹³å°ã€‚</p><h5 id="ç§»åŠ¨ç«¯"><a href="#ç§»åŠ¨ç«¯" class="headerlink" title="ç§»åŠ¨ç«¯"></a>ç§»åŠ¨ç«¯</h5><p>æ‰‹æœºå¤§æ½®èµ·æ¥ä»¥åï¼Œä¸ç®¡æ˜¯ B/S ç»“æ„è¿˜æ˜¯ C/S ç»“æ„ï¼Œå…¨éƒ¨ç§»åŠ¨åŒ–äº†ã€‚B/S ç»“æ„å¯¹åº”çš„å°±æ˜¯é€‚é…æ‰‹æœºæµè§ˆå™¨çš„ç§»åŠ¨ç½‘é¡µã€ä»¥åŠåµŒå…¥åœ¨å¾®ä¿¡ã€å¾®åšé‡Œè¾¹çš„ H5 é¡µé¢; C/S ç»“æ„å°±æ˜¯ APP ï¼Œä¸€èˆ¬è¦†ç›– iOS å’Œ Android ä¸¤ä¸ªä¸»æµå¹³å°ã€‚</p><p>é™¤äº†è¿™äº›æ ‡å‡†å¼€å‘å²—ï¼Œè€Œè¿˜æœ‰ä¸€äº›æ–°å…´æˆ–è€…ç›¸å¯¹å°ä¼—çš„å¼€å‘æ–¹å‘ï¼Œæ¯”å¦‚äººå·¥æ™ºèƒ½/ç®—æ³•å·¥ç¨‹å¸ˆã€åšæ™ºèƒ½ç¡¬ä»¶çš„ç¡¬ä»¶å¼€å‘å·¥ç¨‹å¸ˆã€ç»™ä¼ä¸šåšè§£å†³æ–¹æ¡ˆçš„ä¼ä¸šè½¯ä»¶å·¥ç¨‹å¸ˆã€‚</p><h4 id="å…¶ä»–å²—ä½"><a href="#å…¶ä»–å²—ä½" class="headerlink" title="å…¶ä»–å²—ä½"></a>å…¶ä»–å²—ä½</h4><p>è½¯ä»¶å¹¶ä¸æ˜¯å¼€å‘å‡ºæ¥å°±å®Œäº†çš„ï¼Œåœ¨ä¸Šçº¿æˆ–è€…å‘å¸ƒä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ã€Œæµ‹è¯•å·¥ç¨‹å¸ˆã€æ¥è¿›è¡Œæµ‹è¯•ï¼›è€Œä¸Šçº¿ä»¥åï¼Œè¿˜éœ€è¦ã€Œè¿ç»´å·¥ç¨‹å¸ˆã€æ¥ç®¡ç†å’Œä¼˜åŒ–æœåŠ¡å™¨é›†ç¾¤ã€‚ç°åœ¨æœåŠ¡å™¨éƒ½è™šæ‹ŸåŒ–å’Œå®¹å™¨åŒ–äº†ï¼Œè¿ç»´å·¥ç¨‹å¸ˆä¸­ä¹Ÿå‡ºç°äº†æ‡‚å¼€å‘çš„åˆ†æ”¯ï¼Œå«åš DevOpsã€‚</p><h4 id="ä¸­é«˜çº§å²—ä½"><a href="#ä¸­é«˜çº§å²—ä½" class="headerlink" title="ä¸­é«˜çº§å²—ä½"></a>ä¸­é«˜çº§å²—ä½</h4><p>ä¸ç®¡æ˜¯å¼€å‘å²—è¿˜æ˜¯æµ‹è¯•ã€è¿ç»´å²—ï¼Œéƒ½æœ‰å…¶å¯¹åº”çš„ä¸­é«˜çº§å²—ä½ã€‚å¼€å‘ä¸€èˆ¬æ˜¯æŠ€æœ¯ç»ç†ï¼›è¿ç»´ä¸€èˆ¬æ˜¯æ¶æ„å¸ˆï¼›æµ‹è¯•ä¸€èˆ¬æ˜¯æµ‹è¯•æ€»ç›‘ã€‚æŠ€æœ¯æ€»ç›‘ã€CTO å°±æ˜¯æ›´é«˜ä¸€çº§çš„èŒä½äº†ã€‚</p><p>ä»¥ä¸Šçš„èŒä½åˆ†ç±»æˆ‘ä»¬å‚è€ƒäº†æ‹›è˜ç½‘ç«™çš„åˆ†ç±»ï¼Œä¸ä¸€å®šå‡†ç¡®ï¼Œå¯èƒ½ä¼šæœ‰å¾ˆå¤šå²—ä½æ²¡è¦†ç›–åˆ°ï¼Œä¸å°‘å…¬å¸ä¹Ÿä¼šæœ‰è‡ªå·±ç‹¬ç‰¹çš„å²—ä½è®¾ç½®ã€‚</p><h3 id="èŒä½çš„é€‰æ‹©"><a href="#èŒä½çš„é€‰æ‹©" class="headerlink" title="èŒä½çš„é€‰æ‹©"></a>èŒä½çš„é€‰æ‹©</h3><p>å¦‚æœèƒ½é€‰æ‹©çš„è¯ï¼Œä¸å»ºè®®ä¸€å¼€å§‹å°±é€‰è¿ç»´æˆ–è€…æµ‹è¯•ã€‚åŸå› æœ‰ä¸¤ä¸ªï¼šç¬¬ä¸€ï¼Œå› ä¸ºå®ƒä»¬è™½ç„¶å¾ˆé‡è¦ï¼Œä½†ä¸æ˜¯è½¯ä»¶å¼€å‘çš„æ ¸å¿ƒå²—ä½ã€‚ç¬¬äºŒï¼Œä»å¼€å‘å²—å¾€è¿™ä¸¤ä¸ªèŒä½è½¬éå¸¸å®¹æ˜“ï¼Œåä¹‹å´éå¸¸éš¾ã€‚</p><p>ä¹‹å‰åœ¨ç»™æ˜é‡‘å†™ã€Šç¨‹åºå‘˜èŒä¸šå°ç™½ä¹¦ã€‹çš„æ—¶å€™ï¼Œæˆ‘åšè¿‡ä¸€ä¸ªé‚®ä»¶è®¿è°ˆï¼Œä»¥é—®é¢˜çš„å½¢å¼é‡‡è®¿äº†å¤šä½åœ¨ä¸åŒé˜¶æ®µã€ä¸åŒå²—ä½ã€ä¸åŒåŸå¸‚çš„ç¨‹åºå‘˜çš„æ—¥å¸¸ã€‚å¤§å®¶å¯ä»¥è¯»ä¸€è¯»ï¼Œäº†è§£ä¸‹ã€‚<a href="https://juejin.im/book/59e17a7ff265da430629cc4e/section/59faea95f265da430d575a22" target="_blank" rel="external">ç¨‹åºå‘˜ä»¬çš„æ—¥å¸¸æ˜¯æ€æ ·çš„</a> ï¼ˆè™½ç„¶è¿™ä¸ªå°å†Œæ˜¯æ”¶è´¹çš„ï¼Œä½†è®¿è°ˆè¿™ä¸€ç« å´æ˜¯å¯ä»¥å…è´¹è¯»çš„ï¼Œä¸éœ€è¦è´­ä¹°å“ˆï¼‰</p><h2 id="è¯­è¨€å’ŒæŠ€æœ¯æ ˆçš„é€‰æ‹©"><a href="#è¯­è¨€å’ŒæŠ€æœ¯æ ˆçš„é€‰æ‹©" class="headerlink" title="è¯­è¨€å’ŒæŠ€æœ¯æ ˆçš„é€‰æ‹©"></a>è¯­è¨€å’ŒæŠ€æœ¯æ ˆçš„é€‰æ‹©</h2><h3 id="è¯­è¨€æ¦‚å†µ"><a href="#è¯­è¨€æ¦‚å†µ" class="headerlink" title="è¯­è¨€æ¦‚å†µ"></a>è¯­è¨€æ¦‚å†µ</h3><p>è™½ç„¶å‡ºäºæŸç§æ”¿æ²»æ­£ç¡®ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šè¯´ï¼Œè¯­è¨€ä¸é‡è¦ã€‚ä½†è¯­è¨€çœŸçš„ä¸é‡è¦ä¹ˆï¼Ÿå¹¶ä¸æ˜¯è¿™æ ·çš„ï¼Œæ¯ç§è¯­è¨€éƒ½æœ‰è‡ªå·±çš„ä¼˜ç¼ºç‚¹å’Œé€‚ç”¨èŒƒå›´ã€‚</p><p>åƒæ—¥è¯­å’Œè‹±è¯­ä¸€æ ·ï¼Œä¸€ä¸ªæ˜¯çœ‹åŠ¨ç”»ç©æ¸¸æˆç”¨çš„ï¼Œä¸€ä¸ªæ˜¯çœ‹èµ„æ–™å†™ä»£ç ç”¨çš„ã€‚ï¼ˆè¯¯ï¼‰<br>ä¸‹è¾¹ç®€å•ä»‹ç»ä¸‹æˆ‘çœ¼ä¸­çš„å„ä¸ªè¯­è¨€ã€‚</p><h4 id="C-C-ï¼š"><a href="#C-C-ï¼š" class="headerlink" title="C/C++ ï¼š"></a>C/C++ ï¼š</h4><p>ç³»ç»Ÿè¯­è¨€ï¼Œç”¨æ¥å†™åº•å±‚æ“ä½œç³»ç»Ÿã€é«˜æ€§èƒ½ä¸­é—´ä»¶å’ŒåµŒå…¥å¼å¼€å‘ã€‚</p><h4 id="Pythonï¼šäººå·¥æ™ºèƒ½çš„å¥½é€‰æ‹©"><a href="#Pythonï¼šäººå·¥æ™ºèƒ½çš„å¥½é€‰æ‹©" class="headerlink" title="Pythonï¼šäººå·¥æ™ºèƒ½çš„å¥½é€‰æ‹©"></a>Pythonï¼šäººå·¥æ™ºèƒ½çš„å¥½é€‰æ‹©</h4><p>ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœä½ æƒ³åšäººå·¥æ™ºèƒ½æ–¹å‘çš„è¯ï¼ŒPythonè¯­è¨€å°±æ˜¯éå¸¸ä¸é”™çš„é€‰æ‹©ã€‚å› ä¸ºå®ƒåœ¨å„ä¸ªå¤§å­¦å’Œç ”ç©¶æœºæ„ç”¨çš„éå¸¸å¤šï¼Œæœ‰æˆç†Ÿå¥½ç”¨çš„æ•°å­¦åº“ï¼Œé€‚åˆäºç§‘å­¦è®¡ç®—ã€‚åœ¨æ·±åº¦å­¦ä¹ ç­‰çƒ­é—¨æ–¹å‘ä¸Šï¼Œæœ‰å¤§é‡ç”¨ Python å¼€å‘çš„æ¡†æ¶ï¼Œæ–°å‡ºçš„ Paper ä¹Ÿèƒ½å¾ˆå¿«åœ¨ GitHub ä¸Šæ‰¾åˆ° Python çš„ä»£ç å®ç°ï¼Œå¯ä»¥è¯´æ˜¯ä¸äºŒé€‰æ‹©äº†ã€‚</p><h4 id="JavaScriptï¼šå‰ç«¯å’Œå…¨ç«¯"><a href="#JavaScriptï¼šå‰ç«¯å’Œå…¨ç«¯" class="headerlink" title="JavaScriptï¼šå‰ç«¯å’Œå…¨ç«¯"></a>JavaScriptï¼šå‰ç«¯å’Œå…¨ç«¯</h4><p>å¦‚æœä½ æƒ³åšå‰ç«¯ï¼Œé‚£ä¹ˆç›®å‰æ¥çœ‹ï¼Œé™¤äº† JavaScript è¿˜çœŸæ²¡æœ‰åˆ«çš„é€‰æ‹©ï¼Œå› ä¸ºç°åœ¨èƒ½åœ¨æµè§ˆå™¨é‡Œè¾¹è·‘èµ·æ¥ï¼Œä¹Ÿå°±æ˜¯å®ƒäº†ã€‚è¿‡ä¸¤å¹´ç­‰ wasm æˆç†Ÿå¯èƒ½ä¼šæœ‰å…¶ä»–é€‰æ‹©ï¼Œä½†ç°åœ¨ï¼Œæ˜¯çœŸæ²¡æœ‰ã€‚</p><p>è€Œç›¸åº”çš„ï¼Œå¦‚æœä½ å­¦ä¼šäº† JavaScript ï¼Œæƒ³åœ¨è¿™ä¸ªåŸºç¡€ä¸Šå†æŠŠåç«¯ç»™åšäº†ï¼Œé‚£ä¹ˆ Node.JS å°±æ˜¯éå¸¸å¥½çš„é€‰æ‹©ã€‚å› ä¸ºå®ƒä½¿ç”¨çš„å°±æ˜¯ JavaScript çš„è§£é‡Šå™¨ï¼ŒæŒ‰ JavaScript å†™å°±å¥½äº†ã€‚ä»å­¦ä¹ æˆæœ¬ä¸Šæ¥è®²ï¼Œå®ƒæ˜¯éå¸¸ä½çš„ï¼Œå¯ä»¥é€šè¿‡å¾ˆä½çš„æŠ•å…¥ï¼Œå°±è¿›å…¥äº†æœåŠ¡å™¨ç«¯çš„é¢†åŸŸã€‚</p><h4 id="PHPï¼šä¾ç„¶æ˜¯ç½‘ç«™é¦–é€‰"><a href="#PHPï¼šä¾ç„¶æ˜¯ç½‘ç«™é¦–é€‰" class="headerlink" title="PHPï¼šä¾ç„¶æ˜¯ç½‘ç«™é¦–é€‰"></a>PHPï¼šä¾ç„¶æ˜¯ç½‘ç«™é¦–é€‰</h4><p>å¦‚æœä½ è¦åšç½‘ç«™ï¼Œé‚£ä¹ˆ PHP å°±æ˜¯é¦–é€‰äº†ã€‚ä¸€æ–¹é¢æ˜¯æœ‰å¤§é‡çš„å¯ç”¨ä»£ç ï¼Œä¸–ç•Œä¸Šè¶…è¿‡80%çš„ç½‘ç«™éƒ½ç”¨çš„ PHPï¼ŒåŸºæœ¬ä¸Šä½ èƒ½æƒ³åˆ°çš„ç½‘ç«™åŠŸèƒ½ï¼Œéƒ½æœ‰èƒ½æ‰¾åˆ°çš„å®ç°ï¼Œæ‚¬å¿µåªæ˜¯æœ‰æ²¡æœ‰å…è´¹çš„ï¼›å¦ä¸€æ–¹é¢ï¼ŒPHP7 çš„æ€§èƒ½æå‡äº†å¾ˆå¤šï¼Œç”¨æ¥å†™ API ä¹Ÿéå¸¸å¥½ã€‚</p><p>å¦å¤–ä¸€ç‚¹ï¼Œå°±æ˜¯ç›®å‰ä½¿ç”¨ PHP çš„å›¢é˜Ÿéå¸¸å¤šï¼Œå³ä½¿åœ¨äºŒä¸‰çº¿åŸå¸‚ä¹Ÿæ¯”è¾ƒå®¹æ˜“æ‰¾åˆ°å·¥ä½œï¼Œå½“ç„¶ï¼Œç»„å»ºå›¢é˜Ÿä¹ŸåŒæ ·ç›¸å¯¹å®¹æ˜“ã€‚</p><h4 id="Javaï¼šå¤§æ•°æ®åˆ†æ"><a href="#Javaï¼šå¤§æ•°æ®åˆ†æ" class="headerlink" title="Javaï¼šå¤§æ•°æ®åˆ†æ"></a>Javaï¼šå¤§æ•°æ®åˆ†æ</h4><p>å¦‚æœä½ è¦åšå¤§æ•°æ®åˆ†æï¼Œé‚£ä¹ˆå¯èƒ½å°±ç¦»ä¸å¼€ Java äº†ã€‚<br>ä» Hadoop å¼€å§‹ä¸€ç³»åˆ—çš„ Google Big Table çš„å¼€æºå®ç°éƒ½æ˜¯ Java çš„ï¼Œç”¨äºæµ·é‡æ•°æ®æœç´¢çš„ Elastic Stack ä¹Ÿæ˜¯ Java çš„ã€‚</p><h4 id="Goï¼šäº‘è®¡ç®—å’Œå®¹å™¨ç®¡ç†"><a href="#Goï¼šäº‘è®¡ç®—å’Œå®¹å™¨ç®¡ç†" class="headerlink" title="Goï¼šäº‘è®¡ç®—å’Œå®¹å™¨ç®¡ç†"></a>Goï¼šäº‘è®¡ç®—å’Œå®¹å™¨ç®¡ç†</h4><p>å¦‚æœä½ ç°åœ¨è¦æƒ³å»åšäº‘è®¡ç®—ï¼Œé‚£ Go å°±æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰æ‹©ã€‚</p><p>å› ä¸ºå®ƒå°±æ˜¯ä¸ºäº†å¤§è§„æ¨¡è®¡ç®—è®¾è®¡çš„ï¼Œå¹¶å‘ç®¡ç†å’Œæ€§èƒ½éƒ½éå¸¸ä¸é”™ã€‚è€Œä¸”æœ‰å¾ˆå¤šäº‘è®¡ç®—çš„è½¯ä»¶ï¼Œå®ƒå°±æ˜¯ Go å†™çš„ï¼Œå¦‚æœä½ è¦å»ä¿®æ”¹å®ƒï¼Œè°ƒæ•´é‡Œè¾¹çš„å®ç°é€»è¾‘çš„è¯ï¼Œä¸ä¼š Go å¯èƒ½å¾ˆéº»çƒ¦ã€‚å½“ç„¶ï¼Œç†è®ºä¸Šè®²ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡å®¹å™¨å’Œå¾®æœåŠ¡çš„æ–¹å¼æ¥æå®šï¼Œä½†è‚¯å®šæ¯”ç›´æ¥æ”¹ä»£ç éº»çƒ¦ã€‚</p><p>å¦å¤–åŒºå—é“¾çš„å¤§çƒ­å¹³å°ä»¥å¤ªåŠçš„å®˜æ–¹ï¼ˆæœ€å…·æ½œåŠ›ï¼‰å®ç°ï¼Œä¹Ÿæ˜¯Goåšçš„ã€‚é’±é€”å¤§å¤§çš„ã€‚</p><h3 id="è¯­è¨€çš„é€‰æ‹©"><a href="#è¯­è¨€çš„é€‰æ‹©" class="headerlink" title="è¯­è¨€çš„é€‰æ‹©"></a>è¯­è¨€çš„é€‰æ‹©</h3><h4 id="å…´è¶£ä¼˜å…ˆ"><a href="#å…´è¶£ä¼˜å…ˆ" class="headerlink" title="å…´è¶£ä¼˜å…ˆ"></a>å…´è¶£ä¼˜å…ˆ</h4><p>åœ¨è¯­è¨€çš„é€‰æ‹©ä¸Šï¼Œå°¤å…¶æ˜¯ç¬¬ä¸€é—¨è¯­è¨€çš„é€‰æ‹©ä¸Šï¼Œæˆ‘ä¸€ç›´æ¨èå…´è¶£ä¼˜å…ˆçš„åŸåˆ™ã€‚å› ä¸ºå¯¹åˆå­¦è€…è€Œè¨€ï¼Œå½“ä½ é‡åˆ°å›°éš¾åšæŒä¸ä¸‹å»æ—¶ï¼Œå…´è¶£ä¼šå¸®ä½ ä¸€æŠŠã€‚ä¸­å­¦æ—¶ä¸ºäº†æ”¹ä»™å‰‘ï¼Œæˆ‘è¿æ±‡ç¼–éƒ½è¯•ç€å­¦äº†ä¸ªå…¥é—¨ ğŸ¤£</p><h4 id="å¸‚åœºå…¶æ¬¡"><a href="#å¸‚åœºå…¶æ¬¡" class="headerlink" title="å¸‚åœºå…¶æ¬¡"></a>å¸‚åœºå…¶æ¬¡</h4><p>ä½†å…¶å®å¯¹ç»å¤§éƒ¨åˆ†åº”å±Šç”Ÿè€Œè¨€ï¼Œå¯¹å„ç§è¯­è¨€å¹¶æ²¡æœ‰ç‰¹åˆ«çš„åå¥½ã€‚è€Œä¸”ã€Œæ‰¾åˆ°å·¥ä½œã€è¿™ä»¶äº‹æ˜¯éå¸¸é‡è¦çš„ã€‚æ‰€ä»¥ä¸å…¶ç›²ç›®çš„é€‰æ‹©è¯­è¨€å­¦ä¹ ä¸å¦‚æ¥çœ‹çœ‹å„ä¸ªè¯­è¨€åœ¨æ‹›è˜å¸‚åœºçš„è¡¨ç°ã€‚</p><p>æˆ‘ä¹‹å‰å†™è¿‡ä¸€ä¸ªè„šæœ¬ï¼Œå¯ä»¥æŠ“å–å‡ ä¸ªäº’è”ç½‘æ‹›è˜å¤§ç«™çš„æ‹›è˜å¯äº‹ï¼Œå¹¶æŒ‰èŒä½å¯¹è–ªèµ„è¿›è¡Œç»Ÿè®¡ã€‚ä¸‹è¾¹æ˜¯æœ€è¿‘ä¸€å‘¨çš„ç»Ÿè®¡ç»“æœã€‚</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ws1.sinaimg.cn/large/40dfde6fgy1fqh4nzwnz0j20qo5ubkjn.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>å…ˆæ¥è¯´è¯´è¿™äº›æ•°æ®æ€ä¹ˆçœ‹ã€‚</p><p>èŒä½çƒ­åº¦ç±»ä¼¼äºæ‹›è˜èŒä½æ•°ï¼Œå’Œå…¶ä»–è¯­è¨€å¯¹æ¯”å°±èƒ½çœ‹å‡ºå·®è·ã€‚å¹³å‡è–ªèµ„ä¹‹æ‰€æœ‰æœ‰ä¸¤ä¸ªå€¼ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬ä¸€èˆ¬æ‹›è˜æ—¶ä¼šç»™å‡ºè–ªèµ„çš„ä¸Šé™å’Œä¸‹é™ã€‚ä¸¥æ ¼çš„è®²ï¼Œè¿™å¹¶ä¸æ˜¯å½“å‰æŸä¸ªè¯­è¨€çš„ç¨‹åºå‘˜ä»¬çš„è–ªèµ„ï¼Œè€Œæ˜¯ä»–ä»¬ä¸‹ä¸€æ¬¡è·³æ§½æ—¶çš„å¯èƒ½è–ªèµ„ã€‚å¦å¤–ï¼Œéƒ¨åˆ†ä¼ä¸šå–œæ¬¢åœ¨ä¸Šé™å€¼ä¸Šè¾¹è™šé«˜ï¼Œæ‰€ä»¥æŠŠä¸Šé™ä¹˜80%å¯èƒ½æ›´åˆç†ã€‚è€Œä¸‹é™ä¸€èˆ¬æ¯”è¾ƒçœŸå®ï¼Œæ›´å…·å¤‡å¯¹æ¯”ä»·å€¼ã€‚</p><p>ç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹èƒ½å‘ç°ä»€ä¹ˆã€‚</p><h5 id="Java-çš„æ•°æ®éå¸¸ç‰›"><a href="#Java-çš„æ•°æ®éå¸¸ç‰›" class="headerlink" title="Java çš„æ•°æ®éå¸¸ç‰›"></a>Java çš„æ•°æ®éå¸¸ç‰›</h5><p>é¦–å…ˆæˆ‘ä»¬ä¼šå‘ç°ï¼ŒJava çš„èŒä½çƒ­åº¦éå¸¸é«˜ï¼Œå‡ ä¹åœ¨æ‰€æœ‰åŸå¸‚é‡Œè¾¹éƒ½æ˜¯æ’åç¬¬ä¸€çš„ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªç‰¹æ®ŠåŸå› ï¼Œå°±æ˜¯ Android èŒä½åŸºæœ¬ä¹Ÿæ˜¯ä½¿ç”¨ Java è¯­è¨€è¿›è¡Œå¼€å‘çš„ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªèŒä½æœ‰ä¸€äº›é‡å ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå­¦å¥½ Java å…¶å®å¯ä»¥åŒæ—¶åº”è˜ Javaå·¥ç¨‹å¸ˆ å’Œ Android å·¥ç¨‹å¸ˆï¼ˆå¯èƒ½éœ€è¦é¢å¤–åœ¨å­¦ä¸€ç‚¹ç‚¹åº”ç”¨å¼€å‘çš„çŸ¥è¯†ï¼‰ï¼Œè¿™éå¸¸åˆ’ç®—ã€‚è€Œä»è–ªèµ„æ–¹é¢çœ‹ï¼ŒJava ä¹Ÿæ˜¯æ•°ä¸€æ•°äºŒçš„ã€‚</p><h5 id="å‰ç«¯ç´§è·Ÿå…¶å"><a href="#å‰ç«¯ç´§è·Ÿå…¶å" class="headerlink" title="å‰ç«¯ç´§è·Ÿå…¶å"></a>å‰ç«¯ç´§è·Ÿå…¶å</h5><p>ç´§éšå…¶åçš„æ˜¯å‰ç«¯èŒä½ã€‚å‰ç«¯æ˜¯ä¸ªéå¸¸æœ‰æ„æ€çš„ç‰¹ç‚¹ï¼Œé‚£å°±æ˜¯â€”â€”å‡ ä¹æ‰€æœ‰çš„å…¬å¸éƒ½ä¼šæ‹›å‰ç«¯ã€‚å¯¹æ¯” Java è€Œè¨€ï¼Œå¯èƒ½æœ‰å¾ˆå¤šå¤§å‚çš„åç«¯ç”¨çš„ä¸æ˜¯ Java ï¼Œé‚£ä»–ä»¬å°±ä¸éœ€è¦æ‹›è˜ Java å·¥ç¨‹å¸ˆã€‚å¦‚æœä½ éå¸¸æƒ³å»è¿™å®¶å…¬å¸ï¼Œä½†ä½ ä¼šçš„è¯­è¨€æ˜¯ Java ï¼Œé‚£ä¹ˆå°±å¯èƒ½å’Œæœºä¼šæ“¦è‚©è€Œè¿‡ã€‚è€Œå‰ç«¯å²—ä½çš„è¯ï¼Œæœºä¼šå°±å¯èƒ½å¤§å¾—å¤šã€‚è¿™æœ‰ç‚¹åƒè¡€å‹é‡Œè¾¹çš„Oå‹è¡€ï¼Œæ€ä¹ˆåœ°æ–¹éƒ½èƒ½ç”¨ã€‚å°±ç®—æ˜¯è‡ªä»¥ä¸ºç«™åœ¨é£Ÿç‰©é“¾é¡¶ç«¯é„™è§†ã€Œå¤å…¸äº’è”ç½‘ã€çš„åŒºå—é“¾å…¬å¸ä¹Ÿä¸å¾—ä¸æ‹›å‰ç«¯å‘¢ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰æ‹©ã€‚</p><p>é™¤äº†çœ‹çƒ­åº¦ï¼Œæˆ‘ä»¬ä¹Ÿè¦è€ƒè™‘åˆ°ç«äº‰ï¼Œæ¯”å¦‚ Java æ˜¯ä¸€ä¸ªã€Œä¼ ç»Ÿã€å²—ï¼Œå¾ˆå¤šè½¯ä»¶è¡Œä¸šçš„å·¥ç¨‹å¸ˆä¹Ÿæ˜¯ä¼š Java çš„ã€‚è€Œã€Œå‰ç«¯ã€æ˜¯ä¸€ä¸ªæ–°å…´çš„äº’è”ç½‘å²—ï¼Œä¸“ä¸šå‰ç«¯è¿˜ä¸ç®—å¤ªå¤šï¼ˆå’Œ Java æ¯”å•¦ï¼‰ï¼Œæ‰€ä»¥å…¥èŒéš¾åº¦è¯´ä¸å®šåè€Œä½ä¸€äº›ã€‚</p><h5 id="å…¶ä»–è¯­è¨€"><a href="#å…¶ä»–è¯­è¨€" class="headerlink" title="å…¶ä»–è¯­è¨€"></a>å…¶ä»–è¯­è¨€</h5><p>å…¶ä»–è¯­è¨€åœ¨å„ä¸ªåŸå¸‚çš„æ•°æ®å„ä¸ç›¸åŒï¼Œå¤§å®¶å¯ä»¥æŒ‘è‡ªå·±æ„Ÿå…´è¶£çš„çœ‹ã€‚æ¯”å¦‚ Go è¯­è¨€åœ¨åŒ—äº¬æ¯”å…¶ä»–åŸå¸‚çƒ­å‡ å€ï¼›åŒºå—é“¾è™½ç„¶çœ‹èµ·æ¥å¾ˆç«ï¼Œä½†å…¶å®èŒä½æ•°ä¹Ÿå°±æ¯” PHP çš„ä¸€åŠå¤šç‚¹ï¼›Ruby è™½ç„¶è–ªèµ„ä¸é”™ï¼Œä½†å²—ä½éå¸¸å°‘â€¦</p><p>æ€»ä¹‹è¯­è¨€çš„é€‰æ‹©å› äººè€Œå¼‚å› æ—¶è€Œå¼‚ï¼Œè¯·ç»¼åˆå„ç§è§†è§’å»é€‰æ‹©ä¸€ä¸ªé€‚åˆè‡ªå·±çš„ã€‚</p><h3 id="å­¦ä¹ è·¯çº¿å›¾"><a href="#å­¦ä¹ è·¯çº¿å›¾" class="headerlink" title="å­¦ä¹ è·¯çº¿å›¾"></a>å­¦ä¹ è·¯çº¿å›¾</h3><p>åœ¨é€‰æ‹©å¥½èŒä½å’Œè¯­è¨€åï¼Œå°±è¦å¯»æ‰¾å¯¹åº”çš„å­¦ä¹ è·¯çº¿å›¾è¿›è¡Œå­¦ä¹ äº†ã€‚è¿™é‡Œæ¨èè¿™ä¸ª Star æ•°é‡è¶…è¿‡4ä¸‡çš„è·¯çº¿å›¾ï¼ˆçš„ä¸­æ–‡ç‰ˆï¼‰ï¼š<a href="https://github.com/goodjack/developer-roadmap-chinese" target="_blank" rel="external">GitHub - goodjack/developer-roadmap-chinese: 2018 å¹´æˆç‚º Web é–‹ç™¼äººå“¡çš„è·¯ç·šåœ–</a></p><p>è™½ç„¶ä¸æ˜¯å¾ˆå…¨ï¼Œä½†ç»†èŠ‚ä¸é”™ã€‚</p><ul><li><a href="https://ws1.sinaimg.cn/large/40dfde6fgy1fqh4nk3d0ej214d2xc4qp.jpg" target="_blank" rel="external">å‰ç«¯è·¯çº¿å›¾</a> </li><li><a href="https://ws1.sinaimg.cn/large/40dfde6fgy1fqh4nlxc7hj210u2sc4qp.jpg" target="_blank" rel="external">åç«¯è·¯çº¿å›¾</a></li><li><a href="https://ws1.sinaimg.cn/large/40dfde6fgy1fqh4nj63kgj215i1bpduw.jpg" target="_blank" rel="external">DevOPsè·¯çº¿å›¾</a></li></ul><h2 id="æŠ€æœ¯æ ˆçš„ä¼˜åŒ–"><a href="#æŠ€æœ¯æ ˆçš„ä¼˜åŒ–" class="headerlink" title="æŠ€æœ¯æ ˆçš„ä¼˜åŒ–"></a>æŠ€æœ¯æ ˆçš„ä¼˜åŒ–</h2><p>ä¹‹å‰æˆ‘ä»¬åœ¨åˆ†æ Java æ•°æ®çš„æ—¶å€™ï¼Œå‘ç°ä¸€ä¸ªæœ‰æ„æ€çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯ Java çš„æŠ€æœ¯æ ˆå¯ä»¥åŒæ—¶è¦†ç›–ä¸¤ä¸ªçƒ­é—¨èŒä½ â€”â€” Java å’Œ Androidï¼Œè¿™è®©æˆ‘ä»¬çš„æ±‚èŒç«äº‰åŠ›ä¸€ä¸‹ç¿»äº†ä¸€å€ã€‚é‚£ä¹ˆåœ¨å…¶ä»–çš„è¯­è¨€å’Œå²—ä½ä¸Šè¿˜å­˜ä¸å­˜åœ¨ç±»ä¼¼çš„æƒ…å†µå‘¢ï¼Ÿ</p><p>å…¶å®æ˜¯æœ‰çš„ï¼Œæ¯”å¦‚å‰ç«¯å²—ä½å°±æ˜¯ä¸€ä¸ªéå¸¸æœ‰æ½œåŠ›çš„ä¾‹å­ï¼Œå®ƒçš„åç«¯è§£å†³æ–¹æ¡ˆ NodeJS æ­£åœ¨æ—¥ç›Šæµè¡Œ ã€‚åœ¨æˆ‘å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œäº’è”ç½‘æ‹›è˜å¤§ç«™ æ‹‰å‹¾ç½‘ ä¸ŠåŒ—äº¬çš„ NodeJS èŒä½æ•°æ˜¯ 181ï¼Œä¸Šæµ·æ˜¯ 114ï¼Œæ·±åœ³æ˜¯ 65 ã€‚æ‰€ä»¥å­¦å®Œå‰ç«¯çŸ¥è¯†å†è¡¥ä¸€ä¸‹ NodeJS çš„æ”¶ç›Šæ˜¯ä¸é”™çš„ã€‚</p><p>ä½†è¿™ä¸ªæŠ€æœ¯æ ˆå…¶å®è¿˜å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œå› ä¸ºä¸€ä¸ªå¶ç„¶çš„åŸå› ï¼Œæˆ‘ç»Ÿè®¡äº†ä¸€ä¸‹ PHP å²—ä½å’Œå‰ç«¯å²—ä½æ‹›è˜å¯äº‹é‡Œè¾¹å‡ºç°çš„æŠ€æœ¯å…³é”®è¯ï¼Œå‘ç°å…¶é‡åˆåº¦ç«Ÿç„¶é«˜äº60%ã€‚å…·ä½“çš„æŠ€æœ¯å…³é”®è¯å’Œçƒ­åº¦è§è¿™é‡Œ <a href="https://quanzhanke.github.io/ref/MAP.html" target="_blank" rel="external">ã€ŠPHP&amp;å‰ç«¯å²—ï¼ˆ1~3å¹´ï¼‰æ ¸å¿ƒæŠ€æœ¯ç‚¹åˆ†ææŠ¥å‘Šã€‹</a></p><p>å›å¤´ä¸€æƒ³å…¶å®ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œæ¯•ç«Ÿæ‹› PHP æ˜¯æ¥åšç½‘ç«™çš„ï¼ŒHTML CSS JS æ€»å¾—ä¼šä¸€äº›æ‰è¡Œã€‚è¿™æ„å‘³ç€PHPçš„åŒå­¦åªéœ€è¦è¡¥ä¸Šéƒ¨åˆ†å‰ç«¯çŸ¥è¯†ï¼Œæ¯”å¦‚ä¸»æµæ¡†æ¶ React / Vue / Angular å’Œ SPA å¼€å‘å°±å¯ä»¥åŒæ—¶åº”è˜ PHP å’Œ å‰ç«¯ èŒä½ã€‚</p><p>è¿™ä¼šæœ‰å¤šå¤§çš„ç«äº‰åŠ›å‘¢ï¼Ÿå‰ç«¯æ‹›è˜å¯äº‹é‡Œè¾¹ï¼Œæœ‰è¶…è¿‡ååˆ†ä¹‹ä¸€çš„ä¼ä¸šæåŠäº†PHPã€‚è¿™è¿˜æ²¡å®Œï¼ŒReact æœ‰ä¸€ä¸ªæ··åˆåº”ç”¨è§£å†³æ–¹æ¡ˆï¼Œå«åš React Nativeï¼Œå¯ä»¥ç›´æ¥ç”¨ React æ ˆæ¥å¼€å‘æ‰‹æœºAPPã€‚è¿™ä¸ªæŠ€æœ¯çš„éœ€æ±‚å¦‚ä½•å‘¢ï¼Ÿç°åœ¨æ‹‰å‹¾ç½‘ä¸ŠåŒ—äº¬çš„ React Native ç›¸å…³èŒä½æ•°æœ‰ 84 ã€‚</p><p>äºæ˜¯å‘¢ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹© PHP + React + React Native çš„æŠ€æœ¯æ ˆï¼Œä»…ä»…å¤šå­¦ä¹ ä¸€ç‚¹çŸ¥è¯†ï¼Œå¯ä»¥æŠ•é€’çš„å²—ä½å°±ä»åŸæ¥çš„ 364 å˜æˆäº† 364 + 373 + 84 ã€‚ </p><p>è¿™å°±æ˜¯æŠ€æœ¯æ ˆä¼˜åŒ–çš„ç­–ç•¥ã€‚å…³äºè¿™ä¸ªæŠ€æœ¯æ ˆçš„ä¼˜åŒ–ç»“æ„ï¼Œå¯ä»¥çœ‹è¿™é‡Œ <a href="https://quanzhanke.github.io/0-0.html" target="_blank" rel="external">ã€Šæ–¹ç³–å…¨æ ˆå­¦ä¹ è·¯çº¿å›¾ã€‹</a>ï¼Œè¿™ä¸ªæ ˆè¿˜é¡ºä¾¿æŠŠåŒºå—é“¾åº”ç”¨å¼€å‘ä¹Ÿè¦†ç›–äº†ã€‚å¤§å®¶å¯ä»¥ä¸¾ä¸€åä¸‰ï¼Œå»ä¼˜åŒ–è‡ªå·±é€‰ä¸­çš„æŠ€æœ¯æ ˆã€‚</p><h2 id="ç®€å†çš„å†™ä½œ"><a href="#ç®€å†çš„å†™ä½œ" class="headerlink" title="ç®€å†çš„å†™ä½œ"></a>ç®€å†çš„å†™ä½œ</h2><p>ä¸è¦æœ€åæ‰¾å·¥ä½œçš„æ—¶å€™å†æ¥å†™ç®€å†ã€‚ç°åœ¨å°±å¼€å§‹å†™ï¼Œå³ä½¿ä½ ä»€ä¹ˆéƒ½ä¸ä¼šã€‚è¿™æ ·ä½ æ‰ä¼šçœŸåˆ‡çš„æ„Ÿå—åˆ°ï¼Œè‡ªå·±çš„ç¼ºç‚¹å’ŒåŠ£åŠ¿ã€‚ç„¶åé€šè¿‡ä¸æ–­çš„å­¦ä¹ ï¼Œå¾€ç®€å†ä¸Šè¿½åŠ æ–°çš„å†…å®¹ï¼Œç›´åˆ°ä½ è‡ªå·±çœ‹èµ·æ¥è§‰å¾—æœ‰ç«äº‰åŠ›äº†ï¼Œç®€å†æ‰ç®—é˜¶æ®µæ€§å®Œæˆäº†ã€‚</p><p>å…³äºç®€å†çš„å†™ä½œæŠ€å·§å’Œå·¥å…·ï¼Œæˆ‘ä¹‹å‰å†™è¿‡ä¸€ç¯‡æ–‡ç« è¯¦ç»†è¯´æ˜ï¼Œå¯ä»¥ç‚¹è¿™é‡Œé˜…è¯» <a href="https://juejin.im/book/59e17a7ff265da430629cc4e/section/59faec225188252abc5db42c" target="_blank" rel="external">ã€Šå¦‚ä½•å†™å‡ºä¸€ä»½ä¸“ä¸šçš„æŠ€æœ¯ç®€å†ã€‹</a> ï¼ˆè¿™ç¯‡æ–‡ç« æœ¬èº«ä¾ç„¶æ˜¯å…è´¹çš„ï¼Œä¸ç”¨è´­ä¹°å°å†Œå°±èƒ½è¯»ï¼‰</p><h2 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h2><p>( ç”±äºVç«™ä¸ŠæŸäº›åŒå­¦çš„ç–‘æƒ‘ï¼Œè¿™é‡Œæˆ‘ä¹Ÿè¡¥å……ä¸€ä¸‹å§ã€‚å­¦å¥½åŸºç¡€çŸ¥è¯†æ˜¯å¿…é¡»çš„ï¼Œè¿™æ˜¯æœ€åŸºæœ¬çš„ï¼Œå¦‚æœè¿™äº›åœ°æ–¹ä½ éƒ½ä¸¢åˆ†äº†ï¼Œè¿™äº›æŠ€å·§å°±éƒ½ç™½è´¹äº† )</p><p>( åˆ·é¢˜åº“æ˜¯é¢è¯•å¿…é¡»çš„ï¼Œä½†åªåˆ·é¢˜åº“å°±èˆæœ¬é€æœ«äº†ï¼Œå®è·µé©±åŠ¨çš„å­¦ä¹ ä¼šè®©ä½ å¯¹åŸºç¡€çš„ç†è§£æ›´æ·±å…¥ï¼Œè™½ç„¶è¾›è‹¦ç‚¹ã€‚é¡ºä¾¿poä¸€ä¸ªé¢˜åº“ç½‘ç«™ [nowcoder]<a href="https://www.nowcoder.com/" target="_blank" rel="external">https://www.nowcoder.com/</a>  )</p><p>ä¸çŸ¥ä¸è§‰å·²ç»å†™äº†è¿™ä¹ˆå¤šäº†ï¼Œå…¶å®è¿˜æœ‰ä¸€äº›å†…å®¹æƒ³è¯´ï¼Œä½†æš‚æ—¶å°±ä¸å†™åˆ°è¿™é‡Œäº†ã€‚</p><p>ç­‰ä»¥åæœ‰ç©ºæˆ‘å†æ•´ç†ä¸€ä¸ªå°å†Œå­å§ã€‚æˆ‘æŠŠæ–‡ç« ä¹ŸåŒæ—¶å‘å¸ƒåˆ°äº† GitHubï¼Œä»¥åçš„æ›´æ–°ä¼šé€šè¿‡ GitHub è¿›è¡Œï¼Œæ¬¢è¿ watch å’Œ star ã€‚<a href="https://github.com/easychen/career-guide-for-cs-graduate" target="_blank" rel="external">https://github.com/easychen/career-guide-for-cs-graduate</a></p><p>PSï¼šå¦‚æœä½ è¿˜ä¸çŸ¥é“æ€ä¹ˆç”¨ GitHubï¼Œé‚£ä¹ˆèµ¶ç´§å­¦å­¦å§ï¼Œè¿™å¯æ˜¯ç¨‹åºå‘˜çš„å¿…å¤‡ï¼ˆ<del>äº¤å‹</del>ï¼‰å·¥å…·å“¦ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;ä»Šå¤©æ—©æ™¨çœ‹åˆ°äº†Easyå¤§å¤§çš„è¿™ç¯‡æ–‡ç« ï¼Œåœ¨æ–‡ç« ä¸­è¯»åˆ°äº†è‡ªå·±çš„å½±å­ï¼Œå¹¶ä¸”ä¹Ÿæ˜ç™½äº†è¿™æ®µæ—¶é—´è‡ªå·±åœ¨å®ä¹ æ‹›è˜ä¸­çš„ä¸è¶³ï¼Œå—ç›ŠåŒªæµ…ã€‚å¸Œæœ›æˆ‘çš„å¥½å‹å¯ä»¥çœ‹åˆ°ä»ä¸­å—ç›Š&lt;br&gt;ç‰¹æ­¤è½¬è½½ Fromï¼š&lt;a href=&quot;https://github.com/easychen/
      
    
    </summary>
    
    
      <category term="Interview" scheme="https://edward7zhang.github.io/tags/Interview/"/>
    
      <category term="Inspire" scheme="https://edward7zhang.github.io/tags/Inspire/"/>
    
  </entry>
  
  <entry>
    <title>Androidç½‘ç»œç¼–ç¨‹é¢è¯•é¢˜é›†</title>
    <link href="https://edward7zhang.github.io/2018/04/17/Android%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%86/"/>
    <id>https://edward7zhang.github.io/2018/04/17/Androidç½‘ç»œç¼–ç¨‹é¢è¯•é¢˜é›†/</id>
    <published>2018-04-17T01:07:14.000Z</published>
    <updated>2018-04-17T01:39:28.610Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä¸€æ¬¡æ¬¡çš„æŒ‚äºä¸€é¢è®©æˆ‘ç­‹ç–²åŠ›ç«­â€¦æ„è¯†åˆ°è‡ªå·±å­˜åœ¨çœ¼é«˜æ‰‹ä½çš„çŠ¶æ€â€¦å‡†å¤‡é‡æ–°ä¸Šè·¯å¤¯å®åŸºç¡€<br>æœ¬ç‰‡æ–‡ç« Fork from <a href="https://github.com/guoxiaoxing/android-interview" target="_blank" rel="external">android-interview</a></p></blockquote><h2 id="ç½‘ç»œç¼–ç¨‹"><a href="#ç½‘ç»œç¼–ç¨‹" class="headerlink" title="ç½‘ç»œç¼–ç¨‹"></a>ç½‘ç»œç¼–ç¨‹</h2><h3 id="TCPä¸UDPæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#TCPä¸UDPæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="TCPä¸UDPæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>TCPä¸UDPæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><ol><li>TCPé¢å‘è¿æ¥ï¼ˆå¦‚æ‰“ç”µè¯è¦å…ˆæ‹¨å·å»ºç«‹è¿æ¥ï¼‰;UDPæ˜¯æ— è¿æ¥çš„ï¼Œå³å‘é€æ•°æ®ä¹‹å‰ä¸éœ€è¦å»ºç«‹è¿æ¥</li><li>TCPæä¾›å¯é çš„æœåŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡TCPè¿æ¥ä¼ é€çš„æ•°æ®ï¼Œæ— å·®é”™ï¼Œä¸ä¸¢å¤±ï¼Œä¸é‡å¤ï¼Œä¸”æŒ‰åºåˆ°è¾¾;UDPå°½æœ€å¤§åŠªåŠ›äº¤ä»˜ï¼Œå³ä¸ä¿è¯å¯é äº¤ä»˜</li><li>TCPé¢å‘å­—èŠ‚æµï¼Œå®é™…ä¸Šæ˜¯TCPæŠŠæ•°æ®çœ‹æˆä¸€è¿ä¸²æ— ç»“æ„çš„å­—èŠ‚æµ;UDPæ˜¯é¢å‘æŠ¥æ–‡çš„UDPæ²¡æœ‰æ‹¥å¡æ§åˆ¶ï¼Œå› æ­¤ç½‘ç»œå‡ºç°æ‹¥å¡ä¸ä¼šä½¿æºä¸»æœºçš„å‘é€é€Ÿç‡é™ä½ï¼ˆå¯¹å®æ—¶åº”ç”¨å¾ˆæœ‰ç”¨ï¼Œå¦‚IPç”µè¯ï¼Œå®æ—¶è§†é¢‘ä¼šè®®ç­‰ï¼‰</li><li>æ¯ä¸€æ¡TCPè¿æ¥åªèƒ½æ˜¯ç‚¹åˆ°ç‚¹çš„;UDPæ”¯æŒä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼Œå¤šå¯¹ä¸€å’Œå¤šå¯¹å¤šçš„äº¤äº’é€šä¿¡</li><li>TCPé¦–éƒ¨å¼€é”€20å­—èŠ‚;UDPçš„é¦–éƒ¨å¼€é”€å°ï¼Œåªæœ‰8ä¸ªå­—èŠ‚</li><li>TCPçš„é€»è¾‘é€šä¿¡ä¿¡é“æ˜¯å…¨åŒå·¥çš„å¯é ä¿¡é“ï¼ŒUDPåˆ™æ˜¯ä¸å¯é ä¿¡é“</li></ol><h3 id="ç®€å•ä»‹ç»ä¸€ä¸‹TCPä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡åˆ†æ‰‹è¿‡ç¨‹ï¼Ÿ"><a href="#ç®€å•ä»‹ç»ä¸€ä¸‹TCPä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡åˆ†æ‰‹è¿‡ç¨‹ï¼Ÿ" class="headerlink" title="ç®€å•ä»‹ç»ä¸€ä¸‹TCPä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡åˆ†æ‰‹è¿‡ç¨‹ï¼Ÿ"></a>ç®€å•ä»‹ç»ä¸€ä¸‹TCPä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡åˆ†æ‰‹è¿‡ç¨‹ï¼Ÿ</h3><p>TCPç”¨<a href="https://zh.wikipedia.org/wiki/%E4%BC%A0%E8%BE%93%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AE#å»ºç«‹é€šè·¯" target="_blank" rel="external">ä¸‰æ¬¡æ¡æ‰‹</a>ï¼ˆthree-way handshakeï¼‰è¿‡ç¨‹åˆ›å»ºä¸€ä¸ªè¿æ¥ï¼Œä½¿ç”¨å››æ¬¡åˆ†æ‰‹<br>å…³é—­ä¸€ä¸ªè¿æ¥ã€‚</p><p>ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡åˆ†æ‰‹çš„æµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/practice/network/three_way_handshake.jpeg" width="500"></p><p>ä¸‰æ¬¡æ¡æ‰‹</p><ul><li>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå»ºç«‹è¿æ¥ã€‚å®¢æˆ·ç«¯å‘é€è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µï¼Œå°†SYNä½ç½®ä¸º1ï¼ŒSequence Numberä¸ºxï¼›ç„¶åï¼Œå®¢æˆ·ç«¯è¿›å…¥SYN_SENDçŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨çš„ç¡®è®¤ï¼›</li><li>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ°SYNæŠ¥æ–‡æ®µã€‚æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯çš„SYNæŠ¥æ–‡æ®µï¼Œéœ€è¦å¯¹è¿™ä¸ªSYNæŠ¥æ–‡æ®µè¿›è¡Œç¡®è®¤ï¼Œè®¾ç½®Acknowledgment Numberä¸ºx+1(Sequence Number+1)ï¼›åŒæ—¶ï¼Œè‡ªå·±è‡ªå·±è¿˜è¦å‘é€SYNè¯·æ±‚ä¿¡æ¯ï¼Œå°†SYNä½ç½®ä¸º1ï¼ŒSequence Numberä¸ºyï¼›æœåŠ¡å™¨ç«¯å°†ä¸Šè¿°æ‰€æœ‰ä¿¡æ¯æ”¾åˆ°ä¸€ä¸ªæŠ¥æ–‡æ®µï¼ˆå³SYN+ACKæŠ¥æ–‡æ®µï¼‰ä¸­ï¼Œä¸€å¹¶å‘é€ç»™å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶æœåŠ¡å™¨è¿›å…¥SYN_RECVçŠ¶æ€ï¼›</li><li>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„SYN+ACKæŠ¥æ–‡æ®µã€‚ç„¶åå°†Acknowledgment Numberè®¾ç½®ä¸ºy+1ï¼Œå‘æœåŠ¡å™¨å‘é€ACKæŠ¥æ–‡æ®µï¼Œè¿™ä¸ªæŠ¥æ–‡æ®µå‘é€å®Œæ¯•ä»¥åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯éƒ½è¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œå®ŒæˆTCPä¸‰æ¬¡æ¡æ‰‹ã€‚<br>å®Œæˆäº†ä¸‰æ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å°±å¯ä»¥å¼€å§‹ä¼ é€æ•°æ®ã€‚ä»¥ä¸Šå°±æ˜¯TCPä¸‰æ¬¡æ¡æ‰‹çš„æ€»ä½“ä»‹ç»ã€‚</li></ul><p>å››æ¬¡åˆ†æ‰‹</p><ul><li>ç¬¬ä¸€æ¬¡åˆ†æ‰‹ï¼šä¸»æœº1ï¼ˆå¯ä»¥ä½¿å®¢æˆ·ç«¯ï¼Œä¹Ÿå¯ä»¥æ˜¯æœåŠ¡å™¨ç«¯ï¼‰ï¼Œè®¾ç½®Sequence Numberå’ŒAcknowledgment Numberï¼Œå‘ä¸»æœº2å‘é€ä¸€ä¸ªFINæŠ¥æ–‡æ®µï¼›æ­¤æ—¶ï¼Œä¸»æœº1è¿›å…¥FIN_WAIT_1çŠ¶æ€ï¼›è¿™è¡¨ç¤ºä¸»æœº1æ²¡æœ‰æ•°æ®è¦å‘é€ç»™ä¸»æœº2äº†ï¼›</li><li>ç¬¬äºŒæ¬¡åˆ†æ‰‹ï¼šä¸»æœº2æ”¶åˆ°äº†ä¸»æœº1å‘é€çš„FINæŠ¥æ–‡æ®µï¼Œå‘ä¸»æœº1å›ä¸€ä¸ªACKæŠ¥æ–‡æ®µï¼ŒAcknowledgment Numberä¸ºSequence NumberåŠ 1ï¼›ä¸»æœº1è¿›å…¥FIN_WAIT_2çŠ¶æ€ï¼›ä¸»æœº2å‘Šè¯‰ä¸»æœº1ï¼Œæˆ‘â€œåŒæ„â€ä½ çš„å…³é—­è¯·æ±‚ï¼›</li><li>ç¬¬ä¸‰æ¬¡åˆ†æ‰‹ï¼šä¸»æœº2å‘ä¸»æœº1å‘é€FINæŠ¥æ–‡æ®µï¼Œè¯·æ±‚å…³é—­è¿æ¥ï¼ŒåŒæ—¶ä¸»æœº2è¿›å…¥LAST_ACKçŠ¶æ€ï¼›</li><li>ç¬¬å››æ¬¡åˆ†æ‰‹ï¼šä¸»æœº1æ”¶åˆ°ä¸»æœº2å‘é€çš„FINæŠ¥æ–‡æ®µï¼Œå‘ä¸»æœº2å‘é€ACKæŠ¥æ–‡æ®µï¼Œç„¶åä¸»æœº1è¿›å…¥TIME_WAITçŠ¶æ€ï¼›ä¸»æœº2æ”¶åˆ°ä¸»æœº1çš„ACKæŠ¥æ–‡æ®µä»¥åï¼Œå°±å…³é—­è¿æ¥ï¼›æ­¤æ—¶ï¼Œä¸»æœº1ç­‰å¾…2MSLåä¾ç„¶æ²¡æœ‰æ”¶åˆ°å›å¤ï¼Œåˆ™è¯æ˜Serverç«¯å·²æ­£å¸¸å…³é—­ï¼Œé‚£å¥½ï¼Œä¸»æœº1ä¹Ÿå¯ä»¥å…³é—­è¿æ¥äº†ã€‚</li></ul><p>ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡åˆ†æ‰‹ä¹Ÿæ˜¯ä¸ªè€ç”Ÿå¸¸è°ˆçš„æ¦‚å¿µï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­è¯´æ˜ä¸€ä¸‹ã€‚</p><p>ä¸‰æ¬¡æ¡æ‰‹</p><blockquote><p>ä¾‹å¦‚ä½ å°æ—¶å€™å‡ºå»ç©ï¼Œç»å¸¸ç©å¿˜äº†å›å®¶åƒé¥­ã€‚ä½ å¦ˆå¦ˆä¹Ÿç»å¸¸è¿‡æ¥å–Šä½ ã€‚å¦‚æœä½ æ²¡æœ‰èµ°è¿œï¼Œåœ¨é—¨å£çš„å°åœŸå †ä¸Šç©æ³¥å·´ï¼Œä½ å¦ˆå¦ˆä¼šå–Šï¼šâ€å°æ–°ï¼Œå›å®¶åƒé¥­äº†â€ã€‚ä½ å¬åˆ°åä¼šå›åº”ï¼šâ€çŸ¥é“äº†ï¼Œä¸€ä¼šå°±å›å»â€ã€‚å¦ˆå¦ˆå¬<br>åˆ°ä½ çš„å›åº”ååˆè¯´ï¼šâ€å¿«ç‚¹å›æ¥ï¼Œé¥­è¦å‡‰äº†â€ã€‚è¿™æ ·ä½ å¦ˆå¦ˆå’Œä½ å°±å®Œæˆäº†ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ã€‚ğŸ˜è¯´åˆ°è¿™é‡Œä½ ä¹Ÿå¯ä»¥ç†è§£ä¸‰æ¬¡æ¡æ‰‹çš„å¿…è¦æ€§ï¼Œå°‘äº†å…¶ä¸­ä¸€ä¸ªç¯èŠ‚ï¼Œå¦ä¸€æ–¹å°±ä¼šé™·å…¥ç­‰å¾…ä¹‹ä¸­ã€‚</p></blockquote><p>ä¸‰æ¬¡æ¡æ‰‹çš„ç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢å·²å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µçªç„¶åˆä¼ é€åˆ°äº†æœåŠ¡ç«¯ï¼Œå› è€Œäº§ç”Ÿé”™è¯¯.</p><p>å››æ¬¡åˆ†æ‰‹</p><blockquote><p>ä¾‹å¦‚å¶åƒè¨€æƒ…å‰§å¹²å‡€åˆ©è½çš„åˆ†æ‰‹ï¼Œå¥³ä¸»å¯¹ç”·ä¸»è¯´ï¼šæˆ‘ä»¬åˆ†æ‰‹å§ğŸ™„ï¼Œç”·ä¸»è¯´ï¼šåˆ†å°±åˆ†å§ğŸ˜°ã€‚å¥³ä¸»è¯´ï¼šä½ æœç„¶æ˜¯ä¸çˆ±æˆ‘äº†ï¼Œä½ åªçŸ¥é“è®©æˆ‘å¤šå–çƒ­æ°´ğŸ™„ã€‚ç”·ä¸»è¯´ï¼šäº‹åˆ°å¦‚ä»Šä¹Ÿæ²¡ä»€ä¹ˆå¥½è¯´çš„äº†ï¼Œç¥ä½ å¹¸ç¦ğŸ™ƒã€‚å››æ¬¡åˆ†æ‰‹å®Œæˆã€‚è¯´åˆ°è¿™é‡Œä½ å¯ä»¥ç†è§£<br>äº†å››æ¬¡åˆ†æ‰‹çš„å¿…è¦æ€§ï¼Œç¬¬ä¸€æ¬¡æ˜¯å¥³æ–¹ï¼ˆå®¢æˆ·ç«¯ï¼‰æå‡ºåˆ†æ‰‹ï¼Œç¬¬äºŒæ¬¡æ˜¯ç”·ä¸»ï¼ˆæœåŠ¡ç«¯ï¼‰åŒæ„å¥³ä¸»åˆ†æ‰‹ï¼Œç¬¬ä¸‰æ¬¡æ˜¯å¥³ä¸»ç¡®å®šç”·ä¸»ä¸å†çˆ±å¥¹ï¼Œä¹ŸåŒæ„ç”·ä¸»åˆ†æ‰‹ã€‚ç¬¬å››æ¬¡ä¸¤äººå½»åº•æ‹œæ‹œï¼ˆæ–­å¼€è¿æ¥ï¼‰ã€‚</p></blockquote><p>å› ä¸ºTCPæ˜¯å…¨åŒå·¥æ¨¡å¼ï¼Œæ‰€ä»¥å››æ¬¡åˆ†æ‰‹çš„ç›®çš„å°±æ˜¯ä¸ºäº†å¯é åœ°å…³é—­è¿æ¥ã€‚</p><h3 id="TCPå¦‚ä½•ä¿è¯æ•°æ®ä¼ è¾“çš„å¯é æ€§ï¼Ÿ"><a href="#TCPå¦‚ä½•ä¿è¯æ•°æ®ä¼ è¾“çš„å¯é æ€§ï¼Ÿ" class="headerlink" title="TCPå¦‚ä½•ä¿è¯æ•°æ®ä¼ è¾“çš„å¯é æ€§ï¼Ÿ"></a>TCPå¦‚ä½•ä¿è¯æ•°æ®ä¼ è¾“çš„å¯é æ€§ï¼Ÿ</h3><ol><li>ç¡®è®¤å’Œé‡ä¼ ï¼šæ¥æ”¶æ–¹æ”¶åˆ°æŠ¥æ–‡åå°±ä¼šè¿›è¡Œç¡®è®¤ï¼Œå‘é€æ–¹ä¸€æ®µæ—¶é—´æ²¡æœ‰æ”¶åˆ°ç¡®è®¤å°±ä¼šé‡ä¼ ã€‚</li><li>æ•°æ®æ ¡éªŒã€‚</li><li>æ•°æ®åˆç†åˆ†ç‰‡ä¸æ’åºï¼ŒTCPä¼šå¯¹æ•°æ®è¿›è¡Œåˆ†ç‰‡ï¼Œæ¥æ”¶æ–¹ä¼šç¼“å­˜ä¸ºæŒ‰åºåˆ°è¾¾çš„æ•°æ®ï¼Œé‡æ–°æ’åºåå†æäº¤ç»™åº”ç”¨å±‚ã€‚</li><li>æµç¨‹æ§åˆ¶ï¼šå½“æ¥æ”¶æ–¹æ¥ä¸åŠæ¥æ”¶å‘é€çš„æ•°æ®æ—¶ï¼Œåˆ™ä¼šæç¤ºå‘é€æ–¹é™ä½å‘é€çš„é€Ÿåº¦ï¼Œé˜²æ­¢åŒ…ä¸¢å¤±ã€‚</li><li>æ‹¥å¡æ§åˆ¶ï¼šå½“ç½‘ç»œå‘ç”Ÿæ‹¥å¡æ—¶ï¼Œå‡å°‘æ•°æ®çš„å‘é€ã€‚</li></ol><h3 id="HTTPä¸HTTPSæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#HTTPä¸HTTPSæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="HTTPä¸HTTPSæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>HTTPä¸HTTPSæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><blockquote><p><a href="https://zh.wikipedia.org/wiki/%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%AE%89%E5%85%A8%E5%8D%8F%E8%AE%AE" target="_blank" rel="external">HTTPS</a>æ˜¯ä¸€ç§é€šè¿‡è®¡ç®—æœºç½‘ç»œè¿›è¡Œå®‰å…¨é€šä¿¡çš„ä¼ è¾“åè®®ã€‚HTTPSç»ç”±HTTPè¿›è¡Œé€šä¿¡ï¼Œä½†åˆ©ç”¨SSL/TLSæ¥åŠ å¯†æ•°æ®åŒ…ã€‚HTTPSå¼€å‘çš„ä¸»è¦ç›®çš„ï¼Œæ˜¯æä¾›å¯¹ç½‘ç«™æœåŠ¡å™¨çš„èº«ä»½<br>è®¤è¯ï¼Œä¿æŠ¤äº¤æ¢æ•°æ®çš„éšç§ä¸å®Œæ•´æ€§ã€‚</p></blockquote><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯ä»¥å¾ˆæ˜æ˜¾çš„çœ‹å‡ºä¸¤ä¸ªçš„åŒºåˆ«ï¼š</p><p><img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/practice/network/http_https.png" width="500"></p><p>æ³¨ï¼šTLSæ˜¯SSLçš„å‡çº§æ›¿ä»£ç‰ˆï¼Œå…·ä½“å‘å±•å†å²å¯ä»¥å‚è€ƒ<a href="https://zh.wikipedia.org/wiki/%E5%82%B3%E8%BC%B8%E5%B1%A4%E5%AE%89%E5%85%A8%E6%80%A7%E5%8D%94%E5%AE%9A" target="_blank" rel="external">ä¼ è¾“å±‚å®‰å…¨æ€§åè®®</a>ã€‚</p><p>HTTPä¸HTTPSåœ¨å†™æ³•ä¸Šçš„åŒºåˆ«ä¹Ÿæ˜¯å‰ç¼€çš„ä¸åŒï¼Œå®¢æˆ·ç«¯å¤„ç†çš„æ–¹å¼ä¹Ÿä¸åŒï¼Œå…·ä½“è¯´æ¥ï¼š</p><ul><li>å¦‚æœURLçš„åè®®æ˜¯HTTPï¼Œåˆ™å®¢æˆ·ç«¯ä¼šæ‰“å¼€ä¸€æ¡åˆ°æœåŠ¡ç«¯ç«¯å£80ï¼ˆé»˜è®¤ï¼‰çš„è¿æ¥ï¼Œå¹¶å‘å…¶å‘é€è€çš„HTTPè¯·æ±‚ã€‚</li><li>å¦‚æœURLçš„åè®®æ˜¯HTTPSï¼Œåˆ™å®¢æˆ·ç«¯ä¼šæ‰“å¼€ä¸€æ¡åˆ°æœåŠ¡ç«¯ç«¯å£443ï¼ˆé»˜è®¤ï¼‰çš„è¿æ¥ï¼Œç„¶åä¸æœåŠ¡å™¨æ¡æ‰‹ï¼Œä»¥äºŒè¿›åˆ¶æ ¼å¼ä¸æœåŠ¡å™¨äº¤æ¢ä¸€äº›SSLçš„å®‰å…¨å‚æ•°ï¼Œé™„ä¸ŠåŠ å¯†çš„<br>HTTPè¯·æ±‚ã€‚</li></ul><p>æ‰€ä»¥ä½ å¯ä»¥çœ‹åˆ°ï¼ŒHTTPSæ¯”HTTPå¤šäº†ä¸€å±‚ä¸SSLçš„è¿æ¥ï¼Œè¿™ä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯SSLæ¡æ‰‹çš„è¿‡ç¨‹ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸»è¦å®Œæˆä»¥ä¸‹å·¥ä½œï¼š</p><ul><li>äº¤æ¢åè®®ç‰ˆæœ¬å·</li><li>é€‰æ‹©ä¸€ä¸ªä¸¤ç«¯éƒ½äº†è§£çš„å¯†ç </li><li>å¯¹ä¸¤ç«¯çš„èº«ä»½è¿›è¡Œè®¤è¯</li><li>ç”Ÿæˆä¸´æ—¶çš„ä¼šè¯å¯†é’¥ï¼Œä»¥ä¾¿åŠ å¯†ä¿¡é“ã€‚</li></ul><p>SSLæ¡æ‰‹æ˜¯ä¸€ä¸ªç›¸å¯¹æ¯”è¾ƒå¤æ‚çš„è¿‡ç¨‹ï¼Œæ›´å¤šå…³äºSSLæ¡æ‰‹çš„è¿‡ç¨‹ç»†èŠ‚å¯ä»¥å‚è€ƒ<a href="https://www.wosign.com/faq/faq2016-0309-04.htm" target="_blank" rel="external">TLS/SSLæ¡æ‰‹è¿‡ç¨‹</a></p><p>SSL/TSLçš„å¸¸è§å¼€æºå®ç°æ˜¯OpenSSLï¼ŒOpenSSLæ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç çš„è½¯ä»¶åº“åŒ…ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨è¿™ä¸ªåŒ…æ¥è¿›è¡Œå®‰å…¨é€šä¿¡ï¼Œé¿å…çªƒå¬ï¼ŒåŒæ—¶ç¡®è®¤å¦ä¸€ç«¯è¿æ¥è€…çš„èº«ä»½ã€‚è¿™ä¸ªåŒ…å¹¿æ³›è¢«åº”ç”¨åœ¨äº’è”ç½‘çš„ç½‘é¡µæœåŠ¡å™¨ä¸Šã€‚<br>æ›´å¤šæºäºOpenSSLçš„æŠ€æœ¯ç»†èŠ‚å¯ä»¥å‚è€ƒ<a href="https://www.openssl.org/" target="_blank" rel="external">OpenSSL</a>ã€‚</p><h3 id="è°ˆä¸€è°ˆå¯¹HTTPç¼“å­˜çš„ç†è§£ï¼Ÿ"><a href="#è°ˆä¸€è°ˆå¯¹HTTPç¼“å­˜çš„ç†è§£ï¼Ÿ" class="headerlink" title="è°ˆä¸€è°ˆå¯¹HTTPç¼“å­˜çš„ç†è§£ï¼Ÿ"></a>è°ˆä¸€è°ˆå¯¹HTTPç¼“å­˜çš„ç†è§£ï¼Ÿ</h3><p>HTTPçš„ç¼“å­˜æœºåˆ¶ä¹Ÿæ˜¯ä¾èµ–äºè¯·æ±‚å’Œå“åº”headeré‡Œçš„å‚æ•°ç±»å®ç°çš„ï¼Œæœ€ç»ˆå“åº”å¼ä»ç¼“å­˜ä¸­å»ï¼Œè¿˜æ˜¯ä»æœåŠ¡ç«¯é‡æ–°æ‹‰å–ï¼ŒHTTPçš„ç¼“å­˜æœºåˆ¶çš„æµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p>ğŸ‘‰ ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹å¤§å›¾</p><p><img src="https://github.com/guoxiaoxing/android-open-framwork-analysis/raw/master/art/okhttp/http_cache_structure.png" width="600"></p><p>HTTPçš„ç¼“å­˜å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼š</p><ul><li>å¼ºåˆ¶ç¼“å­˜ï¼šéœ€è¦æœåŠ¡ç«¯å‚ä¸åˆ¤æ–­æ˜¯å¦ç»§ç»­ä½¿ç”¨ç¼“å­˜ï¼Œå½“å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡è¯·æ±‚æ•°æ®æ˜¯ï¼ŒæœåŠ¡ç«¯è¿”å›äº†ç¼“å­˜çš„è¿‡æœŸæ—¶é—´ï¼ˆExpiresä¸Cache-Controlï¼‰ï¼Œæ²¡æœ‰è¿‡æœŸå°±å¯ä»¥ç»§ç»­ä½¿ç”¨ç¼“å­˜ï¼Œå¦åˆ™åˆ™ä¸é€‚ç”¨ï¼Œæ— éœ€å†å‘æœåŠ¡ç«¯è¯¢é—®ã€‚</li><li>å¯¹æ¯”ç¼“å­˜ï¼šéœ€è¦æœåŠ¡ç«¯å‚ä¸åˆ¤æ–­æ˜¯å¦ç»§ç»­ä½¿ç”¨ç¼“å­˜ï¼Œå½“å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡è¯·æ±‚æ•°æ®æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šå°†ç¼“å­˜æ ‡è¯†ï¼ˆLast-Modified/If-Modified-Sinceä¸Etag/If-None-Matchï¼‰ä¸æ•°æ®ä¸€èµ·è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å°†ä¸¤è€…éƒ½å¤‡ä»½åˆ°ç¼“å­˜ä¸­ ï¼Œå†æ¬¡è¯·æ±‚æ•°æ®æ—¶ï¼Œå®¢æˆ·ç«¯å°†ä¸Šæ¬¡å¤‡ä»½çš„ç¼“å­˜<br>æ ‡è¯†å‘é€ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯æ ¹æ®ç¼“å­˜æ ‡è¯†è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœè¿”å›304ï¼Œåˆ™è¡¨ç¤ºé€šçŸ¥å®¢æˆ·ç«¯å¯ä»¥ç»§ç»­ä½¿ç”¨ç¼“å­˜ã€‚</li></ul><p>å¼ºåˆ¶ç¼“å­˜ä¼˜å…ˆäºå¯¹æ¯”ç¼“å­˜ã€‚</p><p>ä¸Šé¢æåˆ°å¼ºåˆ¶ç¼“å­˜ä½¿ç”¨çš„çš„ä¸¤ä¸ªæ ‡è¯†ï¼š</p><ul><li>Expiresï¼šExpiresçš„å€¼ä¸ºæœåŠ¡ç«¯è¿”å›çš„åˆ°æœŸæ—¶é—´ï¼Œå³ä¸‹ä¸€æ¬¡è¯·æ±‚æ—¶ï¼Œè¯·æ±‚æ—¶é—´å°äºæœåŠ¡ç«¯è¿”å›çš„åˆ°æœŸæ—¶é—´ï¼Œç›´æ¥ä½¿ç”¨ç¼“å­˜æ•°æ®ã€‚åˆ°æœŸæ—¶é—´æ˜¯æœåŠ¡ç«¯ç”Ÿæˆçš„ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„æ—¶é—´å¯èƒ½æœ‰è¯¯å·®ã€‚</li><li>Cache-Controlï¼šExpiresæœ‰ä¸ªæ—¶é—´æ ¡éªŒçš„é—®é¢˜ï¼Œæ‰€æœ‰HTTP1.1é‡‡ç”¨Cache-Controlæ›¿ä»£Expiresã€‚</li></ul><p>Cache-Controlçš„å–å€¼æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li>private:             å®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜ã€‚</li><li>public:              å®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨éƒ½å¯ç¼“å­˜ã€‚</li><li>max-age=xxx:   ç¼“å­˜çš„å†…å®¹å°†åœ¨ xxx ç§’åå¤±æ•ˆ</li><li>no-cache:          éœ€è¦ä½¿ç”¨å¯¹æ¯”ç¼“å­˜æ¥éªŒè¯ç¼“å­˜æ•°æ®ã€‚</li><li>no-store:           æ‰€æœ‰å†…å®¹éƒ½ä¸ä¼šç¼“å­˜ï¼Œå¼ºåˆ¶ç¼“å­˜ï¼Œå¯¹æ¯”ç¼“å­˜éƒ½ä¸ä¼šè§¦å‘ã€‚</li></ul><p>æˆ‘ä»¬å†æ¥çœ‹çœ‹å¯¹æ¯”ç¼“å­˜çš„ä¸¤ä¸ªæ ‡è¯†ï¼š</p><p><strong>Last-Modified/If-Modified-Since</strong></p><p>Last-Modified è¡¨ç¤ºèµ„æºä¸Šæ¬¡ä¿®æ”¹çš„æ—¶é—´ã€‚</p><p>å½“å®¢æˆ·ç«¯å‘é€ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶ï¼ŒæœåŠ¡ç«¯è¿”å›èµ„æºä¸Šæ¬¡ä¿®æ”¹çš„æ—¶é—´ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Last-Modified: Tue, <span class="number">12</span> Jan <span class="number">2016</span> <span class="number">09</span>:<span class="number">31</span>:<span class="number">27</span> GMT</div></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯å†æ¬¡å‘é€ï¼Œä¼šåœ¨headeré‡Œæºå¸¦If-Modified-Sinceã€‚å°†ä¸Šæ¬¡æœåŠ¡ç«¯è¿”å›çš„èµ„æºæ—¶é—´ä¸Šä¼ ç»™æœåŠ¡ç«¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">If-Modified-Since: Tue, <span class="number">12</span> Jan <span class="number">2016</span> <span class="number">09</span>:<span class="number">31</span>:<span class="number">27</span> GMT</div></pre></td></tr></table></figure><p>æœåŠ¡ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„èµ„æºä¿®æ”¹æ—¶é—´ï¼Œä¸è‡ªå·±å½“å‰çš„èµ„æºä¿®æ”¹æ—¶é—´è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœè‡ªå·±çš„èµ„æºä¿®æ”¹æ—¶é—´å¤§äºå®¢æˆ·ç«¯å‘æ¥çš„èµ„æºä¿®æ”¹æ—¶é—´ï¼Œåˆ™è¯´æ˜èµ„æºåšè¿‡ä¿®æ”¹ï¼Œ<br>åˆ™è¿”å›200è¡¨ç¤ºéœ€è¦é‡æ–°è¯·æ±‚èµ„æºï¼Œå¦åˆ™è¿”å›304è¡¨ç¤ºèµ„æºæ²¡æœ‰è¢«ä¿®æ”¹ï¼Œå¯ä»¥ç»§ç»­ä½¿ç”¨ç¼“å­˜ã€‚</p><p>ä¸Šé¢æ˜¯ä¸€ç§æ—¶é—´æˆ³æ ‡è®°èµ„æºæ˜¯å¦ä¿®æ”¹çš„æ–¹æ³•ï¼Œè¿˜æœ‰ä¸€ç§èµ„æºæ ‡è¯†ç ETagçš„æ–¹å¼æ¥æ ‡è®°æ˜¯å¦ä¿®æ”¹ï¼Œå¦‚æœæ ‡è¯†ç å‘ç”Ÿæ”¹å˜ï¼Œåˆ™è¯´æ˜èµ„æºå·²ç»è¢«ä¿®æ”¹ï¼ŒETagä¼˜å…ˆçº§é«˜äºLast-Modifiedã€‚</p><p><strong>Etag/If-None-Match</strong></p><p>ETagæ˜¯èµ„æºæ–‡ä»¶çš„ä¸€ç§æ ‡è¯†ç ï¼Œå½“å®¢æˆ·ç«¯å‘é€ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šè¿”å›å½“å‰èµ„æºçš„æ ‡è¯†ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ETag: <span class="string">"5694c7ef-24dc"</span></div></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯å†æ¬¡å‘é€ï¼Œä¼šåœ¨headeré‡Œæºå¸¦ä¸Šæ¬¡æœåŠ¡ç«¯è¿”å›çš„èµ„æºæ ‡è¯†ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">If-None-Match:<span class="string">"5694c7ef-24dc"</span></div></pre></td></tr></table></figure><p>æœåŠ¡ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„èµ„æºæ ‡è¯†ç ï¼Œåˆ™ä¼šä¸è‡ªå·±å½“å‰çš„èµ„æºå—è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœä¸åŒï¼Œåˆ™è¯´æ˜èµ„æºå·²ç»è¢«ä¿®æ”¹ï¼Œåˆ™è¿”å›200ï¼Œå¦‚æœç›¸åŒåˆ™è¯´æ˜èµ„æºæ²¡æœ‰è¢«ä¿®æ”¹ï¼Œè¿”å›<br>304ï¼Œå®¢æˆ·ç«¯å¯ä»¥ç»§ç»­ä½¿ç”¨ç¼“å­˜ã€‚</p><h3 id="HTTPSæ˜¯å¦‚ä½•ä¿è¯å®‰å…¨çš„ï¼Œè¯ä¹¦å¦‚ä½•æ ¡éªŒï¼Ÿ"><a href="#HTTPSæ˜¯å¦‚ä½•ä¿è¯å®‰å…¨çš„ï¼Œè¯ä¹¦å¦‚ä½•æ ¡éªŒï¼Ÿ" class="headerlink" title="HTTPSæ˜¯å¦‚ä½•ä¿è¯å®‰å…¨çš„ï¼Œè¯ä¹¦å¦‚ä½•æ ¡éªŒï¼Ÿ"></a>HTTPSæ˜¯å¦‚ä½•ä¿è¯å®‰å…¨çš„ï¼Œè¯ä¹¦å¦‚ä½•æ ¡éªŒï¼Ÿ</h3><h3 id="HTTPå¦‚ä½•å®ç°é•¿è¿æ¥ï¼Ÿ"><a href="#HTTPå¦‚ä½•å®ç°é•¿è¿æ¥ï¼Ÿ" class="headerlink" title="HTTPå¦‚ä½•å®ç°é•¿è¿æ¥ï¼Ÿ"></a>HTTPå¦‚ä½•å®ç°é•¿è¿æ¥ï¼Ÿ</h3>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;ä¸€æ¬¡æ¬¡çš„æŒ‚äºä¸€é¢è®©æˆ‘ç­‹ç–²åŠ›ç«­â€¦æ„è¯†åˆ°è‡ªå·±å­˜åœ¨çœ¼é«˜æ‰‹ä½çš„çŠ¶æ€â€¦å‡†å¤‡é‡æ–°ä¸Šè·¯å¤¯å®åŸºç¡€&lt;br&gt;æœ¬ç‰‡æ–‡ç« Fork from &lt;a href=&quot;https://github.com/guoxiaoxing/android-interview&quot; target=
      
    
    </summary>
    
    
      <category term="Android" scheme="https://edward7zhang.github.io/tags/Android/"/>
    
      <category term="Interview" scheme="https://edward7zhang.github.io/tags/Interview/"/>
    
  </entry>
  
  <entry>
    <title>HTTPåè®®å¤ä¹ </title>
    <link href="https://edward7zhang.github.io/2018/04/16/HTTP%E5%8D%8F%E8%AE%AE/"/>
    <id>https://edward7zhang.github.io/2018/04/16/HTTPåè®®/</id>
    <published>2018-04-16T02:43:13.000Z</published>
    <updated>2018-04-16T13:58:56.825Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å¥‡è¿¹èˆ¬çš„è…¾è®¯ç¬”è¯•é€šè¿‡äº†ï¼Œæ˜¨å¤©ä¸‹åˆç»è¿‡äº†ä¸€é¢â€¦å‘ç°ä¹‹å‰ç€çœ¼äºAndroidä¸Javaçš„çŸ¥è¯†è€Œæ²¡æœ‰å¯¹è®¡ç®—æœºç½‘ç»œç³»ç»Ÿçš„å¤ä¹ â€¦å¯¼è‡´äº†è¿™æ¬¡é¢è¯•çš„æ»‘é“å¢â€¦æ‰€ä»¥æƒ³è¿›è¿™æ ·çš„ä¸€çº¿å¤§å‚åšä¸€ååˆæ ¼çš„ç¨‹åºå‘˜è¿˜æ˜¯è¦å…¨é¢å‘å±•â€¦ä¸èƒ½é¡¾æ­¤å¤±å½¼</p></blockquote><h1 id="Httpåè®®"><a href="#Httpåè®®" class="headerlink" title="Httpåè®®"></a>Httpåè®®</h1><hr><ul><li>é»˜è®¤ç«¯å£ï¼š80</li></ul><h2 id="Httpåè®®çš„ä¸»è¦ç‰¹ç‚¹"><a href="#Httpåè®®çš„ä¸»è¦ç‰¹ç‚¹" class="headerlink" title="Httpåè®®çš„ä¸»è¦ç‰¹ç‚¹"></a>Httpåè®®çš„ä¸»è¦ç‰¹ç‚¹</h2><hr><ol><li>æ”¯æŒå®¢æˆ·ï¼æœåŠ¡å™¨æ¨¡å¼</li><li>ç®€å•å¿«é€Ÿï¼šå®¢æˆ·å‘æœåŠ¡ç«¯è¯·æ±‚æœåŠ¡æ—¶ï¼Œåªéœ€ä¼ é€è¯·æ±‚æ–¹å¼å’Œè·¯å¾„ã€‚</li><li>çµæ´»ï¼šå…è®¸ä¼ è¾“ä»»æ„ç±»å‹çš„æ•°æ®å¯¹è±¡ã€‚ç”±Content-TypeåŠ ä»¥æ ‡è®°ã€‚</li><li>æ— è¿æ¥ï¼šæ¯æ¬¡å“åº”ä¸€ä¸ªè¯·æ±‚ï¼Œå“åº”å®Œæˆä»¥åå°±æ–­å¼€è¿æ¥ã€‚</li><li>æ— çŠ¶æ€ï¼šæœåŠ¡å™¨ä¸ä¿å­˜æµè§ˆå™¨çš„ä»»ä½•ä¿¡æ¯ã€‚æ¯æ¬¡æäº¤çš„è¯·æ±‚ä¹‹é—´æ²¡æœ‰å…³è”ã€‚</li></ol><h3 id="éæŒç»­æ€§å’ŒæŒç»­æ€§"><a href="#éæŒç»­æ€§å’ŒæŒç»­æ€§" class="headerlink" title="éæŒç»­æ€§å’ŒæŒç»­æ€§"></a>éæŒç»­æ€§å’ŒæŒç»­æ€§</h3><hr><ul><li>HTTP1.0é»˜è®¤éæŒç»­æ€§ï¼›HTTP1.1é»˜è®¤æŒç»­æ€§</li></ul><h4 id="æŒç»­æ€§"><a href="#æŒç»­æ€§" class="headerlink" title="æŒç»­æ€§"></a>æŒç»­æ€§</h4><p>æµè§ˆå™¨å’ŒæœåŠ¡å™¨å»ºç«‹TCPè¿æ¥åï¼Œå¯ä»¥è¯·æ±‚å¤šä¸ªå¯¹è±¡</p><h4 id="éæŒç»­æ€§"><a href="#éæŒç»­æ€§" class="headerlink" title="éæŒç»­æ€§"></a>éæŒç»­æ€§</h4><p>æµè§ˆå™¨å’ŒæœåŠ¡å™¨å»ºç«‹TCPè¿æ¥åï¼Œåªèƒ½è¯·æ±‚ä¸€ä¸ªå¯¹è±¡</p><h3 id="éæµæ°´çº¿å’Œæµæ°´çº¿"><a href="#éæµæ°´çº¿å’Œæµæ°´çº¿" class="headerlink" title="éæµæ°´çº¿å’Œæµæ°´çº¿"></a>éæµæ°´çº¿å’Œæµæ°´çº¿</h3><hr><p>ç±»ä¼¼äºç»„æˆé‡Œé¢çš„æµæ°´æ“ä½œ</p><ul><li>æµæ°´çº¿ï¼šä¸å¿…ç­‰åˆ°æ”¶åˆ°æœåŠ¡å™¨çš„å›åº”å°±å‘é€ä¸‹ä¸€ä¸ªæŠ¥æ–‡ã€‚</li><li>éæµæ°´çº¿ï¼šå‘å‡ºä¸€ä¸ªæŠ¥æ–‡ï¼Œç­‰åˆ°å“åº”ï¼Œå†å‘ä¸‹ä¸€ä¸ªæŠ¥æ–‡ã€‚ç±»ä¼¼TCPã€‚</li></ul><h4 id="POSTå’ŒGETçš„åŒºåˆ«"><a href="#POSTå’ŒGETçš„åŒºåˆ«" class="headerlink" title="POSTå’ŒGETçš„åŒºåˆ«"></a>POSTå’ŒGETçš„åŒºåˆ«</h4><table><thead><tr><th>Postä¸€èˆ¬ç”¨äºæ›´æ–°æˆ–è€…æ·»åŠ èµ„æºä¿¡æ¯</th><th style="text-align:center">Getä¸€èˆ¬ç”¨äºæŸ¥è¯¢æ“ä½œï¼Œè€Œä¸”åº”è¯¥æ˜¯å®‰å…¨å’Œå¹‚ç­‰çš„</th></tr></thead><tbody><tr><td>Postæ›´åŠ å®‰å…¨</td><td style="text-align:center">Getä¼šæŠŠè¯·æ±‚çš„ä¿¡æ¯æ”¾åˆ°URLçš„åé¢</td></tr><tr><td>Postä¼ è¾“é‡ä¸€èˆ¬æ— å¤§å°é™åˆ¶</td><td style="text-align:center">Getä¸èƒ½å¤§äº2KB</td></tr><tr><td>Postæ‰§è¡Œæ•ˆç‡ä½</td><td style="text-align:center">Getæ‰§è¡Œæ•ˆç‡ç•¥é«˜</td></tr></tbody></table><h4 id="ä¸ºä»€ä¹ˆPOSTæ•ˆç‡ä½ï¼ŒGetæ•ˆç‡é«˜"><a href="#ä¸ºä»€ä¹ˆPOSTæ•ˆç‡ä½ï¼ŒGetæ•ˆç‡é«˜" class="headerlink" title="ä¸ºä»€ä¹ˆPOSTæ•ˆç‡ä½ï¼ŒGetæ•ˆç‡é«˜"></a>ä¸ºä»€ä¹ˆPOSTæ•ˆç‡ä½ï¼ŒGetæ•ˆç‡é«˜</h4><hr><ul><li>Getå°†å‚æ•°æ‹¼æˆURL,æ”¾åˆ°headeræ¶ˆæ¯å¤´é‡Œä¼ é€’</li><li>Postç›´æ¥ä»¥é”®å€¼å¯¹çš„å½¢å¼æ”¾åˆ°æ¶ˆæ¯ä½“ä¸­ä¼ é€’ã€‚</li><li>ä½†ä¸¤è€…çš„æ•ˆç‡å·®è·å¾ˆå°å¾ˆå°</li></ul><h2 id="Https"><a href="#Https" class="headerlink" title="Https"></a>Https</h2><hr><ul><li>ç«¯å£å·æ˜¯443</li><li>æ˜¯ç”±SSL+Httpåè®®æ„å»ºçš„å¯è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯çš„ç½‘ç»œåè®®ã€‚</li></ul><h1 id="Socket"><a href="#Socket" class="headerlink" title="Socket"></a>Socket</h1><hr><h3 id="ä½¿ç”¨TCP"><a href="#ä½¿ç”¨TCP" class="headerlink" title="ä½¿ç”¨TCP"></a>ä½¿ç”¨TCP</h3><hr><p>å®¢æˆ·ç«¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Socket socket = new Socket(&quot;ip&quot;, ç«¯å£);</div><div class="line"></div><div class="line">InputStream is = socket.getInputStream();</div><div class="line">DataInputStream dis = new DataInputStream(is);</div><div class="line"></div><div class="line">OutputStream os = socket.getOutputStream();</div><div class="line">DataInputStream dos = new DataOutputStream(os);</div></pre></td></tr></table></figure><p>æœåŠ¡å™¨ç«¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ServerSocket serverSocket = new ServerSocket(ç«¯å£);</div><div class="line">Socket socket = serverSocket.accept();</div><div class="line">//è·å–æµçš„æ–¹å¼ä¸å®¢æˆ·ç«¯ä¸€æ ·</div></pre></td></tr></table></figure><p>è¯»å–è¾“å…¥æµ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">byte[] buffer = new byte[1024]; </div><div class="line">do&#123; </div><div class="line">int count = is.read(buffer); </div><div class="line">if(count &lt;= 0)&#123; break; &#125;</div><div class="line">else&#123; </div><div class="line">// å¯¹bufferä¿å­˜æˆ–è€…åšäº›å…¶ä»–æ“ä½œ </div><div class="line">&#125; </div><div class="line">&#125;</div><div class="line">while(true);</div></pre></td></tr></table></figure><h2 id="ä½¿ç”¨UDP"><a href="#ä½¿ç”¨UDP" class="headerlink" title="ä½¿ç”¨UDP"></a>ä½¿ç”¨UDP</h2><p>å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¸€æ ·çš„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">DatagramSocket socket = new DatagramSocket(ç«¯å£);</div><div class="line">InetAddress serverAddress = InetAddress.getbyName(&quot;ip&quot;);</div><div class="line">//å‘é€</div><div class="line">DatagramPackage packet = new DatagramPacket(buffer, length, host, port);</div><div class="line">socket.send(packet);</div><div class="line">//æ¥æ”¶</div><div class="line">byte[] buf = new byte[1024];</div><div class="line">DatagramPacket packet = new DatagramPacket(buf, 1024);</div><div class="line">Socket.receive(packet);</div></pre></td></tr></table></figure><h1 id="TCPä¸UDP"><a href="#TCPä¸UDP" class="headerlink" title="TCPä¸UDP"></a>TCPä¸UDP</h1><hr><p><strong>é¢å‘æŠ¥æ–‡çš„ä¼ è¾“æ–¹å¼</strong>æ˜¯åº”ç”¨å±‚äº¤ç»™UDPå¤šé•¿çš„æŠ¥æ–‡ï¼ŒUDPå°±ç…§æ ·å‘é€ï¼Œå³ä¸€æ¬¡å‘é€ä¸€ä¸ªæŠ¥æ–‡ã€‚å› æ­¤ï¼Œåº”ç”¨ç¨‹åºå¿…é¡»é€‰æ‹©åˆé€‚å¤§å°çš„æŠ¥æ–‡ã€‚è‹¥æŠ¥æ–‡å¤ªé•¿ï¼Œåˆ™IPå±‚éœ€è¦åˆ†ç‰‡ï¼Œé™ä½æ•ˆç‡ã€‚è‹¥å¤ªçŸ­ï¼Œä¼šæ˜¯IPå¤ªå°ã€‚UDPå¯¹åº”ç”¨å±‚äº¤ä¸‹æ¥çš„æŠ¥æ–‡ï¼Œæ—¢ä¸åˆå¹¶ï¼Œä¹Ÿä¸æ‹†åˆ†ï¼Œè€Œæ˜¯ä¿ç•™è¿™äº›æŠ¥æ–‡çš„è¾¹ç•Œã€‚è¿™ä¹Ÿå°±æ˜¯è¯´ï¼Œåº”ç”¨å±‚äº¤ç»™UDPå¤šé•¿çš„æŠ¥æ–‡ï¼ŒUDPå°±ç…§æ ·å‘é€ï¼Œå³ä¸€æ¬¡å‘é€ä¸€ä¸ªæŠ¥æ–‡ã€‚<br><strong>é¢å‘å­—èŠ‚æµ</strong>çš„è¯ï¼Œè™½ç„¶åº”ç”¨ç¨‹åºå’ŒTCPçš„äº¤äº’æ˜¯ä¸€æ¬¡ä¸€ä¸ªæ•°æ®å—ï¼ˆå¤§å°ä¸ç­‰ï¼‰ï¼Œä½†TCPæŠŠåº”ç”¨ç¨‹åºçœ‹æˆæ˜¯ä¸€è¿ä¸²çš„æ— ç»“æ„çš„å­—èŠ‚æµã€‚TCPæœ‰ä¸€ä¸ªç¼“å†²ï¼Œå½“åº”ç”¨ç¨‹åºä¼ é€çš„æ•°æ®å—å¤ªé•¿ï¼ŒTCPå°±å¯ä»¥æŠŠå®ƒåˆ’åˆ†çŸ­ä¸€äº›å†ä¼ é€ã€‚å¦‚æœåº”ç”¨ç¨‹åºä¸€æ¬¡åªå‘é€ä¸€ä¸ªå­—èŠ‚ï¼ŒTCPä¹Ÿå¯ä»¥ç­‰å¾…ç§¯ç´¯æœ‰è¶³å¤Ÿå¤šçš„å­—èŠ‚åå†æ„æˆæŠ¥æ–‡æ®µå‘é€å‡ºå»ã€‚</p><h2 id="TCPåè®®"><a href="#TCPåè®®" class="headerlink" title="TCPåè®®"></a>TCPåè®®</h2><hr><hr><ul><li>Transmission Control Protocolï¼Œä¼ è¾“æ§åˆ¶åè®®</li><li>é¢å‘è¿æ¥çš„åè®®</li><li>éœ€è¦ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥</li><li>éœ€è¦å››æ¬¡æŒ¥æ‰‹æ–­å¼€è¿æ¥</li><li>TCPæŠ¥å¤´æœ€å°é•¿åº¦ï¼š20å­—èŠ‚<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://hi.csdn.net/attachment/201108/7/0_131271823564Rx.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure></li></ul><h3 id="ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ï¼š"><a href="#ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ï¼š" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ï¼š"></a>ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ï¼š</h3><hr><hr><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://img-blog.csdn.net/20170104214009596?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2h1c2xlaQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ol><li>å®¢æˆ·ç«¯å‘é€ï¼šSYN = 1, SEQ = X, ç«¯å£å·</li><li>æœåŠ¡å™¨å›å¤ï¼šSYN = 1, ack = X + 1, SEQ = Yï¼ŒACK = 1</li><li>å®¢æˆ·ç«¯å‘é€ï¼šack = Y + 1, SEQ = X + 1,ACK = 1</li></ol><ul><li>SYN â€“ å»ºç«‹è¿æ¥ä½</li><li>ACK â€“ å“åº”ä½</li><li>SEQ â€“ é¡ºåºå·ç </li><li><p>ack â€“ ç¡®è®¤å·</p><blockquote><p>ç¡®è®¤åº”ç­”ä¿¡å·ACK = æ”¶åˆ°çš„SEQ + 1ã€‚<br>è¿æ¥å»ºç«‹ä¸­ï¼ŒåŒæ­¥ä¿¡å·SYNå§‹ç»ˆä¸º1ã€‚è¿æ¥å»ºç«‹åï¼ŒåŒæ­¥ä¿¡å·SYN=0ã€‚</p></blockquote></li><li><p>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šä¸»æœºAå‘é€ä½ç ä¸ºSYN = 1ï¼Œéšæœºäº§ç”ŸSEQ = 1234567çš„æ•°æ®åŒ…åˆ°æœåŠ¡å™¨ï¼Œä¸»æœºBç”±SYN = 1çŸ¥é“ï¼ŒAè¦å»ºç«‹è”æœº</p></li><li>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šä¸»æœºBæ”¶åˆ°è¯·æ±‚åè¦ç¡®è®¤è”æœºä¿¡æ¯ï¼Œå‘Aå‘é€ACK = ï¼ˆä¸»æœºAçš„SEQ+1ï¼‰ï¼ŒSYN = 1ï¼Œack = 1ï¼Œéšæœºäº§ç”ŸSEQ = 3452671çš„åŒ…ï¼›</li><li>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šä¸»æœºAæ”¶åˆ°åæ£€æŸ¥ackæ˜¯å¦æ­£ç¡®ï¼Œå³ç¬¬ä¸€æ¬¡å‘é€çš„ï¼ˆSEQ+1ï¼‰ï¼Œä»¥åŠä½ç ACKæ˜¯å¦ä¸º1ï¼Œè‹¥æ­£ç¡®ï¼Œä¸»æœºAä¼šå†å‘é€ack = ï¼ˆä¸»æœºBçš„SEQ+1ï¼‰ï¼ŒACK = 1ï¼Œä¸»æœºBæ”¶åˆ°åç¡®è®¤SEQå€¼ä¸ACK = 1åˆ™è¿æ¥å»ºç«‹æˆåŠŸã€‚</li></ul><h3 id="å››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹"><a href="#å››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹" class="headerlink" title="å››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹"></a>å››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹</h3><hr><hr><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://hi.csdn.net/attachment/201108/7/0_1312718564tZXD.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ol><li>Aå‘Bæå‡ºåœæ­¢è¿æ¥è¯·æ±‚ï¼ŒFIN = 1</li><li>Bæ”¶åˆ°ï¼ŒACK = 1</li><li>Bå‘Aæå‡ºåœæ­¢è¿æ¥è¯·æ±‚ï¼ŒFIN = 1</li><li>Aæ”¶åˆ°ï¼ŒACK = 1</li></ol><ul><li>FIN â€“ å…³é—­è¿æ¥</li><li>SYN â€“ å»ºç«‹è¿æ¥ä½</li><li>ACK â€“ å“åº”ä½</li><li>SEQ â€“ é¡ºåºå·ç </li><li>ack â€“ ç¡®è®¤å·<br><strong>ä¼˜ç‚¹ï¼š</strong> </li></ul><hr><ul><li>å¯é ï¼Œç¨³å®š<pre><code>1ã€ä¼ é€’æ•°æ®å‰ï¼Œä¼šæœ‰ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥2ã€ä¼ é€’æ•°æ®æ—¶ï¼Œæœ‰ç¡®è®¤ã€çª—å£ã€é‡ä¼ ã€æ‹¥å¡æ§åˆ¶3ã€ä¼ é€’æ•°æ®åï¼Œä¼šæ–­å¼€è¿æ¥èŠ‚çœç³»ç»Ÿèµ„æº</code></pre></li></ul><p><strong>ç¼ºç‚¹ï¼š</strong></p><hr><ul><li><p>ä¼ è¾“æ…¢ï¼Œæ•ˆç‡ä½ï¼Œå ç”¨ç³»ç»Ÿèµ„æºé«˜<br>1ã€ä¼ é€’æ•°æ®å‰ï¼Œå»ºç«‹è¿æ¥éœ€è¦è€—æ—¶<br>2ã€ä¼ é€’æ•°æ®æ—¶ï¼Œç¡®è®¤ã€é‡ä¼ ã€æ‹¥å¡ç­‰ä¼šæ¶ˆè€—å¤§é‡æ—¶é—´ä»¥åŠCPUå’Œå†…å­˜ç­‰ç¡¬ä»¶èµ„æº</p></li><li><p>æ˜“è¢«æ”»å‡»<br>1ã€å› ä¸ºæœ‰ç¡®è®¤æœºåˆ¶ï¼Œä¸‰æ¬¡æ¡æ‰‹ç­‰æœºåˆ¶ï¼Œå®¹æ˜“è¢«äººåˆ©ç”¨ï¼Œå®ç°DOS ã€DDOSæ”»å‡»</p></li></ul><p><strong>å¦‚ä½•ä¿è¯æ¥æ”¶çš„é¡ºåºæ€§ï¼š</strong></p><hr><p>TCPåè®®ä½¿ç”¨SEQå’ŒACKæœºåˆ¶ä¿è¯äº†é¡ºåºæ€§<br>TCPçš„æ¯ä¸ªæŠ¥æ–‡éƒ½æ˜¯æœ‰åºå·çš„ã€‚ç¡®è®¤åº”ç­”ä¿¡å·ACK=æ”¶åˆ°çš„SEQ+1</p><p><strong>ã€æ³¨æ„ã€‘ä¸­æ–­è¿æ¥ç«¯å¯ä»¥æ˜¯Clientç«¯ï¼Œä¹Ÿå¯ä»¥æ˜¯Serverç«¯ã€‚</strong></p><p>å‡è®¾Clientç«¯å‘èµ·ä¸­æ–­è¿æ¥è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯å‘é€FINæŠ¥æ–‡ã€‚Serverç«¯æ¥åˆ°FINæŠ¥æ–‡åï¼Œæ„æ€æ˜¯è¯´â€æˆ‘Clientç«¯æ²¡æœ‰æ•°æ®è¦å‘ç»™ä½ äº†â€ï¼Œä½†æ˜¯å¦‚æœä½ è¿˜æœ‰æ•°æ®æ²¡æœ‰å‘é€å®Œæˆï¼Œåˆ™ä¸å¿…æ€¥ç€å…³é—­Socketï¼Œå¯ä»¥ç»§ç»­å‘é€æ•°æ®ã€‚æ‰€ä»¥ä½ å…ˆå‘é€ACKï¼Œâ€å‘Šè¯‰Clientç«¯ï¼Œä½ çš„è¯·æ±‚æˆ‘æ”¶åˆ°äº†ï¼Œä½†æ˜¯æˆ‘è¿˜æ²¡å‡†å¤‡å¥½ï¼Œè¯·ç»§ç»­ä½ ç­‰æˆ‘çš„æ¶ˆæ¯â€ã€‚è¿™ä¸ªæ—¶å€™Clientç«¯å°±è¿›å…¥FIN_WAITçŠ¶æ€ï¼Œç»§ç»­ç­‰å¾…Serverç«¯çš„FINæŠ¥æ–‡ã€‚å½“Serverç«¯ç¡®å®šæ•°æ®å·²å‘é€å®Œæˆï¼Œåˆ™å‘Clientç«¯å‘é€FINæŠ¥æ–‡ï¼Œâ€å‘Šè¯‰Clientç«¯ï¼Œå¥½äº†ï¼Œæˆ‘è¿™è¾¹æ•°æ®å‘å®Œäº†ï¼Œå‡†å¤‡å¥½å…³é—­è¿æ¥äº†â€ã€‚Clientç«¯æ”¶åˆ°FINæŠ¥æ–‡åï¼Œâ€å°±çŸ¥é“å¯ä»¥å…³é—­è¿æ¥äº†ï¼Œä½†æ˜¯ä»–è¿˜æ˜¯ä¸ç›¸ä¿¡ç½‘ç»œï¼Œæ€•Serverç«¯ä¸çŸ¥é“è¦å…³é—­ï¼Œæ‰€ä»¥å‘é€ACKåè¿›å…¥TIME_WAITçŠ¶æ€ï¼Œå¦‚æœServerç«¯æ²¡æœ‰æ”¶åˆ°ACKåˆ™å¯ä»¥é‡ä¼ ã€‚â€œï¼ŒServerç«¯æ”¶åˆ°ACKåï¼Œâ€å°±çŸ¥é“å¯ä»¥æ–­å¼€è¿æ¥äº†â€ã€‚Clientç«¯ç­‰å¾…äº†2MSLåä¾ç„¶æ²¡æœ‰æ”¶åˆ°å›å¤ï¼Œåˆ™è¯æ˜Serverç«¯å·²æ­£å¸¸å…³é—­ï¼Œé‚£å¥½ï¼Œæˆ‘Clientç«¯ä¹Ÿå¯ä»¥å…³é—­è¿æ¥äº†ã€‚Okï¼ŒTCPè¿æ¥å°±è¿™æ ·å…³é—­äº†ï¼</p><p>æ•´ä¸ªè¿‡ç¨‹Clientç«¯æ‰€ç»å†çš„çŠ¶æ€å¦‚ä¸‹ï¼š</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://hi.csdn.net/attachment/201108/7/0_1312719804oSkK.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure> <p>è€ŒServerç«¯æ‰€ç»å†çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://hi.csdn.net/attachment/201108/7/0_1312719833030b.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure> <p><strong>ã€æ³¨æ„ã€‘</strong> åœ¨TIME_WAITçŠ¶æ€ä¸­ï¼Œå¦‚æœTCP clientç«¯æœ€åä¸€æ¬¡å‘é€çš„ACKä¸¢å¤±äº†ï¼Œå®ƒå°†é‡æ–°å‘é€ã€‚TIME_WAITçŠ¶æ€ä¸­æ‰€éœ€è¦çš„æ—¶é—´æ˜¯ä¾èµ–äºå®ç°æ–¹æ³•çš„ã€‚å…¸å‹çš„å€¼ä¸º30ç§’ã€1åˆ†é’Ÿå’Œ2åˆ†é’Ÿã€‚ç­‰å¾…ä¹‹åè¿æ¥æ­£å¼å…³é—­ï¼Œå¹¶ä¸”æ‰€æœ‰çš„èµ„æº(åŒ…æ‹¬ç«¯å£å·)éƒ½è¢«é‡Šæ”¾ã€‚</p><h2 id="UDPåè®®"><a href="#UDPåè®®" class="headerlink" title="UDPåè®®"></a>UDPåè®®</h2><hr><hr><ul><li>User Data Protocolï¼Œç”¨æˆ·æ•°æ®åŒ…åè®®</li><li>é¢å‘æ— è¿æ¥çš„åè®®</li><li>UDPæŠ¥å¤´åªæœ‰8å­—èŠ‚</li></ul><p><strong>ç®€ä»‹ï¼š</strong></p><hr><ul><li>ä¼ è¾“æ•°æ®ä¹‹å‰æºç«¯å’Œç»ˆç«¯ä¸å»ºç«‹è¿æ¥ï¼Œå½“å®ƒæƒ³ä¼ é€æ—¶å°±ç®€å•åœ°å»æŠ“å–æ¥è‡ªåº”ç”¨ç¨‹åºçš„æ•°æ®ï¼Œå¹¶å°½å¯èƒ½å¿«çš„æŠŠå®ƒæ‰”åˆ°ç½‘ç»œä¸Š</li><li>åœ¨å‘é€ç«¯ï¼ŒUDPä¼ é€æ•°æ®çš„é€Ÿåº¦ä»…ä»…æ˜¯å—åº”ç”¨ç¨‹åºç”Ÿæˆæ•°æ®çš„é€Ÿåº¦ã€è®¡ç®—æœºçš„èƒ½åŠ›å’Œä¼ è¾“å¸¦å®½çš„é™åˆ¶</li><li>åœ¨æ¥æ”¶ç«¯ï¼ŒUDPæŠŠæ¯ä¸ªæ¶ˆæ¯æ®µæ”¾åœ¨é˜Ÿåˆ—ä¸­ï¼Œåº”ç”¨ç¨‹åºæ¯æ¬¡ä»é˜Ÿåˆ—ä¸­è¯»ä¸€ä¸ªæ¶ˆæ¯æ®µ</li><li>ç”±äºä¼ è¾“æ•°æ®ä¸å»ºç«‹è¿æ¥ï¼Œå› æ­¤ä¹Ÿå°±ä¸éœ€è¦ç»´æŠ¤è¿æ¥çŠ¶æ€ï¼ŒåŒ…æ‹¬æ”¶å‘çŠ¶æ€ç­‰ï¼Œå› æ­¤ä¸€å°æœåŠ¡æœºå¯åŒæ—¶å‘å¤šä¸ªå®¢æˆ·æœºä¼ è¾“ç›¸åŒçš„æ¶ˆæ¯</li><li>UDPä¿¡æ¯åŒ…çš„æ ‡é¢˜å¾ˆçŸ­ï¼Œåªæœ‰8ä¸ªå­—èŠ‚ï¼Œç›¸å¯¹äºTCPçš„20ä¸ªå­—èŠ‚ä¿¡æ¯åŒ…çš„é¢å¤–å¼€é”€å¾ˆå°</li><li>ååé‡ä¸å—æ‹¥æŒ¤æ§åˆ¶ç®—æ³•çš„è°ƒèŠ‚ï¼Œåªå—åº”ç”¨è½¯ä»¶ç”Ÿæˆæ•°æ®çš„é€Ÿç‡ã€ä¼ è¾“å¸¦å®½ã€æºç«¯å’Œç»ˆç«¯ä¸»æœºæ€§èƒ½çš„é™åˆ¶</li><li>UDPä½¿ç”¨å°½æœ€å¤§åŠªåŠ›äº¤ä»˜ï¼Œå³ä¸ä¿è¯å¯é äº¤ä»˜ï¼Œå› æ­¤ä¸»æœºä¸éœ€è¦ç»´æŒå¤æ‚çš„é“¾æ¥çŠ¶æ€è¡¨ã€‚</li><li>UDPæ˜¯é¢å‘æŠ¥æ–‡çš„ã€‚å‘é€æ–¹çš„UDPå¯¹åº”ç”¨ç¨‹åºäº¤ä¸‹æ¥çš„æŠ¥æ–‡ï¼Œåœ¨æ·»åŠ é¦–éƒ¨åå°±å‘ä¸‹äº¤ä»˜ç»™IPå±‚ã€‚æ—¢ä¸æ‹†åˆ†ï¼Œä¹Ÿä¸åˆå¹¶ï¼Œè€Œæ˜¯ä¿ç•™è¿™äº›æŠ¥æ–‡çš„è¾¹ç•Œï¼Œå› æ­¤ï¼Œåº”ç”¨ç¨‹åºéœ€è¦é€‰æ‹©åˆé€‚çš„æŠ¥æ–‡å¤§å°ã€‚</li></ul><blockquote><p>ä½¿ç”¨â€œpingâ€å‘½ä»¤æ¥æµ‹è¯•ä¸¤å°ä¸»æœºä¹‹é—´TCP/IPé€šä¿¡æ˜¯å¦æ­£å¸¸ï¼Œå…¶å®â€œpingâ€å‘½ä»¤çš„åŸç†å°±æ˜¯å‘å¯¹æ–¹ä¸»æœºå‘é€UDPæ•°æ®åŒ…ï¼Œç„¶åå¯¹æ–¹ä¸»æœºç¡®è®¤æ”¶åˆ°æ•°æ®åŒ…ï¼Œå¦‚æœæ•°æ®åŒ…æ˜¯å¦åˆ°è¾¾çš„æ¶ˆæ¯åŠæ—¶åé¦ˆå›æ¥ï¼Œé‚£ä¹ˆç½‘ç»œå°±æ˜¯é€šçš„ã€‚</p></blockquote><p><strong>ä¼˜ç‚¹ï¼š</strong></p><hr><ul><li><p>ä¼ è¾“é€Ÿç‡å¿«<br>1ã€ä¼ è¾“æ•°æ®å‰ï¼Œä¸éœ€è¦åƒTCPä¸€æ ·å»ºç«‹è¿æ¥<br>2ã€ä¼ è¾“æ•°æ®æ—¶ï¼Œæ²¡æœ‰ç¡®è®¤ã€çª—å£ã€é‡ä¼ ã€æ‹¥å¡æ§åˆ¶ç­‰æœºåˆ¶</p></li><li><p>è¾ƒå®‰å…¨<br>1ã€ç”±äºæ²¡æœ‰äº†TCPçš„ä¸€äº›æœºåˆ¶ï¼Œè¢«æ”»å‡»è€…åˆ©ç”¨çš„æ¼æ´å°±å°‘äº†</p></li></ul><p><strong>ç¼ºç‚¹ï¼š</strong></p><hr><ul><li>ä¸å¯é ï¼Œä¸ç¨³å®š<br>1ã€ç”±äºæ²¡æœ‰äº†TCPçš„æœºåˆ¶ï¼Œåœ¨æ•°æ®ä¼ è¾“æ—¶å¦‚æœç½‘ç»œä¸å¥½ï¼Œå¾ˆå¯èƒ½ä¸¢åŒ…</li></ul><p><strong>ç”¨UDPåè®®é€šè®¯æ—¶æ€æ ·å¾—çŸ¥ç›®æ ‡æœºæ˜¯å¦è·å¾—äº†æ•°æ®åŒ…</strong></p><hr><p>ä»¿é€ TCPçš„åšæ³•ï¼Œæ¯å‘ä¸€ä¸ªUDPåŒ…ï¼Œéƒ½åœ¨é‡Œé¢åŠ ä¸€ä¸ªSEQåºå·ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°åŒ…åï¼Œå°†SEQåºå·å›å¤ç»™å‘é€æ–¹ã€‚å¦‚æœå‘é€æ–¹åœ¨æŒ‡å®šæ—¶é—´ä»¥å†…æ²¡æœ‰æ”¶åˆ°å›åº”ï¼Œè¯´æ˜ä¸¢åŒ…äº†ã€‚</p><h2 id="TCPä¸UDPçš„åŒºåˆ«"><a href="#TCPä¸UDPçš„åŒºåˆ«" class="headerlink" title="TCPä¸UDPçš„åŒºåˆ«"></a>TCPä¸UDPçš„åŒºåˆ«</h2><hr><table class="table table-bordered table-striped table-condensed"><br>    <tr><br>        <td>TCPé¢å‘<strong>æœ‰é“¾æ¥</strong>çš„é€šä¿¡æœåŠ¡</td><br>        <td>UDPé¢å‘<strong>æ— è¿æ¥</strong>çš„é€šä¿¡æœåŠ¡</td><br>    </tr><br>    <tr><br>        <td>TCPæä¾›å¯é çš„é€šä¿¡ä¼ è¾“</td><br>        <td>UDPä¸å¯é ,ä¼šä¸¢åŒ…</td><br>    </tr><br>    <tr><br>        <td>TCPä¿è¯æ•°æ®é¡ºåº</td><br>        <td>UDPä¸ä¿è¯</td><br>    </tr><br>    <tr><br>        <td>TCPæ•°æ®æ— è¾¹ç•Œ</td><br>        <td>UDPæœ‰è¾¹ç•Œ</td><br>    </tr><br>    <tr><br>        <td>TCPé€Ÿåº¦å¿«</td><br>        <td>UDPé€Ÿåº¦æ…¢</td><br>    </tr><br>    <tr><br>        <td>TCPé¢å‘å­—èŠ‚æµ</td><br>        <td>UDPé¢å‘æŠ¥æ–‡</td><br>    </tr><br>    <tr><br>        <td>TCPä¸€å¯¹ä¸€</td><br>        <td>UDPå¯ä»¥ä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤š</td><br>    </tr><br>    <tr><br>        <td>TCPæŠ¥å¤´è‡³å°‘20å­—èŠ‚</td><br>        <td>UDPæŠ¥å¤´8å­—èŠ‚</td><br>    </tr><br>    <tr><br>        <td>TCPæœ‰æµé‡æ§åˆ¶ï¼Œæ‹¥å¡æ§åˆ¶</td><br>        <td>UDPæ²¡æœ‰</td><br>    </tr><br></table><h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><p><strong>ä¸ºä»€ä¹ˆUDPæ¯”TCPå¿«</strong></p><hr><ol><li>TCPéœ€è¦ä¸‰æ¬¡æ¡æ‰‹</li><li>TCPæœ‰æ‹¥å¡æ§åˆ¶ï¼Œæ§åˆ¶æµé‡ç­‰æœºåˆ¶</li></ol><p><strong>ä¸ºä»€ä¹ˆTCPæ¯”UDPå¯é </strong></p><hr><ol><li>TCPæ˜¯é¢å‘æœ‰è¿æ¥çš„ï¼Œå»ºç«‹è¿æ¥ä¹‹åæ‰å‘é€æ•°æ®ï¼›è€ŒUDPåˆ™ä¸ç®¡å¯¹æ–¹å­˜ä¸å­˜åœ¨éƒ½ä¼šå‘é€æ•°æ®ã€‚</li><li>TCPæœ‰ç¡®è®¤æœºåˆ¶ï¼Œæ¥æ”¶ç«¯æ¯æ”¶åˆ°ä¸€ä¸ªæ­£ç¡®åŒ…éƒ½ä¼šå›åº”ç»™å‘é€ç«¯ã€‚è¶…æ—¶æˆ–è€…æ•°æ®åŒ…ä¸å®Œæ•´çš„è¯å‘é€ç«¯ä¼šé‡ä¼ ã€‚UDPæ²¡æœ‰ã€‚å› æ­¤å¯èƒ½ä¸¢åŒ…ã€‚</li></ol><p><strong>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨TCP</strong></p><hr><p>å½“å¯¹ç½‘ç»œé€šè®¯è´¨é‡æœ‰è¦æ±‚çš„æ—¶å€™ï¼Œæ¯”å¦‚ï¼šæ•´ä¸ªæ•°æ®è¦å‡†ç¡®æ— è¯¯çš„ä¼ é€’ç»™å¯¹æ–¹ï¼Œè¿™å¾€å¾€ç”¨äºä¸€äº›è¦æ±‚å¯é çš„åº”ç”¨ï¼Œæ¯”å¦‚HTTPã€HTTPSã€FTPç­‰ä¼ è¾“æ–‡ä»¶çš„åè®®ï¼ŒPOPã€SMTPç­‰é‚®ä»¶ä¼ è¾“çš„åè®®ã€‚<br>åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œå¸¸è§ä½¿ç”¨TCPåè®®çš„åº”ç”¨å¦‚ä¸‹ï¼š<br>æµè§ˆå™¨ï¼Œç”¨çš„HTTP<br>FlashFXPï¼Œç”¨çš„FTP<br>Outlookï¼Œç”¨çš„POPã€SMTP<br>Puttyï¼Œç”¨çš„Telnetã€SSH<br>QQæ–‡ä»¶ä¼ è¾“</p><p><strong>ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨UDPï¼š</strong></p><hr><p>å½“å¯¹ç½‘ç»œé€šè®¯è´¨é‡è¦æ±‚ä¸é«˜çš„æ—¶å€™ï¼Œè¦æ±‚ç½‘ç»œé€šè®¯é€Ÿåº¦èƒ½å°½é‡çš„å¿«ï¼Œè¿™æ—¶å°±å¯ä»¥ä½¿ç”¨UDPã€‚<br>æ¯”å¦‚ï¼Œæ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œå¸¸è§ä½¿ç”¨UDPåè®®çš„åº”ç”¨å¦‚ä¸‹ï¼š<br>QQè¯­éŸ³<br>QQè§†é¢‘<br>TFTP</p><p><strong>TCPæ— è¾¹ç•Œï¼ŒUDPæœ‰è¾¹ç•Œ</strong></p><hr><p><strong>TCPæ— è¾¹ç•Œ</strong></p><p>å®¢æˆ·ç«¯åˆ†å¤šæ¬¡å‘é€æ•°æ®ç»™æœåŠ¡å™¨ï¼Œè‹¥æœåŠ¡å™¨çš„ç¼“å†²åŒºå¤Ÿå¤§ï¼Œé‚£ä¹ˆæœåŠ¡å™¨ç«¯ä¼šåœ¨å®¢æˆ·ç«¯å‘é€å®Œä¹‹åä¸€æ¬¡æ€§æ¥æ”¶è¿‡æ¥ï¼Œæ‰€ä»¥æ˜¯æ— è¾¹ç•Œçš„ï¼›</p><p><strong>UDPæœ‰è¾¹ç•Œ</strong></p><p>å®¢æˆ·ç«¯æ¯å‘é€ä¸€æ¬¡ï¼ŒæœåŠ¡å™¨ç«¯å°±ä¼šæ¥æ”¶ä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯è¯´å‘é€å¤šå°‘æ¬¡å°±ä¼šæ¥æ”¶å¤šå°‘æ¬¡ï¼Œå› æ­¤æ˜¯æœ‰è¾¹ç•Œçš„ã€‚</p><p><strong>ä¸ºä»€ä¹ˆè¿æ¥çš„æ—¶å€™æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­çš„æ—¶å€™æ˜¯å››æ¬¡æ¡æ‰‹ï¼Ÿ</strong></p><hr><p>å› ä¸ºå½“Serverç«¯æ”¶åˆ°Clientç«¯çš„SYNè¿æ¥è¯·æ±‚æŠ¥æ–‡åï¼Œå¯ä»¥ç›´æ¥å‘é€SYN+ACKæŠ¥æ–‡ã€‚å…¶ä¸­ACKæŠ¥æ–‡æ˜¯ç”¨æ¥åº”ç­”çš„ï¼ŒSYNæŠ¥æ–‡æ˜¯ç”¨æ¥åŒæ­¥çš„ã€‚ä½†æ˜¯å…³é—­è¿æ¥æ—¶ï¼Œå½“Serverç«¯æ”¶åˆ°FINæŠ¥æ–‡æ—¶ï¼Œå¾ˆå¯èƒ½å¹¶ä¸ä¼šç«‹å³å…³é—­SOCKETï¼Œæ‰€ä»¥åªèƒ½å…ˆå›å¤ä¸€ä¸ªACKæŠ¥æ–‡ï¼Œå‘Šè¯‰Clientç«¯ï¼Œâ€œä½ å‘çš„FINæŠ¥æ–‡æˆ‘æ”¶åˆ°äº†â€ã€‚åªæœ‰ç­‰åˆ°æˆ‘Serverç«¯æ‰€æœ‰çš„æŠ¥æ–‡éƒ½å‘é€å®Œäº†ï¼Œæˆ‘æ‰èƒ½å‘é€FINæŠ¥æ–‡ï¼Œå› æ­¤ä¸èƒ½ä¸€èµ·å‘é€ã€‚æ•…éœ€è¦å››æ¬¡æ¡æ‰‹</p><p><strong>ä¸ºä»€ä¹ˆTIME_WAITçŠ¶æ€éœ€è¦ç»è¿‡2MSL(æœ€å¤§æŠ¥æ–‡æ®µç”Ÿå­˜æ—¶é—´)æ‰èƒ½è¿”å›åˆ°CLOSEçŠ¶æ€ï¼Ÿ</strong></p><hr><p>è™½ç„¶æŒ‰é“ç†ï¼Œå››ä¸ªæŠ¥æ–‡éƒ½å‘é€å®Œæ¯•ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è¿›å…¥CLOSEçŠ¶æ€äº†ï¼Œä½†æ˜¯æˆ‘ä»¬å¿…é¡»å‡è±¡ç½‘ç»œæ˜¯ä¸å¯é çš„ï¼Œæœ‰å¯ä»¥æœ€åä¸€ä¸ªACKä¸¢å¤±ã€‚æ‰€ä»¥TIME_WAITçŠ¶æ€æ˜¯ç”¨æ¥é‡å‘å¯èƒ½ä¸¢å¤±çš„ACKæŠ¥æ–‡ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;å¥‡è¿¹èˆ¬çš„è…¾è®¯ç¬”è¯•é€šè¿‡äº†ï¼Œæ˜¨å¤©ä¸‹åˆç»è¿‡äº†ä¸€é¢â€¦å‘ç°ä¹‹å‰ç€çœ¼äºAndroidä¸Javaçš„çŸ¥è¯†è€Œæ²¡æœ‰å¯¹è®¡ç®—æœºç½‘ç»œç³»ç»Ÿçš„å¤ä¹ â€¦å¯¼è‡´äº†è¿™æ¬¡é¢è¯•çš„æ»‘é“å¢â€¦æ‰€ä»¥æƒ³è¿›è¿™æ ·çš„ä¸€çº¿å¤§å‚åšä¸€ååˆæ ¼çš„ç¨‹åºå‘˜è¿˜æ˜¯è¦å…¨é¢å‘å±•â€¦ä¸èƒ½é¡¾æ­¤å¤±å½¼&lt;/p&gt;
&lt;/blockquote&gt;

      
    
    </summary>
    
    
      <category term="Network" scheme="https://edward7zhang.github.io/tags/Network/"/>
    
  </entry>
  
  <entry>
    <title>Androidå¼€æºåº“é¢è¯•é¢˜é›†</title>
    <link href="https://edward7zhang.github.io/2018/04/15/Android%E5%BC%80%E6%BA%90%E5%BA%93%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%86/"/>
    <id>https://edward7zhang.github.io/2018/04/15/Androidå¼€æºåº“é¢è¯•é¢˜é›†/</id>
    <published>2018-04-15T01:07:14.000Z</published>
    <updated>2018-04-17T01:45:26.151Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä¸€æ¬¡æ¬¡çš„æŒ‚äºä¸€é¢è®©æˆ‘ç­‹ç–²åŠ›ç«­â€¦æ„è¯†åˆ°è‡ªå·±å­˜åœ¨çœ¼é«˜æ‰‹ä½çš„çŠ¶æ€â€¦å‡†å¤‡é‡æ–°ä¸Šè·¯å¤¯å®åŸºç¡€<br>æœ¬ç‰‡æ–‡ç« Fork from <a href="https://github.com/guoxiaoxing/android-interview" target="_blank" rel="external">android-interview</a></p></blockquote><h3 id="è°ˆè°ˆå¯¹Okhttpçš„ç†è§£ï¼Ÿ"><a href="#è°ˆè°ˆå¯¹Okhttpçš„ç†è§£ï¼Ÿ" class="headerlink" title="è°ˆè°ˆå¯¹Okhttpçš„ç†è§£ï¼Ÿ"></a>è°ˆè°ˆå¯¹Okhttpçš„ç†è§£ï¼Ÿ</h3><p>Volleyä¸OkHttpçš„å¯¹æ¯”ï¼š</p><ul><li>Volleyï¼šæ”¯æŒHTTPSã€‚ç¼“å­˜ã€å¼‚æ­¥è¯·æ±‚ï¼Œä¸æ”¯æŒåŒæ­¥è¯·æ±‚ã€‚åè®®ç±»å‹æ˜¯Http/1.0, Http/1.1ï¼Œç½‘ç»œä¼ è¾“ä½¿ç”¨çš„æ˜¯    HttpUrlConnection/HttpClientï¼Œæ•°æ®è¯»å†™ä½¿ç”¨çš„IOã€‚</li><li>OkHttpï¼šæ”¯æŒHTTPSã€‚ç¼“å­˜ã€å¼‚æ­¥è¯·æ±‚ã€åŒæ­¥è¯·æ±‚ã€‚åè®®ç±»å‹æ˜¯Http/1.0, Http/1.1, SPDY, Http/2.0, WebSocketï¼Œç½‘ç»œä¼ è¾“ä½¿ç”¨çš„æ˜¯å°è£…çš„Socketï¼Œæ•°æ®è¯»å†™ä½¿ç”¨çš„NIOï¼ˆOkioï¼‰ã€‚</li></ul><blockquote><p>SPDYåè®®ç±»ä¼¼äºHTTPï¼Œä½†æ—¨åœ¨ç¼©çŸ­ç½‘é¡µçš„åŠ è½½æ—¶é—´å’Œæé«˜å®‰å…¨æ€§ã€‚SPDYåè®®é€šè¿‡å‹ç¼©ã€å¤šè·¯å¤ç”¨å’Œä¼˜å…ˆçº§æ¥ç¼©çŸ­åŠ è½½æ—¶é—´ã€‚</p></blockquote><p>Okhttpçš„å­ç³»ç»Ÿå±‚çº§ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p>ğŸ‘‰ ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹å¤§å›¾</p><p><img src="https://github.com/guoxiaoxing/android-open-framwork-analysis/raw/master/art/okhttp/okhttp_structure.png" width="600"></p><ul><li>ç½‘ç»œé…ç½®å±‚ï¼šåˆ©ç”¨Builderæ¨¡å¼é…ç½®å„ç§å‚æ•°ï¼Œä¾‹å¦‚ï¼šè¶…æ—¶æ—¶é—´ã€æ‹¦æˆªå™¨ç­‰ï¼Œè¿™äº›å‚æ•°éƒ½ä¼šç”±Okhttpåˆ†å‘ç»™å„ä¸ªéœ€è¦çš„å­ç³»ç»Ÿã€‚</li><li>é‡å®šå‘å±‚ï¼šè´Ÿè´£é‡å®šå‘ã€‚</li><li>Headeræ‹¼æ¥å±‚ï¼šè´Ÿè´£æŠŠç”¨æˆ·æ„é€ çš„è¯·æ±‚è½¬æ¢ä¸ºå‘é€ç»™æœåŠ¡å™¨çš„è¯·æ±‚ï¼ŒæŠŠæœåŠ¡å™¨è¿”å›çš„å“åº”è½¬æ¢ä¸ºå¯¹ç”¨æˆ·å‹å¥½çš„å“åº”ã€‚</li><li>HTTPç¼“å­˜å±‚ï¼šè´Ÿè´£è¯»å–ç¼“å­˜ä»¥åŠæ›´æ–°ç¼“å­˜ã€‚</li><li>è¿æ¥å±‚ï¼šè¿æ¥å±‚æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„å±‚çº§ï¼Œå®ƒå®ç°äº†ç½‘ç»œåè®®ã€å†…éƒ¨çš„æ‹¦æˆªå™¨ã€å®‰å…¨æ€§è®¤è¯ï¼Œè¿æ¥ä¸è¿æ¥æ± ç­‰åŠŸèƒ½ï¼Œä½†è¿™ä¸€å±‚è¿˜æ²¡æœ‰å‘èµ·çœŸæ­£çš„è¿æ¥ï¼Œå®ƒåªæ˜¯åšäº†è¿æ¥å™¨ä¸€äº›å‚æ•°çš„å¤„ç†ã€‚</li><li>æ•°æ®å“åº”å±‚ï¼šè´Ÿè´£ä»æœåŠ¡å™¨è¯»å–å“åº”çš„æ•°æ®ã€‚</li></ul><p>åœ¨æ•´ä¸ªOkhttpçš„ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬è¿˜è¦ç†è§£ä»¥ä¸‹å‡ ä¸ªå…³é”®è§’è‰²ï¼š</p><ul><li>OkHttpClientï¼šé€šä¿¡çš„å®¢æˆ·ç«¯ï¼Œç”¨æ¥ç»Ÿä¸€ç®¡ç†å‘èµ·è¯·æ±‚ä¸è§£æå“åº”ã€‚</li><li>Callï¼šCallæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒæ˜¯HTTPè¯·æ±‚çš„æŠ½è±¡æè¿°ï¼Œå…·ä½“å®ç°ç±»æ˜¯RealCallï¼Œå®ƒç”±CallFactoryåˆ›å»ºã€‚</li><li>Requestï¼šè¯·æ±‚ï¼Œå°è£…è¯·æ±‚çš„å…·ä½“ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼šurlã€headerç­‰ã€‚</li><li>RequestBodyï¼šè¯·æ±‚ä½“ï¼Œç”¨æ¥æäº¤æµã€è¡¨å•ç­‰è¯·æ±‚ä¿¡æ¯ã€‚</li><li>Responseï¼šHTTPè¯·æ±‚çš„å“åº”ï¼Œè·å–å“åº”ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼šå“åº”headerç­‰ã€‚</li><li>ResponseBodyï¼šHTTPè¯·æ±‚çš„å“åº”ä½“ï¼Œè¢«è¯»å–ä¸€æ¬¡ä»¥åå°±ä¼šå…³é—­ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡å¤è°ƒç”¨responseBody.string()è·å–è¯·æ±‚ç»“æœæ˜¯ä¼šæŠ¥é”™çš„ã€‚</li><li>Interceptorï¼šInterceptoræ˜¯è¯·æ±‚æ‹¦æˆªå™¨ï¼Œè´Ÿè´£æ‹¦æˆªå¹¶å¤„ç†è¯·æ±‚ï¼Œå®ƒå°†ç½‘ç»œè¯·æ±‚ã€ç¼“å­˜ã€é€æ˜å‹ç¼©ç­‰åŠŸèƒ½éƒ½ç»Ÿä¸€èµ·æ¥ï¼Œæ¯ä¸ªåŠŸèƒ½éƒ½æ˜¯ä¸€ä¸ªInterceptorï¼Œæ‰€æœ‰çš„Interceptoræœ€<br>ç»ˆè¿æ¥æˆä¸€ä¸ªInterceptor.Chainã€‚å…¸å‹çš„è´£ä»»é“¾æ¨¡å¼å®ç°ã€‚</li><li>StreamAllocationï¼šç”¨æ¥æ§åˆ¶Connectionsä¸Streasçš„èµ„æºåˆ†é…ä¸é‡Šæ”¾ã€‚</li><li>RouteSelectorï¼šé€‰æ‹©è·¯çº¿ä¸è‡ªåŠ¨é‡è¿ã€‚</li><li>RouteDatabaseï¼šè®°å½•è¿æ¥å¤±è´¥çš„Routeé»‘åå•ã€‚</li></ul><h3 id="è°ˆè°ˆå¯¹Frescoç†è§£ï¼Ÿ"><a href="#è°ˆè°ˆå¯¹Frescoç†è§£ï¼Ÿ" class="headerlink" title="è°ˆè°ˆå¯¹Frescoç†è§£ï¼Ÿ"></a>è°ˆè°ˆå¯¹Frescoç†è§£ï¼Ÿ</h3><p>Frescoä¸Glideçš„å¯¹æ¯”ï¼š</p><ul><li>Glideï¼šç›¸å¯¹è½»é‡çº§ï¼Œç”¨æ³•ç®€å•ä¼˜é›…ï¼Œæ”¯æŒGifåŠ¨æ€å›¾ï¼Œé€‚åˆç”¨åœ¨é‚£äº›å¯¹å›¾ç‰‡ä¾èµ–ä¸å¤§çš„Appä¸­ã€‚</li><li>Frescoï¼šé‡‡ç”¨åŒ¿åå…±äº«å†…å­˜æ¥ä¿å­˜å›¾ç‰‡ï¼Œä¹Ÿå°±æ˜¯Nativeå †ï¼Œæœ‰æ•ˆçš„çš„é¿å…äº†OOMï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œä½†æ˜¯åº“ä½“ç§¯è¿‡å¤§ï¼Œé€‚åˆç”¨åœ¨å¯¹å›¾ç‰‡ä¾èµ–æ¯”è¾ƒå¤§çš„Appä¸­ã€‚</li></ul><p>Frescoçš„æ•´ä½“æ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p>ğŸ‘‰ ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹å¤§å›¾</p><p><img src="https://github.com/guoxiaoxing/android-open-framwork-analysis/raw/master/art/fresco/fresco_structure.png" width="600"></p><ul><li>DraweeViewï¼šç»§æ‰¿äºImageViewï¼Œåªæ˜¯ç®€å•çš„è¯»å–xmlæ–‡ä»¶çš„ä¸€äº›å±æ€§å€¼å’Œåšä¸€äº›åˆå§‹åŒ–çš„å·¥ä½œï¼Œå›¾å±‚ç®¡ç†äº¤ç”±Hierarchyè´Ÿè´£ï¼Œå›¾å±‚æ•°æ®è·å–äº¤ç”±è´Ÿè´£ã€‚</li><li>DraweeHierarchyï¼šç”±å¤šå±‚Drawableç»„æˆï¼Œæ¯å±‚Drawableæä¾›æŸç§åŠŸèƒ½ï¼ˆä¾‹å¦‚ï¼šç¼©æ”¾ã€åœ†è§’ï¼‰ã€‚</li><li>DraweeControllerï¼šæ§åˆ¶æ•°æ®çš„è·å–ä¸å›¾ç‰‡åŠ è½½ï¼Œå‘pipelineå‘å‡ºè¯·æ±‚ï¼Œå¹¶æ¥æ”¶ç›¸åº”äº‹ä»¶ï¼Œå¹¶æ ¹æ®ä¸åŒäº‹ä»¶æ§åˆ¶Hierarchyï¼Œä»DraweeViewæ¥æ”¶ç”¨æˆ·çš„äº‹ä»¶ï¼Œç„¶åæ‰§è¡Œå–æ¶ˆç½‘ç»œè¯·æ±‚ã€å›æ”¶èµ„æºç­‰æ“ä½œã€‚</li><li>DraweeHolderï¼šç»Ÿç­¹ç®¡ç†Hierarchyä¸DraweeHolderã€‚</li><li>ImagePipelineï¼šFrescoçš„æ ¸å¿ƒæ¨¡å—ï¼Œç”¨æ¥ä»¥å„ç§æ–¹å¼ï¼ˆå†…å­˜ã€ç£ç›˜ã€ç½‘ç»œç­‰ï¼‰è·å–å›¾åƒã€‚</li><li>Producer/Consumerï¼šProducerä¹Ÿæœ‰å¾ˆå¤šç§ï¼Œå®ƒç”¨æ¥å®Œæˆç½‘ç»œæ•°æ®è·å–ï¼Œç¼“å­˜æ•°æ®è·å–ã€å›¾ç‰‡è§£ç ç­‰å¤šç§å·¥ä½œï¼Œå®ƒäº§ç”Ÿçš„ç»“æœç”±Consumerè¿›è¡Œæ¶ˆè´¹ã€‚</li><li>IO/Dataï¼šè¿™ä¸€å±‚ä¾¿æ˜¯æ•°æ®å±‚äº†ï¼Œè´Ÿè´£å®ç°å†…å­˜ç¼“å­˜ã€ç£ç›˜ç¼“å­˜ã€ç½‘ç»œç¼“å­˜å’Œå…¶ä»–IOç›¸å…³çš„åŠŸèƒ½ã€‚</li></ul><p>çºµè§‚æ•´ä¸ªFrescoçš„æ¶æ„ï¼ŒDraweeViewæ˜¯é—¨é¢ï¼Œå’Œç”¨æˆ·è¿›è¡Œäº¤äº’ï¼ŒDraweeHierarchyæ˜¯è§†å›¾å±‚çº§ï¼Œç®¡ç†å›¾å±‚ï¼ŒDraweeControlleræ˜¯æ§åˆ¶å™¨ï¼Œç®¡ç†æ•°æ®ã€‚å®ƒä»¬æ„æˆäº†æ•´ä¸ªFrescoæ¡†æ¶çš„ä¸‰é©¾é©¬è½¦ã€‚å½“ç„¶è¿˜æœ‰æˆ‘ä»¬<br>å¹•åè‹±é›„Producerï¼Œæ‰€æœ‰çš„è„æ´»ç´¯æ´»éƒ½æ˜¯å®ƒå¹²çš„ï¼Œæœ€ä½³åŠ³æ¨¡ğŸ‘</p><p>ç†è§£äº†Frescoæ•´ä½“çš„æ¶æ„ï¼Œæˆ‘ä»¬è¿˜æœ‰äº†è§£åœ¨è¿™å¥—çŸ¿å»ºé‡Œå‘æŒ¥é‡è¦ä½œç”¨çš„å‡ ä¸ªå…³é”®è§’è‰²ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><ul><li>Supplierï¼šæä¾›ä¸€ç§ç‰¹å®šç±»å‹çš„å¯¹è±¡ï¼ŒFrescoé‡Œæœ‰å¾ˆå¤šä»¥Supplierç»“å°¾çš„ç±»éƒ½å®ç°äº†è¿™ä¸ªæ¥å£ã€‚</li><li>SimpleDraweeViewï¼šè¿™ä¸ªæˆ‘ä»¬å°±å¾ˆç†Ÿæ‚‰äº†ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªURLï¼Œç„¶åè°ƒç”¨Controllerå»åŠ è½½å›¾ç‰‡ã€‚è¯¥ç±»ç»§æ‰¿äºGenericDraweeViewï¼ŒGenericDraweeViewåˆç»§æ‰¿äºDraweeViewï¼ŒDraweeViewæ˜¯Frescoçš„é¡¶å±‚Viewç±»ã€‚</li><li>PipelineDraweeControllerï¼šè´Ÿè´£å›¾ç‰‡æ•°æ®çš„è·å–ä¸åŠ è½½ï¼Œå®ƒç»§æ‰¿äºAbstractDraweeControllerï¼Œç”±PipelineDraweeControllerBuilderæ„å»ºè€Œæ¥ã€‚AbstractDraweeControllerå®ç°äº†DraweeControlleræ¥å£ï¼ŒDraweeController<br>æ˜¯Frescoçš„æ•°æ®å¤§ç®¡å®¶ï¼Œæ‰€ä»¥çš„å›¾ç‰‡æ•°æ®çš„å¤„ç†éƒ½æ˜¯ç”±å®ƒæ¥å®Œæˆçš„ã€‚</li><li>GenericDraweeHierarchyï¼šè´Ÿè´£SimpleDraweeViewä¸Šçš„å›¾å±‚ç®¡ç†ï¼Œç”±å¤šå±‚Drawableç»„æˆï¼Œæ¯å±‚Drawableæä¾›æŸç§åŠŸèƒ½ï¼ˆä¾‹å¦‚ï¼šç¼©æ”¾ã€åœ†è§’ï¼‰ï¼Œè¯¥ç±»ç”±GenericDraweeHierarchyBuilderè¿›è¡Œæ„å»ºï¼Œè¯¥æ„å»ºå™¨<br>å°†placeholderImageã€retryImageã€failureImageã€progressBarImageã€backgroundã€overlaysä¸pressedStateOverlayç­‰<br>xmlæ–‡ä»¶æˆ–è€…Javaä»£ç é‡Œè®¾ç½®çš„å±æ€§ä¿¡æ¯éƒ½ä¼ å…¥GenericDraweeHierarchyä¸­ï¼Œç”±GenericDraweeHierarchyè¿›è¡Œå¤„ç†ã€‚</li><li>DraweeHolderï¼šè¯¥ç±»æ˜¯ä¸€ä¸ªHolderç±»ï¼Œå’ŒSimpleDraweeViewå…³è”åœ¨ä¸€èµ·ï¼ŒDraweeViewæ˜¯é€šè¿‡DraweeHolderæ¥ç»Ÿä¸€ç®¡ç†çš„ã€‚è€ŒDraweeHolderåˆæ˜¯ç”¨æ¥ç»Ÿä¸€ç®¡ç†ç›¸å…³çš„Hierarchyä¸Controller</li><li>DataSourceï¼šç±»ä¼¼äºJavaé‡Œçš„Futuresï¼Œä»£è¡¨æ•°æ®çš„æ¥æºï¼Œå’ŒFuturesä¸åŒï¼Œå®ƒå¯ä»¥æœ‰å¤šä¸ªresultã€‚</li><li>DataSubscriberï¼šæ¥æ”¶DataSourceè¿”å›çš„ç»“æœã€‚</li><li>ImagePipelineï¼šç”¨æ¥è°ƒå–è·å–å›¾ç‰‡çš„æ¥å£ã€‚</li><li>Producerï¼šåŠ è½½ä¸å¤„ç†å›¾ç‰‡ï¼Œå®ƒæœ‰å¤šç§å®ç°ï¼Œä¾‹å¦‚ï¼šNetworkFetcherProducerï¼ŒLocalAssetFetcherProducerï¼ŒLocalFileFetchProducerã€‚ä»è¿™äº›ç±»çš„åå­—æˆ‘ä»¬å°±å¯ä»¥çŸ¥é“å®ƒä»¬æ˜¯å¹²ä»€ä¹ˆçš„ã€‚<br>Producerç”±ProducerFactoryè¿™ä¸ªå·¥å‚ç±»æ„å»ºçš„ï¼Œè€Œä¸”æ‰€æœ‰çš„Produceréƒ½æ˜¯åƒJavaçš„IOæµé‚£æ ·ï¼Œå¯ä»¥ä¸€å±‚åµŒå¥—ä¸€å±‚ï¼Œæœ€ç»ˆåªå¾—åˆ°ä¸€ä¸ªç»“æœï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆç²¾å·§çš„è®¾è®¡ğŸ‘</li><li>Consumerï¼šç”¨æ¥æ¥æ”¶Produceräº§ç”Ÿçš„ç»“æœï¼Œå®ƒä¸Producerç»„æˆäº†ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…æ¨¡å¼ã€‚</li></ul><p>æ³¨ï¼šFrescoæºç é‡Œçš„ç±»çš„åå­—éƒ½æ¯”è¾ƒé•¿ï¼Œä½†æ˜¯éƒ½æ˜¯æŒ‰ç…§ä¸€å®šçš„å‘½ä»¤è§„å¾‹æ¥çš„ï¼Œä¾‹å¦‚ï¼šä»¥Supplierç»“å°¾çš„ç±»éƒ½å®ç°äº†Supplieræ¥å£ï¼Œå®ƒå¯ä»¥æä¾›æŸä¸€ä¸ªç±»å‹çš„å¯¹è±¡ï¼ˆfactory, generator, builder, closureç­‰ï¼‰ã€‚<br>ä»¥Builderç»“å°¾çš„å½“ç„¶å°±æ˜¯ä»¥æ„é€ è€…æ¨¡å¼åˆ›å»ºå¯¹è±¡çš„ç±»ã€‚</p><h3 id="EventBusæ˜¯å¦‚ä½•åšåˆ°å‘é€ç²˜æ€§æ¶ˆæ¯çš„ï¼Ÿ"><a href="#EventBusæ˜¯å¦‚ä½•åšåˆ°å‘é€ç²˜æ€§æ¶ˆæ¯çš„ï¼Ÿ" class="headerlink" title="EventBusæ˜¯å¦‚ä½•åšåˆ°å‘é€ç²˜æ€§æ¶ˆæ¯çš„ï¼Ÿ"></a>EventBusæ˜¯å¦‚ä½•åšåˆ°å‘é€ç²˜æ€§æ¶ˆæ¯çš„ï¼Ÿ</h3><p>EventBusé‡Œæœ‰ä¸€ä¸ªHashMapç”¨æ¥å­˜å‚¨ç²˜æ€§äº‹ä»¶é˜Ÿåˆ—ï¼Œå½“æ³¨å†Œäº‹ä»¶æ—¶ï¼Œå¦‚æœè¯¥äº‹ä»¶æ˜¯ç²˜æ€§äº‹ä»¶ï¼Œåˆ™ä»è¯¥é˜Ÿåˆ—ä¸­å–å‡ºæœ€åä¸€ä¸ªè¯¥ç±»å‹çš„äº‹ä»¶å¹¶å‘é€ç»™è®¢é˜…è€…ã€‚</p><h3 id="å¤©çŒ«ä¸ƒå·§æ¿å¸ƒå±€ã€vLayoutçš„å®ç°åŸç†ï¼Ÿ"><a href="#å¤©çŒ«ä¸ƒå·§æ¿å¸ƒå±€ã€vLayoutçš„å®ç°åŸç†ï¼Ÿ" class="headerlink" title="å¤©çŒ«ä¸ƒå·§æ¿å¸ƒå±€ã€vLayoutçš„å®ç°åŸç†ï¼Ÿ"></a>å¤©çŒ«ä¸ƒå·§æ¿å¸ƒå±€ã€vLayoutçš„å®ç°åŸç†ï¼Ÿ</h3>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;ä¸€æ¬¡æ¬¡çš„æŒ‚äºä¸€é¢è®©æˆ‘ç­‹ç–²åŠ›ç«­â€¦æ„è¯†åˆ°è‡ªå·±å­˜åœ¨çœ¼é«˜æ‰‹ä½çš„çŠ¶æ€â€¦å‡†å¤‡é‡æ–°ä¸Šè·¯å¤¯å®åŸºç¡€&lt;br&gt;æœ¬ç‰‡æ–‡ç« Fork from &lt;a href=&quot;https://github.com/guoxiaoxing/android-interview&quot; target=
      
    
    </summary>
    
    
      <category term="Android" scheme="https://edward7zhang.github.io/tags/Android/"/>
    
      <category term="Interview" scheme="https://edward7zhang.github.io/tags/Interview/"/>
    
  </entry>
  
  <entry>
    <title>æ•°æ®ç»“æ„ä¸ç®—æ³•é¢è¯•é¢˜é›†</title>
    <link href="https://edward7zhang.github.io/2018/04/13/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%86/"/>
    <id>https://edward7zhang.github.io/2018/04/13/æ•°æ®ç»“æ„ä¸ç®—æ³•é¢è¯•é¢˜é›†/</id>
    <published>2018-04-13T01:07:14.000Z</published>
    <updated>2018-04-17T01:43:55.003Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä¸€æ¬¡æ¬¡çš„æŒ‚äºä¸€é¢è®©æˆ‘ç­‹ç–²åŠ›ç«­â€¦æ„è¯†åˆ°è‡ªå·±å­˜åœ¨çœ¼é«˜æ‰‹ä½çš„çŠ¶æ€â€¦å‡†å¤‡é‡æ–°ä¸Šè·¯å¤¯å®åŸºç¡€<br>æœ¬ç‰‡æ–‡ç« Fork from <a href="https://github.com/guoxiaoxing/android-interview" target="_blank" rel="external">android-interview</a></p></blockquote><p>æ•°æ®ç»“æ„ä¸ç®—æ³•é€šå¸¸ä¹Ÿä¸Javaçš„é›†åˆç‰µæ‰¯åœ¨ä¸€èµ·è€ƒå¯Ÿï¼Œè¿™é‡Œæˆ‘ä»¬å°†ä¸¤è€…æ”¾åœ¨ä¸€èµ·æ¥è®²ã€‚</p><p>ä»€ä¹ˆæ˜¯ç®—æ³•ï¼Ÿ</p><blockquote><p>ç®—æ³•æ˜¯æŒ‡ä»¤çš„é›†åˆï¼Œæ˜¯ä¸ºäº†è§£å†³ç‰¹å®šé—®é¢˜è€Œè§„å®šçš„ä¸€äº›åˆ—æ“ä½œã€‚</p></blockquote><p>æ—¶é—´å¤æ‚åº¦</p><blockquote><p>ç®—æ³•çš„æ‰§è¡Œæ—¶é—´éšç€é—®é¢˜è§„æ¨¡çš„å¢é•¿è€Œå˜åŒ–çš„è§„å¾‹ã€‚</p></blockquote><p>ç®—æ³•çš„æ‰§è¡Œæ—¶é—´å—åˆ°ä»¥ä¸‹å››ä¸ªå› ç´ çš„å½±å“ï¼š</p><ul><li>ç¡¬ä»¶å±‚é¢ï¼šè®¡ç®—æœºæ‰§è¡Œæ¯æ¡æŒ‡ä»¤çš„é€Ÿåº¦</li><li>è½¯ä»¶å±‚é¢ï¼šç¼–è¯‘äº§ç”Ÿçš„ä»£ç è´¨é‡</li><li>ç®—æ³•ç­–ç•¥ï¼šç®—æ³•çš„å¥½å</li><li>é—®é¢˜è§„æ¨¡</li></ul><p>ç©ºé—´å¤æ‚åº¦</p><blockquote><p>ç©ºé—´å¤æ‚åº¦æ˜¯å¯¹ä¸€ä¸ªç®—æ³•åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¸´æ—¶å ç”¨å­˜å‚¨ç©ºé—´å¤§å°çš„é‡åº¦ã€‚</p></blockquote><p>ä¾‹å¦‚ï¼šæ’å…¥æ’åºçš„ç®—æ³•å¤æ‚åº¦æ˜¯O(1)ã€‚è€Œä¸€èˆ¬é€’å½’ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯O(n)ï¼Œå› ä¸ºæ¯æ¬¡é€’å½’éƒ½è¦å­˜å‚¨ç»“æœã€‚</p><p>å¸¸ç†Ÿé˜¶O(1)ã€å¯¹æ•°é˜¶O(logn)ã€çº¿æ€§é˜¶O(n)ã€çº¿æ€§å¯¹æ•°é˜¶O(nlogn)ï¼Œå¹³æ–¹é˜¶O(n^2)ã€ç«‹æ–¹é˜¶O(n^3)ã€kæ¬¡æ–¹é˜¶O(n^k)ã€æŒ‡æ•°é˜¶O(2^n);</p><h3 id="æè¿°ä¸€ä¸‹Javaçš„é›†åˆä½“ç³»ï¼ŒListã€Setä¸Mapæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#æè¿°ä¸€ä¸‹Javaçš„é›†åˆä½“ç³»ï¼ŒListã€Setä¸Mapæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="æè¿°ä¸€ä¸‹Javaçš„é›†åˆä½“ç³»ï¼ŒListã€Setä¸Mapæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>æè¿°ä¸€ä¸‹Javaçš„é›†åˆä½“ç³»ï¼ŒListã€Setä¸Mapæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>Javaé›†åˆé‡Œä½¿ç”¨æ¥å£æ¥å®šä¹‰åŠŸèƒ½ï¼Œæ˜¯ä¸€å¥—å®Œå–„çš„ç»§æ‰¿ä½“ç³»ã€‚Iteratoræ˜¯æ‰€æœ‰é›†åˆçš„æ€»æ¥å£ï¼Œå…¶ä»–æ‰€æœ‰æ¥å£éƒ½ç»§æ‰¿äºå®ƒï¼Œè¯¥æ¥å£å®šä¹‰äº†é›†åˆçš„<br>éå†æ“ä½œï¼ŒCollectionæ¥å£ç»§æ‰¿äºIteratorï¼Œæ˜¯é›†åˆçš„æ¬¡çº§æ¥å£ï¼ˆMapç‹¬ç«‹å­˜åœ¨ï¼Œé™¤å¤–ï¼‰ï¼Œå®šä¹‰äº†é›†åˆçš„ä¸€äº›é€šç”¨æ“ä½œã€‚</p><p>Javaé›†åˆçš„ç±»ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p>ğŸ‘‰ ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹å¤§å›¾</p><p><img src="https://github.com/guoxiaoxing/data-structure-and-algorithm/raw/master/art/java_collection_structure.png"></p><ul><li>Listï¼šæœ‰åºã€å¯é‡å¤ï¼›ç´¢å¼•æŸ¥è¯¢é€Ÿåº¦å¿«ï¼›æ’å…¥ã€åˆ é™¤ä¼´éšæ•°æ®ç§»åŠ¨ï¼Œé€Ÿåº¦æ…¢ï¼›</li><li>Setï¼šæ— åºï¼Œä¸å¯é‡å¤ï¼›</li><li>Mapï¼šé”®å€¼å¯¹ï¼Œé”®å”¯ä¸€ï¼Œå€¼å¤šä¸ªï¼›</li></ul><h3 id="å¹¶å‘é›†åˆäº†è§£å“ªäº›ï¼Ÿ"><a href="#å¹¶å‘é›†åˆäº†è§£å“ªäº›ï¼Ÿ" class="headerlink" title="å¹¶å‘é›†åˆäº†è§£å“ªäº›ï¼Ÿ"></a>å¹¶å‘é›†åˆäº†è§£å“ªäº›ï¼Ÿ</h3><blockquote><p>ConcurrentHashMapï¼šçº¿ç¨‹ä¸å®‰å…¨çš„HashMapã€æ•ˆç‡ä½ä¸‹çš„HashTableã€çº¿ç¨‹å®‰å…¨ä¸”é«˜æ•ˆçš„ConcurrentHashMapã€‚</p></blockquote><p>ConcurrentHashMapå­˜å‚¨å…ƒç´ çš„ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://github.com/guoxiaoxing/data-structure-and-algorithm/raw/master/art/hash/HashMap_structure.png" width="500"></p><p>ConcurrentHashMapä¸HashMapä¸€æ ·é€‚ç”¨æ•°ç»„åŠ é“¾è¡¨å­˜å‚¨å…ƒç´ ï¼Œé€‚ç”¨é“¾è¡¨å®šå€æ³•æ¥è§£å†³å“ˆå¸Œå†²çªï¼Œä¸åŒä¹‹å¤„åœ¨äºå½“é“¾è¡¨é•¿åº¦å¤§äº8çš„æ—¶å€™ä¼šå°†é“¾è¡¨è½¬æ¢ä¸ºä¸€æ£µçº¢é»‘æ ‘ï¼ŒæŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ç”±O(N)å˜æˆO(lgN)ã€‚</p><p>ConcurrentHashMapå¹¶å‘æ§åˆ¶çš„å…³é”®åœ¨äºä¸€ä¸ªå˜é‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">transient</span> <span class="keyword">volatile</span> <span class="keyword">int</span> sizeCtl;</div></pre></td></tr></table></figure><p>sizeCtlè¢«volatileå…³é”®å­—ä¿®é¥°æ˜¯ä¸€ä¸ªå¤šçº¿ç¨‹å…±äº«çš„å˜é‡ï¼Œå½“å®ƒçš„å€¼ä¸ºè´Ÿæ•°çš„æ—¶å€™è¯´æ˜æŸä¸ªçº¿ç¨‹æ­£åœ¨æ“ä½œè¿™ä¸ªMapï¼Œæƒ³è¦å»æ“ä½œè¿™ä¸ªMapçš„çº¿ç¨‹å°±è¦ä¸€ç›´å»ç«äº‰è¿™ä¸ªsizeCtlï¼Œæ²¡æœ‰å¾—åˆ°è¿™ä¸ªå˜é‡çš„å€¼å°±è¦ä¸€ç›´è‡ªæ—‹ç­‰å¾…è¿™ä¸ªå˜é‡ï¼Œå½“å ç”¨<br>è¿™ä¸ªå˜é‡çš„çº¿ç¨‹æ“ä½œå®Œæˆåï¼Œè¦å°†è¿™ä¸ªå˜é‡çš„å€¼è®¾ç½®å›æ¥ï¼Œä»¥ä¾¿è®©å…¶ä»–çº¿ç¨‹èµ°å‡ºè‡ªæ—‹ï¼Œç«äº‰åˆ°è¯¥å˜é‡ã€‚</p><p>è¿™ç§åŒæ­¥è¿›åˆ¶äº‹å®ä¸Šæ˜¯ä¸€ç§CASçš„åšæ³•ã€‚</p><blockquote><p>CASï¼ˆCompare and swapï¼‰æ¯”è¾ƒå’Œæ›¿æ¢æ˜¯è®¾è®¡å¹¶å‘ç®—æ³•æ—¶ç”¨åˆ°çš„ä¸€ç§æŠ€æœ¯ã€‚ç®€å•æ¥è¯´ï¼Œæ¯”è¾ƒå’Œæ›¿æ¢æ˜¯ä½¿ç”¨ä¸€ä¸ªæœŸæœ›å€¼å’Œä¸€ä¸ªå˜é‡çš„å½“å‰å€¼è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå½“å‰å˜é‡çš„å€¼ä¸æˆ‘ä»¬æœŸæœ›çš„å€¼ç›¸ç­‰ï¼Œå°±ä½¿ç”¨ä¸€ä¸ªæ–°å€¼æ›¿æ¢å½“å‰å˜é‡çš„å€¼ã€‚</p></blockquote><h3 id="Vectorï¼ŒArrayListä¸LinkedListæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Vectorï¼ŒArrayListä¸LinkedListæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Vectorï¼ŒArrayListä¸LinkedListæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Vectorï¼ŒArrayListä¸LinkedListæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ul><li>Vectorå®ç°äº†åŸºäºåŠ¨æ€Objectæ•°ç»„çš„æ•°æ®ç»“æ„ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥è®¾ç½®å¢é•¿å› å­ï¼Œæ•ˆç‡æ¯”è¾ƒä½ï¼Œä¸å»ºè®®ä½¿ç”¨ã€‚</li><li>ArrayListå®ç°äº†åŸºäºåŠ¨æ€Objectæ•°ç»„çš„æ•°æ®ç»“æ„ï¼Œéçº¿ç¨‹å®‰å…¨ï¼Œåœ°å€è¿ç»­ï¼ŒæŸ¥è¯¢æ•ˆç‡æ¯”è¾ƒé«˜ï¼Œæ’å…¥å’Œåˆ é™¤æ•ˆç‡æ¯”è¾ƒä½ã€‚é€‚åˆæŸ¥è¯¢æ“ä½œé¢‘ç¹çš„åœºæ™¯ã€‚</li><li>LinkedListå®ç°äº†åŸºäºé“¾è¡¨çš„æ•°æ®ç»“æ„ï¼Œéçº¿ç¨‹å®‰å…¨ï¼Œåœ°å€ä¸è¿ç»­ï¼ŒæŸ¥è¯¢æ•ˆç‡æ¯”è¾ƒä½ï¼Œæ’å…¥å’Œåˆ é™¤æ•ˆç‡æ¯”è¾ƒé«˜ã€‚é€‚åˆæ’å…¥å’Œåˆ é™¤æ“ä½œé¢‘ç¹çš„åœºæ™¯ã€‚</li></ul><h3 id="HashMapã€LinkedHashMapã€ConcurrentHashMapã€TreeMapä¸ArrayMapæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#HashMapã€LinkedHashMapã€ConcurrentHashMapã€TreeMapä¸ArrayMapæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="HashMapã€LinkedHashMapã€ConcurrentHashMapã€TreeMapä¸ArrayMapæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ"></a>HashMapã€LinkedHashMapã€ConcurrentHashMapã€TreeMapä¸ArrayMapæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ul><li>HashMapï¼šåŸºäºHashMap.Nodeæ•°ç»„åŠ å•å‘é“¾è¡¨å®ç°ï¼Œéçº¿ç¨‹å®‰å…¨ï¼Œåœ°å€ä¸è¿ç»­ï¼ŒæŸ¥è¯¢æ•ˆç‡æ¯”è¾ƒä½ï¼Œæ’å…¥å’Œåˆ é™¤æ•ˆç‡æ¯”è¾ƒé«˜ã€‚é€‚åˆæ’å…¥å’Œåˆ é™¤æ“ä½œé¢‘ç¹çš„åœºæ™¯ã€‚</li><li>LinkedHashMapï¼šåŸºäº</li><li>ConcurrentHashMapï¼šåŸºäºhashè¡¨å®ç°ï¼Œçº¿ç¨‹å®‰å…¨ä¸”é«˜æ•ˆï¼Œåˆ†æ®µé”çš„å®ç°ç›¸å¯¹äºHashTableçš„å®ç°æé«˜äº†å¾ˆå¤§çš„æ•ˆç‡ã€‚</li><li>TreeMapï¼šåŸºäºçº¢é»‘æ ‘å®ç°ï¼Œéçº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥æŒ‰ç…§è‡ªç„¶é¡ºåºæˆ–è€…è‡ªå®šä¹‰é¡ºåºè‡ªåŠ¨æ’åºï¼Œä¸å…è®¸æ’å…¥nullå€¼ï¼ŒæŸ¥æ‰¾æ•ˆç‡æ¯”è¾ƒé«˜ï¼Œé€‚åˆéœ€è¦æ’åºçš„åœºæ™¯ã€‚</li></ul><p>ConcurrentHashMapå­˜å‚¨å…ƒç´ çš„ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://github.com/guoxiaoxing/data-structure-and-algorithm/raw/master/art/hash/HashMap_structure.png" width="500"></p><p>ConcurrentHashMapä¸HashMapä¸€æ ·é€‚ç”¨æ•°ç»„åŠ é“¾è¡¨å­˜å‚¨å…ƒç´ ï¼Œé€‚ç”¨é“¾è¡¨å®šå€æ³•æ¥è§£å†³å“ˆå¸Œå†²çªï¼Œä¸åŒä¹‹å¤„åœ¨äºå½“é“¾è¡¨é•¿åº¦å¤§äº8çš„æ—¶å€™ä¼šå°†é“¾è¡¨è½¬æ¢ä¸ºä¸€æ£µçº¢é»‘æ ‘ï¼ŒæŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ç”±O(N)å˜æˆO(lgN)ã€‚</p><p>ConcurrentHashMapå¹¶å‘æ§åˆ¶çš„å…³é”®åœ¨äºä¸€ä¸ªå˜é‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">transient</span> <span class="keyword">volatile</span> <span class="keyword">int</span> sizeCtl;</div></pre></td></tr></table></figure><p>sizeCtlè¢«volatileå…³é”®å­—ä¿®é¥°æ˜¯ä¸€ä¸ªå¤šçº¿ç¨‹å…±äº«çš„å˜é‡ï¼Œå½“å®ƒçš„å€¼ä¸ºè´Ÿæ•°çš„æ—¶å€™è¯´æ˜æŸä¸ªçº¿ç¨‹æ­£åœ¨æ“ä½œè¿™ä¸ªMapï¼Œæƒ³è¦å»æ“ä½œè¿™ä¸ªMapçš„çº¿ç¨‹å°±è¦ä¸€ç›´å»ç«äº‰è¿™ä¸ªsizeCtlï¼Œæ²¡æœ‰å¾—åˆ°è¿™ä¸ªå˜é‡çš„å€¼å°±è¦ä¸€ç›´è‡ªæ—‹ç­‰å¾…è¿™ä¸ªå˜é‡ï¼Œå½“å ç”¨<br>è¿™ä¸ªå˜é‡çš„çº¿ç¨‹æ“ä½œå®Œæˆåï¼Œè¦å°†è¿™ä¸ªå˜é‡çš„å€¼è®¾ç½®å›æ¥ï¼Œä»¥ä¾¿è®©å…¶ä»–çº¿ç¨‹èµ°å‡ºè‡ªæ—‹ï¼Œç«äº‰åˆ°è¯¥å˜é‡ã€‚</p><p>è¿™ç§åŒæ­¥è¿›åˆ¶äº‹å®ä¸Šæ˜¯ä¸€ç§CASçš„åšæ³•ã€‚</p><blockquote><p>CASï¼ˆCompare and swapï¼‰æ¯”è¾ƒå’Œæ›¿æ¢æ˜¯è®¾è®¡å¹¶å‘ç®—æ³•æ—¶ç”¨åˆ°çš„ä¸€ç§æŠ€æœ¯ã€‚ç®€å•æ¥è¯´ï¼Œæ¯”è¾ƒ</p></blockquote><h3 id="HashSetã€LinkedHashSetä¸TreeSetæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#HashSetã€LinkedHashSetä¸TreeSetæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="HashSetã€LinkedHashSetä¸TreeSetæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ"></a>HashSetã€LinkedHashSetä¸TreeSetæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ul><li>HashSetï¼šåŸºäºHashMapå®ç°ï¼Œéçº¿ç¨‹å®‰å…¨ï¼Œåœ°å€ä¸è¿ç»­ï¼ŒæŸ¥è¯¢æ•ˆç‡æ¯”è¾ƒä½ï¼Œæ’å…¥å’Œåˆ é™¤æ•ˆç‡æ¯”è¾ƒé«˜ã€‚é€‚åˆæ’å…¥å’Œåˆ é™¤æ“ä½œé¢‘ç¹çš„åœºæ™¯ã€‚</li><li>LinkedHashSetï¼š</li></ul><ul><li>TreeSetåŸºäºçº¢é»‘æ ‘å®ç°ï¼Œéçº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥æŒ‰ç…§è‡ªç„¶é¡ºåºæˆ–è€…è‡ªå®šä¹‰é¡ºåºè‡ªåŠ¨æ’åºï¼Œä¸å…è®¸æ’å…¥nullå€¼ã€‚é€‚åˆéœ€è¦æ’åºçš„åœºæ™¯ã€‚</li><li>HashSetåŸºäºhashè¡¨å®ç°ï¼Œéçº¿ç¨‹å®‰å…¨ï¼Œå…è®¸æ’å…¥nullï¼ŒæŸ¥æ‰¾æ•ˆç‡é«˜ã€‚é€‚åˆæŸ¥æ‰¾æ“ä½œé¢‘ç¹çš„åœºæ™¯ã€‚</li></ul><h3 id="HashMapæ˜¯å¦‚ä½•è§£å†³hashç¢°æ’çš„ï¼Ÿ"><a href="#HashMapæ˜¯å¦‚ä½•è§£å†³hashç¢°æ’çš„ï¼Ÿ" class="headerlink" title="HashMapæ˜¯å¦‚ä½•è§£å†³hashç¢°æ’çš„ï¼Ÿ"></a>HashMapæ˜¯å¦‚ä½•è§£å†³hashç¢°æ’çš„ï¼Ÿ</h3><ul><li>å¼€å‘å®šå€æ³•</li><li>é“¾è¡¨æ³•</li></ul><blockquote><p>HashMapåŸºäºæ•°ç»„å®ç°ï¼Œæ•°ç»„é‡Œçš„å…ƒç´ æ˜¯ä¸€ä¸ªå•å‘é“¾è¡¨ã€‚</p></blockquote><p><img src="https://github.com/guoxiaoxing/data-structure-and-algorithm/raw/master/art/hash/HashMap_class.png" width="500"></p><p>HashMapå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>åŸºäºæ•°ç»„å®ç°ï¼Œæ•°ç»„é‡Œçš„å…ƒç´ æ˜¯ä¸€ä¸ªå•å‘é“¾è¡¨ã€‚</li><li>é”®ä¸å¯ä»¥é‡å¤ï¼Œå€¼å¯ä»¥é‡å¤ï¼Œé”®ã€å€¼éƒ½å¯ä»¥ä¸ºnull</li><li>éçº¿ç¨‹å®‰å…¨</li></ul><p>HashMapå®ç°äº†ä»¥ä¸‹æ¥å£ï¼š</p><ul><li>Mapï¼šä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜å–å…ƒç´ </li><li>Cloneableï¼šå¯ä»¥è¢«å…‹éš†</li><li>Serializableï¼šå¯ä»¥åºåˆ—åŒ–</li></ul><p>æŸ¥æ‰¾æµç¨‹</p><ol><li>è®¡ç®—å“ˆå¸Œå€¼ï¼Œæ ¹æ®å“ˆå¸Œå€¼ä¸æ•°ç»„å®¹é‡è®¡ç®—å®ƒæ‰€åœ¨çš„ç´¢å¼•ï¼Œæ ¹æ®ç´¢å¼•æŸ¥æ‰¾å®ƒæ‰€åœ¨çš„é“¾è¡¨ã€‚</li><li>åœ¨å•å‘é“¾è¡¨ä¸­æŸ¥æ‰¾è¯¥å…ƒç´ </li></ol><p>åˆ é™¤æµç¨‹</p><ol><li>è®¡ç®—å“ˆå¸Œå€¼ï¼Œæ ¹æ®å“ˆå¸Œå€¼ä¸æ•°ç»„å®¹é‡è®¡ç®—å®ƒæ‰€åœ¨çš„ç´¢å¼•ï¼Œæ ¹æ®ç´¢å¼•æŸ¥æ‰¾å®ƒæ‰€åœ¨çš„é“¾è¡¨ã€‚</li><li>ä»èµ·å§‹èŠ‚ç‚¹å¼€å§‹éå†ï¼ŒæŸ¥æ‰¾è¦åˆ é™¤çš„å…ƒç´ ï¼Œåˆ é™¤è¯¥èŠ‚ç‚¹ï¼Œå°†èŠ‚ç‚¹çš„åç»§æ·»åŠ ä¸ºå®ƒå‰é©±çš„åç»§</li></ol><p>æ’å…¥æµç¨‹</p><ol><li>æ ¹æ®keyè®¡ç®—hashå€¼ï¼Œå¹¶æ ¹æ®hashå€¼å’Œæ•°ç»„å®¹é‡ï¼Œæ‰¾åˆ°ç´¢å¼•å€¼ï¼Œè¯¥ä½ç½®å³ä¸ºå­˜å‚¨è¯¥å…ƒç´ çš„é“¾è¡¨æ‰€åœ¨å¤„ã€‚</li><li>éå†table[i]ä½ç½®çš„é“¾è¡¨ï¼ŒæŸ¥æ‰¾ç›¸åŒçš„keyï¼Œè‹¥æ‰¾åˆ°åˆ™åˆ™ç”¨æ–°çš„valueæ›¿æ¢æ‰oldValue.</li><li>è‹¥æ²¡æœ‰æŸ¥æ‰¾åˆ°ç›¸åŒçš„keyï¼Œåˆ™æ·»åŠ keyåˆ°table[i]ä½ç½®ï¼Œæ–°æ·»åŠ çš„å…ƒç´ æ€»æ˜¯æ·»åŠ åœ¨å•å‘é“¾è¡¨çš„è¡¨å¤´ä½ç½®ï¼Œåé¢çš„å…ƒç´ ç§°ä¸ºå®ƒçš„åç»§ã€‚</li></ol><blockquote><p>HashSetåŸºäºHashMapå®ç°ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒä»¥HashMapçš„keyæ¥å­˜å‚¨å…ƒç´ ï¼Œå› ä¸ºHashMapé‡Œçš„keyæ˜¯ä¸ä¼šé‡å¤çš„ï¼Œæ‰€ä»¥HashSetçš„å…ƒç´ æ—¶ä¸é‡å¤ä¸”æ— åºçš„ã€‚</p></blockquote><p><img src="https://github.com/guoxiaoxing/data-structure-and-algorithm/raw/master/art/hash/HashSet_class.png" width="500"></p><h3 id="SpareArrayåšäº†å“ªäº›ä¼˜åŒ–ï¼Ÿ"><a href="#SpareArrayåšäº†å“ªäº›ä¼˜åŒ–ï¼Ÿ" class="headerlink" title="SpareArrayåšäº†å“ªäº›ä¼˜åŒ–ï¼Ÿ"></a>SpareArrayåšäº†å“ªäº›ä¼˜åŒ–ï¼Ÿ</h3><p>ä¼˜ç‚¹</p><ul><li>keyä¿å­˜åœ¨int mKeys[]æ•°ç»„ä¸­ï¼Œç›¸å¯¹äºHashMapä¸å†å¯¹keyè¿›è¡Œè‡ªåŠ¨è£…ç®±ï¼Œé¿å…èµ„æºæ¶ˆè€—ã€‚ä½†æ˜¯vauleæ˜¯ä¿å­˜åœ¨Object[] mValuesæ•°ç»„ä¸­è¿˜æ˜¯éœ€è¦è‡ªåŠ¨è£…ç®±çš„ã€‚</li><li>ç›¸å¯¹äºHashMapï¼Œä¸å†ä½¿ç”¨é¢å¤–çš„Entryå¯¹è±¡æ¥å­˜å‚¨æ•°æ®ï¼Œå‡å°‘äº†å†…å­˜å¼€é”€ã€‚</li><li>æ•°æ®é‡å°çš„æƒ…å†µä¸‹ï¼Œéšæœºè®¿é—®æ•ˆç‡æ›´é«˜ã€‚</li></ul><p>ç¼ºç‚¹</p><ul><li>æ’å…¥æ“ä½œéœ€è¦å¤åˆ¶æ•°ç»„ï¼Œå¢åˆ æ•ˆç‡ä½ã€‚</li><li>æ•°æ®é‡å·¨å¤§æ—¶ï¼Œå¤åˆ¶æ•°ç»„æˆæœ¬å·¨å¤§ï¼Œgc()æˆæœ¬ä¹Ÿå·¨å¤§ã€‚</li><li>æ•°æ®é‡å·¨å¤§æ—¶ï¼ŒæŸ¥è¯¢æ•ˆç‡ä¹Ÿä¼šæ˜æ˜¾ä¸‹é™ã€‚</li></ul><h3 id="ç®€å•è¯´ä¸€è¯´SpareArrayçš„æ’å…¥æµç¨‹ï¼Ÿ"><a href="#ç®€å•è¯´ä¸€è¯´SpareArrayçš„æ’å…¥æµç¨‹ï¼Ÿ" class="headerlink" title="ç®€å•è¯´ä¸€è¯´SpareArrayçš„æ’å…¥æµç¨‹ï¼Ÿ"></a>ç®€å•è¯´ä¸€è¯´SpareArrayçš„æ’å…¥æµç¨‹ï¼Ÿ</h3><p>SpareArrayçš„keyæ˜¯ä¸€ä¸ªintæœ‰åºæ•°ç»„ï¼ŒæŸ¥æ‰¾è¿‡ç¨‹ä½¿ç”¨çš„äºŒåˆ†æŸ¥æ‰¾ã€‚</p><ol><li>ç”¨äºŒåˆ†æŸ¥æ‰¾æ³•æŸ¥æ‰¾å…ƒç´ çš„keyã€‚</li><li>å¦‚æœæ’å…¥çš„æ•°æ®å†²çªäº†ï¼Œåˆ™ç›´æ¥è¦†ç›–åŸåˆ™ã€‚</li><li>å¦‚æœå½“å‰æ’å…¥çš„keyä¸Šçš„æ•°æ®ä¸ºDELETEï¼Œåˆ™ç›´æ¥è¦†ç›–ã€‚</li><li>å¦‚æœå‰é¢å‡ æ­¥éƒ½å¤±è´¥äº†ï¼Œåˆ™æ£€æŸ¥æ˜¯å¦éœ€è¦gc()å¹¶ä¸”åœ¨ç´¢å¼•ä¸Šæ’å…¥æ•°æ®ã€‚</li></ol><h3 id="Nä¸ªæ— åºæ ‘ä¸­æŸ¥æ‰¾æœ€å¤§çš„10ä¸ªæ•°ï¼Ÿ"><a href="#Nä¸ªæ— åºæ ‘ä¸­æŸ¥æ‰¾æœ€å¤§çš„10ä¸ªæ•°ï¼Ÿ" class="headerlink" title="Nä¸ªæ— åºæ ‘ä¸­æŸ¥æ‰¾æœ€å¤§çš„10ä¸ªæ•°ï¼Ÿ"></a>Nä¸ªæ— åºæ ‘ä¸­æŸ¥æ‰¾æœ€å¤§çš„10ä¸ªæ•°ï¼Ÿ</h3><h3 id="æ‰‹å†™ä»£ç éå†æ–‡ä»¶ç›®å½•ï¼Ÿ"><a href="#æ‰‹å†™ä»£ç éå†æ–‡ä»¶ç›®å½•ï¼Ÿ" class="headerlink" title="æ‰‹å†™ä»£ç éå†æ–‡ä»¶ç›®å½•ï¼Ÿ"></a>æ‰‹å†™ä»£ç éå†æ–‡ä»¶ç›®å½•ï¼Ÿ</h3><h3 id="ç”µæ¢¯è¿è¡Œçš„ç®—æ³•åˆ†æï¼Ÿ"><a href="#ç”µæ¢¯è¿è¡Œçš„ç®—æ³•åˆ†æï¼Ÿ" class="headerlink" title="ç”µæ¢¯è¿è¡Œçš„ç®—æ³•åˆ†æï¼Ÿ"></a>ç”µæ¢¯è¿è¡Œçš„ç®—æ³•åˆ†æï¼Ÿ</h3><h3 id="æ‰‹å†™ä¸€ä¸‹å•é“¾è¡¨çš„æŸ¥è¯¢æ“ä½œï¼Ÿ"><a href="#æ‰‹å†™ä¸€ä¸‹å•é“¾è¡¨çš„æŸ¥è¯¢æ“ä½œï¼Ÿ" class="headerlink" title="æ‰‹å†™ä¸€ä¸‹å•é“¾è¡¨çš„æŸ¥è¯¢æ“ä½œï¼Ÿ"></a>æ‰‹å†™ä¸€ä¸‹å•é“¾è¡¨çš„æŸ¥è¯¢æ“ä½œï¼Ÿ</h3><h3 id="æ‰‹å†™äºŒåˆ†æŸ¥æ‰¾ï¼Ÿ"><a href="#æ‰‹å†™äºŒåˆ†æŸ¥æ‰¾ï¼Ÿ" class="headerlink" title="æ‰‹å†™äºŒåˆ†æŸ¥æ‰¾ï¼Ÿ"></a>æ‰‹å†™äºŒåˆ†æŸ¥æ‰¾ï¼Ÿ</h3><h3 id="æ‰‹å†™ä¸€ä¸ªå­—ç¬¦ä¸²ç¿»è½¬ï¼Ÿ"><a href="#æ‰‹å†™ä¸€ä¸ªå­—ç¬¦ä¸²ç¿»è½¬ï¼Ÿ" class="headerlink" title="æ‰‹å†™ä¸€ä¸ªå­—ç¬¦ä¸²ç¿»è½¬ï¼Ÿ"></a>æ‰‹å†™ä¸€ä¸ªå­—ç¬¦ä¸²ç¿»è½¬ï¼Ÿ</h3><h3 id="ä»é•¿åº¦ä¸ºmçš„intæ•°ç»„ä¸­éšæœºå–å‡ºnä¸ªå…ƒç´ ï¼Œæ¯æ¬¡å–çš„å…ƒç´ éƒ½æ˜¯ä¹‹å‰æœªå–è¿‡çš„ï¼Œå¦‚ä½•ä¼˜åŒ–ï¼Ÿ"><a href="#ä»é•¿åº¦ä¸ºmçš„intæ•°ç»„ä¸­éšæœºå–å‡ºnä¸ªå…ƒç´ ï¼Œæ¯æ¬¡å–çš„å…ƒç´ éƒ½æ˜¯ä¹‹å‰æœªå–è¿‡çš„ï¼Œå¦‚ä½•ä¼˜åŒ–ï¼Ÿ" class="headerlink" title="ä»é•¿åº¦ä¸ºmçš„intæ•°ç»„ä¸­éšæœºå–å‡ºnä¸ªå…ƒç´ ï¼Œæ¯æ¬¡å–çš„å…ƒç´ éƒ½æ˜¯ä¹‹å‰æœªå–è¿‡çš„ï¼Œå¦‚ä½•ä¼˜åŒ–ï¼Ÿ"></a>ä»é•¿åº¦ä¸ºmçš„intæ•°ç»„ä¸­éšæœºå–å‡ºnä¸ªå…ƒç´ ï¼Œæ¯æ¬¡å–çš„å…ƒç´ éƒ½æ˜¯ä¹‹å‰æœªå–è¿‡çš„ï¼Œå¦‚ä½•ä¼˜åŒ–ï¼Ÿ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">string:  Hello</div><div class="line">  length:  5</div><div class="line">  </div><div class="line">          0 1 2 3 4 </div><div class="line">  before: H e l l o</div><div class="line">  after:  o l l e H</div><div class="line">  </div><div class="line">  index             sum</div><div class="line">  0: H---&gt;o  0--&gt;4  4</div><div class="line">  1: e---&gt;l  1--&gt;3  4</div><div class="line">  2: l---&gt;l  2--&gt;2  4</div></pre></td></tr></table></figure><p>è§£æ³•ä¸€ï¼šä½¿ç”¨æ•°ç»„</p><ol><li>å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºcharæ•°ç»„</li><li>éå†å¾ªç¯ç»™charæ•°ç»„èµ‹å€¼</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">strReverseWithArray2</span><span class="params">(String string)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span>(string==<span class="keyword">null</span>||string.length()==<span class="number">0</span>)<span class="keyword">return</span> string;</div><div class="line">    <span class="keyword">int</span> length = string.length();</div><div class="line">    <span class="keyword">char</span> [] array = string.toCharArray();</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;length/<span class="number">2</span>;i++)&#123;</div><div class="line">        array[i] = string.charAt(length-<span class="number">1</span>-i);</div><div class="line">        array[length-<span class="number">1</span>-i] = string.charAt(i);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> String(array);</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>è§£æ³•äºŒï¼šä½¿ç”¨æ ˆ</p><ol><li>å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºcharæ•°ç»„</li><li>å°†charæ•°ç»„ä¸­çš„å­—ç¬¦ä¾æ¬¡å‹å…¥æ ˆä¸­</li><li>å°†æ ˆä¸­çš„å­—ç¬¦ä¾æ¬¡å¼¹å‡ºèµ‹å€¼ç»™charæ•°ç»„</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">strReverseWithStack</span><span class="params">(String string)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span>(string==<span class="keyword">null</span>||string.length()==<span class="number">0</span>)<span class="keyword">return</span> string;</div><div class="line">    Stack&lt;Character&gt; stringStack = <span class="keyword">new</span> Stack&lt;&gt;();</div><div class="line">    <span class="keyword">char</span> [] array = string.toCharArray();</div><div class="line">    <span class="keyword">for</span>(Character c:array)&#123;</div><div class="line">        stringStack.push(c);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> length = string.length();</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i= <span class="number">0</span>;i&lt;length;i++)&#123;</div><div class="line">        array[i] = stringStack.pop();</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> String(array);</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>è§£æ³•ä¸‰ï¼šé€†åºéå†</p><ol><li>é€†åºéå†å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ï¼Œå¹¶å°†å®ƒä¾æ¬¡æ·»åŠ åˆ°StringBuilderä¸­</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">strReverseWithReverseLoop</span><span class="params">(String string)</span></span>&#123;</div><div class="line">        <span class="keyword">if</span>(string==<span class="keyword">null</span>||string.length()==<span class="number">0</span>)<span class="keyword">return</span> string;</div><div class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = string.length()-<span class="number">1</span>;i&gt;=<span class="number">0</span>;i--)&#123;</div><div class="line">            sb.append(string.charAt(i));</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> sb.toString();</div><div class="line">    &#125;</div></pre></td></tr></table></figure><h3 id="å•é“¾è¡¨åè½¬ï¼Œåˆå¹¶å¤šä¸ªå•é“¾è¡¨"><a href="#å•é“¾è¡¨åè½¬ï¼Œåˆå¹¶å¤šä¸ªå•é“¾è¡¨" class="headerlink" title="å•é“¾è¡¨åè½¬ï¼Œåˆå¹¶å¤šä¸ªå•é“¾è¡¨"></a>å•é“¾è¡¨åè½¬ï¼Œåˆå¹¶å¤šä¸ªå•é“¾è¡¨</h3><p>å•é“¾è¡¨çš„ç»“æ„å°±åƒä¸€ä¸ªç«è½¦çš„ç»“æ„ï¼Œç«è½¦å¤´æ‹‰ç€è®¸å¤šè½¦å¢ï¼Œå®ç°é“¾è¡¨ç¿»è½¬ï¼Œå¯ä»¥åˆ©ç”¨é€’å½’ç¿»è½¬æ³•ï¼Œåœ¨åè½¬å½“å‰èŠ‚ç‚¹ä¹‹å‰å…ˆåè½¬åç»­èŠ‚ç‚¹ã€‚è¿™æ ·ä»å¤´ç»“ç‚¹å¼€å§‹ï¼Œå±‚å±‚æ·±å…¥ç›´åˆ°å°¾ç»“ç‚¹æ‰å¼€å§‹åè½¬æŒ‡é’ˆåŸŸçš„æŒ‡å‘ã€‚ç®€å•çš„<br>è¯´å°±æ˜¯ä»å°¾ç»“ç‚¹å¼€å§‹ï¼Œé€†å‘åè½¬å„ä¸ªç»“ç‚¹çš„æŒ‡é’ˆåŸŸæŒ‡å‘ï¼Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedListReverse</span> </span>&#123;  </div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;  </div><div class="line">        Node head = <span class="keyword">new</span> Node(<span class="number">0</span>);  </div><div class="line">        Node node1 = <span class="keyword">new</span> Node(<span class="number">1</span>);  </div><div class="line">        Node node2 = <span class="keyword">new</span> Node(<span class="number">2</span>);  </div><div class="line">        Node node3 = <span class="keyword">new</span> Node(<span class="number">3</span>);  </div><div class="line">        head.setNext(node1);  </div><div class="line">        node1.setNext(node2);  </div><div class="line">        node2.setNext(node3);  </div><div class="line">  </div><div class="line">        <span class="comment">// æ‰“å°åè½¬å‰çš„é“¾è¡¨  </span></div><div class="line">        Node h = head;  </div><div class="line">        <span class="keyword">while</span> (<span class="keyword">null</span> != h) &#123;  </div><div class="line">            System.out.print(h.getData() + <span class="string">" "</span>);  </div><div class="line">            h = h.getNext();  </div><div class="line">        &#125;  </div><div class="line">        <span class="comment">// è°ƒç”¨åè½¬æ–¹æ³•  </span></div><div class="line">        head = Reverse1(head);  </div><div class="line">  </div><div class="line">        System.out.println(<span class="string">"\n**************************"</span>);  </div><div class="line">        <span class="comment">// æ‰“å°åè½¬åçš„ç»“æœ  </span></div><div class="line">        <span class="keyword">while</span> (<span class="keyword">null</span> != head) &#123;  </div><div class="line">            System.out.print(head.getData() + <span class="string">" "</span>);  </div><div class="line">            head = head.getNext();  </div><div class="line">        &#125;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="comment">/** </span></div><div class="line">     * é€’å½’ï¼Œåœ¨åè½¬å½“å‰èŠ‚ç‚¹ä¹‹å‰å…ˆåè½¬åç»­èŠ‚ç‚¹ </div><div class="line">     */  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Node <span class="title">Reverse1</span><span class="params">(Node head)</span> </span>&#123;  </div><div class="line">        <span class="comment">// headçœ‹ä½œæ˜¯å‰ä¸€ç»“ç‚¹ï¼Œhead.getNext()æ˜¯å½“å‰ç»“ç‚¹ï¼ŒreHeadæ˜¯åè½¬åæ–°é“¾è¡¨çš„å¤´ç»“ç‚¹  </span></div><div class="line">        <span class="keyword">if</span> (head == <span class="keyword">null</span> || head.getNext() == <span class="keyword">null</span>) &#123;  </div><div class="line">            <span class="keyword">return</span> head;<span class="comment">// è‹¥ä¸ºç©ºé“¾æˆ–è€…å½“å‰ç»“ç‚¹åœ¨å°¾ç»“ç‚¹ï¼Œåˆ™ç›´æ¥è¿˜å›  </span></div><div class="line">        &#125;  </div><div class="line">        Node reHead = Reverse1(head.getNext());<span class="comment">// å…ˆåè½¬åç»­èŠ‚ç‚¹head.getNext()  </span></div><div class="line">        head.getNext().setNext(head);<span class="comment">// å°†å½“å‰ç»“ç‚¹çš„æŒ‡é’ˆåŸŸæŒ‡å‘å‰ä¸€ç»“ç‚¹  </span></div><div class="line">        head.setNext(<span class="keyword">null</span>);<span class="comment">// å‰ä¸€ç»“ç‚¹çš„æŒ‡é’ˆåŸŸä»¤ä¸ºnull;  </span></div><div class="line">        <span class="keyword">return</span> reHead;<span class="comment">// åè½¬åæ–°é“¾è¡¨çš„å¤´ç»“ç‚¹  </span></div><div class="line">    &#125;  </div><div class="line">&#125;  </div><div class="line">  </div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;  </div><div class="line">        <span class="keyword">private</span> <span class="keyword">int</span> Data;<span class="comment">// æ•°æ®åŸŸ  </span></div><div class="line">        <span class="keyword">private</span> Node Next;<span class="comment">// æŒ‡é’ˆåŸŸ  </span></div><div class="line">  </div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(<span class="keyword">int</span> Data)</span> </span>&#123;  </div><div class="line">            <span class="comment">// super();  </span></div><div class="line">            <span class="keyword">this</span>.Data = Data;  </div><div class="line">        &#125;  </div><div class="line">  </div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getData</span><span class="params">()</span> </span>&#123;  </div><div class="line">            <span class="keyword">return</span> Data;  </div><div class="line">        &#125;  </div><div class="line">  </div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setData</span><span class="params">(<span class="keyword">int</span> Data)</span> </span>&#123;  </div><div class="line">            <span class="keyword">this</span>.Data = Data;  </div><div class="line">        &#125;  </div><div class="line">  </div><div class="line">        <span class="function"><span class="keyword">public</span> Node <span class="title">getNext</span><span class="params">()</span> </span>&#123;  </div><div class="line">            <span class="keyword">return</span> Next;  </div><div class="line">        &#125;  </div><div class="line">  </div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNext</span><span class="params">(Node Next)</span> </span>&#123;  </div><div class="line">            <span class="keyword">this</span>.Next = Next;  </div><div class="line">        &#125;  </div><div class="line">    &#125;</div></pre></td></tr></table></figure><h3 id="æ’åºç®—æ³•"><a href="#æ’åºç®—æ³•" class="headerlink" title="æ’åºç®—æ³•"></a>æ’åºç®—æ³•</h3><p>ä»¥ä¸‹æ’åºç®—æ³•å†…å®¹æ¥è‡ªï¼š<a href="https://github.com/francistao/LearningNotes/blob/master/Part3/Algorithm/Sort/%E9%9D%A2%E8%AF%95%E4%B8%AD%E7%9A%84%2010%20%E5%A4%A7%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93.md" target="_blank" rel="external">é¢è¯•ä¸­çš„ 10 å¤§æ’åºç®—æ³•æ€»ç»“.md</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;ä¸€æ¬¡æ¬¡çš„æŒ‚äºä¸€é¢è®©æˆ‘ç­‹ç–²åŠ›ç«­â€¦æ„è¯†åˆ°è‡ªå·±å­˜åœ¨çœ¼é«˜æ‰‹ä½çš„çŠ¶æ€â€¦å‡†å¤‡é‡æ–°ä¸Šè·¯å¤¯å®åŸºç¡€&lt;br&gt;æœ¬ç‰‡æ–‡ç« Fork from &lt;a href=&quot;https://github.com/guoxiaoxing/android-interview&quot; target=
      
    
    </summary>
    
    
      <category term="Interview" scheme="https://edward7zhang.github.io/tags/Interview/"/>
    
      <category term="Algorithm" scheme="https://edward7zhang.github.io/tags/Algorithm/"/>
    
      <category term="DataStructure" scheme="https://edward7zhang.github.io/tags/DataStructure/"/>
    
  </entry>
  
  <entry>
    <title>Javaé¢è¯•é¢˜é›†</title>
    <link href="https://edward7zhang.github.io/2018/04/10/Java%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%86/"/>
    <id>https://edward7zhang.github.io/2018/04/10/Javaé¢è¯•é¢˜é›†/</id>
    <published>2018-04-10T01:07:14.000Z</published>
    <updated>2018-04-18T16:33:16.250Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä¸€æ¬¡æ¬¡çš„æŒ‚äºä¸€é¢è®©æˆ‘ç­‹ç–²åŠ›ç«­â€¦æ„è¯†åˆ°è‡ªå·±å­˜åœ¨çœ¼é«˜æ‰‹ä½çš„çŠ¶æ€â€¦å‡†å¤‡é‡æ–°ä¸Šè·¯å¤¯å®åŸºç¡€<br>æœ¬ç‰‡æ–‡ç« Fork from <a href="https://github.com/guoxiaoxing/android-interview" target="_blank" rel="external">android-interview</a></p></blockquote><h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><h3 id="è°ˆè°ˆå¯¹Javaå¤šæ€çš„ç†è§£ï¼Ÿ"><a href="#è°ˆè°ˆå¯¹Javaå¤šæ€çš„ç†è§£ï¼Ÿ" class="headerlink" title="è°ˆè°ˆå¯¹Javaå¤šæ€çš„ç†è§£ï¼Ÿ"></a>è°ˆè°ˆå¯¹Javaå¤šæ€çš„ç†è§£ï¼Ÿ</h3><blockquote><p>å¤šæ€æ˜¯æŒ‡çˆ¶ç±»çš„æŸä¸ªæ–¹æ³•è¢«å­ç±»é‡å†™æ—¶ï¼Œå¯ä»¥äº§ç”Ÿè‡ªå·±çš„åŠŸèƒ½è¡Œä¸ºï¼ŒåŒä¸€ä¸ªæ“ä½œä½œç”¨äºä¸åŒå¯¹è±¡ï¼Œå¯ä»¥æœ‰ä¸åŒçš„è§£é‡Šï¼Œäº§ç”Ÿä¸åŒçš„æ‰§è¡Œç»“æœã€‚</p></blockquote><p>å¤šæ€çš„ä¸‰ä¸ªå¿…è¦æ¡ä»¶ï¼š</p><ol><li>ç»§æ‰¿çˆ¶ç±»ã€‚</li><li>é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚</li><li>çˆ¶ç±»çš„å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡ã€‚</li></ol><h3 id="é™æ€æ–¹æ³•ä¸é™æ€æˆå‘˜å˜é‡å¯ä»¥è¢«ç»§æ‰¿å—ï¼Œä¸ºä»€ä¹ˆï¼Ÿ"><a href="#é™æ€æ–¹æ³•ä¸é™æ€æˆå‘˜å˜é‡å¯ä»¥è¢«ç»§æ‰¿å—ï¼Œä¸ºä»€ä¹ˆï¼Ÿ" class="headerlink" title="é™æ€æ–¹æ³•ä¸é™æ€æˆå‘˜å˜é‡å¯ä»¥è¢«ç»§æ‰¿å—ï¼Œä¸ºä»€ä¹ˆï¼Ÿ"></a>é™æ€æ–¹æ³•ä¸é™æ€æˆå‘˜å˜é‡å¯ä»¥è¢«ç»§æ‰¿å—ï¼Œä¸ºä»€ä¹ˆï¼Ÿ</h3><p>é™æ€æ–¹æ³•ä¸é™æ€æˆå‘˜å˜é‡å¯ä»¥è¢«ç»§æ‰¿ï¼Œä½†æ˜¯ä¸èƒ½è¢«é‡å†™ã€‚å®ƒå¯¹å­ç±»éšè—ï¼Œå› æ­¤é™æ€æ–¹æ³•ä¹Ÿä¸èƒ½å®ç°å¤šæ€ã€‚</p><h3 id="ä¸ºä»€ä¹ˆJavaé‡Œçš„åŒ¿åå†…éƒ¨ç±»åªèƒ½è®¿é—®finalä¿®é¥°çš„å¤–éƒ¨å˜é‡ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆJavaé‡Œçš„åŒ¿åå†…éƒ¨ç±»åªèƒ½è®¿é—®finalä¿®é¥°çš„å¤–éƒ¨å˜é‡ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆJavaé‡Œçš„åŒ¿åå†…éƒ¨ç±»åªèƒ½è®¿é—®finalä¿®é¥°çš„å¤–éƒ¨å˜é‡ï¼Ÿ"></a>ä¸ºä»€ä¹ˆJavaé‡Œçš„åŒ¿åå†…éƒ¨ç±»åªèƒ½è®¿é—®finalä¿®é¥°çš„å¤–éƒ¨å˜é‡ï¼Ÿ</h3><p>åŒ¿åå†…éƒ¨ç±»ç”¨æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TryUsingAnonymousClass</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">useMyInterface</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">final</span> Integer number = <span class="number">123</span>;</div><div class="line">        System.out.println(number);</div><div class="line"></div><div class="line">        MyInterface myInterface = <span class="keyword">new</span> MyInterface() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span> </span>&#123;</div><div class="line">                System.out.println(number);</div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line">        myInterface.doSomething();</div><div class="line"></div><div class="line">        System.out.println(number);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>ç¼–è¯‘åçš„ç»“æœ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TryUsingAnonymousClass</span>$1</span></div><div class="line">        <span class="keyword">implements</span> <span class="title">MyInterface</span> &#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> TryUsingAnonymousClass <span class="keyword">this</span>$<span class="number">0</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Integer paramInteger;</div><div class="line"></div><div class="line">    TryUsingAnonymousClass$<span class="number">1</span>(TryUsingAnonymousClass <span class="keyword">this</span>$<span class="number">0</span>, Integer paramInteger) &#123;</div><div class="line">        <span class="keyword">this</span>.<span class="keyword">this</span>$<span class="number">0</span> = <span class="keyword">this</span>$<span class="number">0</span>;</div><div class="line">        <span class="keyword">this</span>.paramInteger = paramInteger;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="keyword">this</span>.paramInteger);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>å› ä¸ºåŒ¿åå†…éƒ¨ç±»æœ€ç»ˆç”¨ä¼šç¼–è¯‘æˆä¸€ä¸ªå•ç‹¬çš„ç±»ï¼Œè€Œè¢«è¯¥ç±»ä½¿ç”¨çš„å˜é‡ä¼šä»¥æ„é€ å‡½æ•°å‚æ•°çš„å½¢å¼ä¼ é€’ç»™è¯¥ç±»ï¼Œä¾‹å¦‚ï¼šInteger paramIntegerï¼Œå¦‚æœå˜é‡<br>ä¸å®šä¹‰æˆfinalçš„ï¼ŒparamIntegeråœ¨åŒ¿åå†…éƒ¨ç±»è¢«å¯ä»¥è¢«ä¿®æ”¹ï¼Œè¿›è€Œé€ æˆå’Œå¤–éƒ¨çš„paramIntegerä¸ä¸€è‡´çš„é—®é¢˜ï¼Œä¸ºäº†é¿å…è¿™ç§ä¸ä¸€è‡´çš„æƒ…å†µï¼Œå› ä¸ºJava<br>è§„å®šåŒ¿åå†…éƒ¨ç±»åªèƒ½è®¿é—®finalä¿®é¥°çš„å¤–éƒ¨å˜é‡ã€‚</p><h3 id="è®²ä¸€ä¸‹Javaçš„ç¼–ç æ–¹å¼ï¼Ÿ"><a href="#è®²ä¸€ä¸‹Javaçš„ç¼–ç æ–¹å¼ï¼Ÿ" class="headerlink" title="è®²ä¸€ä¸‹Javaçš„ç¼–ç æ–¹å¼ï¼Ÿ"></a>è®²ä¸€ä¸‹Javaçš„ç¼–ç æ–¹å¼ï¼Ÿ</h3><p>ä¸ºä»€ä¹ˆéœ€è¦ç¼–ç </p><blockquote><p>è®¡ç®—æœºå­˜å‚¨ä¿¡æ¯çš„æœ€å°å•å…ƒæ˜¯ä¸€ä¸ªå­—èŠ‚å³8bitï¼Œæ‰€ä»¥èƒ½è¡¨ç¤ºçš„èŒƒå›´æ˜¯0~255ï¼Œè¿™ä¸ªèŒƒå›´æ— æ³•ä¿å­˜æ‰€æœ‰çš„å­—ç¬¦ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªæ–°çš„æ•°æ®ç»“æ„charæ¥è¡¨ç¤ºè¿™äº›å­—ç¬¦ï¼Œä»charåˆ°byteéœ€è¦ç¼–ç ã€‚</p></blockquote><p>å¸¸è§çš„ç¼–ç æ–¹å¼æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li>ASCIIï¼šæ€»å…±æœ‰ 128 ä¸ªï¼Œç”¨ä¸€ä¸ªå­—èŠ‚çš„ä½ 7 ä½è¡¨ç¤ºï¼Œ0~31 æ˜¯æ§åˆ¶å­—ç¬¦å¦‚æ¢è¡Œå›è½¦åˆ é™¤ç­‰ï¼›32~126 æ˜¯æ‰“å°å­—ç¬¦ï¼Œå¯ä»¥é€šè¿‡é”®ç›˜è¾“å…¥å¹¶ä¸”èƒ½å¤Ÿæ˜¾ç¤ºå‡ºæ¥ã€‚</li><li>GBKï¼šç èŒƒå›´æ˜¯ 8140~FEFEï¼ˆå»æ‰ XX7Fï¼‰æ€»å…±æœ‰ 23940 ä¸ªç ä½ï¼Œå®ƒèƒ½è¡¨ç¤º 21003 ä¸ªæ±‰å­—ï¼Œå®ƒçš„ç¼–ç æ˜¯å’Œ GB2312 å…¼å®¹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ç”¨ GB2312 ç¼–ç çš„æ±‰å­—å¯ä»¥ç”¨ GBK æ¥è§£ç ï¼Œå¹¶ä¸”ä¸ä¼šæœ‰ä¹±ç ã€‚</li><li>UTF-16ï¼šUTF-16 å…·ä½“å®šä¹‰äº† Unicode å­—ç¬¦åœ¨è®¡ç®—æœºä¸­å­˜å–æ–¹æ³•ã€‚UTF-16 ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥è¡¨ç¤º Unicode è½¬åŒ–æ ¼å¼ï¼Œè¿™ä¸ªæ˜¯å®šé•¿çš„è¡¨ç¤ºæ–¹æ³•ï¼Œä¸è®ºä»€ä¹ˆå­—ç¬¦éƒ½å¯ä»¥ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œä¸¤ä¸ªå­—èŠ‚æ˜¯ 16 ä¸ª bitï¼Œæ‰€ä»¥å« UTF-16ã€‚UTF-16 è¡¨ç¤ºå­—ç¬¦éå¸¸æ–¹ä¾¿ï¼Œæ¯ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œè¿™ä¸ªåœ¨å­—ç¬¦ä¸²æ“ä½œæ—¶å°±å¤§å¤§ç®€åŒ–äº†æ“ä½œï¼Œè¿™ä¹Ÿæ˜¯ Java ä»¥ UTF-16 ä½œä¸ºå†…å­˜çš„å­—ç¬¦å­˜å‚¨æ ¼å¼çš„ä¸€ä¸ªå¾ˆé‡è¦çš„åŸå› ã€‚</li><li>UTF-8ï¼šç»Ÿä¸€é‡‡ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œè™½ç„¶åœ¨è¡¨ç¤ºä¸Šéå¸¸ç®€å•æ–¹ä¾¿ï¼Œä½†æ˜¯ä¹Ÿæœ‰å…¶ç¼ºç‚¹ï¼Œæœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†å­—ç¬¦ç”¨ä¸€ä¸ªå­—èŠ‚å°±å¯ä»¥è¡¨ç¤ºçš„ç°åœ¨è¦ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œå­˜å‚¨ç©ºé—´æ”¾å¤§äº†ä¸€å€ï¼Œåœ¨ç°åœ¨çš„ç½‘ç»œå¸¦å®½è¿˜éå¸¸æœ‰é™çš„ä»Šå¤©ï¼Œè¿™æ ·ä¼šå¢å¤§ç½‘ç»œä¼ è¾“çš„æµé‡ï¼Œè€Œä¸”ä¹Ÿæ²¡å¿…è¦ã€‚è€Œ UTF-8 é‡‡ç”¨äº†ä¸€ç§å˜é•¿æŠ€æœ¯ï¼Œæ¯ä¸ªç¼–ç åŒºåŸŸæœ‰ä¸åŒçš„å­—ç é•¿åº¦ã€‚ä¸åŒç±»å‹çš„å­—ç¬¦å¯ä»¥æ˜¯ç”± 1~6 ä¸ªå­—èŠ‚ç»„æˆã€‚</li></ul><p>Javaä¸­éœ€è¦ç¼–ç çš„åœ°æ–¹ä¸€èˆ¬éƒ½åœ¨å­—ç¬¦åˆ°å­—èŠ‚çš„è½¬æ¢ä¸Šï¼Œè¿™ä¸ªä¸€èˆ¬åŒ…æ‹¬ç£ç›˜IOå’Œç½‘ç»œIOã€‚</p><blockquote><p>Reader ç±»æ˜¯ Java çš„ I/O ä¸­è¯»å­—ç¬¦çš„çˆ¶ç±»ï¼Œè€Œ InputStream ç±»æ˜¯è¯»å­—èŠ‚çš„çˆ¶ç±»ï¼ŒInputStreamReader ç±»å°±æ˜¯å…³è”å­—èŠ‚åˆ°å­—ç¬¦çš„æ¡¥æ¢ï¼Œå®ƒè´Ÿè´£åœ¨ I/O è¿‡ç¨‹ä¸­å¤„ç†è¯»å–å­—èŠ‚åˆ°å­—ç¬¦çš„è½¬æ¢ï¼Œè€Œå…·ä½“å­—èŠ‚åˆ°å­—ç¬¦çš„è§£ç å®ç°å®ƒç”± StreamDecoder å»å®ç°ï¼Œåœ¨ StreamDecoder è§£ç è¿‡ç¨‹ä¸­å¿…é¡»ç”±ç”¨æˆ·æŒ‡å®š Charset ç¼–ç æ ¼å¼ã€‚</p></blockquote><h3 id="é™æ€ä»£ç†ä¸åŠ¨æ€ä»£ç†åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œåˆ†åˆ«ç”¨åœ¨ä»€ä¹ˆæ ·çš„åœºæ™¯é‡Œï¼Ÿ"><a href="#é™æ€ä»£ç†ä¸åŠ¨æ€ä»£ç†åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œåˆ†åˆ«ç”¨åœ¨ä»€ä¹ˆæ ·çš„åœºæ™¯é‡Œï¼Ÿ" class="headerlink" title="é™æ€ä»£ç†ä¸åŠ¨æ€ä»£ç†åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œåˆ†åˆ«ç”¨åœ¨ä»€ä¹ˆæ ·çš„åœºæ™¯é‡Œï¼Ÿ"></a>é™æ€ä»£ç†ä¸åŠ¨æ€ä»£ç†åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œåˆ†åˆ«ç”¨åœ¨ä»€ä¹ˆæ ·çš„åœºæ™¯é‡Œï¼Ÿ</h3><p>é™æ€ä»£ç†ä¸åŠ¨æ€ä»£ç†çš„åŒºåˆ«åœ¨äºä»£ç†ç±»ç”Ÿæˆçš„æ—¶é—´ä¸åŒï¼Œå¦‚æœéœ€è¦å¯¹å¤šä¸ªç±»è¿›è¡Œä»£ç†ï¼Œå¹¶ä¸”ä»£ç†çš„åŠŸèƒ½éƒ½æ˜¯ä¸€æ ·çš„ï¼Œç”¨é™æ€ä»£ç†é‡å¤ç¼–å†™ä»£ç†ç±»å°±éå¸¸çš„éº»çƒ¦ï¼Œå¯ä»¥ç”¨åŠ¨æ€ä»£ç†åŠ¨æ€çš„ç”Ÿæˆä»£ç†ç±»ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">    <span class="comment">// ä¸ºç›®æ ‡å¯¹è±¡ç”Ÿæˆä»£ç†å¯¹è±¡</span></div><div class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">getProxyInstance</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> Proxy.newProxyInstance(target.getClass().getClassLoader(), target.getClass().getInterfaces(),</div><div class="line">            <span class="keyword">new</span> InvocationHandler() &#123;</div><div class="line"></div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</div><div class="line">                    System.out.println(<span class="string">"å¼€å¯äº‹åŠ¡"</span>);</div><div class="line"></div><div class="line">                    <span class="comment">// æ‰§è¡Œç›®æ ‡å¯¹è±¡æ–¹æ³•</span></div><div class="line">                    Object returnValue = method.invoke(target, args);</div><div class="line"></div><div class="line">                    System.out.println(<span class="string">"æäº¤äº‹åŠ¡"</span>);</div><div class="line">                    <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="æè¿°ä¸€ä¸‹Javaçš„å¼‚å¸¸ä½“ç³»ï¼Ÿ"><a href="#æè¿°ä¸€ä¸‹Javaçš„å¼‚å¸¸ä½“ç³»ï¼Ÿ" class="headerlink" title="æè¿°ä¸€ä¸‹Javaçš„å¼‚å¸¸ä½“ç³»ï¼Ÿ"></a>æè¿°ä¸€ä¸‹Javaçš„å¼‚å¸¸ä½“ç³»ï¼Ÿ</h3><ol><li>Erroræ˜¯ç¨‹åºæ— æ³•å¤„ç†çš„é”™è¯¯ï¼Œæ¯”å¦‚OutOfMemoryErrorã€ThreadDeathç­‰ã€‚è¿™äº›å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œ Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¸€èˆ¬ä¼šé€‰æ‹©çº¿ç¨‹ç»ˆæ­¢ã€‚ </li><li>Exceptionæ˜¯ç¨‹åºæœ¬èº«å¯ä»¥å¤„ç†çš„å¼‚å¸¸ï¼Œè¿™ç§å¼‚å¸¸åˆ†ä¸¤å¤§ç±»è¿è¡Œæ—¶å¼‚å¸¸å’Œéè¿è¡Œæ—¶å¼‚å¸¸ï¼Œç¨‹åºä¸­åº”å½“å°½å¯èƒ½å»å¤„ç†è¿™äº›å¼‚å¸¸ã€‚è¿è¡Œæ—¶å¼‚å¸¸éƒ½æ˜¯RuntimeExceptionç±»åŠå…¶å­ç±»å¼‚å¸¸ï¼Œå¦‚NullPointerExceptionã€IndexOutOfBoundsExceptionç­‰ï¼Œ<br>è¿™äº›å¼‚å¸¸æ˜¯ä¸æ£€æŸ¥å¼‚å¸¸ï¼Œç¨‹åºä¸­å¯ä»¥é€‰æ‹©æ•è·å¤„ç†ï¼Œä¹Ÿå¯ä»¥ä¸å¤„ç†ã€‚è¿™äº›å¼‚å¸¸ä¸€èˆ¬æ˜¯ç”±ç¨‹åºé€»è¾‘é”™è¯¯å¼•èµ·çš„ï¼Œ ç¨‹åºåº”è¯¥ä»é€»è¾‘è§’åº¦å°½å¯èƒ½é¿å…è¿™ç±»å¼‚å¸¸çš„å‘ç”Ÿã€‚ </li></ol><h3 id="æè¿°ä¸€ä¸ªç±»çš„åŠ è½½è¿‡ç¨‹ï¼Ÿ"><a href="#æè¿°ä¸€ä¸ªç±»çš„åŠ è½½è¿‡ç¨‹ï¼Ÿ" class="headerlink" title="æè¿°ä¸€ä¸ªç±»çš„åŠ è½½è¿‡ç¨‹ï¼Ÿ"></a>æè¿°ä¸€ä¸ªç±»çš„åŠ è½½è¿‡ç¨‹ï¼Ÿ</h3><p>Person person = new Person()</p><ol><li>æŸ¥æ‰¾Person.classï¼Œå¹¶åŠ è½½åˆ°å†…å­˜ä¸­ã€‚</li><li>æ‰§è¡Œç±»é‡Œçš„é™æ€ä»£ç å—ã€‚</li><li>åœ¨å †å†…å­˜é‡Œå¼€è¾Ÿå†…å­˜ç©ºé—´ï¼Œå¹¶åˆ†é…å†…å­˜åœ°å€ã€‚</li><li>åœ¨å †å†…å­˜é‡Œå»ºç«‹å¯¹è±¡çš„å±æ€§ï¼Œå¹¶è¿›è¡Œé»˜è®¤çš„åˆå§‹åŒ–ã€‚</li><li>å¯¹å±æ€§è¿›è¡Œæ˜¾ç¤ºåˆå§‹åŒ–ã€‚</li><li>å¯¹å¯¹è±¡è¿›è¡Œæ„é€ ä»£ç å—åˆå§‹åŒ–ã€‚</li><li>è°ƒç”¨å¯¹è±¡çš„æ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ã€‚</li><li>å°†å¯¹è±¡çš„åœ°å€èµ‹å€¼ç»™personå˜é‡ã€‚</li></ol><h3 id="Javaå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Javaå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Javaå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆï¼Ÿ"></a>Javaå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆï¼Ÿ</h3><ol><li>åŠ è½½ï¼šå°†ç±»çš„ä¿¡æ¯åŠ è½½åˆ°JVMçš„æ–¹æ³•åŒºï¼Œç„¶ååœ¨å †åŒºä¸­å®ä¾‹åŒ–ä¸€ä¸ªjava.lang.Classå¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•å»ä¸­è¿™ä¸ªç±»çš„ä¿¡æ¯å…¥å£ã€‚</li><li>è¿æ¥ï¼šéªŒè¯ï¼šéªŒè¯ç±»æ˜¯å¦åˆæ³•ã€‚å‡†å¤‡ï¼šä¸ºé™æ€å˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®JVMé»˜è®¤å€¼ï¼Œéé™æ€å˜é‡ä¸ä¼šåˆ†é…å†…å­˜ã€‚è§£æï¼šå°†å¸¸é‡æ± é‡Œçš„ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨ã€‚</li><li>åˆå§‹åŒ–ï¼šåˆå§‹åŒ–ç±»çš„é™æ€èµ‹å€¼è¯­å¥å’Œé™æ€ä»£ç å—ï¼Œä¸»åŠ¨å¼•ç”¨ä¼šè¢«è§¦å‘ç±»çš„åˆå§‹åŒ–ï¼Œè¢«åŠ¨å¼•ç”¨ä¸ä¼šè§¦å‘ç±»çš„åˆå§‹åŒ–ã€‚</li><li>ä½¿ç”¨ï¼šæ‰§è¡Œç±»çš„åˆå§‹åŒ–ï¼Œä¸»åŠ¨å¼•ç”¨ä¼šè¢«è§¦å‘ç±»çš„åˆå§‹åŒ–ï¼Œè¢«åŠ¨å¼•ç”¨ä¸ä¼šè§¦å‘ç±»çš„åˆå§‹åŒ–ã€‚</li><li>å¸è½½ï¼šå¸è½½è¿‡ç¨‹å°±æ˜¯æ¸…æ¥šå †é‡Œç±»çš„ä¿¡æ¯ï¼Œä»¥ä¸‹æƒ…å†µä¼šè¢«å¸è½½ï¼šâ‘  ç±»çš„æ‰€æœ‰å®ä¾‹éƒ½å·²ç»è¢«å›æ”¶ã€‚â‘¡ ç±»çš„ClassLoaderè¢«å›æ”¶ã€‚â‘¢ ç±»çš„CLasså¯¹è±¡æ²¡æœ‰è¢«ä»»ä½•åœ°æ–¹å¼•ç”¨ï¼Œæ— æ³•åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡<br>åå°„è®¿é—®è¯¥ç±»ã€‚</li></ol><h3 id="æè¿°ä¸€ä¸‹ç±»çš„åŠ è½½æœºåˆ¶ï¼Ÿ"><a href="#æè¿°ä¸€ä¸‹ç±»çš„åŠ è½½æœºåˆ¶ï¼Ÿ" class="headerlink" title="æè¿°ä¸€ä¸‹ç±»çš„åŠ è½½æœºåˆ¶ï¼Ÿ"></a>æè¿°ä¸€ä¸‹ç±»çš„åŠ è½½æœºåˆ¶ï¼Ÿ</h3><blockquote><p>ç±»çš„åŠ è½½å°±æ˜¯è™šæ‹Ÿæœºé€šè¿‡ä¸€ä¸ªç±»çš„å…¨é™å®šåæ¥è·å–æè¿°æ­¤ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµï¼Œè€Œå®Œæˆè¿™ä¸ªåŠ è½½åŠ¨ä½œçš„å°±æ˜¯ç±»åŠ è½½å™¨ã€‚</p></blockquote><p>ç±»å’Œç±»åŠ è½½å™¨æ¯æ¯ç›¸å…³ï¼Œåˆ¤å®šä¸¤ä¸ªç±»æ˜¯å¦ç›¸ç­‰ï¼Œåªæœ‰åœ¨è¿™ä¸¤ä¸ªç±»è¢«åŒä¸€ä¸ªç±»åŠ è½½å™¨åŠ è½½çš„æƒ…å†µä¸‹æ‰æœ‰æ„ä¹‰ï¼Œå¦åˆ™å³ä¾¿æ˜¯ä¸¤ä¸ªç±»æ¥è‡ªåŒä¸€ä¸ªClassæ–‡ä»¶ï¼Œè¢«ä¸åŒç±»åŠ è½½å™¨åŠ è½½ï¼Œå®ƒä»¬ä¹Ÿæ˜¯ä¸ç›¸ç­‰çš„ã€‚</p><p>æ³¨ï¼šè¿™é‡Œçš„ç›¸ç­‰æ€§åŒ…å«Classå¯¹è±¡çš„equals()æ–¹æ³•ã€isAssignableFrom()æ–¹æ³•ã€isInstance()æ–¹æ³•çš„è¿”å›ç»“æœä»¥åŠInstanceå…³é”®å­—å¯¹å¯¹è±¡æ‰€å±å…³ç³»çš„åˆ¤å®šç»“æœç­‰ã€‚</p><p>ç±»åŠ è½½å™¨å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼š</p><ul><li>å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆBootstrap ClassLoaderï¼‰ï¼šè´Ÿè´£åŠ è½½<java_home>\libç›®å½•ä¸‹æˆ–è€…è¢«-Xbootclasspathå‚æ•°æ‰€æŒ‡å®šçš„è·¯å¾„çš„ï¼Œå¹¶ä¸”æ˜¯è¢«è™šæ‹Ÿæœºæ‰€è¯†åˆ«çš„åº“åˆ°å†…å­˜ä¸­ã€‚</java_home></li><li>æ‰©å±•ç±»åŠ è½½å™¨ï¼ˆExtension ClassLoaderï¼‰ï¼šè´Ÿè´£åŠ è½½<java_home>\lib\extç›®å½•ä¸‹æˆ–è€…è¢«java.ext.dirsç³»ç»Ÿå˜é‡æ‰€æŒ‡å®šçš„è·¯å¾„çš„æ‰€æœ‰ç±»åº“åˆ°å†…å­˜ä¸­ã€‚</java_home></li><li>åº”ç”¨ç±»åŠ è½½å™¨ï¼ˆApplication ClassLoaderï¼‰ï¼šè´Ÿè´£åŠ è½½ç”¨æˆ·ç±»è·¯å¾„ä¸Šçš„æŒ‡å®šç±»åº“ï¼Œå¦‚æœåº”ç”¨ç¨‹åºä¸­æ²¡æœ‰å®ç°è‡ªå·±çš„ç±»åŠ è½½å™¨ï¼Œä¸€èˆ¬å°±æ˜¯è¿™ä¸ªç±»åŠ è½½å™¨å»åŠ è½½åº”ç”¨ç¨‹åºä¸­çš„ç±»åº“ã€‚</li></ul><p>è¿™ä¹ˆå¤šç±»åŠ è½½å™¨ï¼Œé‚£ä¹ˆå½“ç±»åœ¨åŠ è½½çš„æ—¶å€™ä¼šä½¿ç”¨å“ªä¸ªåŠ è½½å™¨å‘¢ï¼ŸğŸ¤”</p><p>è¿™ä¸ªæ—¶å€™å°±è¦æåˆ°ç±»åŠ è½½å™¨çš„åŒäº²å§”æ´¾æ¨¡å‹ï¼Œæµç¨‹å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/native/vm/classloader_model_structure.png" width="600"></p><p>åŒäº²å§”æ´¾æ¨¡å‹çš„æ•´ä¸ªå·¥ä½œæµç¨‹éå¸¸çš„ç®€å•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><p>å¦‚æœä¸€ä¸ªç±»åŠ è½½å™¨æ”¶åˆ°äº†åŠ è½½ç±»çš„è¯·æ±‚ï¼Œå®ƒä¸ä¼šè‡ªå·±ç«‹å³å»åŠ è½½ç±»ï¼Œå®ƒä¼šå…ˆå»è¯·æ±‚çˆ¶ç±»åŠ è½½å™¨ï¼Œæ¯ä¸ªå±‚æ¬¡çš„ç±»åŠ è½½å™¨éƒ½æ˜¯å¦‚æ­¤ã€‚å±‚å±‚ä¼ é€’ï¼Œç›´åˆ°ä¼ é€’åˆ°æœ€é«˜å±‚çš„ç±»åŠ è½½å™¨ï¼Œåªæœ‰å½“<br>çˆ¶ç±»åŠ è½½å™¨åé¦ˆè‡ªå·±æ— æ³•åŠ è½½è¿™ä¸ªç±»ï¼Œæ‰ä¼šæœ‰å½“å‰å­ç±»åŠ è½½å™¨å»åŠ è½½è¯¥ç±»ã€‚</p></blockquote><p>å…³äºåŒäº²å§”æ´¾æœºåˆ¶ï¼Œåœ¨ClassLoaderæºç é‡Œä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">ClassLoader</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">protected</span> Class&lt;?&gt; loadClass(String name, <span class="keyword">boolean</span> resolve)</div><div class="line">        <span class="keyword">throws</span> ClassNotFoundException</div><div class="line">    &#123;</div><div class="line">            <span class="comment">//é¦–å…ˆï¼Œæ£€æŸ¥è¯¥ç±»æ˜¯å¦å·²ç»è¢«åŠ è½½</span></div><div class="line">            Class c = findLoadedClass(name);</div><div class="line">            <span class="keyword">if</span> (c == <span class="keyword">null</span>) &#123;</div><div class="line">                <span class="keyword">long</span> t0 = System.nanoTime();</div><div class="line">                <span class="keyword">try</span> &#123;</div><div class="line">                    <span class="comment">//å…ˆè°ƒç”¨çˆ¶ç±»åŠ è½½å™¨å»åŠ è½½</span></div><div class="line">                    <span class="keyword">if</span> (parent != <span class="keyword">null</span>) &#123;</div><div class="line">                        c = parent.loadClass(name, <span class="keyword">false</span>);</div><div class="line">                    &#125; <span class="keyword">else</span> &#123;</div><div class="line">                        c = findBootstrapClassOrNull(name);</div><div class="line">                    &#125;</div><div class="line">                &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</div><div class="line">                    <span class="comment">// ClassNotFoundException thrown if class not found</span></div><div class="line">                    <span class="comment">// from the non-null parent class loader</span></div><div class="line">                &#125;</div><div class="line"></div><div class="line">                <span class="keyword">if</span> (c == <span class="keyword">null</span>) &#123;</div><div class="line">                    <span class="comment">//å¦‚æœçˆ¶ç±»åŠ è½½å™¨æ²¡æœ‰åŠ è½½åˆ°è¯¥ç±»ï¼Œåˆ™è‡ªå·±å»æ‰§è¡ŒåŠ è½½</span></div><div class="line">                    <span class="keyword">long</span> t1 = System.nanoTime();</div><div class="line">                    c = findClass(name);</div><div class="line"></div><div class="line">                    <span class="comment">// this is the defining class loader; record the stats</span></div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> c;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšå‘¢ï¼ŸğŸ¤”</p><p>è¿™æ˜¯ä¸ºäº†è¦è®©è¶ŠåŸºç¡€çš„ç±»ç”±è¶Šé«˜å±‚çš„ç±»åŠ è½½å™¨åŠ è½½ï¼Œä¾‹å¦‚Objectç±»ï¼Œæ— è®ºå“ªä¸ªç±»åŠ è½½å™¨å»å°è¯•åŠ è½½è¿™ä¸ªç±»ï¼Œæœ€ç»ˆéƒ½ä¼šä¼ é€’ç»™æœ€é«˜å±‚çš„ç±»åŠ è½½å™¨å»åŠ è½½ï¼Œå‰é¢æˆ‘ä»¬ä¹Ÿè¯´è¿‡ï¼Œç±»çš„ç›¸ç­‰æ€§æ˜¯ç”±<br>ç±»ä¸å…¶ç±»åŠ è½½å™¨å…±åŒåˆ¤å®šçš„ï¼Œè¿™æ ·Objectç±»æ— è®ºåœ¨ä½•ç§ç±»åŠ è½½å™¨ç¯å¢ƒä¸‹éƒ½æ˜¯åŒä¸€ä¸ªç±»ã€‚</p><p>ç›¸åå¦‚æœæ²¡æœ‰åŒäº²å§”æ´¾æ¨¡å‹ï¼Œé‚£ä¹ˆæ¯ä¸ªç±»åŠ è½½å™¨éƒ½ä¼šå»åŠ è½½Objectï¼Œé‚£ä¹ˆç³»ç»Ÿä¸­å°±ä¼šå‡ºç°å¤šä¸ªä¸åŒçš„Objectç±»äº†ï¼Œå¦‚æ­¤ä¸€æ¥ç³»ç»Ÿçš„æœ€åŸºç¡€çš„è¡Œä¸ºä¹Ÿå°±æ— æ³•ä¿è¯äº†ã€‚</p><h3 id="æè¿°ä¸€ä¸‹GCçš„åŸç†å’Œå›æ”¶ç­–ç•¥ï¼Ÿ"><a href="#æè¿°ä¸€ä¸‹GCçš„åŸç†å’Œå›æ”¶ç­–ç•¥ï¼Ÿ" class="headerlink" title="æè¿°ä¸€ä¸‹GCçš„åŸç†å’Œå›æ”¶ç­–ç•¥ï¼Ÿ"></a>æè¿°ä¸€ä¸‹GCçš„åŸç†å’Œå›æ”¶ç­–ç•¥ï¼Ÿ</h3><p>æåˆ°åƒåœ¾å›æ”¶ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ€è€ƒä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬å»åšåƒåœ¾å›æ”¶éœ€è¦è§£å†³å“ªäº›é—®é¢˜ï¼Ÿ ğŸ¤”</p><p>ä¸€èˆ¬è¯´æ¥ï¼Œæˆ‘ä»¬è¦è§£å†³ä»¥ä¸‹ä¸‰ä¸ªé—®é¢˜ï¼š</p><ul><li>å“ªäº›å†…å­˜å›æ”¶ï¼Ÿ</li><li>ä»€ä¹ˆæ—¶å€™å›æ”¶ï¼Ÿ</li><li>å¦‚ä½•å›æ”¶ï¼Ÿ</li></ul><p>è¿™äº›é—®é¢˜åˆ†åˆ«å¯¹åº”ç€å¼•ç”¨ç®¡ç†å’Œå›æ”¶ç­–ç•¥ç­‰æ–¹æ¡ˆã€‚</p><p>æåˆ°å¼•ç”¨ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“Javaä¸­æœ‰å››ç§å¼•ç”¨ç±»å‹ï¼š</p><ul><li>å¼ºå¼•ç”¨ï¼šä»£ç ä¸­æ™®éå­˜åœ¨çš„ï¼Œåªè¦å¼ºå¼•ç”¨è¿˜å­˜åœ¨ï¼Œåƒåœ¾æ”¶é›†å™¨å°±ä¸ä¼šå›æ”¶æ‰è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚</li><li>è½¯å¼•ç”¨ï¼šSoftReferenceï¼Œç”¨æ¥æè¿°è¿˜æœ‰ç”¨ä½†æ˜¯éå¿…é¡»çš„å¯¹è±¡ï¼Œå½“å†…å­˜ä¸è¶³çš„æ—¶å€™å›å›æ”¶è¿™ç±»å¯¹è±¡ã€‚</li><li>å¼±å¼•ç”¨ï¼šWeakReferenceï¼Œç”¨æ¥æè¿°éå¿…é¡»å¯¹è±¡ï¼Œå¼±å¼•ç”¨çš„å¯¹è±¡åªèƒ½ç”Ÿå­˜åˆ°ä¸‹ä¸€æ¬¡GCå‘ç”Ÿæ—¶ï¼Œå½“GCå‘ç”Ÿæ—¶ï¼Œæ— è®ºå†…å­˜æ˜¯å¦è¶³å¤Ÿï¼Œéƒ½ä¼šå›æ”¶è¯¥å¯¹è±¡ã€‚</li><li>è™šå¼•ç”¨ï¼šPhantomReferenceï¼Œä¸€ä¸ªå¯¹è±¡æ˜¯å¦æœ‰è™šå¼•ç”¨çš„å­˜åœ¨ï¼Œå®Œå…¨ä¸ä¼šå¯¹å…¶ç”Ÿå­˜æ—¶é—´äº§ç”Ÿå½±å“ï¼Œä¹Ÿæ— æ³•é€šè¿‡è™šå¼•ç”¨å–å¾—ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œå®ƒå­˜åœ¨çš„å”¯ä¸€ç›®çš„æ˜¯åœ¨è¿™ä¸ªå¯¹è±¡è¢«å›æ”¶æ—¶å¯ä»¥æ”¶åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥ã€‚</li></ul><p>ä¸åŒçš„å¼•ç”¨ç±»å‹ï¼Œåœ¨åšGCæ—¶ä¼šåŒºåˆ«å¯¹å¾…ï¼Œæˆ‘ä»¬å¹³æ—¶ç”Ÿæˆçš„Javaå¯¹è±¡ï¼Œé»˜è®¤éƒ½æ˜¯å¼ºå¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦å¼ºå¼•ç”¨è¿˜åœ¨ï¼ŒGCå°±ä¸ä¼šå›æ”¶ï¼Œé‚£ä¹ˆå¦‚ä½•åˆ¤æ–­å¼ºå¼•ç”¨æ˜¯å¦å­˜åœ¨å‘¢ï¼ŸğŸ¤”</p><p>ä¸€ä¸ªç®€å•çš„æ€è·¯å°±æ˜¯ï¼šå¼•ç”¨è®¡æ•°æ³•ï¼Œæœ‰å¯¹è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨å°±+1ï¼Œä¸å†å¼•ç”¨å°±-1ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼çœ‹èµ·æ¥ç®€å•ç¾å¥½ï¼Œä½†å®ƒå´ä¸å«©è§£å†³å¾ªç¯å¼•ç”¨è®¡æ•°çš„é—®é¢˜ã€‚</p><p>å› æ­¤å¯è¾¾æ€§åˆ†æç®—æ³•ç™»ä¸Šå†å²èˆå°ğŸ˜ï¼Œç”¨å®ƒæ¥åˆ¤æ–­å¯¹è±¡çš„å¼•ç”¨æ˜¯å¦å­˜åœ¨ã€‚</p><blockquote><p>å¯è¾¾æ€§åˆ†æç®—æ³•é€šè¿‡ä¸€ç³»åˆ—ç§°ä¸ºGC Rootsçš„å¯¹è±¡ä½œä¸ºèµ·å§‹ç‚¹ï¼Œä»è¿™äº›èŠ‚ç‚¹ä»ä¸Šå‘ä¸‹æœç´¢ï¼Œæœç´¢èµ°è¿‡çš„è·¯å¾„ç§°ä¸ºå¼•ç”¨é“¾ï¼Œå½“ä¸€ä¸ªå¯¹è±¡æ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾<br>ä¸GC Rootsè¿æ¥æ—¶å°±è¯´æ˜æ­¤å¯¹è±¡ä¸å¯ç”¨ï¼Œä¹Ÿå°±æ˜¯å¯¹è±¡ä¸å¯è¾¾ã€‚</p></blockquote><p>GC Rootså¯¹è±¡é€šå¸¸åŒ…æ‹¬ï¼š</p><ul><li>è™šæ‹Ÿæœºæ ˆä¸­å¼•ç”¨çš„å¯¹è±¡ï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰</li><li>æ–¹æ³•å»ä¸­ç±»çš„é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡</li><li>æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡</li><li>Nativeæ–¹æ³•å¼•ç”¨çš„å¯¹è±¡</li></ul><p>å¯è¾¾æ€§åˆ†æç®—æ³•æ•´ä¸ªæµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><ol><li>ç¬¬ä¸€æ¬¡æ ‡è®°ï¼šå¯¹è±¡åœ¨ç»è¿‡å¯è¾¾æ€§åˆ†æåå‘ç°æ²¡æœ‰ä¸GC Rootsæœ‰å¼•ç”¨é“¾ï¼Œåˆ™è¿›è¡Œç¬¬ä¸€æ¬¡æ ‡è®°å¹¶è¿›è¡Œä¸€æ¬¡ç­›é€‰ï¼Œç­›é€‰æ¡ä»¶æ˜¯ï¼šè¯¥å¯¹è±¡æ˜¯å¦æœ‰å¿…è¦æ‰§è¡Œfinalize()æ–¹æ³•ã€‚æ²¡æœ‰è¦†ç›–finalize()æ–¹æ³•æˆ–è€…finalize()æ–¹æ³•å·²ç»è¢«æ‰§è¡Œè¿‡éƒ½ä¼šè¢«<br>è®¤ä¸º<strong>æ²¡æœ‰å¿…è¦æ‰§è¡Œ</strong>ã€‚<ul><li>å¦‚æœæœ‰å¿…è¦æ‰§è¡Œï¼šåˆ™è¯¥å¯¹è±¡ä¼šè¢«æ”¾åœ¨ä¸€ä¸ªF-Queueé˜Ÿåˆ—ï¼Œå¹¶ç¨ååœ¨ç”±è™šæ‹Ÿæœºå»ºç«‹çš„ä½ä¼˜å…ˆçº§Finalizerçº¿ç¨‹ä¸­è§¦å‘è¯¥å¯¹è±¡çš„finalize()æ–¹æ³•ï¼Œä½†ä¸ä¿è¯ä¸€å®šç­‰å¾…å®ƒæ‰§è¡Œç»“æŸï¼Œå› ä¸ºå¦‚æœè¿™ä¸ªå¯¹è±¡çš„finalize()æ–¹æ³•å‘ç”Ÿäº†æ­»å¾ªç¯æˆ–è€…æ‰§è¡Œ<br>æ—¶é—´è¾ƒé•¿çš„æƒ…å†µï¼Œä¼šé˜»å¡F-Queueé˜Ÿåˆ—é‡Œçš„å…¶ä»–å¯¹è±¡ï¼Œå½±å“GCã€‚</li></ul></li><li>ç¬¬äºŒæ¬¡æ ‡è®°ï¼šGCå¯¹F-Queueé˜Ÿåˆ—é‡Œçš„å¯¹è±¡è¿›è¡Œç¬¬äºŒæ¬¡æ ‡è®°ï¼Œå¦‚æœåœ¨ç¬¬äºŒæ¬¡æ ‡è®°æ—¶è¯¥å¯¹è±¡åˆæˆåŠŸè¢«å¼•ç”¨ï¼Œåˆ™ä¼šè¢«ç§»é™¤å³å°†å›æ”¶çš„é›†åˆï¼Œå¦åˆ™ä¼šè¢«å›æ”¶ã€‚</li></ol><h3 id="æ¥å£å’ŒæŠ½è±¡ç±»æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#æ¥å£å’ŒæŠ½è±¡ç±»æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="æ¥å£å’ŒæŠ½è±¡ç±»æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>æ¥å£å’ŒæŠ½è±¡ç±»æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>å…±åŒç‚¹</p><ol><li>æ˜¯ä¸Šå±‚çš„æŠ½è±¡å±‚ã€‚</li><li>éƒ½ä¸èƒ½è¢«å®ä¾‹åŒ–</li><li>éƒ½èƒ½åŒ…å«æŠ½è±¡çš„æ–¹æ³•ï¼Œè¿™äº›æŠ½è±¡çš„æ–¹æ³•ç”¨äºæè¿°ç±»å…·å¤‡çš„åŠŸèƒ½ï¼Œä½†æ˜¯ä¸ä¼šæä¾›å…·ä½“çš„å®ç°ã€‚</li></ol><p>åŒºåˆ«</p><ol><li>åœ¨æŠ½è±¡ç±»ä¸­å¯ä»¥å†™éæŠ½è±¡çš„æ–¹æ³•ï¼Œä»è€Œé¿å…åœ¨å­ç±»ä¸­é‡å¤ä¹¦å†™ä»–ä»¬ï¼Œè¿™æ ·å¯ä»¥æé«˜ä»£ç çš„å¤ç”¨æ€§ï¼Œè¿™æ˜¯æŠ½è±¡ç±»çš„ä¼˜åŠ¿ï¼›æ¥å£ä¸­åªèƒ½æœ‰æŠ½è±¡çš„æ–¹æ³•ã€‚</li><li>ä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªç›´æ¥çˆ¶ç±»ï¼Œè¿™ä¸ªçˆ¶ç±»å¯ä»¥æ˜¯å…·ä½“çš„ç±»ä¹Ÿå¯æ˜¯æŠ½è±¡ç±»ï¼›ä½†æ˜¯ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ã€‚</li></ol><hr><blockquote><p>é—®ï¼šæŠ½è±¡ç±»æ˜¯å¦å¯ç»§æ‰¿å®ä½“ç±» (concrete class)<br>ç­”ï¼š æŠ½è±¡ç±»æ˜¯å¯ä»¥ç»§æ‰¿å®ä½“ç±»ï¼Œä½†å‰ææ˜¯å®ä½“ç±»å¿…é¡»æœ‰æ˜ç¡®çš„æ„é€ å‡½æ•°</p></blockquote><p>ç­”æ¡ˆå¾ˆæ˜ç¡®ï¼Œå¯ä»¥ç»§æ‰¿ã€‚å…¶å®ä»Objectå°±æ˜¯ä¸ªå®ä½“ç±»ï¼Œjavaçš„APIæ–‡æ¡£é‡Œï¼Œæ¯ä¸ªæŠ½è±¡ç±»çš„æ¡ç›®é‡Œéƒ½æ˜ç¡®å†™ç€ç›´æ¥æˆ–é—´æ¥ç»§æ‰¿è‡ªObjectï¼Œæ‰€ä»¥è¿™ç‚¹æ˜¯æ²¡æœ‰ç–‘é—®çš„ã€‚<br>å…³é”®åœ¨äºè¿™ç­”æ¡ˆé‡Œæ‰€è¯´çš„â€œå‰ææ˜¯å®ä½“ç±»å¿…é¡»æœ‰æ˜ç¡®çš„æ„é€ å‡½æ•°â€ä¸€å¥ï¼Œæ˜¯ä»€ä¹ˆæ„æ€ã€‚<br>ä¸€èˆ¬å­¦ä¹ è€…ä¼šå†™çš„ç®€å•è¯•éªŒä»£ç ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;&#125;</div></pre></td></tr></table></figure></p><p>ç»“æœå®Œå…¨æ­£å¸¸ï¼Œç¼–è¯‘é€šè¿‡ã€‚ä¼¼ä¹å’Œâ€œå®ä½“ç±»å¿…é¡»æœ‰æ˜ç¡®çš„æ„é€ å‡½æ•°â€å®Œå…¨æ²¡æœ‰å…³ç³»ã€‚</p><p>è¿™ä¸ªé—®é¢˜æ¶‰åŠåˆ°ä¸¤ä¸ªä¸ªåŸºç¡€çŸ¥è¯†ï¼š</p><ol><li><p>æ‰€æœ‰çš„classéƒ½å¿…é¡»æœ‰ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œå¦‚æœä½ æ²¡æœ‰åœ¨ä»£ç é‡Œå£°æ˜æ„é€ æ–¹æ³•ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç»™ä½ ç”Ÿæˆä¸€ä¸ªå…¬æœ‰æ— å‚çš„æ„é€ æ–¹æ³•ã€‚è€Œåªè¦ä½ è‡ªå·±å£°æ˜äº†ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œæ— è®ºæœ‰å‚æ— å‚ï¼Œç§æœ‰å…¬æœ‰ï¼Œç³»ç»Ÿå°±ä¸å†å¸®ä½ ç”Ÿæˆé»˜è®¤æ— å‚æ„é€ å™¨äº†ã€‚</p></li><li><p>æ‰€æœ‰çš„å­ç±»æ„é€ å™¨éƒ½è¦æ±‚åœ¨ç¬¬ä¸€è¡Œä»£ç ä¸­è°ƒç”¨çˆ¶ç±»æ„é€ å™¨ï¼Œå¦‚æœä¸å†™ï¼Œç³»ç»Ÿé»˜è®¤å»è°ƒç”¨çˆ¶ç±»çš„æ— å‚æ„é€ å™¨ã€‚</p></li></ol><p>æ‰€ä»¥ï¼Œå¦‚æœæŠŠç³»ç»Ÿé»˜è®¤é…ç»™çš„æ–¹æ³•ä¹Ÿç®—è¿›å»ï¼Œclass A{}çš„ä»£ç å®é™…ä¸Šæ˜¯<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="title">A</span><span class="params">()</span></span>&#123;&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>Bç»§æ‰¿ A çš„æ—¶å€™ï¼Œåˆ™æ˜¯<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="title">B</span><span class="params">()</span></span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">super</span>();</div><div class="line"></div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>è¦è¯•éªŒå‡ºè¿™ç»§æ‰¿è§„åˆ™çš„å†…éƒ¨æƒ…å†µï¼Œä¹Ÿå¾ˆç®€å•ï¼Œåœ¨æœ€ä¸Šé¢é‚£ä¸ªç®€å•è¯•éªŒä»£ç é‡Œï¼ŒåŠ ä¸Šä¸ªç§æœ‰æ„é€ å™¨ï¼Œæœ‰å‚æ— å‚éƒ½è¡Œã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">private</span> <span class="title">A</span><span class="params">()</span></span>&#123;&#125;   </div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>è¿™ä¸ªæ—¶å€™ï¼Œå¦‚åŸºç¡€çŸ¥è¯†(1) ä¸­æ‰€è¯´ï¼Œç³»ç»Ÿä¸å†ç»™ä½ é»˜è®¤æ— å‚æ„é€ å™¨ï¼Œ Bçš„æ„é€ å™¨æ ¹æ®ï¼ˆ2ï¼‰ä¸­çš„è§„åˆ™å»è°ƒç”¨super()ï¼Œå´æ‰¾ä¸åˆ°Açš„æ— å‚æ„é€ å™¨ï¼Œæ‰€ä»¥å¯¼è‡´abstract class B extends A{} ç¼–è¯‘ä¸èƒ½é€šè¿‡ã€‚ï¼ˆå› ä¸ºAä¸­æ²¡æœ‰ä»»ä½•æ„é€ å™¨å¯ä¾›å­ç±»è°ƒç”¨ï¼Œå…¶å®è¿™ä¸ªæ—¶å€™Aåªèƒ½å¤Ÿä¾›å†…éƒ¨ç±»ç»§æ‰¿ï¼Œæˆ‘ç”¨çš„Eclipseçš„3.4ç‰ˆæœ¬ä¼šå»ºè®®ç»™Bæ”¹åï¼Œä½†æ˜¯è¿™è§£å†³ä¸äº†è¿™ä¸ªé—®é¢˜ã€‚ï¼‰</p><p>ç°åœ¨ï¼Œä½ åº”è¯¥äº†è§£äº†èµ„æ–™ç»™çš„é‚£å¥è¯­ç„‰ä¸è¯¦çš„â€œå®ä½“ç±»å¿…é¡»æœ‰æ˜ç¡®çš„æ„é€ å‡½æ•°â€çš„å«ä¹‰ï¼š</p><ol><li><p>æ²¡å†™æ„é€ å™¨çš„ï¼Œé‚£æ˜¯æ‹¥æœ‰é»˜è®¤æ— å‚å…¬æœ‰æ„é€ å‡½æ•°çš„ï¼Œå­ç±»å¯ä»¥ä»€ä¹ˆéƒ½ä¸å†™ï¼Œè®©é»˜è®¤æ„é€ å™¨å»è°ƒç”¨å®ƒã€‚è¿™æ˜¯æœ€åˆé‚£ä¸¤è¡Œä»£ç çš„æƒ…å†µã€‚</p></li><li><p>å†™äº†å­ç±»å¯è®¿é—®çš„æ— å‚æ„é€ å™¨çš„ï¼Œä¹Ÿæ˜¯ä¸€æ ·ï¼Œå­ç±»é‡Œå¯ä»¥ä»€ä¹ˆéƒ½ä¸å†™ï¼Œç”¨é»˜è®¤æœºåˆ¶è°ƒç”¨ã€‚</p></li><li><p>å†™äº† æœ‰å‚æ„é€ å™¨å´æ²¡å†™æ— å‚æ„é€ å™¨çš„ï¼Œçˆ¶ç±»é‡Œæ²¡æœ‰å­ç±»å¯è®¿é—®çš„æ— å‚æ„é€ å™¨ï¼Œå­ç±»å¿…é¡»åœ¨å­ç±»æ„é€ å™¨é‡Œçš„ç¬¬ä¸€å¥å†™æ˜ï¼Œè°ƒç”¨çˆ¶ç±»æœ‰å‚æ„é€ å™¨ï¼Œå¹¶æŠŠå‚æ•°ä¼ è¿›å»ã€‚</p></li><li><p>å£°æ˜ä¸ºfinalçš„ä»¥åŠæ‰€æœ‰æ„é€ å™¨éƒ½ä¸åœ¨å­ç±»è®¿é—®æƒé™ä¹‹å†…çš„ç±»æ— æ³•ç»§æ‰¿ </p></li></ol><p>å…¶å®åªè¦æ˜¯åœ¨ç±»çš„ç»§æ‰¿ä¸­ï¼Œæ— è®ºæŠ½è±¡è¿˜æ˜¯å®ä½“ï¼Œéƒ½éœ€è¦ç¬¦åˆè¿™ä¸ªè§„åˆ™çš„ã€‚åœ¨è¿™ä¸ªç»§æ‰¿è¯•éªŒä¸­éšæ—¶åˆ æ‰æˆ–æ˜¯åŠ ä¸Šabstractçš„å‰ç¼€ï¼Œç»“æœéƒ½æ²¡æœ‰å˜åŒ–ã€‚ä¸ªäººè§‰å¾—â€œå®ä½“ç±»å¿…é¡»æœ‰æ˜ç¡®çš„æ„é€ å‡½æ•°â€ä¸€å¥å®åœ¨æ˜¯æ— æ³•æŠŠè¿™ä¸ªæƒ…å†µè¡¨è¾¾æ¸…æ¥šï¼Œæ‰€ä»¥å¹¿å¤§æ±‚èŒè€…è¿˜æ˜¯å†™å¾—æ¸…æ¥šäº›å¥½ã€‚</p><p>æˆ‘å–œæ¬¢çš„å†™æ³•æ˜¯â€œå¯ä»¥ç»§æ‰¿ï¼Œä½†æ˜¯å’Œå®ä½“ç±»çš„ç»§æ‰¿ä¸€æ ·ï¼Œä¹Ÿè¦æ±‚çˆ¶ç±»å¯ç»§æ‰¿ï¼Œå¹¶ä¸”æ‹¥æœ‰å­ç±»å¯è®¿é—®åˆ°çš„æ„é€ å™¨ã€‚â€</p><hr><h3 id="å†…éƒ¨ç±»ã€é™æ€å†…éƒ¨ç±»åœ¨ä¸šåŠ¡ä¸­çš„åº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#å†…éƒ¨ç±»ã€é™æ€å†…éƒ¨ç±»åœ¨ä¸šåŠ¡ä¸­çš„åº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="å†…éƒ¨ç±»ã€é™æ€å†…éƒ¨ç±»åœ¨ä¸šåŠ¡ä¸­çš„åº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ"></a>å†…éƒ¨ç±»ã€é™æ€å†…éƒ¨ç±»åœ¨ä¸šåŠ¡ä¸­çš„åº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Outer</span> </span>&#123;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Inner</span> </span>&#123;&#125;</div><div class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticInner</span> </span>&#123;&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Outer outer = <span class="keyword">new</span> Outer();</div><div class="line">Outer.Inner inner = outer.new Inner();</div><div class="line">Outer.StaticInner inner0 = <span class="keyword">new</span> Outer.StaticInner();</div></pre></td></tr></table></figure><ul><li>é™æ€å†…éƒ¨ç±»ï¼šåªæ˜¯ä¸ºäº†é™ä½åŒ…çš„æ·±åº¦ï¼Œæ–¹ä¾¿ç±»çš„ä½¿ç”¨ï¼Œé™æ€å†…éƒ¨ç±»é€‚ç”¨äºåŒ…å«ç±»å½“ä¸­ï¼Œä½†åˆä¸ä¾èµ–ä¸å¤–åœ¨çš„ç±»ï¼Œä¸ç”¨ä½¿ç”¨å¤–åœ¨ç±»çš„éé™æ€å±æ€§å’Œæ–¹æ³•ï¼Œåªæ˜¯ä¸ºäº†æ–¹ä¾¿ç®¡ç†ç±»ç»“æ„è€Œå®šä¹‰ã€‚åœ¨åˆ›å»ºé™æ€å†…éƒ¨ç±»çš„æ—¶å€™ï¼Œä¸éœ€è¦å¤–éƒ¨ç±»å¯¹è±¡çš„å¼•ç”¨ã€‚</li><li>éé™æ€å†…éƒ¨ç±»ï¼šæŒæœ‰å¤–éƒ¨ç±»çš„å¼•ç”¨ï¼Œå¯ä»¥è‡ªç”±ä½¿ç”¨å¤–éƒ¨ç±»çš„æ‰€æœ‰å˜é‡å’Œæ–¹æ³•</li></ul><h3 id="synchronizedä¸ReentrantLockæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#synchronizedä¸ReentrantLockæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="synchronizedä¸ReentrantLockæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>synchronizedä¸ReentrantLockæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>synchronizedæ˜¯äº’æ–¥åŒæ­¥çš„ä¸€ç§å®ç°ã€‚</p><blockquote><p>synchronizedï¼šå½“æŸä¸ªçº¿ç¨‹è®¿é—®è¢«synchronizedæ ‡è®°çš„æ–¹æ³•æˆ–ä»£ç å—æ—¶ï¼Œè¿™ä¸ªçº¿ç¨‹ä¾¿è·å¾—äº†è¯¥å¯¹è±¡çš„é”ï¼Œå…¶ä»–çº¿ç¨‹æš‚æ—¶æ— æ³•è®¿é—®è¿™ä¸ªæ–¹æ³•ï¼Œåªæœ‰ç­‰å¾…è¿™ä¸ªæ–¹æ³•æ‰§è¡Œå®Œæ¯•æˆ–è€…ä»£ç å—æ‰§è¡Œå®Œæ¯•ï¼Œè¿™ä¸ª<br>çº¿ç¨‹æ‰ä¼šé‡Šæ”¾è¯¥å¯¹è±¡çš„é”ï¼Œå…¶ä»–çº¿ç¨‹æ‰èƒ½æ‰§è¡Œè¿™ä¸ªæ–¹æ³•æˆ–ä»£ç å—ã€‚</p></blockquote><p>å‰é¢æˆ‘ä»¬å·²ç»è¯´äº†volatileå…³é”®å­—ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸¾ä¸ªä¾‹å­æ¥ç»¼åˆåˆ†ævolatileä¸synchronizedå…³é”®å­—çš„ä½¿ç”¨ã€‚</p><p>:point_up: ä¸¾ä¸ªæ —å­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">//volatileä¿è¯äº†ï¼š1 instanceåœ¨å¤šçº¿ç¨‹å¹¶å‘çš„å¯è§æ€§ </span></div><div class="line">                   <span class="comment">//2 ç¦æ­¢instanceåœ¨æ“ä½œæ—¶çš„æŒ‡ä»¤é‡æ’åº</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> Singleton instance;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">//ç¬¬ä¸€æ¬¡åˆ¤ç©ºï¼Œä¿è¯ä¸å¿…è¦çš„åŒæ­¥</span></div><div class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="comment">//synchronizedå¯¹SingletonåŠ å…¨å±€é”ï¼Œä¿è¯æ¯æ¬¡åªè¦ä¸€ä¸ªçº¿ç¨‹åˆ›å»ºå®ä¾‹</span></div><div class="line">            <span class="keyword">synchronized</span> (Singleton.class) &#123;</div><div class="line">                <span class="comment">//ç¬¬äºŒæ¬¡åˆ¤ç©ºæ—¶ä¸ºäº†åœ¨nullçš„æƒ…å†µä¸‹åˆ›å»ºå®ä¾‹</span></div><div class="line">                <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</div><div class="line">                    instance = <span class="keyword">new</span> Singleton();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> instance;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„DCLå•ä¾‹ã€‚</p><p>å®ƒçš„å­—èŠ‚ç å¦‚ä¸‹ï¼š</p><p><img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/native/process/synchronized_bytecode.png"></p><p>å¯ä»¥çœ‹åˆ°è¢«synchronizedåŒæ­¥çš„ä»£ç å—ï¼Œä¼šåœ¨å‰ååˆ†åˆ«åŠ ä¸Šmonitorenterå’Œmonitorexitï¼Œè¿™ä¸¤ä¸ªå­—èŠ‚ç éƒ½éœ€è¦æŒ‡å®šåŠ é”å’Œè§£é”çš„å¯¹è±¡ã€‚</p><p>å…³äºåŠ é”å’Œè§£é”çš„å¯¹è±¡ï¼š</p><ul><li>synchronizedä»£ç å— ï¼šåŒæ­¥ä»£ç å—ï¼Œä½œç”¨èŒƒå›´æ˜¯æ•´ä¸ªä»£ç å—ï¼Œä½œç”¨å¯¹è±¡æ˜¯è°ƒç”¨è¿™ä¸ªä»£ç å—çš„å¯¹è±¡ã€‚</li><li>synchronizedæ–¹æ³• ï¼šåŒæ­¥æ–¹æ³•ï¼Œä½œç”¨èŒƒå›´æ˜¯æ•´ä¸ªæ–¹æ³•ï¼Œä½œç”¨å¯¹è±¡æ˜¯è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„å¯¹è±¡ã€‚</li><li>synchronizedé™æ€æ–¹æ³• ï¼šåŒæ­¥é™æ€æ–¹æ³•ï¼Œä½œç”¨èŒƒå›´æ˜¯æ•´ä¸ªé™æ€æ–¹æ³•ï¼Œä½œç”¨å¯¹è±¡æ˜¯è°ƒç”¨è¿™ä¸ªç±»çš„æ‰€æœ‰å¯¹è±¡ã€‚</li><li>synchronized(this)ï¼šä½œç”¨èŒƒå›´æ˜¯è¯¥å¯¹è±¡ä¸­æ‰€æœ‰è¢«synchronizedæ ‡è®°çš„å˜é‡ã€æ–¹æ³•æˆ–ä»£ç å—ï¼Œä½œç”¨å¯¹è±¡æ˜¯å¯¹è±¡æœ¬èº«ã€‚</li><li>synchronized(ClassName.class) ï¼šä½œç”¨èŒƒå›´æ˜¯é™æ€çš„æ–¹æ³•æˆ–è€…é™æ€å˜é‡ï¼Œä½œç”¨å¯¹è±¡æ˜¯Classå¯¹è±¡ã€‚</li></ul><p>synchronized(this)æ·»åŠ çš„æ˜¯å¯¹è±¡é”ï¼Œsynchronized(ClassName.class)æ·»åŠ çš„æ˜¯ç±»é”ï¼Œå®ƒä»¬çš„åŒºåˆ«å¦‚ä¸‹ï¼š</p><blockquote><p>å¯¹è±¡é”ï¼šJavaçš„æ‰€æœ‰å¯¹è±¡éƒ½å«æœ‰1ä¸ªäº’æ–¥é”ï¼Œè¿™ä¸ªé”ç”±JVMè‡ªåŠ¨è·å–å’Œé‡Šæ”¾ã€‚çº¿ç¨‹è¿›å…¥synchronizedæ–¹æ³•çš„æ—¶å€™è·å–è¯¥å¯¹è±¡çš„é”ï¼Œå½“ç„¶å¦‚æœå·²ç»æœ‰çº¿ç¨‹è·å–äº†è¿™ä¸ªå¯¹è±¡çš„é”ï¼Œé‚£ä¹ˆå½“å‰çº¿ç¨‹ä¼šç­‰å¾…ï¼›synchronizedæ–¹æ³•æ­£å¸¸è¿”å›æˆ–è€…æŠ›å¼‚å¸¸è€Œç»ˆæ­¢ï¼ŒJVMä¼šè‡ªåŠ¨é‡Šæ”¾å¯¹è±¡é”ã€‚è¿™é‡Œä¹Ÿä½“ç°äº†ç”¨synchronizedæ¥åŠ é”çš„å¥½å¤„ï¼Œæ–¹æ³•æŠ›å¼‚å¸¸çš„æ—¶å€™ï¼Œé”ä»ç„¶å¯ä»¥ç”±JVMæ¥è‡ªåŠ¨é‡Šæ”¾ã€‚ </p><p>ç±»é”ï¼šå¯¹è±¡é”æ˜¯ç”¨æ¥æ§åˆ¶å®ä¾‹æ–¹æ³•ä¹‹é—´çš„åŒæ­¥ï¼Œç±»é”æ˜¯ç”¨æ¥æ§åˆ¶é™æ€æ–¹æ³•ï¼ˆæˆ–é™æ€å˜é‡äº’æ–¥ä½“ï¼‰ä¹‹é—´çš„åŒæ­¥ã€‚å…¶å®ç±»é”åªæ˜¯ä¸€ä¸ªæ¦‚å¿µä¸Šçš„ä¸œè¥¿ï¼Œå¹¶ä¸æ˜¯çœŸå®å­˜åœ¨çš„ï¼Œå®ƒåªæ˜¯ç”¨æ¥å¸®åŠ©æˆ‘ä»¬ç†è§£é”å®šå®ä¾‹æ–¹æ³•å’Œé™æ€æ–¹æ³•çš„åŒºåˆ«çš„ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œjavaç±»å¯èƒ½ä¼šæœ‰å¾ˆå¤šä¸ªå¯¹è±¡ï¼Œä½†æ˜¯åªæœ‰1ä¸ªClasså¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ç±»çš„ä¸åŒå®ä¾‹ä¹‹é—´å…±äº«è¯¥ç±»çš„Classå¯¹è±¡ã€‚Classå¯¹è±¡å…¶å®ä¹Ÿä»…ä»…æ˜¯1ä¸ªjavaå¯¹è±¡ï¼Œåªä¸è¿‡æœ‰ç‚¹ç‰¹æ®Šè€Œå·²ã€‚ç”±äºæ¯ä¸ªjavaå¯¹è±¡éƒ½æœ‰1ä¸ªäº’æ–¥é”ï¼Œè€Œç±»çš„é™æ€æ–¹æ³•æ˜¯éœ€è¦Classå¯¹è±¡ã€‚æ‰€ä»¥æ‰€è°“çš„ç±»é”ï¼Œä¸è¿‡æ˜¯Classå¯¹è±¡çš„é”è€Œå·²ã€‚è·å–ç±»çš„Classå¯¹è±¡æœ‰å¥½å‡ ç§ï¼Œæœ€ç®€å•çš„å°±æ˜¯MyClass.classçš„æ–¹å¼ã€‚ ç±»é”å’Œå¯¹è±¡é”ä¸æ˜¯åŒä¸€ä¸ªä¸œè¥¿ï¼Œä¸€ä¸ªæ˜¯ç±»çš„Classå¯¹è±¡çš„é”ï¼Œä¸€ä¸ªæ˜¯ç±»çš„å®ä¾‹çš„é”ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šä¸€ä¸ªçº¿ç¨‹è®¿é—®é™æ€synchronizedçš„æ—¶å€™ï¼Œå…è®¸å¦ä¸€ä¸ªçº¿ç¨‹è®¿é—®å¯¹è±¡çš„å®ä¾‹synchronizedæ–¹æ³•ã€‚åè¿‡æ¥ä¹Ÿæ˜¯æˆç«‹çš„ï¼Œå› ä¸ºä»–ä»¬éœ€è¦çš„é”æ˜¯ä¸åŒçš„ã€‚</p></blockquote><h3 id="volatileçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#volatileçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="volatileçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>volatileçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>volatileä¹Ÿæ˜¯äº’æ–¥åŒæ­¥çš„ä¸€ç§å®ç°ï¼Œä¸è¿‡å®ƒéå¸¸çš„è½»é‡çº§ã€‚</p><p>volatileæœ‰ä¸¤æ¡å…³é”®çš„è¯­ä¹‰ï¼š</p><ul><li>ä¿è¯è¢«volatileä¿®é¥°çš„å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹éƒ½æ˜¯å¯è§çš„</li><li>ç¦æ­¢è¿›è¡ŒæŒ‡ä»¤é‡æ’åº</li></ul><p>è¦ç†è§£volatileå…³é”®å­—ï¼Œæˆ‘ä»¬å¾—å…ˆä»Javaçš„çº¿ç¨‹æ¨¡å‹å¼€å§‹è¯´èµ·ã€‚å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/native/process/java_memory_model.png"></p><p>Javaå†…å­˜æ¨¡å‹è§„å®šäº†æ‰€æœ‰å­—æ®µï¼ˆè¿™äº›å­—æ®µåŒ…æ‹¬å®ä¾‹å­—æ®µã€é™æ€å­—æ®µç­‰ï¼Œä¸åŒ…æ‹¬å±€éƒ¨å˜é‡ã€æ–¹æ³•å‚æ•°ç­‰ï¼Œå› ä¸ºè¿™äº›æ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œå¹¶ä¸å­˜åœ¨ç«äº‰ï¼‰éƒ½å­˜åœ¨ä¸»å†…å­˜ä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹ä¼š<br>æœ‰è‡ªå·±çš„å·¥ä½œå†…å­˜ï¼Œå·¥ä½œå†…å­˜é‡Œä¿å­˜äº†çº¿ç¨‹æ‰€ä½¿ç”¨åˆ°çš„å˜é‡åœ¨ä¸»å†…å­˜é‡Œçš„å‰¯æœ¬æ‹·è´ï¼Œçº¿ç¨‹å¯¹å˜é‡çš„æ“ä½œåªèƒ½åœ¨å·¥ä½œå†…å­˜é‡Œè¿›è¡Œï¼Œè€Œä¸èƒ½ç›´æ¥è¯»å†™ä¸»å†…å­˜ï¼Œå½“ç„¶ä¸åŒå†…å­˜ä¹‹é—´ä¹Ÿ<br>æ— æ³•ç›´æ¥è®¿é—®å¯¹æ–¹çš„å·¥ä½œå†…å­˜ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸»å†…å­˜æ˜¯çº¿ç¨‹ä¼ å€¼çš„åª’ä»‹ã€‚</p><p>æˆ‘ä»¬æ¥ç†è§£ç¬¬ä¸€å¥è¯ï¼š</p><blockquote><p>ä¿è¯è¢«volatileä¿®é¥°çš„å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹éƒ½æ˜¯å¯è§çš„</p></blockquote><p>å¦‚ä½•ä¿è¯å¯è§æ€§ï¼ŸğŸ¤”</p><p>è¢«volatileä¿®é¥°çš„å˜é‡åœ¨å·¥ä½œå†…å­˜ä¿®æ”¹åä¼šè¢«å¼ºåˆ¶å†™å›ä¸»å†…å­˜ï¼Œå…¶ä»–çº¿ç¨‹åœ¨ä½¿ç”¨æ—¶ä¹Ÿä¼šå¼ºåˆ¶ä»ä¸»å†…å­˜åˆ·æ–°ï¼Œè¿™æ ·å°±ä¿è¯äº†ä¸€è‡´æ€§ã€‚</p><p>å…³äºâ€œä¿è¯è¢«volatileä¿®é¥°çš„å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹éƒ½æ˜¯å¯è§çš„â€ï¼Œæœ‰ç§å¸¸è§çš„é”™è¯¯ç†è§£ï¼š</p><blockquote><p>é”™è¯¯ç†è§£ï¼šç”±äºvolatileä¿®é¥°çš„å˜é‡åœ¨å„ä¸ªçº¿ç¨‹é‡Œéƒ½æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥åŸºäºvolatileå˜é‡çš„è¿ç®—åœ¨å¤šçº¿ç¨‹å¹¶å‘çš„æƒ…å†µä¸‹æ˜¯å®‰å…¨çš„ã€‚</p></blockquote><p>è¿™å¥è¯çš„å‰åŠéƒ¨åˆ†æ˜¯å¯¹çš„ï¼ŒååŠéƒ¨åˆ†å´é”™äº†ï¼Œå› æ­¤å®ƒå¿˜è®°è€ƒè™‘å˜é‡çš„æ“ä½œæ˜¯å¦å…·æœ‰<strong>åŸå­æ€§</strong>è¿™ä¸€é—®é¢˜ã€‚</p><p>ä¸¾ä¸ªæ —å­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">int</span> start = <span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">volatileKeyword</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    Runnable runnable = <span class="keyword">new</span> Runnable() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</div><div class="line">                start++;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</div><div class="line">        Thread thread = <span class="keyword">new</span> Thread(runnable);</div><div class="line">        thread.start();</div><div class="line">    &#125;</div><div class="line">    Log.d(TAG, <span class="string">"start = "</span> + start);</div><div class="line">&#125;</div></pre></td></tr></table></figure><p><img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/native/process/volatile_thread_safe.png"></p><p>è¿™æ®µä»£ç å¯åŠ¨äº†10ä¸ªçº¿ç¨‹ï¼Œæ¯æ¬¡10æ¬¡è‡ªå¢ï¼ŒæŒ‰é“ç†æœ€ç»ˆç»“æœåº”è¯¥æ˜¯100ï¼Œä½†æ˜¯ç»“æœå¹¶éå¦‚æ­¤ã€‚</p><p>ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼ŸğŸ¤”</p><p>ä»”ç»†çœ‹ä¸€ä¸‹start++ï¼Œå®ƒå…¶å®å¹¶éä¸€ä¸ªåŸå­æ“ä½œï¼Œç®€å•æ¥çœ‹ï¼Œå®ƒæœ‰ä¸¤æ­¥ï¼š</p><ol><li>å–å‡ºstartçš„å€¼ï¼Œå› ä¸ºæœ‰volatileçš„ä¿®é¥°ï¼Œè¿™æ—¶å€™çš„å€¼æ˜¯æ­£ç¡®çš„ã€‚</li><li>è‡ªå¢ï¼Œä½†æ˜¯è‡ªå¢çš„æ—¶å€™ï¼Œåˆ«çš„çº¿ç¨‹å¯èƒ½å·²ç»æŠŠstartåŠ å¤§äº†ï¼Œè¿™ç§æƒ…å†µä¸‹å°±æœ‰å¯èƒ½æŠŠè¾ƒå°çš„startå†™å›ä¸»å†…å­˜ä¸­ã€‚</li></ol><p>æ‰€ä»¥volatileåªèƒ½ä¿è¯å¯è§æ€§ï¼Œåœ¨ä¸ç¬¦åˆä»¥ä¸‹åœºæ™¯ä¸‹æˆ‘ä»¬ä¾ç„¶éœ€è¦é€šè¿‡åŠ é”æ¥ä¿è¯åŸå­æ€§ï¼š</p><ul><li>è¿ç®—ç»“æœå¹¶ä¸ä¾èµ–å˜é‡å½“å‰çš„å€¼ï¼Œæˆ–è€…åªæœ‰å•ä¸€çº¿ç¨‹ä¿®æ”¹å˜é‡çš„å€¼ã€‚ï¼ˆè¦ä¹ˆç»“æœä¸ä¾èµ–å½“å‰å€¼ï¼Œè¦ä¹ˆæ“ä½œæ˜¯åŸå­æ€§çš„ï¼Œè¦ä¹ˆåªè¦ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹å˜é‡çš„å€¼ï¼‰</li><li>å˜é‡ä¸éœ€è¦ä¸å…¶ä»–çŠ¶æ€å˜é‡å…±åŒå‚ä¸ä¸å˜çº¦æŸ</li></ul><p>æ¯”æ–¹è¯´æˆ‘ä»¬ä¼šåœ¨çº¿ç¨‹é‡ŒåŠ ä¸ªbooleanå˜é‡ï¼Œæ¥åˆ¤æ–­çº¿ç¨‹æ˜¯å¦åœæ­¢ï¼Œè¿™ç§æƒ…å†µå°±éå¸¸é€‚åˆä½¿ç”¨volatileã€‚</p><p>æˆ‘ä»¬å†æ¥ç†è§£ç¬¬äºŒå¥è¯ã€‚</p><ul><li>ç¦æ­¢è¿›è¡ŒæŒ‡ä»¤é‡æ’åº</li></ul><p>ä»€ä¹ˆæ˜¯æŒ‡ä»¤é‡æ’åºï¼ŸğŸ¤”</p><blockquote><p>æŒ‡ä»¤é‡æ’åºæ˜¯å€¼æŒ‡ä»¤ä¹±åºæ‰§è¡Œï¼Œå³åœ¨æ¡ä»¶å…è®¸çš„æƒ…å†µä¸‹ï¼Œç›´æ¥è¿è¡Œå½“å‰æœ‰èƒ½åŠ›ç«‹å³æ‰§è¡Œçš„åç»­æŒ‡ä»¤ï¼Œé¿å¼€ä¸ºè·å–ä¸‹ä¸€æ¡æŒ‡ä»¤æ‰€éœ€æ•°æ®è€Œé€ æˆçš„ç­‰å¾…ï¼Œé€šè¿‡ä¹±åºæ‰§è¡Œçš„æŠ€æœ¯ï¼Œæä¾›æ‰§è¡Œæ•ˆç‡ã€‚</p></blockquote><p>æŒ‡ä»¤é‡æ’åºç»˜åˆ¶è¢«volatileä¿®é¥°çš„å˜é‡çš„èµ‹å€¼æ“ä½œå‰ï¼Œæ·»åŠ ä¸€ä¸ªå†…å­˜å±éšœï¼ŒæŒ‡ä»¤é‡æ’åºæ—¶ä¸èƒ½æŠŠåé¢çš„æŒ‡ä»¤é‡æ’åºåˆ°å†…å­˜å±éšœä¹‹å‰çš„ä½ç½®ã€‚</p><p>å…³äºæŒ‡ä»¤é‡æ’åºä¸æ˜¯æœ¬ç¯‡æ–‡ç« é‡ç‚¹è®¨è®ºçš„å†…å®¹ï¼Œæ›´å¤šç»†èŠ‚å¯ä»¥å‚è€ƒ<a href="https://tech.meituan.com/java-memory-reordering.html" target="_blank" rel="external">æŒ‡ä»¤é‡æ’åº</a>ã€‚</p><h3 id="å¦‚ä½•é˜²æ­¢åå°„ã€åºåˆ—åŒ–æ”»å‡»å•ä¾‹ï¼Ÿ"><a href="#å¦‚ä½•é˜²æ­¢åå°„ã€åºåˆ—åŒ–æ”»å‡»å•ä¾‹ï¼Ÿ" class="headerlink" title="å¦‚ä½•é˜²æ­¢åå°„ã€åºåˆ—åŒ–æ”»å‡»å•ä¾‹ï¼Ÿ"></a>å¦‚ä½•é˜²æ­¢åå°„ã€åºåˆ—åŒ–æ”»å‡»å•ä¾‹ï¼Ÿ</h3><p>æšä¸¾å•ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Singleton &#123;</div><div class="line">    INSTANCE &#123;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</div><div class="line">            System.out.println(<span class="string">"read"</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">()</span> </span>&#123;</div><div class="line">            System.out.println(<span class="string">"write"</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;;</div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">()</span></span>;</div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>classæ–‡ä»¶ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> <span class="keyword">extends</span> <span class="title">Enum</span></span></div><div class="line">&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">(String s, <span class="keyword">int</span> i)</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">super</span>(s, i);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton[] values()</div><div class="line">    &#123;</div><div class="line">        Singleton asingleton[];</div><div class="line">        <span class="keyword">int</span> i;</div><div class="line">        Singleton asingleton1[];</div><div class="line">        System.arraycopy(asingleton = ENUM$VALUES, <span class="number">0</span>, asingleton1 = <span class="keyword">new</span> Singleton[i = asingleton.length], <span class="number">0</span>, i);</div><div class="line">        <span class="keyword">return</span> asingleton1;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">valueOf</span><span class="params">(String s)</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> (Singleton)Enum.valueOf(singleton/Singleton, s);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    Singleton(String s, <span class="keyword">int</span> i, Singleton singleton)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">this</span>(s, i);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton INSTANCE;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton ENUM$VALUES[];</div><div class="line"></div><div class="line">    <span class="keyword">static</span> </div><div class="line">    &#123;</div><div class="line">        INSTANCE = <span class="keyword">new</span> Singleton(<span class="string">"INSTANCE"</span>, <span class="number">0</span>) &#123;</div><div class="line"></div><div class="line">            <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">()</span></span></div><div class="line">            &#123;</div><div class="line">                System.out.println(<span class="string">"read"</span>);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">()</span></span></div><div class="line">            &#123;</div><div class="line">                System.out.println(<span class="string">"write"</span>);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">        &#125;;</div><div class="line">        ENUM$VALUES = (<span class="keyword">new</span> Singleton[] &#123;</div><div class="line">            INSTANCE</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><ul><li>ç±»çš„ä¿®é¥°abstractï¼Œæ‰€ä»¥æ²¡æ³•å®ä¾‹åŒ–ï¼Œåå°„ä¹Ÿæ— èƒ½ä¸ºåŠ›ã€‚</li><li>å…³äºçº¿ç¨‹å®‰å…¨çš„ä¿è¯ï¼Œå…¶å®æ˜¯é€šè¿‡ç±»åŠ è½½æœºåˆ¶æ¥ä¿è¯çš„ï¼Œæˆ‘ä»¬çœ‹çœ‹INSTANCEçš„å®ä¾‹åŒ–æ—¶æœºï¼Œæ˜¯åœ¨staticå—ä¸­ï¼ŒJVMåŠ è½½ç±»çš„è¿‡ç¨‹æ˜¾ç„¶æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</li><li>å¯¹äºé˜²æ­¢ååºåˆ—åŒ–ç”Ÿæˆæ–°å®ä¾‹çš„é—®é¢˜è¿˜ä¸æ˜¯å¾ˆæ˜ç™½ï¼Œä¸€èˆ¬çš„æ–¹æ³•æˆ‘ä»¬ä¼šåœ¨è¯¥ç±»ä¸­æ·»åŠ ä¸Šå¦‚ä¸‹æ–¹æ³•ï¼Œä¸è¿‡æšä¸¾ä¸­ä¹Ÿæ²¡æœ‰æ˜¾ç¤ºçš„å†™æ˜è¯¥æ–¹æ³•ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//readResolve to prevent another instance of Singleton</span></div><div class="line"><span class="function"><span class="keyword">private</span> Object <span class="title">readResolve</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">return</span> INSTANCE;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="çº¿ç¨‹ä¸ºä»€ä¹ˆé˜»å¡ï¼Œä¸ºå’Œè¦ä½¿ç”¨å¤šçº¿ç¨‹ï¼Ÿ"><a href="#çº¿ç¨‹ä¸ºä»€ä¹ˆé˜»å¡ï¼Œä¸ºå’Œè¦ä½¿ç”¨å¤šçº¿ç¨‹ï¼Ÿ" class="headerlink" title="çº¿ç¨‹ä¸ºä»€ä¹ˆé˜»å¡ï¼Œä¸ºå’Œè¦ä½¿ç”¨å¤šçº¿ç¨‹ï¼Ÿ"></a>çº¿ç¨‹ä¸ºä»€ä¹ˆé˜»å¡ï¼Œä¸ºå’Œè¦ä½¿ç”¨å¤šçº¿ç¨‹ï¼Ÿ</h3><p>ä½¿ç”¨å¤šçº¿ç¨‹æ›´å¤šçš„æ˜¯ä¸ºäº†æé«˜CPUçš„å¹¶å‘ï¼Œå¯ä»¥è®©CPUåŒäº‹å¤„ç†å¤šä¸ªäº‹æƒ…ï¼Œå¤šçº¿ç¨‹åœºæ™¯çš„ä½¿ç”¨åœºæ™¯ï¼š</p><ol><li>ä¸ºäº†ä¸è®©è€—æ—¶æ“ä½œé˜»å¡ä¸»çº¿ç¨‹ï¼Œå¼€å¯æ–°çº¿ç¨‹æ‰§è¡Œè€—æ—¶æ“ä½œã€‚</li><li>æŸç§ä»»åŠ¡è™½ç„¶è€—æ—¶ä½†æ˜¯ä¸æ¶ˆè€—CPUï¼Œä¾‹å¦‚ï¼šç£ç›˜IOï¼Œå¯ä»¥å¼€å¯æ–°çº¿ç¨‹æ¥åšï¼Œå¯ä»¥æ˜¾è‘—çš„æé«˜æ•ˆç‡ã€‚</li><li>ä¼˜å…ˆçº§æ¯”è¾ƒä½çš„ä»»åŠ¡ï¼Œä½†æ˜¯éœ€è¦ç»å¸¸å»åšï¼Œä¾‹å¦‚ï¼šGCï¼Œå¯ä»¥å¼€å¯æ–°çº¿ç¨‹æ¥åšã€‚</li></ol><h3 id="äº†è§£çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå—ï¼Œæè¿°ä¸€ä¸‹ï¼Ÿ"><a href="#äº†è§£çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå—ï¼Œæè¿°ä¸€ä¸‹ï¼Ÿ" class="headerlink" title="äº†è§£çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå—ï¼Œæè¿°ä¸€ä¸‹ï¼Ÿ"></a>äº†è§£çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå—ï¼Œæè¿°ä¸€ä¸‹ï¼Ÿ</h3><p>çº¿ç¨‹çŠ¶æ€æµç¨‹å›¾å›¾</p><p><img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/native/process/java_thread_state.png"></p><ul><li>NEWï¼šåˆ›å»ºçŠ¶æ€ï¼Œçº¿ç¨‹åˆ›å»ºä¹‹åï¼Œä½†æ˜¯è¿˜æœªå¯åŠ¨ã€‚</li><li>RUNNABLEï¼šè¿è¡ŒçŠ¶æ€ï¼Œå¤„äºè¿è¡ŒçŠ¶æ€çš„çº¿ç¨‹ï¼Œä½†æœ‰å¯èƒ½å¤„äºç­‰å¾…çŠ¶æ€ï¼Œä¾‹å¦‚ç­‰å¾…CPUã€IOç­‰ã€‚</li><li>WAITINGï¼šç­‰å¾…çŠ¶æ€ï¼Œä¸€èˆ¬æ˜¯è°ƒç”¨äº†wait()ã€join()ã€LockSupport.spark()ç­‰æ–¹æ³•ã€‚</li><li>TIMED_WAITINGï¼šè¶…æ—¶ç­‰å¾…çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯å¸¦æ—¶é—´çš„ç­‰å¾…çŠ¶æ€ã€‚ä¸€èˆ¬æ˜¯è°ƒç”¨äº†wait(time)ã€join(time)ã€LockSupport.sparkNanos()ã€LockSupport.sparkUnit()ç­‰æ–¹æ³•ã€‚</li><li>BLOCKEDï¼šé˜»å¡çŠ¶æ€ï¼Œç­‰å¾…é”çš„é‡Šæ”¾ï¼Œä¾‹å¦‚è°ƒç”¨äº†synchronizedå¢åŠ äº†é”ã€‚</li><li>TERMINATEDï¼šç»ˆæ­¢çŠ¶æ€ï¼Œä¸€èˆ¬æ˜¯çº¿ç¨‹å®Œæˆä»»åŠ¡åé€€å‡ºæˆ–è€…å¼‚å¸¸ç»ˆæ­¢ã€‚ </li></ul><p>NEWã€WAITINGã€TIMED_WAITINGéƒ½æ¯”è¾ƒå¥½ç†è§£ï¼Œæˆ‘ä»¬é‡ç‚¹è¯´ä¸€è¯´RUNNABLEè¿è¡Œæ€å’ŒBLOCKEDé˜»å¡æ€ã€‚</p><p>çº¿ç¨‹è¿›å…¥RUNNABLEè¿è¡Œæ€ä¸€èˆ¬åˆ†ä¸ºäº”ç§æƒ…å†µï¼š</p><ul><li>çº¿ç¨‹è°ƒç”¨sleep(time)åæŸ¥å‡ºäº†ä¼‘çœ æ—¶é—´</li><li>çº¿ç¨‹è°ƒç”¨çš„é˜»å¡IOå·²ç»è¿”å›ï¼Œé˜»å¡æ–¹æ³•æ‰§è¡Œå®Œæ¯•</li><li>çº¿ç¨‹æˆåŠŸçš„è·å–äº†èµ„æºé”</li><li>çº¿ç¨‹æ­£åœ¨ç­‰å¾…æŸä¸ªé€šçŸ¥ï¼ŒæˆåŠŸçš„è·å¾—äº†å…¶ä»–çº¿ç¨‹å‘å‡ºçš„é€šçŸ¥</li><li>çº¿ç¨‹å¤„äºæŒ‚èµ·çŠ¶æ€ï¼Œç„¶åè°ƒç”¨äº†resume()æ¢å¤æ–¹æ³•ï¼Œè§£é™¤äº†æŒ‚èµ·ã€‚</li></ul><p>çº¿ç¨‹è¿›å…¥BLOCKEDé˜»å¡æ€ä¸€èˆ¬ä¹Ÿåˆ†ä¸ºäº”ç§æƒ…å†µï¼š</p><ul><li>çº¿ç¨‹è°ƒç”¨sleep()æ–¹æ³•ä¸»åŠ¨æ”¾å¼ƒå æœ‰çš„èµ„æº</li><li>çº¿ç¨‹è°ƒç”¨äº†é˜»å¡å¼IOçš„æ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•è¿”å›å‰ï¼Œè¯¥çº¿ç¨‹è¢«é˜»å¡ã€‚</li><li>çº¿ç¨‹è§†å›¾è·å¾—ä¸€ä¸ªèµ„æºé”ï¼Œä½†æ˜¯è¯¥èµ„æºé”æ­£è¢«å…¶ä»–çº¿ç¨‹é”æŒæœ‰ã€‚</li><li>çº¿ç¨‹æ­£åœ¨ç­‰å¾…æŸä¸ªé€šçŸ¥</li><li>çº¿ç¨‹è°ƒåº¦å™¨è°ƒç”¨suspend()æ–¹æ³•å°†è¯¥çº¿ç¨‹æŒ‚èµ·</li></ul><p>æˆ‘ä»¬å†æ¥çœ‹çœ‹å’Œçº¿ç¨‹çŠ¶æ€ç›¸å…³çš„ä¸€äº›æ–¹æ³•ã€‚</p><ul><li>sleep()æ–¹æ³•è®©å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹åœ¨æŒ‡å®šæ—¶é—´å†…æš‚åœæ‰§è¡Œï¼Œæ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯ä»¥é€šè¿‡Thread.currentThread()æ–¹æ³•è·å–ã€‚</li><li>yield()æ–¹æ³•æ”¾å¼ƒçº¿ç¨‹æŒæœ‰çš„CPUèµ„æºï¼Œå°†å…¶è®©ç»™å…¶ä»–ä»»åŠ¡å»å ç”¨CPUæ‰§è¡Œæ—¶é—´ã€‚ä½†æ”¾å¼ƒçš„æ—¶é—´ä¸ç¡®å®šï¼Œæœ‰å¯èƒ½åˆšåˆšæ”¾å¼ƒï¼Œé©¬ä¸Šåˆè·å¾—CPUæ—¶é—´ç‰‡ã€‚</li><li>wait()æ–¹æ³•æ˜¯å½“å‰æ‰§è¡Œä»£ç çš„çº¿ç¨‹è¿›è¡Œç­‰å¾…ï¼Œå°†å½“å‰çº¿ç¨‹æ”¾å…¥é¢„æ‰§è¡Œé˜Ÿåˆ—ï¼Œå¹¶åœ¨wait()æ‰€åœ¨çš„ä»£ç å¤„åœæ­¢æ‰§è¡Œï¼ŒçŸ¥é“æ¥åˆ°é€šçŸ¥æˆ–è€…è¢«ä¸­æ–­ä¸ºæ­¢ã€‚è¯¥æ–¹æ³•å¯ä»¥ä½¿å¾—è°ƒç”¨è¯¥æ–¹æ³•çš„çº¿ç¨‹é‡Šæ”¾å…±äº«èµ„æºçš„é”ï¼Œç„¶åä»è¿è¡ŒçŠ¶æ€é€€å‡ºï¼Œè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œç›´åˆ°å†æ¬¡è¢«å”¤é†’ã€‚è¯¥æ–¹æ³•åªèƒ½åœ¨åŒæ­¥ä»£ç å—é‡Œè°ƒç”¨ï¼Œå¦åˆ™ä¼šæŠ›å‡ºIllegalMonitorStateExceptionå¼‚å¸¸ã€‚</li><li>wait(long millis)æ–¹æ³•ç­‰å¾…æŸä¸€æ®µæ—¶é—´å†…æ˜¯å¦æœ‰çº¿ç¨‹å¯¹é”è¿›è¡Œå”¤é†’ï¼Œå¦‚æœè¶…è¿‡äº†è¿™ä¸ªæ—¶é—´åˆ™è‡ªåŠ¨å”¤é†’ã€‚</li><li>notify()æ–¹æ³•ç”¨æ¥é€šçŸ¥é‚£äº›å¯èƒ½ç­‰å¾…è¯¥å¯¹è±¡çš„å¯¹è±¡é”çš„å…¶ä»–çº¿ç¨‹ï¼Œè¯¥æ–¹æ³•å¯ä»¥éšæœºå”¤é†’ç­‰å¾…é˜Ÿåˆ—ä¸­ç­‰åŒä¸€å…±äº«èµ„æºçš„ä¸€ä¸ªçº¿ç¨‹ï¼Œå¹¶ä½¿è¯¥çº¿ç¨‹é€€å‡ºç­‰å¾…é˜Ÿåˆ—ï¼Œè¿›å…¥å¯è¿è¡ŒçŠ¶æ€ã€‚</li><li>notifyAll()æ–¹æ³•å¯ä»¥æ˜¯æ‰€æœ‰æ­£åœ¨ç­‰å¾…é˜Ÿåˆ—ä¸­ç­‰å¾…åŒä¸€å…±äº«èµ„æºçš„å…¨éƒ¨çº¿ç¨‹ä»ç­‰å¾…çŠ¶æ€é€€å‡ºï¼Œè¿›å…¥å¯è¿è¡ŒçŠ¶æ€ï¼Œä¸€èˆ¬ä¼šæ˜¯ä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹å…ˆæ‰§è¡Œï¼Œä½†æ˜¯æ ¹æ®è™šæ‹Ÿæœºçš„å®ç°ä¸åŒï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯éšæœºæ‰§è¡Œã€‚</li><li>join()æ–¹æ³•å¯ä»¥è®©è°ƒç”¨å®ƒçš„çº¿ç¨‹æ­£å¸¸æ‰§è¡Œå®Œæˆåï¼Œå†å»æ‰§è¡Œè¯¥çº¿ç¨‹åé¢çš„ä»£ç ï¼Œå®ƒå…·æœ‰è®©çº¿ç¨‹æ’é˜Ÿçš„ä½œç”¨ã€‚</li></ul><h3 id="çº¿ç¨‹æ± äº†è§£å—ï¼Œæœ‰å‡ ç§çº¿ç¨‹æ± ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#çº¿ç¨‹æ± äº†è§£å—ï¼Œæœ‰å‡ ç§çº¿ç¨‹æ± ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="çº¿ç¨‹æ± äº†è§£å—ï¼Œæœ‰å‡ ç§çº¿ç¨‹æ± ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ"></a>çº¿ç¨‹æ± äº†è§£å—ï¼Œæœ‰å‡ ç§çº¿ç¨‹æ± ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>Executorsç±»æä¾›äº†ä¸€ç³»åˆ—å·¥å‚æ–¹æ³•ç”¨æ¥åˆ›å»ºçº¿ç¨‹æ± ã€‚è¿™äº›çº¿ç¨‹æ˜¯é€‚ç”¨äºä¸åŒçš„åœºæ™¯ã€‚</p><ul><li>newCachedThreadPool()ï¼šæ— ç•Œå¯è‡ªåŠ¨å›æ”¶çº¿ç¨‹æ± ï¼ŒæŸ¥çœ‹çº¿ç¨‹æ± ä¸­æœ‰æ²¡æœ‰ä»¥å‰å»ºç«‹çš„çº¿ç¨‹ï¼Œå¦‚æœæœ‰åˆ™å¤ç”¨ï¼Œå¦‚æœæ²¡æœ‰åˆ™å»ºç«‹ä¸€ä¸ªæ–°çš„çº¿ç¨‹åŠ å…¥æ± ä¸­ï¼Œæ± ä¸­çš„çº¿ç¨‹è¶…è¿‡60sä¸æ´»åŠ¨åˆ™è‡ªåŠ¨ç»ˆæ­¢ã€‚é€‚ç”¨äºç”Ÿå‘½<br>å‘¨æœŸæ¯”è¾ƒçŸ­çš„å¼‚æ­¥ä»»åŠ¡ã€‚</li><li>newFixedThreadPool(int nThreads)ï¼šå›ºå®šå¤§å°çº¿ç¨‹æ± ï¼Œä¸newCachedThreadPool()ç±»ä¼¼ï¼Œä½†æ˜¯æ± ä¸­æŒæœ‰å›ºå®šæ•°ç›®çš„çº¿ç¨‹ï¼Œä¸èƒ½éšæ—¶åˆ›å»ºçº¿ç¨‹ï¼Œå¦‚æœåˆ›å»ºæ–°çº¿ç¨‹æ—¶ï¼Œè¶…è¿‡äº†å›ºå®š<br>çº¿ç¨‹æ•°ï¼Œåˆ™æ”¾åœ¨é˜Ÿåˆ—é‡Œç­‰å¾…ï¼Œç›´åˆ°æ± ä¸­çš„æŸä¸ªçº¿ç¨‹è¢«ç§»é™¤æ—¶ï¼Œæ‰åŠ å…¥æ± ä¸­ã€‚é€‚ç”¨äºå¾ˆç¨³å®šã€å¾ˆæ­£è§„çš„å¹¶å‘çº¿ç¨‹ï¼Œå¤šç”¨äºæœåŠ¡å™¨ã€‚</li><li>newScheduledThreadPool(int corePoolSize)ï¼šå‘¨æœŸä»»åŠ¡çº¿ç¨‹æ± ï¼Œè¯¥çº¿ç¨‹æ± çš„çº¿ç¨‹å¯ä»¥æŒ‰ç…§delayä¾æ¬¡æ‰§è¡Œçº¿ç¨‹ï¼Œä¹Ÿå¯ä»¥å‘¨æœŸæ‰§è¡Œã€‚</li><li>newSingleThreadExecutor()ï¼šå•ä¾‹çº¿ç¨‹æ± ï¼Œä»»æ„æ—¶é—´å†…æ± ä¸­åªæœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚</li></ul><h3 id="ThreadLocalçš„åŸç†äº†è§£å—ï¼Ÿ"><a href="#ThreadLocalçš„åŸç†äº†è§£å—ï¼Ÿ" class="headerlink" title="ThreadLocalçš„åŸç†äº†è§£å—ï¼Ÿ"></a>ThreadLocalçš„åŸç†äº†è§£å—ï¼Ÿ</h3><p>ThreadLocalæ˜¯ä¸€ä¸ªå…³äºåˆ›å»ºçº¿ç¨‹å±€éƒ¨å˜é‡çš„ç±»ã€‚ä½¿ç”¨åœºæ™¯å¦‚ä¸‹æ‰€ç¤ºï¼š</p><ol><li>å®ç°å•ä¸ªçº¿ç¨‹å•ä¾‹ä»¥åŠå•ä¸ªçº¿ç¨‹ä¸Šä¸‹æ–‡ä¿¡æ¯å­˜å‚¨ï¼Œæ¯”å¦‚äº¤æ˜“idç­‰ã€‚</li><li>å®ç°çº¿ç¨‹å®‰å…¨ï¼Œéçº¿ç¨‹å®‰å…¨çš„å¯¹è±¡ä½¿ç”¨ThreadLocalä¹‹åå°±ä¼šå˜å¾—çº¿ç¨‹å®‰å…¨ï¼Œå› ä¸ºæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šæœ‰ä¸€ä¸ªå¯¹åº”çš„å®ä¾‹ã€‚</li><li>æ‰¿è½½ä¸€äº›çº¿ç¨‹ç›¸å…³çš„æ•°æ®ï¼Œé¿å…åœ¨æ–¹æ³•ä¸­æ¥å›ä¼ é€’å‚æ•°ã€‚</li></ol><h3 id="waitå’Œnotifyæœºåˆ¶ï¼Œæ‰‹å†™ä¸€ä¸‹ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å‹ï¼Ÿ"><a href="#waitå’Œnotifyæœºåˆ¶ï¼Œæ‰‹å†™ä¸€ä¸‹ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å‹ï¼Ÿ" class="headerlink" title="waitå’Œnotifyæœºåˆ¶ï¼Œæ‰‹å†™ä¸€ä¸‹ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å‹ï¼Ÿ"></a>waitå’Œnotifyæœºåˆ¶ï¼Œæ‰‹å†™ä¸€ä¸‹ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å‹ï¼Ÿ</h3><p>ç”Ÿæˆè€…æ¶ˆè´¹è€…æ¨¡å‹</p><p>ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…åœ¨åŒä¸€æ—¶é—´æ®µå†…å…±ç”¨åŒä¸€ä¸ªå­˜å‚¨ç©ºé—´ï¼Œç”Ÿäº§è€…å¾€å­˜å‚¨ç©ºé—´ä¸­æ·»åŠ äº§å“ï¼Œæ¶ˆè´¹è€…ä»å­˜å‚¨ç©ºé—´ä¸­å–èµ°äº§å“ï¼Œå½“å­˜å‚¨ç©ºé—´ä¸ºç©ºæ—¶ï¼Œæ¶ˆè´¹è€…é˜»å¡ï¼Œå½“å­˜å‚¨ç©ºé—´æ»¡æ—¶ï¼Œç”Ÿäº§è€…é˜»å¡ã€‚</p><p>wait()å’Œnotify()æ–¹æ³•çš„å®ç°ç”Ÿæˆè€…æ¶ˆè´¹è€…æ¨¡å‹ï¼Œç¼“å†²åŒºæ»¡å’Œä¸ºç©ºæ—¶éƒ½è°ƒç”¨wait()æ–¹æ³•ç­‰å¾…ï¼Œå½“ç”Ÿäº§è€…ç”Ÿäº§äº†ä¸€ä¸ªäº§å“æˆ–è€…æ¶ˆè´¹è€…æ¶ˆè´¹äº†ä¸€ä¸ªäº§å“ä¹‹åä¼šå”¤é†’æ‰€æœ‰çº¿ç¨‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProducerAndCustomerModel</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Integer count = <span class="number">0</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Integer FULL = <span class="number">10</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String LOCK = <span class="string">"lock"</span>;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        ProducerAndCustomerModel  PACM  =  <span class="keyword">new</span>  ProducerAndCustomerModel();</div><div class="line"><span class="keyword">new</span>  Thread(PACM.new  Producer()).start();</div><div class="line"><span class="keyword">new</span>  Thread(PACM.new  Consumer()).start();</div><div class="line"><span class="keyword">new</span>  Thread(PACM.new  Producer()).start();</div><div class="line"><span class="keyword">new</span>  Thread(PACM.new  Consumer()).start();</div><div class="line"><span class="keyword">new</span>  Thread(PACM.new  Producer()).start();</div><div class="line"><span class="keyword">new</span>  Thread(PACM.new  Consumer()).start();</div><div class="line"><span class="keyword">new</span>  Thread(PACM.new  Producer()).start();</div><div class="line"><span class="keyword">new</span>  Thread(PACM.new  Consumer()).start();</div><div class="line">    &#125;</div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Producer</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</div><div class="line">                <span class="keyword">try</span> &#123;</div><div class="line">                    Thread.sleep(<span class="number">3000</span>);</div><div class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">                    e.printStackTrace();</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">synchronized</span> (LOCK) &#123;</div><div class="line">                    <span class="keyword">while</span> (count == FULL) &#123;</div><div class="line">                        <span class="keyword">try</span> &#123;</div><div class="line">                            LOCK.wait();</div><div class="line">                        &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">                            e.printStackTrace();</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                    count++;</div><div class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">"ç”Ÿäº§è€…ç”Ÿäº§ï¼Œç›®å‰æ€»å…±æœ‰"</span> + count);</div><div class="line">                    LOCK.notifyAll();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Consumer</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</div><div class="line">                <span class="keyword">try</span> &#123;</div><div class="line">                    Thread.sleep(<span class="number">3000</span>);</div><div class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">                    e.printStackTrace();</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">synchronized</span> (LOCK) &#123;</div><div class="line">                    <span class="keyword">while</span> (count == <span class="number">0</span>) &#123;</div><div class="line">                        <span class="keyword">try</span> &#123;</div><div class="line">                            LOCK.wait();</div><div class="line">                        &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                    count--;</div><div class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">"æ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œç›®å‰æ€»å…±æœ‰"</span> + count);</div><div class="line">                    LOCK.notifyAll();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="æ­»é”æ˜¯å¦‚ä½•å‘ç”Ÿçš„ï¼Œå¦‚ä½•é¿å…æ­»é”ï¼Ÿ"><a href="#æ­»é”æ˜¯å¦‚ä½•å‘ç”Ÿçš„ï¼Œå¦‚ä½•é¿å…æ­»é”ï¼Ÿ" class="headerlink" title="æ­»é”æ˜¯å¦‚ä½•å‘ç”Ÿçš„ï¼Œå¦‚ä½•é¿å…æ­»é”ï¼Ÿ"></a>æ­»é”æ˜¯å¦‚ä½•å‘ç”Ÿçš„ï¼Œå¦‚ä½•é¿å…æ­»é”ï¼Ÿ</h3><p>å½“çº¿ç¨‹AæŒæœ‰ç‹¬å é”aï¼Œå¹¶å°è¯•å»è·å–ç‹¬å é”bçš„åŒæ—¶ï¼Œçº¿ç¨‹BæŒæœ‰ç‹¬å é”bï¼Œå¹¶å°è¯•è·å–ç‹¬å é”açš„æƒ…å†µä¸‹ï¼Œå°±ä¼šå‘ç”ŸABä¸¤ä¸ªçº¿ç¨‹ç”±äºäº’ç›¸æŒæœ‰å¯¹æ–¹éœ€è¦çš„é”ï¼Œè€Œå‘ç”Ÿçš„é˜»å¡ç°è±¡ï¼Œæˆ‘ä»¬ç§°ä¸ºæ­»é”ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DeadLockDemo</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        <span class="comment">// çº¿ç¨‹a</span></div><div class="line">        Thread td1 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">                DeadLockDemo.method1();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">// çº¿ç¨‹b</span></div><div class="line">        Thread td2 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">                DeadLockDemo.method2();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        td1.start();</div><div class="line">        td2.start();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">synchronized</span> (String.class) &#123;</div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                Thread.sleep(<span class="number">2000</span>);</div><div class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">            System.out.println(<span class="string">"çº¿ç¨‹aå°è¯•è·å–integer.class"</span>);</div><div class="line">            <span class="keyword">synchronized</span> (Integer.class) &#123;</div><div class="line"></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">synchronized</span> (Integer.class) &#123;</div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                Thread.sleep(<span class="number">2000</span>);</div><div class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">            System.out.println(<span class="string">"çº¿ç¨‹bå°è¯•è·å–String.class"</span>);</div><div class="line">            <span class="keyword">synchronized</span> (String.class) &#123;</div><div class="line"></div><div class="line">            &#125;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>é€ æˆæ­»é”çš„å››ä¸ªæ¡ä»¶ï¼š</p><ol><li>äº’æ–¥æ¡ä»¶ï¼šä¸€ä¸ªèµ„æºæ¯æ¬¡åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ã€‚</li><li>è¯·æ±‚ä¸ä¿æŒæ¡ä»¶ï¼šä¸€ä¸ªçº¿ç¨‹å› è¯·æ±‚èµ„æºè€Œé˜»å¡æ—¶ï¼Œå¯¹å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾ã€‚</li><li>ä¸å‰¥å¤ºæ¡ä»¶ï¼šçº¿ç¨‹å·²è·å¾—çš„èµ„æºï¼Œåœ¨æœªä½¿ç”¨å®Œä¹‹å‰ï¼Œä¸èƒ½å¼ºè¡Œå‰¥å¤ºã€‚</li><li>å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šè‹¥å¹²çº¿ç¨‹ä¹‹é—´å½¢æˆä¸€ç§å¤´å°¾ç›¸æ¥çš„å¾ªç¯ç­‰å¾…èµ„æºå…³ç³»ã€‚</li></ol><p>åœ¨å¹¶å‘ç¨‹åºä¸­ï¼Œé¿å…äº†é€»è¾‘ä¸­å‡ºç°å¤æ•°ä¸ªçº¿ç¨‹äº’ç›¸æŒæœ‰å¯¹æ–¹çº¿ç¨‹æ‰€éœ€è¦çš„ç‹¬å é”çš„çš„æƒ…å†µï¼Œå°±å¯ä»¥é¿å…æ­»é”ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BreakDeadLockDemo</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        <span class="comment">// çº¿ç¨‹a</span></div><div class="line">        Thread td1 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">                BreakDeadLockDemo.method1();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">// çº¿ç¨‹b</span></div><div class="line">        Thread td2 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">                BreakDeadLockDemo.method2();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        td1.start();</div><div class="line">        td2.start();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">synchronized</span> (String.class) &#123;</div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                Thread.sleep(<span class="number">2000</span>);</div><div class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">            System.out.println(<span class="string">"çº¿ç¨‹aå°è¯•è·å–integer.class"</span>);</div><div class="line">            <span class="keyword">synchronized</span> (Integer.class) &#123;</div><div class="line">                System.out.println(<span class="string">"çº¿ç¨‹aè·å–åˆ°integer.class"</span>);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">// ä¸å†è·å–çº¿ç¨‹aéœ€è¦çš„Integer.classé”ã€‚</span></div><div class="line">        <span class="keyword">synchronized</span> (String.class) &#123;</div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                Thread.sleep(<span class="number">2000</span>);</div><div class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">            System.out.println(<span class="string">"çº¿ç¨‹bå°è¯•è·å–Integer.class"</span>);</div><div class="line">            <span class="keyword">synchronized</span> (Integer.class) &#123;</div><div class="line">                System.out.println(<span class="string">"çº¿ç¨‹bè·å–åˆ°Integer.class"</span>);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="äº†è§£Javaæ³¨è§£çš„åŸç†å—ï¼Œæ³¨è§£å¦‚ä½•è·å–ï¼Ÿ"><a href="#äº†è§£Javaæ³¨è§£çš„åŸç†å—ï¼Œæ³¨è§£å¦‚ä½•è·å–ï¼Ÿ" class="headerlink" title="äº†è§£Javaæ³¨è§£çš„åŸç†å—ï¼Œæ³¨è§£å¦‚ä½•è·å–ï¼Ÿ"></a>äº†è§£Javaæ³¨è§£çš„åŸç†å—ï¼Œæ³¨è§£å¦‚ä½•è·å–ï¼Ÿ</h3><p>æ³¨è§£ç›¸å½“äºä¸€ç§æ ‡è®°ï¼Œåœ¨ç¨‹åºä¸­åŠ äº†æ³¨è§£å°±ç­‰äºä¸ºç¨‹åºæ‰“ä¸Šäº†æŸç§æ ‡è®°ã€‚ç¨‹åºå¯ä»¥åˆ©ç”¨Javaçš„åå°„æœºåˆ¶æ¥äº†è§£ä½ çš„ç±»åŠå„ç§å…ƒç´ ä¸Šæœ‰æ— ä½•ç§æ ‡è®°ï¼Œé’ˆå¯¹ä¸åŒçš„æ ‡è®°ï¼Œå°±å»åšç›¸åº”çš„äº‹ä»¶ã€‚æ ‡è®°å¯ä»¥åŠ åœ¨åŒ…ï¼Œç±»ï¼Œå­—æ®µï¼Œæ–¹æ³•ï¼Œæ–¹æ³•çš„å‚æ•°ä»¥åŠå±€éƒ¨å˜é‡ä¸Šã€‚</p><h3 id="Stringä¸ºä»€ä¹ˆè¦è®¾è®¡æˆä¸å¯å˜ï¼ŒStringBufferä¸StringBuilderæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#Stringä¸ºä»€ä¹ˆè¦è®¾è®¡æˆä¸å¯å˜ï¼ŒStringBufferä¸StringBuilderæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="Stringä¸ºä»€ä¹ˆè¦è®¾è®¡æˆä¸å¯å˜ï¼ŒStringBufferä¸StringBuilderæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>Stringä¸ºä»€ä¹ˆè¦è®¾è®¡æˆä¸å¯å˜ï¼ŒStringBufferä¸StringBuilderæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><ol><li>Stringæ˜¯ä¸å¯å˜çš„ï¼ˆä¿®æ”¹Stringæ—¶ï¼Œä¸ä¼šåœ¨åŸæœ‰çš„å†…å­˜åœ°å€ä¿®æ”¹ï¼Œè€Œæ˜¯é‡æ–°æŒ‡å‘ä¸€ä¸ªæ–°å¯¹è±¡ï¼‰ï¼ŒStringç”¨finalä¿®é¥°ï¼Œä¸å¯ç»§æ‰¿ï¼ŒStringæœ¬è´¨ä¸Šæ˜¯ä¸ªfinalçš„char[]æ•°ç»„ï¼Œæ‰€ä»¥char[]æ•°ç»„çš„å†…å­˜åœ°å€ä¸ä¼šè¢«ä¿®æ”¹ï¼Œè€Œä¸”Stringä¹Ÿæ²¡æœ‰å¯¹å¤–æš´éœ²ä¿®æ”¹char[]æ•°ç»„çš„æ–¹æ³•ã€‚ä¸å¯å˜æ€§å¯ä»¥ä¿è¯çº¿ç¨‹å®‰å…¨ä»¥åŠå­—ç¬¦ä¸²ä¸²å¸¸é‡æ± çš„å®ç°ã€‚</li><li>StringBufferæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</li><li>StringBuilderæ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚</li></ol><h3 id="Javaé‡Œçš„å¹‚ç­‰æ€§äº†è§£å—ï¼Ÿ"><a href="#Javaé‡Œçš„å¹‚ç­‰æ€§äº†è§£å—ï¼Ÿ" class="headerlink" title="Javaé‡Œçš„å¹‚ç­‰æ€§äº†è§£å—ï¼Ÿ"></a>Javaé‡Œçš„å¹‚ç­‰æ€§äº†è§£å—ï¼Ÿ</h3><blockquote><p>å¹‚ç­‰æ€§åŸæœ¬æ˜¯æ•°å­¦ä¸Šçš„ä¸€ä¸ªæ¦‚å¿µï¼Œå³ï¼šf(x) = f(f(x))ï¼Œå¯¹åŒä¸€ä¸ªç³»ç»Ÿï¼Œä½¿ç”¨åŒæ ·çš„æ¡ä»¶ï¼Œä¸€æ¬¡è¯·æ±‚å’Œé‡å¤çš„å¤šæ¬¡è¯·æ±‚å¯¹ç³»ç»Ÿèµ„æºçš„å½±å“æ˜¯ä¸€è‡´çš„ã€‚</p></blockquote><p>å¹‚ç­‰æ€§æœ€ä¸ºå¸¸è§çš„åº”ç”¨å°±æ˜¯ç”µå•†çš„å®¢æˆ·ä»˜æ¬¾ï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœä½ åœ¨ä»˜æ¬¾çš„æ—¶å€™å› ä¸ºç½‘ç»œç­‰å„ç§é—®é¢˜å¤±è´¥äº†ï¼Œç„¶ååˆå»é‡å¤çš„ä»˜äº†ä¸€æ¬¡ï¼Œæ˜¯ä¸€ç§å¤šä¹ˆç³Ÿç³•çš„ä½“éªŒã€‚å¹‚ç­‰æ€§å°±æ˜¯ä¸ºäº†è§£å†³è¿™æ ·çš„é—®é¢˜ã€‚</p><p>å®ç°å¹‚ç­‰æ€§å¯å¯ä»¥ä½¿ç”¨Tokenæœºåˆ¶ã€‚</p><blockquote><p>æ ¸å¿ƒæ€æƒ³æ˜¯ä¸ºæ¯ä¸€æ¬¡æ“ä½œç”Ÿæˆä¸€ä¸ªå”¯ä¸€æ€§çš„å‡­è¯ï¼Œä¹Ÿå°±æ˜¯tokenã€‚ä¸€ä¸ªtokenåœ¨æ“ä½œçš„æ¯ä¸€ä¸ªé˜¶æ®µåªæœ‰ä¸€æ¬¡æ‰§è¡Œæƒï¼Œä¸€æ—¦æ‰§è¡ŒæˆåŠŸåˆ™ä¿å­˜æ‰§è¡Œç»“æœã€‚å¯¹é‡å¤çš„è¯·æ±‚ï¼Œè¿”å›åŒä¸€ä¸ªç»“æœã€‚</p></blockquote><p>ä¾‹å¦‚ï¼šç”µå•†å¹³å°ä¸Šçš„è®¢å•idå°±æ˜¯æœ€é€‚åˆçš„tokenã€‚å½“ç”¨æˆ·ä¸‹å•æ—¶ï¼Œä¼šç»å†å¤šä¸ªç¯èŠ‚ï¼Œæ¯”å¦‚ç”Ÿæˆè®¢å•ï¼Œå‡åº“å­˜ï¼Œå‡ä¼˜æƒ åˆ¸ç­‰ç­‰ã€‚æ¯ä¸€ä¸ªç¯èŠ‚æ‰§è¡Œæ—¶éƒ½å…ˆæ£€æµ‹ä¸€ä¸‹è¯¥è®¢å•idæ˜¯å¦å·²ç»æ‰§è¡Œè¿‡è¿™ä¸€æ­¥éª¤ï¼Œå¯¹æœªæ‰§è¡Œçš„è¯·æ±‚ï¼Œæ‰§è¡Œæ“ä½œå¹¶ç¼“å­˜ç»“æœï¼Œè€Œå¯¹å·²ç»æ‰§è¡Œè¿‡çš„idï¼Œåˆ™ç›´æ¥è¿”å›ä¹‹å‰çš„æ‰§è¡Œç»“æœï¼Œä¸åšä»»ä½•æ“ä½œã€‚è¿™æ ·å¯ä»¥åœ¨æœ€å¤§ç¨‹åº¦ä¸Šé¿å…æ“ä½œçš„é‡å¤æ‰§è¡Œé—®é¢˜ï¼Œç¼“å­˜èµ·æ¥çš„æ‰§è¡Œç»“æœä¹Ÿèƒ½ç”¨äºäº‹åŠ¡çš„æ§åˆ¶ç­‰ã€‚</p><h3 id="Javaæ³›å‹äº†è§£å—ï¼ŒçŸ¥é“å®ƒçš„è¿è¡Œæœºåˆ¶å—ï¼Ÿ"><a href="#Javaæ³›å‹äº†è§£å—ï¼ŒçŸ¥é“å®ƒçš„è¿è¡Œæœºåˆ¶å—ï¼Ÿ" class="headerlink" title="Javaæ³›å‹äº†è§£å—ï¼ŒçŸ¥é“å®ƒçš„è¿è¡Œæœºåˆ¶å—ï¼Ÿ"></a>Javaæ³›å‹äº†è§£å—ï¼ŒçŸ¥é“å®ƒçš„è¿è¡Œæœºåˆ¶å—ï¼Ÿ</h3><blockquote><p>æ³›å‹æ˜¯ä¸ºäº†å‚æ•°åŒ–ç±»å‹ã€‚</p></blockquote><p>ä¸ºä»€ä¹ˆä½¿ç”¨æ³›å‹ï¼Ÿ</p><ol><li>ç›¸å¯¹äºä½¿ç”¨Objectè¿™ç§ç®€å•ç²—æš´çš„æ–¹å¼ï¼Œæ³›å‹æä¾›äº†ä¸€ç§å‚æ•°åŒ–çš„èƒ½åŠ›ï¼Œä½¿å¾—æ•°æ®çš„ç±»å‹å¯ä»¥åƒå‚æ•°ä¸€æ ·è¢«ä¼ é€’è¿›æ¥ï¼Œè¿™æä¾›äº†ä¸€ç§æ‰©å±•èƒ½åŠ›ã€‚</li><li>å½“æ•°æ®ç±»å‹ç¡®å®šä»¥åï¼Œæä¾›äº†ä¸€ç§ç±»å‹æ£€æµ‹æœºåˆ¶ï¼Œåªæœ‰ç›¸åŒ¹é…çš„æ•°æ®æ‰å¯ä»¥æ­£å¸¸èµ‹å€¼ï¼Œå¦åˆ™ç¼–è¯‘é”™è¯¯ï¼Œå¢å¼ºäº†å®‰å…¨æ€§ã€‚</li><li>æ³›å‹æé«˜äº†ä»£ç çš„å¯è¯»æ€§ï¼Œä¸å¿…ç­‰åˆ°è¿è¡Œæ—¶é‡‡å–æ‰§è¡Œç±»å‹è½¬æ¢ï¼Œåœ¨ç¼–å†™ä»£ç é˜¶æ®µï¼Œç¨‹åºå‘˜å°±å¯ä»¥é€šè¿‡å‚æ•°ä¹¦å†™æ­£ç¡®çš„æ•°æ®ç±»å‹ã€‚</li></ol><p>é™¤äº†ç”¨  <strong><t></t></strong>  è¡¨ç¤ºæ³›å‹å¤–ï¼Œè¿˜æœ‰ <strong>&lt;?&gt;</strong> è¿™ç§å½¢å¼ã€‚<strong>?</strong> è¢«ç§°ä¸ºé€šé…ç¬¦ã€‚</p><ul><li>&lt;?&gt; è¢«ç§°ä½œæ— é™å®šçš„é€šé…ç¬¦ã€‚</li><li>&lt;? extends T&gt; è¢«ç§°ä½œæœ‰ä¸Šé™çš„é€šé…ç¬¦ã€‚</li><li>&lt;? super T&gt; è¢«ç§°ä½œæœ‰ä¸‹é™çš„é€šé…ç¬¦ã€‚</li></ul><h3 id="Javaé‡Œçš„åå°„ä¸ºä½•ä¼šæ¶ˆè€—æ€§èƒ½ï¼Ÿ"><a href="#Javaé‡Œçš„åå°„ä¸ºä½•ä¼šæ¶ˆè€—æ€§èƒ½ï¼Ÿ" class="headerlink" title="Javaé‡Œçš„åå°„ä¸ºä½•ä¼šæ¶ˆè€—æ€§èƒ½ï¼Ÿ"></a>Javaé‡Œçš„åå°„ä¸ºä½•ä¼šæ¶ˆè€—æ€§èƒ½ï¼Ÿ</h3><p>åå°„æ…¢ä¸»è¦å› ä¸ºåå°„æ˜¯åŠ¨æ€ç±»å‹ï¼Œè¿™æ ·å¯¼è‡´æŠŠåœ¨zhuang</p><h3 id="Javaçš„ç±»å‹æ“¦é™¤ï¼ŒçŸ¥é“å®ƒçš„åŸç†å—ï¼Ÿ"><a href="#Javaçš„ç±»å‹æ“¦é™¤ï¼ŒçŸ¥é“å®ƒçš„åŸç†å—ï¼Ÿ" class="headerlink" title="Javaçš„ç±»å‹æ“¦é™¤ï¼ŒçŸ¥é“å®ƒçš„åŸç†å—ï¼Ÿ"></a>Javaçš„ç±»å‹æ“¦é™¤ï¼ŒçŸ¥é“å®ƒçš„åŸç†å—ï¼Ÿ</h3><blockquote><p>æ³›å‹ä¿¡æ¯åªå­˜åœ¨ä»£ç ç¼–è¯‘é˜¶æ®µï¼Œåœ¨è¿›å…¥JVMä¹‹å‰ï¼Œä¸æ³›å‹ç›¸å…³çš„ä¿¡æ¯éƒ½ä¼šè¢«æ“¦é™¤æ‰ã€‚</p></blockquote><p>åœ¨ç±»å‹æ“¦é™¤çš„æ—¶å€™ï¼Œå¦‚æœæ³›å‹ç±»é‡Œçš„ç±»å‹å‚æ•°æ²¡æœ‰æŒ‡å®šä¸Šé™ï¼Œä¾‹å¦‚ï¼š<strong><t></t></strong>ï¼Œåˆ™ä¼šè¢«è½¬æˆObjectç±»å‹ï¼Œå¦‚æœæŒ‡å®šäº†ä¸Šé™ï¼Œä¾‹å¦‚ï¼š<t extends="" string="">ï¼Œåˆ™ä¼šè¢«ä¼ æ¢æˆå¯¹åº”çš„ç±»å‹ä¸Šé™ã€‚</t></p><h3 id="é—­åŒ…äº†è§£å—ï¼ŒJavaé‡Œæœ‰é—­åŒ…å—ï¼Ÿ"><a href="#é—­åŒ…äº†è§£å—ï¼ŒJavaé‡Œæœ‰é—­åŒ…å—ï¼Ÿ" class="headerlink" title="é—­åŒ…äº†è§£å—ï¼ŒJavaé‡Œæœ‰é—­åŒ…å—ï¼Ÿ"></a>é—­åŒ…äº†è§£å—ï¼ŒJavaé‡Œæœ‰é—­åŒ…å—ï¼Ÿ</h3><blockquote><p>ã€Œå‡½æ•°ã€å’Œã€Œå‡½æ•°å†…éƒ¨èƒ½è®¿é—®åˆ°çš„å˜é‡ã€ï¼ˆä¹Ÿå«ç¯å¢ƒï¼‰çš„æ€»å’Œï¼Œå°±æ˜¯ä¸€ä¸ªé—­åŒ…ã€‚</p></blockquote><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</div><div class="line">    test</div><div class="line">&#125;</div><div class="line"><span class="keyword">val</span> test = <span class="keyword">if</span> (<span class="number">5</span> &gt; <span class="number">3</span>) &#123;</div><div class="line">    print(<span class="string">"yes"</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    print(<span class="string">"no"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="Lambdaè¡¨è¾¾å¼äº†è§£å—ï¼Ÿ"><a href="#Lambdaè¡¨è¾¾å¼äº†è§£å—ï¼Ÿ" class="headerlink" title="Lambdaè¡¨è¾¾å¼äº†è§£å—ï¼Ÿ"></a>Lambdaè¡¨è¾¾å¼äº†è§£å—ï¼Ÿ</h3><blockquote><p>Lambda è¡¨è¾¾å¼ä¿—ç§°åŒ¿åå‡½æ•°ã€‚Kotlin çš„ Lambdaè¡¨è¾¾å¼æ›´â€œçº¯ç²¹â€ä¸€ç‚¹ï¼Œ å› ä¸ºå®ƒæ˜¯çœŸæ­£æŠŠLambdaæŠ½è±¡ä¸ºäº†ä¸€ç§ç±»å‹ï¼Œè€Œ Java 8 çš„ Lambda åªæ˜¯å•æ–¹æ³•åŒ¿åæ¥å£å®ç°çš„è¯­æ³•ç³–ç½¢äº†ã€‚</p></blockquote><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">val</span> printMsg = &#123; msg: String -&gt; </div><div class="line">println(msg) </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</div><div class="line">  printMsg(<span class="string">"hello"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="é«˜é˜¶å‡½æ•°äº†è§£å—ï¼Ÿ"><a href="#é«˜é˜¶å‡½æ•°äº†è§£å—ï¼Ÿ" class="headerlink" title="é«˜é˜¶å‡½æ•°äº†è§£å—ï¼Ÿ"></a>é«˜é˜¶å‡½æ•°äº†è§£å—ï¼Ÿ</h3><blockquote><p>å½“å®šä¹‰ä¸€ä¸ªé—­åŒ…ä½œä¸ºå‚æ•°çš„å‡½æ•°ï¼Œç§°è¿™ä¸ªå‡½æ•°ä¸ºé«˜é˜¶å‡½æ•°ã€‚</p></blockquote><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</div><div class="line">    log(<span class="string">"world"</span>, printMsg)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">val</span> printMsg = &#123; str: String -&gt;</div><div class="line">    println(str)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">val</span> log = &#123; str: String, printLog: (String) -&gt; <span class="built_in">Unit</span> -&gt;</div><div class="line">    printLog(str)</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;ä¸€æ¬¡æ¬¡çš„æŒ‚äºä¸€é¢è®©æˆ‘ç­‹ç–²åŠ›ç«­â€¦æ„è¯†åˆ°è‡ªå·±å­˜åœ¨çœ¼é«˜æ‰‹ä½çš„çŠ¶æ€â€¦å‡†å¤‡é‡æ–°ä¸Šè·¯å¤¯å®åŸºç¡€&lt;br&gt;æœ¬ç‰‡æ–‡ç« Fork from &lt;a href=&quot;https://github.com/guoxiaoxing/android-interview&quot; target=
      
    
    </summary>
    
    
      <category term="Interview" scheme="https://edward7zhang.github.io/tags/Interview/"/>
    
      <category term="Java" scheme="https://edward7zhang.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Androidé¢è¯•é¢˜é›†</title>
    <link href="https://edward7zhang.github.io/2018/04/08/Android%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%86/"/>
    <id>https://edward7zhang.github.io/2018/04/08/Androidé¢è¯•é¢˜é›†/</id>
    <published>2018-04-08T01:07:14.000Z</published>
    <updated>2018-04-21T04:35:53.113Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä¸€æ¬¡æ¬¡çš„æŒ‚äºä¸€é¢è®©æˆ‘ç­‹ç–²åŠ›ç«­â€¦æ„è¯†åˆ°è‡ªå·±å­˜åœ¨çœ¼é«˜æ‰‹ä½çš„çŠ¶æ€â€¦å‡†å¤‡é‡æ–°ä¸Šè·¯å¤¯å®åŸºç¡€<br>æœ¬ç‰‡æ–‡ç« Fork from <a href="https://github.com/guoxiaoxing/android-interview" target="_blank" rel="external">android-interview</a><br>å¹¶ä¸”åœ¨æ­¤åŸºç¡€ä¸Šå¯¹ä¸€äº›é—®é¢˜è¿›è¡Œäº†è¡¥å……ã€æ·±å…¥å‰–æ</p></blockquote><h3 id="æ‰‹ç”»ä¸€ä¸‹Androidç³»ç»Ÿæ¶æ„å›¾ï¼Œæè¿°ä¸€ä¸‹å„ä¸ªå±‚æ¬¡çš„ä½œç”¨ï¼Ÿ"><a href="#æ‰‹ç”»ä¸€ä¸‹Androidç³»ç»Ÿæ¶æ„å›¾ï¼Œæè¿°ä¸€ä¸‹å„ä¸ªå±‚æ¬¡çš„ä½œç”¨ï¼Ÿ" class="headerlink" title="æ‰‹ç”»ä¸€ä¸‹Androidç³»ç»Ÿæ¶æ„å›¾ï¼Œæè¿°ä¸€ä¸‹å„ä¸ªå±‚æ¬¡çš„ä½œç”¨ï¼Ÿ"></a>æ‰‹ç”»ä¸€ä¸‹Androidç³»ç»Ÿæ¶æ„å›¾ï¼Œæè¿°ä¸€ä¸‹å„ä¸ªå±‚æ¬¡çš„ä½œç”¨ï¼Ÿ</h3><p>Androidç³»ç»Ÿæ¶æ„å›¾</p><p><img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/android_system_structure.png" width="600"></p><p>ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡åˆ†ä¸ºå…­å±‚ï¼š</p><ul><li>åº”ç”¨æ¡†æ¶å±‚</li><li>è¿›ç¨‹é€šä¿¡å±‚</li><li>ç³»ç»ŸæœåŠ¡å±‚</li><li>Androidè¿è¡Œæ—¶å±‚</li><li>ç¡¬ä»¶æŠ½è±¡å±‚</li><li>Linuxå†…æ ¸å±‚</li></ul><h3 id="Activityå¦‚ä¸Serviceé€šä¿¡ï¼Ÿ"><a href="#Activityå¦‚ä¸Serviceé€šä¿¡ï¼Ÿ" class="headerlink" title="Activityå¦‚ä¸Serviceé€šä¿¡ï¼Ÿ"></a>Activityå¦‚ä¸Serviceé€šä¿¡ï¼Ÿ</h3><p>å¯ä»¥é€šè¿‡bindServiceçš„æ–¹å¼ï¼Œå…ˆåœ¨Activityé‡Œå®ç°ä¸€ä¸ªServiceConnectionæ¥å£ï¼Œå¹¶å°†è¯¥æ¥å£ä¼ é€’ç»™bindService()æ–¹æ³•ï¼Œåœ¨ServiceConnectionæ¥å£çš„onServiceConnected()æ–¹æ³•<br>é‡Œæ‰§è¡Œç›¸å…³æ“ä½œã€‚<br><em>æ³¨ï¼šåªæœ‰activities,services,å’Œcontentproviderså¯ä»¥ç»‘å®šåˆ°ä¸€ä¸ªserviceâ€”ä½ ä¸èƒ½ä»ä¸€ä¸ªbroadcastreceiverç»‘å®šåˆ°serviceï¼</em></p><h3 id="Serviceçš„ç”Ÿå‘½å‘¨æœŸä¸å¯åŠ¨æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#Serviceçš„ç”Ÿå‘½å‘¨æœŸä¸å¯åŠ¨æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="Serviceçš„ç”Ÿå‘½å‘¨æœŸä¸å¯åŠ¨æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>Serviceçš„ç”Ÿå‘½å‘¨æœŸä¸å¯åŠ¨æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><ul><li>startService()ï¼šå¼€å¯Serviceï¼Œè°ƒç”¨è€…é€€å‡ºåServiceä»ç„¶å­˜åœ¨ã€‚</li><li>bindService()ï¼šå¼€å¯Serviceï¼Œè°ƒç”¨è€…é€€å‡ºåServiceä¹Ÿéšå³é€€å‡ºã€‚</li></ul><p>Serviceç”Ÿå‘½å‘¨æœŸï¼š</p><ul><li>åªæ˜¯ç”¨startService()å¯åŠ¨æœåŠ¡ï¼šonCreate() -&gt; onStartCommand() -&gt; onDestory</li><li>åªæ˜¯ç”¨bindService()ç»‘å®šæœåŠ¡ï¼šonCreate() -&gt; onBind() -&gt; onUnBind() -&gt; onDestory</li><li>åŒæ—¶ä½¿ç”¨startService()å¯åŠ¨æœåŠ¡ä¸bindService()ç»‘å®šæœåŠ¡ï¼šonCreate() -&gt; onStartCommnad() -&gt; onBind() -&gt; onUnBind() -&gt; onDestory</li></ul><h3 id="Serviceå…ˆstartå†bindå¦‚ä½•å…³é—­serviceï¼Œä¸ºä»€ä¹ˆbindServiceå¯ä»¥è·ŸActivityç”Ÿå‘½å‘¨æœŸè”åŠ¨ï¼Ÿ"><a href="#Serviceå…ˆstartå†bindå¦‚ä½•å…³é—­serviceï¼Œä¸ºä»€ä¹ˆbindServiceå¯ä»¥è·ŸActivityç”Ÿå‘½å‘¨æœŸè”åŠ¨ï¼Ÿ" class="headerlink" title="Serviceå…ˆstartå†bindå¦‚ä½•å…³é—­serviceï¼Œä¸ºä»€ä¹ˆbindServiceå¯ä»¥è·ŸActivityç”Ÿå‘½å‘¨æœŸè”åŠ¨ï¼Ÿ"></a>Serviceå…ˆstartå†bindå¦‚ä½•å…³é—­serviceï¼Œä¸ºä»€ä¹ˆbindServiceå¯ä»¥è·ŸActivityç”Ÿå‘½å‘¨æœŸè”åŠ¨ï¼Ÿ</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://img-blog.csdn.net/20150902003400081" alt="bindServiceç”Ÿå‘½å‘¨æœŸ" title="">                </div>                <div class="image-caption">bindServiceç”Ÿå‘½å‘¨æœŸ</div>            </figure><p>é€šè¿‡IBinder<br>ä»ä½ çš„å®¢æˆ·ç«¯ç»‘å®šåˆ°ä¸€ä¸ªserviceï¼Œä½ å¿…é¡»ï¼š</p><ul><li><p>ï¼‘å®ç°ServiceConnection.</p><p>ä½ çš„å®ç°å¿…é¡»é‡å†™ä¸¤ä¸ªå›è°ƒæ–¹æ³•ï¼š</p><ul><li><p>onServiceConnected()</p><p>ç³»ç»Ÿè°ƒç”¨è¿™ä¸ªæ¥ä¼ é€åœ¨serviceçš„onBind()ä¸­è¿”å›çš„IBinderï¼</p></li><li><p>OnServiceDisconnected()</p><p>Androidç³»ç»Ÿåœ¨åŒserviceçš„è¿æ¥æ„å¤–ä¸¢å¤±æ—¶è°ƒç”¨è¿™ä¸ªï¼æ¯”å¦‚å½“serviceå´©æºƒäº†æˆ–è¢«å¼ºæ€äº†ï¼å½“å®¢æˆ·ç«¯è§£é™¤ç»‘å®šæ—¶ï¼Œè¿™ä¸ªæ–¹æ³•ä¸ä¼šè¢«è°ƒç”¨ï¼</p></li></ul></li><li><p>ï¼’è°ƒç”¨bindService()ï¼Œä¼ ç»™å®ƒServiceConnectionçš„å®ç°ï¼</p></li><li><p>ï¼“å½“ç³»ç»Ÿè°ƒç”¨ä½ çš„onServiceConnected()æ–¹æ³•æ—¶ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨æ¥å£å®šä¹‰çš„æ–¹æ³•ä»¬å¼€å§‹è°ƒç”¨serviceäº†ï¼</p></li><li><p>ï¼”è¦ä¸serviceæ–­å¼€è¿æ¥ï¼Œè°ƒç”¨unbindService()ï¼</p><p>ã€€ã€€å½“ä½ çš„å®¢æˆ·ç«¯è¢«é”€æ¯ï¼Œå®ƒå°†ä»serviceè§£é™¤ç»‘å®šï¼Œä½†æ˜¯ä½ å¿…é¡»æ€»æ˜¯åœ¨ä½ å®Œæˆä¸serviceçš„äº¤äº’æ—¶æˆ–å½“ä½ çš„activityæš‚åœäºæ˜¯serviceåœ¨ä¸è¢«ä½¿ç”¨æ—¶å¯ä»¥å…³é—­æ­¤ä¸¤ç§æƒ…å†µä¸‹è§£</p><p>é™¤ç»‘å®šï¼(ä¸‹é¢ä¼šè®¨è®ºæ›´å¤šåœ¨é€‚å½“çš„æ—¶å€™ç»‘å®šå’Œè§£é™¤ç»‘å®šçš„é—®é¢˜ï¼</p><p>ä½¿ç”¨è¿™ä¸ªServiceConnectionï¼Œå®¢æˆ·ç«¯å¯ä»¥ç»‘å®šåˆ°ä¸€ä¸ªserviceï¼Œé€šè¿‡æŠŠå®ƒä¼ ç»™bindService()ï¼ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Intentintent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, LocalService.class);</div><div class="line">bindService(intent,mConnection, Context.BIND_AUTO_CREATE);</div></pre></td></tr></table></figure></li><li><p>ç¬¬ä¸€ä¸ªbindService()çš„å‚æ•°æ˜¯ä¸€ä¸ªæ˜ç¡®æŒ‡å®šäº†è¦ç»‘å®šçš„serviceçš„Intentï¼</p></li><li><p>ç¬¬äºŒä¸ªå‚æ•°æ˜¯ServiceConnectionå¯¹è±¡ï¼</p></li><li><p>ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ ‡å¿—ï¼Œå®ƒè¡¨æ˜ç»‘å®šä¸­çš„æ“ä½œï¼å®ƒä¸€èˆ¬åº”æ˜¯BIND_AUTO_CREATEï¼Œè¿™æ ·å°±ä¼šåœ¨serviceä¸å­˜åœ¨æ—¶åˆ›å»ºä¸€ä¸ªï¼å…¶å®ƒå¯é€‰çš„å€¼æ˜¯BIND_DEBUG_UNBINDå’ŒBIND_NOT_FOREGROUND,ä¸æƒ³æŒ‡å®šæ—¶è®¾ä¸º0å³å¯ã€‚</p></li></ul><h4 id="è¡¥å……äº‹é¡¹"><a href="#è¡¥å……äº‹é¡¹" class="headerlink" title="è¡¥å……äº‹é¡¹"></a>è¡¥å……äº‹é¡¹</h4><p>ä¸‹é¢æ˜¯ä¸€äº›å…³äºç»‘å®šåˆ°serviceçš„é‡è¦äº‹é¡¹ï¼š</p><ul><li><p>ä½ æ€»æ˜¯éœ€è¦æ•è·DeadObjectExceptionå¼‚å¸¸ï¼å®ƒä¼šåœ¨è¿æ¥è¢«æ‰“æ–­æ—¶æŠ›å‡ºï¼è¿™æ˜¯è¢«è¿œç¨‹æ–¹æ³•æŠ›å‡ºçš„å”¯ä¸€å¼‚å¸¸ï¼</p></li><li><p>å¯¹è±¡å¼•ç”¨è®¡æ•°æ˜¯è·¨è¿›ç¨‹çš„ä½œç”¨çš„ï¼</p></li><li><p>ä½ åº”è¯¥åœ¨å®¢æˆ·ç«¯çš„ç”Ÿå‘½æœŸå†…ä½¿ç»‘å®šå’Œè§£é™¤ç»‘å®šé…å¯¹è¿›è¡Œï¼Œä¾‹å¦‚ï¼š</p><ul><li><p>å¦‚æœä½ éœ€è¦åœ¨ä½ çš„activityå¯è§æ—¶ä¸serviceäº¤äº’ï¼Œä½ åº”è¯¥åœ¨onStart()ç»‘å®šå¹¶åœ¨onStop()ä¸­è§£é™¤ç»‘å®šï¼</p></li><li><p>å¦‚æœä½ æƒ³è®©ä½ çš„activityå³ä½¿åœ¨å®ƒåœæ­¢æ—¶ä¹Ÿèƒ½æ¥æ”¶å›åº”ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨onCreate()ä¸­ç»‘å®šå¹¶åœ¨onDestroy()ä¸­è§£é™¤ç»‘å®šï¼æ³¨æ„è¿™æ„å‘³ç€ä½ çš„activityéœ€è¦ä½¿ç”¨åœ¨è‡ªå·±æ•´</p><p>ä¸ªè¿è¡ŒæœŸé—´ä½¿ç”¨service(å³ä½¿ä½äºåå°)ï¼Œæ‰€ä»¥å¦‚æœserviceåœ¨å¦ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œé‚£ä¹ˆä½ å¢åŠ äº†è¿™ä¸ªè¿›ç¨‹çš„è´Ÿæ‹…è€Œä½¿å®ƒå˜å¾—æ›´å®¹æ˜“è¢«ç³»ç»Ÿæ€æ‰ï¼</p><p>æ³¨ï¼šä½ ä¸€èˆ¬ä¸åº”è¯¥åœ¨ä½ çš„activityçš„onResume()å’ŒonPause()ä¸­ç»‘å®šå’Œè§£é™¤ç»‘å®šåˆ°serviceï¼Œå› ä¸ºè¿™äº›å›è°ƒæ–¹æ³•,å‡ºç°åœ¨æ¯ä¸ªç”Ÿå‘½æœŸå˜åŒ–ä¸­ï¼Œå¹¶ä¸”ä½ éœ€è¦ä½¿å‘ç”Ÿåœ¨è¿™</p><p>äº›å˜åŒ–ä¸­çš„å¤„ç†æœ€å°åŒ–ï¼è¿˜æœ‰ï¼Œå¦‚æœä½ åº”ç”¨ä¸­çš„å¤šä¸ªactivityç»‘å®šåˆ°åŒä¸€ä¸ªserviceï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªå˜åŒ–å‘ç”Ÿåœ¨å…¶ä¸­ä¸¤ä¸ªactivityä¹‹é—´ï¼Œserviceå¯èƒ½åœ¨å½“å‰activityè§£é™¤ç»‘</p><p>å®š(pauseä¸­)å’Œä¸‹ä¸€ä¸ªç»‘å®šå‰(rusumeä¸­)è¢«é”€æ¯åˆé‡å»ºï¼</p></li></ul></li></ul><h3 id="bindServiceå’ŒstartServiceæ··åˆä½¿ç”¨æ—¶"><a href="#bindServiceå’ŒstartServiceæ··åˆä½¿ç”¨æ—¶" class="headerlink" title="bindServiceå’ŒstartServiceæ··åˆä½¿ç”¨æ—¶"></a>bindServiceå’ŒstartServiceæ··åˆä½¿ç”¨æ—¶</h3><ol><li><p>å¦‚æœå…ˆbindService,å†startService:<br>åœ¨bindçš„Activityé€€å‡ºçš„æ—¶å€™,Serviceä¼šæ‰§è¡ŒunBindæ–¹æ³•è€Œä¸æ‰§è¡ŒonDestoryæ–¹æ³•,å› ä¸ºæœ‰startServiceæ–¹æ³•è°ƒç”¨è¿‡,æ‰€ä»¥Activityä¸Serviceè§£é™¤ç»‘å®šåä¼šæœ‰ä¸€ä¸ªä¸è°ƒç”¨è€…æ²¡æœ‰å…³è¿çš„Serviceå­˜åœ¨</p></li><li><p>å¦‚æœå…ˆbindService,å†startService,å†è°ƒç”¨Context.stopService<br>Serviceçš„onDestoryæ–¹æ³•ä¸ä¼šç«‹åˆ»æ‰§è¡Œ,å› ä¸ºæœ‰ä¸€ä¸ªä¸Serviceç»‘å®šçš„Activity,ä½†æ˜¯åœ¨Activityé€€å‡ºçš„æ—¶å€™,ä¼šæ‰§è¡ŒonDestory,å¦‚æœè¦ç«‹åˆ»æ‰§è¡ŒstopService,å°±å¾—å…ˆè§£é™¤ç»‘å®š</p><hr></li></ol><p>æŠŠä¸Šé¢çš„â€å¦‚æœå…ˆbindService,å†startServiceâ€æ¢æˆâ€å¦‚æœå…ˆstartService,å†bindServiceâ€,ç»“æœæ˜¯ä¸€æ ·çš„ </p><ul><li>é—®é¢˜:<br>å¦‚æœåœ¨ä¸€ä¸ªActivityçš„onCreateæ–¹æ³•ä¸­,<br>å…ˆbindService(serviceIntent,conn,Context.BIND_AUTO_CREATE);<br>å†startService(serviceIntent);<br>é€€å‡ºè¿™ä¸ªActivityæ—¶,ä¼šæ‰§è¡ŒonUnBind<br>ä½†æ˜¯å†æ¬¡è¿›å…¥è¿™ä¸ªActivityçš„æ—¶å€™,ä¸ºä»€ä¹ˆä¸æ‰§è¡ŒonBindæ–¹æ³•äº†?<br>åªæœ‰åœ¨è¿™ä¸ªServiceé”€æ¯å(æ‰§è¡ŒonDestory),å†è¿›è¿™ä¸ªActivityæ‰ä¼šæ‰§è¡ŒonBindï¼Œè¿˜æœ‰å°±æ˜¯å½“æœ‰ä¸¤ä¸ªå®¢æˆ·ç«¯æ—¶ï¼Œåœ¨ç¬¬ä¸€ä¸ªå®¢æˆ·ç«¯startServieå¯åŠ¨æœåŠ¡å†bindServiceç»‘å®šæœåŠ¡,è¿™æ—¶è·³åˆ°ç¬¬äºŒä¸ªå®¢æˆ·ç«¯é‡Œï¼ˆå¯åŠ¨æ—¶ä¼šè°ƒç”¨onBind())ï¼Œå†å®¢æˆ·ç«¯startServieå¯åŠ¨æœåŠ¡å†bindServiceç»‘å®šæœåŠ¡ï¼Œå¯åŠ¨æ—¶ä¸ä¼šè°ƒç”¨ç”¨onBind()äº†(å› ä¸ºä¹‹å‰å®¢æˆ·ç«¯å·²ç»å¯åŠ¨åæ²¡æœ‰onDestory()é”€æ¯Serviceï¼Œæ‰€ä»¥å†å®¢æˆ·ç«¯ç¬¬äºŒæ¬¡ç»‘å®šæœåŠ¡æ—¶ï¼Œåªä¼šè¿”å›IBinderå¯¹è±¡ç»™onServiceConnected())ï¼Œè€Œä¸”è¦æ³¨æ„çš„æ˜¯å½“ï¼Œå½“ç¬¬ä¸€ä¸ªæœåŠ¡å¯åŠ¨å¹¶ç»‘å®šä¸€ä¸ªæœåŠ¡æ—¶ï¼Œå†è·³å»ç¬¬äºŒä¸ªæœåŠ¡ç«¯å¯åŠ¨å¹¶ç»‘å®šè¿™ä¸ªæœåŠ¡æ—¶ï¼Œç¬¬äºŒä¸ªæœåŠ¡ç«¯å†è§£ç»‘æ—¶ï¼Œä¸ä¼šè°ƒç”¨onUnbind()ï¼Œåªæœ‰å›åˆ°ç¬¬ä¸€ä¸ªå®¢æˆ·ç«¯æ—¶ï¼Œè§£ç»‘è¿™æ˜¯æ‰ä¼šè°ƒç”¨onUnbind(),é¡ºåºåè¿‡æ¥ç»“æœæ˜¯ä¸€æ ·çš„ã€‚å¾—å‡ºä¸€ä¸ªç»“è®ºæ˜¯ï¼šå½“ä¸€ä¸ªæœåŠ¡æ²¡è¢«onDestory()é”€æ¯ä¹‹å‰ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªå¯åŠ¨å®ƒçš„å®¢æˆ·ç«¯èƒ½è°ƒç”¨å®ƒçš„onBind()å’ŒonUnbind()ã€‚</li></ul><h3 id="å¹¿æ’­åˆ†ä¸ºå“ªå‡ ç§ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#å¹¿æ’­åˆ†ä¸ºå“ªå‡ ç§ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="å¹¿æ’­åˆ†ä¸ºå“ªå‡ ç§ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ"></a>å¹¿æ’­åˆ†ä¸ºå“ªå‡ ç§ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ul><li>æ™®é€šå¹¿æ’­ï¼šè°ƒç”¨sendBroadcast()å‘é€ï¼Œæœ€å¸¸ç”¨çš„å¹¿æ’­ã€‚</li><li>æœ‰åºå¹¿æ’­ï¼šè°ƒç”¨sendOrderedBroadcast()ï¼Œå‘å‡ºå»çš„å¹¿æ’­ä¼šè¢«å¹¿æ’­æ¥å—è€…æŒ‰ç…§é¡ºåºæ¥æ”¶ï¼Œå¹¿æ’­æ¥æ”¶è€…æŒ‰ç…§Priorityå±æ€§å€¼ä»å¤§-å°æ’åºï¼ŒPriorityå±æ€§ç›¸åŒè€…ï¼ŒåŠ¨æ€æ³¨å†Œçš„å¹¿æ’­ä¼˜å…ˆï¼Œå¹¿æ’­æ¥æ”¶è€…è¿˜å¯ä»¥é€‰æ‹©å¯¹å¹¿æ’­è¿›è¡Œæˆªæ–­å’Œä¿®æ”¹ã€‚</li></ul><h3 id="å¹¿æ’­çš„ä¸¤ç§æ³¨å†Œæ–¹å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#å¹¿æ’­çš„ä¸¤ç§æ³¨å†Œæ–¹å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="å¹¿æ’­çš„ä¸¤ç§æ³¨å†Œæ–¹å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>å¹¿æ’­çš„ä¸¤ç§æ³¨å†Œæ–¹å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><ul><li>é™æ€æ³¨å†Œï¼šå¸¸é©»ç³»ç»Ÿï¼Œä¸å—ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå½±å“ï¼Œå³ä¾¿åº”ç”¨é€€å‡ºï¼Œå¹¿æ’­è¿˜æ˜¯å¯ä»¥è¢«æ¥æ”¶ï¼Œè€—ç”µã€å å†…å­˜ã€‚</li><li>åŠ¨æ€æ³¨å†Œï¼šéå¸¸é©»ï¼Œè·Ÿéšç»„ä»¶çš„ç”Ÿå‘½å˜åŒ–ï¼Œç»„ä»¶ç»“æŸï¼Œå¹¿æ’­ç»“æŸã€‚åœ¨ç»„ä»¶ç»“æŸå‰ï¼Œéœ€è¦å…ˆç§»é™¤å¹¿æ’­ï¼Œå¦åˆ™å®¹æ˜“é€ æˆå†…å­˜æ³„æ¼ã€‚<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/944365-0ae738c6d50c0adf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" title="">                </div>                <div class="image-caption"></div>            </figure></li></ul><h3 id="å¹¿æ’­å‘é€å’Œæ¥æ”¶çš„åŸç†äº†è§£å—ï¼Ÿ"><a href="#å¹¿æ’­å‘é€å’Œæ¥æ”¶çš„åŸç†äº†è§£å—ï¼Ÿ" class="headerlink" title="å¹¿æ’­å‘é€å’Œæ¥æ”¶çš„åŸç†äº†è§£å—ï¼Ÿ"></a>å¹¿æ’­å‘é€å’Œæ¥æ”¶çš„åŸç†äº†è§£å—ï¼Ÿ</h3><ol><li>ç»§æ‰¿BroadcastReceiverï¼Œé‡å†™onReceive()æ–¹æ³•ã€‚</li><li>é€šè¿‡Binderæœºåˆ¶å‘ActivityManagerServiceæ³¨å†Œå¹¿æ’­ã€‚</li><li>é€šè¿‡Binderæœºåˆ¶å‘ActivityMangerServiceå‘é€å¹¿æ’­ã€‚</li><li>ActivityManagerServiceæŸ¥æ‰¾ç¬¦åˆç›¸åº”æ¡ä»¶çš„å¹¿æ’­ï¼ˆIntentFilter/Permissionï¼‰çš„BroadcastReceiverï¼Œå°†å¹¿æ’­å‘é€åˆ°BroadcastReceiveræ‰€åœ¨çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­ã€‚</li><li>BroadcastReceiveræ‰€åœ¨æ¶ˆæ¯é˜Ÿåˆ—æ‹¿åˆ°æ­¤å¹¿æ’­åï¼Œå›è°ƒå®ƒçš„onReceive()æ–¹æ³•ã€‚</li></ol><h3 id="å¹¿æ’­ä¼ è¾“çš„æ•°æ®æ˜¯å¦æœ‰é™åˆ¶ï¼Œæ˜¯å¤šå°‘ï¼Œä¸ºä»€ä¹ˆè¦é™åˆ¶ï¼Ÿ"><a href="#å¹¿æ’­ä¼ è¾“çš„æ•°æ®æ˜¯å¦æœ‰é™åˆ¶ï¼Œæ˜¯å¤šå°‘ï¼Œä¸ºä»€ä¹ˆè¦é™åˆ¶ï¼Ÿ" class="headerlink" title="å¹¿æ’­ä¼ è¾“çš„æ•°æ®æ˜¯å¦æœ‰é™åˆ¶ï¼Œæ˜¯å¤šå°‘ï¼Œä¸ºä»€ä¹ˆè¦é™åˆ¶ï¼Ÿ"></a>å¹¿æ’­ä¼ è¾“çš„æ•°æ®æ˜¯å¦æœ‰é™åˆ¶ï¼Œæ˜¯å¤šå°‘ï¼Œä¸ºä»€ä¹ˆè¦é™åˆ¶ï¼Ÿ</h3><h3 id="ContentProviderã€ContentResolverä¸ContentObserverä¹‹é—´çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ContentProviderã€ContentResolverä¸ContentObserverä¹‹é—´çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ContentProviderã€ContentResolverä¸ContentObserverä¹‹é—´çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ContentProviderã€ContentResolverä¸ContentObserverä¹‹é—´çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ul><li>ContentProviderï¼šç®¡ç†æ•°æ®ï¼Œæä¾›æ•°æ®çš„å¢åˆ æ”¹æŸ¥æ“ä½œï¼Œæ•°æ®æºå¯ä»¥æ˜¯æ•°æ®åº“ã€æ–‡ä»¶ã€XMLã€ç½‘ç»œç­‰ï¼ŒContentProviderä¸ºè¿™äº›æ•°æ®çš„è®¿é—®æä¾›äº†ç»Ÿä¸€çš„æ¥å£ï¼Œå¯ä»¥ç”¨æ¥åšè¿›ç¨‹é—´æ•°æ®å…±äº«ã€‚</li><li>ContentResolverï¼šContentResolverå¯ä»¥ä¸åŒURIæ“ä½œä¸åŒçš„ContentProviderä¸­çš„æ•°æ®ï¼Œå¤–éƒ¨è¿›ç¨‹å¯ä»¥é€šè¿‡ContentResolverä¸ContentProviderè¿›è¡Œäº¤äº’ã€‚</li><li>ContentObserverï¼šè§‚å¯ŸContentProviderä¸­çš„æ•°æ®å˜åŒ–ï¼Œå¹¶å°†å˜åŒ–é€šçŸ¥ç»™å¤–ç•Œã€‚</li></ul><h3 id="é‡åˆ°è¿‡å“ªäº›å…³äºFragmentçš„é—®é¢˜ï¼Œå¦‚ä½•å¤„ç†çš„ï¼Ÿ"><a href="#é‡åˆ°è¿‡å“ªäº›å…³äºFragmentçš„é—®é¢˜ï¼Œå¦‚ä½•å¤„ç†çš„ï¼Ÿ" class="headerlink" title="é‡åˆ°è¿‡å“ªäº›å…³äºFragmentçš„é—®é¢˜ï¼Œå¦‚ä½•å¤„ç†çš„ï¼Ÿ"></a>é‡åˆ°è¿‡å“ªäº›å…³äºFragmentçš„é—®é¢˜ï¼Œå¦‚ä½•å¤„ç†çš„ï¼Ÿ</h3><ul><li><p>getActivity()ç©ºæŒ‡é’ˆï¼šè¿™ç§æƒ…å†µä¸€èˆ¬å‘ç”Ÿåœ¨åœ¨å¼‚æ­¥ä»»åŠ¡é‡Œè°ƒç”¨getActivity()ï¼Œè€ŒFragmentå·²ç»onDetach()ï¼Œæ­¤æ—¶å°±ä¼šæœ‰ç©ºæŒ‡é’ˆï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åœ¨Fragmenté‡Œä½¿ç”¨<br>ä¸€ä¸ªå…¨å±€å˜é‡mActivityï¼Œåœ¨onAttach()æ–¹æ³•é‡Œèµ‹å€¼ï¼Œè¿™æ ·å¯èƒ½ä¼šå¼•èµ·å†…å­˜æ³„æ¼ï¼Œä½†æ˜¯å¼‚æ­¥ä»»åŠ¡æ²¡æœ‰åœæ­¢çš„æƒ…å†µä¸‹æœ¬èº«å°±å·²ç»å¯èƒ½å†…å­˜æ³„æ¼ï¼Œç›¸æ¯”ç›´æ¥crashï¼Œè¿™ç§æ–¹å¼<br>æ˜¾å¾—æ›´å¦¥å½“ä¸€äº›ã€‚</p></li><li><p>Fragmentè§†å›¾é‡å ï¼šåœ¨ç±»onCreate()çš„æ–¹æ³•åŠ è½½Fragmentï¼Œå¹¶ä¸”æ²¡æœ‰åˆ¤æ–­saveInstanceState==nullæˆ–if(findFragmentByTag(mFragmentTag) == null)ï¼Œå¯¼è‡´é‡å¤åŠ è½½äº†åŒä¸€ä¸ªFragmentå¯¼è‡´é‡å ã€‚ï¼ˆPSï¼šreplaceæƒ…å†µä¸‹ï¼Œå¦‚æœæ²¡æœ‰åŠ å…¥å›é€€æ ˆï¼Œåˆ™ä¸åˆ¤æ–­ä¹Ÿä¸ä¼šé€ æˆé‡å ï¼Œä½†å»ºè®®è¿˜æ˜¯ç»Ÿä¸€åˆ¤æ–­ä¸‹ï¼‰</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span> </div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(@Nullable Bundle savedInstanceState)</span> </span>&#123;</div><div class="line"><span class="comment">// åœ¨é¡µé¢é‡å¯æ—¶ï¼ŒFragmentä¼šè¢«ä¿å­˜æ¢å¤ï¼Œè€Œæ­¤æ—¶å†åŠ è½½Fragmentä¼šé‡å¤åŠ è½½ï¼Œå¯¼è‡´é‡å  ;</span></div><div class="line">    <span class="keyword">if</span>(saveInstanceState == <span class="keyword">null</span>)&#123;</div><div class="line">    <span class="comment">// æˆ–è€… if(findFragmentByTag(mFragmentTag) == null)</span></div><div class="line">       <span class="comment">// æ­£å¸¸æƒ…å†µä¸‹å» åŠ è½½æ ¹Fragment </span></div><div class="line">    &#125; </div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="Androidé‡Œçš„Intentä¼ é€’çš„æ•°æ®æœ‰å¤§å°é™åˆ¶å—ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ"><a href="#Androidé‡Œçš„Intentä¼ é€’çš„æ•°æ®æœ‰å¤§å°é™åˆ¶å—ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ" class="headerlink" title="Androidé‡Œçš„Intentä¼ é€’çš„æ•°æ®æœ‰å¤§å°é™åˆ¶å—ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ"></a>Androidé‡Œçš„Intentä¼ é€’çš„æ•°æ®æœ‰å¤§å°é™åˆ¶å—ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ</h3><p>Intentä¼ é€’æ•°æ®å¤§å°çš„é™åˆ¶å¤§æ¦‚åœ¨1Må·¦å³ï¼Œè¶…è¿‡è¿™ä¸ªé™åˆ¶å°±ä¼šé™é»˜å´©æºƒã€‚å¤„ç†æ–¹å¼å¦‚ä¸‹ï¼š</p><ul><li>è¿›ç¨‹å†…ï¼šEventBusï¼Œæ–‡ä»¶ç¼“å­˜ã€ç£ç›˜ç¼“å­˜ã€‚</li><li>è¿›ç¨‹é—´ï¼šé€šè¿‡ContentProviderè¿›è¡Œæ¬¾è¿›ç¨‹æ•°æ®å…±äº«å’Œä¼ é€’ã€‚</li></ul><h3 id="æè¿°ä¸€ä¸‹Androidçš„äº‹ä»¶åˆ†å‘æœºåˆ¶ï¼Ÿ"><a href="#æè¿°ä¸€ä¸‹Androidçš„äº‹ä»¶åˆ†å‘æœºåˆ¶ï¼Ÿ" class="headerlink" title="æè¿°ä¸€ä¸‹Androidçš„äº‹ä»¶åˆ†å‘æœºåˆ¶ï¼Ÿ"></a>æè¿°ä¸€ä¸‹Androidçš„äº‹ä»¶åˆ†å‘æœºåˆ¶ï¼Ÿ</h3><p>Androidäº‹ä»¶åˆ†å‘æœºåˆ¶çš„æœ¬è´¨ï¼šäº‹ä»¶ä»å“ªä¸ªå¯¹è±¡å‘å‡ºï¼Œç»è¿‡å“ªäº›å¯¹è±¡ï¼Œæœ€ç»ˆç”±å“ªä¸ªå¯¹è±¡å¤„ç†äº†è¯¥äº‹ä»¶ã€‚æ­¤å¤„å¯¹è±¡æŒ‡çš„æ˜¯Activityã€Windowä¸Viewã€‚</p><p>Androidäº‹ä»¶çš„åˆ†å‘é¡ºåºï¼šActivityï¼ˆWindowï¼‰ -&gt; ViewGroup -&gt; View</p><p>Androidäº‹ä»¶çš„åˆ†å‘ä¸»è¦ç”±ä¸‰ä¸ªæ–¹æ³•æ¥å®Œæˆï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// çˆ¶Viewè°ƒç”¨dispatchTouchEvent()å¼€å§‹åˆ†å‘äº‹ä»¶</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">dispatchTouchEvent</span><span class="params">(MotionEvent event)</span></span>&#123;</div><div class="line">    <span class="keyword">boolean</span> consume = <span class="keyword">false</span>;</div><div class="line">    <span class="comment">// çˆ¶Viewå†³å®šæ˜¯å¦æ‹¦æˆªäº‹ä»¶</span></div><div class="line">    <span class="keyword">if</span>(onInterceptTouchEvent(event))&#123;</div><div class="line">        <span class="comment">// çˆ¶Viewè°ƒç”¨onTouchEvent(event)æ¶ˆè´¹äº‹ä»¶ï¼Œå¦‚æœè¯¥æ–¹æ³•è¿”å›trueï¼Œè¡¨ç¤º</span></div><div class="line">        <span class="comment">// è¯¥Viewæ¶ˆè´¹äº†è¯¥äº‹ä»¶ï¼Œåç»­è¯¥äº‹ä»¶åºåˆ—çš„äº‹ä»¶ï¼ˆDownã€Moveã€Upï¼‰å°†ä¸ä¼šåœ¨ä¼ é€’</span></div><div class="line">        <span class="comment">// è¯¥å…¶ä»–Viewã€‚</span></div><div class="line">        consume = onTouchEvent(event);</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        <span class="comment">// è°ƒç”¨å­Viewçš„dispatchTouchEvent(event)æ–¹æ³•ç»§ç»­åˆ†å‘äº‹ä»¶</span></div><div class="line">        consume = child.dispatchTouchEvent(event);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> consume;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="æè¿°ä¸€ä¸‹Viewçš„ç»˜åˆ¶åŸç†ï¼Ÿ"><a href="#æè¿°ä¸€ä¸‹Viewçš„ç»˜åˆ¶åŸç†ï¼Ÿ" class="headerlink" title="æè¿°ä¸€ä¸‹Viewçš„ç»˜åˆ¶åŸç†ï¼Ÿ"></a>æè¿°ä¸€ä¸‹Viewçš„ç»˜åˆ¶åŸç†ï¼Ÿ</h3><p>Viewçš„ç»˜åˆ¶æµç¨‹ä¸»è¦åˆ†ä¸ºä¸‰æ­¥ï¼š</p><ol><li>onMeasureï¼šæµ‹é‡è§†å›¾çš„å¤§å°ï¼Œä»é¡¶å±‚çˆ¶Viewåˆ°å­Viewé€’å½’è°ƒç”¨measure()æ–¹æ³•ï¼Œmeasure()è°ƒç”¨onMeasure()æ–¹æ³•ï¼ŒonMeasure()æ–¹æ³•å®Œæˆç»˜åˆ¶å·¥ä½œã€‚</li><li>onLayoutï¼šç¡®å®šè§†å›¾çš„ä½ç½®ï¼Œä»é¡¶å±‚çˆ¶Viewåˆ°å­Viewé€’å½’è°ƒç”¨layout()æ–¹æ³•ï¼Œçˆ¶Viewå°†ä¸Šä¸€æ­¥measure()æ–¹æ³•å¾—åˆ°çš„å­Viewçš„å¸ƒå±€å¤§å°å’Œå¸ƒå±€å‚æ•°ï¼Œå°†å­Viewæ”¾åœ¨åˆé€‚çš„ä½ç½®ä¸Šã€‚</li><li>onDrawï¼šç»˜åˆ¶æœ€ç»ˆçš„è§†å›¾ï¼Œé¦–å…ˆViewRootåˆ›å»ºä¸€ä¸ªCanvaså¯¹è±¡ï¼Œç„¶åè°ƒç”¨onDraw()æ–¹æ³•è¿›è¡Œç»˜åˆ¶ã€‚onDraw()æ–¹æ³•çš„ç»˜åˆ¶æµç¨‹ä¸ºï¼šâ‘  ç»˜åˆ¶è§†å›¾èƒŒæ™¯ã€‚â‘¡ ç»˜åˆ¶ç”»å¸ƒçš„å›¾å±‚ã€‚ â‘¢ ç»˜åˆ¶Viewå†…å®¹ã€‚<br>â‘£ ç»˜åˆ¶å­è§†å›¾ï¼Œå¦‚æœæœ‰çš„è¯ã€‚â‘¤ è¿˜åŸå›¾å±‚ã€‚â‘¥ ç»˜åˆ¶æ»šåŠ¨æ¡ã€‚</li></ol><h3 id="requestLayout-ã€invalidate-ä¸postInvalidate-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#requestLayout-ã€invalidate-ä¸postInvalidate-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="requestLayout()ã€invalidate()ä¸postInvalidate()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>requestLayout()ã€invalidate()ä¸postInvalidate()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><ul><li>requestLayout()ï¼šè¯¥æ–¹æ³•ä¼šé€’å½’è°ƒç”¨çˆ¶çª—å£çš„requestLayout()æ–¹æ³•ï¼Œç›´åˆ°è§¦å‘ViewRootImplçš„performTraversals()æ–¹æ³•ï¼Œæ­¤æ—¶mLayoutRequestedeä¸ºtrueï¼Œä¼šè§¦å‘onMesaure()ä¸onLayout()æ–¹æ³•ï¼Œä¸ä¸€å®š<br>ä¼šè§¦å‘onDraw()æ–¹æ³•ã€‚</li><li>invalidate()ï¼šè¯¥æ–¹æ³•é€’å½’è°ƒç”¨çˆ¶Viewçš„invalidateChildInParent()æ–¹æ³•ï¼Œç›´åˆ°è°ƒç”¨ViewRootImplçš„invalidateChildInParent()æ–¹æ³•ï¼Œæœ€ç»ˆè§¦å‘ViewRootImplçš„performTraversals()æ–¹æ³•ï¼Œæ­¤æ—¶mLayoutRequestedeä¸ºfalseï¼Œä¸ä¼šè§¦å‘onMesaure()ä¸onLayout()æ–¹æ³•ï¼Œå½“æ—¶ä¼šè§¦å‘onDraw()æ–¹æ³•ã€‚</li><li>postInvalidate()ï¼šè¯¥æ–¹æ³•åŠŸèƒ½å’Œinvalidate()ä¸€æ ·ï¼Œåªæ˜¯å®ƒå¯ä»¥åœ¨éUIçº¿ç¨‹ä¸­è°ƒç”¨ã€‚</li></ul><p>ä¸€èˆ¬è¯´æ¥éœ€è¦é‡æ–°å¸ƒå±€å°±è°ƒç”¨requestLayout()æ–¹æ³•ï¼Œéœ€è¦é‡æ–°ç»˜åˆ¶å°±è°ƒç”¨invalidate()æ–¹æ³•ã€‚</p><h3 id="Scrollerç”¨è¿‡å—ï¼Œäº†è§£å®ƒçš„åŸç†å—ï¼Ÿ"><a href="#Scrollerç”¨è¿‡å—ï¼Œäº†è§£å®ƒçš„åŸç†å—ï¼Ÿ" class="headerlink" title="Scrollerç”¨è¿‡å—ï¼Œäº†è§£å®ƒçš„åŸç†å—ï¼Ÿ"></a>Scrollerç”¨è¿‡å—ï¼Œäº†è§£å®ƒçš„åŸç†å—ï¼Ÿ</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div></pre></td><td class="code"><pre><div class="line">//å®ä¾‹åŒ–Scrollerå¯¹è±¡ï¼Œåœ¨è‡ªå®šä¹‰Viewä¸­ï¼ŒmContextå¯ä»¥åœ¨è‡ªå®šä¹‰Viewçš„æ„é€ æ–¹æ³•ä¸­è·å–</div><div class="line">Scroller mScroller = new Scroller(mContext);</div><div class="line"></div><div class="line">//åœ¨ä¸€ä¸ªè‡ªå®šä¹‰Viewä¸­å®ç°è¯¥æ–¹æ³•ï¼Œæ–¹æ³•åå¯ä»¥è‡ªå®šä¹‰</div><div class="line">public void smoothScrollTo(int destX,int destY)&#123;</div><div class="line">    int scrollX = getScrollX();</div><div class="line">    int scrollY  = getScrollY();</div><div class="line">    int dx = destX - scrollX;</div><div class="line">    int dy = destY - scrollY;</div><div class="line">    //å‰ä¸¤ä¸ªå‚æ•°è¡¨ç¤ºèµ·å§‹ä½ç½®ï¼Œç¬¬ä¸‰ç¬¬å››ä¸ªå‚æ•°è¡¨ç¤ºä½ç§»é‡ï¼Œæœ€åä¸€ä¸ªå‚æ•°è¡¨ç¤ºæ—¶é—´</div><div class="line">    mScroller.startScroll(scrollX,scrollY,dx,dy,1000);</div><div class="line">    invalidate();</div><div class="line">&#125;</div><div class="line"></div><div class="line">//è‡ªå®šä¹‰Viewä¸­é‡å†™è¯¥æ–¹æ³•</div><div class="line">@Override</div><div class="line">public void computeScroll()&#123;</div><div class="line">    if(mScroller.computeScrollOffset())&#123;</div><div class="line">       scrollTo(mScroller.getCurrX(),mScroller.getCurrY());</div><div class="line">       postInvalidate();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">``` </div><div class="line">Scrolleræ»‘åŠ¨çš„æ•´ä¸ªè¿‡ç¨‹(å›¾ç‰‡Fromï¼šhttps://img-blog.csdn.net/20160919174056964)</div><div class="line">&lt;img src="https://img-blog.csdn.net/20160919174056964"/&gt;</div><div class="line"></div><div class="line">### äº†è§£APKçš„æ‰“åŒ…æµç¨‹å—ï¼Œæè¿°ä¸€ä¸‹ï¼Ÿ</div><div class="line"></div><div class="line">Androidçš„åŒ…æ–‡ä»¶APKåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šä»£ç å’Œèµ„æºï¼Œæ‰€ä»¥æ‰“åŒ…æ–¹é¢ä¹Ÿåˆ†ä¸ºèµ„æºæ‰“åŒ…å’Œä»£ç æ‰“åŒ…ä¸¤ä¸ªæ–¹é¢ï¼Œè¿™ç¯‡æ–‡ç« å°±æ¥åˆ†æèµ„æºå’Œä»£ç çš„ç¼–è¯‘æ‰“åŒ…åŸç†ã€‚</div><div class="line"></div><div class="line">APKæ•´ä½“çš„çš„æ‰“åŒ…æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</div><div class="line"></div><div class="line">&lt;img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/native/vm/apk_package_flow.png"/&gt;</div><div class="line"></div><div class="line">å…·ä½“è¯´æ¥ï¼š</div><div class="line"></div><div class="line">1. é€šè¿‡AAPTå·¥å…·è¿›è¡Œèµ„æºæ–‡ä»¶ï¼ˆåŒ…æ‹¬AndroidManifest.xmlã€å¸ƒå±€æ–‡ä»¶ã€å„ç§xmlèµ„æºç­‰ï¼‰çš„æ‰“åŒ…ï¼Œç”ŸæˆR.javaæ–‡ä»¶ã€‚</div><div class="line">2. é€šè¿‡AIDLå·¥å…·å¤„ç†AIDLæ–‡ä»¶ï¼Œç”Ÿæˆç›¸åº”çš„Javaæ–‡ä»¶ã€‚</div><div class="line">3. é€šè¿‡Javacå·¥å…·ç¼–è¯‘é¡¹ç›®æºç ï¼Œç”ŸæˆClassæ–‡ä»¶ã€‚</div><div class="line">4. é€šè¿‡DXå·¥å…·å°†æ‰€æœ‰çš„Classæ–‡ä»¶è½¬æ¢æˆDEXæ–‡ä»¶ï¼Œè¯¥è¿‡ç¨‹ä¸»è¦å®ŒæˆJavaå­—èŠ‚ç è½¬æ¢æˆDalvikå­—èŠ‚ç ï¼Œå‹ç¼©å¸¸é‡æ± ä»¥åŠæ¸…é™¤å†—ä½™ä¿¡æ¯ç­‰å·¥ä½œã€‚</div><div class="line">5. é€šè¿‡ApkBuilderå·¥å…·å°†èµ„æºæ–‡ä»¶ã€DEXæ–‡ä»¶æ‰“åŒ…ç”ŸæˆAPKæ–‡ä»¶ã€‚</div><div class="line">6. åˆ©ç”¨KeyStoreå¯¹ç”Ÿæˆçš„APKæ–‡ä»¶è¿›è¡Œç­¾åã€‚</div><div class="line">7. å¦‚æœæ˜¯æ­£å¼ç‰ˆçš„APKï¼Œè¿˜ä¼šåˆ©ç”¨ZipAlignå·¥å…·è¿›è¡Œå¯¹é½å¤„ç†ï¼Œå¯¹é½çš„è¿‡ç¨‹å°±æ˜¯å°†APKæ–‡ä»¶ä¸­æ‰€æœ‰çš„èµ„æºæ–‡ä»¶ä¸¾ä¾‹æ–‡ä»¶çš„èµ·å§‹è·ç¦»éƒ½åç§»4å­—èŠ‚çš„æ•´æ•°å€ï¼Œè¿™æ ·é€šè¿‡å†…å­˜æ˜ å°„è®¿é—®APKæ–‡ä»¶</div><div class="line">çš„é€Ÿåº¦ä¼šæ›´å¿«ã€‚</div><div class="line"></div><div class="line">### äº†è§£APKçš„å®‰è£…æµç¨‹å—ï¼Œæè¿°ä¸€ä¸‹ï¼Ÿ</div><div class="line"></div><div class="line">APKçš„å®‰è£…æµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š</div><div class="line"></div><div class="line">&lt;img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/app/package/apk_install_structure.png" width="600"/&gt;</div><div class="line"></div><div class="line">1. å¤åˆ¶APKåˆ°/data/appç›®å½•ä¸‹ï¼Œè§£å‹å¹¶æ‰«æå®‰è£…åŒ…ã€‚</div><div class="line">2. èµ„æºç®¡ç†å™¨è§£æAPKé‡Œçš„èµ„æºæ–‡ä»¶ã€‚</div><div class="line">3. è§£æAndroidManifestæ–‡ä»¶ï¼Œå¹¶åœ¨/data/data/ç›®å½•ä¸‹åˆ›å»ºå¯¹åº”çš„åº”ç”¨æ•°æ®ç›®å½•ã€‚</div><div class="line">4. ç„¶åå¯¹dexæ–‡ä»¶è¿›è¡Œä¼˜åŒ–ï¼Œå¹¶ä¿å­˜åœ¨dalvik-cacheç›®å½•ä¸‹ã€‚</div><div class="line">5. å°†AndroidManifestæ–‡ä»¶è§£æå‡ºçš„å››å¤§ç»„ä»¶ä¿¡æ¯æ³¨å†Œåˆ°PackageManagerServiceä¸­ã€‚</div><div class="line">5. å®‰è£…å®Œæˆåï¼Œå‘é€å¹¿æ’­ã€‚</div><div class="line"></div><div class="line">### å½“ç‚¹å‡»ä¸€ä¸ªåº”ç”¨å›¾æ ‡ä»¥åï¼Œéƒ½å‘ç”Ÿäº†ä»€ä¹ˆï¼Œæè¿°ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ï¼Ÿ</div><div class="line"></div><div class="line">ç‚¹å‡»åº”ç”¨å›¾æ ‡åä¼šå»å¯åŠ¨åº”ç”¨çš„LauncherActivityï¼Œå¦‚æœLancerActivityæ‰€åœ¨çš„è¿›ç¨‹æ²¡æœ‰åˆ›å»ºï¼Œè¿˜ä¼šåˆ›å»ºæ–°è¿›ç¨‹ï¼Œæ•´ä½“çš„æµç¨‹å°±æ˜¯ä¸€ä¸ªActivityçš„å¯åŠ¨æµç¨‹ã€‚</div><div class="line"></div><div class="line">Activityçš„å¯åŠ¨æµç¨‹å›¾ï¼ˆæ”¾å¤§å¯æŸ¥çœ‹ï¼‰å¦‚ä¸‹æ‰€ç¤ºï¼š</div><div class="line"></div><div class="line">![Activityçš„å¯åŠ¨æµç¨‹å›¾](https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/app/component/activity_start_flow.png)</div><div class="line"></div><div class="line">æ•´ä¸ªæµç¨‹æ¶‰åŠçš„ä¸»è¦è§’è‰²æœ‰ï¼š</div><div class="line"></div><div class="line">- Instrumentation: ç›‘æ§åº”ç”¨ä¸ç³»ç»Ÿç›¸å…³çš„äº¤äº’è¡Œä¸ºã€‚</div><div class="line">- AMSï¼šç»„ä»¶ç®¡ç†è°ƒåº¦ä¸­å¿ƒï¼Œä»€ä¹ˆéƒ½ä¸å¹²ï¼Œä½†æ˜¯ä»€ä¹ˆéƒ½ç®¡ã€‚</div><div class="line">- ActivityStarterï¼šActivityå¯åŠ¨çš„æ§åˆ¶å™¨ï¼Œå¤„ç†Intentä¸Flagå¯¹Activityå¯åŠ¨çš„å½±å“ï¼Œå…·ä½“è¯´æ¥æœ‰ï¼š1 å¯»æ‰¾ç¬¦åˆå¯åŠ¨æ¡ä»¶çš„Activityï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œè®©ç”¨æˆ·é€‰æ‹©ï¼›2 æ ¡éªŒå¯åŠ¨å‚æ•°çš„åˆæ³•æ€§ï¼›3 è¿”å›intå‚æ•°ï¼Œä»£è¡¨Activityæ˜¯å¦å¯åŠ¨æˆåŠŸã€‚</div><div class="line">- ActivityStackSupervisiorï¼šè¿™ä¸ªç±»çš„ä½œç”¨ä½ ä»å®ƒçš„åå­—å°±å¯ä»¥çœ‹å‡ºæ¥ï¼Œå®ƒç”¨æ¥ç®¡ç†ä»»åŠ¡æ ˆã€‚</div><div class="line">- ActivityStackï¼šç”¨æ¥ç®¡ç†ä»»åŠ¡æ ˆé‡Œçš„Activityã€‚</div><div class="line">- ActivityThreadï¼šæœ€ç»ˆå¹²æ´»çš„äººï¼Œæ˜¯ActivityThreadçš„å†…éƒ¨ç±»ï¼ŒActivityã€Serviceã€BroadcastReceiverçš„å¯åŠ¨ã€åˆ‡æ¢ã€è°ƒåº¦ç­‰å„ç§æ“ä½œéƒ½åœ¨è¿™ä¸ªç±»é‡Œå®Œæˆã€‚</div><div class="line"></div><div class="line">æ³¨ï¼šè¿™é‡Œå•ç‹¬æä¸€ä¸‹ActivityStackSupervisiorï¼Œè¿™æ˜¯é«˜ç‰ˆæœ¬æ‰æœ‰çš„ç±»ï¼Œå®ƒç”¨æ¥ç®¡ç†å¤šä¸ªActivityStackï¼Œæ—©æœŸçš„ç‰ˆæœ¬åªæœ‰ä¸€ä¸ªActivityStackå¯¹åº”ç€æ‰‹æœºå±å¹•ï¼Œåæ¥é«˜ç‰ˆæœ¬æ”¯æŒå¤šå±ä»¥åï¼Œå°±</div><div class="line">æœ‰äº†å¤šä¸ªActivityStackï¼Œäºæ˜¯å°±å¼•å…¥äº†ActivityStackSupervisiorç”¨æ¥ç®¡ç†å¤šä¸ªActivityStackã€‚</div><div class="line"></div><div class="line">æ•´ä¸ªæµç¨‹ä¸»è¦æ¶‰åŠå››ä¸ªè¿›ç¨‹ï¼š</div><div class="line"></div><div class="line">- è°ƒç”¨è€…è¿›ç¨‹ï¼Œå¦‚æœæ˜¯åœ¨æ¡Œé¢å¯åŠ¨åº”ç”¨å°±æ˜¯Launcheråº”ç”¨è¿›ç¨‹ã€‚</div><div class="line">- ActivityManagerServiceç­‰æ‰€åœ¨çš„System Serverè¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹ä¸»è¦è¿è¡Œç€ç³»ç»ŸæœåŠ¡ç»„ä»¶ã€‚</div><div class="line">- Zygoteè¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹ä¸»è¦ç”¨æ¥forkæ–°è¿›ç¨‹ã€‚</div><div class="line">- æ–°å¯åŠ¨çš„åº”ç”¨è¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹å°±æ˜¯ç”¨æ¥æ‰¿è½½åº”ç”¨è¿è¡Œçš„è¿›ç¨‹äº†ï¼Œå®ƒä¹Ÿæ˜¯åº”ç”¨çš„ä¸»çº¿ç¨‹ï¼ˆæ–°åˆ›å»ºçš„è¿›ç¨‹å°±æ˜¯ä¸»çº¿ç¨‹ï¼‰ï¼Œå¤„ç†ç»„ä»¶ç”Ÿå‘½å‘¨æœŸã€ç•Œé¢ç»˜åˆ¶ç­‰ç›¸å…³äº‹æƒ…ã€‚</div><div class="line">![img](http://upload-images.jianshu.io/upload_images/3985563-b7edc7b70c9c332f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</div><div class="line">æœ‰äº†ä»¥ä¸Šçš„ç†è§£ï¼Œæ•´ä¸ªæµç¨‹å¯ä»¥æ¦‚æ‹¬å¦‚ä¸‹ï¼š</div><div class="line"></div><div class="line">1. ç‚¹å‡»æ¡Œé¢åº”ç”¨å›¾æ ‡ï¼ŒLauncherè¿›ç¨‹å°†å¯åŠ¨Activityï¼ˆMainActivityï¼‰çš„è¯·æ±‚ä»¥Binderçš„æ–¹å¼å‘é€ç»™äº†AMSã€‚</div><div class="line">2. AMSæ¥æ”¶åˆ°å¯åŠ¨è¯·æ±‚åï¼Œäº¤ä»˜ActivityStarterå¤„ç†Intentå’ŒFlagç­‰ä¿¡æ¯ï¼Œç„¶åå†äº¤ç»™ActivityStackSupervisior/ActivityStack</div><div class="line">å¤„ç†Activityè¿›æ ˆç›¸å…³æµç¨‹ã€‚åŒæ—¶ä»¥Socketæ–¹å¼è¯·æ±‚Zygoteè¿›ç¨‹forkæ–°è¿›ç¨‹ã€‚</div><div class="line">3. Zygoteæ¥æ”¶åˆ°æ–°è¿›ç¨‹åˆ›å»ºè¯·æ±‚åforkå‡ºæ–°è¿›ç¨‹ã€‚</div><div class="line">4. åœ¨æ–°è¿›ç¨‹é‡Œåˆ›å»ºActivityThreadå¯¹è±¡ï¼Œæ–°åˆ›å»ºçš„è¿›ç¨‹å°±æ˜¯åº”ç”¨çš„ä¸»çº¿ç¨‹ï¼Œåœ¨ä¸»çº¿ç¨‹é‡Œå¼€å¯Looperæ¶ˆæ¯å¾ªç¯ï¼Œå¼€å§‹å¤„ç†åˆ›å»ºActivityã€‚</div><div class="line">5. ActivityThreadåˆ©ç”¨ClassLoaderå»åŠ è½½Activityã€åˆ›å»ºActivityå®ä¾‹ï¼Œå¹¶å›è°ƒActivityçš„onCreate()æ–¹æ³•ã€‚è¿™æ ·ä¾¿å®Œæˆäº†Activityçš„å¯åŠ¨ã€‚</div><div class="line"></div><div class="line">### BroadcastReceiverä¸LocalBroadcastReceiveræœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</div><div class="line"></div><div class="line">- BroadcastReceiver æ˜¯è·¨åº”ç”¨å¹¿æ’­ï¼Œåˆ©ç”¨Binderæœºåˆ¶å®ç°ã€‚</div><div class="line">- LocalBroadcastReceiver æ˜¯åº”ç”¨å†…å¹¿æ’­ï¼Œåˆ©ç”¨Handlerå®ç°ï¼Œåˆ©ç”¨äº†IntentFilterçš„matchåŠŸèƒ½ï¼Œæä¾›æ¶ˆæ¯çš„å‘å¸ƒä¸æ¥æ”¶åŠŸèƒ½ï¼Œå®ç°åº”ç”¨å†…é€šä¿¡ï¼Œæ•ˆç‡æ¯”è¾ƒé«˜ã€‚</div><div class="line"></div><div class="line">### Android Handleræœºåˆ¶æ˜¯åšä»€ä¹ˆçš„ï¼ŒåŸç†äº†è§£å—ï¼Ÿ</div><div class="line"></div><div class="line">Androidæ¶ˆæ¯å¾ªç¯æµç¨‹å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</div><div class="line"></div><div class="line">&lt;img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/native/process/android_handler_structure.png"/&gt;</div><div class="line"></div><div class="line">ä¸»è¦æ¶‰åŠçš„è§’è‰²å¦‚ä¸‹æ‰€ç¤ºï¼š</div><div class="line"></div><div class="line">- Messageï¼šæ¶ˆæ¯ï¼Œåˆ†ä¸ºç¡¬ä»¶äº§ç”Ÿçš„æ¶ˆæ¯ï¼ˆä¾‹å¦‚ï¼šæŒ‰é’®ã€è§¦æ‘¸ï¼‰å’Œè½¯ä»¶äº§ç”Ÿçš„æ¶ˆæ¯ã€‚</div><div class="line">- MessageQueueï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¸»è¦ç”¨æ¥å‘æ¶ˆæ¯æ± æ·»åŠ æ¶ˆæ¯å’Œå–èµ°æ¶ˆæ¯ã€‚</div><div class="line">- Looperï¼šæ¶ˆæ¯å¾ªç¯å™¨ï¼Œä¸»è¦ç”¨æ¥æŠŠæ¶ˆæ¯åˆ†å‘ç»™ç›¸åº”çš„å¤„ç†è€…ã€‚</div><div class="line">- Handlerï¼šæ¶ˆæ¯å¤„ç†å™¨ï¼Œä¸»è¦å‘æ¶ˆæ¯é˜Ÿåˆ—å‘é€å„ç§æ¶ˆæ¯ä»¥åŠå¤„ç†å„ç§æ¶ˆæ¯ã€‚</div><div class="line"></div><div class="line">æ•´ä¸ªæ¶ˆæ¯çš„å¾ªç¯æµç¨‹è¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°çš„ï¼Œå…·ä½“è¯´æ¥ï¼š</div><div class="line"></div><div class="line">1. Handleré€šè¿‡sendMessage()å‘é€æ¶ˆæ¯Messageåˆ°æ¶ˆæ¯é˜Ÿåˆ—MessageQueueã€‚</div><div class="line">2. Looperé€šè¿‡loop()ä¸æ–­æå–è§¦å‘æ¡ä»¶çš„Messageï¼Œå¹¶å°†Messageäº¤ç»™å¯¹åº”çš„target handleræ¥å¤„ç†ã€‚</div><div class="line">3. target handlerè°ƒç”¨è‡ªèº«çš„handleMessage()æ–¹æ³•æ¥å¤„ç†Messageã€‚</div><div class="line"></div><div class="line">äº‹å®ä¸Šï¼Œåœ¨æ•´ä¸ªæ¶ˆæ¯å¾ªç¯çš„æµç¨‹ä¸­ï¼Œå¹¶ä¸åªæœ‰Javaå±‚å‚ä¸ï¼Œå¾ˆå¤šé‡è¦çš„å·¥ä½œéƒ½æ˜¯åœ¨C++å±‚æ¥å®Œæˆçš„ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹è¿™äº›ç±»çš„è°ƒç”¨å…³ç³»ã€‚</div><div class="line"></div><div class="line">&lt;img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/native/process/android_handler_class.png"/&gt;</div><div class="line"></div><div class="line">æ³¨ï¼šè™šçº¿è¡¨ç¤ºå…³è”å…³ç³»ï¼Œå®çº¿è¡¨ç¤ºè°ƒç”¨å…³ç³»ã€‚</div><div class="line"></div><div class="line">åœ¨è¿™äº›ç±»ä¸­MessageQueueæ˜¯Javaå±‚ä¸C++å±‚ç»´ç³»çš„æ¡¥æ¢ï¼ŒMessageQueueä¸Looperç›¸å…³åŠŸèƒ½éƒ½é€šè¿‡MessageQueueçš„Nativeæ–¹æ³•æ¥å®Œæˆï¼Œè€Œå…¶ä»–è™šçº¿è¿æ¥çš„ç±»åªæœ‰å…³è”å…³ç³»ï¼Œå¹¶æ²¡æœ‰</div><div class="line">ç›´æ¥è°ƒç”¨çš„å…³ç³»ï¼Œå®ƒä»¬å‘ç”Ÿå…³è”çš„æ¡¥æ¢æ˜¯MessageQueueã€‚</div><div class="line"></div><div class="line">### Android Binderæœºåˆ¶æ˜¯åšä»€ä¹ˆçš„ï¼Œä¸ºä»€ä¹ˆé€‰ç”¨Binderï¼ŒåŸç†äº†è§£å—ï¼Ÿ</div><div class="line"></div><div class="line">Android Binderæ˜¯ç”¨æ¥åšè¿›ç¨‹é€šä¿¡çš„ï¼ŒAndroidçš„å„ä¸ªåº”ç”¨ä»¥åŠç³»ç»ŸæœåŠ¡éƒ½è¿è¡Œåœ¨ç‹¬ç«‹çš„è¿›ç¨‹ä¸­ï¼Œå®ƒä»¬çš„é€šä¿¡éƒ½ä¾èµ–äºBinderã€‚</div><div class="line"></div><div class="line">ä¸ºä»€ä¹ˆé€‰ç”¨Binderï¼Œåœ¨è®¨è®ºè¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬çŸ¥é“Androidä¹Ÿæ˜¯åŸºäºLinuxå†…æ ¸ï¼ŒLinuxç°æœ‰çš„è¿›ç¨‹é€šä¿¡æ‰‹æ®µæœ‰ä»¥ä¸‹å‡ ç§ï¼š</div><div class="line"></div><div class="line">1. ç®¡é“ï¼šåœ¨åˆ›å»ºæ—¶åˆ†é…ä¸€ä¸ªpageå¤§å°çš„å†…å­˜ï¼Œç¼“å­˜åŒºå¤§å°æ¯”è¾ƒæœ‰é™ï¼›</div><div class="line">2. æ¶ˆæ¯é˜Ÿåˆ—ï¼šä¿¡æ¯å¤åˆ¶ä¸¤æ¬¡ï¼Œé¢å¤–çš„CPUæ¶ˆè€—ï¼›ä¸åˆé€‚é¢‘ç¹æˆ–ä¿¡æ¯é‡å¤§çš„é€šä¿¡ï¼›</div><div class="line">3. å…±äº«å†…å­˜ï¼šæ— é¡»å¤åˆ¶ï¼Œå…±äº«ç¼“å†²åŒºç›´æ¥ä»˜é™„åŠ åˆ°è¿›ç¨‹è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œé€Ÿåº¦å¿«ï¼›ä½†è¿›ç¨‹é—´çš„åŒæ­¥é—®é¢˜æ“ä½œç³»ç»Ÿæ— æ³•å®ç°ï¼Œå¿…é¡»å„è¿›ç¨‹åˆ©ç”¨åŒæ­¥å·¥å…·è§£å†³ï¼›</div><div class="line">4. å¥—æ¥å­—ï¼šä½œä¸ºæ›´é€šç”¨çš„æ¥å£ï¼Œä¼ è¾“æ•ˆç‡ä½ï¼Œä¸»è¦ç”¨äºä¸é€šæœºå™¨æˆ–è·¨ç½‘ç»œçš„é€šä¿¡ï¼›</div><div class="line">5. ä¿¡å·é‡ï¼šå¸¸ä½œä¸ºä¸€ç§é”æœºåˆ¶ï¼Œé˜²æ­¢æŸè¿›ç¨‹æ­£åœ¨è®¿é—®å…±äº«èµ„æºæ—¶ï¼Œå…¶ä»–è¿›ç¨‹ä¹Ÿè®¿é—®è¯¥èµ„æºã€‚å› æ­¤ï¼Œä¸»è¦ä½œä¸ºè¿›ç¨‹é—´ä»¥åŠåŒä¸€è¿›ç¨‹å†…ä¸åŒçº¿ç¨‹ä¹‹é—´çš„åŒæ­¥æ‰‹æ®µã€‚</div><div class="line">6. ä¿¡å·: ä¸é€‚ç”¨äºä¿¡æ¯äº¤æ¢ï¼Œæ›´é€‚ç”¨äºè¿›ç¨‹ä¸­æ–­æ§åˆ¶ï¼Œæ¯”å¦‚éæ³•å†…å­˜è®¿é—®ï¼Œæ€æ­»æŸä¸ªè¿›ç¨‹ç­‰ï¼›</div><div class="line"></div><div class="line">æ—¢ç„¶æœ‰ç°æœ‰çš„IPCæ–¹å¼ï¼Œä¸ºä»€ä¹ˆé‡æ–°è®¾è®¡ä¸€å¥—Binderæœºåˆ¶å‘¢ã€‚ä¸»è¦æ˜¯å‡ºäºä»¥ä¸Šä¸‰ä¸ªæ–¹é¢çš„è€ƒé‡ï¼š</div><div class="line"></div><div class="line">- é«˜æ€§èƒ½ï¼šä»æ•°æ®æ‹·è´æ¬¡æ•°æ¥çœ‹Binderåªéœ€è¦è¿›è¡Œä¸€æ¬¡å†…å­˜æ‹·è´ï¼Œè€Œç®¡é“ã€æ¶ˆæ¯é˜Ÿåˆ—ã€Socketéƒ½éœ€è¦ä¸¤æ¬¡ï¼Œå…±äº«å†…å­˜ä¸éœ€è¦æ‹·è´ï¼ŒBinderçš„æ€§èƒ½ä»…æ¬¡äºå…±äº«å†…å­˜ã€‚</div><div class="line">- ç¨³å®šæ€§ï¼šä¸Šé¢è¯´åˆ°å…±äº«å†…å­˜çš„æ€§èƒ½ä¼˜äºBinderï¼Œé‚£ä¸ºä»€ä¹ˆä¸é€‚ç”¨å…±äº«å†…å­˜å‘¢ï¼Œå› ä¸ºå…±äº«å†…å­˜éœ€è¦å¤„ç†å¹¶å‘åŒæ­¥é—®é¢˜ï¼Œæ§åˆ¶è´Ÿè´£ï¼Œå®¹æ˜“å‡ºç°æ­»é”å’Œèµ„æºç«äº‰ï¼Œç¨³å®šæ€§è¾ƒå·®ã€‚è€ŒBinderåŸºäºC/Sæ¶æ„ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯å½¼æ­¤ç‹¬ç«‹ï¼Œç¨³å®šæ€§è¾ƒå¥½ã€‚</div><div class="line">- å®‰å…¨æ€§ï¼šæˆ‘ä»¬çŸ¥é“Androidä¸ºæ¯ä¸ªåº”ç”¨åˆ†é…äº†UIDï¼Œç”¨æ¥ä½œä¸ºé‰´åˆ«è¿›ç¨‹çš„é‡è¦æ ‡å¿—ï¼ŒAndroidå†…éƒ¨ä¹Ÿä¾èµ–è¿™ä¸ªUIDè¿›è¡Œæƒé™ç®¡ç†ï¼ŒåŒ…æ‹¬6.0ä»¥å‰çš„å›ºå®šæƒé™å’Œ6.0ä»¥åçš„åŠ¨æ€æƒé™ï¼Œä¼ é€IPCåªèƒ½ç”±ç”¨æˆ·åœ¨æ•°æ®åŒ…é‡Œå¡«å…¥UID/PIDï¼Œè¿™ä¸ªæ ‡è®°å®Œå…¨æ˜¯åœ¨ç”¨æˆ·ç©ºé—´æ§åˆ¶çš„ï¼Œæ²¡æœ‰æ”¾åœ¨å†…æ ¸ç©ºé—´ï¼Œå› æ­¤æœ‰è¢«æ¶æ„ç¯¡æ”¹çš„å¯èƒ½ï¼Œå› æ­¤Binderçš„å®‰å…¨æ€§æ›´é«˜ã€‚</div><div class="line"></div><div class="line">### æè¿°ä¸€ä¸‹Activityçš„ç”Ÿå‘½å‘¨æœŸï¼Œè¿™äº›ç”Ÿå‘½å‘¨æœŸæ˜¯å¦‚ä½•ç®¡ç†çš„ï¼Ÿ</div><div class="line"></div><div class="line">Activityä¸Fragmentç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹æ‰€ç¤ºï¼š</div><div class="line"></div><div class="line">&lt;img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/app/component/complete_android_fragment_lifecycle.png"/&gt;</div><div class="line"></div><div class="line">è¯»è€…å¯ä»¥ä»ä¸Šå›¾çœ‹å‡ºï¼ŒActivityæœ‰å¾ˆå¤šç§çŠ¶æ€ï¼ŒçŠ¶æ€ä¹‹é—´çš„å˜åŒ–ä¹Ÿæ¯”è¾ƒå¤æ‚ï¼Œåœ¨ä¼—å¤šçŠ¶æ€ä¸­ï¼Œåªæœ‰ä¸‰ç§æ˜¯å¸¸é©»çŠ¶æ€ï¼š</div><div class="line"></div><div class="line">- Resumedï¼ˆè¿è¡ŒçŠ¶æ€ï¼‰ï¼šActivityå¤„äºå‰å°ï¼Œç”¨æˆ·å¯ä»¥ä¸å…¶äº¤äº’ã€‚</div><div class="line">- Pausedï¼ˆæš‚åœçŠ¶æ€ï¼‰ï¼šActivityè¢«å…¶ä»–Activityéƒ¨åˆ†é®æŒ¡ï¼Œæ— æ³•æ¥å—ç”¨æˆ·çš„è¾“å…¥ã€‚</div><div class="line">- Stoppedï¼ˆåœæ­¢çŠ¶æ€ï¼‰ï¼šActivityè¢«å®Œå…¨éšè—ï¼Œå¯¹ç”¨æˆ·ä¸å¯è§ï¼Œè¿›å…¥åå°ã€‚</div><div class="line"></div><div class="line">å…¶ä»–çš„çŠ¶æ€éƒ½æ˜¯ä¸­é—´çŠ¶æ€ã€‚</div><div class="line"></div><div class="line">æˆ‘ä»¬å†æ¥çœ‹çœ‹ç”Ÿå‘½å‘¨æœŸå˜åŒ–æ—¶çš„æ•´ä¸ªè°ƒåº¦æµç¨‹ï¼Œç”Ÿå‘½å‘¨æœŸè°ƒåº¦æµç¨‹å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</div><div class="line"></div><div class="line">&lt;img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/app/component/activity_lifecycle_structure.png" /&gt;</div><div class="line"></div><div class="line">æ‰€ä»¥ä½ å¯ä»¥çœ‹åˆ°ï¼Œæ•´ä¸ªæµç¨‹æ˜¯è¿™æ ·çš„ï¼š</div><div class="line"></div><div class="line">1. æ¯”æ–¹è¯´æˆ‘ä»¬ç‚¹å‡»è·³è½¬ä¸€ä¸ªæ–°Activityï¼Œè¿™ä¸ªæ—¶å€™Activityä¼šå…¥æ ˆï¼ŒåŒæ—¶å®ƒçš„ç”Ÿå‘½å‘¨æœŸä¹Ÿä¼šä»onCreate()åˆ°onResume()å¼€å§‹å˜æ¢ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯åœ¨ActivityStacké‡Œå®Œæˆçš„ï¼ŒActivityStack</div><div class="line">æ˜¯è¿è¡Œåœ¨Serverè¿›ç¨‹é‡Œçš„ï¼Œè¿™ä¸ªæ—¶å€™Serverè¿›ç¨‹å°±é€šè¿‡ApplicationThreadçš„ä»£ç†å¯¹è±¡ApplicationThreadProxyå‘è¿è¡Œåœ¨appè¿›ç¨‹ApplicationThreadå‘èµ·æ“ä½œè¯·æ±‚ã€‚</div><div class="line">2. ApplicationThreadæ¥æ”¶åˆ°æ“ä½œè¯·æ±‚åï¼Œå› ä¸ºå®ƒæ˜¯è¿è¡Œåœ¨appè¿›ç¨‹é‡Œçš„å…¶ä»–çº¿ç¨‹é‡Œï¼Œæ‰€ä»¥ApplicationThreadéœ€è¦é€šè¿‡Handlerå‘ä¸»çº¿ç¨‹ActivityThreadå‘é€æ“ä½œæ¶ˆæ¯ã€‚</div><div class="line">3. ä¸»çº¿ç¨‹æ¥æ”¶åˆ°ApplicationThreadå‘å‡ºçš„æ¶ˆæ¯åï¼Œè°ƒç”¨ä¸»çº¿ç¨‹ActivityThreadæ‰§è¡Œå“åº”çš„æ“ä½œï¼Œå¹¶å›è°ƒActivityç›¸åº”çš„å‘¨æœŸæ–¹æ³•ã€‚</div><div class="line"></div><div class="line">æ³¨ï¼šè¿™é‡Œæåˆ°äº†ä¸»çº¿ç¨‹ActivityThreadï¼Œæ›´å‡†ç¡®æ¥è¯´ActivityThreadä¸æ˜¯çº¿ç¨‹ï¼Œå› ä¸ºå®ƒæ²¡æœ‰ç»§æ‰¿Threadç±»æˆ–è€…å®ç°Runnableæ¥å£ï¼Œå®ƒæ˜¯è¿è¡Œåœ¨åº”ç”¨ä¸»çº¿ç¨‹é‡Œçš„å¯¹è±¡ï¼Œé‚£ä¹ˆåº”ç”¨çš„ä¸»çº¿ç¨‹</div><div class="line">åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä»æœ¬è´¨ä¸Šæ¥è®²å¯åŠ¨å¯åŠ¨æ—¶åˆ›å»ºçš„è¿›ç¨‹å°±æ˜¯ä¸»çº¿ç¨‹ï¼Œçº¿ç¨‹å’Œè¿›ç¨‹å¤„ç†æ˜¯å¦å…±äº«èµ„æºå¤–ï¼Œæ²¡æœ‰å…¶ä»–çš„åŒºåˆ«ï¼Œå¯¹äºLinuxæ¥è¯´ï¼Œå®ƒä»¬éƒ½åªæ˜¯ä¸€ä¸ªstructç»“æ„ä½“ã€‚</div><div class="line"></div><div class="line">### Activityçš„é€šä¿¡æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</div><div class="line"></div><div class="line">- startActivityForResult</div><div class="line">- EventBus</div><div class="line">- LocalBroadcastReceiver</div><div class="line"></div><div class="line">### Androidåº”ç”¨é‡Œæœ‰å‡ ç§Contextå¯¹è±¡ï¼Œ</div><div class="line"></div><div class="line">Contextç±»å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</div><div class="line"></div><div class="line">&lt;img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/app/component/context_uml.png" width="600" /&gt;</div><div class="line"></div><div class="line">å¯ä»¥å‘ç°Contextæ˜¯ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒçš„å…·ä½“å®ç°ç±»æ˜¯ContextImplï¼ŒContextWrapperæ˜¯ä¸ªåŒ…è£…ç±»ï¼Œå†…éƒ¨çš„æˆå‘˜å˜é‡mBaseæŒ‡å‘çš„ä¹Ÿæ˜¯ä¸ªContextImplå¯¹è±¡ï¼ŒContextImplå®Œæˆäº†</div><div class="line">å®é™…çš„åŠŸèƒ½ï¼ŒActivityã€Serviceä¸Applicationéƒ½ç›´æ¥æˆ–è€…é—´æ¥çš„ç»§æ‰¿ContextWrapperã€‚</div><div class="line"></div><div class="line">### æè¿°ä¸€ä¸‹è¿›ç¨‹å’ŒApplicationçš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ</div><div class="line"></div><div class="line">ä¸€ä¸ªå®‰è£…çš„åº”ç”¨å¯¹åº”ä¸€ä¸ªLoadedApkå¯¹è±¡ï¼Œå¯¹åº”ä¸€ä¸ªApplicationå¯¹è±¡ï¼Œå¯¹äºå››å¤§ç»„ä»¶ï¼ŒApplicationçš„åˆ›å»ºå’Œè·å–æ–¹å¼ä¹Ÿæ˜¯ä¸å°½ç›¸åŒçš„ï¼Œå…·ä½“è¯´æ¥ï¼š</div><div class="line"></div><div class="line">- Activityï¼šé€šè¿‡LoadedApkçš„makeApplication()æ–¹æ³•åˆ›å»ºã€‚</div><div class="line">- Serviceï¼šé€šè¿‡LoadedApkçš„makeApplication()æ–¹æ³•åˆ›å»ºã€‚</div><div class="line">- é™æ€å¹¿æ’­ï¼šé€šè¿‡å…¶å›è°ƒæ–¹æ³•onReceive()æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å‘Applicationã€‚</div><div class="line">- ContentProviderï¼šæ— æ³•è·å–Applicationï¼Œå› æ­¤æ­¤æ—¶Applicationä¸ä¸€å®šå·²ç»åˆå§‹åŒ–ã€‚</div><div class="line"></div><div class="line">### Androidå“ªäº›æƒ…å†µä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œå¦‚ä½•åˆ†æå†…å­˜æ³„æ¼ï¼Ÿ</div><div class="line"></div><div class="line">å¸¸è§çš„äº§ç”Ÿå†…å­˜æ³„æ¼çš„æƒ…å†µå¦‚ä¸‹æ‰€ç¤ºï¼š</div><div class="line"></div><div class="line">- æŒæœ‰é™æ€çš„Contextï¼ˆActivityï¼‰å¼•ç”¨ã€‚</div><div class="line">- æŒæœ‰é™æ€çš„Viewå¼•ç”¨ï¼Œ</div><div class="line">- å†…éƒ¨ç±»&amp;åŒ¿åå†…éƒ¨ç±»å®ä¾‹æ— æ³•é‡Šæ”¾ï¼ˆæœ‰å»¶è¿Ÿæ—¶é—´ç­‰ç­‰ï¼‰ï¼Œè€Œå†…éƒ¨ç±»åˆæŒæœ‰å¤–éƒ¨ç±»çš„å¼ºå¼•ç”¨ï¼Œå¯¼è‡´å¤–éƒ¨ç±»æ— æ³•é‡Šæ”¾ï¼Œè¿™ç§åŒ¿åå†…éƒ¨ç±»å¸¸è§äºç›‘å¬å™¨ã€Handlerã€Threadã€TimerTask</div><div class="line">- èµ„æºä½¿ç”¨å®Œæˆåæ²¡æœ‰å…³é—­ï¼Œä¾‹å¦‚ï¼šBraodcastReceiverï¼ŒContentObserverï¼ŒFileï¼ŒCursorï¼ŒStreamï¼ŒBitmapã€‚</div><div class="line">- ä¸æ­£ç¡®çš„å•ä¾‹æ¨¡å¼ï¼Œæ¯”å¦‚å•ä¾‹æŒæœ‰Activityã€‚</div><div class="line">- é›†åˆç±»å†…å­˜æ³„æ¼ï¼Œå¦‚æœä¸€ä¸ªé›†åˆç±»æ˜¯é™æ€çš„ï¼ˆç¼“å­˜HashMapï¼‰ï¼Œåªæœ‰æ·»åŠ æ–¹æ³•ï¼Œæ²¡æœ‰å¯¹åº”çš„åˆ é™¤æ–¹æ³•ï¼Œä¼šå¯¼è‡´å¼•ç”¨æ— æ³•è¢«é‡Šæ”¾ï¼Œå¼•å‘å†…å­˜æ³„æ¼ã€‚</div><div class="line">- é”™è¯¯çš„è¦†å†™äº†finalize()æ–¹æ³•ï¼Œfinalize()æ–¹æ³•æ‰§è¡Œæ‰§è¡Œä¸ç¡®å®šï¼Œå¯èƒ½ä¼šå¯¼è‡´å¼•ç”¨æ— æ³•è¢«é‡Šæ”¾ã€‚</div><div class="line"></div><div class="line">æŸ¥æ‰¾å†…å­˜æ³„æ¼å¯ä»¥ä½¿ç”¨Android Profilerå·¥å…·æˆ–è€…åˆ©ç”¨LeakCanaryå·¥å…·ã€‚</div><div class="line"></div><div class="line">### Androidæœ‰å“ªå‡ ç§è¿›ç¨‹ï¼Œæ˜¯å¦‚ä½•ç®¡ç†çš„ï¼Ÿ</div><div class="line"></div><div class="line">Androidçš„è¿›ç¨‹ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š</div><div class="line"></div><div class="line">**å‰å°è¿›ç¨‹**</div><div class="line"></div><div class="line">ç”¨æˆ·å½“å‰æ“ä½œæ‰€å¿…éœ€çš„è¿›ç¨‹ã€‚å¦‚æœä¸€ä¸ªè¿›ç¨‹æ»¡è¶³ä»¥ä¸‹ä»»ä¸€æ¡ä»¶ï¼Œå³è§†ä¸ºå‰å°è¿›ç¨‹ï¼š</div><div class="line"></div><div class="line">- æ‰˜ç®¡ç”¨æˆ·æ­£åœ¨äº¤äº’çš„ Activityï¼ˆå·²è°ƒç”¨ Activity çš„ onResume() æ–¹æ³•ï¼‰</div><div class="line">- æ‰˜ç®¡æŸä¸ª Serviceï¼Œåè€…ç»‘å®šåˆ°ç”¨æˆ·æ­£åœ¨äº¤äº’çš„ Activity</div><div class="line">- æ‰˜ç®¡æ­£åœ¨â€œå‰å°â€è¿è¡Œçš„ Serviceï¼ˆæœåŠ¡å·²è°ƒç”¨ startForeground()ï¼‰</div><div class="line">- æ‰˜ç®¡æ­£æ‰§è¡Œä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå›è°ƒçš„ Serviceï¼ˆonCreate()ã€onStart() æˆ– onDestroy()ï¼‰</div><div class="line">- æ‰˜ç®¡æ­£æ‰§è¡Œå…¶ onReceive() æ–¹æ³•çš„ BroadcastReceiver</div><div class="line"></div><div class="line">é€šå¸¸ï¼Œåœ¨ä»»æ„ç»™å®šæ—¶é—´å‰å°è¿›ç¨‹éƒ½ä¸ºæ•°ä¸å¤šã€‚åªæœ‰åœ¨å†…å­˜ä¸è¶³ä»¥æ”¯æŒå®ƒä»¬åŒæ—¶ç»§ç»­è¿è¡Œè¿™ä¸€ä¸‡ä¸å¾—å·²çš„æƒ…å†µä¸‹ï¼Œç³»ç»Ÿæ‰ä¼šç»ˆæ­¢å®ƒä»¬ã€‚ æ­¤æ—¶ï¼Œè®¾å¤‡å¾€å¾€å·²è¾¾åˆ°å†…å­˜åˆ†é¡µçŠ¶æ€ï¼Œå› æ­¤éœ€è¦ç»ˆæ­¢ä¸€äº›å‰å°è¿›ç¨‹æ¥ç¡®ä¿ç”¨æˆ·ç•Œé¢æ­£å¸¸å“åº”ã€‚</div><div class="line"></div><div class="line">**å¯è§è¿›ç¨‹**</div><div class="line"></div><div class="line">æ²¡æœ‰ä»»ä½•å‰å°ç»„ä»¶ã€ä½†ä»ä¼šå½±å“ç”¨æˆ·åœ¨å±å¹•ä¸Šæ‰€è§å†…å®¹çš„è¿›ç¨‹ã€‚ å¦‚æœä¸€ä¸ªè¿›ç¨‹æ»¡è¶³ä»¥ä¸‹ä»»ä¸€æ¡ä»¶ï¼Œå³è§†ä¸ºå¯è§è¿›ç¨‹ï¼š</div><div class="line"></div><div class="line">- æ‰˜ç®¡ä¸åœ¨å‰å°ã€ä½†ä»å¯¹ç”¨æˆ·å¯è§çš„ Activityï¼ˆå·²è°ƒç”¨å…¶ onPause() æ–¹æ³•ï¼‰ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå‰å° Activity å¯åŠ¨äº†ä¸€ä¸ªå¯¹è¯æ¡†ï¼Œå…è®¸åœ¨å…¶åæ˜¾ç¤ºä¸Šä¸€ Activityï¼Œåˆ™æœ‰å¯èƒ½ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚</div><div class="line">- æ‰˜ç®¡ç»‘å®šåˆ°å¯è§ï¼ˆæˆ–å‰å°ï¼‰Activity çš„ Serviceã€‚</div><div class="line"></div><div class="line">å¯è§è¿›ç¨‹è¢«è§†ä¸ºæ˜¯æå…¶é‡è¦çš„è¿›ç¨‹ï¼Œé™¤éä¸ºäº†ç»´æŒæ‰€æœ‰å‰å°è¿›ç¨‹åŒæ—¶è¿è¡Œè€Œå¿…é¡»ç»ˆæ­¢ï¼Œå¦åˆ™ç³»ç»Ÿä¸ä¼šç»ˆæ­¢è¿™äº›è¿›ç¨‹ã€‚</div><div class="line"></div><div class="line">**æœåŠ¡è¿›ç¨‹**</div><div class="line"></div><div class="line">æ­£åœ¨è¿è¡Œå·²ä½¿ç”¨ startService() æ–¹æ³•å¯åŠ¨çš„æœåŠ¡ä¸”ä¸å±äºä¸Šè¿°ä¸¤ä¸ªæ›´é«˜ç±»åˆ«è¿›ç¨‹çš„è¿›ç¨‹ã€‚å°½ç®¡æœåŠ¡è¿›ç¨‹ä¸ç”¨æˆ·æ‰€è§å†…å®¹æ²¡æœ‰ç›´æ¥å…³è”ï¼Œä½†æ˜¯å®ƒä»¬é€šå¸¸åœ¨æ‰§è¡Œä¸€äº›ç”¨æˆ·å…³</div><div class="line">å¿ƒçš„æ“ä½œï¼ˆä¾‹å¦‚ï¼Œåœ¨åå°æ’­æ”¾éŸ³ä¹æˆ–ä»ç½‘ç»œä¸‹è½½æ•°æ®ï¼‰ã€‚å› æ­¤ï¼Œé™¤éå†…å­˜ä¸è¶³ä»¥ç»´æŒæ‰€æœ‰å‰å°è¿›ç¨‹å’Œå¯è§è¿›ç¨‹åŒæ—¶è¿è¡Œï¼Œå¦åˆ™ç³»ç»Ÿä¼šè®©æœåŠ¡è¿›ç¨‹ä¿æŒè¿è¡ŒçŠ¶æ€ã€‚</div><div class="line"></div><div class="line">**åå°è¿›ç¨‹**</div><div class="line"></div><div class="line">åŒ…å«ç›®å‰å¯¹ç”¨æˆ·ä¸å¯è§çš„ Activity çš„è¿›ç¨‹ï¼ˆå·²è°ƒç”¨ Activity çš„ onStop() æ–¹æ³•ï¼‰ã€‚è¿™äº›è¿›ç¨‹å¯¹ç”¨æˆ·ä½“éªŒæ²¡æœ‰ç›´æ¥å½±å“ï¼Œç³»ç»Ÿå¯èƒ½éšæ—¶ç»ˆæ­¢å®ƒä»¬ï¼Œä»¥å›æ”¶å†…å­˜ä¾›å‰å°è¿›ç¨‹ã€å¯è§è¿›ç¨‹æˆ–æœåŠ¡è¿›ç¨‹ä½¿ç”¨ã€‚ é€šå¸¸ä¼šæœ‰å¾ˆå¤šåå°è¿›ç¨‹åœ¨è¿è¡Œï¼Œå› æ­¤å®ƒä»¬ä¼šä¿å­˜åœ¨ LRU ï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰åˆ—è¡¨ä¸­ï¼Œä»¥ç¡®ä¿åŒ…å«ç”¨æˆ·æœ€è¿‘æŸ¥çœ‹çš„ Activity çš„è¿›ç¨‹æœ€åä¸€ä¸ªè¢«ç»ˆæ­¢ã€‚å¦‚æœæŸä¸ª Activity æ­£ç¡®å®ç°äº†ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå¹¶ä¿å­˜äº†å…¶å½“å‰çŠ¶æ€ï¼Œåˆ™ç»ˆæ­¢å…¶è¿›ç¨‹ä¸ä¼šå¯¹ç”¨æˆ·ä½“éªŒäº§ç”Ÿæ˜æ˜¾å½±å“ï¼Œå› ä¸ºå½“ç”¨æˆ·å¯¼èˆªå›è¯¥ Activity æ—¶ï¼ŒActivity ä¼šæ¢å¤å…¶æ‰€æœ‰å¯è§çŠ¶æ€ã€‚</div><div class="line"></div><div class="line">**ç©ºè¿›ç¨‹**</div><div class="line"></div><div class="line">ä¸å«ä»»ä½•æ´»åŠ¨åº”ç”¨ç»„ä»¶çš„è¿›ç¨‹ã€‚ä¿ç•™è¿™ç§è¿›ç¨‹çš„çš„å”¯ä¸€ç›®çš„æ˜¯ç”¨ä½œç¼“å­˜ï¼Œä»¥ç¼©çŸ­ä¸‹æ¬¡åœ¨å…¶ä¸­è¿è¡Œç»„ä»¶æ‰€éœ€çš„å¯åŠ¨æ—¶é—´ã€‚ ä¸ºä½¿æ€»ä½“ç³»ç»Ÿèµ„æºåœ¨è¿›ç¨‹ç¼“å­˜å’Œåº•å±‚å†…æ ¸ç¼“å­˜ä¹‹é—´ä¿æŒå¹³è¡¡ï¼Œç³»ç»Ÿå¾€å¾€ä¼šç»ˆæ­¢è¿™äº›è¿›ç¨‹ã€‚</div><div class="line"></div><div class="line">ActivityManagerServiceè´Ÿè´£æ ¹æ®å„ç§ç­–ç•¥ç®—æ³•è®¡ç®—è¿›ç¨‹çš„adjå€¼ï¼Œç„¶åäº¤ç”±ç³»ç»Ÿå†…æ ¸è¿›è¡Œè¿›ç¨‹çš„ç®¡ç†ã€‚</div><div class="line"></div><div class="line">### SharePreferenceæ€§èƒ½ä¼˜åŒ–ï¼Œå¯ä»¥åšè¿›ç¨‹åŒæ­¥å—ï¼Ÿ</div><div class="line"></div><div class="line">åœ¨Androidä¸­, SharePreferencesæ˜¯ä¸€ä¸ªè½»é‡çº§çš„å­˜å‚¨ç±»ï¼Œç‰¹åˆ«é€‚åˆç”¨äºä¿å­˜è½¯ä»¶é…ç½®å‚æ•°ã€‚ä½¿ç”¨SharedPreferencesä¿å­˜æ•°æ®ï¼Œå…¶èƒŒåæ˜¯ç”¨xmlæ–‡ä»¶å­˜æ”¾æ•°æ®ï¼Œæ–‡ä»¶</div><div class="line">å­˜æ”¾åœ¨/data/data/ &lt; package name &gt; /shared_prefsç›®å½•ä¸‹.</div><div class="line"></div><div class="line">ä¹‹æ‰€ä»¥è¯´SharedPreferenceæ˜¯ä¸€ç§è½»é‡çº§çš„å­˜å‚¨æ–¹å¼ï¼Œæ˜¯å› ä¸ºå®ƒåœ¨åˆ›å»ºçš„æ—¶å€™ä¼šæŠŠæ•´ä¸ªæ–‡ä»¶å…¨éƒ¨åŠ è½½è¿›å†…å­˜ï¼Œå¦‚æœSharedPreferenceæ–‡ä»¶æ¯”è¾ƒå¤§ï¼Œä¼šå¸¦æ¥ä»¥ä¸‹é—®é¢˜ï¼š</div><div class="line"></div><div class="line">1. ç¬¬ä¸€æ¬¡ä»spä¸­è·å–å€¼çš„æ—¶å€™ï¼Œæœ‰å¯èƒ½é˜»å¡ä¸»çº¿ç¨‹ï¼Œä½¿ç•Œé¢å¡é¡¿ã€æ‰å¸§ã€‚</div><div class="line">2. è§£æspçš„æ—¶å€™ä¼šäº§ç”Ÿå¤§é‡çš„ä¸´æ—¶å¯¹è±¡ï¼Œå¯¼è‡´é¢‘ç¹GCï¼Œå¼•èµ·ç•Œé¢å¡é¡¿ã€‚</div><div class="line">3. è¿™äº›keyå’Œvalueä¼šæ°¸è¿œå­˜åœ¨äºå†…å­˜ä¹‹ä¸­ï¼Œå ç”¨å¤§é‡å†…å­˜ã€‚</div><div class="line"></div><div class="line">ä¼˜åŒ–å»ºè®®</div><div class="line"></div><div class="line">1. ä¸è¦å­˜æ”¾å¤§çš„keyå’Œvalueï¼Œä¼šå¼•èµ·ç•Œé¢å¡ã€é¢‘ç¹GCã€å ç”¨å†…å­˜ç­‰ç­‰ã€‚</div><div class="line">2. æ¯«ä¸ç›¸å…³çš„é…ç½®é¡¹å°±ä¸è¦æ”¾åœ¨åœ¨ä¸€èµ·ï¼Œæ–‡ä»¶è¶Šå¤§è¯»å–è¶Šæ…¢ã€‚</div><div class="line">3. è¯»å–é¢‘ç¹çš„keyå’Œä¸æ˜“å˜åŠ¨çš„keyå°½é‡ä¸è¦æ”¾åœ¨ä¸€èµ·ï¼Œå½±å“é€Ÿåº¦ï¼Œå¦‚æœæ•´ä¸ªæ–‡ä»¶å¾ˆå°ï¼Œé‚£ä¹ˆå¿½ç•¥å§ï¼Œä¸ºäº†è¿™ç‚¹æ€§èƒ½æ·»åŠ ç»´æŠ¤æˆæœ¬å¾—ä¸å¿å¤±ã€‚</div><div class="line">4. ä¸è¦ä¹±editå’Œapplyï¼Œå°½é‡æ‰¹é‡ä¿®æ”¹ä¸€æ¬¡æäº¤ï¼Œå¤šæ¬¡applyä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚</div><div class="line">5. å°½é‡ä¸è¦å­˜æ”¾JSONå’ŒHTMLï¼Œè¿™ç§åœºæ™¯è¯·ç›´æ¥ä½¿ç”¨JSONã€‚</div><div class="line">6. SharedPreferenceæ— æ³•è¿›è¡Œè·¨è¿›ç¨‹é€šä¿¡ï¼ŒMODE_MULTI_PROCESSåªæ˜¯ä¿è¯äº†åœ¨API 11ä»¥å‰çš„ç³»ç»Ÿä¸Šï¼Œå¦‚æœspå·²ç»è¢«è¯»å–è¿›å†…å­˜ï¼Œå†æ¬¡è·å–è¿™ä¸ªSharedPreferenceçš„æ—¶å€™ï¼Œå¦‚æœæœ‰è¿™ä¸ªflagï¼Œä¼šé‡æ–°è¯»ä¸€éæ–‡ä»¶ï¼Œä»…æ­¤è€Œå·²ã€‚</div><div class="line"></div><div class="line">### å¦‚ä½•åšSQLiteå‡çº§ï¼Ÿ</div><div class="line"></div><div class="line">æ•°æ®åº“å‡çº§å¢åŠ è¡¨å’Œåˆ é™¤è¡¨éƒ½ä¸æ¶‰åŠæ•°æ®è¿ç§»ï¼Œä½†æ˜¯ä¿®æ”¹è¡¨æ¶‰åŠåˆ°å¯¹åŸæœ‰æ•°æ®è¿›è¡Œè¿ç§»ã€‚å‡çº§çš„æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</div><div class="line"></div><div class="line">1. å°†ç°æœ‰è¡¨å‘½åä¸ºä¸´æ—¶è¡¨ã€‚</div><div class="line">2. åˆ›å»ºæ–°è¡¨ã€‚</div><div class="line">3. å°†ä¸´æ—¶è¡¨çš„æ•°æ®å¯¼å…¥æ–°è¡¨ã€‚</div><div class="line">4. åˆ é™¤ä¸´æ—¶è¡¨ã€‚</div><div class="line"></div><div class="line">é‡å†™</div><div class="line"></div><div class="line">å¦‚æœæ˜¯è·¨ç‰ˆæœ¬æ•°æ®åº“å‡çº§ï¼Œå¯ä»¥ç”±ä¸¤ç§æ–¹å¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</div><div class="line"></div><div class="line">1. é€çº§å‡çº§ï¼Œç¡®å®šç›¸é‚»ç‰ˆæœ¬ä¸ç°åœ¨ç‰ˆæœ¬çš„å·®åˆ«ï¼ŒV1å‡çº§åˆ°V2,V2å‡çº§åˆ°V3ï¼Œä¾æ¬¡ç±»æ¨ã€‚</div><div class="line">2. è·¨çº§å‡çº§ï¼Œç¡®å®šæ¯ä¸ªç‰ˆæœ¬ä¸ç°åœ¨æ•°æ®åº“çš„å·®åˆ«ï¼Œä¸ºæ¯ä¸ªcaseç¼–å†™ä¸“é—¨å‡çº§å¤§ä»£ç ã€‚</div><div class="line"></div><div class="line">### è¿›ç¨‹ä¿æŠ¤å¦‚ä½•åšï¼Œå¦‚ä½•å”¤é†’å…¶ä»–è¿›ç¨‹ï¼Ÿ</div><div class="line"></div><div class="line">è¿›ç¨‹ä¿æ´»ä¸»è¦æœ‰ä¸¤ä¸ªæ€è·¯ï¼š</div><div class="line"></div><div class="line">1. æå‡è¿›ç¨‹çš„ä¼˜å…ˆçº§ï¼Œé™ä½è¿›ç¨‹è¢«æ€æ­»çš„æ¦‚ç‡ã€‚</div><div class="line">2. æ‹‰æ´»å·²ç»è¢«æ€æ­»çš„è¿›ç¨‹ã€‚</div><div class="line"></div><div class="line">å¦‚ä½•æå‡ä¼˜å…ˆçº§ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</div><div class="line"></div><div class="line">ç›‘æ§æ‰‹æœºé”å±äº‹ä»¶ï¼Œåœ¨å±å¹•é”å±æ—¶å¯åŠ¨ä¸€ä¸ªåƒç´ çš„Activityï¼Œåœ¨ç”¨æˆ·è§£é”æ—¶å°†Activityé”€æ¯æ‰ï¼Œå‰å°Activityå¯ä»¥å°†è¿›ç¨‹å˜æˆå‰å°è¿›ç¨‹ï¼Œä¼˜å…ˆçº§å‡çº§åˆ°æœ€é«˜ã€‚</div><div class="line"></div><div class="line">å¦‚æœæ‹‰æ´»</div><div class="line"></div><div class="line">åˆ©ç”¨å¹¿æ’­æ‹‰æ´»Activityã€‚</div><div class="line"></div><div class="line">### ç†è§£åºåˆ—åŒ–å—ï¼ŒAndroidä¸ºä»€ä¹ˆå¼•å…¥Parcelableï¼Ÿ</div><div class="line"></div><div class="line">æ‰€è°“åºåˆ—åŒ–å°±æ˜¯å°†å¯¹è±¡å˜æˆäºŒè¿›åˆ¶æµï¼Œä¾¿äºå­˜å‚¨å’Œä¼ è¾“ã€‚</div><div class="line"></div><div class="line">- Serializableæ˜¯javaå®ç°çš„ä¸€å¥—åºåˆ—åŒ–æ–¹å¼ï¼Œå¯èƒ½ä¼šè§¦å‘é¢‘ç¹çš„IOæ“ä½œï¼Œæ•ˆç‡æ¯”è¾ƒä½ï¼Œé€‚åˆå°†å¯¹è±¡å­˜å‚¨åˆ°ç£ç›˜ä¸Šçš„æƒ…å†µã€‚</div><div class="line">- Parcelableæ˜¯Androidæä¾›ä¸€å¥—åºåˆ—åŒ–æœºåˆ¶ï¼Œå®ƒå°†åºåˆ—åŒ–åçš„å­—èŠ‚æµå†™å…¥åˆ°ä¸€ä¸ªå…±æ€§å†…å­˜ä¸­ï¼Œå…¶ä»–å¯¹è±¡å¯ä»¥ä»è¿™å—å…±äº«å†…å­˜ä¸­è¯»å‡ºå­—èŠ‚æµï¼Œå¹¶ååºåˆ—åŒ–æˆå¯¹è±¡ã€‚å› æ­¤æ•ˆç‡æ¯”è¾ƒé«˜ï¼Œé€‚åˆåœ¨å¯¹è±¡é—´æˆ–è€…è¿›ç¨‹é—´ä¼ é€’ä¿¡æ¯ã€‚</div><div class="line"></div><div class="line">### å¦‚ä½•è®¡ç®—ä¸€ä¸ªBitmapå ç”¨å†…å­˜çš„å¤§å°ï¼Œæ€ä¹ˆä¿è¯åŠ è½½Bitmapä¸äº§ç”Ÿå†…å­˜æº¢å‡ºï¼Ÿ</div><div class="line"></div><div class="line">Bitamp å ç”¨å†…å­˜å¤§å° = å®½åº¦åƒç´  x ï¼ˆinTargetDensity / inDensityï¼‰ x é«˜åº¦åƒç´  x ï¼ˆinTargetDensity / inDensityï¼‰x ä¸€ä¸ªåƒç´ æ‰€å çš„å†…å­˜</div><div class="line"></div><div class="line">æ³¨ï¼šè¿™é‡ŒinDensityè¡¨ç¤ºç›®æ ‡å›¾ç‰‡çš„dpiï¼ˆæ”¾åœ¨å“ªä¸ªèµ„æºæ–‡ä»¶å¤¹ä¸‹ï¼‰ï¼ŒinTargetDensityè¡¨ç¤ºç›®æ ‡å±å¹•çš„dpiï¼Œæ‰€ä»¥ä½ å¯ä»¥å‘ç°inDensityå’ŒinTargetDensityä¼šå¯¹Bitmapçš„å®½é«˜</div><div class="line">è¿›è¡Œæ‹‰ä¼¸ï¼Œè¿›è€Œæ”¹å˜Bitmapå ç”¨å†…å­˜çš„å¤§å°ã€‚</div><div class="line"></div><div class="line">åœ¨Bitmapé‡Œæœ‰ä¸¤ä¸ªè·å–å†…å­˜å ç”¨å¤§å°çš„æ–¹æ³•ã€‚</div><div class="line"></div><div class="line">- getByteCount()ï¼šAPI12 åŠ å…¥ï¼Œä»£è¡¨å­˜å‚¨ Bitmap çš„åƒç´ éœ€è¦çš„æœ€å°‘å†…å­˜ã€‚</div><div class="line">- getAllocationByteCount()ï¼šAPI19 åŠ å…¥ï¼Œä»£è¡¨åœ¨å†…å­˜ä¸­ä¸º Bitmap åˆ†é…çš„å†…å­˜å¤§å°ï¼Œä»£æ›¿äº† getByteCount() æ–¹æ³•ã€‚</div><div class="line"></div><div class="line">åœ¨ä¸å¤ç”¨ Bitmap æ—¶ï¼ŒgetByteCount() å’Œ getAllocationByteCount è¿”å›çš„ç»“æœæ˜¯ä¸€æ ·çš„ã€‚åœ¨é€šè¿‡å¤ç”¨ Bitmap æ¥è§£ç å›¾ç‰‡æ—¶ï¼Œé‚£ä¹ˆ getByteCount() è¡¨ç¤ºæ–°è§£ç å›¾ç‰‡å ç”¨å†…å­˜çš„å¤§</div><div class="line">å°ï¼ŒgetAllocationByteCount() è¡¨ç¤ºè¢«å¤ç”¨ BitmapçœŸå®å ç”¨çš„å†…å­˜å¤§å°ï¼ˆå³ mBuffer çš„é•¿åº¦ï¼‰ã€‚</div><div class="line"></div><div class="line">ä¸ºäº†ä¿è¯åœ¨åŠ è½½Bitmapçš„æ—¶å€™ä¸äº§ç”Ÿå†…å­˜æº¢å‡ºï¼Œå¯ä»¥å—ç”¨BitmapFactoryè¿›è¡Œå›¾ç‰‡å‹ç¼©ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªå‚æ•°ï¼š</div><div class="line"></div><div class="line">- BitmapFactory.Options.inPreferredConfigï¼šå°†ARGB_8888æ”¹ä¸ºRGB_565ï¼Œæ”¹å˜ç¼–ç æ–¹å¼ï¼ŒèŠ‚çº¦å†…å­˜ã€‚</div><div class="line">- BitmapFactory.Options.inSampleSizeï¼šç¼©æ”¾æ¯”ä¾‹ï¼Œå¯ä»¥å‚è€ƒLubané‚£ä¸ªåº“ï¼Œæ ¹æ®å›¾ç‰‡å®½é«˜è®¡ç®—å‡ºåˆé€‚çš„ç¼©æ”¾æ¯”ä¾‹ã€‚</div><div class="line">- BitmapFactory.Options.inPurgeableï¼šè®©ç³»ç»Ÿå¯ä»¥å†…å­˜ä¸è¶³æ—¶å›æ”¶å†…å­˜ã€‚</div><div class="line"></div><div class="line">### Androidå¦‚ä½•åœ¨ä¸å‹ç¼©çš„æƒ…å†µä¸‹åŠ è½½é«˜æ¸…å¤§å›¾ï¼Ÿ</div><div class="line"></div><div class="line">ä½¿ç”¨BitmapRegionDecoderè¿›è¡Œå¸ƒå±€åŠ è½½ã€‚</div><div class="line"></div><div class="line">### Androidé‡Œçš„å†…å­˜ç¼“å­˜å’Œç£ç›˜ç¼“å­˜æ˜¯æ€ä¹ˆå®ç°çš„ã€‚</div><div class="line"></div><div class="line">å†…å­˜ç¼“å­˜åŸºäºLruCacheå®ç°ï¼Œç£ç›˜ç¼“å­˜åŸºäºDiskLruCacheå®ç°ã€‚è¿™ä¸¤ä¸ªç±»éƒ½åŸºäºLruç®—æ³•å’ŒLinkedHashMapæ¥å®ç°ã€‚</div><div class="line"></div><div class="line">LRUç®—æ³•å¯ä»¥ç”¨ä¸€å¥è¯æ¥æè¿°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</div><div class="line"></div><div class="line">&gt;LRUæ˜¯Least Recently Usedçš„ç¼©å†™ï¼Œæœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ç®—æ³•ï¼Œä»å®ƒçš„åå­—å°±å¯ä»¥çœ‹å‡ºï¼Œå®ƒçš„æ ¸å¿ƒåŸåˆ™æ˜¯å¦‚æœä¸€ä¸ªæ•°æ®åœ¨æœ€è¿‘ä¸€æ®µæ—¶é—´æ²¡æœ‰ä½¿ç”¨åˆ°ï¼Œé‚£ä¹ˆå®ƒåœ¨å°†æ¥è¢«</div><div class="line">è®¿é—®åˆ°çš„å¯èƒ½æ€§ä¹Ÿå¾ˆå°ï¼Œåˆ™è¿™ç±»æ•°æ®é¡¹ä¼šè¢«ä¼˜å…ˆæ·˜æ±°æ‰ã€‚</div><div class="line"></div><div class="line">LruCacheçš„åŸç†æ˜¯åˆ©ç”¨LinkedHashMapæŒæœ‰å¯¹è±¡çš„å¼ºå¼•ç”¨ï¼ŒæŒ‰ç…§Lruç®—æ³•è¿›è¡Œå¯¹è±¡æ·˜æ±°ã€‚å…·ä½“è¯´æ¥å‡è®¾æˆ‘ä»¬ä»è¡¨å°¾è®¿é—®æ•°æ®ï¼Œåœ¨è¡¨å¤´åˆ é™¤æ•°æ®ï¼Œå½“è®¿é—®çš„æ•°æ®é¡¹åœ¨é“¾è¡¨ä¸­å­˜åœ¨æ—¶ï¼Œåˆ™å°†è¯¥æ•°æ®é¡¹ç§»åŠ¨åˆ°è¡¨å°¾ï¼Œå¦åˆ™åœ¨è¡¨å°¾æ–°å»ºä¸€ä¸ªæ•°æ®é¡¹ã€‚å½“é“¾è¡¨å®¹é‡è¶…è¿‡ä¸€å®šé˜ˆå€¼ï¼Œåˆ™ç§»é™¤è¡¨å¤´çš„æ•°æ®ã€‚</div><div class="line">                                                      </div><div class="line">ä¸ºä»€ä¹ˆä¼šé€‰æ‹©LinkedHashMapå‘¢ï¼Ÿ</div><div class="line"></div><div class="line">è¿™è·ŸLinkedHashMapçš„ç‰¹æ€§æœ‰å…³ï¼ŒLinkedHashMapçš„æ„é€ å‡½æ•°é‡Œæœ‰ä¸ªå¸ƒå°”å‚æ•°accessOrderï¼Œå½“å®ƒä¸ºtrueæ—¶ï¼ŒLinkedHashMapä¼šä»¥è®¿é—®é¡ºåºä¸ºåºæ’åˆ—å…ƒç´ ï¼Œå¦åˆ™ä»¥æ’å…¥é¡ºåºä¸ºåºæ’åºå…ƒç´ ã€‚</div><div class="line"></div><div class="line">DiskLruCacheä¸LruCacheåŸç†ç›¸ä¼¼ï¼Œåªæ˜¯å¤šäº†ä¸€ä¸ªjournalæ–‡ä»¶æ¥åšç£ç›˜æ–‡ä»¶çš„ç®¡ç†å’Œè¿ç¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</div></pre></td></tr></table></figure><p>libcore.io.DiskLruCache<br>1<br>1<br>1</p><p>DIRTY 1517126350519<br>CLEAN 1517126350519 5325928<br>REMOVE 1517126350519<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">æ³¨ï¼šè¿™é‡Œçš„ç¼“å­˜ç›®å½•æ˜¯åº”ç”¨çš„ç¼“å­˜ç›®å½•/data/data/pckagename/cacheï¼Œæœªrootçš„æ‰‹æœºå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›å…¥åˆ°è¯¥ç›®å½•ä¸­æˆ–è€…å°†è¯¥ç›®å½•æ•´ä½“æ‹·è´å‡ºæ¥ï¼š</div><div class="line"></div><div class="line">```java</div><div class="line"></div><div class="line">//è¿›å…¥/data/data/pckagename/cacheç›®å½•</div><div class="line">adb shell</div><div class="line">run-as com.your.packagename </div><div class="line">cp /data/data/com.your.packagename/</div><div class="line"></div><div class="line">//å°†/data/data/pckagenameç›®å½•æ‹·è´å‡ºæ¥</div><div class="line">adb backup -noapk com.your.packagename</div></pre></td></tr></table></figure></p><p>æˆ‘ä»¬æ¥åˆ†æä¸‹è¿™ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼š</p><ul><li>ç¬¬ä¸€è¡Œï¼šlibcore.io.DiskLruCacheï¼Œå›ºå®šå­—ç¬¦ä¸²ã€‚</li><li>ç¬¬äºŒè¡Œï¼š1ï¼ŒDiskLruCacheæºç ç‰ˆæœ¬å·ã€‚</li><li>ç¬¬ä¸‰è¡Œï¼š1ï¼ŒAppçš„ç‰ˆæœ¬å·ï¼Œé€šè¿‡open()æ–¹æ³•ä¼ å…¥è¿›å»çš„ã€‚</li><li>ç¬¬å››è¡Œï¼š1ï¼Œæ¯ä¸ªkeyå¯¹åº”å‡ ä¸ªæ–‡ä»¶ï¼Œä¸€èˆ¬ä¸º1.</li><li>ç¬¬äº”è¡Œï¼šç©ºè¡Œ</li><li>ç¬¬å…­è¡ŒåŠåç»­è¡Œï¼šç¼“å­˜æ“ä½œè®°å½•ã€‚</li></ul><p>ç¬¬å…­è¡ŒåŠåç»­è¡Œè¡¨ç¤ºç¼“å­˜æ“ä½œè®°å½•ï¼Œå…³äºæ“ä½œè®°å½•ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ä»¥ä¸‹ä¸‰ç‚¹ï¼š</p><ol><li>DIRTY è¡¨ç¤ºä¸€ä¸ªentryæ­£åœ¨è¢«å†™å…¥ã€‚å†™å…¥åˆ†ä¸¤ç§æƒ…å†µï¼Œå¦‚æœæˆåŠŸä¼šç´§æ¥ç€å†™å…¥ä¸€è¡ŒCLEANçš„è®°å½•ï¼›å¦‚æœå¤±è´¥ï¼Œä¼šå¢åŠ ä¸€è¡ŒREMOVEè®°å½•ã€‚æ³¨æ„å•ç‹¬åªæœ‰DIRTYçŠ¶æ€çš„è®°å½•æ˜¯éæ³•çš„ã€‚</li><li>å½“æ‰‹åŠ¨è°ƒç”¨remove(key)æ–¹æ³•çš„æ—¶å€™ä¹Ÿä¼šå†™å…¥ä¸€æ¡REMOVEè®°å½•ã€‚</li><li>READå°±æ˜¯è¯´æ˜æœ‰ä¸€æ¬¡è¯»å–çš„è®°å½•ã€‚</li><li>CLEANçš„åé¢è¿˜è®°å½•äº†æ–‡ä»¶çš„é•¿åº¦ï¼Œæ³¨æ„å¯èƒ½ä¼šä¸€ä¸ªkeyå¯¹åº”å¤šä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆå°±ä¼šæœ‰å¤šä¸ªæ•°å­—ã€‚</li></ol><h3 id="PathClassLoaderä¸DexClassLoaderæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#PathClassLoaderä¸DexClassLoaderæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="PathClassLoaderä¸DexClassLoaderæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>PathClassLoaderä¸DexClassLoaderæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><ul><li>PathClassLoaderï¼šåªèƒ½åŠ è½½å·²ç»å®‰è£…åˆ°Androidç³»ç»Ÿçš„APKæ–‡ä»¶ï¼Œå³/data/appç›®å½•ï¼ŒAndroidé»˜è®¤çš„ç±»åŠ è½½å™¨ã€‚</li><li>DexClassLoaderï¼šå¯ä»¥åŠ è½½ä»»æ„ç›®å½•ä¸‹çš„dexã€jarã€apkã€zipæ–‡ä»¶ã€‚</li></ul><h3 id="WebViewä¼˜åŒ–äº†è§£å—ï¼Œå¦‚ä½•æé«˜WebViewçš„åŠ è½½é€Ÿåº¦ï¼Ÿ"><a href="#WebViewä¼˜åŒ–äº†è§£å—ï¼Œå¦‚ä½•æé«˜WebViewçš„åŠ è½½é€Ÿåº¦ï¼Ÿ" class="headerlink" title="WebViewä¼˜åŒ–äº†è§£å—ï¼Œå¦‚ä½•æé«˜WebViewçš„åŠ è½½é€Ÿåº¦ï¼Ÿ"></a>WebViewä¼˜åŒ–äº†è§£å—ï¼Œå¦‚ä½•æé«˜WebViewçš„åŠ è½½é€Ÿåº¦ï¼Ÿ</h3><p>ä¸ºä»€ä¹ˆWebViewåŠ è½½ä¼šæ…¢å‘¢ï¼Ÿ</p><blockquote><p>è¿™æ˜¯å› ä¸ºåœ¨å®¢æˆ·ç«¯ä¸­ï¼ŒåŠ è½½H5é¡µé¢ä¹‹å‰ï¼Œéœ€è¦å…ˆåˆå§‹åŒ–WebViewï¼Œåœ¨WebViewå®Œå…¨åˆå§‹åŒ–å®Œæˆä¹‹å‰ï¼Œåç»­çš„ç•Œé¢åŠ è½½è¿‡ç¨‹éƒ½æ˜¯è¢«é˜»å¡çš„ã€‚</p></blockquote><p>ä¼˜åŒ–æ‰‹æ®µå›´ç»•ç€ä»¥ä¸‹ä¸¤ä¸ªç‚¹è¿›è¡Œï¼š</p><ol><li>é¢„åŠ è½½WebViewã€‚</li><li>åŠ è½½WebViewçš„åŒæ—¶ï¼Œè¯·æ±‚H5é¡µé¢æ•°æ®ã€‚</li></ol><p>å› æ­¤å¸¸è§çš„æ–¹æ³•æ˜¯ï¼š</p><ol><li>å…¨å±€WebViewã€‚</li><li>å®¢æˆ·ç«¯ä»£ç†é¡µé¢è¯·æ±‚ã€‚WebViewåˆå§‹åŒ–å®Œæˆåå‘å®¢æˆ·ç«¯è¯·æ±‚æ•°æ®ã€‚</li><li>assetå­˜æ”¾ç¦»çº¿åŒ…ã€‚</li></ol><p>é™¤æ­¤ä¹‹å¤–è¿˜æœ‰ä¸€äº›å…¶ä»–çš„ä¼˜åŒ–æ‰‹æ®µï¼š</p><ul><li>è„šæœ¬æ‰§è¡Œæ…¢ï¼Œå¯ä»¥è®©è„šæœ¬æœ€åè¿è¡Œï¼Œä¸é˜»å¡é¡µé¢è§£æã€‚</li><li>DNSä¸é“¾æ¥æ…¢ï¼Œå¯ä»¥è®©å®¢æˆ·ç«¯å¤ç”¨ä½¿ç”¨çš„åŸŸåä¸é“¾æ¥ã€‚</li><li>Reactæ¡†æ¶ä»£ç æ‰§è¡Œæ…¢ï¼Œå¯ä»¥å°†è¿™éƒ¨åˆ†ä»£ç æ‹†åˆ†å‡ºæ¥ï¼Œæå‰è¿›è¡Œè§£æã€‚</li></ul><h3 id="Javaå’ŒJSçš„ç›¸äº’è°ƒç”¨æ€ä¹ˆå®ç°ï¼Œæœ‰åšè¿‡ä»€ä¹ˆä¼˜åŒ–å—ï¼Ÿ"><a href="#Javaå’ŒJSçš„ç›¸äº’è°ƒç”¨æ€ä¹ˆå®ç°ï¼Œæœ‰åšè¿‡ä»€ä¹ˆä¼˜åŒ–å—ï¼Ÿ" class="headerlink" title="Javaå’ŒJSçš„ç›¸äº’è°ƒç”¨æ€ä¹ˆå®ç°ï¼Œæœ‰åšè¿‡ä»€ä¹ˆä¼˜åŒ–å—ï¼Ÿ"></a>Javaå’ŒJSçš„ç›¸äº’è°ƒç”¨æ€ä¹ˆå®ç°ï¼Œæœ‰åšè¿‡ä»€ä¹ˆä¼˜åŒ–å—ï¼Ÿ</h3><p>jockeyjsï¼š<a href="https://github.com/tcoulter/jockeyjs" target="_blank" rel="external">https://github.com/tcoulter/jockeyjs</a></p><p>å¯¹åè®®è¿›è¡Œç»Ÿä¸€çš„å°è£…å’Œå¤„ç†ã€‚</p><h3 id="JNIäº†è§£å—ï¼ŒJavaä¸C-å¦‚ä½•ç›¸äº’è°ƒç”¨ï¼Ÿ"><a href="#JNIäº†è§£å—ï¼ŒJavaä¸C-å¦‚ä½•ç›¸äº’è°ƒç”¨ï¼Ÿ" class="headerlink" title="JNIäº†è§£å—ï¼ŒJavaä¸C++å¦‚ä½•ç›¸äº’è°ƒç”¨ï¼Ÿ"></a>JNIäº†è§£å—ï¼ŒJavaä¸C++å¦‚ä½•ç›¸äº’è°ƒç”¨ï¼Ÿ</h3><p>Javaè°ƒç”¨C++</p><ol><li>åœ¨Javaä¸­å£°æ˜Nativeæ–¹æ³•ï¼ˆå³éœ€è¦è°ƒç”¨çš„æœ¬åœ°æ–¹æ³•ï¼‰</li><li>ç¼–è¯‘ä¸Šè¿° Javaæºæ–‡ä»¶javacï¼ˆå¾—åˆ° .classæ–‡ä»¶ï¼‰</li><li>é€šè¿‡ javah å‘½ä»¤å¯¼å‡ºJNIçš„å¤´æ–‡ä»¶ï¼ˆ.hæ–‡ä»¶ï¼‰</li><li>ä½¿ç”¨ Javaéœ€è¦äº¤äº’çš„æœ¬åœ°ä»£ç  å®ç°åœ¨ Javaä¸­å£°æ˜çš„Nativeæ–¹æ³• </li><li>ç¼–è¯‘.soåº“æ–‡ä»¶</li><li>é€šè¿‡Javaå‘½ä»¤æ‰§è¡Œ Javaç¨‹åºï¼Œæœ€ç»ˆå®ç°Javaè°ƒç”¨æœ¬åœ°ä»£ç </li></ol><p>C++è°ƒç”¨Java</p><ol><li>ä»classpathè·¯å¾„ä¸‹æœç´¢ClassMethodè¿™ä¸ªç±»ï¼Œå¹¶è¿”å›è¯¥ç±»çš„Classå¯¹è±¡ã€‚</li><li>è·å–ç±»çš„é»˜è®¤æ„é€ æ–¹æ³•IDã€‚</li><li>æŸ¥æ‰¾å®ä¾‹æ–¹æ³•çš„IDã€‚</li><li>åˆ›å»ºè¯¥ç±»çš„å®ä¾‹ã€‚</li><li>è°ƒç”¨å¯¹è±¡çš„å®ä¾‹æ–¹æ³•ã€‚</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="function">JNIEXPORT <span class="keyword">void</span> JNICALL <span class="title">Java_com_study_jnilearn_AccessMethod_callJavaInstaceMethod</span>  </span></div><div class="line"><span class="params">(JNIEnv *env, jclass cls)</span>  </div><div class="line">&#123;  </div><div class="line">    jclass clazz = <span class="literal">NULL</span>;  </div><div class="line">    jobject jobj = <span class="literal">NULL</span>;  </div><div class="line">    jmethodID mid_construct = <span class="literal">NULL</span>;  </div><div class="line">    jmethodID mid_instance = <span class="literal">NULL</span>;  </div><div class="line">    jstring str_arg = <span class="literal">NULL</span>;  </div><div class="line">    <span class="comment">// 1ã€ä»classpathè·¯å¾„ä¸‹æœç´¢ClassMethodè¿™ä¸ªç±»ï¼Œå¹¶è¿”å›è¯¥ç±»çš„Classå¯¹è±¡  </span></div><div class="line">    clazz = (*env)-&gt;FindClass(env, <span class="string">"com/study/jnilearn/ClassMethod"</span>);  </div><div class="line">    <span class="keyword">if</span> (clazz == <span class="literal">NULL</span>) &#123;  </div><div class="line">        <span class="built_in">printf</span>(<span class="string">"æ‰¾ä¸åˆ°'com.study.jnilearn.ClassMethod'è¿™ä¸ªç±»"</span>);  </div><div class="line">        <span class="keyword">return</span>;  </div><div class="line">    &#125;  </div><div class="line"></div><div class="line">    <span class="comment">// 2ã€è·å–ç±»çš„é»˜è®¤æ„é€ æ–¹æ³•ID  </span></div><div class="line">    mid_construct = (*env)-&gt;GetMethodID(env,clazz, <span class="string">"&lt;init&gt;"</span>,<span class="string">"()V"</span>);  </div><div class="line">    <span class="keyword">if</span> (mid_construct == <span class="literal">NULL</span>) &#123;  </div><div class="line">        <span class="built_in">printf</span>(<span class="string">"æ‰¾ä¸åˆ°é»˜è®¤çš„æ„é€ æ–¹æ³•"</span>);  </div><div class="line">        <span class="keyword">return</span>;  </div><div class="line">    &#125;  </div><div class="line"></div><div class="line">    <span class="comment">// 3ã€æŸ¥æ‰¾å®ä¾‹æ–¹æ³•çš„ID  </span></div><div class="line">    mid_instance = (*env)-&gt;GetMethodID(env, clazz, <span class="string">"callInstanceMethod"</span>, <span class="string">"(Ljava/lang/String;I)V"</span>);  </div><div class="line">    <span class="keyword">if</span> (mid_instance == <span class="literal">NULL</span>) &#123;  </div><div class="line"></div><div class="line">        <span class="keyword">return</span>;  </div><div class="line">    &#125;  </div><div class="line"></div><div class="line">    <span class="comment">// 4ã€åˆ›å»ºè¯¥ç±»çš„å®ä¾‹  </span></div><div class="line">    jobj = (*env)-&gt;NewObject(env,clazz,mid_construct);  </div><div class="line">    <span class="keyword">if</span> (jobj == <span class="literal">NULL</span>) &#123;  </div><div class="line">        <span class="built_in">printf</span>(<span class="string">"åœ¨com.study.jnilearn.ClassMethodç±»ä¸­æ‰¾ä¸åˆ°callInstanceMethodæ–¹æ³•"</span>);  </div><div class="line">        <span class="keyword">return</span>;  </div><div class="line">    &#125;  </div><div class="line"></div><div class="line">    <span class="comment">// 5ã€è°ƒç”¨å¯¹è±¡çš„å®ä¾‹æ–¹æ³•  </span></div><div class="line">    str_arg = (*env)-&gt;NewStringUTF(env,<span class="string">"æˆ‘æ˜¯å®ä¾‹æ–¹æ³•"</span>);  </div><div class="line">    (*env)-&gt;CallVoidMethod(env,jobj,mid_instance,str_arg,<span class="number">200</span>);  </div><div class="line"></div><div class="line">    <span class="comment">// åˆ é™¤å±€éƒ¨å¼•ç”¨  </span></div><div class="line">    (*env)-&gt;DeleteLocalRef(env,clazz);  </div><div class="line">    (*env)-&gt;DeleteLocalRef(env,jobj);  </div><div class="line">    (*env)-&gt;DeleteLocalRef(env,str_arg);  </div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="äº†è§£æ’ä»¶åŒ–å’Œçƒ­ä¿®å¤å—ï¼Œå®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œç†è§£å®ƒä»¬çš„åŸç†å—ï¼Ÿ"><a href="#äº†è§£æ’ä»¶åŒ–å’Œçƒ­ä¿®å¤å—ï¼Œå®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œç†è§£å®ƒä»¬çš„åŸç†å—ï¼Ÿ" class="headerlink" title="äº†è§£æ’ä»¶åŒ–å’Œçƒ­ä¿®å¤å—ï¼Œå®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œç†è§£å®ƒä»¬çš„åŸç†å—ï¼Ÿ"></a>äº†è§£æ’ä»¶åŒ–å’Œçƒ­ä¿®å¤å—ï¼Œå®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œç†è§£å®ƒä»¬çš„åŸç†å—ï¼Ÿ</h3><ul><li>æ’ä»¶åŒ–ï¼šæ’ä»¶åŒ–æ˜¯ä½“ç°åœ¨åŠŸèƒ½æ‹†åˆ†æ–¹é¢çš„ï¼Œå®ƒå°†æŸä¸ªåŠŸèƒ½ç‹¬ç«‹æå–å‡ºæ¥ï¼Œç‹¬ç«‹å¼€å‘ï¼Œç‹¬ç«‹æµ‹è¯•ï¼Œå†æ’å…¥åˆ°ä¸»åº”ç”¨ä¸­ã€‚ä¾æ¬¡æ¥è¾ƒå°‘ä¸»åº”ç”¨çš„è§„æ¨¡ã€‚</li><li>çƒ­ä¿®å¤ï¼šçƒ­ä¿®å¤æ˜¯ä½“ç°åœ¨bugä¿®å¤æ–¹é¢çš„ï¼Œå®ƒå®ç°çš„æ˜¯ä¸éœ€è¦é‡æ–°å‘ç‰ˆå’Œé‡æ–°å®‰è£…ï¼Œå°±å¯ä»¥å»ä¿®å¤å·²çŸ¥çš„bugã€‚</li></ul><p>åˆ©ç”¨PathClassLoaderå’ŒDexClassLoaderå»åŠ è½½ä¸bugç±»åŒåçš„ç±»ï¼Œæ›¿æ¢æ‰bugç±»ï¼Œè¿›è€Œè¾¾åˆ°ä¿®å¤bugçš„ç›®çš„ï¼ŒåŸç†æ˜¯åœ¨appæ‰“åŒ…çš„æ—¶å€™é˜»æ­¢ç±»æ‰“ä¸ŠCLASS_ISPREVERIFIEDæ ‡å¿—ï¼Œç„¶ååœ¨<br>çƒ­ä¿®å¤çš„æ—¶å€™åŠ¨æ€æ”¹å˜BaseDexClassLoaderå¯¹è±¡é—´æ¥å¼•ç”¨çš„dexElementsï¼Œæ›¿æ¢æ‰æ—§çš„ç±»ã€‚</p><p>ç›®å‰çƒ­ä¿®å¤æ¡†æ¶ä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p><ul><li>Sophixï¼šä¿®æ”¹æ–¹æ³•æŒ‡é’ˆã€‚</li><li>Tinkerï¼šä¿®æ”¹dexæ•°ç»„å…ƒç´ ã€‚</li></ul><h3 id="å¦‚ä½•åšæ€§èƒ½ä¼˜åŒ–ï¼Ÿ"><a href="#å¦‚ä½•åšæ€§èƒ½ä¼˜åŒ–ï¼Ÿ" class="headerlink" title="å¦‚ä½•åšæ€§èƒ½ä¼˜åŒ–ï¼Ÿ"></a>å¦‚ä½•åšæ€§èƒ½ä¼˜åŒ–ï¼Ÿ</h3><ol><li>èŠ‚åˆ¶çš„ä½¿ç”¨Serviceï¼Œå½“å¯åŠ¨ä¸€ä¸ªServiceæ—¶ï¼Œç³»ç»Ÿæ€»æ˜¯å€¾å‘äºä¿ç•™è¿™ä¸ªServiceä¾èµ–çš„è¿›ç¨‹ï¼Œè¿™æ ·ä¼šé€ æˆç³»ç»Ÿèµ„æºçš„æµªè´¹ï¼Œå¯ä»¥ä½¿ç”¨IntentServiceï¼Œæ‰§è¡Œå®Œæˆä»»åŠ¡åä¼šè‡ªåŠ¨åœæ­¢ã€‚</li><li>å½“ç•Œé¢ä¸å¯è§æ—¶é‡Šæ”¾å†…å­˜ï¼Œå¯ä»¥é‡å†™Activityçš„onTrimMemory()æ–¹æ³•ï¼Œç„¶åç›‘å¬TRIM_MEMORY_UI_HIDDENè¿™ä¸ªçº§åˆ«ï¼Œè¿™ä¸ªçº§åˆ«è¯´æ˜ç”¨æˆ·ç¦»å¼€äº†é¡µé¢ï¼Œå¯ä»¥è€ƒè™‘é‡Šæ”¾å†…å­˜å’Œèµ„æºã€‚</li><li>é¿å…åœ¨Bitmapæµªè´¹è¿‡å¤šçš„å†…å­˜ï¼Œä½¿ç”¨å‹ç¼©è¿‡çš„å›¾ç‰‡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Frescoç­‰åº“æ¥ä¼˜åŒ–å¯¹Bitmapæ˜¾ç¤ºçš„ç®¡ç†ã€‚</li><li>ä½¿ç”¨ä¼˜åŒ–è¿‡çš„æ•°æ®é›†åˆSparseArrayä»£æ›¿HashMapï¼ŒHashMapä¸ºæ¯ä¸ªé”®å€¼éƒ½æä¾›ä¸€ä¸ªå¯¹è±¡å…¥å£ï¼Œä½¿ç”¨SparseArrayå¯ä»¥å…å»åŸºæœ¬å¯¹è±¡ç±»å‹è½¬æ¢ä¸ºå¼•ç”¨æ•°æ®ç±»æƒ³çš„æ—¶é—´ã€‚</li></ol><h3 id="å¦‚æœé˜²æ­¢è¿‡åº¦ç»˜åˆ¶ï¼Œå¦‚ä½•åšå¸ƒå±€ä¼˜åŒ–ï¼Ÿ"><a href="#å¦‚æœé˜²æ­¢è¿‡åº¦ç»˜åˆ¶ï¼Œå¦‚ä½•åšå¸ƒå±€ä¼˜åŒ–ï¼Ÿ" class="headerlink" title="å¦‚æœé˜²æ­¢è¿‡åº¦ç»˜åˆ¶ï¼Œå¦‚ä½•åšå¸ƒå±€ä¼˜åŒ–ï¼Ÿ"></a>å¦‚æœé˜²æ­¢è¿‡åº¦ç»˜åˆ¶ï¼Œå¦‚ä½•åšå¸ƒå±€ä¼˜åŒ–ï¼Ÿ</h3><ol><li>ä½¿ç”¨includeå¤ç”¨å¸ƒå±€æ–‡ä»¶ã€‚</li><li>ä½¿ç”¨mergeæ ‡ç­¾é¿å…åµŒå¥—å¸ƒå±€ã€‚</li><li>ä½¿ç”¨stubæ ‡ç­¾ä»…åœ¨éœ€è¦çš„æ—¶å€™åœ¨å±•ç¤ºå‡ºæ¥ã€‚</li></ol><h3 id="å¦‚ä½•æäº¤ä»£ç è´¨é‡ï¼Ÿ"><a href="#å¦‚ä½•æäº¤ä»£ç è´¨é‡ï¼Ÿ" class="headerlink" title="å¦‚ä½•æäº¤ä»£ç è´¨é‡ï¼Ÿ"></a>å¦‚ä½•æäº¤ä»£ç è´¨é‡ï¼Ÿ</h3><ol><li>é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡ï¼Œå°½å¯èƒ½é¿å…é¢‘ç¹çš„åˆ›å»ºä¸´æ—¶å¯¹è±¡ï¼Œä¾‹å¦‚åœ¨forå¾ªç¯å†…ï¼Œå‡å°‘GCçš„æ¬¡æ•°ã€‚</li><li>å°½é‡ä½¿ç”¨åŸºæœ¬æ•°æ®ç±»å‹ä»£æ›¿å¼•ç”¨æ•°æ®ç±»å‹ã€‚</li><li>é™æ€æ–¹æ³•è°ƒç”¨æ•ˆç‡é«˜äºåŠ¨æ€æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥é¿å…åˆ›å»ºé¢å¤–å¯¹è±¡ã€‚</li><li>å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹å’ŒStringç±»å‹çš„å¸¸é‡è¦ä½¿ç”¨static finalä¿®é¥°ï¼Œè¿™æ ·å¸¸é‡ä¼šåœ¨dexæ–‡ä»¶çš„åˆå§‹åŒ–å™¨ä¸­è¿›è¡Œåˆå§‹åŒ–ï¼Œä½¿ç”¨çš„æ—¶å€™å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</li><li>å¤šä½¿ç”¨ç³»ç»ŸAPIï¼Œä¾‹å¦‚æ•°ç»„æ‹·è´System.arrayCopy()æ–¹æ³•ï¼Œè¦æ¯”æˆ‘ä»¬ç”¨forå¾ªç¯æ•ˆç‡å¿«9å€ä»¥ä¸Šï¼Œå› ä¸ºç³»ç»ŸAPIå¾ˆå¤šéƒ½æ˜¯é€šè¿‡åº•å±‚çš„æ±‡ç¼–æ¨¡å¼æ‰§è¡Œçš„ï¼Œæ•ˆç‡æ¯”è¾ƒé«˜ã€‚</li></ol><h3 id="æœ‰æ²¡æœ‰é‡åˆ°64ké—®é¢˜ï¼Œä¸ºä»€ä¹ˆï¼Œå¦‚ä½•è§£å†³ï¼Ÿ"><a href="#æœ‰æ²¡æœ‰é‡åˆ°64ké—®é¢˜ï¼Œä¸ºä»€ä¹ˆï¼Œå¦‚ä½•è§£å†³ï¼Ÿ" class="headerlink" title="æœ‰æ²¡æœ‰é‡åˆ°64ké—®é¢˜ï¼Œä¸ºä»€ä¹ˆï¼Œå¦‚ä½•è§£å†³ï¼Ÿ"></a>æœ‰æ²¡æœ‰é‡åˆ°64ké—®é¢˜ï¼Œä¸ºä»€ä¹ˆï¼Œå¦‚ä½•è§£å†³ï¼Ÿ</h3><ul><li>åœ¨DEXæ–‡ä»¶ä¸­ï¼Œmethodã€fieldã€classç­‰çš„ä¸ªæ•°ä½¿ç”¨shortç±»å‹æ¥åšç´¢å¼•ï¼Œå³ä¸¤ä¸ªå­—èŠ‚ï¼ˆ65535ï¼‰ï¼Œmethodã€fieldã€classç­‰å‡æœ‰æ­¤é™åˆ¶ã€‚</li><li>APKåœ¨å®‰è£…è¿‡ç¨‹ä¸­ä¼šè°ƒç”¨dexoptå°†DEXæ–‡ä»¶ä¼˜åŒ–æˆODEXæ–‡ä»¶ï¼Œdexoptä½¿ç”¨LinearAllocæ¥å­˜å‚¨åº”ç”¨ä¿¡æ¯ï¼Œå…³äºLinearAllocç¼“å†²åŒºå¤§å°ï¼Œä¸åŒçš„ç‰ˆæœ¬ç»å†äº†4M/8M/16Mçš„é™åˆ¶ï¼Œè¶…å‡º<br>ç¼“å†²åŒºæ—¶å°±ä¼šæŠ›å‡ºINSTALL_FAILED_DEXOPTé”™è¯¯ã€‚</li></ul><p>è§£å†³æ–¹æ¡ˆæ˜¯Googleçš„MultiDexæ–¹æ¡ˆï¼Œå…·ä½“å‚è§ï¼š<a href="https://developer.android.com/studio/build/multidex.html?hl=zh-cn" target="_blank" rel="external">é…ç½®æ–¹æ³•æ•°è¶…è¿‡ 64K çš„åº”ç”¨</a>ã€‚</p><h3 id="MVCã€MVPä¸MVVMä¹‹é—´çš„å¯¹æ¯”åˆ†æï¼Ÿ"><a href="#MVCã€MVPä¸MVVMä¹‹é—´çš„å¯¹æ¯”åˆ†æï¼Ÿ" class="headerlink" title="MVCã€MVPä¸MVVMä¹‹é—´çš„å¯¹æ¯”åˆ†æï¼Ÿ"></a>MVCã€MVPä¸MVVMä¹‹é—´çš„å¯¹æ¯”åˆ†æï¼Ÿ</h3><p><img src="https://github.com/BeesAndroid/BeesAndroid/blob/master/art/practice/project/module/mvp_structure.png"></p><ul><li>MVCï¼šPCæ—¶ä»£å°±æœ‰çš„æ¶æ„æ–¹æ¡ˆï¼Œåœ¨Androidä¸Šä¹Ÿæ˜¯æœ€æ—©çš„æ–¹æ¡ˆï¼ŒActivity/Fragmentè¿™äº›ä¸Šå¸è§’è‰²æ—¢æ‰¿æ‹…äº†Vçš„è§’è‰²ï¼Œä¹Ÿæ‰¿æ‹…äº†Cçš„è§’è‰²ï¼Œå°é¡¹ç›®å¼€å‘èµ·æ¥ååˆ†é¡ºæ‰‹ï¼Œå¤§é¡¹ç›®å°±ä¼šé‡åˆ°<br>è€¦åˆè¿‡é‡ï¼ŒActivity/Fragmentç±»è¿‡å¤§ç­‰é—®é¢˜ã€‚</li><li>MVPï¼šä¸ºäº†è§£å†³MVCè€¦åˆè¿‡é‡çš„é—®é¢˜ï¼ŒMVPçš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯æä¾›ä¸€ä¸ªPresenterå°†è§†å›¾é€»è¾‘Iå’Œä¸šåŠ¡é€»è¾‘ç›¸åˆ†ç¦»ï¼Œè¾¾åˆ°è§£è€¦çš„ç›®çš„ã€‚</li><li>MVVMï¼šä½¿ç”¨ViewModelä»£æ›¿Presenterï¼Œå®ç°æ•°æ®ä¸Viewçš„åŒå‘ç»‘å®šï¼Œè¿™å¥—æ¡†æ¶æœ€æ—©ä½¿ç”¨çš„data-bindingå°†æ•°æ®ç»‘å®šåˆ°xmlé‡Œï¼Œè¿™ä¹ˆåšåœ¨å¤§è§„æ¨¡åº”ç”¨çš„æ—¶å€™æ˜¯ä¸è¡Œçš„ï¼Œä¸è¿‡æ•°æ®ç»‘å®šæ˜¯<br>ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„æ¦‚å¿µï¼Œåç»­Googleåˆæ¨å‡ºäº†ViewModelç»„ä»¶ä¸LiveDataç»„ä»¶ã€‚ViewModelç»„ä»¶è§„èŒƒäº†ViewModelæ‰€å¤„çš„åœ°ä½ã€ç”Ÿå‘½å‘¨æœŸã€ç”Ÿäº§æ–¹å¼ä»¥åŠä¸€ä¸ªActivityä¸‹å¤šä¸ªFragmentå…±äº«View<br>Modelæ•°æ®çš„é—®é¢˜ã€‚LiveDataç»„ä»¶åˆ™æä¾›äº†åœ¨Javaå±‚é¢Viewè®¢é˜…ViewModelæ•°æ®æºçš„å®ç°æ–¹æ¡ˆã€‚</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;ä¸€æ¬¡æ¬¡çš„æŒ‚äºä¸€é¢è®©æˆ‘ç­‹ç–²åŠ›ç«­â€¦æ„è¯†åˆ°è‡ªå·±å­˜åœ¨çœ¼é«˜æ‰‹ä½çš„çŠ¶æ€â€¦å‡†å¤‡é‡æ–°ä¸Šè·¯å¤¯å®åŸºç¡€&lt;br&gt;æœ¬ç‰‡æ–‡ç« Fork from &lt;a href=&quot;https://github.com/guoxiaoxing/android-interview&quot; target=
      
    
    </summary>
    
    
      <category term="Android" scheme="https://edward7zhang.github.io/tags/Android/"/>
    
      <category term="Interview" scheme="https://edward7zhang.github.io/tags/Interview/"/>
    
  </entry>
  
</feed>
